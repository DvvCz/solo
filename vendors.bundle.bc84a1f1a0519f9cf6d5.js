/*! For license information please see vendors.bundle.bc84a1f1a0519f9cf6d5.js.LICENSE.txt */
(self.webpackChunkblocklyprop_solo=self.webpackChunkblocklyprop_solo||[]).push([[216],{179:(t,e,i)=>{"use strict";i.d(e,{S1:()=>Wt});var n=i(538),o=i(343);var r,s=i(655),a=i(769),l=i(844),c=i(321),h=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],u=function(){function t(e){void 0===e&&(e={}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(){(0,a.c)((function(e){var i=(0,n.Gd)();if(!i)return e;var o=i.getIntegration(t);if(o){var r=i.getClient(),s=r?r.getOptions():{},a="function"==typeof o._mergeOptions?o._mergeOptions(s):{};return"function"!=typeof o._shouldDropEvent?e:o._shouldDropEvent(e,a)?null:e}return e}))},t.prototype._shouldDropEvent=function(t,e){return this._isSentryError(t,e)?(o.k.warn("Event dropped due to being internal Sentry Error.\nEvent: "+(0,l.jH)(t)),!0):this._isIgnoredError(t,e)?(o.k.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+(0,l.jH)(t)),!0):this._isDeniedUrl(t,e)?(o.k.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+(0,l.jH)(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0):!this._isAllowedUrl(t,e)&&(o.k.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+(0,l.jH)(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0)},t.prototype._isSentryError=function(t,e){if(!e.ignoreInternal)return!1;try{return t&&t.exception&&t.exception.values&&t.exception.values[0]&&"SentryError"===t.exception.values[0].type||!1}catch(t){return!1}},t.prototype._isIgnoredError=function(t,e){return!(!e.ignoreErrors||!e.ignoreErrors.length)&&this._getPossibleEventMessages(t).some((function(t){return e.ignoreErrors.some((function(e){return(0,c.zC)(t,e)}))}))},t.prototype._isDeniedUrl=function(t,e){if(!e.denyUrls||!e.denyUrls.length)return!1;var i=this._getEventFilterUrl(t);return!!i&&e.denyUrls.some((function(t){return(0,c.zC)(i,t)}))},t.prototype._isAllowedUrl=function(t,e){if(!e.allowUrls||!e.allowUrls.length)return!0;var i=this._getEventFilterUrl(t);return!i||e.allowUrls.some((function(t){return(0,c.zC)(i,t)}))},t.prototype._mergeOptions=function(t){return void 0===t&&(t={}),{allowUrls:(0,s.fl)(this._options.whitelistUrls||[],this._options.allowUrls||[],t.whitelistUrls||[],t.allowUrls||[]),denyUrls:(0,s.fl)(this._options.blacklistUrls||[],this._options.denyUrls||[],t.blacklistUrls||[],t.denyUrls||[]),ignoreErrors:(0,s.fl)(this._options.ignoreErrors||[],t.ignoreErrors||[],h),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},t.prototype._getPossibleEventMessages=function(t){if(t.message)return[t.message];if(t.exception)try{var e=t.exception.values&&t.exception.values[0]||{},i=e.type,n=void 0===i?"":i,r=e.value,s=void 0===r?"":r;return[""+s,n+": "+s]}catch(e){return o.k.error("Cannot extract message for event "+(0,l.jH)(t)),[]}return[]},t.prototype._getEventFilterUrl=function(t){try{if(t.stacktrace){var e=t.stacktrace.frames;return e&&e[e.length-1].filename||null}if(t.exception){var i=t.exception.values&&t.exception.values[0].stacktrace&&t.exception.values[0].stacktrace.frames;return i&&i[i.length-1].filename||null}return null}catch(e){return o.k.error("Cannot extract url for event "+(0,l.jH)(t)),null}},t.id="InboundFilters",t}(),d=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){r=Function.prototype.toString,Function.prototype.toString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.__sentry_original__||this;return r.apply(i,t)}},t.id="FunctionToString",t}(),p=i(597),g=i(470),f=i(360);function m(){if(!("fetch"in(0,l.Rf)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function v(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function _(){if(!m())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(t){return!1}}var y,b=(0,l.Rf)(),w={},k={};function C(t){if(!k[t])switch(k[t]=!0,t){case"console":!function(){if(!("console"in b))return;["debug","info","warn","error","log","assert"].forEach((function(t){t in b.console&&(0,g.hl)(b.console,t,(function(e){return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];E("console",{args:i,level:t}),e&&Function.prototype.apply.call(e,b.console,i)}}))}))}();break;case"dom":!function(){if(!("document"in b))return;var t=E.bind(null,"dom"),e=I(t,!0);b.document.addEventListener("click",e,!1),b.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((function(e){var i=b[e]&&b[e].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&((0,g.hl)(i,"addEventListener",(function(e){return function(i,n,o){if("click"===i||"keypress"==i)try{var r=this,s=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},a=s[i]=s[i]||{refCount:0};if(!a.handler){var l=I(t);a.handler=l,e.call(this,i,l,o)}a.refCount+=1}catch(t){}return e.call(this,i,n,o)}})),(0,g.hl)(i,"removeEventListener",(function(t){return function(e,i,n){if("click"===e||"keypress"==e)try{var o=this,r=o.__sentry_instrumentation_handlers__||{},s=r[e];s&&(s.refCount-=1,s.refCount<=0&&(t.call(this,e,s.handler,n),s.handler=void 0,delete r[e]),0===Object.keys(r).length&&delete o.__sentry_instrumentation_handlers__)}catch(t){}return t.call(this,e,i,n)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in b))return;var t=[],e=[],i=XMLHttpRequest.prototype;(0,g.hl)(i,"open",(function(i){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=this,s=n[1];r.__sentry_xhr__={method:(0,p.HD)(n[0])?n[0].toUpperCase():n[0],url:n[1]},(0,p.HD)(s)&&"POST"===r.__sentry_xhr__.method&&s.match(/sentry_key/)&&(r.__sentry_own_request__=!0);var a=function(){if(4===r.readyState){try{r.__sentry_xhr__&&(r.__sentry_xhr__.status_code=r.status)}catch(t){}try{var i=t.indexOf(r);if(-1!==i){t.splice(i);var o=e.splice(i)[0];r.__sentry_xhr__&&void 0!==o[0]&&(r.__sentry_xhr__.body=o[0])}}catch(t){}E("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:r})}};return"onreadystatechange"in r&&"function"==typeof r.onreadystatechange?(0,g.hl)(r,"onreadystatechange",(function(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return a(),t.apply(r,e)}})):r.addEventListener("readystatechange",a),i.apply(r,n)}})),(0,g.hl)(i,"send",(function(i){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t.push(this),e.push(n),E("xhr",{args:n,startTimestamp:Date.now(),xhr:this}),i.apply(this,n)}}))}();break;case"fetch":!function(){if(!function(){if(!m())return!1;var t=(0,l.Rf)();if(v(t.fetch))return!0;var e=!1,i=t.document;if(i&&"function"==typeof i.createElement)try{var n=i.createElement("iframe");n.hidden=!0,i.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=v(n.contentWindow.fetch)),i.head.removeChild(n)}catch(t){o.k.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return e}())return;(0,g.hl)(b,"fetch",(function(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n={args:e,fetchData:{method:S(e),url:x(e)},startTimestamp:Date.now()};return E("fetch",(0,s.pi)({},n)),t.apply(b,e).then((function(t){return E("fetch",(0,s.pi)((0,s.pi)({},n),{endTimestamp:Date.now(),response:t})),t}),(function(t){throw E("fetch",(0,s.pi)((0,s.pi)({},n),{endTimestamp:Date.now(),error:t})),t}))}}))}();break;case"history":!function(){if(!function(){var t=(0,l.Rf)(),e=t.chrome,i=e&&e.app&&e.app.runtime,n="history"in t&&!!t.history.pushState&&!!t.history.replaceState;return!i&&n}())return;var t=b.onpopstate;function e(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=e.length>2?e[2]:void 0;if(n){var o=y,r=String(n);y=r,E("history",{from:o,to:r})}return t.apply(this,e)}}b.onpopstate=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=b.location.href,o=y;if(y=n,E("history",{from:o,to:n}),t)try{return t.apply(this,e)}catch(t){}},(0,g.hl)(b.history,"pushState",e),(0,g.hl)(b.history,"replaceState",e)}();break;case"error":D=b.onerror,b.onerror=function(t,e,i,n,o){return E("error",{column:n,error:o,line:i,msg:t,url:e}),!!D&&D.apply(this,arguments)};break;case"unhandledrejection":O=b.onunhandledrejection,b.onunhandledrejection=function(t){return E("unhandledrejection",t),!O||O.apply(this,arguments)};break;default:o.k.warn("unknown instrumentation type:",t)}}function T(t){t&&"string"==typeof t.type&&"function"==typeof t.callback&&(w[t.type]=w[t.type]||[],w[t.type].push(t.callback),C(t.type))}function E(t,e){var i,n;if(t&&w[t])try{for(var r=(0,s.XA)(w[t]||[]),a=r.next();!a.done;a=r.next()){var l=a.value;try{l(e)}catch(e){o.k.error("Error while triggering instrumentation handler.\nType: "+t+"\nName: "+(0,f.$)(l)+"\nError: "+e)}}}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}}function S(t){return void 0===t&&(t=[]),"Request"in b&&(0,p.V9)(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function x(t){return void 0===t&&(t=[]),"string"==typeof t[0]?t[0]:"Request"in b&&(0,p.V9)(t[0],Request)?t[0].url:String(t[0])}var R,A;function I(t,e){return void 0===e&&(e=!1),function(i){if(i&&A!==i&&!function(t){if("keypress"!==t.type)return!1;try{var e=t.target;if(!e||!e.tagName)return!0;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable)return!1}catch(t){}return!0}(i)){var n="keypress"===i.type?"input":i.type;(void 0===R||function(t,e){if(!t)return!0;if(t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch(t){}return!1}(A,i))&&(t({event:i,name:n,global:e}),A=i),clearTimeout(R),R=b.setTimeout((function(){R=void 0}),1e3)}}}var D=null;var O=null;var N="6.10.0",L=i(199),M=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){return t.__proto__=e,t}:function(t,e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i]);return t});var B=function(t){function e(e){var i=this.constructor,n=t.call(this,e)||this;return n.message=e,n.name=i.prototype.constructor.name,M(n,i.prototype),n}return(0,s.ZT)(e,t),e}(Error),P=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,F="Invalid Dsn",W=function(){function t(t){"string"==typeof t?this._fromString(t):this._fromComponents(t),this._validate()}return t.prototype.toString=function(t){void 0===t&&(t=!1);var e=this,i=e.host,n=e.path,o=e.pass,r=e.port,s=e.projectId;return e.protocol+"://"+e.publicKey+(t&&o?":"+o:"")+"@"+i+(r?":"+r:"")+"/"+(n?n+"/":n)+s},t.prototype._fromString=function(t){var e=P.exec(t);if(!e)throw new B(F);var i=(0,s.CR)(e.slice(1),6),n=i[0],o=i[1],r=i[2],a=void 0===r?"":r,l=i[3],c=i[4],h=void 0===c?"":c,u="",d=i[5],p=d.split("/");if(p.length>1&&(u=p.slice(0,-1).join("/"),d=p.pop()),d){var g=d.match(/^\d+/);g&&(d=g[0])}this._fromComponents({host:l,pass:a,path:u,projectId:d,port:h,protocol:n,publicKey:o})},t.prototype._fromComponents=function(t){"user"in t&&!("publicKey"in t)&&(t.publicKey=t.user),this.user=t.publicKey||"",this.protocol=t.protocol,this.publicKey=t.publicKey||"",this.pass=t.pass||"",this.host=t.host,this.port=t.port||"",this.path=t.path||"",this.projectId=t.projectId},t.prototype._validate=function(){var t=this;if(["protocol","publicKey","host","projectId"].forEach((function(e){if(!t[e])throw new B("Invalid Dsn: "+e+" missing")})),!this.projectId.match(/^\d+$/))throw new B("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new B("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new B("Invalid Dsn: Invalid port "+this.port)},t}(),$=i(893),H=i(170),U=[];function V(t){return t.reduce((function(t,e){return t.every((function(t){return e.name!==t.name}))&&t.push(e),t}),[])}function G(t){var e={};return function(t){var e=t.defaultIntegrations&&(0,s.fl)(t.defaultIntegrations)||[],i=t.integrations,n=(0,s.fl)(V(e));Array.isArray(i)?n=(0,s.fl)(n.filter((function(t){return i.every((function(e){return e.name!==t.name}))})),V(i)):"function"==typeof i&&(n=i(n),n=Array.isArray(n)?n:[n]);var o=n.map((function(t){return t.name})),r="Debug";return-1!==o.indexOf(r)&&n.push.apply(n,(0,s.fl)(n.splice(o.indexOf(r),1))),n}(t).forEach((function(t){e[t.name]=t,function(t){-1===U.indexOf(t.name)&&(t.setupOnce(a.c,n.Gd),U.push(t.name),o.k.log("Integration installed: "+t.name))}(t)})),e}var z,j=function(){function t(t,e){this._integrations={},this._numProcessing=0,this._backend=new t(e),this._options=e,e.dsn&&(this._dsn=new W(e.dsn))}return t.prototype.captureException=function(t,e,i){var n=this,o=e&&e.event_id;return this._process(this._getBackend().eventFromException(t,e).then((function(t){return n._captureEvent(t,e,i)})).then((function(t){o=t}))),o},t.prototype.captureMessage=function(t,e,i,n){var o=this,r=i&&i.event_id,s=(0,p.pt)(t)?this._getBackend().eventFromMessage(String(t),e,i):this._getBackend().eventFromException(t,i);return this._process(s.then((function(t){return o._captureEvent(t,i,n)})).then((function(t){r=t}))),r},t.prototype.captureEvent=function(t,e,i){var n=e&&e.event_id;return this._process(this._captureEvent(t,e,i).then((function(t){n=t}))),n},t.prototype.captureSession=function(t){this._isEnabled()?"string"!=typeof t.release?o.k.warn("Discarded session because of missing or non-string release"):(this._sendSession(t),t.update({init:!1})):o.k.warn("SDK not enabled, will not capture session.")},t.prototype.getDsn=function(){return this._dsn},t.prototype.getOptions=function(){return this._options},t.prototype.flush=function(t){var e=this;return this._isClientDoneProcessing(t).then((function(i){return e._getBackend().getTransport().close(t).then((function(t){return i&&t}))}))},t.prototype.close=function(t){var e=this;return this.flush(t).then((function(t){return e.getOptions().enabled=!1,t}))},t.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=G(this._options))},t.prototype.getIntegration=function(t){try{return this._integrations[t.id]||null}catch(e){return o.k.warn("Cannot retrieve integration "+t.id+" from the current Client"),null}},t.prototype._updateSessionFromEvent=function(t,e){var i,n,o=!1,r=!1,a=e.exception&&e.exception.values;if(a){r=!0;try{for(var l=(0,s.XA)(a),c=l.next();!c.done;c=l.next()){var h=c.value.mechanism;if(h&&!1===h.handled){o=!0;break}}}catch(t){i={error:t}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}}var u=t.status===L.$.Ok;(u&&0===t.errors||u&&o)&&(t.update((0,s.pi)((0,s.pi)({},o&&{status:L.$.Crashed}),{errors:t.errors||Number(r||o)})),this.captureSession(t))},t.prototype._sendSession=function(t){this._getBackend().sendSession(t)},t.prototype._isClientDoneProcessing=function(t){var e=this;return new $.c((function(i){var n=0,o=setInterval((function(){0==e._numProcessing?(clearInterval(o),i(!0)):(n+=1,t&&n>=t&&(clearInterval(o),i(!1)))}),1)}))},t.prototype._getBackend=function(){return this._backend},t.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},t.prototype._prepareEvent=function(t,e,i){var n=this,o=this.getOptions().normalizeDepth,r=void 0===o?3:o,c=(0,s.pi)((0,s.pi)({},t),{event_id:t.event_id||(i&&i.event_id?i.event_id:(0,l.DM)()),timestamp:t.timestamp||(0,H.yW)()});this._applyClientOptions(c),this._applyIntegrationsMetadata(c);var h=e;i&&i.captureContext&&(h=a.s.clone(h).update(i.captureContext));var u=$.c.resolve(c);return h&&(u=h.applyToEvent(c,i)),u.then((function(t){return"number"==typeof r&&r>0?n._normalizeEvent(t,r):t}))},t.prototype._normalizeEvent=function(t,e){if(!t)return null;var i=(0,s.pi)((0,s.pi)((0,s.pi)((0,s.pi)((0,s.pi)({},t),t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((function(t){return(0,s.pi)((0,s.pi)({},t),t.data&&{data:(0,g.Fv)(t.data,e)})}))}),t.user&&{user:(0,g.Fv)(t.user,e)}),t.contexts&&{contexts:(0,g.Fv)(t.contexts,e)}),t.extra&&{extra:(0,g.Fv)(t.extra,e)});t.contexts&&t.contexts.trace&&(i.contexts.trace=t.contexts.trace);var n=this.getOptions()._experiments;return(void 0===n?{}:n).ensureNoCircularStructures?(0,g.Fv)(i):i},t.prototype._applyClientOptions=function(t){var e=this.getOptions(),i=e.environment,n=e.release,o=e.dist,r=e.maxValueLength,s=void 0===r?250:r;"environment"in t||(t.environment="environment"in e?i:"production"),void 0===t.release&&void 0!==n&&(t.release=n),void 0===t.dist&&void 0!==o&&(t.dist=o),t.message&&(t.message=(0,c.$G)(t.message,s));var a=t.exception&&t.exception.values&&t.exception.values[0];a&&a.value&&(a.value=(0,c.$G)(a.value,s));var l=t.request;l&&l.url&&(l.url=(0,c.$G)(l.url,s))},t.prototype._applyIntegrationsMetadata=function(t){var e=Object.keys(this._integrations);e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=(0,s.fl)(t.sdk.integrations||[],e))},t.prototype._sendEvent=function(t){this._getBackend().sendEvent(t)},t.prototype._captureEvent=function(t,e,i){return this._processEvent(t,e,i).then((function(t){return t.event_id}),(function(t){o.k.error(t)}))},t.prototype._processEvent=function(t,e,i){var n=this,o=this.getOptions(),r=o.beforeSend,s=o.sampleRate;if(!this._isEnabled())return $.c.reject(new B("SDK not enabled, will not capture event."));var a="transaction"===t.type;return!a&&"number"==typeof s&&Math.random()>s?$.c.reject(new B("Discarding event because it's not included in the random sample (sampling rate = "+s+")")):this._prepareEvent(t,i,e).then((function(t){if(null===t)throw new B("An event processor returned null, will not send event.");if(e&&e.data&&!0===e.data.__sentry__||a||!r)return t;var i=r(t,e);return n._ensureBeforeSendRv(i)})).then((function(t){if(null===t)throw new B("`beforeSend` returned `null`, will not send event.");var e=i&&i.getSession&&i.getSession();return!a&&e&&n._updateSessionFromEvent(e,t),n._sendEvent(t),t})).then(null,(function(t){if(t instanceof B)throw t;throw n.captureException(t,{data:{__sentry__:!0},originalException:t}),new B("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+t)}))},t.prototype._process=function(t){var e=this;this._numProcessing+=1,t.then((function(t){return e._numProcessing-=1,t}),(function(t){return e._numProcessing-=1,t}))},t.prototype._ensureBeforeSendRv=function(t){var e="`beforeSend` method has to return `null` or a valid event.";if((0,p.J8)(t))return t.then((function(t){if(!(0,p.PO)(t)&&null!==t)throw new B(e);return t}),(function(t){throw new B("beforeSend rejected with "+t)}));if(!(0,p.PO)(t)&&null!==t)throw new B(e);return t},t}();!function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.Invalid="invalid",t.Failed="failed"}(z||(z={})),function(t){t.fromHttpCode=function(e){return e>=200&&e<300?t.Success:429===e?t.RateLimit:e>=400&&e<500?t.Invalid:e>=500?t.Failed:t.Unknown}}(z||(z={}));var X,K=function(){function t(){}return t.prototype.sendEvent=function(t){return $.c.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:z.Skipped})},t.prototype.close=function(t){return $.c.resolve(!0)},t}(),Y=function(){function t(t){this._options=t,this._options.dsn||o.k.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return t.prototype.eventFromException=function(t,e){throw new B("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(t,e,i){throw new B("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(t){this._transport.sendEvent(t).then(null,(function(t){o.k.error("Error while sending event: "+t)}))},t.prototype.sendSession=function(t){this._transport.sendSession?this._transport.sendSession(t).then(null,(function(t){o.k.error("Error while sending session: "+t)})):o.k.warn("Dropping session because custom transport doesn't implement sendSession")},t.prototype.getTransport=function(){return this._transport},t.prototype._setupTransport=function(){return new K},t}();!function(t){t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical"}(X||(X={})),function(t){t.fromString=function(e){switch(e){case"debug":return t.Debug;case"info":return t.Info;case"warn":case"warning":return t.Warning;case"error":return t.Error;case"fatal":return t.Fatal;case"critical":return t.Critical;case"log":default:return t.Log}}}(X||(X={}));var q="?",Z=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,J=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Q=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,tt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,et=/\((\S*)(?::(\d+))(?::(\d+))\)/,it=/Minified React error #\d+;/i;function nt(t){var e=null,i=0;t&&("number"==typeof t.framesToPop?i=t.framesToPop:it.test(t.message)&&(i=1));try{if(e=function(t){if(!t||!t.stacktrace)return null;for(var e,i=t.stacktrace,n=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,o=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,r=i.split("\n"),s=[],a=0;a<r.length;a+=2){var l=null;(e=n.exec(r[a]))?l={url:e[2],func:e[3],args:[],line:+e[1],column:null}:(e=o.exec(r[a]))&&(l={url:e[6],func:e[3]||e[4],args:e[5]?e[5].split(","):[],line:+e[1],column:+e[2]}),l&&(!l.func&&l.line&&(l.func=q),s.push(l))}if(!s.length)return null;return{message:rt(t),name:t.name,stack:s}}(t))return ot(e,i)}catch(t){}try{if(e=function(t){if(!t||!t.stack)return null;for(var e,i,n,o=[],r=t.stack.split("\n"),s=0;s<r.length;++s){if(i=Z.exec(r[s])){var a=i[2]&&0===i[2].indexOf("native");i[2]&&0===i[2].indexOf("eval")&&(e=et.exec(i[2]))&&(i[2]=e[1],i[3]=e[2],i[4]=e[3]);var l=i[2]&&0===i[2].indexOf("address at ")?i[2].substr("address at ".length):i[2],c=i[1]||q,h=-1!==c.indexOf("safari-extension"),u=-1!==c.indexOf("safari-web-extension");(h||u)&&(c=-1!==c.indexOf("@")?c.split("@")[0]:q,l=h?"safari-extension:"+l:"safari-web-extension:"+l),n={url:l,func:c,args:a?[i[2]]:[],line:i[3]?+i[3]:null,column:i[4]?+i[4]:null}}else if(i=Q.exec(r[s]))n={url:i[2],func:i[1]||q,args:[],line:+i[3],column:i[4]?+i[4]:null};else{if(!(i=J.exec(r[s])))continue;i[3]&&i[3].indexOf(" > eval")>-1&&(e=tt.exec(i[3]))?(i[1]=i[1]||"eval",i[3]=e[1],i[4]=e[2],i[5]=""):0!==s||i[5]||void 0===t.columnNumber||(o[0].column=t.columnNumber+1),n={url:i[3],func:i[1]||q,args:i[2]?i[2].split(","):[],line:i[4]?+i[4]:null,column:i[5]?+i[5]:null}}!n.func&&n.line&&(n.func=q),o.push(n)}if(!o.length)return null;return{message:rt(t),name:t.name,stack:o}}(t))return ot(e,i)}catch(t){}return{message:rt(t),name:t&&t.name,stack:[],failed:!0}}function ot(t,e){try{return(0,s.pi)((0,s.pi)({},t),{stack:t.stack.slice(e)})}catch(e){return t}}function rt(t){var e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function st(t){var e=lt(t.stack),i={type:t.name,value:t.message};return e&&e.length&&(i.stacktrace={frames:e}),void 0===i.type&&""===i.value&&(i.value="Unrecoverable error caught"),i}function at(t){return{exception:{values:[st(t)]}}}function lt(t){if(!t||!t.length)return[];var e=t,i=e[0].func||"",n=e[e.length-1].func||"";return-1===i.indexOf("captureMessage")&&-1===i.indexOf("captureException")||(e=e.slice(1)),-1!==n.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.slice(0,50).map((function(t){return{colno:null===t.column?void 0:t.column,filename:t.url||e[0].url,function:t.func||"?",in_app:!0,lineno:null===t.line?void 0:t.line}})).reverse()}function ct(t,e,i){var n;if(void 0===i&&(i={}),(0,p.VW)(t)&&t.error)return n=at(nt(t=t.error));if((0,p.TX)(t)||(0,p.fm)(t)){var o=t,r=o.name||((0,p.TX)(o)?"DOMError":"DOMException"),a=o.message?r+": "+o.message:r;return n=ht(a,e,i),(0,l.Db)(n,a),"code"in o&&(n.tags=(0,s.pi)((0,s.pi)({},n.tags),{"DOMException.code":""+o.code})),n}return(0,p.VZ)(t)?n=at(nt(t)):(0,p.PO)(t)||(0,p.cO)(t)?(n=function(t,e,i){var n={exception:{values:[{type:(0,p.cO)(t)?t.constructor.name:i?"UnhandledRejection":"Error",value:"Non-Error "+(i?"promise rejection":"exception")+" captured with keys: "+(0,g.zf)(t)}]},extra:{__serialized__:(0,g.Qy)(t)}};if(e){var o=lt(nt(e).stack);n.stacktrace={frames:o}}return n}(t,e,i.rejection),(0,l.EG)(n,{synthetic:!0}),n):(n=ht(t,e,i),(0,l.Db)(n,""+t,void 0),(0,l.EG)(n,{synthetic:!0}),n)}function ht(t,e,i){void 0===i&&(i={});var n={message:t};if(i.attachStacktrace&&e){var o=lt(nt(e).stack);n.stacktrace={frames:o}}return n}function ut(t){if(t.metadata&&t.metadata.sdk){var e=t.metadata.sdk;return{name:e.name,version:e.version}}}function dt(t,e){return e?(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=(0,s.fl)(t.sdk.integrations||[],e.integrations||[]),t.sdk.packages=(0,s.fl)(t.sdk.packages||[],e.packages||[]),t):t}function pt(t,e){var i=ut(e),n="aggregates"in t?"sessions":"session";return{body:JSON.stringify((0,s.pi)((0,s.pi)({sent_at:(new Date).toISOString()},i&&{sdk:i}),e.forceEnvelope()&&{dsn:e.getDsn().toString()}))+"\n"+JSON.stringify({type:n})+"\n"+JSON.stringify(t),type:n,url:e.getEnvelopeEndpointWithUrlEncodedAuth()}}function gt(t,e){var i=ut(e),n=t.type||"event",o="transaction"===n||e.forceEnvelope(),r=t.debug_meta||{},a=r.transactionSampling,l=(0,s._T)(r,["transactionSampling"]),c=a||{},h=c.method,u=c.rate;0===Object.keys(l).length?delete t.debug_meta:t.debug_meta=l;var d={body:JSON.stringify(i?dt(t,e.metadata.sdk):t),type:n,url:o?e.getEnvelopeEndpointWithUrlEncodedAuth():e.getStoreEndpointWithUrlEncodedAuth()};if(o){var p=JSON.stringify((0,s.pi)((0,s.pi)({event_id:t.event_id,sent_at:(new Date).toISOString()},i&&{sdk:i}),e.forceEnvelope()&&{dsn:e.getDsn().toString()}))+"\n"+JSON.stringify({type:n,sample_rates:[{id:h,rate:u}]})+"\n"+d.body;d.body=p}return d}var ft=function(){function t(t,e,i){void 0===e&&(e={}),this.dsn=t,this._dsnObject=new W(t),this.metadata=e,this._tunnel=i}return t.prototype.getDsn=function(){return this._dsnObject},t.prototype.forceEnvelope=function(){return!!this._tunnel},t.prototype.getBaseApiEndpoint=function(){var t=this.getDsn(),e=t.protocol?t.protocol+":":"",i=t.port?":"+t.port:"";return e+"//"+t.host+i+(t.path?"/"+t.path:"")+"/api/"},t.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},t.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this._tunnel:this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},t.prototype.getStoreEndpointPath=function(){var t=this.getDsn();return(t.path?"/"+t.path:"")+"/api/"+t.projectId+"/store/"},t.prototype.getRequestHeaders=function(t,e){var i=this.getDsn(),n=["Sentry sentry_version=7"];return n.push("sentry_client="+t+"/"+e),n.push("sentry_key="+i.publicKey),i.pass&&n.push("sentry_secret="+i.pass),{"Content-Type":"application/json","X-Sentry-Auth":n.join(", ")}},t.prototype.getReportDialogEndpoint=function(t){void 0===t&&(t={});var e=this.getDsn(),i=this.getBaseApiEndpoint()+"embed/error-page/",n=[];for(var o in n.push("dsn="+e.toString()),t)if("dsn"!==o)if("user"===o){if(!t.user)continue;t.user.name&&n.push("name="+encodeURIComponent(t.user.name)),t.user.email&&n.push("email="+encodeURIComponent(t.user.email))}else n.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return n.length?i+"?"+n.join("&"):i},t.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},t.prototype._getIngestEndpoint=function(t){return this._tunnel?this._tunnel:""+this.getBaseApiEndpoint()+this.getDsn().projectId+"/"+t+"/"},t.prototype._encodedAuth=function(){var t={sentry_key:this.getDsn().publicKey,sentry_version:"7"};return(0,g._j)(t)},t}(),mt=function(){function t(t){this._limit=t,this._buffer=[]}return t.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},t.prototype.add=function(t){var e=this;if(!this.isReady())return $.c.reject(new B("Not adding Promise due to buffer limit reached."));var i=t();return-1===this._buffer.indexOf(i)&&this._buffer.push(i),i.then((function(){return e.remove(i)})).then(null,(function(){return e.remove(i).then(null,(function(){}))})),i},t.prototype.remove=function(t){return this._buffer.splice(this._buffer.indexOf(t),1)[0]},t.prototype.length=function(){return this._buffer.length},t.prototype.drain=function(t){var e=this;return new $.c((function(i){var n=setTimeout((function(){t&&t>0&&i(!1)}),t);$.c.all(e._buffer).then((function(){clearTimeout(n),i(!0)})).then(null,(function(){i(!0)}))}))},t}(),vt={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},_t=function(){function t(t){this.options=t,this._buffer=new mt(30),this._rateLimits={},this._api=new ft(t.dsn,t._metadata,t.tunnel),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}return t.prototype.sendEvent=function(t){throw new B("Transport Class has to implement `sendEvent` method")},t.prototype.close=function(t){return this._buffer.drain(t)},t.prototype._handleResponse=function(t){var e=t.requestType,i=t.response,n=t.headers,r=t.resolve,s=t.reject,a=z.fromHttpCode(i.status);this._handleRateLimit(n)&&o.k.warn("Too many "+e+" requests, backing off until: "+this._disabledUntil(e)),a!==z.Success?s(i):r({status:a})},t.prototype._disabledUntil=function(t){var e=vt[t];return this._rateLimits[e]||this._rateLimits.all},t.prototype._isRateLimited=function(t){return this._disabledUntil(t)>new Date(Date.now())},t.prototype._handleRateLimit=function(t){var e,i,n,o,r=Date.now(),a=t["x-sentry-rate-limits"],c=t["retry-after"];if(a){try{for(var h=(0,s.XA)(a.trim().split(",")),u=h.next();!u.done;u=h.next()){var d=u.value.split(":",2),p=parseInt(d[0],10),g=1e3*(isNaN(p)?60:p);try{for(var f=(n=void 0,(0,s.XA)(d[1].split(";"))),m=f.next();!m.done;m=f.next()){var v=m.value;this._rateLimits[v||"all"]=new Date(r+g)}}catch(t){n={error:t}}finally{try{m&&!m.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(i=h.return)&&i.call(h)}finally{if(e)throw e.error}}return!0}return!!c&&(this._rateLimits.all=new Date(r+(0,l.JY)(r,c)),!0)},t}();var yt=function(t){function e(e,i){void 0===i&&(i=function(){var t,e,i=(0,l.Rf)();if(v(i.fetch))return i.fetch.bind(i);var n=i.document,r=i.fetch;if("function"==typeof(null===(t=n)||void 0===t?void 0:t.createElement))try{var s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s),(null===(e=s.contentWindow)||void 0===e?void 0:e.fetch)&&(r=s.contentWindow.fetch),n.head.removeChild(s)}catch(t){o.k.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return r.bind(i)}());var n=t.call(this,e)||this;return n._fetch=i,n}return(0,s.ZT)(e,t),e.prototype.sendEvent=function(t){return this._sendRequest(gt(t,this._api),t)},e.prototype.sendSession=function(t){return this._sendRequest(pt(t,this._api),t)},e.prototype._sendRequest=function(t,e){var i=this;if(this._isRateLimited(t.type))return Promise.reject({event:e,type:t.type,reason:"Transport for "+t.type+" requests locked till "+this._disabledUntil(t.type)+" due to too many requests.",status:429});var n={body:t.body,method:"POST",referrerPolicy:_()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(n,this.options.fetchParameters),void 0!==this.options.headers&&(n.headers=this.options.headers),this._buffer.add((function(){return new $.c((function(e,o){i._fetch(t.url,n).then((function(n){var r={"x-sentry-rate-limits":n.headers.get("X-Sentry-Rate-Limits"),"retry-after":n.headers.get("Retry-After")};i._handleResponse({requestType:t.type,response:n,headers:r,resolve:e,reject:o})})).catch(o)}))}))},e}(_t),bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.sendEvent=function(t){return this._sendRequest(gt(t,this._api),t)},e.prototype.sendSession=function(t){return this._sendRequest(pt(t,this._api),t)},e.prototype._sendRequest=function(t,e){var i=this;return this._isRateLimited(t.type)?Promise.reject({event:e,type:t.type,reason:"Transport for "+t.type+" requests locked till "+this._disabledUntil(t.type)+" due to too many requests.",status:429}):this._buffer.add((function(){return new $.c((function(e,n){var o=new XMLHttpRequest;for(var r in o.onreadystatechange=function(){if(4===o.readyState){var r={"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")};i._handleResponse({requestType:t.type,response:o,headers:r,resolve:e,reject:n})}},o.open("POST",t.url),i.options.headers)i.options.headers.hasOwnProperty(r)&&o.setRequestHeader(r,i.options.headers[r]);o.send(t.body)}))}))},e}(_t),wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.eventFromException=function(t,e){return function(t,e,i){var n=ct(e,i&&i.syntheticException||void 0,{attachStacktrace:t.attachStacktrace});return(0,l.EG)(n,{handled:!0,type:"generic"}),n.level=X.Error,i&&i.event_id&&(n.event_id=i.event_id),$.c.resolve(n)}(this._options,t,e)},e.prototype.eventFromMessage=function(t,e,i){return void 0===e&&(e=X.Info),function(t,e,i,n){void 0===i&&(i=X.Info);var o=ht(e,n&&n.syntheticException||void 0,{attachStacktrace:t.attachStacktrace});return o.level=i,n&&n.event_id&&(o.event_id=n.event_id),$.c.resolve(o)}(this._options,t,e,i)},e.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var e=(0,s.pi)((0,s.pi)({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(e):m()?new yt(e):new bt(e)},e}(Y),kt=i(666),Ct=0;function Tt(){return Ct>0}function Et(){Ct+=1,setTimeout((function(){Ct-=1}))}function St(t,e,i){if(void 0===e&&(e={}),"function"!=typeof t)return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch(e){return t}var n=function(){var n=Array.prototype.slice.call(arguments);try{i&&"function"==typeof i&&i.apply(this,arguments);var o=n.map((function(t){return St(t,e)}));return t.handleEvent?t.handleEvent.apply(this,o):t.apply(this,o)}catch(t){throw Et(),(0,kt.$e)((function(i){i.addEventProcessor((function(t){var i=(0,s.pi)({},t);return e.mechanism&&((0,l.Db)(i,void 0,void 0),(0,l.EG)(i,e.mechanism)),i.extra=(0,s.pi)((0,s.pi)({},i.extra),{arguments:n}),i})),(0,kt.Tb)(t)})),t}};try{for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}catch(t){}t.prototype=t.prototype||{},n.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:n}),Object.defineProperties(n,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:function(){return t.name}})}catch(t){}return n}function xt(t){if(void 0===t&&(t={}),t.eventId)if(t.dsn){var e=document.createElement("script");e.async=!0,e.src=new ft(t.dsn).getReportDialogEndpoint(t),t.onLoad&&(e.onload=t.onLoad),(document.head||document.body).appendChild(e)}else o.k.error("Missing dsn option in showReportDialog call");else o.k.error("Missing eventId option in showReportDialog call")}var Rt=i(464),At=function(){function t(e){this.name=t.id,this._options=(0,s.pi)({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return t.prototype.addSentryBreadcrumb=function(t){this._options.sentry&&(0,n.Gd)().addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:(0,l.jH)(t)},{event:t})},t.prototype.setupOnce=function(){var t=this;this._options.console&&T({callback:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t._consoleBreadcrumb.apply(t,(0,s.fl)(e))},type:"console"}),this._options.dom&&T({callback:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t._domBreadcrumb.apply(t,(0,s.fl)(e))},type:"dom"}),this._options.xhr&&T({callback:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t._xhrBreadcrumb.apply(t,(0,s.fl)(e))},type:"xhr"}),this._options.fetch&&T({callback:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t._fetchBreadcrumb.apply(t,(0,s.fl)(e))},type:"fetch"}),this._options.history&&T({callback:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t._historyBreadcrumb.apply(t,(0,s.fl)(e))},type:"history"})},t.prototype._consoleBreadcrumb=function(t){var e={category:"console",data:{arguments:t.args,logger:"console"},level:X.fromString(t.level),message:(0,c.nK)(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;e.message="Assertion failed: "+((0,c.nK)(t.args.slice(1)," ")||"console.assert"),e.data.arguments=t.args.slice(1)}(0,n.Gd)().addBreadcrumb(e,{input:t.args,level:t.level})},t.prototype._domBreadcrumb=function(t){var e,i="object"==typeof this._options.dom?this._options.dom.serializeAttribute:void 0;"string"==typeof i&&(i=[i]);try{e=t.event.target?(0,Rt.R)(t.event.target,i):(0,Rt.R)(t.event,i)}catch(t){e="<unknown>"}0!==e.length&&(0,n.Gd)().addBreadcrumb({category:"ui."+t.name,message:e},{event:t.event,name:t.name,global:t.global})},t.prototype._xhrBreadcrumb=function(t){if(t.endTimestamp){if(t.xhr.__sentry_own_request__)return;var e=t.xhr.__sentry_xhr__||{},i=e.method,o=e.url,r=e.status_code,s=e.body;(0,n.Gd)().addBreadcrumb({category:"xhr",data:{method:i,url:o,status_code:r},type:"http"},{xhr:t.xhr,input:s})}else;},t.prototype._fetchBreadcrumb=function(t){t.endTimestamp&&(t.fetchData.url.match(/sentry_key/)&&"POST"===t.fetchData.method||(t.error?(0,n.Gd)().addBreadcrumb({category:"fetch",data:t.fetchData,level:X.Error,type:"http"},{data:t.error,input:t.args}):(0,n.Gd)().addBreadcrumb({category:"fetch",data:(0,s.pi)((0,s.pi)({},t.fetchData),{status_code:t.response.status}),type:"http"},{input:t.args,response:t.response})))},t.prototype._historyBreadcrumb=function(t){var e=(0,l.Rf)(),i=t.from,o=t.to,r=(0,l.en)(e.location.href),s=(0,l.en)(i),a=(0,l.en)(o);s.path||(s=r),r.protocol===a.protocol&&r.host===a.host&&(o=a.relative),r.protocol===s.protocol&&r.host===s.host&&(i=s.relative),(0,n.Gd)().addBreadcrumb({category:"navigation",data:{from:i,to:o}})},t.id="Breadcrumbs",t}(),It=function(t){function e(e){void 0===e&&(e={});return e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:N}],version:N},t.call(this,wt,e)||this}return(0,s.ZT)(e,t),e.prototype.showReportDialog=function(t){void 0===t&&(t={}),(0,l.Rf)().document&&(this._isEnabled()?xt((0,s.pi)((0,s.pi)({},t),{dsn:t.dsn||this.getDsn()})):o.k.error("Trying to call showReportDialog with Sentry Client disabled"))},e.prototype._prepareEvent=function(e,i,n){return e.platform=e.platform||"javascript",t.prototype._prepareEvent.call(this,e,i,n)},e.prototype._sendEvent=function(e){var i=this.getIntegration(At);i&&i.addSentryBreadcrumb(e),t.prototype._sendEvent.call(this,e)},e}(j),Dt=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ot=function(){function t(e){this.name=t.id,this._options=(0,s.pi)({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}return t.prototype.setupOnce=function(){var t=(0,l.Rf)();(this._options.setTimeout&&(0,g.hl)(t,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&(0,g.hl)(t,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&(0,g.hl)(t,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in t&&(0,g.hl)(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget)&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:Dt).forEach(this._wrapEventTarget.bind(this))},t.prototype._wrapTimeFunction=function(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=e[0];return e[0]=St(n,{mechanism:{data:{function:(0,f.$)(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}},t.prototype._wrapRAF=function(t){return function(e){return t.call(this,St(e,{mechanism:{data:{function:"requestAnimationFrame",handler:(0,f.$)(t)},handled:!0,type:"instrument"}}))}},t.prototype._wrapEventTarget=function(t){var e=(0,l.Rf)(),i=e[t]&&e[t].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&((0,g.hl)(i,"addEventListener",(function(e){return function(i,n,o){try{"function"==typeof n.handleEvent&&(n.handleEvent=St(n.handleEvent.bind(n),{mechanism:{data:{function:"handleEvent",handler:(0,f.$)(n),target:t},handled:!0,type:"instrument"}}))}catch(t){}return e.call(this,i,St(n,{mechanism:{data:{function:"addEventListener",handler:(0,f.$)(n),target:t},handled:!0,type:"instrument"}}),o)}})),(0,g.hl)(i,"removeEventListener",(function(t){return function(e,i,n){var o,r=i;try{var s=null===(o=r)||void 0===o?void 0:o.__sentry_wrapped__;s&&t.call(this,e,s,n)}catch(t){}return t.call(this,e,r,n)}})))},t.prototype._wrapXHR=function(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,o=["onload","onerror","onprogress","onreadystatechange"];return o.forEach((function(t){t in n&&"function"==typeof n[t]&&(0,g.hl)(n,t,(function(e){var i={mechanism:{data:{function:t,handler:(0,f.$)(e)},handled:!0,type:"instrument"}};return e.__sentry_original__&&(i.mechanism.data.handler=(0,f.$)(e.__sentry_original__)),St(e,i)}))})),t.apply(this,e)}},t.id="TryCatch",t}(),Nt=function(){function t(e){this.name=t.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=(0,s.pi)({onerror:!0,onunhandledrejection:!0},e)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(o.k.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(o.k.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},t.prototype._installGlobalOnErrorHandler=function(){var e=this;this._onErrorHandlerInstalled||(T({callback:function(i){var o=i.error,r=(0,n.Gd)(),s=r.getIntegration(t),a=o&&!0===o.__sentry_own_request__;if(s&&!Tt()&&!a){var c=r.getClient(),h=void 0===o&&(0,p.HD)(i.msg)?e._eventFromIncompleteOnError(i.msg,i.url,i.line,i.column):e._enhanceEventWithInitialFrame(ct(o||i.msg,void 0,{attachStacktrace:c&&c.getOptions().attachStacktrace,rejection:!1}),i.url,i.line,i.column);(0,l.EG)(h,{handled:!1,type:"onerror"}),r.captureEvent(h,{originalException:o})}},type:"error"}),this._onErrorHandlerInstalled=!0)},t.prototype._installGlobalOnUnhandledRejectionHandler=function(){var e=this;this._onUnhandledRejectionHandlerInstalled||(T({callback:function(i){var o=i;try{"reason"in i?o=i.reason:"detail"in i&&"reason"in i.detail&&(o=i.detail.reason)}catch(t){}var r=(0,n.Gd)(),s=r.getIntegration(t),a=o&&!0===o.__sentry_own_request__;if(!s||Tt()||a)return!0;var c=r.getClient(),h=(0,p.pt)(o)?e._eventFromRejectionWithPrimitive(o):ct(o,void 0,{attachStacktrace:c&&c.getOptions().attachStacktrace,rejection:!0});h.level=X.Error,(0,l.EG)(h,{handled:!1,type:"onunhandledrejection"}),r.captureEvent(h,{originalException:o})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},t.prototype._eventFromIncompleteOnError=function(t,e,i,n){var o,r=(0,p.VW)(t)?t.message:t,s=r.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);s&&(o=s[1],r=s[2]);var a={exception:{values:[{type:o||"Error",value:r}]}};return this._enhanceEventWithInitialFrame(a,e,i,n)},t.prototype._eventFromRejectionWithPrimitive=function(t){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(t)}]}}},t.prototype._enhanceEventWithInitialFrame=function(t,e,i,n){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].stacktrace=t.exception.values[0].stacktrace||{},t.exception.values[0].stacktrace.frames=t.exception.values[0].stacktrace.frames||[];var o=isNaN(parseInt(n,10))?void 0:n,r=isNaN(parseInt(i,10))?void 0:i,s=(0,p.HD)(e)&&e.length>0?e:(0,l.l4)();return 0===t.exception.values[0].stacktrace.frames.length&&t.exception.values[0].stacktrace.frames.push({colno:o,filename:s,function:"?",in_app:!0,lineno:r}),t},t.id="GlobalHandlers",t}(),Lt=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._key=e.key||"cause",this._limit=e.limit||5}return t.prototype.setupOnce=function(){(0,a.c)((function(e,i){var o=(0,n.Gd)().getIntegration(t);return o?o._handler(e,i):e}))},t.prototype._handler=function(t,e){if(!(t.exception&&t.exception.values&&e&&(0,p.V9)(e.originalException,Error)))return t;var i=this._walkErrorTree(e.originalException,this._key);return t.exception.values=(0,s.fl)(i,t.exception.values),t},t.prototype._walkErrorTree=function(t,e,i){if(void 0===i&&(i=[]),!(0,p.V9)(t[e],Error)||i.length+1>=this._limit)return i;var n=st(nt(t[e]));return this._walkErrorTree(t[e],e,(0,s.fl)([n],i))},t.id="LinkedErrors",t}(),Mt=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(e,i){e((function(e){var n=i().getIntegration(t);if(n){try{if(n._shouldDropEvent(e,n._previousEvent))return null}catch(t){return n._previousEvent=e}return n._previousEvent=e}return e}))},t.prototype._shouldDropEvent=function(t,e){return!!e&&(!!this._isSameMessageEvent(t,e)||!!this._isSameExceptionEvent(t,e))},t.prototype._isSameMessageEvent=function(t,e){var i=t.message,n=e.message;return!(!i&&!n)&&(!(i&&!n||!i&&n)&&(i===n&&(!!this._isSameFingerprint(t,e)&&!!this._isSameStacktrace(t,e))))},t.prototype._getFramesFromEvent=function(t){var e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(t){return}else if(t.stacktrace)return t.stacktrace.frames},t.prototype._isSameStacktrace=function(t,e){var i=this._getFramesFromEvent(t),n=this._getFramesFromEvent(e);if(!i&&!n)return!0;if(i&&!n||!i&&n)return!1;if(i=i,(n=n).length!==i.length)return!1;for(var o=0;o<n.length;o++){var r=n[o],s=i[o];if(r.filename!==s.filename||r.lineno!==s.lineno||r.colno!==s.colno||r.function!==s.function)return!1}return!0},t.prototype._getExceptionFromEvent=function(t){return t.exception&&t.exception.values&&t.exception.values[0]},t.prototype._isSameExceptionEvent=function(t,e){var i=this._getExceptionFromEvent(e),n=this._getExceptionFromEvent(t);return!(!i||!n)&&(i.type===n.type&&i.value===n.value&&(!!this._isSameFingerprint(t,e)&&!!this._isSameStacktrace(t,e)))},t.prototype._isSameFingerprint=function(t,e){var i=t.fingerprint,n=e.fingerprint;if(!i&&!n)return!0;if(i&&!n||!i&&n)return!1;i=i,n=n;try{return!(i.join("")!==n.join(""))}catch(t){return!1}},t.id="Dedupe",t}(),Bt=(0,l.Rf)(),Pt=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){(0,a.c)((function(e){var i,o,r;if((0,n.Gd)().getIntegration(t)){if(!Bt.navigator&&!Bt.location&&!Bt.document)return e;var a=(null===(i=e.request)||void 0===i?void 0:i.url)||(null===(o=Bt.location)||void 0===o?void 0:o.href),l=(Bt.document||{}).referrer,c=(Bt.navigator||{}).userAgent,h=(0,s.pi)((0,s.pi)((0,s.pi)({},null===(r=e.request)||void 0===r?void 0:r.headers),l&&{Referer:l}),c&&{"User-Agent":c}),u=(0,s.pi)((0,s.pi)({},a&&{url:a}),{headers:h});return(0,s.pi)((0,s.pi)({},e),{request:u})}return e}))},t.id="UserAgent",t}(),Ft=[new u,new d,new Ot,new At,new Nt,new Lt,new Mt,new Pt];function Wt(t){if(void 0===t&&(t={}),void 0===t.defaultIntegrations&&(t.defaultIntegrations=Ft),void 0===t.release){var e=(0,l.Rf)();e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id)}void 0===t.autoSessionTracking&&(t.autoSessionTracking=!0),function(t,e){var i;!0===e.debug&&o.k.enable();var r=(0,n.Gd)();null===(i=r.getScope())||void 0===i||i.update(e.initialScope);var s=new t(e);r.bindClient(s)}(It,t),t.autoSessionTracking&&function(){if(void 0===(0,l.Rf)().document)return void o.k.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");var t=(0,n.Gd)();if("function"!=typeof t.startSession||"function"!=typeof t.captureSession)return;t.startSession({ignoreDuration:!0}),t.captureSession(),T({callback:function(e){var i=e.from,n=e.to;void 0!==i&&i!==n&&(t.startSession({ignoreDuration:!0}),t.captureSession())},type:"history"})}()}},538:(t,e,i)=>{"use strict";i.d(e,{Gd:()=>f});var n=i(655),o=i(199),r=i(844),s=i(170),a=i(343),l=i(422),c=i(769),h=i(470),u=function(){function t(t){this.errors=0,this.sid=(0,r.DM)(),this.duration=0,this.status=o.$.Ok,this.init=!0,this.ignoreDuration=!1;var e=(0,s.ph)();this.timestamp=e,this.started=e,t&&this.update(t)}return t.prototype.update=function(t){if(void 0===t&&(t={}),t.user&&(!this.ipAddress&&t.user.ip_address&&(this.ipAddress=t.user.ip_address),this.did||t.did||(this.did=t.user.id||t.user.email||t.user.username)),this.timestamp=t.timestamp||(0,s.ph)(),t.ignoreDuration&&(this.ignoreDuration=t.ignoreDuration),t.sid&&(this.sid=32===t.sid.length?t.sid:(0,r.DM)()),void 0!==t.init&&(this.init=t.init),!this.did&&t.did&&(this.did=""+t.did),"number"==typeof t.started&&(this.started=t.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof t.duration)this.duration=t.duration;else{var e=this.timestamp-this.started;this.duration=e>=0?e:0}t.release&&(this.release=t.release),t.environment&&(this.environment=t.environment),!this.ipAddress&&t.ipAddress&&(this.ipAddress=t.ipAddress),!this.userAgent&&t.userAgent&&(this.userAgent=t.userAgent),"number"==typeof t.errors&&(this.errors=t.errors),t.status&&(this.status=t.status)},t.prototype.close=function(t){t?this.update({status:t}):this.status===o.$.Ok?this.update({status:o.$.Exited}):this.update()},t.prototype.toJSON=function(){return(0,h.Jr)({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:(0,h.Jr)({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},t}(),d=function(){function t(t,e,i){void 0===e&&(e=new c.s),void 0===i&&(i=4),this._version=i,this._stack=[{}],this.getStackTop().scope=e,this.bindClient(t)}return t.prototype.isOlderThan=function(t){return this._version<t},t.prototype.bindClient=function(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()},t.prototype.pushScope=function(){var t=c.s.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t},t.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},t.prototype.withScope=function(t){var e=this.pushScope();try{t(e)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(t,e){var i=this._lastEventId=(0,r.DM)(),o=e;if(!e){var s=void 0;try{throw new Error("Sentry syntheticException")}catch(t){s=t}o={originalException:t,syntheticException:s}}return this._invokeClient("captureException",t,(0,n.pi)((0,n.pi)({},o),{event_id:i})),i},t.prototype.captureMessage=function(t,e,i){var o=this._lastEventId=(0,r.DM)(),s=i;if(!i){var a=void 0;try{throw new Error(t)}catch(t){a=t}s={originalException:t,syntheticException:a}}return this._invokeClient("captureMessage",t,e,(0,n.pi)((0,n.pi)({},s),{event_id:o})),o},t.prototype.captureEvent=function(t,e){var i=this._lastEventId=(0,r.DM)();return this._invokeClient("captureEvent",t,(0,n.pi)((0,n.pi)({},e),{event_id:i})),i},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(t,e){var i=this.getStackTop(),o=i.scope,a=i.client;if(o&&a){var l=a.getOptions&&a.getOptions()||{},c=l.beforeBreadcrumb,h=void 0===c?null:c,u=l.maxBreadcrumbs,d=void 0===u?100:u;if(!(d<=0)){var p=(0,s.yW)(),g=(0,n.pi)({timestamp:p},t),f=h?(0,r.Cf)((function(){return h(g,e)})):g;null!==f&&o.addBreadcrumb(f,d)}}},t.prototype.setUser=function(t){var e=this.getScope();e&&e.setUser(t)},t.prototype.setTags=function(t){var e=this.getScope();e&&e.setTags(t)},t.prototype.setExtras=function(t){var e=this.getScope();e&&e.setExtras(t)},t.prototype.setTag=function(t,e){var i=this.getScope();i&&i.setTag(t,e)},t.prototype.setExtra=function(t,e){var i=this.getScope();i&&i.setExtra(t,e)},t.prototype.setContext=function(t,e){var i=this.getScope();i&&i.setContext(t,e)},t.prototype.configureScope=function(t){var e=this.getStackTop(),i=e.scope,n=e.client;i&&n&&t(i)},t.prototype.run=function(t){var e=g(this);try{t(this)}finally{g(e)}},t.prototype.getIntegration=function(t){var e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return a.k.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},t.prototype.startSpan=function(t){return this._callExtensionMethod("startSpan",t)},t.prototype.startTransaction=function(t,e){return this._callExtensionMethod("startTransaction",t,e)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype.captureSession=function(t){if(void 0===t&&(t=!1),t)return this.endSession();this._sendSessionUpdate()},t.prototype.endSession=function(){var t,e,i,n,o;null===(i=null===(e=null===(t=this.getStackTop())||void 0===t?void 0:t.scope)||void 0===e?void 0:e.getSession())||void 0===i||i.close(),this._sendSessionUpdate(),null===(o=null===(n=this.getStackTop())||void 0===n?void 0:n.scope)||void 0===o||o.setSession()},t.prototype.startSession=function(t){var e=this.getStackTop(),i=e.scope,s=e.client,a=s&&s.getOptions()||{},l=a.release,c=a.environment,h=((0,r.Rf)().navigator||{}).userAgent,d=new u((0,n.pi)((0,n.pi)((0,n.pi)({release:l,environment:c},i&&{user:i.getUser()}),h&&{userAgent:h}),t));if(i){var p=i.getSession&&i.getSession();p&&p.status===o.$.Ok&&p.update({status:o.$.Exited}),this.endSession(),i.setSession(d)}return d},t.prototype._sendSessionUpdate=function(){var t=this.getStackTop(),e=t.scope,i=t.client;if(e){var n=e.getSession&&e.getSession();n&&i&&i.captureSession&&i.captureSession(n)}},t.prototype._invokeClient=function(t){for(var e,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var r=this.getStackTop(),s=r.scope,a=r.client;a&&a[t]&&(e=a)[t].apply(e,(0,n.fl)(i,[s]))},t.prototype._callExtensionMethod=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=p(),o=n.__SENTRY__;if(o&&o.extensions&&"function"==typeof o.extensions[t])return o.extensions[t].apply(this,e);a.k.warn("Extension method "+t+" couldn't be found, doing nothing.")},t}();function p(){var t=(0,r.Rf)();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function g(t){var e=p(),i=v(e);return _(e,t),i}function f(){var t=p();return m(t)&&!v(t).isOlderThan(4)||_(t,new d),(0,l.KV)()?function(t){var e,i,n;try{var o=null===(n=null===(i=null===(e=p().__SENTRY__)||void 0===e?void 0:e.extensions)||void 0===i?void 0:i.domain)||void 0===n?void 0:n.active;if(!o)return v(t);if(!m(o)||v(o).isOlderThan(4)){var r=v(t).getStackTop();_(o,new d(r.client,c.s.clone(r.scope)))}return v(o)}catch(e){return v(t)}}(t):v(t)}function m(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function v(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new d),t.__SENTRY__.hub}function _(t,e){return!!t&&(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0)}},769:(t,e,i)=>{"use strict";i.d(e,{s:()=>l,c:()=>h});var n=i(655),o=i(597),r=i(170),s=i(893),a=i(844),l=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return t.clone=function(e){var i=new t;return e&&(i._breadcrumbs=(0,n.fl)(e._breadcrumbs),i._tags=(0,n.pi)({},e._tags),i._extra=(0,n.pi)({},e._extra),i._contexts=(0,n.pi)({},e._contexts),i._user=e._user,i._level=e._level,i._span=e._span,i._session=e._session,i._transactionName=e._transactionName,i._fingerprint=e._fingerprint,i._eventProcessors=(0,n.fl)(e._eventProcessors),i._requestSession=e._requestSession),i},t.prototype.addScopeListener=function(t){this._scopeListeners.push(t)},t.prototype.addEventProcessor=function(t){return this._eventProcessors.push(t),this},t.prototype.setUser=function(t){return this._user=t||{},this._session&&this._session.update({user:t}),this._notifyScopeListeners(),this},t.prototype.getUser=function(){return this._user},t.prototype.getRequestSession=function(){return this._requestSession},t.prototype.setRequestSession=function(t){return this._requestSession=t,this},t.prototype.setTags=function(t){return this._tags=(0,n.pi)((0,n.pi)({},this._tags),t),this._notifyScopeListeners(),this},t.prototype.setTag=function(t,e){var i;return this._tags=(0,n.pi)((0,n.pi)({},this._tags),((i={})[t]=e,i)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(t){return this._extra=(0,n.pi)((0,n.pi)({},this._extra),t),this._notifyScopeListeners(),this},t.prototype.setExtra=function(t,e){var i;return this._extra=(0,n.pi)((0,n.pi)({},this._extra),((i={})[t]=e,i)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(t){return this._fingerprint=t,this._notifyScopeListeners(),this},t.prototype.setLevel=function(t){return this._level=t,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(t){return this._transactionName=t,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(t){return this.setTransactionName(t)},t.prototype.setContext=function(t,e){var i;return null===e?delete this._contexts[t]:this._contexts=(0,n.pi)((0,n.pi)({},this._contexts),((i={})[t]=e,i)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(t){return this._span=t,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var t,e,i,n,o=this.getSpan();return(null===(t=o)||void 0===t?void 0:t.transaction)?null===(e=o)||void 0===e?void 0:e.transaction:(null===(n=null===(i=o)||void 0===i?void 0:i.spanRecorder)||void 0===n?void 0:n.spans[0])?o.spanRecorder.spans[0]:void 0},t.prototype.setSession=function(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this},t.prototype.getSession=function(){return this._session},t.prototype.update=function(e){if(!e)return this;if("function"==typeof e){var i=e(this);return i instanceof t?i:this}return e instanceof t?(this._tags=(0,n.pi)((0,n.pi)({},this._tags),e._tags),this._extra=(0,n.pi)((0,n.pi)({},this._extra),e._extra),this._contexts=(0,n.pi)((0,n.pi)({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):(0,o.PO)(e)&&(e=e,this._tags=(0,n.pi)((0,n.pi)({},this._tags),e.tags),this._extra=(0,n.pi)((0,n.pi)({},this._extra),e.extra),this._contexts=(0,n.pi)((0,n.pi)({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(t,e){var i="number"==typeof e?Math.min(e,100):100;if(i<=0)return this;var o=(0,n.pi)({timestamp:(0,r.yW)()},t);return this._breadcrumbs=(0,n.fl)(this._breadcrumbs,[o]).slice(-i),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(t,e){var i;if(this._extra&&Object.keys(this._extra).length&&(t.extra=(0,n.pi)((0,n.pi)({},this._extra),t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=(0,n.pi)((0,n.pi)({},this._tags),t.tags)),this._user&&Object.keys(this._user).length&&(t.user=(0,n.pi)((0,n.pi)({},this._user),t.user)),this._contexts&&Object.keys(this._contexts).length&&(t.contexts=(0,n.pi)((0,n.pi)({},this._contexts),t.contexts)),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts=(0,n.pi)({trace:this._span.getTraceContext()},t.contexts);var o=null===(i=this._span.transaction)||void 0===i?void 0:i.name;o&&(t.tags=(0,n.pi)({transaction:o},t.tags))}return this._applyFingerprint(t),t.breadcrumbs=(0,n.fl)(t.breadcrumbs||[],this._breadcrumbs),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,this._notifyEventProcessors((0,n.fl)(c(),this._eventProcessors),t,e)},t.prototype._notifyEventProcessors=function(t,e,i,r){var a=this;return void 0===r&&(r=0),new s.c((function(s,l){var c=t[r];if(null===e||"function"!=typeof c)s(e);else{var h=c((0,n.pi)({},e),i);(0,o.J8)(h)?h.then((function(e){return a._notifyEventProcessors(t,e,i,r+1).then(s)})).then(null,l):a._notifyEventProcessors(t,h,i,r+1).then(s).then(null,l)}}))},t.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(e){e(t)})),this._notifyingListeners=!1)},t.prototype._applyFingerprint=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},t}();function c(){var t=(0,a.Rf)();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function h(t){c().push(t)}},666:(t,e,i)=>{"use strict";i.d(e,{Tb:()=>s,uT:()=>a,$e:()=>l});var n=i(655),o=i(538);function r(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=(0,o.Gd)();if(r&&r[t])return r[t].apply(r,(0,n.fl)(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function s(t,e){var i;try{throw new Error("Sentry syntheticException")}catch(t){i=t}return r("captureException",t,{captureContext:e,originalException:t,syntheticException:i})}function a(t,e){var i;try{throw new Error(t)}catch(t){i=t}var o="string"!=typeof e?{captureContext:e}:void 0;return r("captureMessage",t,"string"==typeof e?e:void 0,(0,n.pi)({originalException:t,syntheticException:i},o))}function l(t){r("withScope",t)}},199:(t,e,i)=>{"use strict";var n,o;i.d(e,{$:()=>n}),function(t){t.Ok="ok",t.Exited="exited",t.Crashed="crashed",t.Abnormal="abnormal"}(n||(n={})),function(t){t.Ok="ok",t.Errored="errored",t.Crashed="crashed"}(o||(o={}))},464:(t,e,i)=>{"use strict";i.d(e,{R:()=>o});var n=i(597);function o(t,e){try{for(var i=t,n=[],o=0,s=0,a=" > ".length,l=void 0;i&&o++<5&&!("html"===(l=r(i,e))||o>1&&s+n.length*a+l.length>=80);)n.push(l),s+=l.length,i=i.parentNode;return n.reverse().join(" > ")}catch(t){return"<unknown>"}}function r(t,e){var i,o,r,s,a,l,c,h=t,u=[];if(!h||!h.tagName)return"";u.push(h.tagName.toLowerCase());var d=(null===(i=e)||void 0===i?void 0:i.length)?e.filter((function(t){return h.getAttribute(t)})).map((function(t){return[t,h.getAttribute(t)]})):null;if(null===(o=d)||void 0===o?void 0:o.length)d.forEach((function(t){u.push("["+t[0]+'="'+t[1]+'"]')}));else if(h.id&&u.push("#"+h.id),(r=h.className)&&(0,n.HD)(r))for(s=r.split(/\s+/),c=0;c<s.length;c++)u.push("."+s[c]);var p=["type","name","title","alt"];for(c=0;c<p.length;c++)a=p[c],(l=h.getAttribute(a))&&u.push("["+a+'="'+l+'"]');return u.join("")}},597:(t,e,i)=>{"use strict";function n(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return f(t,Error)}}function o(t){return"[object ErrorEvent]"===Object.prototype.toString.call(t)}function r(t){return"[object DOMError]"===Object.prototype.toString.call(t)}function s(t){return"[object DOMException]"===Object.prototype.toString.call(t)}function a(t){return"[object String]"===Object.prototype.toString.call(t)}function l(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function c(t){return"[object Object]"===Object.prototype.toString.call(t)}function h(t){return"undefined"!=typeof Event&&f(t,Event)}function u(t){return"undefined"!=typeof Element&&f(t,Element)}function d(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function p(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function g(t){return c(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function f(t,e){try{return t instanceof e}catch(t){return!1}}i.d(e,{VZ:()=>n,VW:()=>o,TX:()=>r,fm:()=>s,HD:()=>a,pt:()=>l,PO:()=>c,cO:()=>h,kK:()=>u,Kj:()=>d,J8:()=>p,Cy:()=>g,V9:()=>f})},343:(t,e,i)=>{"use strict";i.d(e,{k:()=>a});var n=i(844),o=(0,n.Rf)(),r="Sentry Logger ",s=function(){function t(){this._enabled=!1}return t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&(0,n.Cf)((function(){o.console.log(r+"[Log]: "+t.join(" "))}))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&(0,n.Cf)((function(){o.console.warn(r+"[Warn]: "+t.join(" "))}))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&(0,n.Cf)((function(){o.console.error(r+"[Error]: "+t.join(" "))}))},t}();o.__SENTRY__=o.__SENTRY__||{};var a=o.__SENTRY__.logger||(o.__SENTRY__.logger=new s)},844:(t,e,i)=>{"use strict";i.d(e,{Rf:()=>r,DM:()=>s,en:()=>a,jH:()=>l,Cf:()=>c,Db:()=>h,EG:()=>u,l4:()=>d,JY:()=>p});var n=i(422),o={};function r(){return(0,n.KV)()?i.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:o}function s(){var t=r(),e=t.crypto||t.msCrypto;if(void 0!==e&&e.getRandomValues){var i=new Uint16Array(8);e.getRandomValues(i),i[3]=4095&i[3]|16384,i[4]=16383&i[4]|32768;var n=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return n(i[0])+n(i[1])+n(i[2])+n(i[3])+n(i[4])+n(i[5])+n(i[6])+n(i[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function a(t){if(!t)return{};var e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var i=e[6]||"",n=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+i+n}}function l(t){if(t.message)return t.message;if(t.exception&&t.exception.values&&t.exception.values[0]){var e=t.exception.values[0];return e.type&&e.value?e.type+": "+e.value:e.type||e.value||t.event_id||"<unknown>"}return t.event_id||"<unknown>"}function c(t){var e=r();if(!("console"in e))return t();var i=e.console,n={};["debug","info","warn","error","log","assert"].forEach((function(t){t in e.console&&i[t].__sentry_original__&&(n[t]=i[t],i[t]=i[t].__sentry_original__)}));var o=t();return Object.keys(n).forEach((function(t){i[t]=n[t]})),o}function h(t,e,i){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].value=t.exception.values[0].value||e||"",t.exception.values[0].type=t.exception.values[0].type||i||"Error"}function u(t,e){void 0===e&&(e={});try{t.exception.values[0].mechanism=t.exception.values[0].mechanism||{},Object.keys(e).forEach((function(i){t.exception.values[0].mechanism[i]=e[i]}))}catch(t){}}function d(){try{return document.location.href}catch(t){return""}}function p(t,e){if(!e)return 6e4;var i=parseInt(""+e,10);if(!isNaN(i))return 1e3*i;var n=Date.parse(""+e);return isNaN(n)?6e4:n-t}},422:(t,e,i)=>{"use strict";function n(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function o(t,e){return t.require(e)}i.d(e,{KV:()=>n,l$:()=>o}),t=i.hmd(t)},470:(t,e,i)=>{"use strict";i.d(e,{Jr:()=>_,zf:()=>v,hl:()=>c,Fv:()=>m,Qy:()=>p,_j:()=>h});var n=i(655),o=i(464),r=i(597),s=function(){function t(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return t.prototype.memoize=function(t){if(this._hasWeakSet)return!!this._inner.has(t)||(this._inner.add(t),!1);for(var e=0;e<this._inner.length;e++){if(this._inner[e]===t)return!0}return this._inner.push(t),!1},t.prototype.unmemoize=function(t){if(this._hasWeakSet)this._inner.delete(t);else for(var e=0;e<this._inner.length;e++)if(this._inner[e]===t){this._inner.splice(e,1);break}},t}(),a=i(360),l=i(321);function c(t,e,i){if(e in t){var n=t[e],o=i(n);if("function"==typeof o)try{o.prototype=o.prototype||{},Object.defineProperties(o,{__sentry_original__:{enumerable:!1,value:n}})}catch(t){}t[e]=o}}function h(t){return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}function u(t){if((0,r.VZ)(t)){var e=t,i={message:e.message,name:e.name,stack:e.stack};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i}if((0,r.cO)(t)){var s=t,a={};a.type=s.type;try{a.target=(0,r.kK)(s.target)?(0,o.R)(s.target):Object.prototype.toString.call(s.target)}catch(t){a.target="<unknown>"}try{a.currentTarget=(0,r.kK)(s.currentTarget)?(0,o.R)(s.currentTarget):Object.prototype.toString.call(s.currentTarget)}catch(t){a.currentTarget="<unknown>"}for(var n in"undefined"!=typeof CustomEvent&&(0,r.V9)(t,CustomEvent)&&(a.detail=s.detail),s)Object.prototype.hasOwnProperty.call(s,n)&&(a[n]=s);return a}return t}function d(t){return function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(t))}function p(t,e,i){void 0===e&&(e=3),void 0===i&&(i=102400);var n=m(t,e);return d(n)>i?p(t,e-1,i):n}function g(t,e){return"domain"===e&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":void 0!==i.g&&t===i.g?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":(0,r.Cy)(t)?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+(0,a.$)(t)+"]":"symbol"==typeof t?"["+String(t)+"]":"bigint"==typeof t?"[BigInt: "+String(t)+"]":t}function f(t,e,i,n){if(void 0===i&&(i=1/0),void 0===n&&(n=new s),0===i)return function(t){var e=Object.prototype.toString.call(t);if("string"==typeof t)return t;if("[object Object]"===e)return"[Object]";if("[object Array]"===e)return"[Array]";var i=g(t);return(0,r.pt)(i)?i:e}(e);if(null!=e&&"function"==typeof e.toJSON)return e.toJSON();var o=g(e,t);if((0,r.pt)(o))return o;var a=u(e),l=Array.isArray(e)?[]:{};if(n.memoize(e))return"[Circular ~]";for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(l[c]=f(c,a[c],i-1,n));return n.unmemoize(e),l}function m(t,e){try{return JSON.parse(JSON.stringify(t,(function(t,i){return f(t,i,e)})))}catch(t){return"**non-serializable**"}}function v(t,e){void 0===e&&(e=40);var i=Object.keys(u(t));if(i.sort(),!i.length)return"[object has no keys]";if(i[0].length>=e)return(0,l.$G)(i[0],e);for(var n=i.length;n>0;n--){var o=i.slice(0,n).join(", ");if(!(o.length>e))return n===i.length?o:(0,l.$G)(o,e)}return""}function _(t){var e,i;if((0,r.PO)(t)){var o=t,s={};try{for(var a=(0,n.XA)(Object.keys(o)),l=a.next();!l.done;l=a.next()){var c=l.value;void 0!==o[c]&&(s[c]=_(o[c]))}}catch(t){e={error:t}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}return s}return Array.isArray(t)?t.map(_):t}},360:(t,e,i)=>{"use strict";i.d(e,{$:()=>o});var n="<anonymous>";function o(t){try{return t&&"function"==typeof t&&t.name||n}catch(t){return n}}},321:(t,e,i)=>{"use strict";i.d(e,{$G:()=>o,nK:()=>r,zC:()=>s});var n=i(597);function o(t,e){return void 0===e&&(e=0),"string"!=typeof t||0===e||t.length<=e?t:t.substr(0,e)+"..."}function r(t,e){if(!Array.isArray(t))return"";for(var i=[],n=0;n<t.length;n++){var o=t[n];try{i.push(String(o))}catch(t){i.push("[value cannot be serialized]")}}return i.join(e)}function s(t,e){return!!(0,n.HD)(t)&&((0,n.Kj)(e)?e.test(t):"string"==typeof e&&-1!==t.indexOf(e))}},893:(t,e,i)=>{"use strict";i.d(e,{c:()=>r});var n,o=i(597);!function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED"}(n||(n={}));var r=function(){function t(t){var e=this;this._state=n.PENDING,this._handlers=[],this._resolve=function(t){e._setResult(n.RESOLVED,t)},this._reject=function(t){e._setResult(n.REJECTED,t)},this._setResult=function(t,i){e._state===n.PENDING&&((0,o.J8)(i)?i.then(e._resolve,e._reject):(e._state=t,e._value=i,e._executeHandlers()))},this._attachHandler=function(t){e._handlers=e._handlers.concat(t),e._executeHandlers()},this._executeHandlers=function(){if(e._state!==n.PENDING){var t=e._handlers.slice();e._handlers=[],t.forEach((function(t){t.done||(e._state===n.RESOLVED&&t.onfulfilled&&t.onfulfilled(e._value),e._state===n.REJECTED&&t.onrejected&&t.onrejected(e._value),t.done=!0)}))}};try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}return t.resolve=function(e){return new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,i){i(e)}))},t.all=function(e){return new t((function(i,n){if(Array.isArray(e))if(0!==e.length){var o=e.length,r=[];e.forEach((function(e,s){t.resolve(e).then((function(t){r[s]=t,0===(o-=1)&&i(r)})).then(null,n)}))}else i([]);else n(new TypeError("Promise.all requires an array as input."))}))},t.prototype.then=function(e,i){var n=this;return new t((function(t,o){n._attachHandler({done:!1,onfulfilled:function(i){if(e)try{return void t(e(i))}catch(t){return void o(t)}else t(i)},onrejected:function(e){if(i)try{return void t(i(e))}catch(t){return void o(t)}else o(e)}})}))},t.prototype.catch=function(t){return this.then((function(t){return t}),t)},t.prototype.finally=function(e){var i=this;return new t((function(t,n){var o,r;return i.then((function(t){r=!1,o=t,e&&e()}),(function(t){r=!0,o=t,e&&e()})).then((function(){r?n(o):t(o)}))}))},t.prototype.toString=function(){return"[object SyncPromise]"},t}()},170:(t,e,i)=>{"use strict";i.d(e,{yW:()=>l,ph:()=>c});var n=i(844),o=i(422);t=i.hmd(t);var r={nowSeconds:function(){return Date.now()/1e3}};var s=(0,o.KV)()?function(){try{return(0,o.l$)(t,"perf_hooks").performance}catch(t){return}}():function(){var t=(0,n.Rf)().performance;if(t&&t.now)return{now:function(){return t.now()},timeOrigin:Date.now()-t.now()}}(),a=void 0===s?r:{nowSeconds:function(){return(s.timeOrigin+s.now())/1e3}},l=r.nowSeconds.bind(r),c=a.nowSeconds.bind(a);!function(){var t=(0,n.Rf)().performance;if(t&&t.now){var e=36e5,i=t.now(),o=Date.now(),r=t.timeOrigin?Math.abs(t.timeOrigin+i-o):e,s=r<e,a=t.timing&&t.timing.navigationStart,l="number"==typeof a?Math.abs(a+i-o):e;return s||l<e?r<=l?("timeOrigin",t.timeOrigin):("navigationStart",a):("dateNow",o)}"none"}()},85:(t,e,i)=>{t=i.nmd(t),function(){var t=function(){return this}();!t&&"undefined"!=typeof window&&(t=window);var e=function(t,i,n){"string"==typeof t?(2==arguments.length&&(n=i),e.modules[t]||(e.payloads[t]=n,e.modules[t]=null)):e.original?e.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};e.modules={},e.payloads={};var i=function(t,e,i){if("string"==typeof e){var o=r(t,e);if(null!=o)return i&&i(),o}else if("[object Array]"===Object.prototype.toString.call(e)){for(var s=[],a=0,l=e.length;a<l;++a){var c=r(t,e[a]);if(null==c&&n.original)return;s.push(c)}return i&&i.apply(null,s)||!0}},n=function(t,e){var o=i("",t,e);return null==o&&n.original?n.original.apply(this,arguments):o},o=function(t,e){if(-1!==e.indexOf("!")){var i=e.split("!");return o(t,i[0])+"!"+o(t,i[1])}if("."==e.charAt(0))for(e=t.split("/").slice(0,-1).join("/")+"/"+e;-1!==e.indexOf(".")&&n!=e;){var n=e;e=e.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return e},r=function(t,n){n=o(t,n);var r=e.modules[n];if(!r){if("function"==typeof(r=e.payloads[n])){var s={},a={id:n,uri:"",exports:s,packaged:!0};s=r((function(t,e){return i(n,t,e)}),s,a)||a.exports,e.modules[n]=s,delete e.payloads[n]}r=e.modules[n]=s||r}return r};!function(i){var o=t;i&&(t[i]||(t[i]={}),o=t[i]),o.define&&o.define.packaged||(e.original=o.define,o.define=e,o.define.packaged=!0),o.require&&o.require.packaged||(n.original=o.require,o.require=n,o.require.packaged=!0)}("ace")}(),ace.define("ace/lib/regexp",["require","exports","module"],(function(t,e,i){"use strict";function n(t){return(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":"")}function o(t,e,i){if(Array.prototype.indexOf)return t.indexOf(e,i);for(var n=i||0;n<t.length;n++)if(t[n]===e)return n;return-1}var r={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},s=void 0===r.exec.call(/()??/,"")[1],a=function(){var t=/^/g;return r.test.call(t,""),!t.lastIndex}();a&&s||(RegExp.prototype.exec=function(t){var e,i,l=r.exec.apply(this,arguments);if("string"==typeof t&&l){if(!s&&l.length>1&&o(l,"")>-1&&(i=RegExp(this.source,r.replace.call(n(this),"g","")),r.replace.call(t.slice(l.index),i,(function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(l[t]=void 0)}))),this._xregexp&&this._xregexp.captureNames)for(var c=1;c<l.length;c++)(e=this._xregexp.captureNames[c-1])&&(l[e]=l[c]);!a&&this.global&&!l[0].length&&this.lastIndex>l.index&&this.lastIndex--}return l},a||(RegExp.prototype.test=function(t){var e=r.exec.call(this,t);return e&&this.global&&!e[0].length&&this.lastIndex>e.index&&this.lastIndex--,!!e}))})),ace.define("ace/lib/es5-shim",["require","exports","module"],(function(t,e,i){function n(){}function o(t){try{return Object.defineProperty(t,"sentinel",{}),"sentinel"in t}catch(t){}}function r(t){return(t=+t)!=t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError("Function.prototype.bind called on incompatible "+e);var i=g.call(arguments,1),o=function(){if(this instanceof o){var n=e.apply(this,i.concat(g.call(arguments)));return Object(n)===n?n:this}return e.apply(t,i.concat(g.call(arguments)))};return e.prototype&&(n.prototype=e.prototype,o.prototype=new n,n.prototype=null),o});var s,a,l,c,h,u=Function.prototype.call,d=Array.prototype,p=Object.prototype,g=d.slice,f=u.bind(p.toString),m=u.bind(p.hasOwnProperty);if((h=m(p,"__defineGetter__"))&&(s=u.bind(p.__defineGetter__),a=u.bind(p.__defineSetter__),l=u.bind(p.__lookupGetter__),c=u.bind(p.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function t(t){var e=new Array(t+2);return e[0]=e[1]=0,e}var e,i=[];if(i.splice.apply(i,t(20)),i.splice.apply(i,t(26)),e=i.length,i.splice(5,0,"XXX"),i.length,e+1==i.length)return!0}()){var v=Array.prototype.splice;Array.prototype.splice=function(t,e){return arguments.length?v.apply(this,[void 0===t?0:t,void 0===e?this.length-t:e].concat(g.call(arguments,2))):[]}}else Array.prototype.splice=function(t,e){var i=this.length;t>0?t>i&&(t=i):null==t?t=0:t<0&&(t=Math.max(i+t,0)),t+e<i||(e=i-t);var n=this.slice(t,t+e),o=g.call(arguments,2),r=o.length;if(t===i)r&&this.push.apply(this,o);else{var s=Math.min(e,i-t),a=t+s,l=a+r-s,c=i-a,h=i-s;if(l<a)for(var u=0;u<c;++u)this[l+u]=this[a+u];else if(l>a)for(u=c;u--;)this[l+u]=this[a+u];if(r&&t===h)this.length=h,this.push.apply(this,o);else for(this.length=h+r,u=0;u<r;++u)this[t+u]=o[u]}return n};Array.isArray||(Array.isArray=function(t){return"[object Array]"==f(t)});var _,y=Object("a"),b="a"!=y[0]||!(0 in y);if(Array.prototype.forEach||(Array.prototype.forEach=function(t){var e=D(this),i=b&&"[object String]"==f(this)?this.split(""):e,n=arguments[1],o=-1,r=i.length>>>0;if("[object Function]"!=f(t))throw new TypeError;for(;++o<r;)o in i&&t.call(n,i[o],o,e)}),Array.prototype.map||(Array.prototype.map=function(t){var e=D(this),i=b&&"[object String]"==f(this)?this.split(""):e,n=i.length>>>0,o=Array(n),r=arguments[1];if("[object Function]"!=f(t))throw new TypeError(t+" is not a function");for(var s=0;s<n;s++)s in i&&(o[s]=t.call(r,i[s],s,e));return o}),Array.prototype.filter||(Array.prototype.filter=function(t){var e,i=D(this),n=b&&"[object String]"==f(this)?this.split(""):i,o=n.length>>>0,r=[],s=arguments[1];if("[object Function]"!=f(t))throw new TypeError(t+" is not a function");for(var a=0;a<o;a++)a in n&&(e=n[a],t.call(s,e,a,i)&&r.push(e));return r}),Array.prototype.every||(Array.prototype.every=function(t){var e=D(this),i=b&&"[object String]"==f(this)?this.split(""):e,n=i.length>>>0,o=arguments[1];if("[object Function]"!=f(t))throw new TypeError(t+" is not a function");for(var r=0;r<n;r++)if(r in i&&!t.call(o,i[r],r,e))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var e=D(this),i=b&&"[object String]"==f(this)?this.split(""):e,n=i.length>>>0,o=arguments[1];if("[object Function]"!=f(t))throw new TypeError(t+" is not a function");for(var r=0;r<n;r++)if(r in i&&t.call(o,i[r],r,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=D(this),i=b&&"[object String]"==f(this)?this.split(""):e,n=i.length>>>0;if("[object Function]"!=f(t))throw new TypeError(t+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,r=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(r in i){o=i[r++];break}if(++r>=n)throw new TypeError("reduce of empty array with no initial value")}for(;r<n;r++)r in i&&(o=t.call(void 0,o,i[r],r,e));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=D(this),i=b&&"[object String]"==f(this)?this.split(""):e,n=i.length>>>0;if("[object Function]"!=f(t))throw new TypeError(t+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var o,r=n-1;if(arguments.length>=2)o=arguments[1];else for(;;){if(r in i){o=i[r--];break}if(--r<0)throw new TypeError("reduceRight of empty array with no initial value")}do{r in this&&(o=t.call(void 0,o,i[r],r,e))}while(r--);return o}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(t){var e=b&&"[object String]"==f(this)?this.split(""):D(this),i=e.length>>>0;if(!i)return-1;var n=0;for(arguments.length>1&&(n=r(arguments[1])),n=n>=0?n:Math.max(0,i+n);n<i;n++)if(n in e&&e[n]===t)return n;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(t){var e=b&&"[object String]"==f(this)?this.split(""):D(this),i=e.length>>>0;if(!i)return-1;var n=i-1;for(arguments.length>1&&(n=Math.min(n,r(arguments[1]))),n=n>=0?n:i-Math.abs(n);n>=0;n--)if(n in e&&t===e[n])return n;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:p)}),!Object.getOwnPropertyDescriptor){Object.getOwnPropertyDescriptor=function(t,e){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+t);if(m(t,e)){var i;if(i={enumerable:!0,configurable:!0},h){var n=t.__proto__;t.__proto__=p;var o=l(t,e),r=c(t,e);if(t.__proto__=n,o||r)return o&&(i.get=o),r&&(i.set=r),i}return i.value=t[e],i}}}(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),Object.create)||(_=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var t={};for(var e in t)t[e]=null;return t.constructor=t.hasOwnProperty=t.propertyIsEnumerable=t.isPrototypeOf=t.toLocaleString=t.toString=t.valueOf=t.__proto__=null,t},Object.create=function(t,e){var i;if(null===t)i=_();else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var n=function(){};n.prototype=t,(i=new n).__proto__=t}return void 0!==e&&Object.defineProperties(i,e),i});if(Object.defineProperty){var w=o({}),k="undefined"==typeof document||o(document.createElement("div"));if(!w||!k)var C=Object.defineProperty}if(!Object.defineProperty||C){Object.defineProperty=function(t,e,i){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.defineProperty called on non-object: "+t);if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Property description must be an object: "+i);if(C)try{return C.call(Object,t,e,i)}catch(t){}if(m(i,"value"))if(h&&(l(t,e)||c(t,e))){var n=t.__proto__;t.__proto__=p,delete t[e],t[e]=i.value,t.__proto__=n}else t[e]=i.value;else{if(!h)throw new TypeError("getters & setters can not be defined on this javascript engine");m(i,"get")&&s(t,e,i.get),m(i,"set")&&a(t,e,i.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,e){for(var i in e)m(e,i)&&Object.defineProperty(t,i,e[i]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze((function(){}))}catch(t){Object.freeze=function(t){return function(e){return"function"==typeof e?e:t(e)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;for(var e="";m(t,e);)e+="?";t[e]=!0;var i=m(t,e);return delete t[e],i}),!Object.keys){var T=!0,E=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],S=E.length;for(var x in{toString:null})T=!1;Object.keys=function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");var e=[];for(var i in t)m(t,i)&&e.push(i);if(T)for(var n=0,o=S;n<o;n++){var r=E[n];m(t,r)&&e.push(r)}return e}}Date.now||(Date.now=function(){return(new Date).getTime()});var R="\t\n\v\f\r                　\u2028\u2029\ufeff";if(!String.prototype.trim){R="["+R+"]";var A=new RegExp("^"+R+R+"*"),I=new RegExp(R+R+"*$");String.prototype.trim=function(){return String(this).replace(A,"").replace(I,"")}}var D=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)}})),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],(function(t,e,i){"use strict";t("./regexp"),t("./es5-shim"),"undefined"!=typeof Element&&!Element.prototype.remove&&Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})),ace.define("ace/lib/useragent",["require","exports","module"],(function(t,e,i){"use strict";e.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},e.getOS=function(){return e.isMac?e.OS.MAC:e.isLinux?e.OS.LINUX:e.OS.WINDOWS};var n="object"==typeof navigator?navigator:{},o=(/mac|win|linux/i.exec(n.platform)||["other"])[0].toLowerCase(),r=n.userAgent||"",s=n.appName||"";e.isWin="win"==o,e.isMac="mac"==o,e.isLinux="linux"==o,e.isIE="Microsoft Internet Explorer"==s||s.indexOf("MSAppHost")>=0?parseFloat((r.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((r.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),e.isOldIE=e.isIE&&e.isIE<9,e.isGecko=e.isMozilla=r.match(/ Gecko\/\d+/),e.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),e.isWebKit=parseFloat(r.split("WebKit/")[1])||void 0,e.isChrome=parseFloat(r.split(" Chrome/")[1])||void 0,e.isEdge=parseFloat(r.split(" Edge/")[1])||void 0,e.isAIR=r.indexOf("AdobeAIR")>=0,e.isAndroid=r.indexOf("Android")>=0,e.isChromeOS=r.indexOf(" CrOS ")>=0,e.isIOS=/iPad|iPhone|iPod/.test(r)&&!window.MSStream,e.isIOS&&(e.isMac=!0),e.isMobile=e.isIOS||e.isAndroid})),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],(function(t,e,i){"use strict";var n=t("./useragent");if(e.buildDom=function t(e,i,n){if("string"==typeof e&&e){var o=document.createTextNode(e);return i&&i.appendChild(o),o}if(!Array.isArray(e))return e;if("string"!=typeof e[0]||!e[0]){for(var r=[],s=0;s<e.length;s++){var a=t(e[s],i,n);a&&r.push(a)}return r}var l=document.createElement(e[0]),c=e[1],h=1;c&&"object"==typeof c&&!Array.isArray(c)&&(h=2);for(s=h;s<e.length;s++)t(e[s],l,n);return 2==h&&Object.keys(c).forEach((function(t){var e=c[t];"class"===t?l.className=Array.isArray(e)?e.join(" "):e:"function"==typeof e||"value"==t?l[t]=e:"ref"===t?n&&(n[e]=l):null!=e&&l.setAttribute(t,e)})),i&&i.appendChild(l),l},e.getDocumentHead=function(t){return t||(t=document),t.head||t.getElementsByTagName("head")[0]||t.documentElement},e.createElement=function(t,e){return document.createElementNS?document.createElementNS(e||"http://www.w3.org/1999/xhtml",t):document.createElement(t)},e.removeChildren=function(t){t.innerHTML=""},e.createTextNode=function(t,e){return(e?e.ownerDocument:document).createTextNode(t)},e.createFragment=function(t){return(t?t.ownerDocument:document).createDocumentFragment()},e.hasCssClass=function(t,e){return-1!==(t.className+"").split(/\s+/g).indexOf(e)},e.addCssClass=function(t,i){e.hasCssClass(t,i)||(t.className+=" "+i)},e.removeCssClass=function(t,e){for(var i=t.className.split(/\s+/g);;){var n=i.indexOf(e);if(-1==n)break;i.splice(n,1)}t.className=i.join(" ")},e.toggleCssClass=function(t,e){for(var i=t.className.split(/\s+/g),n=!0;;){var o=i.indexOf(e);if(-1==o)break;n=!1,i.splice(o,1)}return n&&i.push(e),t.className=i.join(" "),n},e.setCssClass=function(t,i,n){n?e.addCssClass(t,i):e.removeCssClass(t,i)},e.hasCssString=function(t,e){var i,n=0;if(i=(e=e||document).querySelectorAll("style"))for(;n<i.length;)if(i[n++].id===t)return!0},e.importCssString=function(t,i,n){var o=n;n&&n.getRootNode&&(o=n.getRootNode())&&o!=n||(o=document);var r=o.ownerDocument||o;if(i&&e.hasCssString(i,o))return null;i&&(t+="\n/*# sourceURL=ace/css/"+i+" */");var s=e.createElement("style");s.appendChild(r.createTextNode(t)),i&&(s.id=i),o==r&&(o=e.getDocumentHead(r)),o.insertBefore(s,o.firstChild)},e.importCssStylsheet=function(t,i){e.buildDom(["link",{rel:"stylesheet",href:t}],e.getDocumentHead(i))},e.scrollbarWidth=function(t){var i=e.createElement("ace_inner");i.style.width="100%",i.style.minWidth="0px",i.style.height="200px",i.style.display="block";var n=e.createElement("ace_outer"),o=n.style;o.position="absolute",o.left="-10000px",o.overflow="hidden",o.width="200px",o.minWidth="0px",o.height="150px",o.display="block",n.appendChild(i);var r=t.documentElement;r.appendChild(n);var s=i.offsetWidth;o.overflow="scroll";var a=i.offsetWidth;return s==a&&(a=n.clientWidth),r.removeChild(n),s-a},"undefined"==typeof document&&(e.importCssString=function(){}),e.computedStyle=function(t,e){return window.getComputedStyle(t,"")||{}},e.setStyle=function(t,e,i){t[e]!==i&&(t[e]=i)},e.HAS_CSS_ANIMATION=!1,e.HAS_CSS_TRANSFORMS=!1,e.HI_DPI=!n.isWin||"undefined"!=typeof window&&window.devicePixelRatio>=1.5,"undefined"!=typeof document){var o=document.createElement("div");e.HI_DPI&&void 0!==o.style.transform&&(e.HAS_CSS_TRANSFORMS=!0),!n.isEdge&&void 0!==o.style.animationName&&(e.HAS_CSS_ANIMATION=!0),o=null}e.HAS_CSS_TRANSFORMS?e.translate=function(t,e,i){t.style.transform="translate("+Math.round(e)+"px, "+Math.round(i)+"px)"}:e.translate=function(t,e,i){t.style.top=Math.round(i)+"px",t.style.left=Math.round(e)+"px"}})),ace.define("ace/lib/oop",["require","exports","module"],(function(t,e,i){"use strict";e.inherits=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},e.mixin=function(t,e){for(var i in e)t[i]=e[i];return t},e.implement=function(t,i){e.mixin(t,i)}})),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],(function(t,e,i){"use strict";var n=t("./oop"),o=function(){var t,e,i={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(e in i.FUNCTION_KEYS)t=i.FUNCTION_KEYS[e].toLowerCase(),i[t]=parseInt(e,10);for(e in i.PRINTABLE_KEYS)t=i.PRINTABLE_KEYS[e].toLowerCase(),i[t]=parseInt(e,10);return n.mixin(i,i.MODIFIER_KEYS),n.mixin(i,i.PRINTABLE_KEYS),n.mixin(i,i.FUNCTION_KEYS),i.enter=i.return,i.escape=i.esc,i.del=i.delete,i[173]="-",function(){for(var t=["cmd","ctrl","alt","shift"],e=Math.pow(2,t.length);e--;)i.KEY_MODS[e]=t.filter((function(t){return e&i.KEY_MODS[t]})).join("-")+"-"}(),i.KEY_MODS[0]="",i.KEY_MODS[-1]="input-",i}();n.mixin(e,o),e.keyCodeToString=function(t){var e=o[t];return"string"!=typeof e&&(e=String.fromCharCode(t)),e.toLowerCase()}})),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(t,e,i){"use strict";function n(){return null==s&&function(){s=!1;try{document.createComment("").addEventListener("test",(function(){}),{get passive(){s={passive:!1}}})}catch(t){}}(),s}function o(t,e,i){var n=u(e);if(!l.isMac&&c){if(e.getModifierState&&(e.getModifierState("OS")||e.getModifierState("Win"))&&(n|=8),c.altGr){if(3==(3&n))return;c.altGr=0}if(18===i||17===i){var o="location"in e?e.location:e.keyLocation;if(17===i&&1===o)1==c[i]&&(h=e.timeStamp);else if(18===i&&3===n&&2===o){e.timeStamp-h<50&&(c.altGr=!0)}}}if((i in a.MODIFIER_KEYS&&(i=-1),!n&&13===i)&&(3===(o="location"in e?e.location:e.keyLocation)&&(t(e,n,-i),e.defaultPrevented)))return;if(l.isChromeOS&&8&n){if(t(e,n,i),e.defaultPrevented)return;n&=-9}return!!(n||i in a.FUNCTION_KEYS||i in a.PRINTABLE_KEYS)&&t(e,n,i)}function r(){c=Object.create(null)}var s,a=t("./keys"),l=t("./useragent"),c=null,h=0;e.addListener=function(t,e,i){return t.addEventListener(e,i,n())},e.removeListener=function(t,e,i){return t.removeEventListener(e,i,n())},e.stopEvent=function(t){return e.stopPropagation(t),e.preventDefault(t),!1},e.stopPropagation=function(t){t.stopPropagation&&t.stopPropagation()},e.preventDefault=function(t){t.preventDefault&&t.preventDefault()},e.getButton=function(t){return"dblclick"==t.type?0:"contextmenu"==t.type||l.isMac&&t.ctrlKey&&!t.altKey&&!t.shiftKey?2:t.button},e.capture=function(t,i,n){function o(t){i&&i(t),n&&n(t),e.removeListener(document,"mousemove",i,!0),e.removeListener(document,"mouseup",o,!0),e.removeListener(document,"dragstart",o,!0)}return e.addListener(document,"mousemove",i,!0),e.addListener(document,"mouseup",o,!0),e.addListener(document,"dragstart",o,!0),o},e.addMouseWheelListener=function(t,i){"onmousewheel"in t?e.addListener(t,"mousewheel",(function(t){void 0!==t.wheelDeltaX?(t.wheelX=-t.wheelDeltaX/8,t.wheelY=-t.wheelDeltaY/8):(t.wheelX=0,t.wheelY=-t.wheelDelta/8),i(t)})):"onwheel"in t?e.addListener(t,"wheel",(function(t){switch(t.deltaMode){case t.DOM_DELTA_PIXEL:t.wheelX=.35*t.deltaX||0,t.wheelY=.35*t.deltaY||0;break;case t.DOM_DELTA_LINE:case t.DOM_DELTA_PAGE:t.wheelX=5*(t.deltaX||0),t.wheelY=5*(t.deltaY||0)}i(t)})):e.addListener(t,"DOMMouseScroll",(function(t){t.axis&&t.axis==t.HORIZONTAL_AXIS?(t.wheelX=5*(t.detail||0),t.wheelY=0):(t.wheelX=0,t.wheelY=5*(t.detail||0)),i(t)}))},e.addMultiMouseDownListener=function(t,i,n,o){function r(t){if(0!==e.getButton(t)?h=0:t.detail>1?++h>4&&(h=1):h=1,l.isIE){var r=Math.abs(t.clientX-s)>5||Math.abs(t.clientY-a)>5;c&&!r||(h=1),c&&clearTimeout(c),c=setTimeout((function(){c=null}),i[h-1]||600),1==h&&(s=t.clientX,a=t.clientY)}if(t._clicks=h,n[o]("mousedown",t),h>4)h=0;else if(h>1)return n[o](u[h],t)}var s,a,c,h=0,u={2:"dblclick",3:"tripleclick",4:"quadclick"};Array.isArray(t)||(t=[t]),t.forEach((function(t){e.addListener(t,"mousedown",r)}))};var u=function(t){return 0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0)};if(e.getModifierString=function(t){return a.KEY_MODS[u(t)]},e.addCommandKeyListener=function(t,i){var n=e.addListener;if(l.isOldGecko||l.isOpera&&!("KeyboardEvent"in window)){var s=null;n(t,"keydown",(function(t){s=t.keyCode})),n(t,"keypress",(function(t){return o(i,t,s)}))}else{var a=null;n(t,"keydown",(function(t){c[t.keyCode]=(c[t.keyCode]||0)+1;var e=o(i,t,t.keyCode);return a=t.defaultPrevented,e})),n(t,"keypress",(function(t){a&&(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)&&(e.stopEvent(t),a=null)})),n(t,"keyup",(function(t){c[t.keyCode]=null})),c||(r(),n(window,"focus",r))}},"object"==typeof window&&window.postMessage&&!l.isOldIE){var d=1;e.nextTick=function(t,i){i=i||window;var n="zero-timeout-message-"+d++,o=function(r){r.data==n&&(e.stopPropagation(r),e.removeListener(i,"message",o),t())};e.addListener(i,"message",o),i.postMessage(n,"*")}}e.$idleBlocked=!1,e.onIdle=function(t,i){return setTimeout((function i(){e.$idleBlocked?setTimeout(i,100):t()}),i)},e.$idleBlockId=null,e.blockIdle=function(t){e.$idleBlockId&&clearTimeout(e.$idleBlockId),e.$idleBlocked=!0,e.$idleBlockId=setTimeout((function(){e.$idleBlocked=!1}),t||100)},e.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),e.nextFrame?e.nextFrame=e.nextFrame.bind(window):e.nextFrame=function(t){setTimeout(t,17)}})),ace.define("ace/range",["require","exports","module"],(function(t,e,i){"use strict";var n=function(t,e,i,n){this.start={row:t,column:e},this.end={row:i,column:n}};(function(){this.isEqual=function(t){return this.start.row===t.start.row&&this.end.row===t.end.row&&this.start.column===t.start.column&&this.end.column===t.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(t,e){return 0==this.compare(t,e)},this.compareRange=function(t){var e,i=t.end,n=t.start;return 1==(e=this.compare(i.row,i.column))?1==(e=this.compare(n.row,n.column))?2:0==e?1:0:-1==e?-2:-1==(e=this.compare(n.row,n.column))?-1:1==e?42:0},this.comparePoint=function(t){return this.compare(t.row,t.column)},this.containsRange=function(t){return 0==this.comparePoint(t.start)&&0==this.comparePoint(t.end)},this.intersects=function(t){var e=this.compareRange(t);return-1==e||0==e||1==e},this.isEnd=function(t,e){return this.end.row==t&&this.end.column==e},this.isStart=function(t,e){return this.start.row==t&&this.start.column==e},this.setStart=function(t,e){"object"==typeof t?(this.start.column=t.column,this.start.row=t.row):(this.start.row=t,this.start.column=e)},this.setEnd=function(t,e){"object"==typeof t?(this.end.column=t.column,this.end.row=t.row):(this.end.row=t,this.end.column=e)},this.inside=function(t,e){return 0==this.compare(t,e)&&(!this.isEnd(t,e)&&!this.isStart(t,e))},this.insideStart=function(t,e){return 0==this.compare(t,e)&&!this.isEnd(t,e)},this.insideEnd=function(t,e){return 0==this.compare(t,e)&&!this.isStart(t,e)},this.compare=function(t,e){return this.isMultiLine()||t!==this.start.row?t<this.start.row?-1:t>this.end.row?1:this.start.row===t?e>=this.start.column?0:-1:this.end.row===t?e<=this.end.column?0:1:0:e<this.start.column?-1:e>this.end.column?1:0},this.compareStart=function(t,e){return this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.compareEnd=function(t,e){return this.end.row==t&&this.end.column==e?1:this.compare(t,e)},this.compareInside=function(t,e){return this.end.row==t&&this.end.column==e?1:this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.clipRows=function(t,e){if(this.end.row>e)var i={row:e+1,column:0};else if(this.end.row<t)i={row:t,column:0};if(this.start.row>e)var o={row:e+1,column:0};else if(this.start.row<t)o={row:t,column:0};return n.fromPoints(o||this.start,i||this.end)},this.extend=function(t,e){var i=this.compare(t,e);if(0==i)return this;if(-1==i)var o={row:t,column:e};else var r={row:t,column:e};return n.fromPoints(o||this.start,r||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return n.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new n(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new n(this.start.row,0,this.end.row,0)},this.toScreenRange=function(t){var e=t.documentToScreenPosition(this.start),i=t.documentToScreenPosition(this.end);return new n(e.row,e.column,i.row,i.column)},this.moveBy=function(t,e){this.start.row+=t,this.start.column+=e,this.end.row+=t,this.end.column+=e}}).call(n.prototype),n.fromPoints=function(t,e){return new n(t.row,t.column,e.row,e.column)},n.comparePoints=function(t,e){return t.row-e.row||t.column-e.column},n.comparePoints=function(t,e){return t.row-e.row||t.column-e.column},e.Range=n})),ace.define("ace/lib/lang",["require","exports","module"],(function(t,e,i){"use strict";e.last=function(t){return t[t.length-1]},e.stringReverse=function(t){return t.split("").reverse().join("")},e.stringRepeat=function(t,e){for(var i="";e>0;)1&e&&(i+=t),(e>>=1)&&(t+=t);return i};var n=/^\s\s*/,o=/\s\s*$/;e.stringTrimLeft=function(t){return t.replace(n,"")},e.stringTrimRight=function(t){return t.replace(o,"")},e.copyObject=function(t){var e={};for(var i in t)e[i]=t[i];return e},e.copyArray=function(t){for(var e=[],i=0,n=t.length;i<n;i++)t[i]&&"object"==typeof t[i]?e[i]=this.copyObject(t[i]):e[i]=t[i];return e},e.deepCopy=function t(e){if("object"!=typeof e||!e)return e;var i;if(Array.isArray(e)){i=[];for(var n=0;n<e.length;n++)i[n]=t(e[n]);return i}if("[object Object]"!==Object.prototype.toString.call(e))return e;for(var n in i={},e)i[n]=t(e[n]);return i},e.arrayToMap=function(t){for(var e={},i=0;i<t.length;i++)e[t[i]]=1;return e},e.createMap=function(t){var e=Object.create(null);for(var i in t)e[i]=t[i];return e},e.arrayRemove=function(t,e){for(var i=0;i<=t.length;i++)e===t[i]&&t.splice(i,1)},e.escapeRegExp=function(t){return t.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},e.escapeHTML=function(t){return(""+t).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},e.getMatchOffsets=function(t,e){var i=[];return t.replace(e,(function(t){i.push({offset:arguments[arguments.length-2],length:t.length})})),i},e.deferredCall=function(t){var e=null,i=function(){e=null,t()},n=function(t){return n.cancel(),e=setTimeout(i,t||0),n};return n.schedule=n,n.call=function(){return this.cancel(),t(),n},n.cancel=function(){return clearTimeout(e),e=null,n},n.isPending=function(){return e},n},e.delayedCall=function(t,e){var i=null,n=function(){i=null,t()},o=function(t){null==i&&(i=setTimeout(n,t||e))};return o.delay=function(t){i&&clearTimeout(i),i=setTimeout(n,t||e)},o.schedule=o,o.call=function(){this.cancel(),t()},o.cancel=function(){i&&clearTimeout(i),i=null},o.isPending=function(){return i},o}})),ace.define("ace/clipboard",["require","exports","module"],(function(t,e,i){"use strict";var n;i.exports={lineMode:!1,pasteCancelled:function(){return!!(n&&n>Date.now()-50)||(n=!1)},cancel:function(){n=Date.now()}}})),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],(function(t,e,i){"use strict";var n=t("../lib/event"),o=t("../lib/useragent"),r=t("../lib/dom"),s=t("../lib/lang"),a=t("../clipboard"),l=o.isChrome<18,c=o.isIE,h=o.isChrome>63,u=400,d=t("../lib/keys"),p=d.KEY_MODS,g=o.isIOS,f=g?/\s/:/\n/;e.TextInput=function(t,e){function i(){T=!0,v.blur(),v.focus(),T=!1}function m(){clearTimeout(V),V=setTimeout((function(){k&&(v.style.cssText=k,k=""),e.renderer.$isMousePressed=!1,e.renderer.$keepTextAreaAtCursor&&e.renderer.$moveTextAreaToCursor()}),0)}var v=r.createElement("textarea");v.className="ace_text-input",v.setAttribute("wrap","off"),v.setAttribute("autocorrect","off"),v.setAttribute("autocapitalize","off"),v.setAttribute("spellcheck",!1),v.style.opacity="0",t.insertBefore(v,t.firstChild);var _=!1,y=!1,b=!1,w=!1,k="";o.isMobile||(v.style.fontSize="1px");var C=!1,T=!1,E="",S=0,x=0,R=0;try{var A=document.activeElement===v}catch(t){}n.addListener(v,"blur",(function(t){T||(e.onBlur(t),A=!1)})),n.addListener(v,"focus",(function(t){if(!T){if(A=!0,o.isEdge)try{if(!document.hasFocus())return}catch(t){}e.onFocus(t),o.isEdge?setTimeout(I):I()}})),this.$focusScroll=!1,this.focus=function(){if(k||h||"browser"==this.$focusScroll)return v.focus({preventScroll:!0});var t=v.style.top;v.style.position="fixed",v.style.top="0px";try{var e=0!=v.getBoundingClientRect().top}catch(t){return}var i=[];if(e)for(var n=v.parentElement;n&&1==n.nodeType;)i.push(n),n.setAttribute("ace_nocontext",!0),n=!n.parentElement&&n.getRootNode?n.getRootNode().host:n.parentElement;v.focus({preventScroll:!0}),e&&i.forEach((function(t){t.removeAttribute("ace_nocontext")})),setTimeout((function(){v.style.position="","0px"==v.style.top&&(v.style.top=t)}),0)},this.blur=function(){v.blur()},this.isFocused=function(){return A},e.on("beforeEndOperation",(function(){e.curOp&&"insertstring"==e.curOp.command.name||(b&&(E=v.value="",H()),I())}));var I=g?function(t){if(A&&(!_||t)&&!w){t||(t="");var i="\n ab"+t+"cde fg\n";i!=v.value&&(v.value=E=i);var n=4+(t.length||(e.selection.isEmpty()?0:1));(4!=S||x!=n)&&v.setSelectionRange(4,n),S=4,x=n}}:function(){if(!b&&!w&&(A||O)){b=!0;var t=e.selection,i=t.getRange(),n=t.cursor.row,o=i.start.column,r=i.end.column,s=e.session.getLine(n);if(i.start.row!=n){var a=e.session.getLine(n-1);o=i.start.row<n-1?0:o,r+=a.length+1,s=a+"\n"+s}else if(i.end.row!=n){var l=e.session.getLine(n+1);r=i.end.row>n+1?l.length:r,r+=s.length+1,s=s+"\n"+l}s.length>u&&(o<u&&r<u?s=s.slice(0,u):(s="\n",o=0,r=1));var c=s+"\n\n";if(c!=E&&(v.value=E=c,S=x=c.length),O&&(S=v.selectionStart,x=v.selectionEnd),x!=r||S!=o||v.selectionEnd!=x)try{v.setSelectionRange(o,r),S=o,x=r}catch(t){}b=!1}};A&&e.onFocus();var D=null;this.setInputHandler=function(t){D=t},this.getInputHandler=function(){return D};var O=!1,N=function(t,i){if(O&&(O=!1),y)return I(),t&&e.onPaste(t),y=!1,"";for(var n=v.selectionStart,o=v.selectionEnd,r=S,s=E.length-x,a=t,l=t.length-n,c=t.length-o,h=0;r>0&&E[h]==t[h];)h++,r--;for(a=a.slice(h),h=1;s>0&&E.length-h>S-1&&E[E.length-h]==t[t.length-h];)h++,s--;l-=h-1,c-=h-1;var u=a.length-h+1;return u<0&&(r=-u,u=0),a=a.slice(0,u),i||a||l||r||s||c?(w=!0,a&&!r&&!s&&!l&&!c||C?e.onTextInput(a):e.onTextInput(a,{extendLeft:r,extendRight:s,restoreStart:l,restoreEnd:c}),w=!1,E=t,S=n,x=o,R=c,a):""},L=function(t){if(b)return $();if(t&&t.inputType){if("historyUndo"==t.inputType)return e.execCommand("undo");if("historyRedo"==t.inputType)return e.execCommand("redo")}var i=v.value,n=N(i,!0);(i.length>500||f.test(n))&&I()},M=function(t,e,i){var n=t.clipboardData||window.clipboardData;if(n&&!l){var o=c||i?"Text":"text/plain";try{return e?!1!==n.setData(o,e):n.getData(o)}catch(t){if(!i)return M(t,e,!0)}}},B=function(t,i){var o=e.getCopyText();if(!o)return n.preventDefault(t);M(t,o)?(g&&(I(o),_=o,setTimeout((function(){_=!1}),10)),i?e.onCut():e.onCopy(),n.preventDefault(t)):(_=!0,v.value=o,v.select(),setTimeout((function(){_=!1,I(),i?e.onCut():e.onCopy()})))},P=function(t){B(t,!0)},F=function(t){B(t,!1)},W=function(t){var i=M(t);a.pasteCancelled()||("string"==typeof i?(i&&e.onPaste(i,t),o.isIE&&setTimeout(I),n.preventDefault(t)):(v.value="",y=!0))};n.addCommandKeyListener(v,e.onCommandKey.bind(e)),n.addListener(v,"select",(function(t){b||(_?_=!1:function(t){return 0===t.selectionStart&&t.selectionEnd>=E.length&&t.value===E&&E&&t.selectionEnd!==x}(v)&&(e.selectAll(),I()))})),n.addListener(v,"input",L),n.addListener(v,"cut",P),n.addListener(v,"copy",F),n.addListener(v,"paste",W),(!("oncut"in v)||!("oncopy"in v)||!("onpaste"in v))&&n.addListener(t,"keydown",(function(t){if((!o.isMac||t.metaKey)&&t.ctrlKey)switch(t.keyCode){case 67:F(t);break;case 86:W(t);break;case 88:P(t)}}));var $=function(){if(b&&e.onCompositionUpdate&&!e.$readOnly){if(C)return i();if(b.useTextareaForIME)e.onCompositionUpdate(v.value);else{var t=v.value;N(t),b.markerRange&&(b.context&&(b.markerRange.start.column=b.selectionStart=b.context.compositionStartOffset),b.markerRange.end.column=b.markerRange.start.column+x-b.selectionStart+R)}}},H=function(t){e.onCompositionEnd&&!e.$readOnly&&(b=!1,e.onCompositionEnd(),e.off("mousedown",i),t&&L())},U=s.delayedCall($,50).schedule.bind(null,null);n.addListener(v,"compositionstart",(function(t){if(!b&&e.onCompositionStart&&!e.$readOnly&&(b={},!C)){setTimeout($,0),e.on("mousedown",i);var n=e.getSelectionRange();n.end.row=n.start.row,n.end.column=n.start.column,b.markerRange=n,b.selectionStart=S,e.onCompositionStart(b),b.useTextareaForIME?(v.value="",E="",S=0,x=0):(v.msGetInputContext&&(b.context=v.msGetInputContext()),v.getInputContext&&(b.context=v.getInputContext()))}})),n.addListener(v,"compositionupdate",$),n.addListener(v,"keyup",(function(t){27==t.keyCode&&v.value.length<v.selectionStart&&(b||(E=v.value),S=x=-1,I()),U()})),n.addListener(v,"keydown",U),n.addListener(v,"compositionend",H),this.getElement=function(){return v},this.setCommandMode=function(t){C=t,v.readOnly=!1},this.setReadOnly=function(t){C||(v.readOnly=t)},this.setCopyWithEmptySelection=function(t){},this.onContextMenu=function(t){O=!0,I(),e._emit("nativecontextmenu",{target:e,domEvent:t}),this.moveToMouse(t,!0)},this.moveToMouse=function(t,i){k||(k=v.style.cssText),v.style.cssText=(i?"z-index:100000;":"")+(o.isIE?"opacity:0.1;":"")+"text-indent: -"+(S+x)*e.renderer.characterWidth*.5+"px;";var s=e.container.getBoundingClientRect(),a=r.computedStyle(e.container),l=s.top+(parseInt(a.borderTopWidth)||0),c=s.left+(parseInt(s.borderLeftWidth)||0),h=s.bottom-l-v.clientHeight-2,u=function(t){r.translate(v,t.clientX-c-2,Math.min(t.clientY-l-2,h))};u(t),"mousedown"==t.type&&(e.renderer.$isMousePressed=!0,clearTimeout(V),o.isWin&&n.capture(e.container,u,m))},this.onContextMenuClose=m;var V,G=function(t){e.textInput.onContextMenu(t),m()};n.addListener(v,"mouseup",G),n.addListener(v,"mousedown",(function(t){t.preventDefault(),m()})),n.addListener(e.renderer.scroller,"contextmenu",G),n.addListener(v,"contextmenu",G),g&&function(t,e,i){var n=null,o=!1;i.addEventListener("keydown",(function(t){n&&clearTimeout(n),o=!0}),!0),i.addEventListener("keyup",(function(t){n=setTimeout((function(){o=!1}),100)}),!0);var r=function(t){if(document.activeElement===i&&!(o||b||e.$mouseHandler.isMousePressed||_)){var n=i.selectionStart,r=i.selectionEnd,s=null,a=0;if(0==n?s=d.up:1==n?s=d.home:r>x&&"\n"==E[r]?s=d.end:n<S&&" "==E[n-1]?(s=d.left,a=p.option):n<S||n==S&&x!=S&&n==r?s=d.left:r>x&&E.slice(0,r).split("\n").length>2?s=d.down:r>x&&" "==E[r-1]?(s=d.right,a=p.option):(r>x||r==x&&x!=S&&n==r)&&(s=d.right),n!==r&&(a|=p.shift),s){if(!e.onCommandKey({},a,s)&&e.commands){s=d.keyCodeToString(s);var l=e.commands.findKeyCommand(a,s);l&&e.execCommand(l)}S=n,x=r,I("")}}};document.addEventListener("selectionchange",r),e.on("destroy",(function(){document.removeEventListener("selectionchange",r)}))}(0,e,v)}})),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],(function(t,e,i){"use strict";function n(t){t.$clickSelection=null;var e=t.editor;e.setDefaultHandler("mousedown",this.onMouseDown.bind(t)),e.setDefaultHandler("dblclick",this.onDoubleClick.bind(t)),e.setDefaultHandler("tripleclick",this.onTripleClick.bind(t)),e.setDefaultHandler("quadclick",this.onQuadClick.bind(t)),e.setDefaultHandler("mousewheel",this.onMouseWheel.bind(t));["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach((function(e){t[e]=this[e]}),this),t.selectByLines=this.extendSelectionBy.bind(t,"getLineRange"),t.selectByWords=this.extendSelectionBy.bind(t,"getWordRange")}function o(t,e){if(t.start.row==t.end.row)var i=2*e.column-t.start.column-t.end.column;else if(t.start.row!=t.end.row-1||t.start.column||t.end.column)i=2*e.row-t.start.row-t.end.row;else var i=e.column-4;return i<0?{cursor:t.start,anchor:t.end}:{cursor:t.end,anchor:t.start}}var r=t("../lib/useragent");(function(){this.onMouseDown=function(t){var e=t.inSelection(),i=t.getDocumentPosition();this.mousedownEvent=t;var n=this.editor,o=t.getButton();return 0!==o?((n.getSelectionRange().isEmpty()||1==o)&&n.selection.moveToPosition(i),void(2==o&&(n.textInput.onContextMenu(t.domEvent),r.isMozilla||t.preventDefault()))):(this.mousedownEvent.time=Date.now(),!e||n.isFocused()||(n.focus(),!this.$focusTimeout||this.$clickSelection||n.inMultiSelectMode)?(this.captureMouse(t),this.startSelect(i,t.domEvent._clicks>1),t.preventDefault()):(this.setState("focusWait"),void this.captureMouse(t)))},this.startSelect=function(t,e){t=t||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var i=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?i.selection.selectToPosition(t):e||i.selection.moveToPosition(t),e||this.select(),i.renderer.scroller.setCapture&&i.renderer.scroller.setCapture(),i.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var t,e=this.editor,i=e.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var n=this.$clickSelection.comparePoint(i);if(-1==n)t=this.$clickSelection.end;else if(1==n)t=this.$clickSelection.start;else{var r=o(this.$clickSelection,i);i=r.cursor,t=r.anchor}e.selection.setSelectionAnchor(t.row,t.column)}e.selection.selectToPosition(i),e.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(t){var e,i=this.editor,n=i.renderer.screenToTextCoordinates(this.x,this.y),r=i.selection[t](n.row,n.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(r.start),a=this.$clickSelection.comparePoint(r.end);if(-1==s&&a<=0)e=this.$clickSelection.end,r.end.row==n.row&&r.end.column==n.column||(n=r.start);else if(1==a&&s>=0)e=this.$clickSelection.start,r.start.row==n.row&&r.start.column==n.column||(n=r.end);else if(-1==s&&1==a)n=r.end,e=r.start;else{var l=o(this.$clickSelection,n);n=l.cursor,e=l.anchor}i.selection.setSelectionAnchor(e.row,e.column)}i.selection.selectToPosition(n),i.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var t=function(t,e,i,n){return Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2))}(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),e=Date.now();(t>0||e-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(t){var e=t.getDocumentPosition(),i=this.editor,n=i.session.getBracketRange(e);n?(n.isEmpty()&&(n.start.column--,n.end.column++),this.setState("select")):(n=i.selection.getWordRange(e.row,e.column),this.setState("selectByWords")),this.$clickSelection=n,this.select()},this.onTripleClick=function(t){var e=t.getDocumentPosition(),i=this.editor;this.setState("selectByLines");var n=i.getSelectionRange();n.isMultiLine()&&n.contains(e.row,e.column)?(this.$clickSelection=i.selection.getLineRange(n.start.row),this.$clickSelection.end=i.selection.getLineRange(n.end.row).end):this.$clickSelection=i.selection.getLineRange(e.row),this.select()},this.onQuadClick=function(t){var e=this.editor;e.selectAll(),this.$clickSelection=e.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(t){if(!t.getAccelKey()){t.getShiftKey()&&t.wheelY&&!t.wheelX&&(t.wheelX=t.wheelY,t.wheelY=0);var e=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var i=this.$lastScroll,n=t.domEvent.timeStamp,o=n-i.t,r=o?t.wheelX/o:i.vx,s=o?t.wheelY/o:i.vy;o<550&&(r=(r+i.vx)/2,s=(s+i.vy)/2);var a=Math.abs(r/s),l=!1;if(a>=1&&e.renderer.isScrollableBy(t.wheelX*t.speed,0)&&(l=!0),a<=1&&e.renderer.isScrollableBy(0,t.wheelY*t.speed)&&(l=!0),l)i.allowed=n;else if(n-i.allowed<550){Math.abs(r)<=1.5*Math.abs(i.vx)&&Math.abs(s)<=1.5*Math.abs(i.vy)?(l=!0,i.allowed=n):i.allowed=0}return i.t=n,i.vx=r,i.vy=s,l?(e.renderer.scrollBy(t.wheelX*t.speed,t.wheelY*t.speed),t.stop()):void 0}}}).call(n.prototype),e.DefaultHandlers=n})),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],(function(t,e,i){"use strict";function n(t){this.isOpen=!1,this.$element=null,this.$parentNode=t}t("./lib/oop");var o=t("./lib/dom");(function(){this.$init=function(){return this.$element=o.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(t){this.getElement().textContent=t},this.setHtml=function(t){this.getElement().innerHTML=t},this.setPosition=function(t,e){this.getElement().style.left=t+"px",this.getElement().style.top=e+"px"},this.setClassName=function(t){o.addCssClass(this.getElement(),t)},this.show=function(t,e,i){null!=t&&this.setText(t),null!=e&&null!=i&&this.setPosition(e,i),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(n.prototype),e.Tooltip=n})),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],(function(t,e,i){"use strict";function n(t){a.call(this,t)}var o=t("../lib/dom"),r=t("../lib/oop"),s=t("../lib/event"),a=t("../tooltip").Tooltip;r.inherits(n,a),function(){this.setPosition=function(t,e){var i=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,o=this.getWidth(),r=this.getHeight();(t+=15)+o>i&&(t-=t+o-i),(e+=15)+r>n&&(e-=20+r),a.prototype.setPosition.call(this,t,e)}}.call(n.prototype),e.GutterHandler=function(t){function e(){var e=l.getDocumentPosition().row,n=u.$annotations[e];if(!n)return i();if(e==h.session.getLength()){var o=h.renderer.pixelToScreenCoordinates(0,l.y).row,s=l.$pos;if(o>h.session.documentToScreenRow(s.row,s.column))return i()}if(c!=n)if(c=n.text.join("<br/>"),d.setHtml(c),d.show(),h._signal("showGutterTooltip",d),h.on("mousewheel",i),t.$tooltipFollowsMouse)r(l);else{var a=l.domEvent.target.getBoundingClientRect(),p=d.getElement().style;p.left=a.right+"px",p.top=a.bottom+"px"}}function i(){a&&(a=clearTimeout(a)),c&&(d.hide(),c=null,h._signal("hideGutterTooltip",d),h.removeEventListener("mousewheel",i))}function r(t){d.setPosition(t.x,t.y)}var a,l,c,h=t.editor,u=h.renderer.$gutterLayer,d=new n(h.container);t.editor.setDefaultHandler("guttermousedown",(function(e){if(h.isFocused()&&0==e.getButton()&&"foldWidgets"!=u.getRegion(e)){var i=e.getDocumentPosition().row,n=h.session.selection;if(e.getShiftKey())n.selectTo(i,0);else{if(2==e.domEvent.detail)return h.selectAll(),e.preventDefault();t.$clickSelection=h.selection.getLineRange(i)}return t.setState("selectByLines"),t.captureMouse(e),e.preventDefault()}})),t.editor.setDefaultHandler("guttermousemove",(function(n){var s=n.domEvent.target||n.domEvent.srcElement;if(o.hasCssClass(s,"ace_fold-widget"))return i();c&&t.$tooltipFollowsMouse&&r(n),l=n,a||(a=setTimeout((function(){a=null,l&&!t.isMousePressed?e():i()}),50))})),s.addListener(h.renderer.$gutter,"mouseout",(function(t){l=null,c&&!a&&(a=setTimeout((function(){a=null,i()}),50))})),h.on("changeSession",i)}})),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(t,e,i){"use strict";var n=t("../lib/event"),o=t("../lib/useragent"),r=e.MouseEvent=function(t,e){this.domEvent=t,this.editor=e,this.x=this.clientX=t.clientX,this.y=this.clientY=t.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){n.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){n.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)),this.$pos},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var t=this.editor.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var e=this.getDocumentPosition();this.$inSelection=t.contains(e.row,e.column)}return this.$inSelection},this.getButton=function(){return n.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=o.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(r.prototype)})),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],(function(t,e,i){"use strict";function n(t){function e(){var t=w;(function(t,e){var i=Date.now(),n=!e||t.row!=e.row,r=!e||t.column!=e.column;!E||n||r?(g.moveCursorToPosition(t),E=i,S={x:v,y:_}):o(S.x,S.y,v,_)>h?E=null:i-E>=c&&(g.renderer.scrollCursorIntoView(),E=null)})(w=g.renderer.screenToTextCoordinates(v,_),t),function(t,e){var i=Date.now(),n=g.renderer.layerConfig.lineHeight,o=g.renderer.layerConfig.characterWidth,r=g.renderer.scroller.getBoundingClientRect(),s={x:{left:v-r.left,right:r.right-v},y:{top:_-r.top,bottom:r.bottom-_}},a=Math.min(s.x.left,s.x.right),c=Math.min(s.y.top,s.y.bottom),h={row:t.row,column:t.column};a/o<=2&&(h.column+=s.x.left<s.x.right?-3:2),c/n<=1&&(h.row+=s.y.top<s.y.bottom?-1:1);var u=t.row!=h.row,d=t.column!=h.column,p=!e||t.row!=e.row;u||d&&!p?T?i-T>=l&&g.renderer.scrollCursorIntoView(h):T=i:T=null}(w,t)}function i(){b=g.selection.toOrientedRange(),m=g.session.addMarker(b,"ace_selection",g.getSelectionStyle()),g.clearSelection(),g.isFocused()&&g.renderer.$cursorLayer.setBlinking(!1),clearInterval(y),e(),y=setInterval(e,20),R=0,s.addListener(document,"mousemove",u)}function n(){clearInterval(y),g.session.removeMarker(m),m=null,g.selection.fromOrientedRange(b),g.isFocused()&&!C&&g.$resetCursorStyle(),b=null,w=null,R=0,T=null,E=null,s.removeListener(document,"mousemove",u)}function u(){null==A&&(A=setTimeout((function(){null!=A&&m&&n()}),20))}function d(t){var e=t.types;return!e||Array.prototype.some.call(e,(function(t){return"text/plain"==t||"Text"==t}))}function p(t){var e=["copy","copymove","all","uninitialized"],i=a.isMac?t.altKey:t.ctrlKey,n="uninitialized";try{n=t.dataTransfer.effectAllowed.toLowerCase()}catch(t){}var o="none";return i&&e.indexOf(n)>=0?o="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(n)>=0?o="move":e.indexOf(n)>=0&&(o="copy"),o}var g=t.editor,f=r.createElement("img");f.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a.isOpera&&(f.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach((function(e){t[e]=this[e]}),this),g.addEventListener("mousedown",this.onMouseDown.bind(t));var m,v,_,y,b,w,k,C,T,E,S,x=g.container,R=0;this.onDragStart=function(t){if(this.cancelDrag||!x.draggable){var e=this;return setTimeout((function(){e.startSelect(),e.captureMouse(t)}),0),t.preventDefault()}b=g.getSelectionRange();var i=t.dataTransfer;i.effectAllowed=g.getReadOnly()?"copy":"copyMove",a.isOpera&&(g.container.appendChild(f),f.scrollTop=0),i.setDragImage&&i.setDragImage(f,0,0),a.isOpera&&g.container.removeChild(f),i.clearData(),i.setData("Text",g.session.getTextRange()),C=!0,this.setState("drag")},this.onDragEnd=function(t){if(x.draggable=!1,C=!1,this.setState(null),!g.getReadOnly()){var e=t.dataTransfer.dropEffect;!k&&"move"==e&&g.session.remove(g.getSelectionRange()),g.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(t){if(!g.getReadOnly()&&d(t.dataTransfer))return v=t.clientX,_=t.clientY,m||i(),R++,t.dataTransfer.dropEffect=k=p(t),s.preventDefault(t)},this.onDragOver=function(t){if(!g.getReadOnly()&&d(t.dataTransfer))return v=t.clientX,_=t.clientY,m||(i(),R++),null!==A&&(A=null),t.dataTransfer.dropEffect=k=p(t),s.preventDefault(t)},this.onDragLeave=function(t){if(--R<=0&&m)return n(),k=null,s.preventDefault(t)},this.onDrop=function(t){if(w){var e=t.dataTransfer;if(C)switch(k){case"move":b=b.contains(w.row,w.column)?{start:w,end:w}:g.moveText(b,w);break;case"copy":b=g.moveText(b,w,!0)}else{var i=e.getData("Text");b={start:w,end:g.session.insert(w,i)},g.focus(),k=null}return n(),s.preventDefault(t)}},s.addListener(x,"dragstart",this.onDragStart.bind(t)),s.addListener(x,"dragend",this.onDragEnd.bind(t)),s.addListener(x,"dragenter",this.onDragEnter.bind(t)),s.addListener(x,"dragover",this.onDragOver.bind(t)),s.addListener(x,"dragleave",this.onDragLeave.bind(t)),s.addListener(x,"drop",this.onDrop.bind(t));var A=null}function o(t,e,i,n){return Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2))}var r=t("../lib/dom"),s=t("../lib/event"),a=t("../lib/useragent"),l=200,c=200,h=5;(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(t){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var t=this.editor;t.container.draggable=!0,t.renderer.$cursorLayer.setBlinking(!1),t.setStyle("ace_dragging");var e=a.isWin?"default":"move";t.renderer.setCursorStyle(e),this.setState("dragReady")},this.onMouseDrag=function(t){var e=this.editor.container;a.isIE&&"dragReady"==this.state&&(o(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&e.dragDrop());"dragWait"===this.state&&(o(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition())))},this.onMouseDown=function(t){if(this.$dragEnabled){this.mousedownEvent=t;var e=this.editor,i=t.inSelection(),n=t.getButton();if(1===(t.domEvent.detail||1)&&0===n&&i){if(t.editor.inMultiSelectMode&&(t.getAccelKey()||t.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=t.domEvent.target||t.domEvent.srcElement;if("unselectable"in o&&(o.unselectable="on"),e.getDragDelay()){if(a.isWebKit)this.cancelDrag=!0,e.container.draggable=!0;this.setState("dragWait")}else this.startDrag();this.captureMouse(t,this.onMouseDrag.bind(this)),t.defaultPrevented=!0}}}}).call(n.prototype),e.DragdropHandler=n})),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],(function(t,e,i){"use strict";var n=t("./mouse_event").MouseEvent,o=t("../lib/event"),r=t("../lib/dom");e.addTouchListeners=function(t,e){function i(){var t=window.navigator&&window.navigator.clipboard,i=!1,n=function(){var n=e.getCopyText(),o=e.session.getUndoManager().hasUndo();v.replaceChild(r.buildDom(i?["span",!n&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],n&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],n&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],t&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],o&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),v.firstChild)},o=function(o){var r=o.target.getAttribute("action");if("more"==r||!i)return i=!i,n();"paste"==r?t.readText().then((function(t){e.execCommand(r,t)})):r&&("cut"!=r&&"copy"!=r||(t?t.writeText(e.getCopyText()):document.execCommand("copy")),e.execCommand(r)),v.firstChild.style.display="none",i=!1,"openCommandPallete"!=r&&e.focus()};v=r.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(t){_="menu",t.stopPropagation(),t.preventDefault(),e.textInput.focus()},ontouchend:function(t){t.stopPropagation(),t.preventDefault(),o(t)},onclick:o},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],e.container)}function s(){v||i();var t=e.selection.cursor,n=e.renderer.textToScreenCoordinates(t.row,t.column),o=e.container.getBoundingClientRect();v.style.top=n.pageY-o.top-3+"px",v.style.right="10px",v.style.display="",v.firstChild.style.display="none",e.on("input",a)}function a(t){v&&(v.style.display="none"),e.off("input",a)}function l(){p=null,clearTimeout(p);var t=e.selection.getRange(),i=t.contains(f.row,f.column);!t.isEmpty()&&i||(e.selection.moveToPosition(f),e.selection.selectWord()),_="wait",s()}var c,h,u,d,p,g,f,m,v,_="scroll",y=0,b=0,w=0,k=0;o.addListener(t,"contextmenu",(function(t){m&&e.textInput.getElement().focus()})),o.addListener(t,"touchstart",(function(t){var i=t.touches;if(p||i.length>1)return clearTimeout(p),p=null,u=-1,void(_="zoom");m=e.$mouseHandler.isMousePressed=!0;var o=e.renderer.layerConfig.lineHeight,r=e.renderer.layerConfig.lineHeight,s=t.timeStamp;d=s;var a=i[0],g=a.clientX,v=a.clientY;Math.abs(c-g)+Math.abs(h-v)>o&&(u=-1),c=t.clientX=g,h=t.clientY=v,w=k=0;var C=new n(t,e);if(f=C.getDocumentPosition(),s-u<500&&1==i.length&&!y)b++,t.preventDefault(),t.button=0,function(){p=null,clearTimeout(p),e.selection.moveToPosition(f);var t=b>=2?e.selection.getLineRange(f.row):e.session.getBracketRange(f);t&&!t.isEmpty()?e.selection.setRange(t):e.selection.selectWord(),_="wait"}();else{b=0;var T=e.selection.cursor,E=e.selection.isEmpty()?T:e.selection.anchor,S=e.renderer.$cursorLayer.getPixelPosition(T,!0),x=e.renderer.$cursorLayer.getPixelPosition(E,!0),R=e.renderer.scroller.getBoundingClientRect(),A=function(t,e){return(t/=r)*t+(e=e/o-.75)*e};if(t.clientX<R.left)return void(_="zoom");var I=A(t.clientX-R.left-S.left,t.clientY-R.top-S.top),D=A(t.clientX-R.left-x.left,t.clientY-R.top-x.top);I<3.5&&D<3.5&&(_=I>D?"cursor":"anchor"),_=D<3.5?"anchor":I<3.5?"cursor":"scroll",p=setTimeout(l,450)}u=s})),o.addListener(t,"touchend",(function(t){m=e.$mouseHandler.isMousePressed=!1,g&&clearInterval(g),"zoom"==_?(_="",y=0):p?(e.selection.moveToPosition(f),y=0,s()):"scroll"==_?(y+=60,g=setInterval((function(){y--<=0&&(clearInterval(g),g=null),Math.abs(w)<.01&&(w=0),Math.abs(k)<.01&&(k=0),y<20&&(w*=.9),y<20&&(k*=.9);var t=e.session.getScrollTop();e.renderer.scrollBy(10*w,10*k),t==e.session.getScrollTop()&&(y=0)}),10),t.preventDefault(),a()):s(),clearTimeout(p),p=null})),o.addListener(t,"touchmove",(function(t){p&&(clearTimeout(p),p=null);var i=t.touches;if(!(i.length>1||"zoom"==_)){var o=i[0],r=c-o.clientX,s=h-o.clientY;if("wait"==_){if(!(r*r+s*s>4))return t.preventDefault();_="cursor"}c=o.clientX,h=o.clientY,t.clientX=o.clientX,t.clientY=o.clientY;var a=t.timeStamp,l=a-d;if(d=a,"scroll"==_){var u=new n(t,e);u.speed=1,u.wheelX=r,u.wheelY=s,10*Math.abs(r)<Math.abs(s)&&(r=0),10*Math.abs(s)<Math.abs(r)&&(s=0),0!=l&&(w=r/l,k=s/l),e._emit("mousewheel",u),u.propagationStopped||(w=k=0)}else{var g=new n(t,e).getDocumentPosition();"cursor"==_?e.selection.moveCursorToPosition(g):"anchor"==_&&e.selection.setSelectionAnchor(g.row,g.column),e.renderer.scrollCursorIntoView(g),t.preventDefault()}}}))}})),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],(function(t,e,i){"use strict";var n=t("./dom");e.get=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onreadystatechange=function(){4===i.readyState&&e(i.responseText)},i.send(null)},e.loadScript=function(t,e){var i=n.getDocumentHead(),o=document.createElement("script");o.src=t,i.appendChild(o),o.onload=o.onreadystatechange=function(t,i){!i&&o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(o=o.onload=o.onreadystatechange=null,i||e())}},e.qualifyURL=function(t){var e=document.createElement("a");return e.href=t,e.href}})),ace.define("ace/lib/event_emitter",["require","exports","module"],(function(t,e,i){"use strict";var n={},o=function(){this.propagationStopped=!0},r=function(){this.defaultPrevented=!0};n._emit=n._dispatchEvent=function(t,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var i=this._eventRegistry[t]||[],n=this._defaultHandlers[t];if(i.length||n){"object"==typeof e&&e||(e={}),e.type||(e.type=t),e.stopPropagation||(e.stopPropagation=o),e.preventDefault||(e.preventDefault=r),i=i.slice();for(var s=0;s<i.length&&(i[s](e,this),!e.propagationStopped);s++);return n&&!e.defaultPrevented?n(e,this):void 0}},n._signal=function(t,e){var i=(this._eventRegistry||{})[t];if(i){i=i.slice();for(var n=0;n<i.length;n++)i[n](e,this)}},n.once=function(t,e){var i=this;if(this.addEventListener(t,(function n(){i.removeEventListener(t,n),e.apply(null,arguments)})),!e)return new Promise((function(t){e=t}))},n.setDefaultHandler=function(t,e){var i=this._defaultHandlers;if(i||(i=this._defaultHandlers={_disabled_:{}}),i[t]){var n=i[t],o=i._disabled_[t];o||(i._disabled_[t]=o=[]),o.push(n);var r=o.indexOf(e);-1!=r&&o.splice(r,1)}i[t]=e},n.removeDefaultHandler=function(t,e){var i=this._defaultHandlers;if(i){var n=i._disabled_[t];if(i[t]==e)n&&this.setDefaultHandler(t,n.pop());else if(n){var o=n.indexOf(e);-1!=o&&n.splice(o,1)}}},n.on=n.addEventListener=function(t,e,i){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[t];return n||(n=this._eventRegistry[t]=[]),-1==n.indexOf(e)&&n[i?"unshift":"push"](e),e},n.off=n.removeListener=n.removeEventListener=function(t,e){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[t];if(i){var n=i.indexOf(e);-1!==n&&i.splice(n,1)}},n.removeAllListeners=function(t){this._eventRegistry&&(this._eventRegistry[t]=[])},e.EventEmitter=n})),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,i){function n(t){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function o(t,e){var i=new Error(t);i.data=e,"object"==typeof console&&console.error&&console.error(i),setTimeout((function(){throw i}))}var r=t("./oop"),s=t("./event_emitter").EventEmitter,a={setOptions:function(t){Object.keys(t).forEach((function(e){this.setOption(e,t[e])}),this)},getOptions:function(t){var e={};if(t)Array.isArray(t)||(e=t,t=Object.keys(e));else{var i=this.$options;t=Object.keys(i).filter((function(t){return!i[t].hidden}))}return t.forEach((function(t){e[t]=this.getOption(t)}),this),e},setOption:function(t,e){if(this["$"+t]!==e){var i=this.$options[t];return i?i.forwardTo?this[i.forwardTo]&&this[i.forwardTo].setOption(t,e):(i.handlesSet||(this["$"+t]=e),void(i&&i.set&&i.set.call(this,e))):n('misspelled option "'+t+'"')}},getOption:function(t){var e=this.$options[t];return e?e.forwardTo?this[e.forwardTo]&&this[e.forwardTo].getOption(t):e&&e.get?e.get.call(this):this["$"+t]:n('misspelled option "'+t+'"')}},l=function(){this.$defaultOptions={}};(function(){r.implement(this,s),this.defineOptions=function(t,e,i){return t.$options||(this.$defaultOptions[e]=t.$options={}),Object.keys(i).forEach((function(e){var n=i[e];"string"==typeof n&&(n={forwardTo:n}),n.name||(n.name=e),t.$options[n.name]=n,"initialValue"in n&&(t["$"+n.name]=n.initialValue)})),r.implement(t,a),this},this.resetOptions=function(t){Object.keys(t.$options).forEach((function(e){var i=t.$options[e];"value"in i&&t.setOption(e,i.value)}))},this.setDefaultValue=function(t,e,i){if(!t){for(t in this.$defaultOptions)if(this.$defaultOptions[t][e])break;if(!this.$defaultOptions[t][e])return!1}var n=this.$defaultOptions[t]||(this.$defaultOptions[t]={});n[e]&&(n.forwardTo?this.setDefaultValue(n.forwardTo,e,i):n[e].value=i)},this.setDefaultValues=function(t,e){Object.keys(e).forEach((function(i){this.setDefaultValue(t,i,e[i])}),this)},this.warn=n,this.reportError=o}).call(l.prototype),e.AppConfig=l})),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],(function(t,e,n){function o(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}var r=t("./lib/lang"),s=(t("./lib/oop"),t("./lib/net")),a=t("./lib/app_config").AppConfig;n.exports=e=new a;var l=function(){return this||"undefined"!=typeof window&&window}(),c={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};e.get=function(t){if(!c.hasOwnProperty(t))throw new Error("Unknown config key: "+t);return c[t]},e.set=function(t,e){if(c.hasOwnProperty(t))c[t]=e;else if(0==this.setDefaultValue("",t,e))throw new Error("Unknown config key: "+t)},e.all=function(){return r.copyObject(c)},e.$modes={},e.moduleUrl=function(t,e){if(c.$moduleUrls[t])return c.$moduleUrls[t];var i=t.split("/"),n="snippets"==(e=e||i[i.length-2]||"")?"/":"-",o=i[i.length-1];if("worker"==e&&"-"==n){var r=new RegExp("^"+e+"[\\-_]|[\\-_]"+e+"$","g");o=o.replace(r,"")}(!o||o==e)&&i.length>1&&(o=i[i.length-2]);var s=c[e+"Path"];return null==s?s=c.basePath:"/"==n&&(e=n=""),s&&"/"!=s.slice(-1)&&(s+="/"),s+e+n+o+this.get("suffix")},e.setModuleUrl=function(t,e){return c.$moduleUrls[t]=e},e.$loading={},e.loadModule=function(i,n){var o,r;Array.isArray(i)&&(r=i[0],i=i[1]);try{o=t(i)}catch(t){}if(o&&!e.$loading[i])return n&&n(o);if(e.$loading[i]||(e.$loading[i]=[]),e.$loading[i].push(n),!(e.$loading[i].length>1)){var a=function(){t([i],(function(t){e._emit("load.module",{name:i,module:t});var n=e.$loading[i];e.$loading[i]=null,n.forEach((function(e){e&&e(t)}))}))};if(!e.get("packaged"))return a();s.loadScript(e.moduleUrl(i,r),a),h()}};var h=function(){!c.basePath&&!c.workerPath&&!c.modePath&&!c.themePath&&!Object.keys(c.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),h=function(){})};e.init=function(r){if(l&&l.document){c.packaged=r||t.packaged||n.packaged||l.define&&i.amdD.packaged;for(var s={},a="",h=document.currentScript||document._currentScript,u=(h&&h.ownerDocument||document).getElementsByTagName("script"),d=0;d<u.length;d++){var p=u[d],g=p.src||p.getAttribute("src");if(g){for(var f=p.attributes,m=0,v=f.length;m<v;m++){var _=f[m];0===_.name.indexOf("data-ace-")&&(s[o(_.name.replace(/^data-ace-/,""))]=_.value)}var y=g.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);y&&(a=y[1])}}for(var b in a&&(s.base=s.base||a,s.packaged=!0),s.basePath=s.base,s.workerPath=s.workerPath||s.base,s.modePath=s.modePath||s.base,s.themePath=s.themePath||s.base,delete s.base,s)void 0!==s[b]&&e.set(b,s[b])}},e.version="1.4.8"})),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],(function(t,e,i){"use strict";var n=t("../lib/event"),o=t("../lib/useragent"),r=t("./default_handlers").DefaultHandlers,s=t("./default_gutter_handler").GutterHandler,a=t("./mouse_event").MouseEvent,l=t("./dragdrop_handler").DragdropHandler,c=t("./touch_handler").addTouchListeners,h=t("../config"),u=function(t){var e=this;this.editor=t,new r(this),new s(this),new l(this);var i=function(e){(!document.hasFocus||!document.hasFocus()||!t.isFocused()&&document.activeElement==(t.textInput&&t.textInput.getElement()))&&window.focus(),t.focus()},a=t.renderer.getMouseEventTarget();n.addListener(a,"click",this.onMouseEvent.bind(this,"click")),n.addListener(a,"mousemove",this.onMouseMove.bind(this,"mousemove")),n.addMultiMouseDownListener([a,t.renderer.scrollBarV&&t.renderer.scrollBarV.inner,t.renderer.scrollBarH&&t.renderer.scrollBarH.inner,t.textInput&&t.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),n.addMouseWheelListener(t.container,this.onMouseWheel.bind(this,"mousewheel")),c(t.container,t);var h=t.renderer.$gutter;n.addListener(h,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),n.addListener(h,"click",this.onMouseEvent.bind(this,"gutterclick")),n.addListener(h,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),n.addListener(h,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),n.addListener(a,"mousedown",i),n.addListener(h,"mousedown",i),o.isIE&&t.renderer.scrollBarV&&(n.addListener(t.renderer.scrollBarV.element,"mousedown",i),n.addListener(t.renderer.scrollBarH.element,"mousedown",i)),t.on("mousemove",(function(i){if(!e.state&&!e.$dragDelay&&e.$dragEnabled){var n=t.renderer.screenToTextCoordinates(i.x,i.y),o=t.session.selection.getRange(),r=t.renderer;!o.isEmpty()&&o.insideStart(n.row,n.column)?r.setCursorStyle("default"):r.setCursorStyle("")}}))};(function(){this.onMouseEvent=function(t,e){this.editor._emit(t,new a(e,this.editor))},this.onMouseMove=function(t,e){var i=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;i&&i.length&&this.editor._emit(t,new a(e,this.editor))},this.onMouseWheel=function(t,e){var i=new a(e,this.editor);i.speed=2*this.$scrollSpeed,i.wheelX=e.wheelX,i.wheelY=e.wheelY,this.editor._emit(t,i)},this.setState=function(t){this.state=t},this.captureMouse=function(t,e){this.x=t.x,this.y=t.y,this.isMousePressed=!0;var i=this.editor,r=this.editor.renderer;r.$isMousePressed=!0;var s=this,l=function(t){if(t)return o.isWebKit&&!t.which&&s.releaseMouse?s.releaseMouse():(s.x=t.clientX,s.y=t.clientY,e&&e(t),s.mouseEvent=new a(t,s.editor),void(s.$mouseMoved=!0))},c=function(t){i.off("beforeEndOperation",u),clearInterval(d),h(),s[s.state+"End"]&&s[s.state+"End"](t),s.state="",s.isMousePressed=r.$isMousePressed=!1,r.$keepTextAreaAtCursor&&r.$moveTextAreaToCursor(),s.$onCaptureMouseMove=s.releaseMouse=null,t&&s.onMouseEvent("mouseup",t),i.endOperation()},h=function(){s[s.state]&&s[s.state](),s.$mouseMoved=!1};if(o.isOldIE&&"dblclick"==t.domEvent.type)return setTimeout((function(){c(t)}));var u=function(t){s.releaseMouse&&i.curOp.command.name&&i.curOp.selectionChanged&&(s[s.state+"End"]&&s[s.state+"End"](),s.state="",s.releaseMouse())};i.on("beforeEndOperation",u),i.startOperation({command:{name:"mouse"}}),s.$onCaptureMouseMove=l,s.releaseMouse=n.capture(this.editor.container,l,c);var d=setInterval(h,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var t=function(e){e&&e.domEvent&&"contextmenu"!=e.domEvent.type||(this.editor.off("nativecontextmenu",t),e&&e.domEvent&&n.stopEvent(e.domEvent))}.bind(this);setTimeout(t,10),this.editor.on("nativecontextmenu",t)}}).call(u.prototype),h.defineOptions(u.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:o.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),e.MouseHandler=u})),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],(function(t,e,i){"use strict";var n=t("../lib/dom");e.FoldHandler=function(t){t.on("click",(function(e){var i=e.getDocumentPosition(),o=t.session,r=o.getFoldAt(i.row,i.column,1);r&&(e.getAccelKey()?o.removeFold(r):o.expandFold(r),e.stop());var s=e.domEvent&&e.domEvent.target;s&&n.hasCssClass(s,"ace_inline_button")&&n.hasCssClass(s,"ace_toggle_wrap")&&(o.setOption("wrap",!o.getUseWrapMode()),t.renderer.scrollCursorIntoView())})),t.on("gutterclick",(function(e){if("foldWidgets"==t.renderer.$gutterLayer.getRegion(e)){var i=e.getDocumentPosition().row,n=t.session;n.foldWidgets&&n.foldWidgets[i]&&t.session.onFoldWidgetClick(i,e),t.isFocused()||t.focus(),e.stop()}})),t.on("gutterdblclick",(function(e){if("foldWidgets"==t.renderer.$gutterLayer.getRegion(e)){var i=e.getDocumentPosition().row,n=t.session,o=n.getParentFoldRangeData(i,!0),r=o.range||o.firstRange;if(r){i=r.start.row;var s=n.getFoldAt(i,n.getLine(i).length,1);s?n.removeFold(s):(n.addFold("...",r),t.renderer.scrollCursorIntoView({row:r.start.row,column:0}))}e.stop()}}))}})),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],(function(t,e,i){"use strict";var n=t("../lib/keys"),o=t("../lib/event"),r=function(t){this.$editor=t,this.$data={editor:t},this.$handlers=[],this.setDefaultHandler(t.commands)};(function(){this.setDefaultHandler=function(t){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=t,this.addKeyboardHandler(t,0)},this.setKeyboardHandler=function(t){var e=this.$handlers;if(e[e.length-1]!=t){for(;e[e.length-1]&&e[e.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(e[e.length-1]);this.addKeyboardHandler(t,1)}},this.addKeyboardHandler=function(t,e){if(t){"function"==typeof t&&!t.handleKeyboard&&(t.handleKeyboard=t);var i=this.$handlers.indexOf(t);-1!=i&&this.$handlers.splice(i,1),null==e?this.$handlers.push(t):this.$handlers.splice(e,0,t),-1==i&&t.attach&&t.attach(this.$editor)}},this.removeKeyboardHandler=function(t){var e=this.$handlers.indexOf(t);return-1!=e&&(this.$handlers.splice(e,1),t.detach&&t.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var t=this.$data,e=t.editor;return this.$handlers.map((function(i){return i.getStatusText&&i.getStatusText(e,t)||""})).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(t,e,i,n){for(var r,s=!1,a=this.$editor.commands,l=this.$handlers.length;l--&&!((r=this.$handlers[l].handleKeyboard(this.$data,t,e,i,n))&&r.command&&((s="null"==r.command||a.exec(r.command,this.$editor,r.args,n))&&n&&-1!=t&&1!=r.passEvent&&1!=r.command.passEvent&&o.stopEvent(n),s)););return!s&&-1==t&&(r={command:"insertstring"},s=a.exec("insertstring",this.$editor,e)),s&&this.$editor._signal&&this.$editor._signal("keyboardActivity",r),s},this.onCommandKey=function(t,e,i){var o=n.keyCodeToString(i);return this.$callKeyboardHandlers(e,o,i,t)},this.onTextInput=function(t){return this.$callKeyboardHandlers(-1,t)}}).call(r.prototype),e.KeyBinding=r})),ace.define("ace/lib/bidiutil",["require","exports","module"],(function(t,e,i){"use strict";function n(t,e,i,n){var o=a?p:d,g=null,f=null,m=null,v=0,_=null,y=-1,k=null,T=null,E=[];if(!n)for(k=0,n=[];k<i;k++)n[k]=s(t[k]);for(l=a,c=!1,!1,h=!1,u=!1,T=0;T<i;T++){if(g=v,E[T]=f=r(t,n,E,T),_=240&(v=o[g][f]),v&=15,e[T]=m=o[v][5],_>0)if(16==_){for(k=y;k<T;k++)e[k]=1;y=-1}else y=-1;if(o[v][6])-1==y&&(y=T);else if(y>-1){for(k=y;k<T;k++)e[k]=m;y=-1}n[T]==b&&(e[T]=0),l|=m}if(u)for(k=0;k<i;k++)if(n[k]==w){e[k]=a;for(var S=k-1;S>=0&&n[S]==C;S--)e[S]=a}}function o(t,e,i){if(!(l<t))if(1!=t||a!=g||h)for(var n,o,r,s,c=i.length,u=0;u<c;){if(e[u]>=t){for(n=u+1;n<c&&e[n]>=t;)n++;for(o=u,r=n-1;o<r;o++,r--)s=i[o],i[o]=i[r],i[r]=s;u=n}u++}else i.reverse()}function r(t,e,i,n){var o,r,s,l,d=e[n];switch(d){case f:case m:c=!1;case y:case _:return d;case v:return c?_:v;case k:return c=!0,!0,m;case C:return y;case T:return n<1||n+1>=e.length||(o=i[n-1])!=v&&o!=_||(r=e[n+1])!=v&&r!=_?y:(c&&(r=_),r==o?r:y);case E:return(o=n>0?i[n-1]:b)==v&&n+1<e.length&&e[n+1]==v?v:y;case S:if(n>0&&i[n-1]==v)return v;if(c)return y;for(l=n+1,s=e.length;l<s&&e[l]==S;)l++;return l<s&&e[l]==v?v:y;case x:for(s=e.length,l=n+1;l<s&&e[l]==x;)l++;if(l<s){var p=t[n],g=p>=1425&&p<=2303||64286==p;if(o=e[l],g&&(o==m||o==k))return m}return n<1||(o=e[n-1])==b?y:i[n-1];case b:return c=!1,h=!0,a;case w:return u=!0,y;case R:case A:case D:case O:case I:c=!1;case N:return y}}function s(t){var e=t.charCodeAt(0),i=e>>8;return 0==i?e>191?f:L[e]:5==i?/[\u0591-\u05f4]/.test(t)?m:f:6==i?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(t)?x:/[\u0660-\u0669\u066b-\u066c]/.test(t)?_:1642==e?S:/[\u06f0-\u06f9]/.test(t)?v:k:32==i&&e<=8287?M[255&e]:254==i&&e>=65136?k:y}var a=0,l=0,c=!1,h=!1,u=!1,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g=1,f=0,m=1,v=2,_=3,y=4,b=5,w=6,k=7,C=8,T=9,E=10,S=11,x=12,R=13,A=14,I=15,D=16,O=17,N=18,L=[N,N,N,N,N,N,N,N,N,w,b,w,C,b,N,N,N,N,N,N,N,N,N,N,N,N,N,N,b,b,b,w,C,y,y,S,S,S,y,y,y,y,y,E,T,E,T,T,v,v,v,v,v,v,v,v,v,v,T,y,y,y,y,y,y,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,y,y,y,y,y,y,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,y,y,y,y,N,N,N,N,N,N,b,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,T,y,S,S,S,S,y,y,y,y,f,y,y,N,y,y,S,S,v,v,y,f,y,y,y,v,f,y,y,y,y,y],M=[C,C,C,C,C,C,C,C,C,C,C,N,N,N,f,m,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,C,b,R,A,I,D,O,T,S,S,S,S,S,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,T,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,C];e.L=f,e.R=m,e.EN=v,e.ON_R=3,e.AN=4,e.R_H=5,e.B=6,e.RLE=7,e.DOT="·",e.doBidiReorder=function(t,i,r){if(t.length<2)return{};var s=t.split(""),l=new Array(s.length),c=new Array(s.length),h=[];a=r?g:0,n(s,h,s.length,i);for(var u=0;u<l.length;l[u]=u,u++);o(2,h,l),o(1,h,l);for(u=0;u<l.length-1;u++)i[u]===_?h[u]=e.AN:h[u]===m&&(i[u]>k&&i[u]<R||i[u]===y||i[u]===N)?h[u]=e.ON_R:u>0&&"ل"===s[u-1]&&/\u0622|\u0623|\u0625|\u0627/.test(s[u])&&(h[u-1]=h[u]=e.R_H,u++);s[s.length-1]===e.DOT&&(h[s.length-1]=e.B),"‫"===s[0]&&(h[0]=e.RLE);for(u=0;u<l.length;u++)c[u]=h[l[u]];return{logicalFromVisual:l,bidiLevels:c}},e.hasBidiCharacters=function(t,e){for(var i=!1,n=0;n<t.length;n++)e[n]=s(t.charAt(n)),!i&&(e[n]==m||e[n]==k||e[n]==_)&&(i=!0);return i},e.getVisualFromLogicalIdx=function(t,e){for(var i=0;i<e.logicalFromVisual.length;i++)if(e.logicalFromVisual[i]==t)return i;return 0}})),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],(function(t,e,i){"use strict";var n=t("./lib/bidiutil"),o=t("./lib/lang"),r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,s=function(t){this.session=t,this.bidiMap={},this.currentRow=null,this.bidiUtil=n,this.charWidths=[],this.EOL="¬",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="¶",this.RLE="‫",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=r.test(t.getValue())};(function(){this.isBidiRow=function(t,e,i){return!!this.seenBidi&&(t!==this.currentRow&&(this.currentRow=t,this.updateRowLine(e,i),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(t){this.seenBidi?this.currentRow=null:"insert"==t.action&&r.test(t.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var t=0,e=this.session.$screenRowCache;if(e.length){var i=this.session.$getRowCacheIndex(e,this.currentRow);i>=0&&(t=this.session.$docRowCache[i])}return t},this.getSplitIndex=function(){var t=0,e=this.session.$screenRowCache;if(e.length)for(var i,n=this.session.$getRowCacheIndex(e,this.currentRow);this.currentRow-t>0&&(i=this.session.$getRowCacheIndex(e,this.currentRow-t-1))===n;)n=i,t++;else t=this.currentRow;return t},this.updateRowLine=function(t,e){void 0===t&&(t=this.getDocumentRow());var i=t===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(t),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var r=this.session.$wrapData[t];r&&(void 0===e&&(e=this.getSplitIndex()),e>0&&r.length?(this.wrapIndent=r.indent,this.wrapOffset=this.wrapIndent*this.charWidths[n.L],this.line=e<r.length?this.line.substring(r[e-1],r[e]):this.line.substring(r[r.length-1])):this.line=this.line.substring(0,r[e])),e==r.length&&(this.line+=this.showInvisibles?i:n.DOT)}else this.line+=this.showInvisibles?i:n.DOT;var s,a=this.session,l=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,(function(t,e){return"\t"===t||a.isFullWidth(t.charCodeAt(0))?(s="\t"===t?a.getScreenTabSize(e+l):2,l+=s-1,o.stringRepeat(n.DOT,s)):t})),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==n.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var t=[];n.hasBidiCharacters(this.line,t)||this.isRtlDir?this.bidiMap=n.doBidiReorder(this.line,t,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(t){if(this.characterWidth!==t.$characterSize.width){this.fontMetrics=t;var e=this.characterWidth=t.$characterSize.width,i=t.$measureCharWidth("ה");this.charWidths[n.L]=this.charWidths[n.EN]=this.charWidths[n.ON_R]=e,this.charWidths[n.R]=this.charWidths[n.AN]=i,this.charWidths[n.R_H]=.45*i,this.charWidths[n.B]=this.charWidths[n.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(t){this.showInvisibles=t,this.currentRow=null},this.setEolChar=function(t){this.EOL=t},this.setContentWidth=function(t){this.contentWidth=t},this.isRtlLine=function(t){return!!this.$isRtl||(null!=t?this.session.getLine(t).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(t,e){for(var i=t.getCursorPosition(),n=t.selection.getSelectionAnchor().row;n<=i.row;n++)e||t.session.getLine(n).charAt(0)!==t.session.$bidiHandler.RLE?e&&t.session.getLine(n).charAt(0)!==t.session.$bidiHandler.RLE&&t.session.doc.insert({column:0,row:n},t.session.$bidiHandler.RLE):t.session.doc.removeInLine(n,0,1)},this.getPosLeft=function(t){t-=this.wrapIndent;var e=this.line.charAt(0)===this.RLE?1:0,i=t>e?this.session.getOverwrite()?t:t-1:e,o=n.getVisualFromLogicalIdx(i,this.bidiMap),r=this.bidiMap.bidiLevels,s=0;!this.session.getOverwrite()&&t<=e&&r[o]%2!=0&&o++;for(var a=0;a<o;a++)s+=this.charWidths[r[a]];return!this.session.getOverwrite()&&t>e&&r[o]%2==0&&(s+=this.charWidths[r[o]]),this.wrapIndent&&(s+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(s+=this.rtlLineOffset),s},this.getSelections=function(t,e){var i,n=this.bidiMap,o=n.bidiLevels,r=[],s=0,a=Math.min(t,e)-this.wrapIndent,l=Math.max(t,e)-this.wrapIndent,c=!1,h=!1,u=0;this.wrapIndent&&(s+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var d,p=0;p<o.length;p++)d=n.logicalFromVisual[p],i=o[p],(c=d>=a&&d<l)&&!h?u=s:!c&&h&&r.push({left:u,width:s-u}),s+=this.charWidths[i],h=c;if(c&&p===o.length&&r.push({left:u,width:s-u}),this.isRtlDir)for(var g=0;g<r.length;g++)r[g].left+=this.rtlLineOffset;return r},this.offsetToCol=function(t){this.isRtlDir&&(t-=this.rtlLineOffset);var e=0,i=(t=Math.max(t,0),0),n=0,o=this.bidiMap.bidiLevels,r=this.charWidths[o[n]];for(this.wrapIndent&&(t-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);t>i+r/2;){if(i+=r,n===o.length-1){r=0;break}r=this.charWidths[o[++n]]}return n>0&&o[n-1]%2!=0&&o[n]%2==0?(t<i&&n--,e=this.bidiMap.logicalFromVisual[n]):n>0&&o[n-1]%2==0&&o[n]%2!=0?e=1+(t>i?this.bidiMap.logicalFromVisual[n]:this.bidiMap.logicalFromVisual[n-1]):this.isRtlDir&&n===o.length-1&&0===r&&o[n-1]%2==0||!this.isRtlDir&&0===n&&o[n]%2!=0?e=1+this.bidiMap.logicalFromVisual[n]:(n>0&&o[n-1]%2!=0&&0!==r&&n--,e=this.bidiMap.logicalFromVisual[n]),0===e&&this.isRtlDir&&e++,e+this.wrapIndent}}).call(s.prototype),e.BidiHandler=s})),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],(function(t,e,i){"use strict";var n=t("./lib/oop"),o=t("./lib/lang"),r=t("./lib/event_emitter").EventEmitter,s=t("./range").Range,a=function(t){this.session=t,this.doc=t.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var e=this;this.cursor.on("change",(function(t){e.$cursorChanged=!0,e.$silent||e._emit("changeCursor"),!e.$isEmpty&&!e.$silent&&e._emit("changeSelection"),!e.$keepDesiredColumnOnChange&&t.old.column!=t.value.column&&(e.$desiredColumn=null)})),this.anchor.on("change",(function(){e.$anchorChanged=!0,!e.$isEmpty&&!e.$silent&&e._emit("changeSelection")}))};(function(){n.implement(this,r),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(t,e){this.$isEmpty=!1,this.anchor.setPosition(t,e)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var t=this.anchor,e=this.lead;return t.row>e.row||t.row==e.row&&t.column>e.column},this.getRange=function(){var t=this.anchor,e=this.lead;return this.$isEmpty?s.fromPoints(e,e):this.isBackwards()?s.fromPoints(e,t):s.fromPoints(t,e)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(t,e){var i=e?t.end:t.start,n=e?t.start:t.end;this.$setSelection(i.row,i.column,n.row,n.column)},this.$setSelection=function(t,e,i,n){if(!this.$silent){var o=this.$isEmpty,r=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(t,e),this.cursor.setPosition(i,n),this.$isEmpty=!s.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||o!=this.$isEmpty||r)&&this._emit("changeSelection")}},this.$moveSelection=function(t){var e=this.lead;this.$isEmpty&&this.setSelectionAnchor(e.row,e.column),t.call(this)},this.selectTo=function(t,e){this.$moveSelection((function(){this.moveCursorTo(t,e)}))},this.selectToPosition=function(t){this.$moveSelection((function(){this.moveCursorToPosition(t)}))},this.moveTo=function(t,e){this.clearSelection(),this.moveCursorTo(t,e)},this.moveToPosition=function(t){this.clearSelection(),this.moveCursorToPosition(t)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(t,e){if(void 0===e){var i=t||this.lead;t=i.row,e=i.column}return this.session.getWordRange(t,e)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var t=this.getCursor(),e=this.session.getAWordRange(t.row,t.column);this.setSelectionRange(e)},this.getLineRange=function(t,e){var i,n="number"==typeof t?t:this.lead.row,o=this.session.getFoldLine(n);return o?(n=o.start.row,i=o.end.row):i=n,!0===e?new s(n,0,i,this.session.getLine(i).length):new s(n,0,i+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(t,e,i){var n=t.column,o=t.column+e;return i<0&&(n=t.column-e,o=t.column),this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(n,o).split(" ").length-1==e},this.moveCursorLeft=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(0===e.column)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var i=this.session.getTabSize();this.wouldMoveIntoSoftTab(e,i,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-i):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var i=this.session.getTabSize();e=this.lead;this.wouldMoveIntoSoftTab(e,i,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,i):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var t=this.lead.row,e=this.lead.column,i=this.session.documentToScreenRow(t,e),n=this.session.screenToDocumentPosition(i,0),o=this.session.getDisplayLine(t,null,n.row,n.column).match(/^\s*/);o[0].length!=e&&!this.session.$useEmacsStyleLineStart&&(n.column+=o[0].length),this.moveCursorToPosition(n)},this.moveCursorLineEnd=function(){var t=this.lead,e=this.session.getDocumentLastRowColumnPosition(t.row,t.column);if(this.lead.column==e.column){var i=this.session.getLine(e.row);if(e.column==i.length){var n=i.search(/\s+$/);n>0&&(e.column=n)}}this.moveCursorTo(e.row,e.column)},this.moveCursorFileEnd=function(){var t=this.doc.getLength()-1,e=this.doc.getLine(t).length;this.moveCursorTo(t,e)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var t=this.lead.row,e=this.lead.column,i=this.doc.getLine(t),n=i.substring(e);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var o=this.session.getFoldAt(t,e,1);if(o)this.moveCursorTo(o.end.row,o.end.column);else{if(this.session.nonTokenRe.exec(n)&&(e+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,n=i.substring(e)),e>=i.length)return this.moveCursorTo(t,i.length),this.moveCursorRight(),void(t<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(n)&&(e+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,e)}},this.moveCursorLongWordLeft=function(){var t,e=this.lead.row,i=this.lead.column;if(t=this.session.getFoldAt(e,i,-1))this.moveCursorTo(t.start.row,t.start.column);else{var n=this.session.getFoldStringAt(e,i,-1);null==n&&(n=this.doc.getLine(e).substring(0,i));var r=o.stringReverse(n);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(r)&&(i-=this.session.nonTokenRe.lastIndex,r=r.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),i<=0)return this.moveCursorTo(e,0),this.moveCursorLeft(),void(e>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(r)&&(i-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,i)}},this.$shortWordEndIndex=function(t){var e,i=0,n=/\s/,o=this.session.tokenRe;if(o.lastIndex=0,this.session.tokenRe.exec(t))i=this.session.tokenRe.lastIndex;else{for(;(e=t[i])&&n.test(e);)i++;if(i<1)for(o.lastIndex=0;(e=t[i])&&!o.test(e);)if(o.lastIndex=0,i++,n.test(e)){if(i>2){i--;break}for(;(e=t[i])&&n.test(e);)i++;if(i>2)break}}return o.lastIndex=0,i},this.moveCursorShortWordRight=function(){var t=this.lead.row,e=this.lead.column,i=this.doc.getLine(t),n=i.substring(e),o=this.session.getFoldAt(t,e,1);if(o)return this.moveCursorTo(o.end.row,o.end.column);if(e==i.length){var r=this.doc.getLength();do{t++,n=this.doc.getLine(t)}while(t<r&&/^\s*$/.test(n));/^\s+/.test(n)||(n=""),e=0}var s=this.$shortWordEndIndex(n);this.moveCursorTo(t,e+s)},this.moveCursorShortWordLeft=function(){var t,e=this.lead.row,i=this.lead.column;if(t=this.session.getFoldAt(e,i,-1))return this.moveCursorTo(t.start.row,t.start.column);var n=this.session.getLine(e).substring(0,i);if(0===i){do{e--,n=this.doc.getLine(e)}while(e>0&&/^\s*$/.test(n));i=n.length,/\s+$/.test(n)||(n="")}var r=o.stringReverse(n),s=this.$shortWordEndIndex(r);return this.moveCursorTo(e,i-s)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(t,e){var i,n=this.session.documentToScreenPosition(this.lead.row,this.lead.column);if(0===e&&(0!==t&&(this.session.$bidiHandler.isBidiRow(n.row,this.lead.row)?(i=this.session.$bidiHandler.getPosLeft(n.column),n.column=Math.round(i/this.session.$bidiHandler.charWidths[0])):i=n.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column),0!=t&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var o=this.session.lineWidgets[this.lead.row];t<0?t-=o.rowsAbove||0:t>0&&(t+=o.rowCount-(o.rowsAbove||0))}var r=this.session.screenToDocumentPosition(n.row+t,n.column,i);0!==t&&0===e&&r.row===this.lead.row&&(r.column,this.lead.column),this.moveCursorTo(r.row,r.column+e,0===e)},this.moveCursorToPosition=function(t){this.moveCursorTo(t.row,t.column)},this.moveCursorTo=function(t,e,i){var n=this.session.getFoldAt(t,e,1);n&&(t=n.start.row,e=n.start.column),this.$keepDesiredColumnOnChange=!0;var o=this.session.getLine(t);/[\uDC00-\uDFFF]/.test(o.charAt(e))&&o.charAt(e-1)&&(this.lead.row==t&&this.lead.column==e+1?e-=1:e+=1),this.lead.setPosition(t,e),this.$keepDesiredColumnOnChange=!1,i||(this.$desiredColumn=null)},this.moveCursorToScreen=function(t,e,i){var n=this.session.screenToDocumentPosition(t,e);this.moveCursorTo(n.row,n.column,i)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(t){this.setSelectionRange(t,t.cursor==t.start),this.$desiredColumn=t.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(t){var e=this.getRange();return t?(t.start.column=e.start.column,t.start.row=e.start.row,t.end.column=e.end.column,t.end.row=e.end.row):t=e,t.cursor=this.isBackwards()?t.start:t.end,t.desiredColumn=this.$desiredColumn,t},this.getRangeOfMovements=function(t){var e=this.getCursor();try{t(this);var i=this.getCursor();return s.fromPoints(e,i)}catch(t){return s.fromPoints(e,e)}finally{this.moveCursorToPosition(e)}},this.toJSON=function(){if(this.rangeCount)var t=this.ranges.map((function(t){var e=t.clone();return e.isBackwards=t.cursor==t.start,e}));else(t=this.getRange()).isBackwards=this.isBackwards();return t},this.fromJSON=function(t){if(null==t.start){if(this.rangeList&&t.length>1){this.toSingleRange(t[0]);for(var e=t.length;e--;){var i=s.fromPoints(t[e].start,t[e].end);t[e].isBackwards&&(i.cursor=i.start),this.addRange(i,!0)}return}t=t[0]}this.rangeList&&this.toSingleRange(t),this.setSelectionRange(t,t.isBackwards)},this.isEqual=function(t){if((t.length||this.rangeCount)&&t.length!=this.rangeCount)return!1;if(!t.length||!this.ranges)return this.getRange().isEqual(t);for(var e=this.ranges.length;e--;)if(!this.ranges[e].isEqual(t[e]))return!1;return!0}}).call(a.prototype),e.Selection=a})),ace.define("ace/tokenizer",["require","exports","module","ace/config"],(function(t,e,i){"use strict";var n=t("./config"),o=2e3,r=function(t){for(var e in this.states=t,this.regExps={},this.matchMappings={},this.states){for(var i=this.states[e],n=[],o=0,r=this.matchMappings[e]={defaultToken:"text"},s="g",a=[],l=0;l<i.length;l++){var c=i[l];if(c.defaultToken&&(r.defaultToken=c.defaultToken),c.caseInsensitive&&(s="gi"),null!=c.regex){c.regex instanceof RegExp&&(c.regex=c.regex.toString().slice(1,-1));var h=c.regex,u=new RegExp("(?:("+h+")|(.))").exec("a").length-2;Array.isArray(c.token)?1==c.token.length||1==u?c.token=c.token[0]:u-1!=c.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:c,groupCount:u-1}),c.token=c.token[0]):(c.tokenArray=c.token,c.token=null,c.onMatch=this.$arrayTokens):"function"==typeof c.token&&!c.onMatch&&(c.onMatch=u>1?this.$applyToken:c.token),u>1&&(/\\\d/.test(c.regex)?h=c.regex.replace(/\\([0-9]+)/g,(function(t,e){return"\\"+(parseInt(e,10)+o+1)})):(u=1,h=this.removeCapturingGroups(c.regex)),!c.splitRegex&&"string"!=typeof c.token&&a.push(c)),r[o]=l,o+=u,n.push(h),c.onMatch||(c.onMatch=null)}}n.length||(r[0]=0,n.push("$")),a.forEach((function(t){t.splitRegex=this.createSplitterRegexp(t.regex,s)}),this),this.regExps[e]=new RegExp("("+n.join(")|(")+")|($)",s)}};(function(){this.$setMaxTokenCount=function(t){o=0|t},this.$applyToken=function(t){var e=this.splitRegex.exec(t).slice(1),i=this.token.apply(this,e);if("string"==typeof i)return[{type:i,value:t}];for(var n=[],o=0,r=i.length;o<r;o++)e[o]&&(n[n.length]={type:i[o],value:e[o]});return n},this.$arrayTokens=function(t){if(!t)return[];var e=this.splitRegex.exec(t);if(!e)return"text";for(var i=[],n=this.tokenArray,o=0,r=n.length;o<r;o++)e[o+1]&&(i[i.length]={type:n[o],value:e[o+1]});return i},this.removeCapturingGroups=function(t){return t.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,(function(t,e){return e?"(?:":t}))},this.createSplitterRegexp=function(t,e){if(-1!=t.indexOf("(?=")){var i=0,n=!1,o={};t.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,(function(t,e,r,s,a,l){return n?n="]"!=a:a?n=!0:s?(i==o.stack&&(o.end=l+1,o.stack=-1),i--):r&&(i++,1!=r.length&&(o.stack=i,o.start=l)),t})),null!=o.end&&/^\)*$/.test(t.substr(o.end))&&(t=t.substring(0,o.start)+t.substr(o.end))}return"^"!=t.charAt(0)&&(t="^"+t),"$"!=t.charAt(t.length-1)&&(t+="$"),new RegExp(t,(e||"").replace("g",""))},this.getLineTokens=function(t,e){if(e&&"string"!=typeof e){var i=e.slice(0);"#tmp"===(e=i[0])&&(i.shift(),e=i.shift())}else i=[];var n=e||"start",r=this.states[n];r||(n="start",r=this.states[n]);var s=this.matchMappings[n],a=this.regExps[n];a.lastIndex=0;for(var l,c=[],h=0,u=0,d={type:null,value:""};l=a.exec(t);){var p=s.defaultToken,g=null,f=l[0],m=a.lastIndex;if(m-f.length>h){var v=t.substring(h,m-f.length);d.type==p?d.value+=v:(d.type&&c.push(d),d={type:p,value:v})}for(var _=0;_<l.length-2;_++)if(void 0!==l[_+1]){p=(g=r[s[_]]).onMatch?g.onMatch(f,n,i,t):g.token,g.next&&(n="string"==typeof g.next?g.next:g.next(n,i),(r=this.states[n])||(this.reportError("state doesn't exist",n),n="start",r=this.states[n]),s=this.matchMappings[n],h=m,(a=this.regExps[n]).lastIndex=m),g.consumeLineEnd&&(h=m);break}if(f)if("string"==typeof p)g&&!1===g.merge||d.type!==p?(d.type&&c.push(d),d={type:p,value:f}):d.value+=f;else if(p){d.type&&c.push(d),d={type:null,value:""};for(_=0;_<p.length;_++)c.push(p[_])}if(h==t.length)break;if(h=m,u++>o){for(u>2*t.length&&this.reportError("infinite loop with in ace tokenizer",{startState:e,line:t});h<t.length;)d.type&&c.push(d),d={value:t.substring(h,h+=500),type:"overflow"};n="start",i=[];break}}return d.type&&c.push(d),i.length>1&&i[0]!==n&&i.unshift("#tmp",n),{tokens:c,state:i.length?i:n}},this.reportError=n.reportError}).call(r.prototype),e.Tokenizer=r})),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],(function(t,e,i){"use strict";var n=t("../lib/lang"),o=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(t,e){if(e)for(var i in t){for(var n=t[i],o=0;o<n.length;o++){var r=n[o];(r.next||r.onMatch)&&("string"==typeof r.next&&0!==r.next.indexOf(e)&&(r.next=e+r.next),r.nextState&&0!==r.nextState.indexOf(e)&&(r.nextState=e+r.nextState))}this.$rules[e+i]=n}else for(var i in t)this.$rules[i]=t[i]},this.getRules=function(){return this.$rules},this.embedRules=function(t,e,i,o,r){var s="function"==typeof t?(new t).getRules():t;if(o)for(var a=0;a<o.length;a++)o[a]=e+o[a];else for(var l in o=[],s)o.push(e+l);if(this.addRules(s,e),i){var c=Array.prototype[r?"push":"unshift"];for(a=0;a<o.length;a++)c.apply(this.$rules[o[a]],n.deepCopy(i))}this.$embeds||(this.$embeds=[]),this.$embeds.push(e)},this.getEmbeds=function(){return this.$embeds};var t=function(t,e){return("start"!=t||e.length)&&e.unshift(this.nextState,t),this.nextState},e=function(t,e){return e.shift(),e.shift()||"start"};this.normalizeRules=function(){var i=0,n=this.$rules;Object.keys(n).forEach((function o(r){var s=n[r];s.processed=!0;for(var a=0;a<s.length;a++){var l=s[a],c=null;Array.isArray(l)&&(c=l,l={}),!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var h=l.next||l.push;if(h&&Array.isArray(h)){var u=l.stateName;u||("string"!=typeof(u=l.token)&&(u=u[0]||""),n[u]&&(u+=i++)),n[u]=h,l.next=u,o(u)}else"pop"==h&&(l.next=e);if(l.push&&(l.nextState=l.next||l.push,l.next=t,delete l.push),l.rules)for(var d in l.rules)n[d]?n[d].push&&n[d].push.apply(n[d],l.rules[d]):n[d]=l.rules[d];var p="string"==typeof l?l:l.include;if(p&&(c=Array.isArray(p)?p.map((function(t){return n[t]})):n[p]),c){var g=[a,1].concat(c);l.noEscape&&(g=g.filter((function(t){return!t.next}))),s.splice.apply(s,g),a--}l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}),this)},this.createKeywordMapper=function(t,e,i,n){var o=Object.create(null);return Object.keys(t).forEach((function(e){var r=t[e];i&&(r=r.toLowerCase());for(var s=r.split(n||"|"),a=s.length;a--;)o[s[a]]=e})),Object.getPrototypeOf(o)&&(o.__proto__=null),this.$keywordList=Object.keys(o),t=null,i?function(t){return o[t.toLowerCase()]||e}:function(t){return o[t]||e}},this.getKeywords=function(){return this.$keywords}}).call(o.prototype),e.TextHighlightRules=o})),ace.define("ace/mode/behaviour",["require","exports","module"],(function(t,e,i){"use strict";var n=function(){this.$behaviours={}};(function(){this.add=function(t,e,i){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[t]:this.$behaviours[t]={}}this.$behaviours[t][e]=i},this.addBehaviours=function(t){for(var e in t)for(var i in t[e])this.add(e,i,t[e][i])},this.remove=function(t){this.$behaviours&&this.$behaviours[t]&&delete this.$behaviours[t]},this.inherit=function(t,e){if("function"==typeof t)var i=(new t).getBehaviours(e);else i=t.getBehaviours(e);this.addBehaviours(i)},this.getBehaviours=function(t){if(!t)return this.$behaviours;for(var e={},i=0;i<t.length;i++)this.$behaviours[t[i]]&&(e[t[i]]=this.$behaviours[t[i]]);return e}}).call(n.prototype),e.Behaviour=n})),ace.define("ace/token_iterator",["require","exports","module","ace/range"],(function(t,e,i){"use strict";var n=t("./range").Range,o=function(t,e,i){this.$session=t,this.$row=e,this.$rowTokens=t.getTokens(e);var n=t.getTokenAt(e,i);this.$tokenIndex=n?n.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var t;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,t||(t=this.$session.getLength()),this.$row>=t)return this.$row=t-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var t=this.$rowTokens,e=this.$tokenIndex,i=t[e].start;if(void 0!==i)return i;for(i=0;e>0;)i+=t[e-=1].value.length;return i},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var t=this.$rowTokens[this.$tokenIndex],e=this.getCurrentTokenColumn();return new n(this.$row,e,this.$row,e+t.value.length)}}).call(o.prototype),e.TokenIterator=o})),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],(function(t,e,i){"use strict";var n,o=t("../../lib/oop"),r=t("../behaviour").Behaviour,s=t("../../token_iterator").TokenIterator,a=t("../../lib/lang"),l=["text","paren.rparen","rparen","paren","punctuation.operator"],c=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],h={},u={'"':'"',"'":"'"},d=function(t){var e=-1;if(t.multiSelect&&(e=t.selection.index,h.rangeCount!=t.multiSelect.rangeCount&&(h={rangeCount:t.multiSelect.rangeCount})),h[e])return n=h[e];n=h[e]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},p=function(t,e,i,n){var o=t.end.row-t.start.row;return{text:i+e+n,selection:[0,t.start.column+1,o,t.end.column+(o?0:1)]}},g=function(t){this.add("braces","insertion",(function(e,i,o,r,s){var l=o.getCursorPosition(),c=r.doc.getLine(l.row);if("{"==s){d(o);var h=o.getSelectionRange(),u=r.doc.getTextRange(h);if(""!==u&&"{"!==u&&o.getWrapBehavioursEnabled())return p(h,u,"{","}");if(g.isSaneInsertion(o,r))return/[\]\}\)]/.test(c[l.column])||o.inMultiSelectMode||t&&t.braces?(g.recordAutoInsert(o,r,"}"),{text:"{}",selection:[1,1]}):(g.recordMaybeInsert(o,r,"{"),{text:"{",selection:[1,1]})}else if("}"==s){if(d(o),"}"==c.substring(l.column,l.column+1))if(null!==r.$findOpeningBracket("}",{column:l.column+1,row:l.row})&&g.isAutoInsertedClosing(l,c,s))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==s||"\r\n"==s){d(o);var f="";if(g.isMaybeInsertedClosing(l,c)&&(f=a.stringRepeat("}",n.maybeInsertedBrackets),g.clearMaybeInsertedClosing()),"}"===c.substring(l.column,l.column+1)){var m=r.findMatchingBracket({row:l.row,column:l.column+1},"}");if(!m)return null;var v=this.$getIndent(r.getLine(m.row))}else{if(!f)return void g.clearMaybeInsertedClosing();v=this.$getIndent(c)}var _=v+r.getTabString();return{text:"\n"+_+"\n"+v+f,selection:[1,_.length,1,_.length]}}g.clearMaybeInsertedClosing()}})),this.add("braces","deletion",(function(t,e,i,o,r){var s=o.doc.getTextRange(r);if(!r.isMultiLine()&&"{"==s){if(d(i),"}"==o.doc.getLine(r.start.row).substring(r.end.column,r.end.column+1))return r.end.column++,r;n.maybeInsertedBrackets--}})),this.add("parens","insertion",(function(t,e,i,n,o){if("("==o){d(i);var r=i.getSelectionRange(),s=n.doc.getTextRange(r);if(""!==s&&i.getWrapBehavioursEnabled())return p(r,s,"(",")");if(g.isSaneInsertion(i,n))return g.recordAutoInsert(i,n,")"),{text:"()",selection:[1,1]}}else if(")"==o){d(i);var a=i.getCursorPosition(),l=n.doc.getLine(a.row);if(")"==l.substring(a.column,a.column+1))if(null!==n.$findOpeningBracket(")",{column:a.column+1,row:a.row})&&g.isAutoInsertedClosing(a,l,o))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("parens","deletion",(function(t,e,i,n,o){var r=n.doc.getTextRange(o);if(!o.isMultiLine()&&"("==r&&(d(i),")"==n.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2)))return o.end.column++,o})),this.add("brackets","insertion",(function(t,e,i,n,o){if("["==o){d(i);var r=i.getSelectionRange(),s=n.doc.getTextRange(r);if(""!==s&&i.getWrapBehavioursEnabled())return p(r,s,"[","]");if(g.isSaneInsertion(i,n))return g.recordAutoInsert(i,n,"]"),{text:"[]",selection:[1,1]}}else if("]"==o){d(i);var a=i.getCursorPosition(),l=n.doc.getLine(a.row);if("]"==l.substring(a.column,a.column+1))if(null!==n.$findOpeningBracket("]",{column:a.column+1,row:a.row})&&g.isAutoInsertedClosing(a,l,o))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("brackets","deletion",(function(t,e,i,n,o){var r=n.doc.getTextRange(o);if(!o.isMultiLine()&&"["==r&&(d(i),"]"==n.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2)))return o.end.column++,o})),this.add("string_dquotes","insertion",(function(t,e,i,n,o){var r=n.$mode.$quotes||u;if(1==o.length&&r[o]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(o))return;d(i);var s=o,a=i.getSelectionRange(),l=n.doc.getTextRange(a);if(""!==l&&(1!=l.length||!r[l])&&i.getWrapBehavioursEnabled())return p(a,l,s,s);if(!l){var c=i.getCursorPosition(),h=n.doc.getLine(c.row),g=h.substring(c.column-1,c.column),f=h.substring(c.column,c.column+1),m=n.getTokenAt(c.row,c.column),v=n.getTokenAt(c.row,c.column+1);if("\\"==g&&m&&/escape/.test(m.type))return null;var _,y=m&&/string|escape/.test(m.type),b=!v||/string|escape/.test(v.type);if(f==s)(_=y!==b)&&/string\.end/.test(v.type)&&(_=!1);else{if(y&&!b)return null;if(y&&b)return null;var w=n.$mode.tokenRe;w.lastIndex=0;var k=w.test(g);w.lastIndex=0;var C=w.test(g);if(k||C)return null;if(f&&!/[\s;,.})\]\\]/.test(f))return null;var T=h[c.column-2];if(g==s&&(T==s||w.test(T)))return null;_=!0}return{text:_?s+s:"",selection:[1,1]}}}})),this.add("string_dquotes","deletion",(function(t,e,i,n,o){var r=n.$mode.$quotes||u,s=n.doc.getTextRange(o);if(!o.isMultiLine()&&r.hasOwnProperty(s)&&(d(i),n.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2)==s))return o.end.column++,o}))};g.isSaneInsertion=function(t,e){var i=t.getCursorPosition(),n=new s(e,i.row,i.column);if(!this.$matchTokenType(n.getCurrentToken()||"text",l)){if(/[)}\]]/.test(t.session.getLine(i.row)[i.column]))return!0;var o=new s(e,i.row,i.column+1);if(!this.$matchTokenType(o.getCurrentToken()||"text",l))return!1}return n.stepForward(),n.getCurrentTokenRow()!==i.row||this.$matchTokenType(n.getCurrentToken()||"text",c)},g.$matchTokenType=function(t,e){return e.indexOf(t.type||t)>-1},g.recordAutoInsert=function(t,e,i){var o=t.getCursorPosition(),r=e.doc.getLine(o.row);this.isAutoInsertedClosing(o,r,n.autoInsertedLineEnd[0])||(n.autoInsertedBrackets=0),n.autoInsertedRow=o.row,n.autoInsertedLineEnd=i+r.substr(o.column),n.autoInsertedBrackets++},g.recordMaybeInsert=function(t,e,i){var o=t.getCursorPosition(),r=e.doc.getLine(o.row);this.isMaybeInsertedClosing(o,r)||(n.maybeInsertedBrackets=0),n.maybeInsertedRow=o.row,n.maybeInsertedLineStart=r.substr(0,o.column)+i,n.maybeInsertedLineEnd=r.substr(o.column),n.maybeInsertedBrackets++},g.isAutoInsertedClosing=function(t,e,i){return n.autoInsertedBrackets>0&&t.row===n.autoInsertedRow&&i===n.autoInsertedLineEnd[0]&&e.substr(t.column)===n.autoInsertedLineEnd},g.isMaybeInsertedClosing=function(t,e){return n.maybeInsertedBrackets>0&&t.row===n.maybeInsertedRow&&e.substr(t.column)===n.maybeInsertedLineEnd&&e.substr(0,t.column)==n.maybeInsertedLineStart},g.popAutoInsertedClosing=function(){n.autoInsertedLineEnd=n.autoInsertedLineEnd.substr(1),n.autoInsertedBrackets--},g.clearMaybeInsertedClosing=function(){n&&(n.maybeInsertedBrackets=0,n.maybeInsertedRow=-1)},o.inherits(g,r),e.CstyleBehaviour=g})),ace.define("ace/unicode",["require","exports","module"],(function(t,e,i){"use strict";for(var n=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],o=0,r=[],s=0;s<n.length;s+=2)r.push(o+=n[s]),n[s+1]&&r.push(45,o+=n[s+1]);e.wordChars=String.fromCharCode.apply(null,r)})),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],(function(t,e,i){"use strict";var n=t("../config"),o=t("../tokenizer").Tokenizer,r=t("./text_highlight_rules").TextHighlightRules,s=t("./behaviour/cstyle").CstyleBehaviour,a=t("../unicode"),l=t("../lib/lang"),c=t("../token_iterator").TokenIterator,h=t("../range").Range,u=function(){this.HighlightRules=r};(function(){this.$defaultBehaviour=new s,this.tokenRe=new RegExp("^["+a.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+a.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new o(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(t,e,i,n){function o(t){for(var e=i;e<=n;e++)t(r.getLine(e),e)}var r=e.doc,s=!0,a=!0,c=1/0,h=e.getTabSize(),u=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))m=this.lineCommentStart.map(l.escapeRegExp).join("|"),g=this.lineCommentStart[0];else m=l.escapeRegExp(this.lineCommentStart),g=this.lineCommentStart;m=new RegExp("^(\\s*)(?:"+m+") ?"),u=e.getUseSoftTabs();y=function(t,e){var i=t.match(m);if(i){var n=i[1].length,o=i[0].length;!p(t,n,o)&&" "==i[0][o-1]&&o--,r.removeInLine(e,n,o)}};var d=g+" ",p=(_=function(t,e){s&&!/\S/.test(t)||(p(t,c,c)?r.insertInLine({row:e,column:c},d):r.insertInLine({row:e,column:c},g))},b=function(t,e){return m.test(t)},function(t,e,i){for(var n=0;e--&&" "==t.charAt(e);)n++;if(n%h!=0)return!1;for(n=0;" "==t.charAt(i++);)n++;return h>2?n%h!=h-1:n%h==0})}else{if(!this.blockComment)return!1;var g=this.blockComment.start,f=this.blockComment.end,m=new RegExp("^(\\s*)(?:"+l.escapeRegExp(g)+")"),v=new RegExp("(?:"+l.escapeRegExp(f)+")\\s*$"),_=function(t,e){b(t,e)||s&&!/\S/.test(t)||(r.insertInLine({row:e,column:t.length},f),r.insertInLine({row:e,column:c},g))},y=function(t,e){var i;(i=t.match(v))&&r.removeInLine(e,t.length-i[0].length,t.length),(i=t.match(m))&&r.removeInLine(e,i[1].length,i[0].length)},b=function(t,i){if(m.test(t))return!0;for(var n=e.getTokens(i),o=0;o<n.length;o++)if("comment"===n[o].type)return!0}}var w=1/0;o((function(t,e){var i=t.search(/\S/);-1!==i?(i<c&&(c=i),a&&!b(t,e)&&(a=!1)):w>t.length&&(w=t.length)})),c==1/0&&(c=w,s=!1,a=!1),u&&c%h!=0&&(c=Math.floor(c/h)*h),o(a?y:_)},this.toggleBlockComment=function(t,e,i,n){var o=this.blockComment;if(o){!o.start&&o[0]&&(o=o[0]);var r,s,a=(f=new c(e,n.row,n.column)).getCurrentToken(),l=(e.selection,e.selection.toOrientedRange());if(a&&/comment/.test(a.type)){for(var u,d;a&&/comment/.test(a.type);){if(-1!=(m=a.value.indexOf(o.start))){var p=f.getCurrentTokenRow(),g=f.getCurrentTokenColumn()+m;u=new h(p,g,p,g+o.start.length);break}a=f.stepBackward()}var f;for(a=(f=new c(e,n.row,n.column)).getCurrentToken();a&&/comment/.test(a.type);){var m;if(-1!=(m=a.value.indexOf(o.end))){p=f.getCurrentTokenRow(),g=f.getCurrentTokenColumn()+m;d=new h(p,g,p,g+o.end.length);break}a=f.stepForward()}d&&e.remove(d),u&&(e.remove(u),r=u.start.row,s=-o.start.length)}else s=o.start.length,r=i.start.row,e.insert(i.end,o.end),e.insert(i.start,o.start);l.start.row==r&&(l.start.column+=s),l.end.row==r&&(l.end.column+=s),e.selection.fromOrientedRange(l)}},this.getNextLineIndent=function(t,e,i){return this.$getIndent(e)},this.checkOutdent=function(t,e,i){return!1},this.autoOutdent=function(t,e,i){},this.$getIndent=function(t){return t.match(/^\s*/)[0]},this.createWorker=function(t){return null},this.createModeDelegates=function(t){for(var e in this.$embeds=[],this.$modes={},t)if(t[e]){var i=t[e],o=i.prototype.$id,r=n.$modes[o];r||(n.$modes[o]=r=new i),n.$modes[e]||(n.$modes[e]=r),this.$embeds.push(e),this.$modes[e]=r}var s=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(e=0;e<s.length;e++)!function(t){var i=s[e],n=t[i];t[s[e]]=function(){return this.$delegator(i,arguments,n)}}(this)},this.$delegator=function(t,e,i){var n=e[0]||"start";if("string"!=typeof n){if(Array.isArray(n[2])){var o=n[2][n[2].length-1];if(s=this.$modes[o])return s[t].apply(s,[n[1]].concat([].slice.call(e,1)))}n=n[0]||"start"}for(var r=0;r<this.$embeds.length;r++)if(this.$modes[this.$embeds[r]]){var s,a=n.split(this.$embeds[r]);if(!a[0]&&a[1])return e[0]=a[1],(s=this.$modes[this.$embeds[r]])[t].apply(s,e)}var l=i.apply(this,e);return i?l:void 0},this.transformAction=function(t,e,i,n,o){if(this.$behaviour){var r=this.$behaviour.getBehaviours();for(var s in r)if(r[s][e]){var a=r[s][e].apply(this,arguments);if(a)return a}}},this.getKeywords=function(t){if(!this.completionKeywords){var e=this.$tokenizer.rules,i=[];for(var n in e)for(var o=e[n],r=0,s=o.length;r<s;r++)if("string"==typeof o[r].token)/keyword|support|storage/.test(o[r].token)&&i.push(o[r].regex);else if("object"==typeof o[r].token)for(var a=0,l=o[r].token.length;a<l;a++)if(/keyword|support|storage/.test(o[r].token[a])){n=o[r].regex.match(/\(.+?\)/g)[a];i.push(n.substr(1,n.length-2))}this.completionKeywords=i}return t?i.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(t,e,i,n){return(this.$keywordList||this.$createKeywordList()).map((function(t){return{name:t,value:t,score:0,meta:"keyword"}}))},this.$id="ace/mode/text"}).call(u.prototype),e.Mode=u})),ace.define("ace/apply_delta",["require","exports","module"],(function(t,e,i){"use strict";e.applyDelta=function(t,e,i){var n=e.start.row,o=e.start.column,r=t[n]||"";switch(e.action){case"insert":if(1===e.lines.length)t[n]=r.substring(0,o)+e.lines[0]+r.substring(o);else{var s=[n,1].concat(e.lines);t.splice.apply(t,s),t[n]=r.substring(0,o)+t[n],t[n+e.lines.length-1]+=r.substring(o)}break;case"remove":var a=e.end.column,l=e.end.row;n===l?t[n]=r.substring(0,o)+r.substring(a):t.splice(n,l-n+1,r.substring(0,o)+t[l].substring(a))}}})),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,i){"use strict";var n=t("./lib/oop"),o=t("./lib/event_emitter").EventEmitter,r=e.Anchor=function(t,e,i){this.$onChange=this.onChange.bind(this),this.attach(t),void 0===i?this.setPosition(e.row,e.column):this.setPosition(e,i)};(function(){function t(t,e,i){var n=i?t.column<=e.column:t.column<e.column;return t.row<e.row||t.row==e.row&&n}function e(e,i,n){var o="insert"==e.action,r=(o?1:-1)*(e.end.row-e.start.row),s=(o?1:-1)*(e.end.column-e.start.column),a=e.start,l=o?a:e.end;return t(i,a,n)?{row:i.row,column:i.column}:t(l,i,!n)?{row:i.row+r,column:i.column+(i.row==l.row?s:0)}:{row:a.row,column:a.column}}n.implement(this,o),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(t){if(!(t.start.row==t.end.row&&t.start.row!=this.row||t.start.row>this.row)){var i=e(t,{row:this.row,column:this.column},this.$insertRight);this.setPosition(i.row,i.column,!0)}},this.setPosition=function(t,e,i){var n;if(n=i?{row:t,column:e}:this.$clipPositionToDocument(t,e),this.row!=n.row||this.column!=n.column){var o={row:this.row,column:this.column};this.row=n.row,this.column=n.column,this._signal("change",{old:o,value:n})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(t){this.document=t||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(t,e){var i={};return t>=this.document.getLength()?(i.row=Math.max(0,this.document.getLength()-1),i.column=this.document.getLine(i.row).length):t<0?(i.row=0,i.column=0):(i.row=t,i.column=Math.min(this.document.getLine(i.row).length,Math.max(0,e))),e<0&&(i.column=0),i}}).call(r.prototype)})),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],(function(t,e,i){"use strict";var n=t("./lib/oop"),o=t("./apply_delta").applyDelta,r=t("./lib/event_emitter").EventEmitter,s=t("./range").Range,a=t("./anchor").Anchor,l=function(t){this.$lines=[""],0===t.length?this.$lines=[""]:Array.isArray(t)?this.insertMergedLines({row:0,column:0},t):this.insert({row:0,column:0},t)};(function(){n.implement(this,r),this.setValue=function(t){var e=this.getLength()-1;this.remove(new s(0,0,e,this.getLine(e).length)),this.insert({row:0,column:0},t)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(t,e){return new a(this,t,e)},0==="aaa".split(/a/).length?this.$split=function(t){return t.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(t){return t.split(/\r\n|\r|\n/)},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=e?e[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(t){this.$newLineMode!==t&&(this.$newLineMode=t,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(t){return"\r\n"==t||"\r"==t||"\n"==t},this.getLine=function(t){return this.$lines[t]||""},this.getLines=function(t,e){return this.$lines.slice(t,e+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(t){return this.getLinesForRange(t).join(this.getNewLineCharacter())},this.getLinesForRange=function(t){var e;if(t.start.row===t.end.row)e=[this.getLine(t.start.row).substring(t.start.column,t.end.column)];else{(e=this.getLines(t.start.row,t.end.row))[0]=(e[0]||"").substring(t.start.column);var i=e.length-1;t.end.row-t.start.row==i&&(e[i]=e[i].substring(0,t.end.column))}return e},this.insertLines=function(t,e){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(t,e)},this.removeLines=function(t,e){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(t,e)},this.insertNewLine=function(t){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(t,["",""])},this.insert=function(t,e){return this.getLength()<=1&&this.$detectNewLine(e),this.insertMergedLines(t,this.$split(e))},this.insertInLine=function(t,e){var i=this.clippedPos(t.row,t.column),n=this.pos(t.row,t.column+e.length);return this.applyDelta({start:i,end:n,action:"insert",lines:[e]},!0),this.clonePos(n)},this.clippedPos=function(t,e){var i=this.getLength();void 0===t?t=i:t<0?t=0:t>=i&&(t=i-1,e=void 0);var n=this.getLine(t);return null==e&&(e=n.length),{row:t,column:e=Math.min(Math.max(e,0),n.length)}},this.clonePos=function(t){return{row:t.row,column:t.column}},this.pos=function(t,e){return{row:t,column:e}},this.$clipPosition=function(t){var e=this.getLength();return t.row>=e?(t.row=Math.max(0,e-1),t.column=this.getLine(e-1).length):(t.row=Math.max(0,t.row),t.column=Math.min(Math.max(t.column,0),this.getLine(t.row).length)),t},this.insertFullLines=function(t,e){var i=0;(t=Math.min(Math.max(t,0),this.getLength()))<this.getLength()?(e=e.concat([""]),i=0):(e=[""].concat(e),t--,i=this.$lines[t].length),this.insertMergedLines({row:t,column:i},e)},this.insertMergedLines=function(t,e){var i=this.clippedPos(t.row,t.column),n={row:i.row+e.length-1,column:(1==e.length?i.column:0)+e[e.length-1].length};return this.applyDelta({start:i,end:n,action:"insert",lines:e}),this.clonePos(n)},this.remove=function(t){var e=this.clippedPos(t.start.row,t.start.column),i=this.clippedPos(t.end.row,t.end.column);return this.applyDelta({start:e,end:i,action:"remove",lines:this.getLinesForRange({start:e,end:i})}),this.clonePos(e)},this.removeInLine=function(t,e,i){var n=this.clippedPos(t,e),o=this.clippedPos(t,i);return this.applyDelta({start:n,end:o,action:"remove",lines:this.getLinesForRange({start:n,end:o})},!0),this.clonePos(n)},this.removeFullLines=function(t,e){t=Math.min(Math.max(0,t),this.getLength()-1);var i=(e=Math.min(Math.max(0,e),this.getLength()-1))==this.getLength()-1&&t>0,n=e<this.getLength()-1,o=i?t-1:t,r=i?this.getLine(o).length:0,a=n?e+1:e,l=n?0:this.getLine(a).length,c=new s(o,r,a,l),h=this.$lines.slice(t,e+1);return this.applyDelta({start:c.start,end:c.end,action:"remove",lines:this.getLinesForRange(c)}),h},this.removeNewLine=function(t){t<this.getLength()-1&&t>=0&&this.applyDelta({start:this.pos(t,this.getLine(t).length),end:this.pos(t+1,0),action:"remove",lines:["",""]})},this.replace=function(t,e){return t instanceof s||(t=s.fromPoints(t.start,t.end)),0===e.length&&t.isEmpty()?t.start:e==this.getTextRange(t)?t.end:(this.remove(t),e?this.insert(t.start,e):t.start)},this.applyDeltas=function(t){for(var e=0;e<t.length;e++)this.applyDelta(t[e])},this.revertDeltas=function(t){for(var e=t.length-1;e>=0;e--)this.revertDelta(t[e])},this.applyDelta=function(t,e){var i="insert"==t.action;(i?t.lines.length<=1&&!t.lines[0]:!s.comparePoints(t.start,t.end))||(i&&t.lines.length>2e4?this.$splitAndapplyLargeDelta(t,2e4):(o(this.$lines,t,e),this._signal("change",t)))},this.$splitAndapplyLargeDelta=function(t,e){for(var i=t.lines,n=i.length-e+1,o=t.start.row,r=t.start.column,s=0,a=0;s<n;s=a){a+=e-1;var l=i.slice(s,a);l.push(""),this.applyDelta({start:this.pos(o+s,r),end:this.pos(o+a,r=0),action:t.action,lines:l},!0)}t.lines=i.slice(s),t.start.row=o+s,t.start.column=r,this.applyDelta(t,!0)},this.revertDelta=function(t){this.applyDelta({start:this.clonePos(t.start),end:this.clonePos(t.end),action:"insert"==t.action?"remove":"insert",lines:t.lines.slice()})},this.indexToPosition=function(t,e){for(var i=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,o=e||0,r=i.length;o<r;o++)if((t-=i[o].length+n)<0)return{row:o,column:t+i[o].length+n};return{row:r-1,column:t+i[r-1].length+n}},this.positionToIndex=function(t,e){for(var i=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,o=0,r=Math.min(t.row,i.length),s=e||0;s<r;++s)o+=i[s].length+n;return o+t.column}}).call(l.prototype),e.Document=l})),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,i){"use strict";var n=t("./lib/oop"),o=t("./lib/event_emitter").EventEmitter,r=function(t,e){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=t;var i=this;this.$worker=function(){if(i.running){for(var t=new Date,e=i.currentLine,n=-1,o=i.doc,r=e;i.lines[e];)e++;var s=o.getLength(),a=0;for(i.running=!1;e<s;){i.$tokenizeRow(e),n=e;do{e++}while(i.lines[e]);if(++a%5==0&&new Date-t>20){i.running=setTimeout(i.$worker,20);break}}i.currentLine=e,-1==n&&(n=e),r<=n&&i.fireUpdateEvent(r,n)}}};(function(){n.implement(this,o),this.setTokenizer=function(t){this.tokenizer=t,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(t){this.doc=t,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(t,e){var i={first:t,last:e};this._signal("update",{data:i})},this.start=function(t){this.currentLine=Math.min(t||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(t){var e=t.start.row,i=t.end.row-e;if(0===i)this.lines[e]=null;else if("remove"==t.action)this.lines.splice(e,i+1,null),this.states.splice(e,i+1,null);else{var n=Array(i+1);n.unshift(e,1),this.lines.splice.apply(this.lines,n),this.states.splice.apply(this.states,n)}this.currentLine=Math.min(e,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(t){return this.lines[t]||this.$tokenizeRow(t)},this.getState=function(t){return this.currentLine==t&&this.$tokenizeRow(t),this.states[t]||"start"},this.$tokenizeRow=function(t){var e=this.doc.getLine(t),i=this.states[t-1],n=this.tokenizer.getLineTokens(e,i,t);return this.states[t]+""!=n.state+""?(this.states[t]=n.state,this.lines[t+1]=null,this.currentLine>t+1&&(this.currentLine=t+1)):this.currentLine==t&&(this.currentLine=t+1),this.lines[t]=n.tokens}}).call(r.prototype),e.BackgroundTokenizer=r})),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(t,e,i){"use strict";var n=t("./lib/lang"),o=(t("./lib/oop"),t("./range").Range),r=function(t,e,i){this.setRegexp(t),this.clazz=e,this.type=i||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(t){this.regExp+""!=t+""&&(this.regExp=t,this.cache=[])},this.update=function(t,e,i,r){if(this.regExp)for(var s=r.firstRow,a=r.lastRow,l=s;l<=a;l++){var c=this.cache[l];null==c&&((c=n.getMatchOffsets(i.getLine(l),this.regExp)).length>this.MAX_RANGES&&(c=c.slice(0,this.MAX_RANGES)),c=c.map((function(t){return new o(l,t.offset,l,t.offset+t.length)})),this.cache[l]=c.length?c:"");for(var h=c.length;h--;)e.drawSingleLineMarker(t,c[h].toScreenRange(i),this.clazz,r)}}}).call(r.prototype),e.SearchHighlight=r})),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],(function(t,e,i){"use strict";function n(t,e){this.foldData=t,Array.isArray(e)?this.folds=e:e=this.folds=[e];var i=e[e.length-1];this.range=new o(e[0].start.row,e[0].start.column,i.end.row,i.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach((function(t){t.setFoldLine(this)}),this)}var o=t("../range").Range;(function(){this.shiftRow=function(t){this.start.row+=t,this.end.row+=t,this.folds.forEach((function(e){e.start.row+=t,e.end.row+=t}))},this.addFold=function(t){if(t.sameRow){if(t.start.row<this.startRow||t.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(t),this.folds.sort((function(t,e){return-t.range.compareEnd(e.start.row,e.start.column)})),this.range.compareEnd(t.start.row,t.start.column)>0?(this.end.row=t.end.row,this.end.column=t.end.column):this.range.compareStart(t.end.row,t.end.column)<0&&(this.start.row=t.start.row,this.start.column=t.start.column)}else if(t.start.row==this.end.row)this.folds.push(t),this.end.row=t.end.row,this.end.column=t.end.column;else{if(t.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(t),this.start.row=t.start.row,this.start.column=t.start.column}t.foldLine=this},this.containsRow=function(t){return t>=this.start.row&&t<=this.end.row},this.walk=function(t,e,i){var n,o,r=0,s=this.folds,a=!0;null==e&&(e=this.end.row,i=this.end.column);for(var l=0;l<s.length;l++){if(-1==(o=(n=s[l]).range.compareStart(e,i)))return void t(null,e,i,r,a);if(!t(null,n.start.row,n.start.column,r,a)&&t(n.placeholder,n.start.row,n.start.column,r)||0===o)return;a=!n.sameRow,r=n.end.column}t(null,e,i,r,a)},this.getNextFoldTo=function(t,e){for(var i,n,o=0;o<this.folds.length;o++){if(-1==(n=(i=this.folds[o]).range.compareEnd(t,e)))return{fold:i,kind:"after"};if(0===n)return{fold:i,kind:"inside"}}return null},this.addRemoveChars=function(t,e,i){var n,o,r=this.getNextFoldTo(t,e);if(r)if(n=r.fold,"inside"==r.kind&&n.start.column!=e&&n.start.row!=t)window.console&&window.console.log(t,e,n);else if(n.start.row==t){var s=(o=this.folds).indexOf(n);for(0===s&&(this.start.column+=i);s<o.length;s++){if((n=o[s]).start.column+=i,!n.sameRow)return;n.end.column+=i}this.end.column+=i}},this.split=function(t,e){var i=this.getNextFoldTo(t,e);if(!i||"inside"==i.kind)return null;var o=i.fold,r=this.folds,s=this.foldData,a=r.indexOf(o),l=r[a-1];this.end.row=l.end.row,this.end.column=l.end.column;var c=new n(s,r=r.splice(a,r.length-a));return s.splice(s.indexOf(this)+1,0,c),c},this.merge=function(t){for(var e=t.folds,i=0;i<e.length;i++)this.addFold(e[i]);var n=this.foldData;n.splice(n.indexOf(t),1)},this.toString=function(){var t=[this.range.toString()+": ["];return this.folds.forEach((function(e){t.push("  "+e.toString())})),t.push("]"),t.join("\n")},this.idxToPosition=function(t){for(var e=0,i=0;i<this.folds.length;i++){var n=this.folds[i];if((t-=n.start.column-e)<0)return{row:n.start.row,column:n.start.column+t};if((t-=n.placeholder.length)<0)return n.start;e=n.end.column}return{row:this.end.row,column:this.end.column+t}}}).call(n.prototype),e.FoldLine=n})),ace.define("ace/range_list",["require","exports","module","ace/range"],(function(t,e,i){"use strict";var n=t("./range").Range.comparePoints,o=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=n,this.pointIndex=function(t,e,i){for(var o=this.ranges,r=i||0;r<o.length;r++){var s=o[r],a=n(t,s.end);if(!(a>0)){var l=n(t,s.start);return 0===a?e&&0!==l?-r-2:r:l>0||0===l&&!e?r:-r-1}}return-r-1},this.add=function(t){var e=!t.isEmpty(),i=this.pointIndex(t.start,e);i<0&&(i=-i-1);var n=this.pointIndex(t.end,e,i);return n<0?n=-n-1:n++,this.ranges.splice(i,n-i,t)},this.addList=function(t){for(var e=[],i=t.length;i--;)e.push.apply(e,this.add(t[i]));return e},this.substractPoint=function(t){var e=this.pointIndex(t);if(e>=0)return this.ranges.splice(e,1)},this.merge=function(){for(var t,e=[],i=this.ranges,o=(i=i.sort((function(t,e){return n(t.start,e.start)})))[0],r=1;r<i.length;r++){t=o,o=i[r];var s=n(t.end,o.start);s<0||(0!=s||t.isEmpty()||o.isEmpty())&&(n(t.end,o.end)<0&&(t.end.row=o.end.row,t.end.column=o.end.column),i.splice(r,1),e.push(o),o=t,r--)}return this.ranges=i,e},this.contains=function(t,e){return this.pointIndex({row:t,column:e})>=0},this.containsPoint=function(t){return this.pointIndex(t)>=0},this.rangeAtPoint=function(t){var e=this.pointIndex(t);if(e>=0)return this.ranges[e]},this.clipRows=function(t,e){var i=this.ranges;if(i[0].start.row>e||i[i.length-1].start.row<t)return[];var n=this.pointIndex({row:t,column:0});n<0&&(n=-n-1);var o=this.pointIndex({row:e,column:0},n);o<0&&(o=-o-1);for(var r=[],s=n;s<o;s++)r.push(i[s]);return r},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(t){this.session&&this.detach(),this.session=t,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(t){for(var e=t.start,i=t.end,n=e.row,o=i.row,r=this.ranges,s=0,a=r.length;s<a;s++){if((h=r[s]).end.row>=n)break}if("insert"==t.action)for(var l=o-n,c=-e.column+i.column;s<a;s++){if((h=r[s]).start.row>n)break;if(h.start.row==n&&h.start.column>=e.column&&(h.start.column==e.column&&this.$bias<=0||(h.start.column+=c,h.start.row+=l)),h.end.row==n&&h.end.column>=e.column){if(h.end.column==e.column&&this.$bias<0)continue;h.end.column==e.column&&c>0&&s<a-1&&h.end.column>h.start.column&&h.end.column==r[s+1].start.column&&(h.end.column-=c),h.end.column+=c,h.end.row+=l}}else for(l=n-o,c=e.column-i.column;s<a;s++){if((h=r[s]).start.row>o)break;h.end.row<o&&(n<h.end.row||n==h.end.row&&e.column<h.end.column)?(h.end.row=n,h.end.column=e.column):h.end.row==o?h.end.column<=i.column?(l||h.end.column>e.column)&&(h.end.column=e.column,h.end.row=e.row):(h.end.column+=c,h.end.row+=l):h.end.row>o&&(h.end.row+=l),h.start.row<o&&(n<h.start.row||n==h.start.row&&e.column<h.start.column)?(h.start.row=n,h.start.column=e.column):h.start.row==o?h.start.column<=i.column?(l||h.start.column>e.column)&&(h.start.column=e.column,h.start.row=e.row):(h.start.column+=c,h.start.row+=l):h.start.row>o&&(h.start.row+=l)}if(0!=l&&s<a)for(;s<a;s++){var h;(h=r[s]).start.row+=l,h.end.row+=l}}}).call(o.prototype),e.RangeList=o})),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],(function(t,e,i){"use strict";function n(t,e){t.row-=e.row,0==t.row&&(t.column-=e.column)}function o(t,e){n(t.start,e),n(t.end,e)}function r(t,e){0==t.row&&(t.column+=e.column),t.row+=e.row}var s=t("../range_list").RangeList,a=t("../lib/oop"),l=e.Fold=function(t,e){this.foldLine=null,this.placeholder=e,this.range=t,this.start=t.start,this.end=t.end,this.sameRow=t.start.row==t.end.row,this.subFolds=this.ranges=[]};a.inherits(l,s),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(t){this.foldLine=t,this.subFolds.forEach((function(e){e.setFoldLine(t)}))},this.clone=function(){var t=this.range.clone(),e=new l(t,this.placeholder);return this.subFolds.forEach((function(t){e.subFolds.push(t.clone())})),e.collapseChildren=this.collapseChildren,e},this.addSubFold=function(t){if(!this.range.isEqual(t)){o(t,this.start);for(var e=t.start.row,i=t.start.column,n=0,r=-1;n<this.subFolds.length&&1==(r=this.subFolds[n].range.compare(e,i));n++);var s=this.subFolds[n],a=0;if(0==r){if(s.range.containsRange(t))return s.addSubFold(t);a=1}e=t.range.end.row,i=t.range.end.column;var l=n;for(r=-1;l<this.subFolds.length&&1==(r=this.subFolds[l].range.compare(e,i));l++);0==r&&l++;for(var c=this.subFolds.splice(n,l-n,t),h=0==r?c.length-1:c.length,u=a;u<h;u++)t.addSubFold(c[u]);return t.setFoldLine(this.foldLine),t}},this.restoreRange=function(t){return function(t,e){r(t.start,e),r(t.end,e)}(t,this.start)}}.call(l.prototype)})),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],(function(t,e,i){"use strict";var n=t("../range").Range,o=t("./fold_line").FoldLine,r=t("./fold").Fold,s=t("../token_iterator").TokenIterator;e.Folding=function(){this.getFoldAt=function(t,e,i){var n=this.getFoldLine(t);if(!n)return null;for(var o=n.folds,r=0;r<o.length;r++){var s=o[r].range;if(s.contains(t,e)){if(1==i&&s.isEnd(t,e)&&!s.isEmpty())continue;if(-1==i&&s.isStart(t,e)&&!s.isEmpty())continue;return o[r]}}},this.getFoldsInRange=function(t){var e=t.start,i=t.end,n=this.$foldData,o=[];e.column+=1,i.column-=1;for(var r=0;r<n.length;r++){var s=n[r].range.compareRange(t);if(2!=s){if(-2==s)break;for(var a=n[r].folds,l=0;l<a.length;l++){var c=a[l];if(-2==(s=c.range.compareRange(t)))break;if(2!=s){if(42==s)break;o.push(c)}}}}return e.column-=1,i.column+=1,o},this.getFoldsInRangeList=function(t){if(Array.isArray(t)){var e=[];t.forEach((function(t){e=e.concat(this.getFoldsInRange(t))}),this)}else e=this.getFoldsInRange(t);return e},this.getAllFolds=function(){for(var t=[],e=this.$foldData,i=0;i<e.length;i++)for(var n=0;n<e[i].folds.length;n++)t.push(e[i].folds[n]);return t},this.getFoldStringAt=function(t,e,i,n){if(!(n=n||this.getFoldLine(t)))return null;for(var o,r,s={end:{column:0}},a=0;a<n.folds.length;a++){var l=(r=n.folds[a]).range.compareEnd(t,e);if(-1==l){o=this.getLine(r.start.row).substring(s.end.column,r.start.column);break}if(0===l)return null;s=r}return o||(o=this.getLine(r.start.row).substring(s.end.column)),-1==i?o.substring(0,e-s.end.column):1==i?o.substring(e-s.end.column):o},this.getFoldLine=function(t,e){var i=this.$foldData,n=0;for(e&&(n=i.indexOf(e)),-1==n&&(n=0);n<i.length;n++){var o=i[n];if(o.start.row<=t&&o.end.row>=t)return o;if(o.end.row>t)return null}return null},this.getNextFoldLine=function(t,e){var i=this.$foldData,n=0;for(e&&(n=i.indexOf(e)),-1==n&&(n=0);n<i.length;n++){var o=i[n];if(o.end.row>=t)return o}return null},this.getFoldedRowCount=function(t,e){for(var i=this.$foldData,n=e-t+1,o=0;o<i.length;o++){var r=i[o],s=r.end.row,a=r.start.row;if(s>=e){a<e&&(a>=t?n-=e-a:n=0);break}s>=t&&(n-=a>=t?s-a:s-t+1)}return n},this.$addFoldLine=function(t){return this.$foldData.push(t),this.$foldData.sort((function(t,e){return t.start.row-e.start.row})),t},this.addFold=function(t,e){var i,n=this.$foldData,s=!1;t instanceof r?i=t:(i=new r(e,t)).collapseChildren=e.collapseChildren,this.$clipRangeToDocument(i.range);var a=i.start.row,l=i.start.column,c=i.end.row,h=i.end.column,u=this.getFoldAt(a,l,1),d=this.getFoldAt(c,h,-1);if(u&&d==u)return u.addSubFold(i);u&&!u.range.isStart(a,l)&&this.removeFold(u),d&&!d.range.isEnd(c,h)&&this.removeFold(d);var p=this.getFoldsInRange(i.range);p.length>0&&(this.removeFolds(p),p.forEach((function(t){i.addSubFold(t)})));for(var g=0;g<n.length;g++){var f=n[g];if(c==f.start.row){f.addFold(i),s=!0;break}if(a==f.end.row){if(f.addFold(i),s=!0,!i.sameRow){var m=n[g+1];if(m&&m.start.row==c){f.merge(m);break}}break}if(c<=f.start.row)break}return s||(f=this.$addFoldLine(new o(this.$foldData,i))),this.$useWrapMode?this.$updateWrapData(f.start.row,f.start.row):this.$updateRowLengthCache(f.start.row,f.start.row),this.$modified=!0,this._signal("changeFold",{data:i,action:"add"}),i},this.addFolds=function(t){t.forEach((function(t){this.addFold(t)}),this)},this.removeFold=function(t){var e=t.foldLine,i=e.start.row,n=e.end.row,o=this.$foldData,r=e.folds;if(1==r.length)o.splice(o.indexOf(e),1);else if(e.range.isEnd(t.end.row,t.end.column))r.pop(),e.end.row=r[r.length-1].end.row,e.end.column=r[r.length-1].end.column;else if(e.range.isStart(t.start.row,t.start.column))r.shift(),e.start.row=r[0].start.row,e.start.column=r[0].start.column;else if(t.sameRow)r.splice(r.indexOf(t),1);else{var s=e.split(t.start.row,t.start.column);(r=s.folds).shift(),s.start.row=r[0].start.row,s.start.column=r[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(i,n):this.$updateRowLengthCache(i,n)),this.$modified=!0,this._signal("changeFold",{data:t,action:"remove"})},this.removeFolds=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);e.forEach((function(t){this.removeFold(t)}),this),this.$modified=!0},this.expandFold=function(t){this.removeFold(t),t.subFolds.forEach((function(e){t.restoreRange(e),this.addFold(e)}),this),t.collapseChildren>0&&this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1),t.subFolds=[]},this.expandFolds=function(t){t.forEach((function(t){this.expandFold(t)}),this)},this.unfold=function(t,e){var i,o;if(null==t?(i=new n(0,0,this.getLength(),0),e=!0):i="number"==typeof t?new n(t,0,t,this.getLine(t).length):"row"in t?n.fromPoints(t,t):t,o=this.getFoldsInRangeList(i),e)this.removeFolds(o);else for(var r=o;r.length;)this.expandFolds(r),r=this.getFoldsInRangeList(i);if(o.length)return o},this.isRowFolded=function(t,e){return!!this.getFoldLine(t,e)},this.getRowFoldEnd=function(t,e){var i=this.getFoldLine(t,e);return i?i.end.row:t},this.getRowFoldStart=function(t,e){var i=this.getFoldLine(t,e);return i?i.start.row:t},this.getFoldDisplayLine=function(t,e,i,n,o){null==n&&(n=t.start.row),null==o&&(o=0),null==e&&(e=t.end.row),null==i&&(i=this.getLine(e).length);var r=this.doc,s="";return t.walk((function(t,e,i,a){if(!(e<n)){if(e==n){if(i<o)return;a=Math.max(o,a)}s+=null!=t?t:r.getLine(e).substring(a,i)}}),e,i),s},this.getDisplayLine=function(t,e,i,n){var o,r=this.getFoldLine(t);return r?this.getFoldDisplayLine(r,t,e,i,n):(o=this.doc.getLine(t)).substring(n||0,e||o.length)},this.$cloneFoldData=function(){var t=[];return t=this.$foldData.map((function(e){var i=e.folds.map((function(t){return t.clone()}));return new o(t,i)}))},this.toggleFold=function(t){var e,i,n=this.selection.getRange();if(n.isEmpty()){var o=n.start;if(e=this.getFoldAt(o.row,o.column))return void this.expandFold(e);(i=this.findMatchingBracket(o))?1==n.comparePoint(i)?n.end=i:(n.start=i,n.start.column++,n.end.column--):(i=this.findMatchingBracket({row:o.row,column:o.column+1}))?(1==n.comparePoint(i)?n.end=i:n.start=i,n.start.column++):n=this.getCommentFoldRange(o.row,o.column)||n}else{var r=this.getFoldsInRange(n);if(t&&r.length)return void this.expandFolds(r);1==r.length&&(e=r[0])}if(e||(e=this.getFoldAt(n.start.row,n.start.column)),e&&e.range.toString()==n.toString())this.expandFold(e);else{var s="...";if(!n.isMultiLine()){if((s=this.getTextRange(n)).length<4)return;s=s.trim().substring(0,2)+".."}this.addFold(s,n)}},this.getCommentFoldRange=function(t,e,i){var o=new s(this,t,e),r=o.getCurrentToken(),a=r.type;if(r&&/^comment|string/.test(a)){"comment"==(a=a.match(/comment|string/)[0])&&(a+="|doc-start");var l=new RegExp(a),c=new n;if(1!=i){do{r=o.stepBackward()}while(r&&l.test(r.type));o.stepForward()}if(c.start.row=o.getCurrentTokenRow(),c.start.column=o.getCurrentTokenColumn()+2,o=new s(this,t,e),-1!=i){var h=-1;do{if(r=o.stepForward(),-1==h){var u=this.getState(o.$row);l.test(u)||(h=o.$row)}else if(o.$row>h)break}while(r&&l.test(r.type));r=o.stepBackward()}else r=o.getCurrentToken();return c.end.row=o.getCurrentTokenRow(),c.end.column=o.getCurrentTokenColumn()+r.value.length-2,c}},this.foldAll=function(t,e,i){null==i&&(i=1e5);var n=this.foldWidgets;if(n){e=e||this.getLength();for(var o=t=t||0;o<e;o++)if(null==n[o]&&(n[o]=this.getFoldWidget(o)),"start"==n[o]){var r=this.getFoldWidgetRange(o);if(r&&r.isMultiLine()&&r.end.row<=e&&r.start.row>=t){o=r.end.row;try{var s=this.addFold("...",r);s&&(s.collapseChildren=i)}catch(t){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(t){if(!this.$foldStyles[t])throw new Error("invalid fold style: "+t+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=t){this.$foldStyle=t,"manual"==t&&this.unfold();var e=this.$foldMode;this.$setFolding(null),this.$setFolding(e)}},this.$setFolding=function(t){this.$foldMode!=t&&(this.$foldMode=t,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),t&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=t.getFoldWidget.bind(t,this,this.$foldStyle),this.getFoldWidgetRange=t.getFoldWidgetRange.bind(t,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(t,e){var i=this.foldWidgets;if(!i||e&&i[t])return{};for(var n,o=t-1;o>=0;){var r=i[o];if(null==r&&(r=i[o]=this.getFoldWidget(o)),"start"==r){var s=this.getFoldWidgetRange(o);if(n||(n=s),s&&s.end.row>=t)break}o--}return{range:-1!==o&&s,firstRange:n}},this.onFoldWidgetClick=function(t,e){var i={children:(e=e.domEvent).shiftKey,all:e.ctrlKey||e.metaKey,siblings:e.altKey};if(!this.$toggleFoldWidget(t,i)){var n=e.target||e.srcElement;n&&/ace_fold-widget/.test(n.className)&&(n.className+=" ace_invalid")}},this.$toggleFoldWidget=function(t,e){if(this.getFoldWidget){var i=this.getFoldWidget(t),n=this.getLine(t),o="end"===i?-1:1,r=this.getFoldAt(t,-1===o?0:n.length,o);if(r)return e.children||e.all?this.removeFold(r):this.expandFold(r),r;var s=this.getFoldWidgetRange(t,!0);if(s&&!s.isMultiLine()&&(r=this.getFoldAt(s.start.row,s.start.column,1))&&s.isEqual(r.range))return this.removeFold(r),r;if(e.siblings){var a=this.getParentFoldRangeData(t);if(a.range)var l=a.range.start.row+1,c=a.range.end.row;this.foldAll(l,c,e.all?1e4:0)}else e.children?(c=s?s.end.row:this.getLength(),this.foldAll(t+1,c,e.all?1e4:0)):s&&(e.all&&(s.collapseChildren=1e4),this.addFold("...",s));return s}},this.toggleFoldWidget=function(t){var e=this.selection.getCursor().row;e=this.getRowFoldStart(e);var i=this.$toggleFoldWidget(e,{});if(!i){var n=this.getParentFoldRangeData(e,!0);if(i=n.range||n.firstRange){e=i.start.row;var o=this.getFoldAt(e,this.getLine(e).length,1);o?this.removeFold(o):this.addFold("...",i)}}},this.updateFoldWidgets=function(t){var e=t.start.row,i=t.end.row-e;if(0===i)this.foldWidgets[e]=null;else if("remove"==t.action)this.foldWidgets.splice(e,i+1,null);else{var n=Array(i+1);n.unshift(e,1),this.foldWidgets.splice.apply(this.foldWidgets,n)}},this.tokenizerUpdateFoldWidgets=function(t){var e=t.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}})),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],(function(t,e,i){"use strict";var n=t("../token_iterator").TokenIterator,o=t("../range").Range;e.BracketMatch=function(){this.findMatchingBracket=function(t,e){if(0==t.column)return null;var i=e||this.getLine(t.row).charAt(t.column-1);if(""==i)return null;var n=i.match(/([\(\[\{])|([\)\]\}])/);return n?n[1]?this.$findClosingBracket(n[1],t):this.$findOpeningBracket(n[2],t):null},this.getBracketRange=function(t){var e,i=this.getLine(t.row),n=!0,r=i.charAt(t.column-1),s=r&&r.match(/([\(\[\{])|([\)\]\}])/);if(s||(r=i.charAt(t.column),t={row:t.row,column:t.column+1},s=r&&r.match(/([\(\[\{])|([\)\]\}])/),n=!1),!s)return null;if(s[1]){if(!(a=this.$findClosingBracket(s[1],t)))return null;e=o.fromPoints(t,a),n||(e.end.column++,e.start.column--),e.cursor=e.end}else{var a;if(!(a=this.$findOpeningBracket(s[2],t)))return null;e=o.fromPoints(a,t),n||(e.start.column++,e.end.column--),e.cursor=e.start}return e},this.getMatchingBracketRanges=function(t){var e=this.getLine(t.row),i=e.charAt(t.column-1),n=i&&i.match(/([\(\[\{])|([\)\]\}])/);if(n||(i=e.charAt(t.column),t={row:t.row,column:t.column+1},n=i&&i.match(/([\(\[\{])|([\)\]\}])/)),!n)return null;var r=new o(t.row,t.column-1,t.row,t.column),s=n[1]?this.$findClosingBracket(n[1],t):this.$findOpeningBracket(n[2],t);return s?[r,new o(s.row,s.column,s.row,s.column+1)]:[r]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(t,e,i){var o=this.$brackets[t],r=1,s=new n(this,e.row,e.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){i||(i=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var l=e.column-s.getCurrentTokenColumn()-2,c=a.value;;){for(;l>=0;){var h=c.charAt(l);if(h==o){if(0==(r-=1))return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else h==t&&(r+=1);l-=1}do{a=s.stepBackward()}while(a&&!i.test(a.type));if(null==a)break;l=(c=a.value).length-1}return null}},this.$findClosingBracket=function(t,e,i){var o=this.$brackets[t],r=1,s=new n(this,e.row,e.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){i||(i=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var l=e.column-s.getCurrentTokenColumn();;){for(var c=a.value,h=c.length;l<h;){var u=c.charAt(l);if(u==o){if(0==(r-=1))return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else u==t&&(r+=1);l+=1}do{a=s.stepForward()}while(a&&!i.test(a.type));if(null==a)break;l=0}return null}}}})),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],(function(t,e,i){"use strict";var n=t("./lib/oop"),o=t("./lib/lang"),r=t("./bidihandler").BidiHandler,s=t("./config"),a=t("./lib/event_emitter").EventEmitter,l=t("./selection").Selection,c=t("./mode/text").Mode,h=t("./range").Range,u=t("./document").Document,d=t("./background_tokenizer").BackgroundTokenizer,p=t("./search_highlight").SearchHighlight,g=function(t,e){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++g.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof t&&t.getLine||(t=new u(t)),this.setDocument(t),this.selection=new l(this),this.$bidiHandler=new r(this),s.resetOptions(this),this.setMode(e),s._signal("session",this)};g.$uid=0,function(){function t(t){return!(t<4352)&&(t>=4352&&t<=4447||t>=4515&&t<=4519||t>=4602&&t<=4607||t>=9001&&t<=9002||t>=11904&&t<=11929||t>=11931&&t<=12019||t>=12032&&t<=12245||t>=12272&&t<=12283||t>=12288&&t<=12350||t>=12353&&t<=12438||t>=12441&&t<=12543||t>=12549&&t<=12589||t>=12593&&t<=12686||t>=12688&&t<=12730||t>=12736&&t<=12771||t>=12784&&t<=12830||t>=12832&&t<=12871||t>=12880&&t<=13054||t>=13056&&t<=19903||t>=19968&&t<=42124||t>=42128&&t<=42182||t>=43360&&t<=43388||t>=44032&&t<=55203||t>=55216&&t<=55238||t>=55243&&t<=55291||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65106||t>=65108&&t<=65126||t>=65128&&t<=65131||t>=65281&&t<=65376||t>=65504&&t<=65510)}n.implement(this,a),this.setDocument=function(t){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=t,t.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(t){if(!t)return this.$docRowCache=[],void(this.$screenRowCache=[]);var e=this.$docRowCache.length,i=this.$getRowCacheIndex(this.$docRowCache,t)+1;e>i&&(this.$docRowCache.splice(i,e),this.$screenRowCache.splice(i,e))},this.$getRowCacheIndex=function(t,e){for(var i=0,n=t.length-1;i<=n;){var o=i+n>>1,r=t[o];if(e>r)i=o+1;else{if(!(e<r))return o;n=o-1}}return i-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(t){var e=t.data;this.$resetRowCache(e.start.row)},this.onChange=function(t){this.$modified=!0,this.$bidiHandler.onChange(t),this.$resetRowCache(t.start.row);var e=this.$updateInternalDataOnChange(t);!this.$fromUndo&&this.$undoManager&&(e&&e.length&&(this.$undoManager.add({action:"removeFolds",folds:e},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(t,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(t),this._signal("change",t)},this.setValue=function(t){this.doc.setValue(t),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(t){return this.bgTokenizer.getState(t)},this.getTokens=function(t){return this.bgTokenizer.getTokens(t)},this.getTokenAt=function(t,e){var i,n=this.bgTokenizer.getTokens(t),o=0;if(null==e){var r=n.length-1;o=this.getLine(t).length}else for(r=0;r<n.length&&!((o+=n[r].value.length)>=e);r++);return(i=n[r])?(i.index=r,i.start=o-i.value.length,i):null},this.setUndoManager=function(t){if(this.$undoManager=t,this.$informUndoManager&&this.$informUndoManager.cancel(),t){var e=this;t.addSession(this),this.$syncInformUndoManager=function(){e.$informUndoManager.cancel(),e.mergeUndoDeltas=!1},this.$informUndoManager=o.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?o.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(t){this.setOption("useSoftTabs",t)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(t){this.setOption("tabSize",t)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(t){return this.$useSoftTabs&&t.column%this.$tabSize==0},this.setNavigateWithinSoftTabs=function(t){this.setOption("navigateWithinSoftTabs",t)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(t){this.setOption("overwrite",t)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(t,e){this.$decorations[t]||(this.$decorations[t]=""),this.$decorations[t]+=" "+e,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(t,e){this.$decorations[t]=(this.$decorations[t]||"").replace(" "+e,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(t){this.$breakpoints=[];for(var e=0;e<t.length;e++)this.$breakpoints[t[e]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(t,e){void 0===e&&(e="ace_breakpoint"),e?this.$breakpoints[t]=e:delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(t){delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.addMarker=function(t,e,i,n){var o=this.$markerId++,r={range:t,type:i||"line",renderer:"function"==typeof i?i:null,clazz:e,inFront:!!n,id:o};return n?(this.$frontMarkers[o]=r,this._signal("changeFrontMarker")):(this.$backMarkers[o]=r,this._signal("changeBackMarker")),o},this.addDynamicMarker=function(t,e){if(t.update){var i=this.$markerId++;return t.id=i,t.inFront=!!e,e?(this.$frontMarkers[i]=t,this._signal("changeFrontMarker")):(this.$backMarkers[i]=t,this._signal("changeBackMarker")),t}},this.removeMarker=function(t){var e=this.$frontMarkers[t]||this.$backMarkers[t];e&&(delete(e.inFront?this.$frontMarkers:this.$backMarkers)[t],this._signal(e.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(t){return t?this.$frontMarkers:this.$backMarkers},this.highlight=function(t){if(!this.$searchHighlight){var e=new p(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(e)}this.$searchHighlight.setRegexp(t)},this.highlightLines=function(t,e,i,n){"number"!=typeof e&&(i=e,e=t),i||(i="ace_step");var o=new h(t,0,e,1/0);return o.id=this.addMarker(o,i,"fullLine",n),o},this.setAnnotations=function(t){this.$annotations=t,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r?\n)/m);this.$autoNewLine=e?e[1]:"\n"},this.getWordRange=function(t,e){var i=this.getLine(t),n=!1;if(e>0&&(n=!!i.charAt(e-1).match(this.tokenRe)),n||(n=!!i.charAt(e).match(this.tokenRe)),n)var o=this.tokenRe;else if(/^\s+$/.test(i.slice(e-1,e+1)))o=/\s/;else o=this.nonTokenRe;var r=e;if(r>0){do{r--}while(r>=0&&i.charAt(r).match(o));r++}for(var s=e;s<i.length&&i.charAt(s).match(o);)s++;return new h(t,r,t,s)},this.getAWordRange=function(t,e){for(var i=this.getWordRange(t,e),n=this.getLine(i.end.row);n.charAt(i.end.column).match(/[ \t]/);)i.end.column+=1;return i},this.setNewLineMode=function(t){this.doc.setNewLineMode(t)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(t){this.setOption("useWorker",t)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(t){var e=t.data;this.bgTokenizer.start(e.first),this._signal("tokenizerUpdate",t)},this.$modes=s.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(t,e){if(t&&"object"==typeof t){if(t.getTokenizer)return this.$onChangeMode(t);var i=t,n=i.path}else n=t||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new c),this.$modes[n]&&!i)return this.$onChangeMode(this.$modes[n]),void(e&&e());this.$modeId=n,s.loadModule(["mode",n],function(t){if(this.$modeId!==n)return e&&e();this.$modes[n]&&!i?this.$onChangeMode(this.$modes[n]):t&&t.Mode&&(t=new t.Mode(i),i||(this.$modes[n]=t,t.$id=n),this.$onChangeMode(t)),e&&e()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(t,e){if(e||(this.$modeId=t.$id),this.$mode!==t){this.$mode=t,this.$stopWorker(),this.$useWorker&&this.$startWorker();var i=t.getTokenizer();if(void 0!==i.addEventListener){var n=this.onReloadTokenizer.bind(this);i.addEventListener("update",n)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(i);else{this.bgTokenizer=new d(i);var o=this;this.bgTokenizer.addEventListener("update",(function(t){o._signal("tokenizerUpdate",t)}))}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=t.tokenRe,this.nonTokenRe=t.nonTokenRe,e||(t.attachToSession&&t.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(t.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(t){s.warn("Could not load worker",t),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(t){this.$scrollTop===t||isNaN(t)||(this.$scrollTop=t,this._signal("changeScrollTop",t))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(t){this.$scrollLeft===t||isNaN(t)||(this.$scrollLeft=t,this._signal("changeScrollLeft",t))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var t=0;return this.lineWidgets.forEach((function(e){e&&e.screenWidth>t&&(t=e.screenWidth)})),this.lineWidgetWidth=t},this.$computeWidth=function(t){if(this.$modified||t){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var e=this.doc.getAllLines(),i=this.$rowLengthCache,n=0,o=0,r=this.$foldData[o],s=r?r.start.row:1/0,a=e.length,l=0;l<a;l++){if(l>s){if((l=r.end.row+1)>=a)break;s=(r=this.$foldData[o++])?r.start.row:1/0}null==i[l]&&(i[l]=this.$getStringScreenWidth(e[l])[0]),i[l]>n&&(n=i[l])}this.screenWidth=n}},this.getLine=function(t){return this.doc.getLine(t)},this.getLines=function(t,e){return this.doc.getLines(t,e)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(t){return this.doc.getTextRange(t||this.selection.getRange())},this.insert=function(t,e){return this.doc.insert(t,e)},this.remove=function(t){return this.doc.remove(t)},this.removeFullLines=function(t,e){return this.doc.removeFullLines(t,e)},this.undoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var i=t.length-1;-1!=i;i--){var n=t[i];"insert"==n.action||"remove"==n.action?this.doc.revertDelta(n):n.folds&&this.addFolds(n.folds)}!e&&this.$undoSelect&&(t.selectionBefore?this.selection.fromJSON(t.selectionBefore):this.selection.setRange(this.$getUndoSelection(t,!0))),this.$fromUndo=!1}},this.redoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var i=0;i<t.length;i++){var n=t[i];("insert"==n.action||"remove"==n.action)&&this.doc.applyDelta(n)}!e&&this.$undoSelect&&(t.selectionAfter?this.selection.fromJSON(t.selectionAfter):this.selection.setRange(this.$getUndoSelection(t,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(t){this.$undoSelect=t},this.$getUndoSelection=function(t,e){function i(t){return e?"insert"!==t.action:"insert"===t.action}for(var n,o,r=0;r<t.length;r++){var s=t[r];s.start&&(n?i(s)?(o=s.start,-1==n.compare(o.row,o.column)&&n.setStart(o),o=s.end,1==n.compare(o.row,o.column)&&n.setEnd(o),!0):(o=s.start,-1==n.compare(o.row,o.column)&&(n=h.fromPoints(s.start,s.start)),!1):i(s)?(n=h.fromPoints(s.start,s.end),!0):(n=h.fromPoints(s.start,s.start),!1))}return n},this.replace=function(t,e){return this.doc.replace(t,e)},this.moveText=function(t,e,i){var n=this.getTextRange(t),o=this.getFoldsInRange(t),r=h.fromPoints(e,e);if(!i){this.remove(t);var s=t.start.row-t.end.row;(c=s?-t.end.column:t.start.column-t.end.column)&&(r.start.row==t.end.row&&r.start.column>t.end.column&&(r.start.column+=c),r.end.row==t.end.row&&r.end.column>t.end.column&&(r.end.column+=c)),s&&r.start.row>=t.end.row&&(r.start.row+=s,r.end.row+=s)}if(r.end=this.insert(r.start,n),o.length){var a=t.start,l=r.start,c=(s=l.row-a.row,l.column-a.column);this.addFolds(o.map((function(t){return(t=t.clone()).start.row==a.row&&(t.start.column+=c),t.end.row==a.row&&(t.end.column+=c),t.start.row+=s,t.end.row+=s,t})))}return r},this.indentRows=function(t,e,i){i=i.replace(/\t/g,this.getTabString());for(var n=t;n<=e;n++)this.doc.insertInLine({row:n,column:0},i)},this.outdentRows=function(t){for(var e=t.collapseRows(),i=new h(0,0,0,0),n=this.getTabSize(),o=e.start.row;o<=e.end.row;++o){var r=this.getLine(o);i.start.row=o,i.end.row=o;for(var s=0;s<n&&" "==r.charAt(s);++s);s<n&&"\t"==r.charAt(s)?(i.start.column=s,i.end.column=s+1):(i.start.column=0,i.end.column=s),this.remove(i)}},this.$moveLines=function(t,e,i){if(t=this.getRowFoldStart(t),e=this.getRowFoldEnd(e),i<0){if((o=this.getRowFoldStart(t+i))<0)return 0;var n=o-t}else if(i>0){var o;if((o=this.getRowFoldEnd(e+i))>this.doc.getLength()-1)return 0;n=o-e}else{t=this.$clipRowToDocument(t);n=(e=this.$clipRowToDocument(e))-t+1}var r=new h(t,0,e,Number.MAX_VALUE),s=this.getFoldsInRange(r).map((function(t){return(t=t.clone()).start.row+=n,t.end.row+=n,t})),a=0==i?this.doc.getLines(t,e):this.doc.removeFullLines(t,e);return this.doc.insertFullLines(t+n,a),s.length&&this.addFolds(s),n},this.moveLinesUp=function(t,e){return this.$moveLines(t,e,-1)},this.moveLinesDown=function(t,e){return this.$moveLines(t,e,1)},this.duplicateLines=function(t,e){return this.$moveLines(t,e,0)},this.$clipRowToDocument=function(t){return Math.max(0,Math.min(t,this.doc.getLength()-1))},this.$clipColumnToRow=function(t,e){return e<0?0:Math.min(this.doc.getLine(t).length,e)},this.$clipPositionToDocument=function(t,e){if(e=Math.max(0,e),t<0)t=0,e=0;else{var i=this.doc.getLength();t>=i?(t=i-1,e=this.doc.getLine(i-1).length):e=Math.min(this.doc.getLine(t).length,e)}return{row:t,column:e}},this.$clipRangeToDocument=function(t){t.start.row<0?(t.start.row=0,t.start.column=0):t.start.column=this.$clipColumnToRow(t.start.row,t.start.column);var e=this.doc.getLength()-1;return t.end.row>e?(t.end.row=e,t.end.column=this.doc.getLine(e).length):t.end.column=this.$clipColumnToRow(t.end.row,t.end.column),t},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(t){if(t!=this.$useWrapMode){if(this.$useWrapMode=t,this.$modified=!0,this.$resetRowCache(0),t){var e=this.getLength();this.$wrapData=Array(e),this.$updateWrapData(0,e-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(t,e){this.$wrapLimitRange.min===t&&this.$wrapLimitRange.max===e||(this.$wrapLimitRange={min:t,max:e},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(t,e){var i=this.$wrapLimitRange;i.max<0&&(i={min:e,max:e});var n=this.$constrainWrapLimit(t,i.min,i.max);return n!=this.$wrapLimit&&n>1&&(this.$wrapLimit=n,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(t,e,i){return e&&(t=Math.max(e,t)),i&&(t=Math.min(i,t)),t},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(t){this.setWrapLimitRange(t,t)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(t){var e=this.$useWrapMode,i=t.action,n=t.start,o=t.end,r=n.row,s=o.row,a=s-r,l=null;if(this.$updating=!0,0!=a)if("remove"===i){this[e?"$wrapData":"$rowLengthCache"].splice(r,a);var c=this.$foldData;l=this.getFoldsInRange(t),this.removeFolds(l);var h=0;if(f=this.getFoldLine(o.row)){f.addRemoveChars(o.row,o.column,n.column-o.column),f.shiftRow(-a);var u=this.getFoldLine(r);u&&u!==f&&(u.merge(f),f=u),h=c.indexOf(f)+1}for(;h<c.length;h++){(f=c[h]).start.row>=o.row&&f.shiftRow(-a)}s=r}else{var d=Array(a);d.unshift(r,0);var p=e?this.$wrapData:this.$rowLengthCache;p.splice.apply(p,d);c=this.$foldData,h=0;if(f=this.getFoldLine(r)){var g=f.range.compareInside(n.row,n.column);0==g?(f=f.split(n.row,n.column))&&(f.shiftRow(a),f.addRemoveChars(s,0,o.column-n.column)):-1==g&&(f.addRemoveChars(r,0,o.column-n.column),f.shiftRow(a)),h=c.indexOf(f)+1}for(;h<c.length;h++){var f;(f=c[h]).start.row>=r&&f.shiftRow(a)}}else a=Math.abs(t.start.column-t.end.column),"remove"===i&&(l=this.getFoldsInRange(t),this.removeFolds(l),a=-a),(f=this.getFoldLine(r))&&f.addRemoveChars(r,n.column,a);return e&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,e?this.$updateWrapData(r,s):this.$updateRowLengthCache(r,s),l},this.$updateRowLengthCache=function(t,e,i){this.$rowLengthCache[t]=null,this.$rowLengthCache[e]=null},this.$updateWrapData=function(t,n){var o,r,s=this.doc.getAllLines(),a=this.getTabSize(),l=this.$wrapData,c=this.$wrapLimit,h=t;for(n=Math.min(n,s.length-1);h<=n;)(r=this.getFoldLine(h,r))?(o=[],r.walk(function(t,n,r,a){var l;if(null!=t){(l=this.$getDisplayTokens(t,o.length))[0]=e;for(var c=1;c<l.length;c++)l[c]=i}else l=this.$getDisplayTokens(s[n].substring(a,r),o.length);o=o.concat(l)}.bind(this),r.end.row,s[r.end.row].length+1),l[r.start.row]=this.$computeWrapSplits(o,c,a),h=r.end.row+1):(o=this.$getDisplayTokens(s[h]),l[h]=this.$computeWrapSplits(o,c,a),h++)};var e=3,i=4;this.$computeWrapSplits=function(t,n,o){function r(){var e=0;if(0===p)return e;if(d)for(var i=0;i<t.length;i++){var n=t[i];if(10==n)e+=1;else{if(11!=n){if(12==n)continue;break}e+=o}}return u&&!1!==d&&(e+=o),Math.min(e,p)}function s(e){for(var i=e-c,n=c;n<e;n++){var o=t[n];12!==o&&2!==o||(i-=1)}a.length||(g=r(),a.indent=g),h+=i,a.push(h),c=e}if(0==t.length)return[];for(var a=[],l=t.length,c=0,h=0,u=this.$wrapAsCode,d=this.$indentedSoftWrap,p=n<=Math.max(2*o,8)||!1===d?0:Math.floor(n/2),g=0;l-c>n-g;){var f=c+n-g;if(t[f-1]>=10&&t[f]>=10)s(f);else if(t[f]!=e&&t[f]!=i){for(var m=Math.max(f-(n-(n>>2)),c-1);f>m&&t[f]<e;)f--;if(u){for(;f>m&&t[f]<e;)f--;for(;f>m&&9==t[f];)f--}else for(;f>m&&t[f]<10;)f--;f>m?s(++f):(2==t[f=c+n]&&f--,s(f-g))}else{for(;f!=c-1&&t[f]!=e;f--);if(f>c){s(f);continue}for(f=c+n;f<t.length&&t[f]==i;f++);if(f==t.length)break;s(f)}}return a},this.$getDisplayTokens=function(e,i){var n,o=[];i=i||0;for(var r=0;r<e.length;r++){var s=e.charCodeAt(r);if(9==s){n=this.getScreenTabSize(o.length+i),o.push(11);for(var a=1;a<n;a++)o.push(12)}else 32==s?o.push(10):s>39&&s<48||s>57&&s<64?o.push(9):s>=4352&&t(s)?o.push(1,2):o.push(1)}return o},this.$getStringScreenWidth=function(e,i,n){if(0==i)return[0,0];var o,r;for(null==i&&(i=1/0),n=n||0,r=0;r<e.length&&(9==(o=e.charCodeAt(r))?n+=this.getScreenTabSize(n):o>=4352&&t(o)?n+=2:n+=1,!(n>i));r++);return[n,r]},this.lineWidgets=null,this.getRowLength=function(t){var e=1;return this.lineWidgets&&(e+=this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0),this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+e:e},this.getRowLineCount=function(t){return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1:1},this.getRowWrapIndent=function(t){if(this.$useWrapMode){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE),i=this.$wrapData[e.row];return i.length&&i[0]<e.column?i.indent:0}return 0},this.getScreenLastRowColumn=function(t){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE);return this.documentToScreenColumn(e.row,e.column)},this.getDocumentLastRowColumn=function(t,e){var i=this.documentToScreenRow(t,e);return this.getScreenLastRowColumn(i)},this.getDocumentLastRowColumnPosition=function(t,e){var i=this.documentToScreenRow(t,e);return this.screenToDocumentPosition(i,Number.MAX_VALUE/10)},this.getRowSplitData=function(t){return this.$useWrapMode?this.$wrapData[t]:void 0},this.getScreenTabSize=function(t){return this.$tabSize-(t%this.$tabSize|0)},this.screenToDocumentRow=function(t,e){return this.screenToDocumentPosition(t,e).row},this.screenToDocumentColumn=function(t,e){return this.screenToDocumentPosition(t,e).column},this.screenToDocumentPosition=function(t,e,i){if(t<0)return{row:0,column:0};var n,o,r=0,s=0,a=0,l=0,c=this.$screenRowCache,h=this.$getRowCacheIndex(c,t),u=c.length;if(u&&h>=0){a=c[h],r=this.$docRowCache[h];var d=t>c[u-1]}else d=!u;for(var p=this.getLength()-1,g=this.getNextFoldLine(r),f=g?g.start.row:1/0;a<=t&&!(a+(l=this.getRowLength(r))>t||r>=p);)a+=l,++r>f&&(r=g.end.row+1,f=(g=this.getNextFoldLine(r,g))?g.start.row:1/0),d&&(this.$docRowCache.push(r),this.$screenRowCache.push(a));if(g&&g.start.row<=r)n=this.getFoldDisplayLine(g),r=g.start.row;else{if(a+l<=t||r>p)return{row:p,column:this.getLine(p).length};n=this.getLine(r),g=null}var m=0,v=Math.floor(t-a);if(this.$useWrapMode){var _=this.$wrapData[r];_&&(o=_[v],v>0&&_.length&&(m=_.indent,s=_[v-1]||_[_.length-1],n=n.substring(s)))}return void 0!==i&&this.$bidiHandler.isBidiRow(a+v,r,v)&&(e=this.$bidiHandler.offsetToCol(i)),s+=this.$getStringScreenWidth(n,e-m)[1],this.$useWrapMode&&s>=o&&(s=o-1),g?g.idxToPosition(s):{row:r,column:s}},this.documentToScreenPosition=function(t,e){if(void 0===e)var i=this.$clipPositionToDocument(t.row,t.column);else i=this.$clipPositionToDocument(t,e);t=i.row,e=i.column;var n,o=0,r=null;(n=this.getFoldAt(t,e,1))&&(t=n.start.row,e=n.start.column);var s,a=0,l=this.$docRowCache,c=this.$getRowCacheIndex(l,t),h=l.length;if(h&&c>=0){a=l[c],o=this.$screenRowCache[c];var u=t>l[h-1]}else u=!h;for(var d=this.getNextFoldLine(a),p=d?d.start.row:1/0;a<t;){if(a>=p){if((s=d.end.row+1)>t)break;p=(d=this.getNextFoldLine(s,d))?d.start.row:1/0}else s=a+1;o+=this.getRowLength(a),a=s,u&&(this.$docRowCache.push(a),this.$screenRowCache.push(o))}var g="";d&&a>=p?(g=this.getFoldDisplayLine(d,t,e),r=d.start.row):(g=this.getLine(t).substring(0,e),r=t);var f=0;if(this.$useWrapMode){var m=this.$wrapData[r];if(m){for(var v=0;g.length>=m[v];)o++,v++;g=g.substring(m[v-1]||0,g.length),f=v>0?m.indent:0}}return this.lineWidgets&&this.lineWidgets[a]&&this.lineWidgets[a].rowsAbove&&(o+=this.lineWidgets[a].rowsAbove),{row:o,column:f+this.$getStringScreenWidth(g)[0]}},this.documentToScreenColumn=function(t,e){return this.documentToScreenPosition(t,e).column},this.documentToScreenRow=function(t,e){return this.documentToScreenPosition(t,e).row},this.getScreenLength=function(){var t=0,e=null;if(this.$useWrapMode)for(var i=this.$wrapData.length,n=0,o=(a=0,(e=this.$foldData[a++])?e.start.row:1/0);n<i;){var r=this.$wrapData[n];t+=r?r.length+1:1,++n>o&&(n=e.end.row+1,o=(e=this.$foldData[a++])?e.start.row:1/0)}else{t=this.getLength();for(var s=this.$foldData,a=0;a<s.length;a++)t-=(e=s[a]).end.row-e.start.row}return this.lineWidgets&&(t+=this.$getWidgetScreenLength()),t},this.$setFontMetrics=function(t){this.$enableVarChar&&(this.$getStringScreenWidth=function(e,i,n){if(0===i)return[0,0];var o,r;for(i||(i=1/0),n=n||0,r=0;r<e.length&&!((n+="\t"===(o=e.charAt(r))?this.getScreenTabSize(n):t.getCharacterWidth(o))>i);r++);return[n,r]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()},this.isFullWidth=t}.call(g.prototype),t("./edit_session/folding").Folding.call(g.prototype),t("./edit_session/bracket_match").BracketMatch.call(g.prototype),s.defineOptions(g.prototype,"session",{wrap:{set:function(t){if(t&&"off"!=t?"free"==t?t=!0:"printMargin"==t?t=-1:"string"==typeof t&&(t=parseInt(t,10)||!1):t=!1,this.$wrap!=t)if(this.$wrap=t,t){var e="number"==typeof t?t:null;this.setWrapLimitRange(e,e),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(t){(t="auto"==t?"text"!=this.$mode.type:"text"!=t)!=this.$wrapAsCode&&(this.$wrapAsCode=t,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(t){this.$useWorker=t,this.$stopWorker(),t&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(t){(t=parseInt(t))>0&&this.$tabSize!==t&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=t,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(t){this.setFoldStyle(t)},handlesSet:!0},overwrite:{set:function(t){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(t){this.doc.setNewLineMode(t)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(t){this.setMode(t)},get:function(){return this.$modeId},handlesSet:!0}}),e.EditSession=g})),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(t,e,i){"use strict";var n=t("./lib/lang"),o=t("./lib/oop"),r=t("./range").Range,s=function(){this.$options={}};(function(){this.set=function(t){return o.mixin(this.$options,t),this},this.getOptions=function(){return n.copyObject(this.$options)},this.setOptions=function(t){this.$options=t},this.find=function(t){var e=this.$options,i=this.$matchIterator(t,e);if(!i)return!1;var n=null;return i.forEach((function(t,i,o,s){return n=new r(t,i,o,s),!(i==s&&e.start&&e.start.start&&0!=e.skipCurrent&&n.isEqual(e.start))||(n=null,!1)})),n},this.findAll=function(t){var e=this.$options;if(!e.needle)return[];this.$assembleRegExp(e);var i=e.range,o=i?t.getLines(i.start.row,i.end.row):t.doc.getAllLines(),s=[],a=e.re;if(e.$isMultiLine){var l,c=a.length,h=o.length-c;t:for(var u=a.offset||0;u<=h;u++){for(var d=0;d<c;d++)if(-1==o[u+d].search(a[d]))continue t;var p=o[u],g=o[u+c-1],f=p.length-p.match(a[0])[0].length,m=g.match(a[c-1])[0].length;l&&l.end.row===u&&l.end.column>f||(s.push(l=new r(u,f,u+c-1,m)),c>2&&(u=u+c-2))}}else for(var v=0;v<o.length;v++){var _=n.getMatchOffsets(o[v],a);for(d=0;d<_.length;d++){var y=_[d];s.push(new r(v,y.offset,v,y.offset+y.length))}}if(i){var b=i.start.column,w=i.start.column;for(v=0,d=s.length-1;v<d&&s[v].start.column<b&&s[v].start.row==i.start.row;)v++;for(;v<d&&s[d].end.column>w&&s[d].end.row==i.end.row;)d--;for(s=s.slice(v,d+1),v=0,d=s.length;v<d;v++)s[v].start.row+=i.start.row,s[v].end.row+=i.start.row}return s},this.replace=function(t,e){var i=this.$options,n=this.$assembleRegExp(i);if(i.$isMultiLine)return e;if(n){var o=n.exec(t);if(!o||o[0].length!=t.length)return null;if(e=t.replace(n,e),i.preserveCase){e=e.split("");for(var r=Math.min(t.length,t.length);r--;){var s=t[r];s&&s.toLowerCase()!=s?e[r]=e[r].toUpperCase():e[r]=e[r].toLowerCase()}e=e.join("")}return e}},this.$assembleRegExp=function(t,e){if(t.needle instanceof RegExp)return t.re=t.needle;var i=t.needle;if(!t.needle)return t.re=!1;t.regExp||(i=n.escapeRegExp(i)),t.wholeWord&&(i=function(t,e){function i(t){return/\w/.test(t)||e.regExp?"\\b":""}return i(t[0])+t+i(t[t.length-1])}(i,t));var o=t.caseSensitive?"gm":"gmi";if(t.$isMultiLine=!e&&/[\n\r]/.test(i),t.$isMultiLine)return t.re=this.$assembleMultilineRegExp(i,o);try{var r=new RegExp(i,o)}catch(t){r=!1}return t.re=r},this.$assembleMultilineRegExp=function(t,e){for(var i=t.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),n=[],o=0;o<i.length;o++)try{n.push(new RegExp(i[o],e))}catch(t){return!1}return n},this.$matchIterator=function(t,e){var i=this.$assembleRegExp(e);if(!i)return!1;var n=1==e.backwards,o=0!=e.skipCurrent,r=e.range,s=e.start;s||(s=r?r[n?"end":"start"]:t.selection.getRange()),s.start&&(s=s[o!=n?"end":"start"]);var a=r?r.start.row:0,l=r?r.end.row:t.getLength()-1;if(n)var c=function(t){var i=s.row;if(!u(i,s.column,t)){for(i--;i>=a;i--)if(u(i,Number.MAX_VALUE,t))return;if(0!=e.wrap)for(i=l,a=s.row;i>=a;i--)if(u(i,Number.MAX_VALUE,t))return}};else c=function(t){var i=s.row;if(!u(i,s.column,t)){for(i+=1;i<=l;i++)if(u(i,0,t))return;if(0!=e.wrap)for(i=a,l=s.row;i<=l;i++)if(u(i,0,t))return}};if(e.$isMultiLine)var h=i.length,u=function(e,o,r){var s=n?e-h+1:e;if(!(s<0)){var a=t.getLine(s),l=a.search(i[0]);if(!(!n&&l<o||-1===l)){for(var c=1;c<h;c++)if(-1==(a=t.getLine(s+c)).search(i[c]))return;var u=a.match(i[h-1])[0].length;if(!(n&&u>o))return!!r(s,l,s+h-1,u)||void 0}}};else if(n)u=function(e,n,o){var r,s=t.getLine(e),a=[],l=0;for(i.lastIndex=0;r=i.exec(s);){var c=r[0].length;if(l=r.index,!c){if(l>=s.length)break;i.lastIndex=l+=1}if(r.index+c>n)break;a.push(r.index,c)}for(var h=a.length-1;h>=0;h-=2){var u=a[h-1];if(o(e,u,e,u+(c=a[h])))return!0}};else u=function(e,n,o){var r,s,a=t.getLine(e);for(i.lastIndex=n;s=i.exec(a);){var l=s[0].length;if(o(e,r=s.index,e,r+l))return!0;if(!l&&(i.lastIndex=r+=1,r>=a.length))return!1}};return{forEach:c}}}).call(s.prototype),e.Search=s})),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(t,e,i){"use strict";function n(t,e){this.platform=e||(s.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(t),this.$singleCommand=!0}function o(t,e){n.call(this,t,e),this.$singleCommand=!1}var r=t("../lib/keys"),s=t("../lib/useragent"),a=r.KEY_MODS;o.prototype=n.prototype,function(){function t(t){return"object"==typeof t&&t.bindKey&&t.bindKey.position||(t.isDefault?-100:0)}this.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),this.commands[t.name]=t,t.bindKey&&this._buildKeyHash(t)},this.removeCommand=function(t,e){var i=t&&("string"==typeof t?t:t.name);t=this.commands[i],e||delete this.commands[i];var n=this.commandKeyBinding;for(var o in n){var r=n[o];if(r==t)delete n[o];else if(Array.isArray(r)){var s=r.indexOf(t);-1!=s&&(r.splice(s,1),1==r.length&&(n[o]=r[0]))}}},this.bindKey=function(t,e,i){if("object"==typeof t&&t&&(null==i&&(i=t.position),t=t[this.platform]),t)return"function"==typeof e?this.addCommand({exec:e,bindKey:t,name:e.name||t}):void t.split("|").forEach((function(t){var n="";if(-1!=t.indexOf(" ")){var o=t.split(/\s+/);t=o.pop(),o.forEach((function(t){var e=this.parseKeys(t),i=a[e.hashId]+e.key;n+=(n?" ":"")+i,this._addCommandToBinding(n,"chainKeys")}),this),n+=" "}var r=this.parseKeys(t),s=a[r.hashId]+r.key;this._addCommandToBinding(n+s,e,i)}),this)},this._addCommandToBinding=function(e,i,n){var o,r=this.commandKeyBinding;if(i)if(!r[e]||this.$singleCommand)r[e]=i;else{Array.isArray(r[e])?-1!=(o=r[e].indexOf(i))&&r[e].splice(o,1):r[e]=[r[e]],"number"!=typeof n&&(n=t(i));var s=r[e];for(o=0;o<s.length;o++){if(t(s[o])>n)break}s.splice(o,0,i)}else delete r[e]},this.addCommands=function(t){t&&Object.keys(t).forEach((function(e){var i=t[e];if(i){if("string"==typeof i)return this.bindKey(i,e);"function"==typeof i&&(i={exec:i}),"object"==typeof i&&(i.name||(i.name=e),this.addCommand(i))}}),this)},this.removeCommands=function(t){Object.keys(t).forEach((function(e){this.removeCommand(t[e])}),this)},this.bindKeys=function(t){Object.keys(t).forEach((function(e){this.bindKey(e,t[e])}),this)},this._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},this.parseKeys=function(t){var e=t.toLowerCase().split(/[\-\+]([\-\+])?/).filter((function(t){return t})),i=e.pop(),n=r[i];if(r.FUNCTION_KEYS[n])i=r.FUNCTION_KEYS[n].toLowerCase();else{if(!e.length)return{key:i,hashId:-1};if(1==e.length&&"shift"==e[0])return{key:i.toUpperCase(),hashId:-1}}for(var o=0,s=e.length;s--;){var a=r.KEY_MODS[e[s]];if(null==a)return"undefined"!=typeof console&&console.error("invalid modifier "+e[s]+" in "+t),!1;o|=a}return{key:i,hashId:o}},this.findKeyCommand=function(t,e){var i=a[t]+e;return this.commandKeyBinding[i]},this.handleKeyboard=function(t,e,i,n){if(!(n<0)){var o=a[e]+i,r=this.commandKeyBinding[o];return t.$keyChain&&(t.$keyChain+=" "+o,r=this.commandKeyBinding[t.$keyChain]||r),!r||"chainKeys"!=r&&"chainKeys"!=r[r.length-1]?(t.$keyChain&&(e&&4!=e||1!=i.length?(-1==e||n>0)&&(t.$keyChain=""):t.$keyChain=t.$keyChain.slice(0,-o.length-1)),{command:r}):(t.$keyChain=t.$keyChain||o,{command:"null"})}},this.getStatusText=function(t,e){return e.$keyChain||""}}.call(n.prototype),e.HashHandler=n,e.MultiHashHandler=o})),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],(function(t,e,i){"use strict";var n=t("../lib/oop"),o=t("../keyboard/hash_handler").MultiHashHandler,r=t("../lib/event_emitter").EventEmitter,s=function(t,e){o.call(this,e,t),this.byName=this.commands,this.setDefaultHandler("exec",(function(t){return t.command.exec(t.editor,t.args||{})}))};n.inherits(s,o),function(){n.implement(this,r),this.exec=function(t,e,i){if(Array.isArray(t)){for(var n=t.length;n--;)if(this.exec(t[n],e,i))return!0;return!1}if("string"==typeof t&&(t=this.commands[t]),!t)return!1;if(e&&e.$readOnly&&!t.readOnly)return!1;if(0!=this.$checkCommandState&&t.isAvailable&&!t.isAvailable(e))return!1;var o={editor:e,command:t,args:i};return o.returnValue=this._emit("exec",o),this._signal("afterExec",o),!1!==o.returnValue},this.toggleRecording=function(t){if(!this.$inReplay)return t&&t._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(t){this.macro.push([t.command,t.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(t){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(t);try{this.$inReplay=!0,this.macro.forEach((function(e){"string"==typeof e?this.exec(e,t):this.exec(e[0],t,e[1])}),this)}finally{this.$inReplay=!1}}},this.trimMacro=function(t){return t.map((function(t){return"string"!=typeof t[0]&&(t[0]=t[0].name),t[1]||(t=t[0]),t}))}}.call(s.prototype),e.CommandManager=s})),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],(function(t,e,i){"use strict";function n(t,e){return{win:t,mac:e}}var o=t("../lib/lang"),r=t("../config"),s=t("../range").Range;e.commands=[{name:"showSettingsMenu",bindKey:n("Ctrl-,","Command-,"),exec:function(t){r.loadModule("ace/ext/settings_menu",(function(e){e.init(t),t.showSettingsMenu()}))},readOnly:!0},{name:"goToNextError",bindKey:n("Alt-E","F4"),exec:function(t){r.loadModule("./ext/error_marker",(function(e){e.showErrorMarker(t,1)}))},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:n("Alt-Shift-E","Shift-F4"),exec:function(t){r.loadModule("./ext/error_marker",(function(e){e.showErrorMarker(t,-1)}))},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:n("Ctrl-A","Command-A"),exec:function(t){t.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:n(null,"Ctrl-L"),exec:function(t){t.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:n("Ctrl-L","Command-L"),exec:function(t,e){"number"==typeof e&&!isNaN(e)&&t.gotoLine(e),t.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:n("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(t){t.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:n("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(t){t.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:n("F2","F2"),exec:function(t){t.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:n("Alt-F2","Alt-F2"),exec:function(t){t.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:n(null,"Ctrl-Command-Option-0"),exec:function(t){t.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:n("Alt-0","Command-Option-0"),exec:function(t){t.session.foldAll(),t.session.unfold(t.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:n("Alt-Shift-0","Command-Option-Shift-0"),exec:function(t){t.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:n("Ctrl-K","Command-G"),exec:function(t){t.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:n("Ctrl-Shift-K","Command-Shift-G"),exec:function(t){t.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:n("Alt-K","Ctrl-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:n("Alt-Shift-K","Ctrl-Shift-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:n("Ctrl-F","Command-F"),exec:function(t){r.loadModule("ace/ext/searchbox",(function(e){e.Search(t)}))},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(t){t.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:n("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(t){t.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:n("Ctrl-Home","Command-Home|Command-Up"),exec:function(t){t.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:n("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(t){t.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:n("Up","Up|Ctrl-P"),exec:function(t,e){t.navigateUp(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:n("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(t){t.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:n("Ctrl-End","Command-End|Command-Down"),exec:function(t){t.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:n("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(t){t.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:n("Down","Down|Ctrl-N"),exec:function(t,e){t.navigateDown(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:n("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(t){t.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:n("Ctrl-Left","Option-Left"),exec:function(t){t.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:n("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:n("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(t){t.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:n("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(t){t.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:n("Left","Left|Ctrl-B"),exec:function(t,e){t.navigateLeft(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:n("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(t){t.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:n("Ctrl-Right","Option-Right"),exec:function(t){t.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:n("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:n("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(t){t.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:n("Shift-Right","Shift-Right"),exec:function(t){t.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:n("Right","Right|Ctrl-F"),exec:function(t,e){t.navigateRight(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(t){t.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:n(null,"Option-PageDown"),exec:function(t){t.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:n("PageDown","PageDown|Ctrl-V"),exec:function(t){t.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(t){t.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:n(null,"Option-PageUp"),exec:function(t){t.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(t){t.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:n("Ctrl-Up",null),exec:function(t){t.renderer.scrollBy(0,-2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:n("Ctrl-Down",null),exec:function(t){t.renderer.scrollBy(0,2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:n("Ctrl-Alt-E","Command-Option-E"),exec:function(t){t.commands.toggleRecording(t)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:n("Ctrl-Shift-E","Command-Shift-E"),exec:function(t){t.commands.replay(t)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:n("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(t){t.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:n("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(t){t.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:n("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(t){t.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:n(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(t){},readOnly:!0},{name:"cut",description:"Cut",exec:function(t){var e=t.$copyWithEmptySelection&&t.selection.isEmpty()?t.selection.getLineRange():t.selection.getRange();t._emit("cut",e),e.isEmpty()||t.session.remove(e),t.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(t,e){t.$handlePaste(e)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:n("Ctrl-D","Command-D"),exec:function(t){t.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:n("Ctrl-Shift-D","Command-Shift-D"),exec:function(t){t.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:n("Ctrl-Alt-S","Command-Alt-S"),exec:function(t){t.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:n("Ctrl-/","Command-/"),exec:function(t){t.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:n("Ctrl-Shift-/","Command-Shift-/"),exec:function(t){t.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:n("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(t){t.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:n("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(t){t.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:n("Ctrl-H","Command-Option-F"),exec:function(t){r.loadModule("ace/ext/searchbox",(function(e){e.Search(t,!0)}))}},{name:"undo",description:"Undo",bindKey:n("Ctrl-Z","Command-Z"),exec:function(t){t.undo()}},{name:"redo",description:"Redo",bindKey:n("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(t){t.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:n("Alt-Shift-Up","Command-Option-Up"),exec:function(t){t.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:n("Alt-Up","Option-Up"),exec:function(t){t.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:n("Alt-Shift-Down","Command-Option-Down"),exec:function(t){t.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:n("Alt-Down","Option-Down"),exec:function(t){t.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:n("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(t){t.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:n("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(t){t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:n("Shift-Delete",null),exec:function(t){if(!t.selection.isEmpty())return!1;t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:n("Alt-Backspace","Command-Backspace"),exec:function(t){t.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:n("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(t){t.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:n("Ctrl-Shift-Backspace",null),exec:function(t){var e=t.selection.getRange();e.start.column=0,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:n("Ctrl-Shift-Delete",null),exec:function(t){var e=t.selection.getRange();e.end.column=Number.MAX_VALUE,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:n("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(t){t.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:n("Ctrl-Delete","Alt-Delete"),exec:function(t){t.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:n("Shift-Tab","Shift-Tab"),exec:function(t){t.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:n("Tab","Tab"),exec:function(t){t.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:n("Ctrl-[","Ctrl-["),exec:function(t){t.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:n("Ctrl-]","Ctrl-]"),exec:function(t){t.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(t,e){t.insert(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(t,e){t.insert(o.stringRepeat(e.text||"",e.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:n(null,"Ctrl-O"),exec:function(t){t.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:n("Alt-Shift-X","Ctrl-T"),exec:function(t){t.transposeLetters()},multiSelectAction:function(t){t.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:n("Ctrl-U","Ctrl-U"),exec:function(t){t.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:n("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(t){t.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",description:"Expand to line",bindKey:n("Ctrl-Shift-L","Command-Shift-L"),exec:function(t){var e=t.selection.getRange();e.start.column=e.end.column=0,e.end.row++,t.selection.setRange(e,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:n(null,null),exec:function(t){for(var e=t.selection.isBackwards(),i=e?t.selection.getSelectionLead():t.selection.getSelectionAnchor(),n=e?t.selection.getSelectionAnchor():t.selection.getSelectionLead(),r=t.session.doc.getLine(i.row).length,a=t.session.doc.getTextRange(t.selection.getRange()).replace(/\n\s*/," ").length,l=t.session.doc.getLine(i.row),c=i.row+1;c<=n.row+1;c++){var h=o.stringTrimLeft(o.stringTrimRight(t.session.doc.getLine(c)));0!==h.length&&(h=" "+h),l+=h}n.row+1<t.session.doc.getLength()-1&&(l+=t.session.doc.getNewLineCharacter()),t.clearSelection(),t.session.doc.replace(new s(i.row,0,n.row+2,0),l),a>0?(t.selection.moveCursorTo(i.row,i.column),t.selection.selectTo(i.row,i.column+a)):(r=t.session.doc.getLine(i.row).length>r?r+1:r,t.selection.moveCursorTo(i.row,r))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:n(null,null),exec:function(t){var e=t.session.doc.getLength()-1,i=t.session.doc.getLine(e).length,n=t.selection.rangeList.ranges,o=[];n.length<1&&(n=[t.selection.getRange()]);for(var r=0;r<n.length;r++)r==n.length-1&&(n[r].end.row!==e||n[r].end.column!==i)&&o.push(new s(n[r].end.row,n[r].end.column,e,i)),0===r?(0!==n[r].start.row||0!==n[r].start.column)&&o.push(new s(0,0,n[r].start.row,n[r].start.column)):o.push(new s(n[r-1].end.row,n[r-1].end.column,n[r].start.row,n[r].start.column));t.exitMultiSelectMode(),t.clearSelection();for(r=0;r<o.length;r++)t.selection.addRange(o[r],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",exec:function(t){t.selection.clearSelection(),t.navigateLineEnd(),t.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",exec:function(t){t.selection.clearSelection();var e=t.getCursorPosition();t.selection.moveTo(e.row-1,Number.MAX_VALUE),t.insert("\n"),0===e.row&&t.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command pallete",bindKey:n("F1","F1"),exec:function(t){t.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:n(null,null),exec:function(t){t.prompt({$type:"modes"})},readOnly:!0}]})),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],(function(t,e,i){"use strict";t("./lib/fixoldbrowsers");var n=t("./lib/oop"),o=t("./lib/dom"),r=t("./lib/lang"),s=t("./lib/useragent"),a=t("./keyboard/textinput").TextInput,l=t("./mouse/mouse_handler").MouseHandler,c=t("./mouse/fold_handler").FoldHandler,h=t("./keyboard/keybinding").KeyBinding,u=t("./edit_session").EditSession,d=t("./search").Search,p=t("./range").Range,g=t("./lib/event_emitter").EventEmitter,f=t("./commands/command_manager").CommandManager,m=t("./commands/default_commands").commands,v=t("./config"),_=t("./token_iterator").TokenIterator,y=t("./clipboard"),b=function(t,e,i){var n=t.getContainerElement();this.container=n,this.renderer=t,this.id="editor"+ ++b.$uid,this.commands=new f(s.isMac?"mac":"win",m),"object"==typeof document&&(this.textInput=new a(t.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new l(this),new c(this)),this.keyBinding=new h(this),this.$search=(new d).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=r.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",(function(t,e){e._$emitInputEvent.schedule(31)})),this.setSession(e||i&&i.session||new u("")),v.resetOptions(this),i&&this.setOptions(i),v._signal("editor",this)};b.$uid=0,function(){n.implement(this,g),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=r.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(t){if(this.curOp){if(!t||this.curOp.command)return;this.prevOp=this.curOp}t||(this.previousCommand=null,t={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:t.command||{},args:t.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(t){if(this.curOp){if(t&&!1===t.returnValue)return this.curOp=null;if(1==t&&this.curOp.command&&"mouse"==this.curOp.command.name)return;if(this._signal("beforeEndOperation"),!this.curOp)return;var e=this.curOp.command,i=e&&e.scrollIntoView;if(i){switch(i){case"center-animate":i="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var n=this.selection.getRange(),o=this.renderer.layerConfig;(n.start.row>=o.lastRow||n.end.row<=o.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==i&&this.renderer.animateScrolling(this.curOp.scrollTop)}var r=this.selection.toJSON();this.curOp.selectionAfter=r,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(r),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(t){if(this.$mergeUndoDeltas){var e=this.prevOp,i=this.$mergeableCommands,n=e.command&&t.command.name==e.command.name;if("insertstring"==t.command.name){var o=t.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),n=n&&this.mergeNextCommand&&(!/\s/.test(o)||/\s/.test(e.args)),this.mergeNextCommand=!0}else n=n&&-1!==i.indexOf(t.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(n=!1),n?this.session.mergeUndoDeltas=!0:-1!==i.indexOf(t.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(t,e){if(t&&"string"==typeof t&&"ace"!=t){this.$keybindingId=t;var i=this;v.loadModule(["keybinding",t],(function(n){i.$keybindingId==t&&i.keyBinding.setKeyboardHandler(n&&n.handler),e&&e()}))}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(t),e&&e()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(t){if(this.session!=t){this.curOp&&this.endOperation(),this.curOp={};var e=this.session;if(e){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var i=this.session.getSelection();i.off("changeCursor",this.$onCursorChange),i.off("changeSelection",this.$onSelectionChange)}this.session=t,t?(this.$onDocumentChange=this.onDocumentChange.bind(this),t.on("change",this.$onDocumentChange),this.renderer.setSession(t),this.$onChangeMode=this.onChangeMode.bind(this),t.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),t.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),t.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),t.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),t.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),t.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=t.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(t)),this._signal("changeSession",{session:t,oldSession:e}),this.curOp=null,e&&e._signal("changeEditor",{oldEditor:this}),t&&t._signal("changeEditor",{editor:this}),t&&t.bgTokenizer&&t.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(t,e){return this.session.doc.setValue(t),e?1==e?this.navigateFileEnd():-1==e&&this.navigateFileStart():this.selectAll(),t},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(t){this.renderer.onResize(t)},this.setTheme=function(t,e){this.renderer.setTheme(t,e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(t){this.renderer.setStyle(t)},this.unsetStyle=function(t){this.renderer.unsetStyle(t)},this.getFontSize=function(){return this.getOption("fontSize")||o.computedStyle(this.container).fontSize},this.setFontSize=function(t){this.setOption("fontSize",t)},this.$highlightBrackets=function(){if(!this.$highlightPending){var t=this;this.$highlightPending=!0,setTimeout((function(){t.$highlightPending=!1;var e=t.session;if(e&&e.bgTokenizer){e.$bracketHighlight&&(e.$bracketHighlight.markerIds.forEach((function(t){e.removeMarker(t)})),e.$bracketHighlight=null);var i=e.getMatchingBracketRanges(t.getCursorPosition());if(!i&&e.$mode.getMatching&&(i=e.$mode.getMatching(t.session)),i){var n="ace_bracket";Array.isArray(i)?1==i.length&&(n="ace_error_bracket"):i=[i],2==i.length&&(0==p.comparePoints(i[0].end,i[1].start)?i=[p.fromPoints(i[0].start,i[1].end)]:0==p.comparePoints(i[0].start,i[1].end)&&(i=[p.fromPoints(i[1].start,i[0].end)])),e.$bracketHighlight={ranges:i,markerIds:i.map((function(t){return e.addMarker(t,n,"text")}))}}}}),50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var t=this;this.$highlightTagPending=!0,setTimeout((function(){t.$highlightTagPending=!1;var e=t.session;if(e&&e.bgTokenizer){var i=t.getCursorPosition(),n=new _(t.session,i.row,i.column),o=n.getCurrentToken();if(!o||!/\b(?:tag-open|tag-name)/.test(o.type))return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);if(-1==o.type.indexOf("tag-open")||(o=n.stepForward())){var r=o.value,s=0,a=n.stepBackward();if("<"==a.value)do{a=o,(o=n.stepForward())&&o.value===r&&-1!==o.type.indexOf("tag-name")&&("<"===a.value?s++:"</"===a.value&&s--)}while(o&&s>=0);else{do{o=a,a=n.stepBackward(),o&&o.value===r&&-1!==o.type.indexOf("tag-name")&&("<"===a.value?s++:"</"===a.value&&s--)}while(a&&s<=0);n.stepForward()}if(!o)return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);var l=n.getCurrentTokenRow(),c=n.getCurrentTokenColumn(),h=new p(l,c,l,c+o.value.length),u=e.$backMarkers[e.$tagHighlight];e.$tagHighlight&&null!=u&&0!==h.compareRange(u.range)&&(e.removeMarker(e.$tagHighlight),e.$tagHighlight=null),e.$tagHighlight||(e.$tagHighlight=e.addMarker(h,"ace_bracket","text"))}}}),50)}},this.focus=function(){var t=this;setTimeout((function(){t.isFocused()||t.textInput.focus()})),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(t){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",t))},this.onBlur=function(t){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",t))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(t){var e=this.session.$useWrapMode,i=t.start.row==t.end.row?t.end.row:1/0;this.renderer.updateLines(t.start.row,i,e),this._signal("change",t),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(t){var e=t.data;this.renderer.updateLines(e.first,e.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var t,e=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(t=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(t=!1),this.renderer.$maxLines&&1===this.session.getLength()&&!(this.renderer.$minLines>1)&&(t=!1)),e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var i=new p(t.row,t.column,t.row,1/0);i.id=e.addMarker(i,"ace_active-line","screenLine"),e.$highlightLineMarker=i}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(t){var e=this.session;if(e.$selectionMarker&&e.removeMarker(e.$selectionMarker),e.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var i=this.selection.getRange(),n=this.getSelectionStyle();e.$selectionMarker=e.addMarker(i,"ace_selection",n)}var o=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(o),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var t=this.session,e=this.getSelectionRange();if(!e.isEmpty()&&!e.isMultiLine()){var i=e.start.column,n=e.end.column,o=t.getLine(e.start.row),r=o.substring(i,n);if(!(r.length>5e3)&&/[\w\d]/.test(r)){var s=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:r}),a=o.substring(i-1,n+1);if(s.test(a))return s}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(t){this.renderer.updateText(),this._emit("changeMode",t)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var t=this.getSelectedText(),e=this.session.doc.getNewLineCharacter(),i=!1;if(!t&&this.$copyWithEmptySelection){i=!0;for(var n=this.selection.getAllRanges(),o=0;o<n.length;o++){var r=n[o];o&&n[o-1].start.row==r.start.row||(t+=this.session.getLine(r.start.row)+e)}}var s={text:t};return this._signal("copy",s),y.lineMode=i?s.text:"",s.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(t,e){var i={text:t,event:e};this.commands.exec("paste",this,i)},this.$handlePaste=function(t){"string"==typeof t&&(t={text:t}),this._signal("paste",t);var e=t.text,i=e==y.lineMode,n=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)i?n.insert({row:this.selection.lead.row,column:0},e):this.insert(e);else if(i)this.selection.rangeList.ranges.forEach((function(t){n.insert({row:t.start.row,column:0},e)}));else{var o=e.split(/\r\n|\r|\n/),r=this.selection.rangeList.ranges,s=!(2!=o.length||o[0]&&o[1]);if(o.length!=r.length||s)return this.commands.exec("insertstring",this,e);for(var a=r.length;a--;){var l=r[a];l.isEmpty()||n.remove(l),n.insert(l.start,o[a])}}},this.execCommand=function(t,e){return this.commands.exec(t,this,e)},this.insert=function(t,e){var i=this.session,n=i.getMode(),o=this.getCursorPosition();if(this.getBehavioursEnabled()&&!e){var r=n.transformAction(i.getState(o.row),"insertion",this,i,t);r&&(t!==r.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),t=r.text)}if("\t"==t&&(t=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&-1==t.indexOf("\n")){(s=new p.fromPoints(o,o)).end.column+=t.length,this.session.remove(s)}}else{var s=this.getSelectionRange();o=this.session.remove(s),this.clearSelection()}if("\n"==t||"\r\n"==t){var a=i.getLine(o.row);if(o.column>a.search(/\S|$/)){var l=a.substr(o.column).search(/\S|$/);i.doc.removeInLine(o.row,o.column,o.column+l)}}this.clearSelection();var c=o.column,h=i.getState(o.row),u=(a=i.getLine(o.row),n.checkOutdent(h,a,t));if(i.insert(o,t),r&&r.selection&&(2==r.selection.length?this.selection.setSelectionRange(new p(o.row,c+r.selection[0],o.row,c+r.selection[1])):this.selection.setSelectionRange(new p(o.row+r.selection[0],r.selection[1],o.row+r.selection[2],r.selection[3]))),i.getDocument().isNewLine(t)){var d=n.getNextLineIndent(h,a.slice(0,o.column),i.getTabString());i.insert({row:o.row+1,column:0},d)}u&&n.autoOutdent(h,i,o.row)},this.onTextInput=function(t,e){if(!e)return this.keyBinding.onTextInput(t);this.startOperation({command:{name:"insertstring"}});var i=this.applyComposition.bind(this,t,e);this.selection.rangeCount?this.forEachSelection(i):i(),this.endOperation()},this.applyComposition=function(t,e){var i;(e.extendLeft||e.extendRight)&&((i=this.selection.getRange()).start.column-=e.extendLeft,i.end.column+=e.extendRight,this.selection.setRange(i),!t&&!i.isEmpty()&&this.remove());((t||!this.selection.isEmpty())&&this.insert(t,!0),e.restoreStart||e.restoreEnd)&&((i=this.selection.getRange()).start.column-=e.restoreStart,i.end.column-=e.restoreEnd,this.selection.setRange(i))},this.onCommandKey=function(t,e,i){return this.keyBinding.onCommandKey(t,e,i)},this.setOverwrite=function(t){this.session.setOverwrite(t)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(t){this.setOption("scrollSpeed",t)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(t){this.setOption("dragDelay",t)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(t){this.setOption("selectionStyle",t)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(t){this.setOption("highlightActiveLine",t)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(t){this.setOption("highlightSelectedWord",t)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(t){this.renderer.setAnimatedScroll(t)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(t){this.renderer.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(t){this.renderer.setDisplayIndentGuides(t)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(t){this.renderer.setShowPrintMargin(t)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(t){this.renderer.setPrintMarginColumn(t)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(t){this.setOption("readOnly",t)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(t){this.setOption("behavioursEnabled",t)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(t){this.setOption("wrapBehavioursEnabled",t)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(t){this.setOption("showFoldWidgets",t)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(t){this.selection.isEmpty()&&("left"==t?this.selection.selectLeft():this.selection.selectRight());var e=this.getSelectionRange();if(this.getBehavioursEnabled()){var i=this.session,n=i.getState(e.start.row),o=i.getMode().transformAction(n,"deletion",this,i,e);if(0===e.end.column){var r=i.getTextRange(e);if("\n"==r[r.length-1]){var s=i.getLine(e.end.row);/^\s+$/.test(s)&&(e.end.column=s.length)}}o&&(e=o)}this.session.remove(e),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var t=this.getSelectionRange();t.start.column==t.end.column&&t.start.row==t.end.row&&(t.end.column=0,t.end.row++),this.session.remove(t),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var t=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(t)},this.transposeLetters=function(){if(this.selection.isEmpty()){var t=this.getCursorPosition(),e=t.column;if(0!==e){var i,n,o=this.session.getLine(t.row);e<o.length?(i=o.charAt(e)+o.charAt(e-1),n=new p(t.row,e-1,t.row,e+1)):(i=o.charAt(e-1)+o.charAt(e-2),n=new p(t.row,e-2,t.row,e)),this.session.replace(n,i),this.session.selection.moveToPosition(n.end)}}},this.toLowerCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),i=this.session.getTextRange(e);this.session.replace(e,i.toLowerCase()),this.selection.setSelectionRange(t)},this.toUpperCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),i=this.session.getTextRange(e);this.session.replace(e,i.toUpperCase()),this.selection.setSelectionRange(t)},this.indent=function(){var t=this.session,e=this.getSelectionRange();if(!(e.start.row<e.end.row)){if(e.start.column<e.end.column){var i=t.getTextRange(e);if(!/^\s+$/.test(i)){h=this.$getSelectedRows();return void t.indentRows(h.first,h.last,"\t")}}var n=t.getLine(e.start.row),o=e.start,s=t.getTabSize(),a=t.documentToScreenColumn(o.row,o.column);if(this.session.getUseSoftTabs())var l=s-a%s,c=r.stringRepeat(" ",l);else{for(l=a%s;" "==n[e.start.column-1]&&l;)e.start.column--,l--;this.selection.setSelectionRange(e),c="\t"}return this.insert(c)}var h=this.$getSelectedRows();t.indentRows(h.first,h.last,"\t")},this.blockIndent=function(){var t=this.$getSelectedRows();this.session.indentRows(t.first,t.last,"\t")},this.blockOutdent=function(){var t=this.session.getSelection();this.session.outdentRows(t.getRange())},this.sortLines=function(){for(var t=this.$getSelectedRows(),e=this.session,i=[],n=t.first;n<=t.last;n++)i.push(e.getLine(n));i.sort((function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0}));var o=new p(0,0,0,0);for(n=t.first;n<=t.last;n++){var r=e.getLine(n);o.start.row=n,o.end.row=n,o.end.column=r.length,e.replace(o,i[n-t.first])}},this.toggleCommentLines=function(){var t=this.session.getState(this.getCursorPosition().row),e=this.$getSelectedRows();this.session.getMode().toggleCommentLines(t,this.session,e.first,e.last)},this.toggleBlockComment=function(){var t=this.getCursorPosition(),e=this.session.getState(t.row),i=this.getSelectionRange();this.session.getMode().toggleBlockComment(e,this.session,i,t)},this.getNumberAt=function(t,e){var i=/[\-]?[0-9]+(?:\.[0-9]+)?/g;i.lastIndex=0;for(var n=this.session.getLine(t);i.lastIndex<e;){var o=i.exec(n);if(o.index<=e&&o.index+o[0].length>=e)return{value:o[0],start:o.index,end:o.index+o[0].length}}return null},this.modifyNumber=function(t){var e=this.selection.getCursor().row,i=this.selection.getCursor().column,n=new p(e,i-1,e,i),o=this.session.getTextRange(n);if(!isNaN(parseFloat(o))&&isFinite(o)){var r=this.getNumberAt(e,i);if(r){var s=r.value.indexOf(".")>=0?r.start+r.value.indexOf(".")+1:r.end,a=r.start+r.value.length-s,l=parseFloat(r.value);l*=Math.pow(10,a),s!==r.end&&i<s?t*=Math.pow(10,r.end-i-1):t*=Math.pow(10,r.end-i),l+=t;var c=(l/=Math.pow(10,a)).toFixed(a),h=new p(e,r.start,e,r.end);this.session.replace(h,c),this.moveCursorTo(e,Math.max(r.start+1,i+c.length-r.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var t=this.selection.getCursor().row,e=this.selection.getCursor().column;this.selection.selectWord();var i=this.getSelectedText(),n=this.selection.getWordRange().start.column,o=i.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),s=e-n-1;s<0&&(s=0);var a=0,l=0,c=this;i.match(/[A-Za-z0-9_]+/)&&o.forEach((function(e,o){l=a+e.length,s>=a&&s<=l&&(i=e,c.selection.clearSelection(),c.moveCursorTo(t,a+n),c.selection.selectTo(t,l+n)),a=l}));for(var h,u=this.$toggleWordPairs,d=0;d<u.length;d++)for(var p=u[d],g=0;g<=1;g++){var f=+!g,m=i.match(new RegExp("^\\s?_?("+r.escapeRegExp(p[g])+")\\s?$","i"));if(m)i.match(new RegExp("([_]|^|\\s)("+r.escapeRegExp(m[1])+")($|\\s)","g"))&&(h=i.replace(new RegExp(r.escapeRegExp(p[g]),"i"),(function(t){var e=p[f];return t.toUpperCase()==t?e=e.toUpperCase():t.charAt(0).toUpperCase()==t.charAt(0)&&(e=e.substr(0,0)+p[f].charAt(0).toUpperCase()+e.substr(1)),e})),this.insert(h),h="")}},this.removeLines=function(){var t=this.$getSelectedRows();this.session.removeFullLines(t.first,t.last),this.clearSelection()},this.duplicateSelection=function(){var t=this.selection,e=this.session,i=t.getRange(),n=t.isBackwards();if(i.isEmpty()){var o=i.start.row;e.duplicateLines(o,o)}else{var r=n?i.start:i.end,s=e.insert(r,e.getTextRange(i),!1);i.start=r,i.end=s,t.setSelectionRange(i,n)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(t,e,i){return this.session.moveText(t,e,i)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(t,e){var i,n,o=this.selection;if(!o.inMultiSelectMode||this.inVirtualSelectionMode){var r=o.toOrientedRange();i=this.$getSelectedRows(r),n=this.session.$moveLines(i.first,i.last,e?0:t),e&&-1==t&&(n=0),r.moveBy(n,0),o.fromOrientedRange(r)}else{var s=o.rangeList.ranges;o.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var a=0,l=0,c=s.length,h=0;h<c;h++){var u=h;s[h].moveBy(a,0);for(var d=(i=this.$getSelectedRows(s[h])).first,p=i.last;++h<c;){l&&s[h].moveBy(l,0);var g=this.$getSelectedRows(s[h]);if(e&&g.first!=p)break;if(!e&&g.first>p+1)break;p=g.last}for(h--,a=this.session.$moveLines(d,p,e?0:t),e&&-1==t&&(u=h+1);u<=h;)s[u].moveBy(a,0),u++;e||(a=0),l+=a}o.fromOrientedRange(o.ranges[0]),o.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(t){return t=(t||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(t.start.row),last:this.session.getRowFoldEnd(t.end.row)}},this.onCompositionStart=function(t){this.renderer.showComposition(t)},this.onCompositionUpdate=function(t){this.renderer.setCompositionText(t)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(t){return t>=this.getFirstVisibleRow()&&t<=this.getLastVisibleRow()},this.isRowFullyVisible=function(t){return t>=this.renderer.getFirstFullyVisibleRow()&&t<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(t,e){var i=this.renderer,n=this.renderer.layerConfig,o=t*Math.floor(n.height/n.lineHeight);!0===e?this.selection.$moveSelection((function(){this.moveCursorBy(o,0)})):!1===e&&(this.selection.moveCursorBy(o,0),this.selection.clearSelection());var r=i.scrollTop;i.scrollBy(0,o*n.lineHeight),null!=e&&i.scrollCursorIntoView(null,.5),i.animateScrolling(r)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(t){this.renderer.scrollToRow(t)},this.scrollToLine=function(t,e,i,n){this.renderer.scrollToLine(t,e,i,n)},this.centerSelection=function(){var t=this.getSelectionRange(),e={row:Math.floor(t.start.row+(t.end.row-t.start.row)/2),column:Math.floor(t.start.column+(t.end.column-t.start.column)/2)};this.renderer.alignCursor(e,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(t,e){this.selection.moveCursorTo(t,e)},this.moveCursorToPosition=function(t){this.selection.moveCursorToPosition(t)},this.jumpToMatching=function(t,e){var i=this.getCursorPosition(),n=new _(this.session,i.row,i.column),o=n.getCurrentToken(),r=o||n.stepForward();if(r){var s,a,l=!1,c={},h=i.column-r.start,u={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(r.value.match(/[{}()\[\]]/g)){for(;h<r.value.length&&!l;h++)if(u[r.value[h]])switch(a=u[r.value[h]]+"."+r.type.replace("rparen","lparen"),isNaN(c[a])&&(c[a]=0),r.value[h]){case"(":case"[":case"{":c[a]++;break;case")":case"]":case"}":c[a]--,-1===c[a]&&(s="bracket",l=!0)}}else-1!==r.type.indexOf("tag-name")&&(isNaN(c[r.value])&&(c[r.value]=0),"<"===o.value?c[r.value]++:"</"===o.value&&c[r.value]--,-1===c[r.value]&&(s="tag",l=!0));l||(o=r,r=n.stepForward(),h=0)}while(r&&!l);if(s){var d,g;if("bracket"===s)(d=this.session.getBracketRange(i))||(g=(d=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+h-1,n.getCurrentTokenRow(),n.getCurrentTokenColumn()+h-1)).start,(e||g.row===i.row&&Math.abs(g.column-i.column)<2)&&(d=this.session.getBracketRange(g)));else if("tag"===s){if(!r||-1===r.type.indexOf("tag-name"))return;var f=r.value;if(0===(d=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2,n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2)).compare(i.row,i.column)){l=!1;do{r=o,(o=n.stepBackward())&&(-1!==o.type.indexOf("tag-close")&&d.setEnd(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1),r.value===f&&-1!==r.type.indexOf("tag-name")&&("<"===o.value?c[f]++:"</"===o.value&&c[f]--,0===c[f]&&(l=!0)))}while(o&&!l)}r&&r.type.indexOf("tag-name")&&((g=d.start).row==i.row&&Math.abs(g.column-i.column)<2&&(g=d.end))}(g=d&&d.cursor||g)&&(t?d&&e?this.selection.setRange(d):d&&d.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(g.row,g.column):this.selection.moveTo(g.row,g.column))}}},this.gotoLine=function(t,e,i){this.selection.clearSelection(),this.session.unfold({row:t-1,column:e||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(t-1,e||0),this.isRowFullyVisible(t-1)||this.scrollToLine(t-1,!0,i)},this.navigateTo=function(t,e){this.selection.moveTo(t,e)},this.navigateUp=function(t){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(-t||-1,0)},this.navigateDown=function(t){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(t||1,0)},this.navigateLeft=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorLeft();else{var e=this.getSelectionRange().start;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateRight=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorRight();else{var e=this.getSelectionRange().end;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(t,e){e&&this.$search.set(e);var i=this.$search.find(this.session),n=0;return i?(this.$tryReplace(i,t)&&(n=1),this.selection.setSelectionRange(i),this.renderer.scrollSelectionIntoView(i.start,i.end),n):n},this.replaceAll=function(t,e){e&&this.$search.set(e);var i=this.$search.findAll(this.session),n=0;if(!i.length)return n;var o=this.getSelectionRange();this.selection.moveTo(0,0);for(var r=i.length-1;r>=0;--r)this.$tryReplace(i[r],t)&&n++;return this.selection.setSelectionRange(o),n},this.$tryReplace=function(t,e){var i=this.session.getTextRange(t);return null!==(e=this.$search.replace(i,e))?(t.end=this.session.replace(t,e),t):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(t,e,i){e||(e={}),"string"==typeof t||t instanceof RegExp?e.needle=t:"object"==typeof t&&n.mixin(e,t);var o=this.selection.getRange();null==e.needle&&((t=this.session.getTextRange(o)||this.$search.$options.needle)||(o=this.session.getWordRange(o.start.row,o.start.column),t=this.session.getTextRange(o)),this.$search.set({needle:t})),this.$search.set(e),e.start||this.$search.set({start:o});var r=this.$search.find(this.session);return e.preventScroll?r:r?(this.revealRange(r,i),r):(e.backwards?o.start=o.end:o.end=o.start,void this.selection.setRange(o))},this.findNext=function(t,e){this.find({skipCurrent:!0,backwards:!1},t,e)},this.findPrevious=function(t,e){this.find(t,{skipCurrent:!0,backwards:!0},e)},this.revealRange=function(t,e){this.session.unfold(t),this.selection.setSelectionRange(t);var i=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(t.start,t.end,.5),!1!==e&&this.renderer.animateScrolling(i)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.session=null},this.setAutoScrollEditorIntoView=function(t){if(t){var e,i=this,n=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var o=this.$scrollAnchor;o.style.cssText="position:absolute",this.container.insertBefore(o,this.container.firstChild);var r=this.on("changeSelection",(function(){n=!0})),s=this.renderer.on("beforeRender",(function(){n&&(e=i.renderer.container.getBoundingClientRect())})),a=this.renderer.on("afterRender",(function(){if(n&&e&&(i.isFocused()||i.searchBox&&i.searchBox.isFocused())){var t=i.renderer,r=t.$cursorLayer.$pixelPos,s=t.layerConfig,a=r.top-s.offset;null!=(n=r.top>=0&&a+e.top<0||!(r.top<s.height&&r.top+e.top+s.lineHeight>window.innerHeight)&&null)&&(o.style.top=a+"px",o.style.left=r.left+"px",o.style.height=s.lineHeight+"px",o.scrollIntoView(n)),n=e=null}}));this.setAutoScrollEditorIntoView=function(t){t||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",r),this.renderer.off("afterRender",a),this.renderer.off("beforeRender",s))}}},this.$resetCursorStyle=function(){var t=this.$cursorStyle||"ace",e=this.renderer.$cursorLayer;e&&(e.setSmoothBlinking(/smooth/.test(t)),e.isBlinking=!this.$readOnly&&"wide"!=t,o.setCssClass(e.element,"ace_slim-cursors",/slim/.test(t)))},this.prompt=function(t,e,i){var n=this;v.loadModule("./ext/prompt",(function(o){o.prompt(n,t,e,i)}))}}.call(b.prototype),v.defineOptions(b.prototype,"editor",{selectionStyle:{set:function(t){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:t})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(t){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(t){this.textInput.setReadOnly(t),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(t){this.textInput.setCopyWithEmptySelection(t)},initialValue:!1},cursorStyle:{set:function(t){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(t){this.setAutoScrollEditorIntoView(t)}},keyboardHandler:{set:function(t){this.setKeyboardHandler(t)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(t){this.session.setValue(t)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(t){this.setSession(t)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(t){this.renderer.$gutterLayer.setShowLineNumbers(t),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),t&&this.$relativeLineNumbers?w.attach(this):w.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(t){this.$showLineNumbers&&t?w.attach(this):w.detach(this)}},placeholder:{set:function(t){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var t=this.renderer.$composition||this.getValue();if(t&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),o.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!t&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),o.addCssClass(this.container,"ace_hasPlaceholder");var e=o.createElement("div");e.className="ace_placeholder",e.textContent=this.$placeholder||"",this.renderer.placeholderNode=e,this.renderer.content.appendChild(this.renderer.placeholderNode)}}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var w={getText:function(t,e){return(Math.abs(t.selection.lead.row-e)||e+1+(e<9?"·":""))+""},getWidth:function(t,e,i){return Math.max(e.toString().length,(i.lastRow+1).toString().length,2)*i.characterWidth},update:function(t,e){e.renderer.$loop.schedule(e.renderer.CHANGE_GUTTER)},attach:function(t){t.renderer.$gutterLayer.$renderer=this,t.on("changeSelection",this.update),this.update(null,t)},detach:function(t){t.renderer.$gutterLayer.$renderer==this&&(t.renderer.$gutterLayer.$renderer=null),t.off("changeSelection",this.update),this.update(null,t)}};e.Editor=b})),ace.define("ace/undomanager",["require","exports","module","ace/range"],(function(t,e,i){"use strict";function n(t){return{row:t.row,column:t.column}}function o(t){if(t=t||this,Array.isArray(t))return t.map(o).join("\n");var e="";return t.action?(e="insert"==t.action?"+":"-",e+="["+t.lines+"]"):t.value&&(e=Array.isArray(t.value)?t.value.map(r).join("\n"):r(t.value)),t.start&&(e+=r(t)),(t.id||t.rev)&&(e+="\t("+(t.id||t.rev)+")"),e}function r(t){return t.start.row+":"+t.start.column+"=>"+t.end.row+":"+t.end.column}function s(t,e){var i="insert"==t.action,n="insert"==e.action;if(i&&n)if(f(e.start,t.end)>=0)c(e,t,-1);else{if(!(f(e.start,t.start)<=0))return null;c(t,e,1)}else if(i&&!n)if(f(e.start,t.end)>=0)c(e,t,-1);else{if(!(f(e.end,t.start)<=0))return null;c(t,e,-1)}else if(!i&&n)if(f(e.start,t.start)>=0)c(e,t,1);else{if(!(f(e.start,t.start)<=0))return null;c(t,e,1)}else if(!i&&!n)if(f(e.start,t.start)>=0)c(e,t,1);else{if(!(f(e.end,t.start)<=0))return null;c(t,e,-1)}return[e,t]}function a(t,e){for(var i=t.length;i--;)for(var n=0;n<e.length;n++)if(!s(t[i],e[n])){for(;i<t.length;){for(;n--;)s(e[n],t[i]);n=e.length,i++}return[t,e]}return t.selectionBefore=e.selectionBefore=t.selectionAfter=e.selectionAfter=null,[e,t]}function l(t,e){var i="insert"==t.action,n="insert"==e.action;if(i&&n)f(t.start,e.start)<0?c(e,t,1):c(t,e,1);else if(i&&!n)f(t.start,e.end)>=0?c(t,e,-1):(f(t.start,e.start)<=0||c(t,g.fromPoints(e.start,t.start),-1),c(e,t,1));else if(!i&&n)f(e.start,t.end)>=0?c(e,t,-1):(f(e.start,t.start)<=0||c(e,g.fromPoints(t.start,e.start),-1),c(t,e,1));else if(!i&&!n)if(f(e.start,t.end)>=0)c(e,t,-1);else{var o,r;if(!(f(e.end,t.start)<=0))return f(t.start,e.start)<0&&(o=t,t=u(t,e.start)),f(t.end,e.end)>0&&(r=u(t,e.end)),h(e.end,t.start,t.end,-1),r&&!o&&(t.lines=r.lines,t.start=r.start,t.end=r.end,r=t),[e,o,r].filter(Boolean);c(t,e,-1)}return[e,t]}function c(t,e,i){h(t.start,e.start,e.end,i),h(t.end,e.start,e.end,i)}function h(t,e,i,n){t.row==(1==n?e:i).row&&(t.column+=n*(i.column-e.column)),t.row+=n*(i.row-e.row)}function u(t,e){var i=t.lines,o=t.end;t.end=n(e);var r=t.end.row-t.start.row,s=i.splice(r,i.length),a=r?e.column:e.column-t.start.column;return i.push(s[0].substring(0,a)),s[0]=s[0].substr(a),{start:n(e),end:o,lines:s,action:t.action}}function d(t,e){e=function(t){return{start:n(t.start),end:n(t.end),action:t.action,lines:t.lines.slice()}}(e);for(var i=t.length;i--;){for(var o=t[i],r=0;r<o.length;r++){var s=l(o[r],e);e=s[0],2!=s.length&&(s[2]?(o.splice(r+1,1,s[1],s[2]),r++):s[1]||(o.splice(r,1),r--))}o.length||t.splice(i,1)}return t}var p=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(t){this.$session=t},this.add=function(t,e,i){this.$fromUndo||t!=this.$lastDelta&&(this.$keepRedoStack||(this.$redoStack.length=0),!1!==e&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),t.id=this.$rev=++this.$maxRev),"remove"!=t.action&&"insert"!=t.action||(this.$lastDelta=t),this.lastDeltas.push(t))},this.addSelection=function(t,e){this.selections.push({value:t,rev:e||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(t,e){null==e&&(e=this.$rev+1);for(var i=this.$undoStack,n=i.length;n--;){var o=i[n][0];if(o.id<=t)break;o.id<e&&(o.ignore=!0)}this.lastDeltas=null},this.getSelection=function(t,e){for(var i=this.selections,n=i.length;n--;){var o=i[n];if(o.rev<t)return e&&(o=i[n+1]),o}},this.getRevision=function(){return this.$rev},this.getDeltas=function(t,e){null==e&&(e=this.$rev+1);for(var i=this.$undoStack,n=null,o=0,r=i.length;r--;){var s=i[r][0];if(s.id<e&&!n&&(n=r+1),s.id<=t){o=r+1;break}}return i.slice(o,n)},this.getChangedRanges=function(t,e){null==e&&(e=this.$rev+1)},this.getChangedLines=function(t,e){null==e&&(e=this.$rev+1)},this.validateDeltaBoundaries=function(t,e,i){return!!t&&t.every((function(t){var n=t.action;switch(i&&"insert"===t.action&&(n="remove"),i&&"remove"===t.action&&(n="insert"),n){case"insert":return t.start.row<=e;case"remove":return t.start.row<e&&t.end.row<e;default:return!0}}))},this.undo=function(t,e){this.lastDeltas=null;var i=this.$undoStack;if(function(t,e){for(var i=e;i--;){var n=t[i];if(n&&!n[0].ignore){for(;i<e-1;){var o=a(t[i],t[i+1]);t[i]=o[0],t[i+1]=o[1],i++}return!0}}}(i,i.length)){t||(t=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var n=i.pop(),o=null;return this.validateDeltaBoundaries(n,t.getLength(),!0)&&(o=t.undoChanges(n,e),this.$redoStack.push(n),this.$syncRev()),this.$fromUndo=!1,o}},this.redo=function(t,e){if(this.lastDeltas=null,t||(t=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var i=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);(function(t,e){for(var i=0;i<e.length;i++)for(var n=e[i],o=0;o<n.length;o++)d(t,n[o])})(this.$redoStack,i),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach((function(t){t[0].id=++this.$maxRev}),this)}var n=this.$redoStack.pop(),o=null;return this.validateDeltaBoundaries(n,t.getLength(),!1)&&(o=t.redoChanges(n,e),this.$undoStack.push(n),this.$syncRev()),this.$fromUndo=!1,o},this.$syncRev=function(){var t=this.$undoStack,e=t[t.length-1],i=e&&e[0].id||0;this.$redoStackBaseRev=i,this.$rev=i},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(t){null==t&&(t=this.$rev),this.mark=t},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(t){return t?o(t):o(this.$undoStack)+"\n---\n"+o(this.$redoStack)}}).call(p.prototype);var g=t("./range").Range,f=g.comparePoints;g.comparePoints;e.UndoManager=p})),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],(function(t,e,i){"use strict";var n=t("../lib/dom"),o=function(t,e){this.element=t,this.canvasHeight=e||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(t){n.translate(this.element,0,-t.firstRowScreen*t.lineHeight%this.canvasHeight-t.offset*this.$offsetCoefficient)},this.pageChanged=function(t,e){return Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)!==Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)},this.computeLineTop=function(t,e,i){var n=e.firstRowScreen*e.lineHeight,o=Math.floor(n/this.canvasHeight);return i.documentToScreenRow(t,0)*e.lineHeight-o*this.canvasHeight},this.computeLineHeight=function(t,e,i){return e.lineHeight*i.getRowLineCount(t)},this.getLength=function(){return this.cells.length},this.get=function(t){return this.cells[t]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(t){if(Array.isArray(t)){this.cells.push.apply(this.cells,t);for(var e=n.createFragment(this.element),i=0;i<t.length;i++)e.appendChild(t[i].element);this.element.appendChild(e)}else this.cells.push(t),this.element.appendChild(t.element)},this.unshift=function(t){if(Array.isArray(t)){this.cells.unshift.apply(this.cells,t);for(var e=n.createFragment(this.element),i=0;i<t.length;i++)e.appendChild(t[i].element);this.element.firstChild?this.element.insertBefore(e,this.element.firstChild):this.element.appendChild(e)}else this.cells.unshift(t),this.element.insertAdjacentElement("afterbegin",t.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(t){t&&(t.element.remove(),this.cellCache.push(t))},this.createCell=function(t,e,i,o){var r=this.cellCache.pop();if(!r){var s=n.createElement("div");o&&o(s),this.element.appendChild(s),r={element:s,text:"",row:t}}return r.row=t,r}}).call(o.prototype),e.Lines=o})),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],(function(t,e,i){"use strict";function n(t){var e=document.createTextNode("");t.appendChild(e);var i=o.createElement("span");return t.appendChild(i),t}var o=t("../lib/dom"),r=t("../lib/oop"),s=t("../lib/lang"),a=t("../lib/event_emitter").EventEmitter,l=t("./lines").Lines,c=function(t){this.element=o.createElement("div"),this.element.className="ace_layer ace_gutter-layer",t.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new l(this.element),this.$lines.$offsetCoefficient=1};(function(){r.implement(this,a),this.setSession=function(t){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=t,t&&t.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(t,e)},this.setAnnotations=function(t){this.$annotations=[];for(var e=0;e<t.length;e++){var i=t[e],n=i.row,o=this.$annotations[n];o||(o=this.$annotations[n]={text:[]});var r=i.text;r=r?s.escapeHTML(r):i.html||"",-1===o.text.indexOf(r)&&o.text.push(r);var a=i.type;"error"==a?o.className=" ace_error":"warning"==a&&" ace_error"!=o.className?o.className=" ace_warning":"info"==a&&!o.className&&(o.className=" ace_info")}},this.$updateAnnotations=function(t){if(this.$annotations.length){var e=t.start.row,i=t.end.row-e;if(0!==i)if("remove"==t.action)this.$annotations.splice(e,i+1,null);else{var n=new Array(i+1);n.unshift(e,1),this.$annotations.splice.apply(this.$annotations,n)}}},this.update=function(t){this.config=t;var e=this.session,i=t.firstRow,o=Math.min(t.lastRow+t.gutterOffset,e.getLength()-1);this.oldLastRow=o,this.config=t,this.$lines.moveContainer(t),this.$updateCursorRow();for(var r=e.getNextFoldLine(i),s=r?r.start.row:1/0,a=null,l=-1,c=i;;){if(c>s&&(c=r.end.row+1,s=(r=e.getNextFoldLine(c,r))?r.start.row:1/0),c>o){for(;this.$lines.getLength()>l+1;)this.$lines.pop();break}(a=this.$lines.get(++l))?a.row=c:(a=this.$lines.createCell(c,t,this.session,n),this.$lines.push(a)),this.$renderCell(a,t,r,c),c++}this._signal("afterRender"),this.$updateGutterWidth(t)},this.$updateGutterWidth=function(t){var e=this.session,i=e.gutterRenderer||this.$renderer,n=e.$firstLineNumber,o=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||e.$useWrapMode)&&(o=e.getLength()+n-1);var r=i?i.getWidth(e,o,t):o.toString().length*t.characterWidth,s=this.$padding||this.$computePadding();(r+=s.left+s.right)!==this.gutterWidth&&!isNaN(r)&&(this.gutterWidth=r,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",r))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var t=this.session.selection.getCursor();this.$cursorRow!==t.row&&(this.$cursorRow=t.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var t=this.session.selection.cursor.row;if(this.$cursorRow=t,!this.$cursorCell||this.$cursorCell.row!=t){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var e=this.$lines.cells;this.$cursorCell=null;for(var i=0;i<e.length;i++){var n=e[i];if(n.row>=this.$cursorRow){if(n.row>this.$cursorRow){var o=this.session.getFoldLine(this.$cursorRow);if(!(i>0&&o&&o.start.row==e[i-1].row))break;n=e[i-1]}n.element.className="ace_gutter-active-line "+n.element.className,this.$cursorCell=n;break}}}}},this.scrollLines=function(t){var e=this.config;if(this.config=t,this.$updateCursorRow(),this.$lines.pageChanged(e,t))return this.update(t);this.$lines.moveContainer(t);var i=Math.min(t.lastRow+t.gutterOffset,this.session.getLength()-1),n=this.oldLastRow;if(this.oldLastRow=i,!e||n<t.firstRow)return this.update(t);if(i<e.firstRow)return this.update(t);if(e.firstRow<t.firstRow)for(var o=this.session.getFoldedRowCount(e.firstRow,t.firstRow-1);o>0;o--)this.$lines.shift();if(n>i)for(o=this.session.getFoldedRowCount(i+1,n);o>0;o--)this.$lines.pop();t.firstRow<e.firstRow&&this.$lines.unshift(this.$renderLines(t,t.firstRow,e.firstRow-1)),i>n&&this.$lines.push(this.$renderLines(t,n+1,i)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(t)},this.$renderLines=function(t,e,i){for(var o=[],r=e,s=this.session.getNextFoldLine(r),a=s?s.start.row:1/0;r>a&&(r=s.end.row+1,a=(s=this.session.getNextFoldLine(r,s))?s.start.row:1/0),!(r>i);){var l=this.$lines.createCell(r,t,this.session,n);this.$renderCell(l,t,s,r),o.push(l),r++}return o},this.$renderCell=function(t,e,i,n){var r=t.element,s=this.session,a=r.childNodes[0],l=r.childNodes[1],c=s.$firstLineNumber,h=s.$breakpoints,u=s.$decorations,d=s.gutterRenderer||this.$renderer,p=this.$showFoldWidgets&&s.foldWidgets,g=i?i.start.row:Number.MAX_VALUE,f="ace_gutter-cell ";if(this.$highlightGutterLine&&(n==this.$cursorRow||i&&n<this.$cursorRow&&n>=g&&this.$cursorRow<=i.end.row)&&(f+="ace_gutter-active-line ",this.$cursorCell!=t&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=t)),h[n]&&(f+=h[n]),u[n]&&(f+=u[n]),this.$annotations[n]&&(f+=this.$annotations[n].className),r.className!=f&&(r.className=f),p){var m=p[n];null==m&&(m=p[n]=s.getFoldWidget(n))}if(m){f="ace_fold-widget ace_"+m;"start"==m&&n==g&&n<i.end.row?f+=" ace_closed":f+=" ace_open",l.className!=f&&(l.className=f);var v=e.lineHeight+"px";o.setStyle(l.style,"height",v),o.setStyle(l.style,"display","inline-block")}else l&&o.setStyle(l.style,"display","none");var _=(d?d.getText(s,n):n+c).toString();return _!==a.data&&(a.data=_),o.setStyle(t.element.style,"height",this.$lines.computeLineHeight(n,e,s)+"px"),o.setStyle(t.element.style,"top",this.$lines.computeLineTop(n,e,s)+"px"),t.text=_,t},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(t){this.$highlightGutterLine=t},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(t){this.$renderer=!t&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(t){t?o.addCssClass(this.element,"ace_folding-enabled"):o.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=t,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var t=o.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(t.borderLeftWidth)||0)+(parseInt(t.paddingLeft)||0)+1,this.$padding.right=(parseInt(t.borderRightWidth)||0)+(parseInt(t.paddingRight)||0),this.$padding},this.getRegion=function(t){var e=this.$padding||this.$computePadding(),i=this.element.getBoundingClientRect();return t.x<e.left+i.left?"markers":this.$showFoldWidgets&&t.x>i.right-e.right?"foldWidgets":void 0}}).call(c.prototype),e.Gutter=c})),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],(function(t,e,i){"use strict";var n=t("../range").Range,o=t("../lib/dom"),r=function(t){this.element=o.createElement("div"),this.element.className="ace_layer ace_marker-layer",t.appendChild(this.element)};(function(){function t(t,e,i,n){return(t?1:0)|(e?2:0)|(i?4:0)|(n?8:0)}this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setMarkers=function(t){this.markers=t},this.elt=function(t,e){var i=-1!=this.i&&this.element.childNodes[this.i];i?this.i++:(i=document.createElement("div"),this.element.appendChild(i),this.i=-1),i.style.cssText=e,i.className=t},this.update=function(t){if(t){var e;for(var i in this.config=t,this.i=0,this.markers){var n=this.markers[i];if(n.range){var o=n.range.clipRows(t.firstRow,t.lastRow);if(!o.isEmpty())if(o=o.toScreenRange(this.session),n.renderer){var r=this.$getTop(o.start.row,t),s=this.$padding+o.start.column*t.characterWidth;n.renderer(e,o,s,r,t)}else"fullLine"==n.type?this.drawFullLineMarker(e,o,n.clazz,t):"screenLine"==n.type?this.drawScreenLineMarker(e,o,n.clazz,t):o.isMultiLine()?"text"==n.type?this.drawTextMarker(e,o,n.clazz,t):this.drawMultiLineMarker(e,o,n.clazz,t):this.drawSingleLineMarker(e,o,n.clazz+" ace_start ace_br15",t)}else n.update(e,this,this.session,t)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(t,e){return(t-e.firstRowScreen)*e.lineHeight},this.drawTextMarker=function(e,i,o,r,s){for(var a=this.session,l=i.start.row,c=i.end.row,h=l,u=0,d=0,p=a.getScreenLastRowColumn(h),g=new n(h,i.start.column,h,d);h<=c;h++)g.start.row=g.end.row=h,g.start.column=h==l?i.start.column:a.getRowWrapIndent(h),g.end.column=p,u=d,d=p,p=h+1<c?a.getScreenLastRowColumn(h+1):h==c?0:i.end.column,this.drawSingleLineMarker(e,g,o+(h==l?" ace_start":"")+" ace_br"+t(h==l||h==l+1&&i.start.column,u<d,d>p,h==c),r,h==c?0:1,s)},this.drawMultiLineMarker=function(t,e,i,n,o){var r=this.$padding,s=n.lineHeight,a=this.$getTop(e.start.row,n),l=r+e.start.column*n.characterWidth;(o=o||"",this.session.$bidiHandler.isBidiRow(e.start.row))?((c=e.clone()).end.row=c.start.row,c.end.column=this.session.getLine(c.start.row).length,this.drawBidiSingleLineMarker(t,c,i+" ace_br1 ace_start",n,null,o)):this.elt(i+" ace_br1 ace_start","height:"+s+"px;right:0;top:"+a+"px;left:"+l+"px;"+(o||""));if(this.session.$bidiHandler.isBidiRow(e.end.row)){var c;(c=e.clone()).start.row=c.end.row,c.start.column=0,this.drawBidiSingleLineMarker(t,c,i+" ace_br12",n,null,o)}else{a=this.$getTop(e.end.row,n);var h=e.end.column*n.characterWidth;this.elt(i+" ace_br12","height:"+s+"px;width:"+h+"px;top:"+a+"px;left:"+r+"px;"+(o||""))}if(!((s=(e.end.row-e.start.row-1)*n.lineHeight)<=0)){a=this.$getTop(e.start.row+1,n);var u=(e.start.column?1:0)|(e.end.column?0:8);this.elt(i+(u?" ace_br"+u:""),"height:"+s+"px;right:0;top:"+a+"px;left:"+r+"px;"+(o||""))}},this.drawSingleLineMarker=function(t,e,i,n,o,r){if(this.session.$bidiHandler.isBidiRow(e.start.row))return this.drawBidiSingleLineMarker(t,e,i,n,o,r);var s=n.lineHeight,a=(e.end.column+(o||0)-e.start.column)*n.characterWidth,l=this.$getTop(e.start.row,n),c=this.$padding+e.start.column*n.characterWidth;this.elt(i,"height:"+s+"px;width:"+a+"px;top:"+l+"px;left:"+c+"px;"+(r||""))},this.drawBidiSingleLineMarker=function(t,e,i,n,o,r){var s=n.lineHeight,a=this.$getTop(e.start.row,n),l=this.$padding;this.session.$bidiHandler.getSelections(e.start.column,e.end.column).forEach((function(t){this.elt(i,"height:"+s+"px;width:"+t.width+(o||0)+"px;top:"+a+"px;left:"+(l+t.left)+"px;"+(r||""))}),this)},this.drawFullLineMarker=function(t,e,i,n,o){var r=this.$getTop(e.start.row,n),s=n.lineHeight;e.start.row!=e.end.row&&(s+=this.$getTop(e.end.row,n)-r),this.elt(i,"height:"+s+"px;top:"+r+"px;left:0;right:0;"+(o||""))},this.drawScreenLineMarker=function(t,e,i,n,o){var r=this.$getTop(e.start.row,n),s=n.lineHeight;this.elt(i,"height:"+s+"px;top:"+r+"px;left:0;right:0;"+(o||""))}}).call(r.prototype),e.Marker=r})),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],(function(t,e,i){"use strict";var n=t("../lib/oop"),o=t("../lib/dom"),r=t("../lib/lang"),s=t("./lines").Lines,a=t("../lib/event_emitter").EventEmitter,l=function(t){this.dom=o,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",t.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new s(this.element)};(function(){n.implement(this,a),this.EOF_CHAR="¶",this.EOL_CHAR_LF="¬",this.EOL_CHAR_CRLF="¤",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="—",this.SPACE_CHAR="·",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var t=this.session.doc,e="\n"==t.getNewLineCharacter()&&"windows"!=t.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=e)return this.EOL_CHAR=e,!0},this.setPadding=function(t){this.$padding=t,this.element.style.margin="0 "+t+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(t){this.$fontMetrics=t,this.$fontMetrics.on("changeCharacterSize",function(t){this._signal("changeCharacterSize",t)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(t){this.session=t,t&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(t){return this.showInvisibles!=t&&(this.showInvisibles=t,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(t){return this.displayIndentGuides!=t&&(this.displayIndentGuides=t,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var t=this.session.getTabSize();this.tabSize=t;for(var e=this.$tabStrings=[0],i=1;i<t+1;i++)if(this.showInvisibles){(n=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",n.textContent=r.stringRepeat(this.TAB_CHAR,i),e.push(n)}else e.push(this.dom.createTextNode(r.stringRepeat(" ",i),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var n,o="ace_indent-guide",s="",a="";if(this.showInvisibles){o+=" ace_invisible",s=" ace_invisible_space",a=" ace_invisible_tab";var l=r.stringRepeat(this.SPACE_CHAR,this.tabSize),c=r.stringRepeat(this.TAB_CHAR,this.tabSize)}else c=l=r.stringRepeat(" ",this.tabSize);(n=this.dom.createElement("span")).className=o+s,n.textContent=l,this.$tabStrings[" "]=n,(n=this.dom.createElement("span")).className=o+a,n.textContent=c,this.$tabStrings["\t"]=n}},this.updateLines=function(t,e,i){if(this.config.lastRow!=t.lastRow||this.config.firstRow!=t.firstRow)return this.update(t);this.config=t;for(var n=Math.max(e,t.firstRow),o=Math.min(i,t.lastRow),r=this.element.childNodes,s=0,a=t.firstRow;a<n;a++){if(l=this.session.getFoldLine(a)){if(l.containsRow(n)){n=l.start.row;break}a=l.end.row}s++}for(var l,c=!1,h=(a=n,(l=this.session.getNextFoldLine(a))?l.start.row:1/0);a>h&&(a=l.end.row+1,h=(l=this.session.getNextFoldLine(a,l))?l.start.row:1/0),!(a>o);){var u=r[s++];if(u){this.dom.removeChildren(u),this.$renderLine(u,a,a==h&&l),c&&(u.style.top=this.$lines.computeLineTop(a,t,this.session)+"px");var d=t.lineHeight*this.session.getRowLength(a)+"px";u.style.height!=d&&(c=!0,u.style.height=d)}a++}if(c)for(;s<this.$lines.cells.length;){var p=this.$lines.cells[s++];p.element.style.top=this.$lines.computeLineTop(p.row,t,this.session)+"px"}},this.scrollLines=function(t){var e=this.config;if(this.config=t,this.$lines.pageChanged(e,t))return this.update(t);this.$lines.moveContainer(t);var i=t.lastRow,n=e?e.lastRow:-1;if(!e||n<t.firstRow)return this.update(t);if(i<e.firstRow)return this.update(t);if(!e||e.lastRow<t.firstRow)return this.update(t);if(t.lastRow<e.firstRow)return this.update(t);if(e.firstRow<t.firstRow)for(var o=this.session.getFoldedRowCount(e.firstRow,t.firstRow-1);o>0;o--)this.$lines.shift();if(e.lastRow>t.lastRow)for(o=this.session.getFoldedRowCount(t.lastRow+1,e.lastRow);o>0;o--)this.$lines.pop();t.firstRow<e.firstRow&&this.$lines.unshift(this.$renderLinesFragment(t,t.firstRow,e.firstRow-1)),t.lastRow>e.lastRow&&this.$lines.push(this.$renderLinesFragment(t,e.lastRow+1,t.lastRow))},this.$renderLinesFragment=function(t,e,i){for(var n=[],r=e,s=this.session.getNextFoldLine(r),a=s?s.start.row:1/0;r>a&&(r=s.end.row+1,a=(s=this.session.getNextFoldLine(r,s))?s.start.row:1/0),!(r>i);){var l=this.$lines.createCell(r,t,this.session),c=l.element;this.dom.removeChildren(c),o.setStyle(c.style,"height",this.$lines.computeLineHeight(r,t,this.session)+"px"),o.setStyle(c.style,"top",this.$lines.computeLineTop(r,t,this.session)+"px"),this.$renderLine(c,r,r==a&&s),this.$useLineGroups()?c.className="ace_line_group":c.className="ace_line",n.push(l),r++}return n},this.update=function(t){this.$lines.moveContainer(t),this.config=t;for(var e=t.firstRow,i=t.lastRow,n=this.$lines;n.getLength();)n.pop();n.push(this.$renderLinesFragment(t,e,i))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(t,e,i,n){for(var o,s=this,a=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,l=this.dom.createFragment(this.element),c=0;o=a.exec(n);){var h=o[1],u=o[2],d=o[3],p=o[4],g=o[5];if(s.showInvisibles||!u){var f=c!=o.index?n.slice(c,o.index):"";if(c=o.index+o[0].length,f&&l.appendChild(this.dom.createTextNode(f,this.element)),h){var m=s.session.getScreenTabSize(e+o.index);l.appendChild(s.$tabStrings[m].cloneNode(!0)),e+=m-1}else if(u)if(s.showInvisibles){(_=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",_.textContent=r.stringRepeat(s.SPACE_CHAR,u.length),l.appendChild(_)}else l.appendChild(this.com.createTextNode(u,this.element));else if(d){(_=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",_.textContent=r.stringRepeat(s.SPACE_CHAR,d.length),l.appendChild(_)}else if(p){e+=1,(_=this.dom.createElement("span")).style.width=2*s.config.characterWidth+"px",_.className=s.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",_.textContent=s.showInvisibles?s.SPACE_CHAR:p,l.appendChild(_)}else if(g){e+=1,(_=this.dom.createElement("span")).style.width=2*s.config.characterWidth+"px",_.className="ace_cjk",_.textContent=g,l.appendChild(_)}}}if(l.appendChild(this.dom.createTextNode(c?n.slice(c):n,this.element)),this.$textToken[i.type])t.appendChild(l);else{var v="ace_"+i.type.replace(/\./g," ace_"),_=this.dom.createElement("span");"fold"==i.type&&(_.style.width=i.value.length*this.config.characterWidth+"px"),_.className=v,_.appendChild(l),t.appendChild(_)}return e+n.length},this.renderIndentGuide=function(t,e,i){var n=e.search(this.$indentGuideRe);if(n<=0||n>=i)return e;if(" "==e[0]){for(var o=(n-=n%this.tabSize)/this.tabSize,r=0;r<o;r++)t.appendChild(this.$tabStrings[" "].cloneNode(!0));return e.substr(n)}if("\t"==e[0]){for(r=0;r<n;r++)t.appendChild(this.$tabStrings["\t"].cloneNode(!0));return e.substr(n)}return e},this.$createLineElement=function(t){var e=this.dom.createElement("div");return e.className="ace_line",e.style.height=this.config.lineHeight+"px",e},this.$renderWrappedLine=function(t,e,i){var n=0,o=0,s=i[0],a=0,l=this.$createLineElement();t.appendChild(l);for(var c=0;c<e.length;c++){var h=e[c],u=h.value;if(0==c&&this.displayIndentGuides){if(n=u.length,!(u=this.renderIndentGuide(l,u,s)))continue;n-=u.length}if(n+u.length<s)a=this.$renderToken(l,a,h,u),n+=u.length;else{for(;n+u.length>=s;)a=this.$renderToken(l,a,h,u.substring(0,s-n)),u=u.substring(s-n),n=s,l=this.$createLineElement(),t.appendChild(l),l.appendChild(this.dom.createTextNode(r.stringRepeat(" ",i.indent),this.element)),a=0,s=i[++o]||Number.MAX_VALUE;0!=u.length&&(n+=u.length,a=this.$renderToken(l,a,h,u))}}i[i.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(l,a,null,"",!0)},this.$renderSimpleLine=function(t,e){var i=0,n=e[0],o=n.value;this.displayIndentGuides&&(o=this.renderIndentGuide(t,o)),o&&(i=this.$renderToken(t,i,n,o));for(var r=1;r<e.length;r++){if(i+(o=(n=e[r]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(t,i,n,o);i=this.$renderToken(t,i,n,o)}},this.$renderOverflowMessage=function(t,e,i,n,o){i&&this.$renderToken(t,e,i,n.slice(0,this.MAX_LINE_LENGTH-e));var r=this.dom.createElement("span");r.className="ace_inline_button ace_keyword ace_toggle_wrap",r.textContent=o?"<hide>":"<click to see more...>",t.appendChild(r)},this.$renderLine=function(t,e,i){if(!i&&0!=i&&(i=this.session.getFoldLine(e)),i)var n=this.$getFoldLineTokens(e,i);else n=this.session.getTokens(e);var o=t;if(n.length){var r=this.session.getRowSplitData(e);if(r&&r.length){this.$renderWrappedLine(t,n,r);o=t.lastChild}else{o=t;this.$useLineGroups()&&(o=this.$createLineElement(),t.appendChild(o)),this.$renderSimpleLine(o,n)}}else this.$useLineGroups()&&(o=this.$createLineElement(),t.appendChild(o));if(this.showInvisibles&&o){i&&(e=i.end.row);var s=this.dom.createElement("span");s.className="ace_invisible ace_invisible_eol",s.textContent=e==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,o.appendChild(s)}},this.$getFoldLineTokens=function(t,e){var i=this.session,n=[],o=i.getTokens(t);return e.walk((function(t,e,r,s,a){null!=t?n.push({type:"fold",value:t}):(a&&(o=i.getTokens(e)),o.length&&function(t,e,i){for(var o=0,r=0;r+t[o].value.length<e;)if(r+=t[o].value.length,++o==t.length)return;for(r!=e&&((s=t[o].value.substring(e-r)).length>i-e&&(s=s.substring(0,i-e)),n.push({type:t[o].type,value:s}),r=e+s.length,o+=1);r<i&&o<t.length;){var s;(s=t[o].value).length+r>i?n.push({type:t[o].type,value:s.substring(0,i-r)}):n.push(t[o]),r+=s.length,o+=1}}(o,s,r))}),e.end.row,this.session.getLine(e.end.row).length),n},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(l.prototype),e.Text=l})),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],(function(t,e,i){"use strict";var n=t("../lib/dom"),o=function(t){this.element=n.createElement("div"),this.element.className="ace_layer ace_cursor-layer",t.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),n.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(t){for(var e=this.cursors,i=e.length;i--;)n.setStyle(e[i].style,"opacity",t?"":"0")},this.$startCssAnimation=function(){for(var t=this.cursors,e=t.length;e--;)t[e].style.animationDuration=this.blinkInterval+"ms";setTimeout(function(){n.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){n.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setBlinking=function(t){t!=this.isBlinking&&(this.isBlinking=t,this.restartTimer())},this.setBlinkInterval=function(t){t!=this.blinkInterval&&(this.blinkInterval=t,this.restartTimer())},this.setSmoothBlinking=function(t){t!=this.smoothBlinking&&(this.smoothBlinking=t,n.setCssClass(this.element,"ace_smooth-blinking",t),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var t=n.createElement("div");return t.className="ace_cursor",this.element.appendChild(t),this.cursors.push(t),t},this.removeCursor=function(){if(this.cursors.length>1){var t=this.cursors.pop();return t.parentNode.removeChild(t),t}},this.hideCursor=function(){this.isVisible=!1,n.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,n.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var t=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&n.removeCssClass(this.element,"ace_smooth-blinking"),t(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&setTimeout(function(){n.addCssClass(this.element,"ace_smooth-blinking")}.bind(this)),n.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var e=function(){this.timeoutId=setTimeout((function(){t(!1)}),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval((function(){t(!0),e()}),this.blinkInterval),e()}else this.$stopCssAnimation()},this.getPixelPosition=function(t,e){if(!this.config||!this.session)return{left:0,top:0};t||(t=this.session.selection.getCursor());var i=this.session.documentToScreenPosition(t);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,t.row)?this.session.$bidiHandler.getPosLeft(i.column):i.column*this.config.characterWidth),top:(i.row-(e?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(t,e){return t.top>=0&&t.top<e.maxHeight},this.update=function(t){this.config=t;var e=this.session.$selectionMarkers,i=0,o=0;void 0!==e&&0!==e.length||(e=[{cursor:null}]);i=0;for(var r=e.length;i<r;i++){var s=this.getPixelPosition(e[i].cursor,!0);if(!((s.top>t.height+t.offset||s.top<0)&&i>1)){var a=this.cursors[o++]||this.addCursor(),l=a.style;this.drawCursor?this.drawCursor(a,s,t,e[i],this.session):this.isCursorInView(s,t)?(n.setStyle(l,"display","block"),n.translate(a,s.left,s.top),n.setStyle(l,"width",Math.round(t.characterWidth)+"px"),n.setStyle(l,"height",t.lineHeight+"px")):n.setStyle(l,"display","none")}}for(;this.cursors.length>o;)this.removeCursor();var c=this.session.getOverwrite();this.$setOverwrite(c),this.$pixelPos=s,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(t){t!=this.overwrite&&(this.overwrite=t,t?n.addCssClass(this.element,"ace_overwrite-cursors"):n.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(o.prototype),e.Cursor=o})),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],(function(t,e,i){"use strict";var n=t("./lib/oop"),o=t("./lib/dom"),r=t("./lib/event"),s=t("./lib/event_emitter").EventEmitter,a=32768,l=function(t){this.element=o.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=o.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent=" ",this.element.appendChild(this.inner),t.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,r.addListener(this.element,"scroll",this.onScroll.bind(this)),r.addListener(this.element,"mousedown",r.preventDefault)};(function(){n.implement(this,s),this.setVisible=function(t){this.element.style.display=t?"":"none",this.isVisible=t,this.coeff=1}}).call(l.prototype);var c=function(t,e){l.call(this,t),this.scrollTop=0,this.scrollHeight=0,e.$scrollbarWidth=this.width=o.scrollbarWidth(t.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};n.inherits(c,l),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var t=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-t)/(this.coeff-t)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(t){this.element.style.height=t+"px"},this.setInnerHeight=this.setScrollHeight=function(t){this.scrollHeight=t,t>a?(this.coeff=a/t,t=a):1!=this.coeff&&(this.coeff=1),this.inner.style.height=t+"px"},this.setScrollTop=function(t){this.scrollTop!=t&&(this.skipEvent=!0,this.scrollTop=t,this.element.scrollTop=t*this.coeff)}}.call(c.prototype);var h=function(t,e){l.call(this,t),this.scrollLeft=0,this.height=e.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};n.inherits(h,l),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(t){this.element.style.width=t+"px"},this.setInnerWidth=function(t){this.inner.style.width=t+"px"},this.setScrollWidth=function(t){this.inner.style.width=t+"px"},this.setScrollLeft=function(t){this.scrollLeft!=t&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=t)}}.call(h.prototype),e.ScrollBar=c,e.ScrollBarV=c,e.ScrollBarH=h,e.VScrollBar=c,e.HScrollBar=h})),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],(function(t,e,i){"use strict";var n=t("./lib/event"),o=function(t,e){this.onRender=t,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=e||window;var i=this;this._flush=function(t){i.pending=!1;var e=i.changes;if(e&&(n.blockIdle(100),i.changes=0,i.onRender(e)),i.changes){if(i.$recursionLimit--<0)return;i.schedule()}else i.$recursionLimit=2}};(function(){this.schedule=function(t){this.changes=this.changes|t,this.changes&&!this.pending&&(n.nextFrame(this._flush),this.pending=!0)},this.clear=function(t){var e=this.changes;return this.changes=0,e}}).call(o.prototype),e.RenderLoop=o})),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],(function(t,e,i){var n=t("../lib/oop"),o=t("../lib/dom"),r=t("../lib/lang"),s=t("../lib/event"),a=t("../lib/useragent"),l=t("../lib/event_emitter").EventEmitter,c=256,h="function"==typeof ResizeObserver,u=200,d=e.FontMetrics=function(t){this.el=o.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=o.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=o.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),t.appendChild(this.el),this.$measureNode.innerHTML=r.stringRepeat("X",c),this.$characterSize={width:0,height:0},h?this.$addObserver():this.checkForSizeChanges()};(function(){n.implement(this,l),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(t,e){t.width=t.height="auto",t.left=t.top="0px",t.visibility="hidden",t.position="absolute",t.whiteSpace="pre",a.isIE<8?t["font-family"]="inherit":t.font="inherit",t.overflow=e?"hidden":"visible"},this.checkForSizeChanges=function(t){if(void 0===t&&(t=this.$measureSizes()),t&&(this.$characterSize.width!==t.width||this.$characterSize.height!==t.height)){this.$measureNode.style.fontWeight="bold";var e=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=t,this.charSizes=Object.create(null),this.allowBoldFonts=e&&e.width===t.width&&e.height===t.height,this._emit("changeCharacterSize",{data:t})}},this.$addObserver=function(){var t=this;this.$observer=new window.ResizeObserver((function(e){var i=e[0].contentRect;t.checkForSizeChanges({height:i.height,width:i.width/c})})),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var t=this;return this.$pollSizeChangesTimer=s.onIdle((function e(){t.checkForSizeChanges(),s.onIdle(e,500)}),500)},this.setPolling=function(t){t?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(t){var e={height:(t||this.$measureNode).clientHeight,width:(t||this.$measureNode).clientWidth/c};return 0===e.width||0===e.height?null:e},this.$measureCharWidth=function(t){return this.$main.innerHTML=r.stringRepeat(t,c),this.$main.getBoundingClientRect().width/c},this.getCharacterWidth=function(t){var e=this.charSizes[t];return void 0===e&&(e=this.charSizes[t]=this.$measureCharWidth(t)/this.$characterSize.width),e},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function t(e){return e?(window.getComputedStyle(e).zoom||1)*t(e.parentElement):1},this.$initTransformMeasureNodes=function(){var t=function(t,e){return["div",{style:"position: absolute;top:"+t+"px;left:"+e+"px;"}]};this.els=o.buildDom([t(0,0),t(u,0),t(0,u),t(u,u)],this.el)},this.transformCoordinates=function(t,e){function i(t,e,i){var n=t[1]*e[0]-t[0]*e[1];return[(-e[1]*i[0]+e[0]*i[1])/n,(+t[1]*i[0]-t[0]*i[1])/n]}function n(t,e){return[t[0]-e[0],t[1]-e[1]]}function o(t,e){return[t[0]+e[0],t[1]+e[1]]}function r(t,e){return[t*e[0],t*e[1]]}function s(t){var e=t.getBoundingClientRect();return[e.left,e.top]}t&&(t=r(1/this.$getZoom(this.el),t));this.els||this.$initTransformMeasureNodes();var a=s(this.els[0]),l=s(this.els[1]),c=s(this.els[2]),h=s(this.els[3]),d=i(n(h,l),n(h,c),n(o(l,c),o(h,a))),p=r(1+d[0],n(l,a)),g=r(1+d[1],n(c,a));if(e){var f=e,m=d[0]*f[0]/u+d[1]*f[1]/u+1,v=o(r(f[0],p),r(f[1],g));return o(r(1/m/u,v),a)}var _=n(t,a),y=i(n(p,r(d[0],_)),n(g,r(d[1],_)),_);return r(u,y)}}).call(d.prototype)})),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],(function(t,e,i){"use strict";var n=t("./lib/oop"),o=t("./lib/dom"),r=t("./config"),s=t("./layer/gutter").Gutter,a=t("./layer/marker").Marker,l=t("./layer/text").Text,c=t("./layer/cursor").Cursor,h=t("./scrollbar").HScrollBar,u=t("./scrollbar").VScrollBar,d=t("./renderloop").RenderLoop,p=t("./layer/font_metrics").FontMetrics,g=t("./lib/event_emitter").EventEmitter,f='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;font-variant-ligatures: no-common-ligatures;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_error_bracket {position: absolute;border-bottom: 1px solid #DE5555;border-radius: 0;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);transform-origin: left;white-space: pre;opacity: 0.7;margin: 0 10px;}',m=t("./lib/useragent"),v=m.isIE;o.importCssString(f,"ace_editor.css");var _=function(t,e){var i=this;this.container=t||o.createElement("div"),o.addCssClass(this.container,"ace_editor"),o.HI_DPI&&o.addCssClass(this.container,"ace_hidpi"),this.setTheme(e),this.$gutter=o.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=o.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=o.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new s(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new a(this.content);var n=this.$textLayer=new l(this.content);this.canvas=n.element,this.$markerFront=new a(this.content),this.$cursorLayer=new c(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new u(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.addEventListener("scroll",(function(t){i.$scrollAnimation||i.session.setScrollTop(t.data-i.scrollMargin.top)})),this.scrollBarH.addEventListener("scroll",(function(t){i.$scrollAnimation||i.session.setScrollLeft(t.data-i.scrollMargin.left)})),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",(function(t){i.updateCharacterSize(),i.onResize(!0,i.gutterWidth,i.$size.width,i.$size.height),i._signal("changeCharacterSize",t)})),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!m.isIOS,this.$loop=new d(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),r.resetOptions(this),r._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,n.implement(this,g),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),o.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(t){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=t,t&&this.scrollMargin.top&&t.getScrollTop()<=0&&t.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(t),this.$markerBack.setSession(t),this.$markerFront.setSession(t),this.$gutterLayer.setSession(t),this.$textLayer.setSession(t),t&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(t,e,i){if(void 0===e&&(e=1/0),this.$changedLines?(this.$changedLines.firstRow>t&&(this.$changedLines.firstRow=t),this.$changedLines.lastRow<e&&(this.$changedLines.lastRow=e)):this.$changedLines={firstRow:t,lastRow:e},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!i)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(t){t?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(t,e,i,n){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=t?1:0;var o=this.container;n||(n=o.clientHeight||o.scrollHeight),i||(i=o.clientWidth||o.scrollWidth);var r=this.$updateCachedSize(t,e,i,n);if(!this.$size.scrollerHeight||!i&&!n)return this.resizing=0;t&&(this.$gutterLayer.$padding=null),t?this.$renderChanges(r|this.$changes,!0):this.$loop.schedule(r|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(t,e,i,n){n-=this.$extraHeight||0;var r=0,s=this.$size,a={width:s.width,height:s.height,scrollerHeight:s.scrollerHeight,scrollerWidth:s.scrollerWidth};if(n&&(t||s.height!=n)&&(s.height=n,r|=this.CHANGE_SIZE,s.scrollerHeight=s.height,this.$horizScroll&&(s.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",r|=this.CHANGE_SCROLL),i&&(t||s.width!=i)){r|=this.CHANGE_SIZE,s.width=i,null==e&&(e=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=e,o.setStyle(this.scrollBarH.element.style,"left",e+"px"),o.setStyle(this.scroller.style,"left",e+this.margin.left+"px"),s.scrollerWidth=Math.max(0,i-e-this.scrollBarV.getWidth()-this.margin.h),o.setStyle(this.$gutter.style,"left",this.margin.left+"px");var l=this.scrollBarV.getWidth()+"px";o.setStyle(this.scrollBarH.element.style,"right",l),o.setStyle(this.scroller.style,"right",l),o.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||t)&&(r|=this.CHANGE_FULL)}return s.$dirty=!i||!n,r&&this._signal("resize",a),r},this.onGutterResize=function(t){var e=this.$showGutter?t:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var t=this.$size.scrollerWidth-2*this.$padding,e=Math.floor(t/this.characterWidth);return this.session.adjustWrapLimit(e,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(t){this.setOption("animatedScroll",t)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(t){this.setOption("showInvisibles",t),this.session.$bidiHandler.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(t){this.setOption("displayIndentGuides",t)},this.setShowPrintMargin=function(t){this.setOption("showPrintMargin",t)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(t){this.setOption("printMarginColumn",t)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(t){return this.setOption("showGutter",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var t=o.createElement("div");t.className="ace_layer ace_print-margin-layer",this.$printMarginEl=o.createElement("div"),this.$printMarginEl.className="ace_print-margin",t.appendChild(this.$printMarginEl),this.content.insertBefore(t,this.content.firstChild)}var e=this.$printMarginEl.style;e.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",e.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var t=this.textarea.style,e=this.$composition;if(this.$keepTextAreaAtCursor||e){var i=this.$cursorLayer.$pixelPos;if(i){e&&e.markerRange&&(i=this.$cursorLayer.getPixelPosition(e.markerRange.start,!0));var n=this.layerConfig,r=i.top,s=i.left;r-=n.offset;var a=e&&e.useTextareaForIME?this.lineHeight:v?0:1;if(r<0||r>n.height-a)o.translate(this.textarea,0,0);else{var l=1,c=this.$size.height-a;if(e)if(e.useTextareaForIME){var h=this.textarea.value;l=this.characterWidth*this.session.$getStringScreenWidth(h)[0]}else r+=this.lineHeight+2;else r+=this.lineHeight;(s-=this.scrollLeft)>this.$size.scrollerWidth-l&&(s=this.$size.scrollerWidth-l),s+=this.gutterWidth+this.margin.left,o.setStyle(t,"height",a+"px"),o.setStyle(t,"width",l+"px"),o.translate(this.textarea,Math.min(s,this.$size.scrollerWidth-l),Math.min(r,c))}}}else o.translate(this.textarea,-100,0)}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var t=this.layerConfig,e=t.lastRow;return this.session.documentToScreenRow(e,0)*t.lineHeight-this.session.getScrollTop()>t.height-t.lineHeight?e-1:e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(t){this.$padding=t,this.$textLayer.setPadding(t),this.$cursorLayer.setPadding(t),this.$markerFront.setPadding(t),this.$markerBack.setPadding(t),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(t,e,i,n){var o=this.scrollMargin;o.top=0|t,o.bottom=0|e,o.right=0|n,o.left=0|i,o.v=o.top+o.bottom,o.h=o.left+o.right,o.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-o.top),this.updateFull()},this.setMargin=function(t,e,i,n){var o=this.margin;o.top=0|t,o.bottom=0|e,o.right=0|n,o.left=0|i,o.v=o.top+o.bottom,o.h=o.left+o.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(t){this.setOption("hScrollBarAlwaysVisible",t)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(t){this.setOption("vScrollBarAlwaysVisible",t)},this.$updateScrollBarV=function(){var t=this.layerConfig.maxHeight,e=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(t-=(e-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>t-e&&(t=this.scrollTop+e,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(t+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(t,e){if(this.$changes&&(t|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(t||e)){if(this.$size.$dirty)return this.$changes|=t,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",t),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var i=this.layerConfig;if(t&this.CHANGE_FULL||t&this.CHANGE_SIZE||t&this.CHANGE_TEXT||t&this.CHANGE_LINES||t&this.CHANGE_SCROLL||t&this.CHANGE_H_SCROLL){if(t|=this.$computeLayerConfig()|this.$loop.clear(),i.firstRow!=this.layerConfig.firstRow&&i.firstRowScreen==this.layerConfig.firstRowScreen){var n=this.scrollTop+(i.firstRow-this.layerConfig.firstRow)*this.lineHeight;n>0&&(this.scrollTop=n,t|=this.CHANGE_SCROLL,t|=this.$computeLayerConfig()|this.$loop.clear())}i=this.layerConfig,this.$updateScrollBarV(),t&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),o.translate(this.content,-this.scrollLeft,-i.offset);var r=i.width+2*this.$padding+"px",s=i.minHeight+"px";o.setStyle(this.content.style,"width",r),o.setStyle(this.content.style,"height",s)}return t&this.CHANGE_H_SCROLL&&(o.translate(this.content,-this.scrollLeft,-i.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),t&this.CHANGE_FULL?(this.$changedLines=null,this.$textLayer.update(i),this.$showGutter&&this.$gutterLayer.update(i),this.$markerBack.update(i),this.$markerFront.update(i),this.$cursorLayer.update(i),this.$moveTextAreaToCursor(),void this._signal("afterRender",t)):t&this.CHANGE_SCROLL?(this.$changedLines=null,t&this.CHANGE_TEXT||t&this.CHANGE_LINES?this.$textLayer.update(i):this.$textLayer.scrollLines(i),this.$showGutter&&(t&this.CHANGE_GUTTER||t&this.CHANGE_LINES?this.$gutterLayer.update(i):this.$gutterLayer.scrollLines(i)),this.$markerBack.update(i),this.$markerFront.update(i),this.$cursorLayer.update(i),this.$moveTextAreaToCursor(),void this._signal("afterRender",t)):(t&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(i),this.$showGutter&&this.$gutterLayer.update(i)):t&this.CHANGE_LINES?(this.$updateLines()||t&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(i):t&this.CHANGE_TEXT||t&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(i):t&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(i),t&this.CHANGE_CURSOR&&(this.$cursorLayer.update(i),this.$moveTextAreaToCursor()),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(i),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(i),void this._signal("afterRender",t))}this.$changes|=t},this.$autosize=function(){var t=this.session.getScreenLength()*this.lineHeight,e=this.$maxLines*this.lineHeight,i=Math.min(e,Math.max((this.$minLines||1)*this.lineHeight,t))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(i+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&i>this.$maxPixelHeight&&(i=this.$maxPixelHeight);var n=!(i<=2*this.lineHeight)&&t>e;if(i!=this.desiredHeight||this.$size.height!=this.desiredHeight||n!=this.$vScroll){n!=this.$vScroll&&(this.$vScroll=n,this.scrollBarV.setVisible(n));var o=this.container.clientWidth;this.container.style.height=i+"px",this.$updateCachedSize(!0,this.$gutterWidth,o,i),this.desiredHeight=i,this._signal("autosize")}},this.$computeLayerConfig=function(){var t=this.session,e=this.$size,i=e.height<=2*this.lineHeight,n=this.session.getScreenLength()*this.lineHeight,o=this.$getLongestLine(),r=!i&&(this.$hScrollBarAlwaysVisible||e.scrollerWidth-o-2*this.$padding<0),s=this.$horizScroll!==r;s&&(this.$horizScroll=r,this.scrollBarH.setVisible(r));var a=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var l=e.scrollerHeight+this.lineHeight,c=!this.$maxLines&&this.$scrollPastEnd?(e.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;n+=c;var h=this.scrollMargin;this.session.setScrollTop(Math.max(-h.top,Math.min(this.scrollTop,n-e.scrollerHeight+h.bottom))),this.session.setScrollLeft(Math.max(-h.left,Math.min(this.scrollLeft,o+2*this.$padding-e.scrollerWidth+h.right)));var u=!i&&(this.$vScrollBarAlwaysVisible||e.scrollerHeight-n+c<0||this.scrollTop>h.top),d=a!==u;d&&(this.$vScroll=u,this.scrollBarV.setVisible(u));var p,g,f=this.scrollTop%this.lineHeight,m=Math.ceil(l/this.lineHeight)-1,v=Math.max(0,Math.round((this.scrollTop-f)/this.lineHeight)),_=v+m,y=this.lineHeight;v=t.screenToDocumentRow(v,0);var b=t.getFoldLine(v);b&&(v=b.start.row),p=t.documentToScreenRow(v,0),g=t.getRowLength(v)*y,_=Math.min(t.screenToDocumentRow(_,0),t.getLength()-1),l=e.scrollerHeight+t.getRowLength(_)*y+g,f=this.scrollTop-p*y;var w=0;return(this.layerConfig.width!=o||s)&&(w=this.CHANGE_H_SCROLL),(s||d)&&(w|=this.$updateCachedSize(!0,this.gutterWidth,e.width,e.height),this._signal("scrollbarVisibilityChanged"),d&&(o=this.$getLongestLine())),this.layerConfig={width:o,padding:this.$padding,firstRow:v,firstRowScreen:p,lastRow:_,lineHeight:y,characterWidth:this.characterWidth,minHeight:l,maxHeight:n,offset:f,gutterOffset:y?Math.max(0,Math.ceil((f+e.height-e.scrollerHeight)/y)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(o-this.$padding),w},this.$updateLines=function(){if(this.$changedLines){var t=this.$changedLines.firstRow,e=this.$changedLines.lastRow;this.$changedLines=null;var i=this.layerConfig;if(!(t>i.lastRow+1||e<i.firstRow))return e===1/0?(this.$showGutter&&this.$gutterLayer.update(i),void this.$textLayer.update(i)):(this.$textLayer.updateLines(i,t,e),!0)}},this.$getLongestLine=function(){var t=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(t+=1),this.$textLayer&&t>this.$textLayer.MAX_LINE_LENGTH&&(t=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(t*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(t,e){this.$gutterLayer.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){this.$gutterLayer.removeGutterDecoration(t,e)},this.updateBreakpoints=function(t){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(t){this.$gutterLayer.setAnnotations(t),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(t,e,i){this.scrollCursorIntoView(t,i),this.scrollCursorIntoView(e,i)},this.scrollCursorIntoView=function(t,e,i){if(0!==this.$size.scrollerHeight){var n=this.$cursorLayer.getPixelPosition(t),o=n.left,r=n.top,s=i&&i.top||0,a=i&&i.bottom||0,l=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;l+s>r?(e&&l+s>r+this.lineHeight&&(r-=e*this.$size.scrollerHeight),0===r&&(r=-this.scrollMargin.top),this.session.setScrollTop(r)):l+this.$size.scrollerHeight-a<r+this.lineHeight&&(e&&l+this.$size.scrollerHeight-a<r-this.lineHeight&&(r+=e*this.$size.scrollerHeight),this.session.setScrollTop(r+this.lineHeight+a-this.$size.scrollerHeight));var c=this.scrollLeft;c>o?(o<this.$padding+2*this.layerConfig.characterWidth&&(o=-this.scrollMargin.left),this.session.setScrollLeft(o)):c+this.$size.scrollerWidth<o+this.characterWidth?this.session.setScrollLeft(Math.round(o+this.characterWidth-this.$size.scrollerWidth)):c<=this.$padding&&o-c<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(t){this.session.setScrollTop(t*this.lineHeight)},this.alignCursor=function(t,e){"number"==typeof t&&(t={row:t,column:0});var i=this.$cursorLayer.getPixelPosition(t),n=this.$size.scrollerHeight-this.lineHeight,o=i.top-n*(e||0);return this.session.setScrollTop(o),o},this.STEPS=8,this.$calcSteps=function(t,e){var i=0,n=this.STEPS,o=[],r=function(t,e,i){return i*(Math.pow(t-1,3)+1)+e};for(i=0;i<n;++i)o.push(r(i/this.STEPS,t,e-t));return o},this.scrollToLine=function(t,e,i,n){var o=this.$cursorLayer.getPixelPosition({row:t,column:0}).top;e&&(o-=this.$size.scrollerHeight/2);var r=this.scrollTop;this.session.setScrollTop(o),!1!==i&&this.animateScrolling(r,n)},this.animateScrolling=function(t,e){var i=this.scrollTop;if(this.$animatedScroll){var n=this;if(t!=i){if(this.$scrollAnimation){var o=this.$scrollAnimation.steps;if(o.length&&(t=o[0])==i)return}var r=n.$calcSteps(t,i);this.$scrollAnimation={from:t,to:i,steps:r},clearInterval(this.$timer),n.session.setScrollTop(r.shift()),n.session.$scrollTop=i,this.$timer=setInterval((function(){r.length?(n.session.setScrollTop(r.shift()),n.session.$scrollTop=i):null!=i?(n.session.$scrollTop=-1,n.session.setScrollTop(i),i=null):(n.$timer=clearInterval(n.$timer),n.$scrollAnimation=null,e&&e())}),10)}}},this.scrollToY=function(t){this.scrollTop!==t&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=t)},this.scrollToX=function(t){this.scrollLeft!==t&&(this.scrollLeft=t),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(t,e){this.session.setScrollTop(e),this.session.setScrollLeft(e)},this.scrollBy=function(t,e){e&&this.session.setScrollTop(this.session.getScrollTop()+e),t&&this.session.setScrollLeft(this.session.getScrollLeft()+t)},this.isScrollableBy=function(t,e){return e<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(e>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(t<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(t>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(t,e){var i;if(this.$hasCssTransforms){i={top:0,left:0};var n=this.$fontMetrics.transformCoordinates([t,e]);t=n[1]-this.gutterWidth-this.margin.left,e=n[0]}else i=this.scroller.getBoundingClientRect();var o=t+this.scrollLeft-i.left-this.$padding,r=o/this.characterWidth,s=Math.floor((e+this.scrollTop-i.top)/this.lineHeight),a=this.$blockCursor?Math.floor(r):Math.round(r);return{row:s,column:a,side:r-a>0?1:-1,offsetX:o}},this.screenToTextCoordinates=function(t,e){var i;if(this.$hasCssTransforms){i={top:0,left:0};var n=this.$fontMetrics.transformCoordinates([t,e]);t=n[1]-this.gutterWidth-this.margin.left,e=n[0]}else i=this.scroller.getBoundingClientRect();var o=t+this.scrollLeft-i.left-this.$padding,r=o/this.characterWidth,s=this.$blockCursor?Math.floor(r):Math.round(r),a=Math.floor((e+this.scrollTop-i.top)/this.lineHeight);return this.session.screenToDocumentPosition(a,Math.max(s,0),o)},this.textToScreenCoordinates=function(t,e){var i=this.scroller.getBoundingClientRect(),n=this.session.documentToScreenPosition(t,e),o=this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,t)?this.session.$bidiHandler.getPosLeft(n.column):Math.round(n.column*this.characterWidth)),r=n.row*this.lineHeight;return{pageX:i.left+o-this.scrollLeft,pageY:i.top+r-this.scrollTop}},this.visualizeFocus=function(){o.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){o.removeCssClass(this.container,"ace_focus")},this.showComposition=function(t){this.$composition=t,t.cssText||(t.cssText=this.textarea.style.cssText),t.useTextareaForIME=this.$useTextareaForIME,this.$useTextareaForIME?(o.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):t.markerId=this.session.addMarker(t.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(t){var e=this.session.selection.cursor;this.addToken(t,"composition_placeholder",e.row,e.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),o.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText,this.$composition=null,this.$cursorLayer.element.style.display="")},this.addToken=function(t,e,i,n){var o=this.session;o.bgTokenizer.lines[i]=null;var r={type:e,value:t},s=o.getTokens(i);if(null==n)s.push(r);else for(var a=0,l=0;l<s.length;l++){var c=s[l];if(n<=(a+=c.value.length)){var h=c.value.length-(a-n),u=c.value.slice(0,h),d=c.value.slice(h);s.splice(l,1,{type:c.type,value:u},r,{type:c.type,value:d});break}}this.updateLines(i,i)},this.setTheme=function(t,e){function i(i){if(n.$themeId!=t)return e&&e();if(!i||!i.cssClass)throw new Error("couldn't load module "+t+" or it didn't call define");i.$id&&(n.$themeId=i.$id),o.importCssString(i.cssText,i.cssClass,n.container),n.theme&&o.removeCssClass(n.container,n.theme.cssClass);var r="padding"in i?i.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&r!=n.$padding&&n.setPadding(r),n.$theme=i.cssClass,n.theme=i,o.addCssClass(n.container,i.cssClass),o.setCssClass(n.container,"ace_dark",i.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:i}),e&&e()}var n=this;if(this.$themeId=t,n._dispatchEvent("themeChange",{theme:t}),t&&"string"!=typeof t)i(t);else{var s=t||this.$options.theme.initialValue;r.loadModule(["theme",s],i)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(t,e){o.setCssClass(this.container,t,!1!==e)},this.unsetStyle=function(t){o.removeCssClass(this.container,t)},this.setCursorStyle=function(t){o.setStyle(this.scroller.style,"cursor",t)},this.setMouseCursor=function(t){o.setStyle(this.scroller.style,"cursor",t)},this.attachToShadowRoot=function(){o.importCssString(f,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy()}}).call(_.prototype),r.defineOptions(_.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(t){this.$textLayer.setShowInvisibles(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(t){"number"==typeof t&&(this.$printMarginColumn=t),this.$showPrintMargin=!!t,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(t){this.$gutter.style.display=t?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(t){o.setCssClass(this.$gutter,"ace_fade-fold-widgets",t)},initialValue:!1},showFoldWidgets:{set:function(t){this.$gutterLayer.setShowFoldWidgets(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(t){this.$textLayer.setDisplayIndentGuides(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(t){this.$gutterLayer.setHighlightGutterLine(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(t){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(t){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(t){"number"==typeof t&&(t+="px"),this.container.style.fontSize=t,this.updateFontSize()},initialValue:12},fontFamily:{set:function(t){this.container.style.fontFamily=t,this.updateFontSize()}},maxLines:{set:function(t){this.updateFull()}},minLines:{set:function(t){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(t){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(t){t=+t||0,this.$scrollPastEnd!=t&&(this.$scrollPastEnd=t,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(t){this.$gutterLayer.$fixedWidth=!!t,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(t){this.setTheme(t)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!m.isMobile&&!m.isIE}}),e.VirtualRenderer=_})),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],(function(t,e,i){"use strict";function n(t){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(a.get("loadWorkerFromBlob")){var e=function(t){var e="importScripts('"+r.qualifyURL(t)+"');";try{return new Blob([e],{type:"application/javascript"})}catch(t){var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return i.append(e),i.getBlob("application/javascript")}}(t),i=(window.URL||window.webkitURL).createObjectURL(e);return new Worker(i)}return new Worker(t)}var o=t("../lib/oop"),r=t("../lib/net"),s=t("../lib/event_emitter").EventEmitter,a=t("../config"),l=function(t){t.postMessage||(t=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=t,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){o.implement(this,s),this.$createWorkerFromOldConfig=function(e,i,o,r,s){if(t.nameToUrl&&!t.toUrl&&(t.toUrl=t.nameToUrl),a.get("packaged")||!t.toUrl)r=r||a.moduleUrl(i,"worker");else{var l=this.$normalizePath;r=r||l(t.toUrl("ace/worker/worker.js",null,"_"));var c={};e.forEach((function(e){c[e]=l(t.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))}))}return this.$worker=n(r),s&&this.send("importScripts",s),this.$worker.postMessage({init:!0,tlns:c,module:i,classname:o}),this.$worker},this.onMessage=function(t){var e=t.data;switch(e.type){case"event":this._signal(e.name,{data:e.data});break;case"call":var i=this.callbacks[e.id];i&&(i(e.data),delete this.callbacks[e.id]);break;case"error":this.reportError(e.data);break;case"log":window.console&&console.log&&console.log.apply(console,e.data)}},this.reportError=function(t){window.console&&console.error&&console.error(t)},this.$normalizePath=function(t){return r.qualifyURL(t)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(t,e){this.$worker.postMessage({command:t,args:e})},this.call=function(t,e,i){if(i){var n=this.callbackId++;this.callbacks[n]=i,e.push(n)}this.send(t,e)},this.emit=function(t,e){try{e.data&&e.data.err&&(e.data.err={message:e.data.err.message,stack:e.data.err.stack,code:e.data.err.code}),this.$worker.postMessage({event:t,data:{data:e.data}})}catch(t){console.error(t.stack)}},this.attachToDocument=function(t){this.$doc&&this.terminate(),this.$doc=t,this.call("setValue",[t.getValue()]),t.on("change",this.changeListener)},this.changeListener=function(t){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==t.action?this.deltaQueue.push(t.start,t.lines):this.deltaQueue.push(t.start,t.end)},this.$sendDeltaQueue=function(){var t=this.deltaQueue;t&&(this.deltaQueue=null,t.length>50&&t.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:t}))}}).call(l.prototype);e.UIWorkerClient=function(t,e,i){var n=null,o=!1,r=Object.create(s),c=[],h=new l({messageBuffer:c,terminate:function(){},postMessage:function(t){c.push(t),n&&(o?setTimeout(u):u())}});h.setEmitSync=function(t){o=t};var u=function(){var t=c.shift();t.command?n[t.command].apply(n,t.args):t.event&&r._signal(t.event,t.data)};return r.postMessage=function(t){h.onMessage({data:t})},r.callback=function(t,e){this.postMessage({type:"call",id:e,data:t})},r.emit=function(t,e){this.postMessage({type:"event",name:t,data:e})},a.loadModule(["worker",e],(function(t){for(n=new t[i](r);c.length;)u()})),h},e.WorkerClient=l,e.createWorker=n})),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],(function(t,e,i){"use strict";var n=t("./range").Range,o=t("./lib/event_emitter").EventEmitter,r=t("./lib/oop"),s=function(t,e,i,n,o,r){var s=this;this.length=e,this.session=t,this.doc=t.getDocument(),this.mainClass=o,this.othersClass=r,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=n,this.$onCursorChange=function(){setTimeout((function(){s.onCursorChange()}))},this.$pos=i;var a=t.getUndoManager().$undoStack||t.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),t.selection.on("changeCursor",this.$onCursorChange)};(function(){r.implement(this,o),this.setup=function(){var t=this,e=this.doc,i=this.session;this.selectionBefore=i.selection.toJSON(),i.selection.inMultiSelectMode&&i.selection.toSingleRange(),this.pos=e.createAnchor(this.$pos.row,this.$pos.column);var o=this.pos;o.$insertRight=!0,o.detach(),o.markerId=i.addMarker(new n(o.row,o.column,o.row,o.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach((function(i){var n=e.createAnchor(i.row,i.column);n.$insertRight=!0,n.detach(),t.others.push(n)})),i.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var t=this.session,e=this;this.othersActive=!0,this.others.forEach((function(i){i.markerId=t.addMarker(new n(i.row,i.column,i.row,i.column+e.length),e.othersClass,null,!1)}))}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var t=0;t<this.others.length;t++)this.session.removeMarker(this.others[t].markerId)}},this.onUpdate=function(t){if(this.$updating)return this.updateAnchors(t);var e=t;if(e.start.row===e.end.row&&e.start.row===this.pos.row){this.$updating=!0;var i="insert"===t.action?e.end.column-e.start.column:e.start.column-e.end.column,o=e.start.column>=this.pos.column&&e.start.column<=this.pos.column+this.length+1,r=e.start.column-this.pos.column;if(this.updateAnchors(t),o&&(this.length+=i),o&&!this.session.$fromUndo)if("insert"===t.action)for(var s=this.others.length-1;s>=0;s--){var a={row:(l=this.others[s]).row,column:l.column+r};this.doc.insertMergedLines(a,t.lines)}else if("remove"===t.action)for(s=this.others.length-1;s>=0;s--){var l;a={row:(l=this.others[s]).row,column:l.column+r};this.doc.remove(new n(a.row,a.column,a.row,a.column-i))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(t){this.pos.onChange(t);for(var e=this.others.length;e--;)this.others[e].onChange(t);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var t=this,e=this.session,i=function(i,o){e.removeMarker(i.markerId),i.markerId=e.addMarker(new n(i.row,i.column,i.row,i.column+t.length),o,null,!1)};i(this.pos,this.mainClass);for(var o=this.others.length;o--;)i(this.others[o],this.othersClass)}},this.onCursorChange=function(t){if(!this.$updating&&this.session){var e=this.session.selection.getCursor();e.row===this.pos.row&&e.column>=this.pos.column&&e.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",t)):(this.hideOtherMarkers(),this._emit("cursorLeave",t))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var t=this.session.getUndoManager(),e=(t.$undoStack||t.$undostack).length-this.$undoStackDepth,i=0;i<e;i++)t.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(s.prototype),e.PlaceHolder=s})),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(t,e,i){function n(t,e){return t.row==e.row&&t.column==e.column}var o=t("../lib/event"),r=t("../lib/useragent");e.onMouseDown=function(t){var e=t.domEvent,i=e.altKey,s=e.shiftKey,a=e.ctrlKey,l=t.getAccelKey(),c=t.getButton();if(a&&r.isMac&&(c=e.button),t.editor.inMultiSelectMode&&2==c)t.editor.textInput.onContextMenu(t.domEvent);else if(a||i||l){if(0===c){var h,u=t.editor,d=u.selection,p=u.inMultiSelectMode,g=t.getDocumentPosition(),f=d.getCursor(),m=t.inSelection()||d.isEmpty()&&n(g,f),v=t.x,_=t.y,y=u.session,b=u.renderer.pixelToScreenCoordinates(v,_),w=b;if(u.$mouseHandler.$enableJumpToDef)a&&i||l&&i?h=s?"block":"add":i&&u.$blockSelectEnabled&&(h="block");else if(l&&!i){if(h="add",!p&&s)return}else i&&u.$blockSelectEnabled&&(h="block");if(h&&r.isMac&&e.ctrlKey&&u.$mouseHandler.cancelContextMenu(),"add"==h){if(!p&&m)return;if(!p){var k=d.toOrientedRange();u.addSelectionMarker(k)}var C=d.rangeList.rangeAtPoint(g);u.inVirtualSelectionMode=!0,s&&(C=null,k=d.ranges[0]||k,u.removeSelectionMarker(k)),u.once("mouseup",(function(){var t=d.toOrientedRange();C&&t.isEmpty()&&n(C.cursor,t.cursor)?d.substractPoint(t.cursor):(s?d.substractPoint(k.cursor):k&&(u.removeSelectionMarker(k),d.addRange(k)),d.addRange(t)),u.inVirtualSelectionMode=!1}))}else if("block"==h){t.stop(),u.inVirtualSelectionMode=!0;var T,E=[],S=function(){var t=u.renderer.pixelToScreenCoordinates(v,_),e=y.screenToDocumentPosition(t.row,t.column,t.offsetX);n(w,t)&&n(e,d.lead)||(w=t,u.selection.moveToPosition(e),u.renderer.scrollCursorIntoView(),u.removeSelectionMarkers(E),E=d.rectangularRangeBlock(w,b),u.$mouseHandler.$clickSelection&&1==E.length&&E[0].isEmpty()&&(E[0]=u.$mouseHandler.$clickSelection.clone()),E.forEach(u.addSelectionMarker,u),u.updateSelectionMarkers())};p&&!l?d.toSingleRange():!p&&l&&(T=d.toOrientedRange(),u.addSelectionMarker(T)),s?b=y.documentToScreenPosition(d.lead):d.moveToPosition(g),w={row:-1,column:-1};var x=S;o.capture(u.container,(function(t){v=t.clientX,_=t.clientY}),(function(t){S(),clearInterval(R),u.removeSelectionMarkers(E),E.length||(E=[d.toOrientedRange()]),T&&(u.removeSelectionMarker(T),d.toSingleRange(T));for(var e=0;e<E.length;e++)d.addRange(E[e]);u.inVirtualSelectionMode=!1,u.$mouseHandler.$clickSelection=null}));var R=setInterval((function(){x()}),20);return t.preventDefault()}}}else 0===c&&t.editor.inMultiSelectMode&&t.editor.exitMultiSelectMode()}})),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],(function(t,e,i){e.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(t){t.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(t){t.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(t){t.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(t){t.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(t){t.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(t){t.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(t){t.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(t){t.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(t){t.multiSelect.rangeCount>1?t.multiSelect.joinSelections():t.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(t){t.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(t){t.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(t){t.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],e.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(t){t.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(t){return t&&t.inMultiSelectMode}}];var n=t("../keyboard/hash_handler").HashHandler;e.keyboardHandler=new n(e.multiSelectCommands)})),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],(function(t,e,i){function n(t,e){return t.row==e.row&&t.column==e.column}function o(t){t.$multiselectOnSessionChange||(t.$onAddRange=t.$onAddRange.bind(t),t.$onRemoveRange=t.$onRemoveRange.bind(t),t.$onMultiSelect=t.$onMultiSelect.bind(t),t.$onSingleSelect=t.$onSingleSelect.bind(t),t.$multiselectOnSessionChange=e.onSessionChange.bind(t),t.$checkMultiselectChange=t.$checkMultiselectChange.bind(t),t.$multiselectOnSessionChange(t),t.on("changeSession",t.$multiselectOnSessionChange),t.on("mousedown",l),t.commands.addCommands(u.defaultCommands),function(t){function e(e){n&&(t.renderer.setMouseCursor(""),n=!1)}if(!t.textInput)return;var i=t.textInput.getElement(),n=!1;c.addListener(i,"keydown",(function(i){var o=18==i.keyCode&&!(i.ctrlKey||i.shiftKey||i.metaKey);t.$blockSelectEnabled&&o?n||(t.renderer.setMouseCursor("crosshair"),n=!0):n&&e()})),c.addListener(i,"keyup",e),c.addListener(i,"blur",e)}(t))}var r=t("./range_list").RangeList,s=t("./range").Range,a=t("./selection").Selection,l=t("./mouse/multi_select_handler").onMouseDown,c=t("./lib/event"),h=t("./lib/lang"),u=t("./commands/multi_select_commands");e.commands=u.defaultCommands.concat(u.multiSelectCommands);var d=new(0,t("./search").Search),p=t("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(p.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(t,e){if(t){if(!this.inMultiSelectMode&&0===this.rangeCount){var i=this.toOrientedRange();if(this.rangeList.add(i),this.rangeList.add(t),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),e||this.fromOrientedRange(t);this.rangeList.removeAll(),this.rangeList.add(i),this.$onAddRange(i)}t.cursor||(t.cursor=t.end);var n=this.rangeList.add(t);return this.$onAddRange(t),n.length&&this.$onRemoveRange(n),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),e||this.fromOrientedRange(t)}},this.toSingleRange=function(t){t=t||this.ranges[0];var e=this.rangeList.removeAll();e.length&&this.$onRemoveRange(e),t&&this.fromOrientedRange(t)},this.substractPoint=function(t){var e=this.rangeList.substractPoint(t);if(e)return this.$onRemoveRange(e),e[0]},this.mergeOverlappingRanges=function(){var t=this.rangeList.merge();t.length&&this.$onRemoveRange(t)},this.$onAddRange=function(t){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(t),this._signal("addRange",{range:t})},this.$onRemoveRange=function(t){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var e=this.rangeList.ranges.pop();t.push(e),this.rangeCount=0}for(var i=t.length;i--;){var n=this.ranges.indexOf(t[i]);this.ranges.splice(n,1)}this._signal("removeRange",{ranges:t}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(e=e||this.ranges[0])&&!e.isEqual(this.getRange())&&this.fromOrientedRange(e)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new r,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var t=this.ranges.length?this.ranges:[this.getRange()],e=[],i=0;i<t.length;i++){var n=t[i],o=n.start.row,r=n.end.row;if(o===r)e.push(n.clone());else{for(e.push(new s(o,n.start.column,o,this.session.getLine(o).length));++o<r;)e.push(this.getLineRange(o,!0));e.push(new s(r,0,r,n.end.column))}0==i&&!this.isBackwards()&&(e=e.reverse())}this.toSingleRange();for(i=e.length;i--;)this.addRange(e[i])},this.joinSelections=function(){var t=this.rangeList.ranges,e=t[t.length-1],i=s.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(i,e.cursor==e.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var t=this.rangeList.ranges,e=t[t.length-1],i=s.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(i,e.cursor==e.start)}else{var n=this.session.documentToScreenPosition(this.cursor),o=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(n,o).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(t,e,i){var o=[],r=t.column<e.column;if(r)var a=t.column,l=e.column,c=t.offsetX,h=e.offsetX;else a=e.column,l=t.column,c=e.offsetX,h=t.offsetX;var u,d=t.row<e.row;if(d)var p=t.row,g=e.row;else p=e.row,g=t.row;a<0&&(a=0),p<0&&(p=0),p==g&&(i=!0);for(var f=p;f<=g;f++){var m=s.fromPoints(this.session.screenToDocumentPosition(f,a,c),this.session.screenToDocumentPosition(f,l,h));if(m.isEmpty()){if(u&&n(m.end,u))break;u=m.end}m.cursor=r?m.start:m.end,o.push(m)}if(d&&o.reverse(),!i){for(var v=o.length-1;o[v].isEmpty()&&v>0;)v--;if(v>0)for(var _=0;o[_].isEmpty();)_++;for(var y=v;y>=_;y--)o[y].isEmpty()&&o.splice(y,1)}return o}}.call(a.prototype);var g=t("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(t){t.cursor||(t.cursor=t.end);var e=this.getSelectionStyle();return t.marker=this.session.addMarker(t,"ace_selection",e),this.session.$selectionMarkers.push(t),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,t},this.removeSelectionMarker=function(t){if(t.marker){this.session.removeMarker(t.marker);var e=this.session.$selectionMarkers.indexOf(t);-1!=e&&this.session.$selectionMarkers.splice(e,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(t){for(var e=this.session.$selectionMarkers,i=t.length;i--;){var n=t[i];if(n.marker){this.session.removeMarker(n.marker);var o=e.indexOf(n);-1!=o&&e.splice(o,1)}}this.session.selectionMarkerCount=e.length},this.$onAddRange=function(t){this.addSelectionMarker(t.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(t){this.removeSelectionMarkers(t.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(t){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(u.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(t){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(u.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(t){var e=t.command,i=t.editor;if(i.multiSelect){if(e.multiSelectAction)"forEach"==e.multiSelectAction?n=i.forEachSelection(e,t.args):"forEachLine"==e.multiSelectAction?n=i.forEachSelection(e,t.args,!0):"single"==e.multiSelectAction?(i.exitMultiSelectMode(),n=e.exec(i,t.args||{})):n=e.multiSelectAction(i,t.args||{});else{var n=e.exec(i,t.args||{});i.multiSelect.addRange(i.multiSelect.toOrientedRange()),i.multiSelect.mergeOverlappingRanges()}return n}},this.forEachSelection=function(t,e,i){if(!this.inVirtualSelectionMode){var n,o=i&&i.keepOrder,r=1==i||i&&i.$byLines,s=this.session,l=this.selection,c=l.rangeList,h=(o?l:c).ranges;if(!h.length)return t.exec?t.exec(this,e||{}):t(this,e||{});var u=l._eventRegistry;l._eventRegistry={};var d=new a(s);this.inVirtualSelectionMode=!0;for(var p=h.length;p--;){if(r)for(;p>0&&h[p].start.row==h[p-1].end.row;)p--;d.fromOrientedRange(h[p]),d.index=p,this.selection=s.selection=d;var g=t.exec?t.exec(this,e||{}):t(this,e||{});!n&&void 0!==g&&(n=g),d.toOrientedRange(h[p])}d.detach(),this.selection=s.selection=l,this.inVirtualSelectionMode=!1,l._eventRegistry=u,l.mergeOverlappingRanges(),l.ranges[0]&&l.fromOrientedRange(l.ranges[0]);var f=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),f&&f.from==f.to&&this.renderer.animateScrolling(f.from),n}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var t="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var e=this.multiSelect.rangeList.ranges,i=[],n=0;n<e.length;n++)i.push(this.session.getTextRange(e[n]));var o=this.session.getDocument().getNewLineCharacter();(t=i.join(o)).length==(i.length-1)*o.length&&(t="")}else this.selection.isEmpty()||(t=this.session.getTextRange(this.getSelectionRange()));return t},this.$checkMultiselectChange=function(t,e){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var i=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&e==this.multiSelect.anchor)return;var n=e==this.multiSelect.anchor?i.cursor==i.start?i.end:i.start:i.cursor;n.row!=e.row||this.session.$clipPositionToDocument(n.row,n.column).column!=e.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(t,e,i){if((e=e||{}).needle=t||e.needle,null==e.needle){var n=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();e.needle=this.session.getTextRange(n)}this.$search.set(e);var o=this.$search.findAll(this.session);if(!o.length)return 0;var r=this.multiSelect;i||r.toSingleRange(o[0]);for(var s=o.length;s--;)r.addRange(o[s],!0);return n&&r.rangeList.rangeAtPoint(n.start)&&r.addRange(n,!0),o.length},this.selectMoreLines=function(t,e){var i=this.selection.toOrientedRange(),n=i.cursor==i.end,o=this.session.documentToScreenPosition(i.cursor);this.selection.$desiredColumn&&(o.column=this.selection.$desiredColumn);var r,a=this.session.screenToDocumentPosition(o.row+t,o.column);if(i.isEmpty())c=a;else var l=this.session.documentToScreenPosition(n?i.end:i.start),c=this.session.screenToDocumentPosition(l.row+t,l.column);n?(r=s.fromPoints(a,c)).cursor=r.start:(r=s.fromPoints(c,a)).cursor=r.end;if(r.desiredColumn=o.column,this.selection.inMultiSelectMode){if(e)var h=i.cursor}else this.selection.addRange(i);this.selection.addRange(r),h&&this.selection.substractPoint(h)},this.transposeSelections=function(t){for(var e=this.session,i=e.multiSelect,n=i.ranges,o=n.length;o--;){if((a=n[o]).isEmpty()){var r=e.getWordRange(a.start.row,a.start.column);a.start.row=r.start.row,a.start.column=r.start.column,a.end.row=r.end.row,a.end.column=r.end.column}}i.mergeOverlappingRanges();var s=[];for(o=n.length;o--;){var a=n[o];s.unshift(e.getTextRange(a))}t<0?s.unshift(s.pop()):s.push(s.shift());for(o=n.length;o--;){r=(a=n[o]).clone();e.replace(a,s[o]),a.start.row=r.start.row,a.start.column=r.start.column}i.fromOrientedRange(i.ranges[0])},this.selectMore=function(t,e,i){var n=this.session,o=n.multiSelect.toOrientedRange();if(!o.isEmpty()||((o=n.getWordRange(o.start.row,o.start.column)).cursor=-1==t?o.start:o.end,this.multiSelect.addRange(o),!i)){var r=n.getTextRange(o),s=function(t,e,i){return d.$options.wrap=!0,d.$options.needle=e,d.$options.backwards=-1==i,d.find(t)}(n,r,t);s&&(s.cursor=-1==t?s.start:s.end,this.session.unfold(s),this.multiSelect.addRange(s),this.renderer.scrollCursorIntoView(null,.5)),e&&this.multiSelect.substractPoint(o.cursor)}},this.alignCursors=function(){var t=this.session,e=t.multiSelect,i=e.ranges,n=-1,o=i.filter((function(t){if(t.cursor.row==n)return!0;n=t.cursor.row}));if(i.length&&o.length!=i.length-1){o.forEach((function(t){e.substractPoint(t.cursor)}));var r=0,a=1/0,l=i.map((function(e){var i=e.cursor,n=t.getLine(i.row).substr(i.column).search(/\S/g);return-1==n&&(n=0),i.column>r&&(r=i.column),n<a&&(a=n),n}));i.forEach((function(e,i){var n=e.cursor,o=r-n.column,c=l[i]-a;o>c?t.insert(n,h.stringRepeat(" ",o-c)):t.remove(new s(n.row,n.column,n.row,n.column-o+c)),e.start.column=e.end.column=r,e.start.row=e.end.row=n.row,e.cursor=e.end})),e.fromOrientedRange(i[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var c=this.selection.getRange(),u=c.start.row,d=c.end.row,p=u==d;if(p){var g,f=this.session.getLength();do{g=this.session.getLine(d)}while(/[=:]/.test(g)&&++d<f);do{g=this.session.getLine(u)}while(/[=:]/.test(g)&&--u>0);u<0&&(u=0),d>=f&&(d=f-1)}var m=this.session.removeFullLines(u,d);m=this.$reAlignText(m,p),this.session.insert({row:u,column:0},m.join("\n")+"\n"),p||(c.start.column=0,c.end.column=m[m.length-1].length),this.selection.setRange(c)}},this.$reAlignText=function(t,e){function i(t){return h.stringRepeat(" ",t)}function n(t){return t[2]?i(o)+t[2]+i(r-t[2].length+s)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}var o,r,s,a=!0,l=!0;return t.map((function(t){var e=t.match(/(\s*)(.*?)(\s*)([=:].*)/);return e?null==o?(o=e[1].length,r=e[2].length,s=e[3].length,e):(o+r+s!=e[1].length+e[2].length+e[3].length&&(l=!1),o!=e[1].length&&(a=!1),o>e[1].length&&(o=e[1].length),r<e[2].length&&(r=e[2].length),s>e[3].length&&(s=e[3].length),e):[t]})).map(e?n:a?l?function(t){return t[2]?i(o+r-t[2].length)+t[2]+i(s)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}:n:function(t){return t[2]?i(o)+t[2]+i(s)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]})}}).call(g.prototype),e.onSessionChange=function(t){var e=t.session;e&&!e.multiSelect&&(e.$selectionMarkers=[],e.selection.$initRangeList(),e.multiSelect=e.selection),this.multiSelect=e&&e.multiSelect;var i=t.oldSession;i&&(i.multiSelect.off("addRange",this.$onAddRange),i.multiSelect.off("removeRange",this.$onRemoveRange),i.multiSelect.off("multiSelect",this.$onMultiSelect),i.multiSelect.off("singleSelect",this.$onSingleSelect),i.multiSelect.lead.off("change",this.$checkMultiselectChange),i.multiSelect.anchor.off("change",this.$checkMultiselectChange)),e&&(e.multiSelect.on("addRange",this.$onAddRange),e.multiSelect.on("removeRange",this.$onRemoveRange),e.multiSelect.on("multiSelect",this.$onMultiSelect),e.multiSelect.on("singleSelect",this.$onSingleSelect),e.multiSelect.lead.on("change",this.$checkMultiselectChange),e.multiSelect.anchor.on("change",this.$checkMultiselectChange)),e&&this.inMultiSelectMode!=e.selection.inMultiSelectMode&&(e.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},e.MultiSelect=o,t("./config").defineOptions(g.prototype,"editor",{enableMultiselect:{set:function(t){o(this),t?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",l)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",l))},value:!0},enableBlockSelect:{set:function(t){this.$blockSelectEnabled=t},value:!0}})})),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],(function(t,e,i){"use strict";var n=t("../../range").Range,o=e.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(t,e,i){var n=t.getLine(i);return this.foldingStartMarker.test(n)?"start":"markbeginend"==e&&this.foldingStopMarker&&this.foldingStopMarker.test(n)?"end":""},this.getFoldWidgetRange=function(t,e,i){return null},this.indentationBlock=function(t,e,i){var o=/\S/,r=t.getLine(e),s=r.search(o);if(-1!=s){for(var a=i||r.length,l=t.getLength(),c=e,h=e;++e<l;){var u=t.getLine(e).search(o);if(-1!=u){if(u<=s){var d=t.getTokenAt(e,0);if(!d||"string"!==d.type)break}h=e}}if(h>c){var p=t.getLine(h).length;return new n(c,a,h,p)}}},this.openingBracketBlock=function(t,e,i,o,r){var s={row:i,column:o+1},a=t.$findClosingBracket(e,s,r);if(a){var l=t.foldWidgets[a.row];return null==l&&(l=t.getFoldWidget(a.row)),"start"==l&&a.row>s.row&&(a.row--,a.column=t.getLine(a.row).length),n.fromPoints(s,a)}},this.closingBracketBlock=function(t,e,i,o,r){var s={row:i,column:o},a=t.$findOpeningBracket(e,s);if(a)return a.column++,s.column--,n.fromPoints(a,s)}}).call(o.prototype)})),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],(function(t,e,i){"use strict";e.isDark=!1,e.cssClass="ace-tm",e.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',e.$id="ace/theme/textmate",t("../lib/dom").importCssString(e.cssText,e.cssClass)})),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],(function(t,e,i){"use strict";function n(t){this.session=t,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}var o=t("./lib/dom");(function(){this.getRowLength=function(t){var e;return e=this.lineWidgets&&this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0,this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1+e:1+e},this.$getWidgetScreenLength=function(){var t=0;return this.lineWidgets.forEach((function(e){e&&e.rowCount&&!e.hidden&&(t+=e.rowCount)})),t},this.$onChangeEditor=function(t){this.attach(t.editor)},this.attach=function(t){t&&t.widgetManager&&t.widgetManager!=this&&t.widgetManager.detach(),this.editor!=t&&(this.detach(),this.editor=t,t&&(t.widgetManager=this,t.renderer.on("beforeRender",this.measureWidgets),t.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(t){var e=this.editor;if(e){this.editor=null,e.widgetManager=null,e.renderer.off("beforeRender",this.measureWidgets),e.renderer.off("afterRender",this.renderWidgets);var i=this.session.lineWidgets;i&&i.forEach((function(t){t&&t.el&&t.el.parentNode&&(t._inDocument=!1,t.el.parentNode.removeChild(t.el))}))}},this.updateOnFold=function(t,e){var i=e.lineWidgets;if(i&&t.action){for(var n=t.data,o=n.start.row,r=n.end.row,s="add"==t.action,a=o+1;a<r;a++)i[a]&&(i[a].hidden=s);i[r]&&(s?i[o]?i[r].hidden=s:i[o]=i[r]:(i[o]==i[r]&&(i[o]=void 0),i[r].hidden=s))}},this.updateOnChange=function(t){var e=this.session.lineWidgets;if(e){var i=t.start.row,n=t.end.row-i;if(0!==n)if("remove"==t.action){var o=e.splice(i+1,n);!e[i]&&o[o.length-1]&&(e[i]=o.pop()),o.forEach((function(t){t&&this.removeLineWidget(t)}),this),this.$updateRows()}else{var r=new Array(n);e[i]&&null!=e[i].column&&t.start.column>e[i].column&&i++,r.unshift(i,0),e.splice.apply(e,r),this.$updateRows()}}},this.$updateRows=function(){var t=this.session.lineWidgets;if(t){var e=!0;t.forEach((function(t,i){if(t)for(e=!1,t.row=i;t.$oldWidget;)t.$oldWidget.row=i,t=t.$oldWidget})),e&&(this.session.lineWidgets=null)}},this.$registerLineWidget=function(t){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var e=this.session.lineWidgets[t.row];return e&&(t.$oldWidget=e,e.el&&e.el.parentNode&&(e.el.parentNode.removeChild(e.el),e._inDocument=!1)),this.session.lineWidgets[t.row]=t,t},this.addLineWidget=function(t){if(this.$registerLineWidget(t),t.session=this.session,!this.editor)return t;var e=this.editor.renderer;t.html&&!t.el&&(t.el=o.createElement("div"),t.el.innerHTML=t.html),t.el&&(o.addCssClass(t.el,"ace_lineWidgetContainer"),t.el.style.position="absolute",t.el.style.zIndex=5,e.container.appendChild(t.el),t._inDocument=!0,t.coverGutter||(t.el.style.zIndex=3),null==t.pixelHeight&&(t.pixelHeight=t.el.offsetHeight)),null==t.rowCount&&(t.rowCount=t.pixelHeight/e.layerConfig.lineHeight);var i=this.session.getFoldAt(t.row,0);if(t.$fold=i,i){var n=this.session.lineWidgets;t.row!=i.end.row||n[i.start.row]?t.hidden=!0:n[i.start.row]=t}return this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows(),this.renderWidgets(null,e),this.onWidgetChanged(t),t},this.removeLineWidget=function(t){if(t._inDocument=!1,t.session=null,t.el&&t.el.parentNode&&t.el.parentNode.removeChild(t.el),t.editor&&t.editor.destroy)try{t.editor.destroy()}catch(t){}if(this.session.lineWidgets){var e=this.session.lineWidgets[t.row];if(e==t)this.session.lineWidgets[t.row]=t.$oldWidget,t.$oldWidget&&this.onWidgetChanged(t.$oldWidget);else for(;e;){if(e.$oldWidget==t){e.$oldWidget=t.$oldWidget;break}e=e.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(t){for(var e=this.session.lineWidgets,i=e&&e[t],n=[];i;)n.push(i),i=i.$oldWidget;return n},this.onWidgetChanged=function(t){this.session._changedWidgets.push(t),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(t,e){var i=this.session._changedWidgets,n=e.layerConfig;if(i&&i.length){for(var o=1/0,r=0;r<i.length;r++){var s=i[r];if(s&&s.el&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,e.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/n.characterWidth));var a=s.h/n.lineHeight;s.coverLine&&((a-=this.session.getRowLineCount(s.row))<0&&(a=0)),s.rowCount!=a&&(s.rowCount=a,s.row<o&&(o=s.row))}}o!=1/0&&(this.session._emit("changeFold",{data:{start:{row:o}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(t,e){var i=e.layerConfig,n=this.session.lineWidgets;if(n){for(var o=Math.min(this.firstRow,i.firstRow),r=Math.max(this.lastRow,i.lastRow,n.length);o>0&&!n[o];)o--;this.firstRow=i.firstRow,this.lastRow=i.lastRow,e.$cursorLayer.config=i;for(var s=o;s<=r;s++){var a=n[s];if(a&&a.el)if(a.hidden)a.el.style.top=-100-(a.pixelHeight||0)+"px";else{a._inDocument||(a._inDocument=!0,e.container.appendChild(a.el));var l=e.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;a.coverLine||(l+=i.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=l-i.offset+"px";var c=a.coverGutter?0:e.gutterWidth;a.fixedWidth||(c-=e.scrollLeft),a.el.style.left=c+"px",a.fullWidth&&a.screenWidth&&(a.el.style.minWidth=i.width+2*i.padding+"px"),a.fixedWidth?a.el.style.right=e.scrollBar.getWidth()+"px":a.el.style.right=""}}}}}).call(n.prototype),e.LineWidgets=n})),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],(function(t,e,i){"use strict";function n(t,e,i){var n=t.getAnnotations().sort(s.comparePoints);if(n.length){var o=function(t,e,i){for(var n=0,o=t.length-1;n<=o;){var r=n+o>>1,s=i(e,t[r]);if(s>0)n=r+1;else{if(!(s<0))return r;o=r-1}}return-(n+1)}(n,{row:e,column:-1},s.comparePoints);o<0&&(o=-o-1),o>=n.length?o=i>0?0:n.length-1:0===o&&i<0&&(o=n.length-1);var r=n[o];if(r&&i){if(r.row===e){do{r=n[o+=i]}while(r&&r.row===e);if(!r)return n.slice()}var a=[];e=r.row;do{a[i<0?"unshift":"push"](r),r=n[o+=i]}while(r&&r.row==e);return a.length&&a}}}var o=t("../line_widgets").LineWidgets,r=t("../lib/dom"),s=t("../range").Range;e.showErrorMarker=function(t,e){var i=t.session;i.widgetManager||(i.widgetManager=new o(i),i.widgetManager.attach(t));var s=t.getCursorPosition(),a=s.row,l=i.widgetManager.getWidgetsAtRow(a).filter((function(t){return"errorMarker"==t.type}))[0];l?l.destroy():a-=e;var c,h=n(i,a,e);if(h){var u=h[0];s.column=(u.pos&&"number"!=typeof u.column?u.pos.sc:u.column)||0,s.row=u.row,c=t.renderer.$gutterLayer.$annotations[s.row]}else{if(l)return;c={text:["Looks good!"],className:"ace_ok"}}t.session.unfold(s.row),t.selection.moveToPosition(s);var d={row:s.row,fixedWidth:!0,coverGutter:!0,el:r.createElement("div"),type:"errorMarker"},p=d.el.appendChild(r.createElement("div")),g=d.el.appendChild(r.createElement("div"));g.className="error_widget_arrow "+c.className;var f=t.renderer.$cursorLayer.getPixelPosition(s).left;g.style.left=f+t.renderer.gutterWidth-5+"px",d.el.className="error_widget_wrapper",p.className="error_widget "+c.className,p.innerHTML=c.text.join("<br>"),p.appendChild(r.createElement("div"));var m=function(t,e,i){if(0===e&&("esc"===i||"return"===i))return d.destroy(),{command:"null"}};d.destroy=function(){t.$mouseHandler.isMousePressed||(t.keyBinding.removeKeyboardHandler(m),i.widgetManager.removeLineWidget(d),t.off("changeSelection",d.destroy),t.off("changeSession",d.destroy),t.off("mouseup",d.destroy),t.off("change",d.destroy))},t.keyBinding.addKeyboardHandler(m),t.on("changeSelection",d.destroy),t.on("changeSession",d.destroy),t.on("mouseup",d.destroy),t.on("change",d.destroy),t.session.widgetManager.addLineWidget(d),d.el.onmousedown=t.focus.bind(t),t.renderer.scrollCursorIntoView(null,.5,{bottom:d.el.offsetHeight})},r.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")})),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],(function(t,e,n){"use strict";t("./lib/fixoldbrowsers");var o=t("./lib/dom"),r=t("./lib/event"),s=t("./range").Range,a=t("./editor").Editor,l=t("./edit_session").EditSession,c=t("./undomanager").UndoManager,h=t("./virtual_renderer").VirtualRenderer;t("./worker/worker_client"),t("./keyboard/hash_handler"),t("./placeholder"),t("./multi_select"),t("./mode/folding/fold_mode"),t("./theme/textmate"),t("./ext/error_marker"),e.config=t("./config"),e.require=t,e.define=i.amdD,e.edit=function(t,i){if("string"==typeof t){var n=t;if(!(t=document.getElementById(n)))throw new Error("ace.edit can't find div #"+n)}if(t&&t.env&&t.env.editor instanceof a)return t.env.editor;var s="";if(t&&/input|textarea/i.test(t.tagName)){var l=t;s=l.value,t=o.createElement("pre"),l.parentNode.replaceChild(t,l)}else t&&(s=t.textContent,t.innerHTML="");var c=e.createEditSession(s),u=new a(new h(t),c,i),d={document:c,editor:u,onResize:u.resize.bind(u,null)};return l&&(d.textarea=l),r.addListener(window,"resize",d.onResize),u.on("destroy",(function(){r.removeListener(window,"resize",d.onResize),d.editor.container.env=null})),u.container.env=u.env=d,u},e.createEditSession=function(t,e){var i=new l(t,e);return i.setUndoManager(new c),i},e.Range=s,e.Editor=a,e.EditSession=l,e.UndoManager=c,e.VirtualRenderer=h,e.version=e.config.version})),ace.require(["ace/ace"],(function(e){for(var i in e&&(e.config.init(!0),e.define=ace.define),window.ace||(window.ace=e),e)e.hasOwnProperty(i)&&(window.ace[i]=e[i]);window.ace.default=window.ace,t&&(t.exports=window.ace)}))},226:(t,e,i)=>{t=i.nmd(t),ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(t,e,i){"use strict";var n=t("../lib/oop"),o=t("./text_highlight_rules").TextHighlightRules,r=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},r.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};n.inherits(r,o),r.getTagRule=function(t){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},r.getStartRule=function(t){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:t}},r.getEndRule=function(t){return{token:"comment.doc",regex:"\\*\\/",next:t}},e.DocCommentHighlightRules=r})),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],(function(t,e,i){"use strict";function n(){var t=l.replace("\\d","\\d\\-"),e={onMatch:function(t,e,i){var n="/"==t.charAt(1)?2:1;return 1==n?(e!=this.nextState?i.unshift(this.next,this.nextState,0):i.unshift(this.next),i[2]++):2==n&&e==this.nextState&&(i[1]--,(!i[1]||i[1]<0)&&(i.shift(),i.shift())),[{type:"meta.tag.punctuation."+(1==n?"":"end-")+"tag-open.xml",value:t.slice(0,n)},{type:"meta.tag.tag-name.xml",value:t.substr(n)}]},regex:"</?"+t,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(e);var i={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[i,e,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(t,e,i){return e==i[0]&&i.shift(),2==t.length&&(i[0]==this.nextState&&i[1]--,(!i[1]||i[1]<0)&&i.splice(0,2)),this.next=i[0]||"start",[{type:this.token,value:t}]},nextState:"jsx"},i,o("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:t},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},e],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function o(t){return[{token:"comment",regex:/\/\*/,next:[s.getTagRule(),{token:"comment",regex:"\\*\\/",next:t||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[s.getTagRule(),{token:"comment",regex:"$|^",next:t||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}var r=t("../lib/oop"),s=t("./doc_comment_highlight_rules").DocCommentHighlightRules,a=t("./text_highlight_rules").TextHighlightRules,l="[a-zA-Z\\$_¡-￿][a-zA-Z\\d\\$_¡-￿]*",c=function(t){var e=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),i="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[s.getStartRule("doc-start"),o("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+l+")(\\.)(prototype)(\\.)("+l+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+l+")(\\.)("+l+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+l+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+l+")(\\.)("+l+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+l+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+l+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"from(?=\\s*('|\"))"},{token:"keyword",regex:"(?:case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void)\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:e,regex:l},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+l+")(\\.)("+l+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:l},{regex:"",token:"empty",next:"no_regex"}],start:[s.getStartRule("doc-start"),o("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:l},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:i},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:i},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},t&&t.noES6||(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(t,e,i){if(this.next="{"==t?this.nextState:"","{"==t&&i.length)i.unshift("start",e);else if("}"==t&&i.length&&(i.shift(),this.next=i.shift(),-1!=this.next.indexOf("string")||-1!=this.next.indexOf("jsx")))return"paren.quasi.end";return"{"==t?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:i},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),(!t||0!=t.jsx)&&n.call(this)),this.embedRules(s,"doc-",[s.getEndRule("no_regex")]),this.normalizeRules()};r.inherits(c,a),e.JavaScriptHighlightRules=c})),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],(function(t,e,i){"use strict";var n=t("../range").Range,o=function(){};(function(){this.checkOutdent=function(t,e){return!!/^\s+$/.test(t)&&/^\s*\}/.test(e)},this.autoOutdent=function(t,e){var i=t.getLine(e).match(/^(\s*\})/);if(!i)return 0;var o=i[1].length,r=t.findMatchingBracket({row:e,column:o});if(!r||r.row==e)return 0;var s=this.$getIndent(t.getLine(r.row));t.replace(new n(e,0,e,o-1),s)},this.$getIndent=function(t){return t.match(/^\s*/)[0]}}).call(o.prototype),e.MatchingBraceOutdent=o})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(t,e,i){"use strict";var n=t("../../lib/oop"),o=t("../../range").Range,r=t("./fold_mode").FoldMode,s=e.FoldMode=function(t){t&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+t.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+t.end)))};n.inherits(s,r),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(t,e,i){var n=t.getLine(i);if(this.singleLineBlockCommentRe.test(n)&&!this.startRegionRe.test(n)&&!this.tripleStarBlockCommentRe.test(n))return"";var o=this._getFoldWidgetBase(t,e,i);return!o&&this.startRegionRe.test(n)?"start":o},this.getFoldWidgetRange=function(t,e,i,n){var o,r=t.getLine(i);if(this.startRegionRe.test(r))return this.getCommentRegionBlock(t,r,i);if(o=r.match(this.foldingStartMarker)){var s=o.index;if(o[1])return this.openingBracketBlock(t,o[1],i,s);var a=t.getCommentFoldRange(i,s+o[0].length,1);return a&&!a.isMultiLine()&&(n?a=this.getSectionRange(t,i):"all"!=e&&(a=null)),a}if("markbegin"!==e&&(o=r.match(this.foldingStopMarker))){s=o.index+o[0].length;return o[1]?this.closingBracketBlock(t,o[1],i,s):t.getCommentFoldRange(i,s,-1)}},this.getSectionRange=function(t,e){for(var i=t.getLine(e),n=i.search(/\S/),r=e,s=i.length,a=e+=1,l=t.getLength();++e<l;){var c=(i=t.getLine(e)).search(/\S/);if(-1!==c){if(n>c)break;var h=this.getFoldWidgetRange(t,"all",e);if(h){if(h.start.row<=r)break;if(h.isMultiLine())e=h.end.row;else if(n==c)break}a=e}}return new o(r,s,a,t.getLine(a).length)},this.getCommentRegionBlock=function(t,e,i){for(var n=e.search(/\s*$/),r=t.getLength(),s=i,a=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;++i<r;){e=t.getLine(i);var c=a.exec(e);if(c&&(c[1]?l--:l++,!l))break}if(i>s)return new o(s,n,i,e.length)}}.call(s.prototype)})),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],(function(t,e,i){"use strict";var n=t("../lib/oop"),o=t("./text").Mode,r=t("./javascript_highlight_rules").JavaScriptHighlightRules,s=t("./matching_brace_outdent").MatchingBraceOutdent,a=t("../worker/worker_client").WorkerClient,l=t("./behaviour/cstyle").CstyleBehaviour,c=t("./folding/cstyle").FoldMode,h=function(){this.HighlightRules=r,this.$outdent=new s,this.$behaviour=new l,this.foldingRules=new c};n.inherits(h,o),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.getNextLineIndent=function(t,e,i){var n=this.$getIndent(e),o=this.getTokenizer().getLineTokens(e,t),r=o.tokens,s=o.state;if(r.length&&"comment"==r[r.length-1].type)return n;if("start"==t||"no_regex"==t)(a=e.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/))&&(n+=i);else if("doc-start"==t){if("start"==s||"no_regex"==s)return"";var a;(a=e.match(/^\s*(\/?)\*/))&&(a[1]&&(n+=" "),n+="* ")}return n},this.checkOutdent=function(t,e,i){return this.$outdent.checkOutdent(e,i)},this.autoOutdent=function(t,e,i){this.$outdent.autoOutdent(e,i)},this.createWorker=function(t){var e=new a(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return e.attachToDocument(t.getDocument()),e.on("annotate",(function(e){t.setAnnotations(e.data)})),e.on("terminate",(function(){t.clearAnnotations()})),e},this.$id="ace/mode/javascript"}.call(h.prototype),e.Mode=h})),ace.require(["ace/mode/javascript"],(function(e){t&&(t.exports=e)}))},385:(t,e,i)=>{t=i.nmd(t),ace.define("ace/theme/chrome",["require","exports","module","ace/lib/dom"],(function(t,e,i){e.isDark=!1,e.cssClass="ace-chrome",e.cssText='.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t("../lib/dom").importCssString(e.cssText,e.cssClass)})),ace.require(["ace/theme/chrome"],(function(e){t&&(t.exports=e)}))},97:function(t,e,i){var n,o,r;o=[i(334)],void 0===(r="function"==typeof(n=function(t){"use strict";return t})?n.apply(e,o):n)||(t.exports=r)},334:function(t,e,i){var n,o,r;o=[],void 0===(r="function"==typeof(n=function(){"use strict";var t={constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return t.CONNECTING_SNAP_RADIUS=t.SNAP_RADIUS,t.CURRENT_CONNECTION_PREFERENCE=8,t.BUMP_DELAY=250,t.BUMP_RANDOMNESS=10,t.COLLAPSE_CHARS=30,t.LONGPRESS=750,t.SOUND_LIMIT=100,t.DRAG_STACK=!0,t.HSV_SATURATION=.45,t.HSV_VALUE=.65,t.SPRITE={width:96,height:124,url:"sprites.png"},t.INPUT_VALUE=1,t.OUTPUT_VALUE=2,t.NEXT_STATEMENT=3,t.PREVIOUS_STATEMENT=4,t.DUMMY_INPUT=5,t.ALIGN_LEFT=-1,t.ALIGN_CENTRE=0,t.ALIGN_RIGHT=1,t.DRAG_NONE=0,t.DRAG_STICKY=1,t.DRAG_BEGIN=1,t.DRAG_FREE=2,t.OPPOSITE_TYPE=[],t.OPPOSITE_TYPE[t.INPUT_VALUE]=t.OUTPUT_VALUE,t.OPPOSITE_TYPE[t.OUTPUT_VALUE]=t.INPUT_VALUE,t.OPPOSITE_TYPE[t.NEXT_STATEMENT]=t.PREVIOUS_STATEMENT,t.OPPOSITE_TYPE[t.PREVIOUS_STATEMENT]=t.NEXT_STATEMENT,t.TOOLBOX_AT_TOP=0,t.TOOLBOX_AT_BOTTOM=1,t.TOOLBOX_AT_LEFT=2,t.TOOLBOX_AT_RIGHT=3,t.DELETE_AREA_NONE=null,t.DELETE_AREA_TRASH=1,t.DELETE_AREA_TOOLBOX=2,t.VARIABLE_CATEGORY_NAME="VARIABLE",t.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",t.PROCEDURE_CATEGORY_NAME="PROCEDURE",t.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",t.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",t.registry={},t.registry.typeMap_={},t.registry.DEFAULT="default",t.registry.Type=function(t){this.name_=t},t.registry.Type.prototype.toString=function(){return this.name_},t.registry.Type.CONNECTION_CHECKER=new t.registry.Type("connectionChecker"),t.registry.Type.EVENT=new t.registry.Type("event"),t.registry.Type.FIELD=new t.registry.Type("field"),t.registry.Type.RENDERER=new t.registry.Type("renderer"),t.registry.Type.TOOLBOX=new t.registry.Type("toolbox"),t.registry.Type.THEME=new t.registry.Type("theme"),t.registry.Type.TOOLBOX_ITEM=new t.registry.Type("toolboxItem"),t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new t.registry.Type("flyoutsVerticalToolbox"),t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new t.registry.Type("flyoutsHorizontalToolbox"),t.registry.register=function(e,i,n,o){if(!(e instanceof t.registry.Type)&&"string"!=typeof e||""==String(e).trim())throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=String(e).toLowerCase(),"string"!=typeof i||""==i.trim())throw Error('Invalid name "'+i+'". The name must be a non-empty string.');if(i=i.toLowerCase(),!n)throw Error("Can not register a null value");var r=t.registry.typeMap_[e];if(r||(r=t.registry.typeMap_[e]={}),t.registry.validate_(e,n),!o&&r[i])throw Error('Name "'+i+'" with type "'+e+'" already registered.');r[i]=n},t.registry.validate_=function(e,i){switch(e){case String(t.registry.Type.FIELD):if("function"!=typeof i.fromJson)throw Error('Type "'+e+'" must have a fromJson function')}},t.registry.unregister=function(e,i){e=String(e).toLowerCase(),i=i.toLowerCase();var n=t.registry.typeMap_[e];n?n[i]?delete t.registry.typeMap_[e][i]:console.warn('No name "'+i+'" with type "'+e+'" found'):console.warn('No type "'+e+'" found')},t.registry.getItem_=function(e,i){e=String(e).toLowerCase(),i=i.toLowerCase();var n=t.registry.typeMap_[e];return n?n[i]?n[i]:(console.warn('No name "'+i+'" with type "'+e+'" found'),null):(console.warn('No type "'+e+'" found'),null)},t.registry.hasItem=function(e,i){return e=String(e).toLowerCase(),i=i.toLowerCase(),!!(e=t.registry.typeMap_[e])&&!!e[i]},t.registry.getClass=function(e,i){return t.registry.getItem_(e,i)},t.registry.getObject=function(e,i){return t.registry.getItem_(e,i)},t.registry.getClassFromOptions=function(e,i){return"function"==typeof(i=i.plugins[e.toString()]||t.registry.DEFAULT)?i:t.registry.getClass(e,i)},t.utils={},t.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof i.g?i.g:this}(),t.Msg={},t.utils.global.Blockly||(t.utils.global.Blockly={}),t.utils.global.Blockly.Msg||(t.utils.global.Blockly.Msg=t.Msg),t.utils.colour={},t.utils.colour.parse=function(e){e=String(e).toLowerCase().trim();var i=t.utils.colour.names[e];if(i)return i;if(i="#"==(i="0x"==e.substring(0,2)?"#"+e.substring(2):e)[0]?i:"#"+i,/^#[0-9a-f]{6}$/.test(i))return i;if(/^#[0-9a-f]{3}$/.test(i))return["#",i[1],i[1],i[2],i[2],i[3],i[3]].join("");var n=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return n&&(e=Number(n[1]),i=Number(n[2]),n=Number(n[3]),0<=e&&256>e&&0<=i&&256>i&&0<=n&&256>n)?t.utils.colour.rgbToHex(e,i,n):null},t.utils.colour.rgbToHex=function(t,e,i){return e=t<<16|e<<8|i,16>t?"#"+(16777216|e).toString(16).substr(1):"#"+e.toString(16)},t.utils.colour.hexToRgb=function(e){return(e=t.utils.colour.parse(e))?[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]:[0,0,0]},t.utils.colour.hsvToHex=function(e,i,n){var o=0,r=0,s=0;if(0==i)s=r=o=n;else{var a=Math.floor(e/60),l=e/60-a;e=n*(1-i);var c=n*(1-i*l);switch(i=n*(1-i*(1-l)),a){case 1:o=c,r=n,s=e;break;case 2:o=e,r=n,s=i;break;case 3:o=e,r=c,s=n;break;case 4:o=i,r=e,s=n;break;case 5:o=n,r=e,s=c;break;case 6:case 0:o=n,r=i,s=e}}return t.utils.colour.rgbToHex(Math.floor(o),Math.floor(r),Math.floor(s))},t.utils.colour.blend=function(e,i,n){return(e=t.utils.colour.parse(e))&&(i=t.utils.colour.parse(i))?(e=t.utils.colour.hexToRgb(e),i=t.utils.colour.hexToRgb(i),t.utils.colour.rgbToHex(Math.round(i[0]+n*(e[0]-i[0])),Math.round(i[1]+n*(e[1]-i[1])),Math.round(i[2]+n*(e[2]-i[2])))):null},t.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},t.utils.Coordinate=function(t,e){this.x=t,this.y=e},t.utils.Coordinate.equals=function(t,e){return t==e||!(!t||!e)&&t.x==e.x&&t.y==e.y},t.utils.Coordinate.distance=function(t,e){var i=t.x-e.x;return t=t.y-e.y,Math.sqrt(i*i+t*t)},t.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.utils.Coordinate.difference=function(e,i){return new t.utils.Coordinate(e.x-i.x,e.y-i.y)},t.utils.Coordinate.sum=function(e,i){return new t.utils.Coordinate(e.x+i.x,e.y+i.y)},t.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},t.utils.Coordinate.prototype.translate=function(t,e){return this.x+=t,this.y+=e,this},t.utils.Rect=function(t,e,i,n){this.top=t,this.bottom=e,this.left=i,this.right=n},t.utils.Rect.prototype.contains=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},t.utils.string={},t.utils.string.startsWith=function(t,e){return 0==t.lastIndexOf(e,0)},t.utils.string.shortestStringLength=function(t){return t.length?t.reduce((function(t,e){return t.length<e.length?t:e})).length:0},t.utils.string.commonWordPrefix=function(e,i){if(!e.length)return 0;if(1==e.length)return e[0].length;var n=0;i=i||t.utils.string.shortestStringLength(e);for(var o=0;o<i;o++){for(var r=e[0][o],s=1;s<e.length;s++)if(r!=e[s][o])return n;" "==r&&(n=o+1)}for(s=1;s<e.length;s++)if((r=e[s][o])&&" "!=r)return n;return i},t.utils.string.commonWordSuffix=function(e,i){if(!e.length)return 0;if(1==e.length)return e[0].length;var n=0;i=i||t.utils.string.shortestStringLength(e);for(var o=0;o<i;o++){for(var r=e[0].substr(-o-1,1),s=1;s<e.length;s++)if(r!=e[s].substr(-o-1,1))return n;" "==r&&(n=o+1)}for(s=1;s<e.length;s++)if((r=e[s].charAt(e[s].length-o-1))&&" "!=r)return n;return i},t.utils.string.wrap=function(e,i){e=e.split("\n");for(var n=0;n<e.length;n++)e[n]=t.utils.string.wrapLine_(e[n],i);return e.join("\n")},t.utils.string.wrapLine_=function(e,i){if(e.length<=i)return e;for(var n=e.trim().split(/\s+/),o=0;o<n.length;o++)n[o].length>i&&(i=n[o].length);o=-1/0;var r=1;do{var s=o,a=e;e=[];var l=n.length/r,c=1;for(o=0;o<n.length-1;o++)c<(o+1.5)/l?(c++,e[o]=!0):e[o]=!1;e=t.utils.string.wrapMutate_(n,e,i),o=t.utils.string.wrapScore_(n,e,i),e=t.utils.string.wrapToText_(n,e),r++}while(o>s);return a},t.utils.string.wrapScore_=function(t,e,i){for(var n=[0],o=[],r=0;r<t.length;r++)n[n.length-1]+=t[r].length,!0===e[r]?(n.push(0),o.push(t[r].charAt(t[r].length-1))):!1===e[r]&&n[n.length-1]++;for(t=Math.max.apply(Math,n),r=e=0;r<n.length;r++)e-=2*Math.pow(Math.abs(i-n[r]),1.5),e-=Math.pow(t-n[r],1.5),-1!=".?!".indexOf(o[r])?e+=i/3:-1!=",;)]}".indexOf(o[r])&&(e+=i/4);return 1<n.length&&n[n.length-1]<=n[n.length-2]&&(e+=.5),e},t.utils.string.wrapMutate_=function(e,i,n){for(var o,r=t.utils.string.wrapScore_(e,i,n),s=0;s<i.length-1;s++)if(i[s]!=i[s+1]){var a=[].concat(i);a[s]=!a[s],a[s+1]=!a[s+1];var l=t.utils.string.wrapScore_(e,a,n);l>r&&(r=l,o=a)}return o?t.utils.string.wrapMutate_(e,o,n):i},t.utils.string.wrapToText_=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(t[n]),void 0!==e[n]&&i.push(e[n]?"\n":" ");return i.join("")},t.utils.Size=function(t,e){this.width=t,this.height=e},t.utils.Size.equals=function(t,e){return t==e||!(!t||!e)&&t.width==e.width&&t.height==e.height},t.utils.style={},t.utils.style.getSize=function(e){if("none"!=t.utils.style.getStyle_(e,"display"))return t.utils.style.getSizeWithDisplay_(e);var i=e.style,n=i.display,o=i.visibility,r=i.position;i.visibility="hidden",i.position="absolute",i.display="inline";var s=e.offsetWidth;return e=e.offsetHeight,i.display=n,i.position=r,i.visibility=o,new t.utils.Size(s,e)},t.utils.style.getSizeWithDisplay_=function(e){return new t.utils.Size(e.offsetWidth,e.offsetHeight)},t.utils.style.getStyle_=function(e,i){return t.utils.style.getComputedStyle(e,i)||t.utils.style.getCascadedStyle(e,i)||e.style&&e.style[i]},t.utils.style.getComputedStyle=function(t,e){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[e]||t.getPropertyValue(e))||""},t.utils.style.getCascadedStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:null},t.utils.style.getPageOffset=function(e){var i=new t.utils.Coordinate(0,0);e=e.getBoundingClientRect();var n=document.documentElement;return n=new t.utils.Coordinate(window.pageXOffset||n.scrollLeft,window.pageYOffset||n.scrollTop),i.x=e.left+n.x,i.y=e.top+n.y,i},t.utils.style.getViewportPageOffset=function(){var e=document.body,i=document.documentElement;return new t.utils.Coordinate(e.scrollLeft||i.scrollLeft,e.scrollTop||i.scrollTop)},t.utils.style.setElementShown=function(t,e){t.style.display=e?"":"none"},t.utils.style.isRightToLeft=function(e){return"rtl"==t.utils.style.getStyle_(e,"direction")},t.utils.style.getBorderBox=function(e){var i=t.utils.style.getComputedStyle(e,"borderLeftWidth"),n=t.utils.style.getComputedStyle(e,"borderRightWidth"),o=t.utils.style.getComputedStyle(e,"borderTopWidth");return e=t.utils.style.getComputedStyle(e,"borderBottomWidth"),{top:parseFloat(o),right:parseFloat(n),bottom:parseFloat(e),left:parseFloat(i)}},t.utils.style.scrollIntoContainerView=function(e,i,n){e=t.utils.style.getContainerOffsetToScrollInto(e,i,n),i.scrollLeft=e.x,i.scrollTop=e.y},t.utils.style.getContainerOffsetToScrollInto=function(e,i,n){var o=t.utils.style.getPageOffset(e),r=t.utils.style.getPageOffset(i),s=t.utils.style.getBorderBox(i),a=o.x-r.x-s.left;return o=o.y-r.y-s.top,r=t.utils.style.getSizeWithDisplay_(e),e=i.clientWidth-r.width,r=i.clientHeight-r.height,s=i.scrollLeft,i=i.scrollTop,n?(s+=a-e/2,i+=o-r/2):(s+=Math.min(a,Math.max(a-e,0)),i+=Math.min(o,Math.max(o-r,0))),new t.utils.Coordinate(s,i)},t.utils.userAgent={},function(e){function i(t){return-1!=n.indexOf(t.toUpperCase())}t.utils.userAgent.raw=e;var n=t.utils.userAgent.raw.toUpperCase();t.utils.userAgent.IE=i("Trident")||i("MSIE"),t.utils.userAgent.EDGE=i("Edge"),t.utils.userAgent.JAVA_FX=i("JavaFX"),t.utils.userAgent.CHROME=(i("Chrome")||i("CriOS"))&&!t.utils.userAgent.EDGE,t.utils.userAgent.WEBKIT=i("WebKit")&&!t.utils.userAgent.EDGE,t.utils.userAgent.GECKO=i("Gecko")&&!t.utils.userAgent.WEBKIT&&!t.utils.userAgent.IE&&!t.utils.userAgent.EDGE,t.utils.userAgent.ANDROID=i("Android"),t.utils.userAgent.IPAD=i("iPad"),t.utils.userAgent.IPOD=i("iPod"),t.utils.userAgent.IPHONE=i("iPhone")&&!t.utils.userAgent.IPAD&&!t.utils.userAgent.IPOD,t.utils.userAgent.MAC=i("Macintosh"),t.utils.userAgent.TABLET=t.utils.userAgent.IPAD||t.utils.userAgent.ANDROID&&!i("Mobile")||i("Silk"),t.utils.userAgent.MOBILE=!t.utils.userAgent.TABLET&&(t.utils.userAgent.IPOD||t.utils.userAgent.IPHONE||t.utils.userAgent.ANDROID||i("IEMobile"))}(t.utils.global.navigator&&t.utils.global.navigator.userAgent||""),t.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},t.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},t.utils.getRelativeXY=function(e){var i=new t.utils.Coordinate(0,0),n=e.getAttribute("x");return n&&(i.x=parseInt(n,10)),(n=e.getAttribute("y"))&&(i.y=parseInt(n,10)),(n=(n=e.getAttribute("transform"))&&n.match(t.utils.getRelativeXY.XY_REGEX_))&&(i.x+=Number(n[1]),n[3]&&(i.y+=Number(n[3]))),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(t.utils.getRelativeXY.XY_STYLE_REGEX_))&&(i.x+=Number(e[1]),e[3]&&(i.y+=Number(e[3]))),i},t.utils.getInjectionDivXY_=function(e){for(var i=0,n=0;e;){var o=t.utils.getRelativeXY(e);if(i+=o.x,n+=o.y,-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;e=e.parentNode}return new t.utils.Coordinate(i,n)},t.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,t.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,t.utils.isRightButton=function(e){return!(!e.ctrlKey||!t.utils.userAgent.MAC)||2==e.button},t.utils.mouseToSvg=function(t,e,i){var n=e.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,i||(i=e.getScreenCTM().inverse()),n.matrixTransform(i)},t.utils.getScrollDeltaPixels=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*t.LINE_MODE_MULTIPLIER,y:e.deltaY*t.LINE_MODE_MULTIPLIER};case 2:return{x:e.deltaX*t.PAGE_MODE_MULTIPLIER,y:e.deltaY*t.PAGE_MODE_MULTIPLIER}}},t.utils.tokenizeInterpolation=function(e){return t.utils.tokenizeInterpolation_(e,!0)},t.utils.replaceMessageReferences=function(e){return"string"!=typeof e?e:(e=t.utils.tokenizeInterpolation_(e,!1)).length?String(e[0]):""},t.utils.checkMessageReferences=function(e){for(var i=!0,n=t.Msg,o=e.match(/%{BKY_[A-Z]\w*}/gi),r=0;r<o.length;r++)null==n[o[r].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+o[r]+" in "+e),i=!1);return i},t.utils.tokenizeInterpolation_=function(e,i){var n=[],o=e.split("");o.push("");var r=0;e=[];for(var s=null,a=0;a<o.length;a++){var l=o[a];0==r?"%"==l?((l=e.join(""))&&n.push(l),e.length=0,r=1):e.push(l):1==r?"%"==l?(e.push(l),r=0):i&&"0"<=l&&"9">=l?(r=2,s=l,(l=e.join(""))&&n.push(l),e.length=0):"{"==l?r=3:(e.push("%",l),r=0):2==r?"0"<=l&&"9">=l?s+=l:(n.push(parseInt(s,10)),a--,r=0):3==r&&(""==l?(e.splice(0,0,"%{"),a--,r=0):"}"!=l?e.push(l):(r=e.join(""),/[A-Z]\w*/i.test(r)?(l=r.toUpperCase(),(l=t.utils.string.startsWith(l,"BKY_")?l.substring(4):null)&&l in t.Msg?"string"==typeof(r=t.Msg[l])?Array.prototype.push.apply(n,t.utils.tokenizeInterpolation_(r,i)):i?n.push(String(r)):n.push(r):n.push("%{"+r+"}")):n.push("%{"+r+"}"),r=e.length=0))}for((l=e.join(""))&&n.push(l),i=[],a=e.length=0;a<n.length;++a)"string"==typeof n[a]?e.push(n[a]):((l=e.join(""))&&i.push(l),e.length=0,i.push(n[a]));return(l=e.join(""))&&i.push(l),e.length=0,i},t.utils.genUid=function(){for(var e=t.utils.genUid.soup_.length,i=[],n=0;20>n;n++)i[n]=t.utils.genUid.soup_.charAt(Math.random()*e);return i.join("")},t.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t.utils.is3dSupported=function(){if(void 0!==t.utils.is3dSupported.cached_)return t.utils.is3dSupported.cached_;if(!t.utils.global.getComputedStyle)return!1;var e=document.createElement("p"),i="none",n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var o in document.body.insertBefore(e,null),n)if(void 0!==e.style[o]){if(e.style[o]="translate3d(1px,1px,1px)",!(i=t.utils.global.getComputedStyle(e)))return document.body.removeChild(e),!1;i=i.getPropertyValue(n[o])}return document.body.removeChild(e),t.utils.is3dSupported.cached_="none"!==i,t.utils.is3dSupported.cached_},t.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var e=setInterval((function(){"complete"==document.readyState&&(clearInterval(e),t())}),10)},t.utils.getViewportBBox=function(){var e=t.utils.style.getViewportPageOffset();return new t.utils.Rect(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},t.utils.arrayRemove=function(t,e){return-1!=(e=t.indexOf(e))&&(t.splice(e,1),!0)},t.utils.getDocumentScroll=function(){var e=document.documentElement,i=window;return t.utils.userAgent.IE&&i.pageYOffset!=e.scrollTop?new t.utils.Coordinate(e.scrollLeft,e.scrollTop):new t.utils.Coordinate(i.pageXOffset||e.scrollLeft,i.pageYOffset||e.scrollTop)},t.utils.getBlockTypeCounts=function(t,e){var i=Object.create(null),n=t.getDescendants(!0);for(e&&(t=t.getNextBlock())&&(t=n.indexOf(t),n.splice(t,n.length-t)),t=0;e=n[t];t++)i[e.type]?i[e.type]++:i[e.type]=1;return i},t.utils.screenToWsCoordinates=function(e,i){var n=i.x;i=i.y;var o=e.getInjectionDiv().getBoundingClientRect();return n=new t.utils.Coordinate(n-o.left,i-o.top),i=e.getOriginOffsetInPixels(),t.utils.Coordinate.difference(n,i).scale(1/e.scale)},t.utils.parseBlockColour=function(e){var i="string"==typeof e?t.utils.replaceMessageReferences(e):e,n=Number(i);if(!isNaN(n)&&0<=n&&360>=n)return{hue:n,hex:t.utils.colour.hsvToHex(n,t.HSV_SATURATION,255*t.HSV_VALUE)};if(n=t.utils.colour.parse(i))return{hue:null,hex:n};throw n='Invalid colour: "'+i+'"',e!=i&&(n+=' (from "'+e+'")'),Error(n)},t.Events={},t.Events.group_="",t.Events.recordUndo=!0,t.Events.disabled_=0,t.Events.CREATE="create",t.Events.BLOCK_CREATE=t.Events.CREATE,t.Events.DELETE="delete",t.Events.BLOCK_DELETE=t.Events.DELETE,t.Events.CHANGE="change",t.Events.BLOCK_CHANGE=t.Events.CHANGE,t.Events.MOVE="move",t.Events.BLOCK_MOVE=t.Events.MOVE,t.Events.VAR_CREATE="var_create",t.Events.VAR_DELETE="var_delete",t.Events.VAR_RENAME="var_rename",t.Events.UI="ui",t.Events.COMMENT_CREATE="comment_create",t.Events.COMMENT_DELETE="comment_delete",t.Events.COMMENT_CHANGE="comment_change",t.Events.COMMENT_MOVE="comment_move",t.Events.FINISHED_LOADING="finished_loading",t.Events.BUMP_EVENTS=[t.Events.BLOCK_CREATE,t.Events.BLOCK_MOVE,t.Events.COMMENT_CREATE,t.Events.COMMENT_MOVE],t.Events.FIRE_QUEUE_=[],t.Events.fire=function(e){t.Events.isEnabled()&&(t.Events.FIRE_QUEUE_.length||setTimeout(t.Events.fireNow_,0),t.Events.FIRE_QUEUE_.push(e))},t.Events.fireNow_=function(){for(var e,i=t.Events.filter(t.Events.FIRE_QUEUE_,!0),n=t.Events.FIRE_QUEUE_.length=0;e=i[n];n++)if(e.workspaceId){var o=t.Workspace.getById(e.workspaceId);o&&o.fireChangeListener(e)}},t.Events.filter=function(e,i){e=e.slice(),i||e.reverse();for(var n,o=[],r=Object.create(null),s=0;n=e[s];s++)if(!n.isNull()){var a=[n.type,n.blockId,n.workspaceId].join(" "),l=r[a],c=l?l.event:null;l?n.type==t.Events.MOVE&&l.index==s-1?(c.newParentId=n.newParentId,c.newInputName=n.newInputName,c.newCoordinate=n.newCoordinate,l.index=s):n.type==t.Events.CHANGE&&n.element==c.element&&n.name==c.name?c.newValue=n.newValue:(n.type!=t.Events.UI||"click"!=n.element||"commentOpen"!=c.element&&"mutatorOpen"!=c.element&&"warningOpen"!=c.element)&&(r[a]={event:n,index:1},o.push(n)):(r[a]={event:n,index:s},o.push(n))}for(e=o.filter((function(t){return!t.isNull()})),i||e.reverse(),s=1;n=e[s];s++)n.type==t.Events.CHANGE&&"mutation"==n.element&&e.unshift(e.splice(s,1)[0]);return e},t.Events.clearPendingUndo=function(){for(var e,i=0;e=t.Events.FIRE_QUEUE_[i];i++)e.recordUndo=!1},t.Events.disable=function(){t.Events.disabled_++},t.Events.enable=function(){t.Events.disabled_--},t.Events.isEnabled=function(){return 0==t.Events.disabled_},t.Events.getGroup=function(){return t.Events.group_},t.Events.setGroup=function(e){t.Events.group_="boolean"==typeof e?e?t.utils.genUid():"":e},t.Events.getDescendantIds=function(t){var e=[];t=t.getDescendants(!1);for(var i,n=0;i=t[n];n++)e[n]=i.id;return e},t.Events.fromJson=function(e,i){var n=t.registry.getClass(t.registry.Type.EVENT,e.type);if(!n)throw Error("Unknown event type.");return(n=new n).fromJson(e),n.workspaceId=i.id,n},t.Events.disableOrphans=function(e){if((e.type==t.Events.MOVE||e.type==t.Events.CREATE)&&e.workspaceId){var i=t.Workspace.getById(e.workspaceId);if(e=i.getBlockById(e.blockId)){var n=e.getParent();if(n&&n.isEnabled())for(i=e.getDescendants(!1),e=0;n=i[e];e++)n.setEnabled(!0);else if((e.outputConnection||e.previousConnection)&&!i.isDragging())do{e.setEnabled(!1),e=e.getNextBlock()}while(e)}}},t.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=t.Events.getGroup(),this.recordUndo=t.Events.recordUndo},t.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},t.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},t.Events.Abstract.prototype.isNull=function(){return!1},t.Events.Abstract.prototype.run=function(t){},t.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var e=t.Workspace.getById(this.workspaceId);if(!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e},t.utils.object={},t.utils.object.inherits=function(t,e){t.superClass_=e.prototype,t.prototype=Object.create(e.prototype),t.prototype.constructor=t},t.utils.object.mixin=function(t,e){for(var i in e)t[i]=e[i]},t.utils.object.deepMerge=function(e,i){for(var n in i)e[n]=null!=i[n]&&"object"==typeof i[n]?t.utils.object.deepMerge(e[n]||Object.create(null),i[n]):i[n];return e},t.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map((function(e){return t[e]}))},t.Events.Ui=function(e,i,n,o){t.Events.Ui.superClass_.constructor.call(this),this.isBlank=void 0===e,this.blockId=e?e.id:null,this.workspaceId=e?e.workspace.id:void 0,this.element=void 0===i?"":i,this.oldValue=void 0===n?"":n,this.newValue=void 0===o?"":o,this.recordUndo=!1},t.utils.object.inherits(t.Events.Ui,t.Events.Abstract),t.Events.Ui.prototype.type=t.Events.UI,t.Events.Ui.prototype.toJson=function(){var e=t.Events.Ui.superClass_.toJson.call(this);return e.element=this.element,void 0!==this.newValue&&(e.newValue=this.newValue),this.blockId&&(e.blockId=this.blockId),e},t.Events.Ui.prototype.fromJson=function(e){t.Events.Ui.superClass_.fromJson.call(this,e),this.element=e.element,this.newValue=e.newValue,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.UI,t.Events.Ui),t.utils.Svg=function(t){this.tagName_=t},t.utils.Svg.prototype.toString=function(){return this.tagName_},t.utils.Svg.ANIMATE=new t.utils.Svg("animate"),t.utils.Svg.CIRCLE=new t.utils.Svg("circle"),t.utils.Svg.CLIPPATH=new t.utils.Svg("clipPath"),t.utils.Svg.DEFS=new t.utils.Svg("defs"),t.utils.Svg.FECOMPOSITE=new t.utils.Svg("feComposite"),t.utils.Svg.FECOMPONENTTRANSFER=new t.utils.Svg("feComponentTransfer"),t.utils.Svg.FEFLOOD=new t.utils.Svg("feFlood"),t.utils.Svg.FEFUNCA=new t.utils.Svg("feFuncA"),t.utils.Svg.FEGAUSSIANBLUR=new t.utils.Svg("feGaussianBlur"),t.utils.Svg.FEPOINTLIGHT=new t.utils.Svg("fePointLight"),t.utils.Svg.FESPECULARLIGHTING=new t.utils.Svg("feSpecularLighting"),t.utils.Svg.FILTER=new t.utils.Svg("filter"),t.utils.Svg.FOREIGNOBJECT=new t.utils.Svg("foreignObject"),t.utils.Svg.G=new t.utils.Svg("g"),t.utils.Svg.IMAGE=new t.utils.Svg("image"),t.utils.Svg.LINE=new t.utils.Svg("line"),t.utils.Svg.PATH=new t.utils.Svg("path"),t.utils.Svg.PATTERN=new t.utils.Svg("pattern"),t.utils.Svg.POLYGON=new t.utils.Svg("polygon"),t.utils.Svg.RECT=new t.utils.Svg("rect"),t.utils.Svg.SVG=new t.utils.Svg("svg"),t.utils.Svg.TEXT=new t.utils.Svg("text"),t.utils.Svg.TSPAN=new t.utils.Svg("tspan"),t.utils.dom={},t.utils.dom.SVG_NS="http://www.w3.org/2000/svg",t.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",t.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",t.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},t.utils.dom.cacheWidths_=null,t.utils.dom.cacheReference_=0,t.utils.dom.canvasContext_=null,t.utils.dom.createSvgElement=function(e,i,n){for(var o in e=document.createElementNS(t.utils.dom.SVG_NS,String(e)),i)e.setAttribute(o,i[o]);return document.body.runtimeStyle&&(e.runtimeStyle=e.currentStyle=e.style),n&&n.appendChild(e),e},t.utils.dom.addClass=function(t,e){var i=t.getAttribute("class")||"";return-1==(" "+i+" ").indexOf(" "+e+" ")&&(i&&(i+=" "),t.setAttribute("class",i+e),!0)},t.utils.dom.removeClasses=function(e,i){i=i.split(" ");for(var n=0;n<i.length;n++)t.utils.dom.removeClass(e,i[n])},t.utils.dom.removeClass=function(t,e){var i=t.getAttribute("class");if(-1==(" "+i+" ").indexOf(" "+e+" "))return!1;i=i.split(/\s+/);for(var n=0;n<i.length;n++)i[n]&&i[n]!=e||(i.splice(n,1),n--);return i.length?t.setAttribute("class",i.join(" ")):t.removeAttribute("class"),!0},t.utils.dom.hasClass=function(t,e){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+e+" ")},t.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},t.utils.dom.insertAfter=function(t,e){var i=e.nextSibling;if(!(e=e.parentNode))throw Error("Reference node has no parent.");i?e.insertBefore(t,i):e.appendChild(t)},t.utils.dom.containsNode=function(e,i){return!!(e.compareDocumentPosition(i)&t.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},t.utils.dom.setCssTransform=function(t,e){t.style.transform=e,t.style["-webkit-transform"]=e},t.utils.dom.startTextWidthCache=function(){t.utils.dom.cacheReference_++,t.utils.dom.cacheWidths_||(t.utils.dom.cacheWidths_={})},t.utils.dom.stopTextWidthCache=function(){t.utils.dom.cacheReference_--,t.utils.dom.cacheReference_||(t.utils.dom.cacheWidths_=null)},t.utils.dom.getTextWidth=function(e){var i,n=e.textContent+"\n"+e.className.baseVal;if(t.utils.dom.cacheWidths_&&(i=t.utils.dom.cacheWidths_[n]))return i;try{i=t.utils.userAgent.IE||t.utils.userAgent.EDGE?e.getBBox().width:e.getComputedTextLength()}catch(t){return 8*e.textContent.length}return t.utils.dom.cacheWidths_&&(t.utils.dom.cacheWidths_[n]=i),i},t.utils.dom.getFastTextWidth=function(e,i,n,o){return t.utils.dom.getFastTextWidthWithSizeString(e,i+"pt",n,o)},t.utils.dom.getFastTextWidthWithSizeString=function(e,i,n,o){var r,s=e.textContent;return e=s+"\n"+e.className.baseVal,t.utils.dom.cacheWidths_&&(r=t.utils.dom.cacheWidths_[e])||(t.utils.dom.canvasContext_||((r=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(r),t.utils.dom.canvasContext_=r.getContext("2d")),t.utils.dom.canvasContext_.font=n+" "+i+" "+o,r=t.utils.dom.canvasContext_.measureText(s).width,t.utils.dom.cacheWidths_&&(t.utils.dom.cacheWidths_[e]=r)),r},t.utils.dom.measureFontMetrics=function(t,e,i,n){var o=document.createElement("span");o.style.font=i+" "+e+" "+n,o.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(e=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),e.appendChild(o),e.appendChild(t),document.body.appendChild(e);try{i={},e.style.alignItems="baseline",i.baseline=t.offsetTop-o.offsetTop,e.style.alignItems="flex-end",i.height=t.offsetTop-o.offsetTop}finally{document.body.removeChild(e)}return i},t.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},t.BlockDragSurfaceSvg.prototype.SVG_=null,t.BlockDragSurfaceSvg.prototype.dragGroup_=null,t.BlockDragSurfaceSvg.prototype.container_=null,t.BlockDragSurfaceSvg.prototype.scale_=1,t.BlockDragSurfaceSvg.prototype.surfaceXY_=null,t.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},this.SVG_))},t.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(e){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(e),this.SVG_.style.display="block",this.surfaceXY_=new t.utils.Coordinate(0,0)},t.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,e,i){this.scale_=i,t=t.toFixed(0),e=e.toFixed(0),this.dragGroup_.setAttribute("transform","translate("+t+","+e+") scale("+i+")")},t.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var e=this.surfaceXY_.x,i=this.surfaceXY_.y;e=e.toFixed(0),i=i.toFixed(0),this.SVG_.style.display="block",t.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+i+"px, 0px)")},t.BlockDragSurfaceSvg.prototype.translateSurface=function(e,i){this.surfaceXY_=new t.utils.Coordinate(e*this.scale_,i*this.scale_),this.translateSurfaceInternal_()},t.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var e=t.utils.getRelativeXY(this.SVG_);return new t.utils.Coordinate(e.x/this.scale_,e.y/this.scale_)},t.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},t.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},t.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},t.utils.IdGenerator={},t.utils.IdGenerator.nextId_=0,t.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(t.utils.IdGenerator.nextId_++).toString(36)},t.Component=function(){this.rightToLeft_=t.Component.defaultRightToLeft,this.id_=null,this.inDocument_=!1,this.parent_=this.element_=null,this.children_=[],this.childIndex_={},this.disposed_=!1},t.Component.defaultRightToLeft=!1,t.Component.Error={ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",ABSTRACT_METHOD:"Unimplemented abstract method"},t.Component.prototype.getId=function(){return this.id_||(this.id_=t.utils.IdGenerator.getNextUniqueId())},t.Component.prototype.getElement=function(){return this.element_},t.Component.prototype.setElementInternal=function(t){this.element_=t},t.Component.prototype.setParent=function(e){if(this==e)throw Error(t.Component.Error.PARENT_UNABLE_TO_BE_SET);if(e&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=e)throw Error(t.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=e},t.Component.prototype.getParent=function(){return this.parent_},t.Component.prototype.isInDocument=function(){return this.inDocument_},t.Component.prototype.createDom=function(){throw Error(t.Component.Error.ABSTRACT_METHOD)},t.Component.prototype.render=function(t){this.render_(t)},t.Component.prototype.render_=function(e,i){if(this.inDocument_)throw Error(t.Component.Error.ALREADY_RENDERED);this.element_||this.createDom(),e?e.insertBefore(this.element_,i||null):document.body.appendChild(this.element_),this.parent_&&!this.parent_.isInDocument()||this.enterDocument()},t.Component.prototype.enterDocument=function(){this.inDocument_=!0,this.forEachChild((function(t){!t.isInDocument()&&t.getElement()&&t.enterDocument()}))},t.Component.prototype.exitDocument=function(){this.forEachChild((function(t){t.isInDocument()&&t.exitDocument()})),this.inDocument_=!1},t.Component.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument(),this.forEachChild((function(t){t.dispose()})),this.element_&&t.utils.dom.removeNode(this.element_),this.parent_=this.element_=this.childIndex_=this.children_=null},t.Component.prototype.addChild=function(t,e){this.addChildAt(t,this.getChildCount(),e)},t.Component.prototype.addChildAt=function(e,i,n){if(e.inDocument_&&(n||!this.inDocument_))throw Error(t.Component.Error.ALREADY_RENDERED);if(0>i||i>this.getChildCount())throw Error(t.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);if(this.childIndex_[e.getId()]=e,e.getParent()==this){var o=this.children_.indexOf(e);-1<o&&this.children_.splice(o,1)}e.setParent(this),this.children_.splice(i,0,e),e.inDocument_&&this.inDocument_&&e.getParent()==this?(i=(n=this.getContentElement()).childNodes[i]||null)!=e.getElement()&&n.insertBefore(e.getElement(),i):n?(this.element_||this.createDom(),i=this.getChildAt(i+1),e.render_(this.getContentElement(),i?i.element_:null)):this.inDocument_&&!e.inDocument_&&e.element_&&e.element_.parentNode&&e.element_.parentNode.nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&e.enterDocument()},t.Component.prototype.getContentElement=function(){return this.element_},t.Component.prototype.hasChildren=function(){return 0!=this.children_.length},t.Component.prototype.getChildCount=function(){return this.children_.length},t.Component.prototype.getChild=function(t){return t&&this.childIndex_[t]||null},t.Component.prototype.getChildAt=function(t){return this.children_[t]||null},t.Component.prototype.forEachChild=function(t,e){for(var i=0;i<this.children_.length;i++)t.call(e,this.children_[i],i)},t.Css={},t.Css.injected_=!1,t.Css.register=function(e){if(t.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(t.Css.CONTENT,e),e.length=0},t.Css.inject=function(e,i){if(!t.Css.injected_){t.Css.injected_=!0;var n=t.Css.CONTENT.join("\n");t.Css.CONTENT.length=0,e&&(e=i.replace(/[\\/]$/,""),n=n.replace(/<<<PATH>>>/g,e),(e=document.createElement("style")).id="blockly-common-style",n=document.createTextNode(n),e.appendChild(n),document.head.insertBefore(e,document.head.firstChild))}},t.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],t.utils.math={},t.utils.math.toRadians=function(t){return t*Math.PI/180},t.utils.math.toDegrees=function(t){return 180*t/Math.PI},t.utils.math.clamp=function(t,e,i){if(i<t){var n=i;i=t,t=n}return Math.max(t,Math.min(e,i))},t.DropDownDiv=function(){},t.DropDownDiv.boundsElement_=null,t.DropDownDiv.owner_=null,t.DropDownDiv.positionToField_=null,t.DropDownDiv.ARROW_SIZE=16,t.DropDownDiv.BORDER_SIZE=1,t.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,t.DropDownDiv.PADDING_Y=16,t.DropDownDiv.ANIMATION_TIME=.25,t.DropDownDiv.animateOutTimer_=null,t.DropDownDiv.onHide_=null,t.DropDownDiv.rendererClassName_="",t.DropDownDiv.themeClassName_="",t.DropDownDiv.createDom=function(){if(!t.DropDownDiv.DIV_){var e=document.createElement("div");e.className="blocklyDropDownDiv",(t.parentContainer||document.body).appendChild(e),t.DropDownDiv.DIV_=e;var i=document.createElement("div");i.className="blocklyDropDownContent",e.appendChild(i),t.DropDownDiv.content_=i,(i=document.createElement("div")).className="blocklyDropDownArrow",e.appendChild(i),t.DropDownDiv.arrow_=i,t.DropDownDiv.DIV_.style.opacity=0,t.DropDownDiv.DIV_.style.transition="transform "+t.DropDownDiv.ANIMATION_TIME+"s, opacity "+t.DropDownDiv.ANIMATION_TIME+"s",e.addEventListener("focusin",(function(){t.utils.dom.addClass(e,"blocklyFocused")})),e.addEventListener("focusout",(function(){t.utils.dom.removeClass(e,"blocklyFocused")}))}},t.DropDownDiv.setBoundsElement=function(e){t.DropDownDiv.boundsElement_=e},t.DropDownDiv.getContentDiv=function(){return t.DropDownDiv.content_},t.DropDownDiv.clearContent=function(){t.DropDownDiv.content_.textContent="",t.DropDownDiv.content_.style.width=""},t.DropDownDiv.setColour=function(e,i){t.DropDownDiv.DIV_.style.backgroundColor=e,t.DropDownDiv.DIV_.style.borderColor=i},t.DropDownDiv.showPositionedByBlock=function(e,i,n,o){return t.DropDownDiv.showPositionedByRect_(t.DropDownDiv.getScaledBboxOfBlock_(i),e,n,o)},t.DropDownDiv.showPositionedByField=function(e,i,n){return t.DropDownDiv.positionToField_=!0,t.DropDownDiv.showPositionedByRect_(t.DropDownDiv.getScaledBboxOfField_(e),e,i,n)},t.DropDownDiv.getScaledBboxOfBlock_=function(e){var i=e.getSvgRoot(),n=i.getBBox(),o=e.workspace.scale;return e=n.height*o,n=n.width*o,i=t.utils.style.getPageOffset(i),new t.utils.Rect(i.y,i.y+e,i.x,i.x+n)},t.DropDownDiv.getScaledBboxOfField_=function(e){return e=e.getScaledBBox(),new t.utils.Rect(e.top,e.bottom,e.left,e.right)},t.DropDownDiv.showPositionedByRect_=function(e,i,n,o){var r=e.left+(e.right-e.left)/2,s=e.bottom;e=e.top,o&&(e+=o);for(var a=(o=i.getSourceBlock()).workspace;a.options.parentWorkspace;)a=a.options.parentWorkspace;return t.DropDownDiv.setBoundsElement(a.getParentSvg().parentNode),t.DropDownDiv.show(i,o.RTL,r,s,r,e,n)},t.DropDownDiv.show=function(e,i,n,o,r,s,a){return t.DropDownDiv.owner_=e,t.DropDownDiv.onHide_=a||null,(e=t.DropDownDiv.DIV_).style.direction=i?"rtl":"ltr",i=t.getMainWorkspace(),t.DropDownDiv.rendererClassName_=i.getRenderer().getClassName(),t.DropDownDiv.themeClassName_=i.getTheme().getClassName(),t.utils.dom.addClass(e,t.DropDownDiv.rendererClassName_),t.utils.dom.addClass(e,t.DropDownDiv.themeClassName_),t.DropDownDiv.positionInternal_(n,o,r,s)},t.DropDownDiv.getBoundsInfo_=function(){var e=t.utils.style.getPageOffset(t.DropDownDiv.boundsElement_),i=t.utils.style.getSize(t.DropDownDiv.boundsElement_);return{left:e.x,right:e.x+i.width,top:e.y,bottom:e.y+i.height,width:i.width,height:i.height}},t.DropDownDiv.getPositionMetrics_=function(e,i,n,o){var r=t.DropDownDiv.getBoundsInfo_(),s=t.utils.style.getSize(t.DropDownDiv.DIV_);return i+s.height<r.bottom?t.DropDownDiv.getPositionBelowMetrics_(e,i,r,s):o-s.height>r.top?t.DropDownDiv.getPositionAboveMetrics_(n,o,r,s):i+s.height<document.documentElement.clientHeight?t.DropDownDiv.getPositionBelowMetrics_(e,i,r,s):o-s.height>document.documentElement.clientTop?t.DropDownDiv.getPositionAboveMetrics_(n,o,r,s):t.DropDownDiv.getPositionTopOfPageMetrics_(e,r,s)},t.DropDownDiv.getPositionBelowMetrics_=function(e,i,n,o){return{initialX:(e=t.DropDownDiv.getPositionX(e,n.left,n.right,o.width)).divX,initialY:i,finalX:e.divX,finalY:i+t.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:-(t.DropDownDiv.ARROW_SIZE/2+t.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},t.DropDownDiv.getPositionAboveMetrics_=function(e,i,n,o){return{initialX:(e=t.DropDownDiv.getPositionX(e,n.left,n.right,o.width)).divX,initialY:i-o.height,finalX:e.divX,finalY:i-o.height-t.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:o.height-2*t.DropDownDiv.BORDER_SIZE-t.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},t.DropDownDiv.getPositionTopOfPageMetrics_=function(e,i,n){return{initialX:(e=t.DropDownDiv.getPositionX(e,i.left,i.right,n.width)).divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},t.DropDownDiv.getPositionX=function(e,i,n,o){var r=e;return e=t.utils.math.clamp(i,e-o/2,n-o),r-=t.DropDownDiv.ARROW_SIZE/2,i=t.DropDownDiv.ARROW_HORIZONTAL_PADDING,{arrowX:o=t.utils.math.clamp(i,r-e,o-i-t.DropDownDiv.ARROW_SIZE),divX:e}},t.DropDownDiv.isVisible=function(){return!!t.DropDownDiv.owner_},t.DropDownDiv.hideIfOwner=function(e,i){return t.DropDownDiv.owner_===e&&(i?t.DropDownDiv.hideWithoutAnimation():t.DropDownDiv.hide(),!0)},t.DropDownDiv.hide=function(){var e=t.DropDownDiv.DIV_;e.style.transform="translate(0, 0)",e.style.opacity=0,t.DropDownDiv.animateOutTimer_=setTimeout((function(){t.DropDownDiv.hideWithoutAnimation()}),1e3*t.DropDownDiv.ANIMATION_TIME),t.DropDownDiv.onHide_&&(t.DropDownDiv.onHide_(),t.DropDownDiv.onHide_=null)},t.DropDownDiv.hideWithoutAnimation=function(){if(t.DropDownDiv.isVisible()){t.DropDownDiv.animateOutTimer_&&clearTimeout(t.DropDownDiv.animateOutTimer_);var e=t.DropDownDiv.DIV_;e.style.transform="",e.style.left="",e.style.top="",e.style.opacity=0,e.style.display="none",e.style.backgroundColor="",e.style.borderColor="",t.DropDownDiv.onHide_&&(t.DropDownDiv.onHide_(),t.DropDownDiv.onHide_=null),t.DropDownDiv.clearContent(),t.DropDownDiv.owner_=null,t.DropDownDiv.rendererClassName_&&(t.utils.dom.removeClass(e,t.DropDownDiv.rendererClassName_),t.DropDownDiv.rendererClassName_=""),t.DropDownDiv.themeClassName_&&(t.utils.dom.removeClass(e,t.DropDownDiv.themeClassName_),t.DropDownDiv.themeClassName_=""),t.getMainWorkspace().markFocused()}},t.DropDownDiv.positionInternal_=function(e,i,n,o){(e=t.DropDownDiv.getPositionMetrics_(e,i,n,o)).arrowVisible?(t.DropDownDiv.arrow_.style.display="",t.DropDownDiv.arrow_.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",t.DropDownDiv.arrow_.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):t.DropDownDiv.arrow_.style.display="none",i=Math.floor(e.initialX),n=Math.floor(e.initialY),o=Math.floor(e.finalX);var r=Math.floor(e.finalY),s=t.DropDownDiv.DIV_;return s.style.left=i+"px",s.style.top=n+"px",s.style.display="block",s.style.opacity=1,s.style.transform="translate("+(o-i)+"px,"+(r-n)+"px)",!!e.arrowAtTop},t.DropDownDiv.repositionForWindowResize=function(){if(t.DropDownDiv.owner_){var e=t.DropDownDiv.owner_,i=e.getSourceBlock();i=(e=t.DropDownDiv.positionToField_?t.DropDownDiv.getScaledBboxOfField_(e):t.DropDownDiv.getScaledBboxOfBlock_(i)).left+(e.right-e.left)/2,t.DropDownDiv.positionInternal_(i,e.bottom,i,e.top)}else t.DropDownDiv.hide()},t.Grid=function(t,e){this.gridPattern_=t,this.spacing_=e.spacing,this.length_=e.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=e.snap},t.Grid.prototype.scale_=1,t.Grid.prototype.dispose=function(){this.gridPattern_=null},t.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},t.Grid.prototype.getSpacing=function(){return this.spacing_},t.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},t.Grid.prototype.update=function(t){this.scale_=t;var e=this.spacing_*t||100;this.gridPattern_.setAttribute("width",e),this.gridPattern_.setAttribute("height",e);var i=(e=Math.floor(this.spacing_/2)+.5)-this.length_/2,n=e+this.length_/2;e*=t,i*=t,n*=t,this.setLineAttributes_(this.line1_,t,i,n,e,e),this.setLineAttributes_(this.line2_,t,e,e,i,n)},t.Grid.prototype.setLineAttributes_=function(t,e,i,n,o,r){t&&(t.setAttribute("stroke-width",e),t.setAttribute("x1",i),t.setAttribute("y1",o),t.setAttribute("x2",n),t.setAttribute("y2",r))},t.Grid.prototype.moveTo=function(e,i){this.gridPattern_.setAttribute("x",e),this.gridPattern_.setAttribute("y",i),(t.utils.userAgent.IE||t.utils.userAgent.EDGE)&&this.update(this.scale_)},t.Grid.createDom=function(e,i,n){return e=t.utils.dom.createSvgElement(t.utils.Svg.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},n),0<i.length&&0<i.spacing?(t.utils.dom.createSvgElement(t.utils.Svg.LINE,{stroke:i.colour},e),1<i.length&&t.utils.dom.createSvgElement(t.utils.Svg.LINE,{stroke:i.colour},e)):t.utils.dom.createSvgElement(t.utils.Svg.LINE,{},e),e},t.Theme=function(e,i,n,o){this.name=e,this.blockStyles=i||Object.create(null),this.categoryStyles=n||Object.create(null),this.componentStyles=o||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,t.registry.register(t.registry.Type.THEME,e,this)},t.Theme.prototype.getClassName=function(){return this.name+"-theme"},t.Theme.prototype.setBlockStyle=function(t,e){this.blockStyles[t]=e},t.Theme.prototype.setCategoryStyle=function(t,e){this.categoryStyles[t]=e},t.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},t.Theme.prototype.setComponentStyle=function(t,e){this.componentStyles[t]=e},t.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},t.Theme.prototype.setStartHats=function(t){this.startHats=t},t.Theme.defineTheme=function(e,i){var n=new t.Theme(e),o=i.base;return o&&("string"==typeof o&&(o=t.registry.getObject(t.registry.Type.THEME,o)),o instanceof t.Theme&&(t.utils.object.deepMerge(n,o),n.name=e)),t.utils.object.deepMerge(n.blockStyles,i.blockStyles),t.utils.object.deepMerge(n.categoryStyles,i.categoryStyles),t.utils.object.deepMerge(n.componentStyles,i.componentStyles),t.utils.object.deepMerge(n.fontStyle,i.fontStyle),null!=i.startHats&&(n.startHats=i.startHats),n},t.Themes={},t.Themes.Classic={},t.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},t.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},t.Themes.Classic=new t.Theme("classic",t.Themes.Classic.defaultBlockStyles,t.Themes.Classic.categoryStyles),t.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},t.user={},t.user.keyMap={},t.user.keyMap.map_={},t.user.keyMap.modifierKeys={SHIFT:"Shift",CONTROL:"Control",ALT:"Alt",META:"Meta"},t.user.keyMap.setActionForKey=function(e,i){var n=t.user.keyMap.getKeyByAction(i);n&&delete t.user.keyMap.map_[n],t.user.keyMap.map_[e]=i},t.user.keyMap.setKeyMap=function(e){t.user.keyMap.map_=e},t.user.keyMap.getKeyMap=function(){var e={};return t.utils.object.mixin(e,t.user.keyMap.map_),e},t.user.keyMap.getActionByKeyCode=function(e){return t.user.keyMap.map_[e]},t.user.keyMap.getKeyByAction=function(e){for(var i,n=Object.keys(t.user.keyMap.map_),o=0;i=n[o];o++)if(t.user.keyMap.map_[i].name===e.name)return i;return null},t.user.keyMap.serializeKeyEvent=function(e){for(var i,n=t.utils.object.values(t.user.keyMap.modifierKeys),o="",r=0;i=n[r];r++)e.getModifierState(i)&&(o+=i);return o+e.keyCode},t.user.keyMap.checkModifiers_=function(t,e){for(var i,n=0;i=t[n];n++)if(0>e.indexOf(i))throw Error(i+" is not a valid modifier key.")},t.user.keyMap.createSerializedKey=function(e,i){var n="",o=t.utils.object.values(t.user.keyMap.modifierKeys);t.user.keyMap.checkModifiers_(i,o);for(var r,s=0;r=o[s];s++)-1<i.indexOf(r)&&(n+=r);return n+e},t.user.keyMap.createDefaultKeyMap=function(){var e={},i=t.user.keyMap.createSerializedKey(t.utils.KeyCodes.K,[t.user.keyMap.modifierKeys.CONTROL,t.user.keyMap.modifierKeys.SHIFT]),n=t.user.keyMap.createSerializedKey(t.utils.KeyCodes.W,[t.user.keyMap.modifierKeys.SHIFT]),o=t.user.keyMap.createSerializedKey(t.utils.KeyCodes.A,[t.user.keyMap.modifierKeys.SHIFT]),r=t.user.keyMap.createSerializedKey(t.utils.KeyCodes.S,[t.user.keyMap.modifierKeys.SHIFT]),s=t.user.keyMap.createSerializedKey(t.utils.KeyCodes.D,[t.user.keyMap.modifierKeys.SHIFT]);return e[t.utils.KeyCodes.W]=t.navigation.ACTION_PREVIOUS,e[t.utils.KeyCodes.A]=t.navigation.ACTION_OUT,e[t.utils.KeyCodes.S]=t.navigation.ACTION_NEXT,e[t.utils.KeyCodes.D]=t.navigation.ACTION_IN,e[t.utils.KeyCodes.I]=t.navigation.ACTION_INSERT,e[t.utils.KeyCodes.ENTER]=t.navigation.ACTION_MARK,e[t.utils.KeyCodes.X]=t.navigation.ACTION_DISCONNECT,e[t.utils.KeyCodes.T]=t.navigation.ACTION_TOOLBOX,e[t.utils.KeyCodes.E]=t.navigation.ACTION_EXIT,e[t.utils.KeyCodes.ESC]=t.navigation.ACTION_EXIT,e[i]=t.navigation.ACTION_TOGGLE_KEYBOARD_NAV,e[n]=t.navigation.ACTION_MOVE_WS_CURSOR_UP,e[o]=t.navigation.ACTION_MOVE_WS_CURSOR_LEFT,e[r]=t.navigation.ACTION_MOVE_WS_CURSOR_DOWN,e[s]=t.navigation.ACTION_MOVE_WS_CURSOR_RIGHT,e},t.utils.Metrics=function(){},t.utils.toolbox={},t.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",t.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",t.utils.toolbox.Position={TOP:t.TOOLBOX_AT_TOP,BOTTOM:t.TOOLBOX_AT_BOTTOM,LEFT:t.TOOLBOX_AT_LEFT,RIGHT:t.TOOLBOX_AT_RIGHT},t.utils.toolbox.convertToolboxDefToJson=function(e){return e?((e instanceof Element||"string"==typeof e)&&(e=t.utils.toolbox.parseToolboxTree(e),e=t.utils.toolbox.convertToToolboxJson_(e)),t.utils.toolbox.validateToolbox_(e),e):null},t.utils.toolbox.validateToolbox_=function(e){var i=e.kind;if(e=e.contents,i&&i!=t.utils.toolbox.FLYOUT_TOOLBOX_KIND&&i!=t.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+i+". Please supply either "+t.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+t.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!e)throw Error("Toolbox must have a contents attribute.")},t.utils.toolbox.convertFlyoutDefToJsonArray=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:t.utils.toolbox.xmlToJsonArray_(e):[]},t.utils.toolbox.hasCategories=function(e){if(!e)return!1;var i=e.kind;return i?i==t.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!e.contents.filter((function(t){return"CATEGORY"==t.kind.toUpperCase()})).length},t.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter((function(t){return"CATEGORY"==t.kind.toUpperCase()})).length)},t.utils.toolbox.convertToToolboxJson_=function(e){var i={contents:t.utils.toolbox.xmlToJsonArray_(e)};return e instanceof Node&&t.utils.toolbox.addAttributes_(e,i),i},t.utils.toolbox.xmlToJsonArray_=function(e){var i,n=[],o=e.childNodes;for(o||(o=e),e=0;i=o[e];e++)if(i.tagName){var r={},s=i.tagName.toUpperCase();r.kind=s,"BLOCK"==s?r.blockxml=i:"CATEGORY"==s&&(r.contents=t.utils.toolbox.xmlToJsonArray_(i)),t.utils.toolbox.addAttributes_(i,r),n.push(r)}return n},t.utils.toolbox.addAttributes_=function(t,e){for(var i=0;i<t.attributes.length;i++){var n=t.attributes[i];-1<n.nodeName.indexOf("css-")?(e.cssconfig=e.cssconfig||{},e.cssconfig[n.nodeName.replace("css-","")]=n.value):e[n.nodeName]=n.value}},t.utils.toolbox.parseToolboxTree=function(e){if(e){if("string"!=typeof e&&(t.utils.userAgent.IE&&e.outerHTML?e=e.outerHTML:e instanceof Element||(e=null)),"string"==typeof e&&"xml"!=(e=t.Xml.textToDom(e)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else e=null;return e},t.utils.xml={},t.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",t.utils.xml.document=function(){return document},t.utils.xml.createElement=function(e){return t.utils.xml.document().createElementNS(t.utils.xml.NAME_SPACE,e)},t.utils.xml.createTextNode=function(e){return t.utils.xml.document().createTextNode(e)},t.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},t.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},t.Events.BlockBase=function(e){t.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id},t.utils.object.inherits(t.Events.BlockBase,t.Events.Abstract),t.Events.BlockBase.prototype.toJson=function(){var e=t.Events.BlockBase.superClass_.toJson.call(this);return e.blockId=this.blockId,e},t.Events.BlockBase.prototype.fromJson=function(e){t.Events.BlockBase.superClass_.fromJson.call(this,e),this.blockId=e.blockId},t.Events.Change=function(e,i,n,o,r){t.Events.Change.superClass_.constructor.call(this,e),e&&(this.element=void 0===i?"":i,this.name=void 0===n?"":n,this.oldValue=void 0===o?"":o,this.newValue=void 0===r?"":r)},t.utils.object.inherits(t.Events.Change,t.Events.BlockBase),t.Events.BlockChange=t.Events.Change,t.Events.Change.prototype.type=t.Events.CHANGE,t.Events.Change.prototype.toJson=function(){var e=t.Events.Change.superClass_.toJson.call(this);return e.element=this.element,this.name&&(e.name=this.name),e.newValue=this.newValue,e},t.Events.Change.prototype.fromJson=function(e){t.Events.Change.superClass_.fromJson.call(this,e),this.element=e.element,this.name=e.name,this.newValue=e.newValue},t.Events.Change.prototype.isNull=function(){return this.oldValue==this.newValue},t.Events.Change.prototype.run=function(e){var i=this.getEventWorkspace_().getBlockById(this.blockId);if(i)switch(i.mutator&&i.mutator.setVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(i=i.getField(this.name))?i.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":i.setCommentText(e||null);break;case"collapsed":i.setCollapsed(!!e);break;case"disabled":i.setEnabled(!e);break;case"inline":i.setInputsInline(!!e);break;case"mutation":var n="";if(i.mutationToDom&&(n=(n=i.mutationToDom())&&t.Xml.domToText(n)),i.domToMutation){var o=t.Xml.textToDom(e||"<mutation/>");i.domToMutation(o)}t.Events.fire(new t.Events.Change(i,"mutation",null,n,e));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},t.Events.Create=function(e){t.Events.Create.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=e.workspace.rendered?t.Xml.blockToDomWithXY(e):t.Xml.blockToDom(e),this.ids=t.Events.getDescendantIds(e))},t.utils.object.inherits(t.Events.Create,t.Events.BlockBase),t.Events.BlockCreate=t.Events.Create,t.Events.Create.prototype.type=t.Events.CREATE,t.Events.Create.prototype.toJson=function(){var e=t.Events.Create.superClass_.toJson.call(this);return e.xml=t.Xml.domToText(this.xml),e.ids=this.ids,e},t.Events.Create.prototype.fromJson=function(e){t.Events.Create.superClass_.fromJson.call(this,e),this.xml=t.Xml.textToDom(e.xml),this.ids=e.ids},t.Events.Create.prototype.run=function(e){var i=this.getEventWorkspace_();if(e)(e=t.utils.xml.createElement("xml")).appendChild(this.xml),t.Xml.domToWorkspace(e,i);else{e=0;for(var n;n=this.ids[e];e++){var o=i.getBlockById(n);o?o.dispose(!1):n==this.blockId&&console.warn("Can't uncreate non-existent block: "+n)}}},t.Events.Delete=function(e){if(t.Events.Delete.superClass_.constructor.call(this,e),e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=e.workspace.rendered?t.Xml.blockToDomWithXY(e):t.Xml.blockToDom(e),this.ids=t.Events.getDescendantIds(e)}},t.utils.object.inherits(t.Events.Delete,t.Events.BlockBase),t.Events.BlockDelete=t.Events.Delete,t.Events.Delete.prototype.type=t.Events.DELETE,t.Events.Delete.prototype.toJson=function(){var e=t.Events.Delete.superClass_.toJson.call(this);return e.ids=this.ids,e},t.Events.Delete.prototype.fromJson=function(e){t.Events.Delete.superClass_.fromJson.call(this,e),this.ids=e.ids},t.Events.Delete.prototype.run=function(e){var i=this.getEventWorkspace_();if(e){e=0;for(var n;n=this.ids[e];e++){var o=i.getBlockById(n);o?o.dispose(!1):n==this.blockId&&console.warn("Can't delete non-existent block: "+n)}}else(e=t.utils.xml.createElement("xml")).appendChild(this.oldXml),t.Xml.domToWorkspace(e,i)},t.Events.Move=function(e){t.Events.Move.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)},t.utils.object.inherits(t.Events.Move,t.Events.BlockBase),t.Events.BlockMove=t.Events.Move,t.Events.Move.prototype.type=t.Events.MOVE,t.Events.Move.prototype.toJson=function(){var e=t.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(e.newParentId=this.newParentId),this.newInputName&&(e.newInputName=this.newInputName),this.newCoordinate&&(e.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),e},t.Events.Move.prototype.fromJson=function(e){t.Events.Move.superClass_.fromJson.call(this,e),this.newParentId=e.newParentId,this.newInputName=e.newInputName,e.newCoordinate&&(e=e.newCoordinate.split(","),this.newCoordinate=new t.utils.Coordinate(Number(e[0]),Number(e[1])))},t.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},t.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),e={},i=t.getParent();return i?(e.parentId=i.id,(t=i.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e},t.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&t.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},t.Events.Move.prototype.run=function(e){var i=this.getEventWorkspace_(),n=i.getBlockById(this.blockId);if(n){var o=e?this.newParentId:this.oldParentId,r=e?this.newInputName:this.oldInputName;e=e?this.newCoordinate:this.oldCoordinate;var s=null;if(o&&!(s=i.getBlockById(o)))return void console.warn("Can't connect to non-existent block: "+o);if(n.getParent()&&n.unplug(),e)r=n.getRelativeToSurfaceXY(),n.moveBy(e.x-r.x,e.y-r.y);else{if(n=n.outputConnection||n.previousConnection,r){if(i=s.getInput(r))var a=i.connection}else n.type==t.PREVIOUS_STATEMENT&&(a=s.nextConnection);a?n.connect(a):console.warn("Can't connect to non-existent input: "+r)}}else console.warn("Can't move non-existent block: "+this.blockId)},t.registry.register(t.registry.Type.EVENT,t.Events.CREATE,t.Events.Create),t.registry.register(t.registry.Type.EVENT,t.Events.DELETE,t.Events.Delete),t.registry.register(t.registry.Type.EVENT,t.Events.CHANGE,t.Events.Change),t.registry.register(t.registry.Type.EVENT,t.Events.MOVE,t.Events.Move),t.Events.FinishedLoading=function(e){this.isBlank=void 0===e,this.workspaceId=e?e.id:"",this.group=t.Events.getGroup(),this.recordUndo=!1},t.utils.object.inherits(t.Events.FinishedLoading,t.Events.Ui),t.Events.FinishedLoading.prototype.type=t.Events.FINISHED_LOADING,t.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},t.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},t.registry.register(t.registry.Type.EVENT,t.Events.FINISHED_LOADING,t.Events.FinishedLoading),t.Events.VarBase=function(e){t.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===e)?"":e.getId(),this.workspaceId=this.isBlank?"":e.workspace.id},t.utils.object.inherits(t.Events.VarBase,t.Events.Abstract),t.Events.VarBase.prototype.toJson=function(){var e=t.Events.VarBase.superClass_.toJson.call(this);return e.varId=this.varId,e},t.Events.VarBase.prototype.fromJson=function(e){t.Events.VarBase.superClass_.toJson.call(this),this.varId=e.varId},t.Events.VarCreate=function(e){t.Events.VarCreate.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},t.utils.object.inherits(t.Events.VarCreate,t.Events.VarBase),t.Events.VarCreate.prototype.type=t.Events.VAR_CREATE,t.Events.VarCreate.prototype.toJson=function(){var e=t.Events.VarCreate.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},t.Events.VarCreate.prototype.fromJson=function(e){t.Events.VarCreate.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},t.Events.VarCreate.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.createVariable(this.varName,this.varType,this.varId):e.deleteVariableById(this.varId)},t.Events.VarDelete=function(e){t.Events.VarDelete.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},t.utils.object.inherits(t.Events.VarDelete,t.Events.VarBase),t.Events.VarDelete.prototype.type=t.Events.VAR_DELETE,t.Events.VarDelete.prototype.toJson=function(){var e=t.Events.VarDelete.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},t.Events.VarDelete.prototype.fromJson=function(e){t.Events.VarDelete.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},t.Events.VarDelete.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.deleteVariableById(this.varId):e.createVariable(this.varName,this.varType,this.varId)},t.Events.VarRename=function(e,i){t.Events.VarRename.superClass_.constructor.call(this,e),e&&(this.oldName=e.name,this.newName=void 0===i?"":i)},t.utils.object.inherits(t.Events.VarRename,t.Events.VarBase),t.Events.VarRename.prototype.type=t.Events.VAR_RENAME,t.Events.VarRename.prototype.toJson=function(){var e=t.Events.VarRename.superClass_.toJson.call(this);return e.oldName=this.oldName,e.newName=this.newName,e},t.Events.VarRename.prototype.fromJson=function(e){t.Events.VarRename.superClass_.fromJson.call(this,e),this.oldName=e.oldName,this.newName=e.newName},t.Events.VarRename.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.renameVariableById(this.varId,this.newName):e.renameVariableById(this.varId,this.oldName)},t.registry.register(t.registry.Type.EVENT,t.Events.VAR_CREATE,t.Events.VarCreate),t.registry.register(t.registry.Type.EVENT,t.Events.VAR_DELETE,t.Events.VarDelete),t.registry.register(t.registry.Type.EVENT,t.Events.VAR_RENAME,t.Events.VarRename),t.Xml={},t.Xml.workspaceToDom=function(e,i){var n=t.utils.xml.createElement("xml"),o=t.Xml.variablesToDom(t.Variables.allUsedVarModels(e));o.hasChildNodes()&&n.appendChild(o);var r,s=e.getTopComments(!0);for(o=0;r=s[o];o++)n.appendChild(r.toXmlWithXY(i));for(e=e.getTopBlocks(!0),o=0;s=e[o];o++)n.appendChild(t.Xml.blockToDomWithXY(s,i));return n},t.Xml.variablesToDom=function(e){for(var i,n=t.utils.xml.createElement("variables"),o=0;i=e[o];o++){var r=t.utils.xml.createElement("variable");r.appendChild(t.utils.xml.createTextNode(i.name)),i.type&&r.setAttribute("type",i.type),r.id=i.getId(),n.appendChild(r)}return n},t.Xml.blockToDomWithXY=function(e,i){if(e.isInsertionMarker()&&!(e=e.getChildren(!1)[0]))return new DocumentFragment;var n;e.workspace.RTL&&(n=e.workspace.getWidth()),i=t.Xml.blockToDom(e,i);var o=e.getRelativeToSurfaceXY();return i.setAttribute("x",Math.round(e.workspace.RTL?n-o.x:o.x)),i.setAttribute("y",Math.round(o.y)),i},t.Xml.fieldToDom_=function(e){if(e.isSerializable()){var i=t.utils.xml.createElement("field");return i.setAttribute("name",e.name||""),e.toXml(i)}return null},t.Xml.allFieldsToDom_=function(e,i){for(var n,o=0;n=e.inputList[o];o++)for(var r,s=0;r=n.fieldRow[s];s++)(r=t.Xml.fieldToDom_(r))&&i.appendChild(r)},t.Xml.blockToDom=function(e,i){if(e.isInsertionMarker())return(e=e.getChildren(!1)[0])?t.Xml.blockToDom(e):new DocumentFragment;var n=t.utils.xml.createElement(e.isShadow()?"shadow":"block");if(n.setAttribute("type",e.type),i||n.setAttribute("id",e.id),e.mutationToDom){var o=e.mutationToDom();o&&(o.hasChildNodes()||o.hasAttributes())&&n.appendChild(o)}if(t.Xml.allFieldsToDom_(e,n),o=e.getCommentText()){var r=e.commentModel.size,s=e.commentModel.pinned,a=t.utils.xml.createElement("comment");a.appendChild(t.utils.xml.createTextNode(o)),a.setAttribute("pinned",s),a.setAttribute("h",r.height),a.setAttribute("w",r.width),n.appendChild(a)}for(e.data&&((o=t.utils.xml.createElement("data")).appendChild(t.utils.xml.createTextNode(e.data)),n.appendChild(o)),o=0;r=e.inputList[o];o++){var l;if(s=!0,r.type!=t.DUMMY_INPUT){var c=r.connection.targetBlock();r.type==t.INPUT_VALUE?l=t.utils.xml.createElement("value"):r.type==t.NEXT_STATEMENT&&(l=t.utils.xml.createElement("statement")),!(a=r.connection.getShadowDom())||c&&c.isShadow()||l.appendChild(t.Xml.cloneShadow_(a,i)),c&&(a=t.Xml.blockToDom(c,i)).nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&(l.appendChild(a),s=!1),l.setAttribute("name",r.name),s||n.appendChild(l)}}return null!=e.inputsInline&&e.inputsInline!=e.inputsInlineDefault&&n.setAttribute("inline",e.inputsInline),e.isCollapsed()&&n.setAttribute("collapsed",!0),e.isEnabled()||n.setAttribute("disabled",!0),e.isDeletable()||e.isShadow()||n.setAttribute("deletable",!1),e.isMovable()||e.isShadow()||n.setAttribute("movable",!1),e.isEditable()||n.setAttribute("editable",!1),(o=e.getNextBlock())&&(a=t.Xml.blockToDom(o,i)).nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&((l=t.utils.xml.createElement("next")).appendChild(a),n.appendChild(l)),!(a=e.nextConnection&&e.nextConnection.getShadowDom())||o&&o.isShadow()||l.appendChild(t.Xml.cloneShadow_(a,i)),n},t.Xml.cloneShadow_=function(e,i){for(var n,o=e=e.cloneNode(!0);o;)if(i&&"shadow"==o.nodeName&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)n=o,o=o.parentNode,n.nodeType==t.utils.dom.NodeType.TEXT_NODE&&""==n.data.trim()&&o.firstChild!=n&&t.utils.dom.removeNode(n);o&&(n=o,o=o.nextSibling,n.nodeType==t.utils.dom.NodeType.TEXT_NODE&&""==n.data.trim()&&t.utils.dom.removeNode(n))}return e},t.Xml.domToText=function(e){return t.utils.xml.domToText(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},t.Xml.domToPrettyText=function(e){e=t.Xml.domToText(e).split("<");for(var i="",n=1;n<e.length;n++){var o=e[n];"/"==o[0]&&(i=i.substring(2)),e[n]=i+"<"+o,"/"!=o[0]&&"/>"!=o.slice(-2)&&(i+="  ")}return(e=(e=e.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},t.Xml.textToDom=function(e){var i=t.utils.xml.textToDomDocument(e);if(!i||!i.documentElement||i.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+e);return i.documentElement},t.Xml.clearWorkspaceAndLoadFromXml=function(e,i){return i.setResizesEnabled(!1),i.clear(),e=t.Xml.domToWorkspace(e,i),i.setResizesEnabled(!0),e},t.Xml.domToWorkspace=function(e,i){if(e instanceof t.Workspace){var n=e;e=i,i=n,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var o;i.RTL&&(o=i.getWidth()),n=[],t.utils.dom.startTextWidthCache();var r=t.Events.getGroup();r||t.Events.setGroup(!0),i.setResizesEnabled&&i.setResizesEnabled(!1);var s=!0;try{for(var a,l=0;a=e.childNodes[l];l++){var c=a.nodeName.toLowerCase(),h=a;if("block"==c||"shadow"==c&&!t.Events.recordUndo){var u=t.Xml.domToBlock(h,i);n.push(u.id);var d=h.hasAttribute("x")?parseInt(h.getAttribute("x"),10):10,p=h.hasAttribute("y")?parseInt(h.getAttribute("y"),10):10;isNaN(d)||isNaN(p)||u.moveBy(i.RTL?o-d:d,p),s=!1}else{if("shadow"==c)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==c)i.rendered?t.WorkspaceCommentSvg?t.WorkspaceCommentSvg.fromXml(h,i,o):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):t.WorkspaceComment?t.WorkspaceComment.fromXml(h,i):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==c){if(!s)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");t.Xml.domToVariables(h,i),s=!1}}}}finally{r||t.Events.setGroup(!1),t.utils.dom.stopTextWidthCache()}return i.setResizesEnabled&&i.setResizesEnabled(!0),t.Events.fire(new t.Events.FinishedLoading(i)),n},t.Xml.appendDomToWorkspace=function(e,i){var n;if(Object.prototype.hasOwnProperty.call(i,"scale")&&(n=i.getBlocksBoundingBox()),e=t.Xml.domToWorkspace(e,i),n&&n.top!=n.bottom){var o=n.bottom,r=i.RTL?n.right:n.left,s=1/0,a=-1/0,l=1/0;for(n=0;n<e.length;n++){var c=i.getBlockById(e[n]).getRelativeToSurfaceXY();c.y<l&&(l=c.y),c.x<s&&(s=c.x),c.x>a&&(a=c.x)}for(o=o-l+10,r=i.RTL?r-a:r-s,n=0;n<e.length;n++)i.getBlockById(e[n]).moveBy(r,o)}return e},t.Xml.domToBlock=function(e,i){if(e instanceof t.Workspace){var n=e;e=i,i=n,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}t.Events.disable(),n=i.getAllVariables();try{var o=t.Xml.domToBlockHeadless_(e,i),r=o.getDescendants(!1);if(i.rendered){o.setConnectionTracking(!1);for(var s=r.length-1;0<=s;s--)r[s].initSvg();for(s=r.length-1;0<=s;s--)r[s].render(!1);setTimeout((function(){o.disposed||o.setConnectionTracking(!0)}),1),o.updateDisabled(),i.resizeContents()}else for(s=r.length-1;0<=s;s--)r[s].initModel()}finally{t.Events.enable()}if(t.Events.isEnabled()){for(e=t.Variables.getAddedVariables(i,n),s=0;s<e.length;s++)t.Events.fire(new t.Events.VarCreate(e[s]));t.Events.fire(new t.Events.BlockCreate(o))}return o},t.Xml.domToVariables=function(e,i){for(var n,o=0;n=e.childNodes[o];o++)if(n.nodeType==t.utils.dom.NodeType.ELEMENT_NODE){var r=n.getAttribute("type"),s=n.getAttribute("id");i.createVariable(n.textContent,r,s)}},t.Xml.domToBlockHeadless_=function(e,i){var n=null,o=e.getAttribute("type");if(!o)throw TypeError("Block type unspecified: "+e.outerHTML);var r=e.getAttribute("id");n=i.newBlock(o,r);var s,a=null;for(r=0;s=e.childNodes[r];r++)if(s.nodeType!=t.utils.dom.NodeType.TEXT_NODE){for(var l,c=a=null,h=0;l=s.childNodes[h];h++)l.nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&("block"==l.nodeName.toLowerCase()?a=l:"shadow"==l.nodeName.toLowerCase()&&(c=l));h=!1;var u=s.getAttribute("name");switch(l=s,s.nodeName.toLowerCase()){case"mutation":n.domToMutation&&(n.domToMutation(l),n.initSvg&&(h=!0));break;case"comment":if(!t.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}c=l.textContent,a="true"==l.getAttribute("pinned"),s=parseInt(l.getAttribute("w"),10),l=parseInt(l.getAttribute("h"),10),n.setCommentText(c),n.commentModel.pinned=a,isNaN(s)||isNaN(l)||(n.commentModel.size=new t.utils.Size(s,l)),a&&n.getCommentIcon&&!n.isInFlyout&&setTimeout((function(){n.getCommentIcon().setVisible(!0)}),1);break;case"data":n.data=s.textContent;break;case"title":case"field":t.Xml.domToField_(n,u,l);break;case"value":case"statement":if(!(l=n.getInput(u))){console.warn("Ignoring non-existent input "+u+" in block "+o);break}if(a)if((a=t.Xml.domToBlockHeadless_(a,i)).outputConnection)l.connection.connect(a.outputConnection);else{if(!a.previousConnection)throw TypeError("Child block does not have output or previous statement.");l.connection.connect(a.previousConnection)}c&&l.connection.setShadowDom(c);break;case"next":if(a){if(!n.nextConnection)throw TypeError("Next statement does not exist.");if(n.nextConnection.isConnected())throw TypeError("Next statement is already connected.");if(!(a=t.Xml.domToBlockHeadless_(a,i)).previousConnection)throw TypeError("Next block does not have previous statement.");n.nextConnection.connect(a.previousConnection)}c&&n.nextConnection&&n.nextConnection.setShadowDom(c);break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}}if(h&&n.initSvg(),(r=e.getAttribute("inline"))&&n.setInputsInline("true"==r),(r=e.getAttribute("disabled"))&&n.setEnabled("true"!=r&&"disabled"!=r),(r=e.getAttribute("deletable"))&&n.setDeletable("true"==r),(r=e.getAttribute("movable"))&&n.setMovable("true"==r),(r=e.getAttribute("editable"))&&n.setEditable("true"==r),(r=e.getAttribute("collapsed"))&&n.setCollapsed("true"==r),"shadow"==e.nodeName.toLowerCase()){for(e=n.getChildren(!1),r=0;i=e[r];r++)if(!i.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(n.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");n.setShadow(!0)}return n},t.Xml.domToField_=function(t,e,i){var n=t.getField(e);n?n.fromXml(i):console.warn("Ignoring non-existent field "+e+" in block "+t.type)},t.Xml.deleteNext=function(t){for(var e,i=0;e=t.childNodes[i];i++)if("next"==e.nodeName.toLowerCase()){t.removeChild(e);break}},t.Options=function(e){var i=!!e.readOnly;if(i)var n=null,o=!1,r=!1,s=!1,a=!1,l=!1,c=!1;else{n=t.utils.toolbox.convertToolboxDefToJson(e.toolbox),o=t.utils.toolbox.hasCategories(n),void 0===(r=e.trashcan)&&(r=o);var h=e.maxTrashcanContents;r?void 0===h&&(h=32):h=0,void 0===(s=e.collapse)&&(s=o),void 0===(a=e.comments)&&(a=o),void 0===(l=e.disable)&&(l=o),void 0===(c=e.sounds)&&(c=!0)}var u=!!e.rtl,d=e.horizontalLayout;void 0===d&&(d=!1);var p=e.toolboxPosition;p="end"!==p,p=d?p?t.utils.toolbox.Position.TOP:t.utils.toolbox.Position.BOTTOM:p==u?t.utils.toolbox.Position.RIGHT:t.utils.toolbox.Position.LEFT;var g=e.css;void 0===g&&(g=!0);var f="https://blockly-demo.appspot.com/static/media/";e.media?f=e.media:e.path&&(f=e.path+"media/");var m=void 0===e.oneBasedIndex||!!e.oneBasedIndex,v=e.keyMap||t.user.keyMap.createDefaultKeyMap(),_=e.renderer||"geras",y=e.plugins||{};this.RTL=u,this.oneBasedIndex=m,this.collapse=s,this.comments=a,this.disable=l,this.readOnly=i,this.maxBlocks=e.maxBlocks||1/0,this.maxInstances=e.maxInstances,this.pathToMedia=f,this.hasCategories=o,this.moveOptions=t.Options.parseMoveOptions_(e,o),this.hasScrollbars=this.moveOptions.scrollbars,this.hasTrashcan=r,this.maxTrashcanContents=h,this.hasSounds=c,this.hasCss=g,this.horizontalLayout=d,this.languageTree=n,this.gridOptions=t.Options.parseGridOptions_(e),this.zoomOptions=t.Options.parseZoomOptions_(e),this.toolboxPosition=p,this.theme=t.Options.parseThemeOptions_(e),this.keyMap=v,this.renderer=_,this.rendererOverrides=e.rendererOverrides,this.gridPattern=null,this.parentWorkspace=e.parentWorkspace,this.plugins=y},t.BlocklyOptions=function(){},t.Options.parseMoveOptions_=function(t,e){var i=t.move||{},n={};return n.scrollbars=void 0===i.scrollbars&&void 0===t.scrollbars?e:!!i.scrollbars||!!t.scrollbars,n.wheel=!(!n.scrollbars||void 0===i.wheel||!i.wheel),n.drag=!(!n.scrollbars||void 0!==i.drag&&!i.drag),n},t.Options.parseZoomOptions_=function(t){t=t.zoom||{};var e={};return e.controls=void 0!==t.controls&&!!t.controls,e.wheel=void 0!==t.wheel&&!!t.wheel,e.startScale=void 0===t.startScale?1:Number(t.startScale),e.maxScale=void 0===t.maxScale?3:Number(t.maxScale),e.minScale=void 0===t.minScale?.3:Number(t.minScale),e.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),e.pinch=void 0===t.pinch?e.wheel||e.controls:!!t.pinch,e},t.Options.parseGridOptions_=function(t){t=t.grid||{};var e={};return e.spacing=Number(t.spacing)||0,e.colour=t.colour||"#888",e.length=void 0===t.length?1:Number(t.length),e.snap=0<e.spacing&&!!t.snap,e},t.Options.parseThemeOptions_=function(e){return"string"==typeof(e=e.theme||t.Themes.Classic)?t.registry.getObject(t.registry.Type.THEME,e):e instanceof t.Theme?e:t.Theme.defineTheme(e.name||"builtin"+t.utils.IdGenerator.getNextUniqueId(),e)},t.Options.parseToolboxTree=function(e){return t.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),t.utils.toolbox.parseToolboxTree(e)},t.Touch={},t.Touch.TOUCH_ENABLED="ontouchstart"in t.utils.global||!!(t.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!t.utils.global.navigator||!t.utils.global.navigator.maxTouchPoints&&!t.utils.global.navigator.msMaxTouchPoints),t.Touch.touchIdentifier_=null,t.Touch.TOUCH_MAP={},t.utils.global.PointerEvent?t.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:t.Touch.TOUCH_ENABLED&&(t.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),t.longPid_=0,t.longStart=function(e,i){t.longStop_(),e.changedTouches&&1!=e.changedTouches.length||(t.longPid_=setTimeout((function(){e.changedTouches&&(e.button=2,e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),i&&i.handleRightClick(e)}),t.LONGPRESS))},t.longStop_=function(){t.longPid_&&(clearTimeout(t.longPid_),t.longPid_=0)},t.Touch.clearTouchIdentifier=function(){t.Touch.touchIdentifier_=null},t.Touch.shouldHandleEvent=function(e){return!t.Touch.isMouseOrTouchEvent(e)||t.Touch.checkTouchIdentifier(e)},t.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&void 0!==t.changedTouches[0].identifier&&null!==t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},t.Touch.checkTouchIdentifier=function(e){var i=t.Touch.getTouchIdentifierFromEvent(e);return void 0!==t.Touch.touchIdentifier_&&null!==t.Touch.touchIdentifier_?t.Touch.touchIdentifier_==i:("mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type)&&(t.Touch.touchIdentifier_=i,!0)},t.Touch.setClientFromTouch=function(e){if(t.utils.string.startsWith(e.type,"touch")){var i=e.changedTouches[0];e.clientX=i.clientX,e.clientY=i.clientY}},t.Touch.isMouseOrTouchEvent=function(e){return t.utils.string.startsWith(e.type,"touch")||t.utils.string.startsWith(e.type,"mouse")||t.utils.string.startsWith(e.type,"pointer")},t.Touch.isTouchEvent=function(e){return t.utils.string.startsWith(e.type,"touch")||t.utils.string.startsWith(e.type,"pointer")},t.Touch.splitEventByTouches=function(t){var e=[];if(t.changedTouches)for(var i=0;i<t.changedTouches.length;i++)e[i]={type:t.type,changedTouches:[t.changedTouches[i]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else e.push(t);return e},t.ScrollbarPair=function(e){this.workspace_=e,this.hScroll=new t.Scrollbar(e,!0,!0,"blocklyMainWorkspaceScrollbar"),this.vScroll=new t.Scrollbar(e,!1,!0,"blocklyMainWorkspaceScrollbar"),this.corner_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{height:t.Scrollbar.scrollbarThickness,width:t.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),t.utils.dom.insertAfter(this.corner_,e.getBubbleCanvas()),this.oldHostMetrics_=null},t.ScrollbarPair.prototype.dispose=function(){t.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll.dispose(),this.hScroll=null,this.vScroll.dispose(),this.vScroll=null},t.ScrollbarPair.prototype.resize=function(){var e=this.workspace_.getMetrics();if(e){var i=!1,n=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.contentWidth==e.contentWidth&&this.oldHostMetrics_.viewLeft==e.viewLeft&&this.oldHostMetrics_.contentLeft==e.contentLeft||(i=!0),this.oldHostMetrics_&&this.oldHostMetrics_.contentHeight==e.contentHeight&&this.oldHostMetrics_.viewTop==e.viewTop&&this.oldHostMetrics_.contentTop==e.contentTop||(n=!0)):n=i=!0,i||n){try{t.Events.disable(),i&&this.hScroll.resize(e),n&&this.vScroll.resize(e)}finally{t.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y),this.oldHostMetrics_=e}},t.ScrollbarPair.prototype.set=function(t,e){var i={};t*=this.hScroll.ratio,e*=this.vScroll.ratio;var n=this.vScroll.scrollViewSize_;i.x=this.getRatio_(t,this.hScroll.scrollViewSize_),i.y=this.getRatio_(e,n),this.workspace_.setMetrics(i),this.hScroll.setHandlePosition(t),this.vScroll.setHandlePosition(e)},t.ScrollbarPair.prototype.getRatio_=function(t,e){return t/=e,isNaN(t)?0:t},t.Scrollbar=function(e,i,n,o){this.workspace_=e,this.pair_=n||!1,this.horizontal_=i,this.ratio=this.oldHostMetrics_=null,this.createDom_(o),this.position=new t.utils.Coordinate(0,0),e=t.Scrollbar.scrollbarThickness,i?(this.svgBackground_.setAttribute("height",e),this.outerSvg_.setAttribute("height",e),this.svgHandle_.setAttribute("height",e-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",e),this.outerSvg_.setAttribute("width",e),this.svgHandle_.setAttribute("width",e-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=t.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=t.bindEventWithChecks_(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},t.Scrollbar.prototype.origin_=new t.utils.Coordinate(0,0),t.Scrollbar.prototype.startDragMouse_=0,t.Scrollbar.prototype.scrollViewSize_=0,t.Scrollbar.prototype.handleLength_=0,t.Scrollbar.prototype.handlePosition_=0,t.Scrollbar.prototype.isVisible_=!0,t.Scrollbar.prototype.containerVisible_=!0,t.Scrollbar.scrollbarThickness=15,t.Touch.TOUCH_ENABLED&&(t.Scrollbar.scrollbarThickness=25),t.Scrollbar.metricsAreEquivalent_=function(t,e){return!(!t||!e||t.viewWidth!=e.viewWidth||t.viewHeight!=e.viewHeight||t.viewLeft!=e.viewLeft||t.viewTop!=e.viewTop||t.absoluteTop!=e.absoluteTop||t.absoluteLeft!=e.absoluteLeft||t.contentWidth!=e.contentWidth||t.contentHeight!=e.contentHeight||t.contentLeft!=e.contentLeft||t.contentTop!=e.contentTop)},t.Scrollbar.prototype.dispose=function(){this.cleanUp_(),t.unbindEvent_(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,t.unbindEvent_(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,t.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},t.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},t.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},t.Scrollbar.prototype.setScrollViewSize_=function(t){this.scrollViewSize_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollViewSize_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollViewSize_)},t.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll.setContainerVisible(t),this.vScroll.setContainerVisible(t)},t.Scrollbar.prototype.setPosition=function(e,i){this.position.x=e,this.position.y=i,t.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},t.Scrollbar.prototype.resize=function(e){(e||(e=this.workspace_.getMetrics()))&&(t.Scrollbar.metricsAreEquivalent_(e,this.oldHostMetrics_)||(this.oldHostMetrics_=e,this.horizontal_?this.resizeHorizontal_(e):this.resizeVertical_(e),this.onScroll_()))},t.Scrollbar.prototype.resizeHorizontal_=function(t){this.resizeViewHorizontal(t)},t.Scrollbar.prototype.resizeViewHorizontal=function(e){var i=e.viewWidth-1;this.pair_&&(i-=t.Scrollbar.scrollbarThickness),this.setScrollViewSize_(Math.max(0,i)),i=e.absoluteLeft+.5,this.pair_&&this.workspace_.RTL&&(i+=t.Scrollbar.scrollbarThickness),this.setPosition(i,e.absoluteTop+e.viewHeight-t.Scrollbar.scrollbarThickness-.5),this.resizeContentHorizontal(e)},t.Scrollbar.prototype.resizeContentHorizontal=function(t){this.pair_||this.setVisible(this.scrollViewSize_<t.contentWidth),this.ratio=this.scrollViewSize_/t.contentWidth,(-1/0==this.ratio||1/0==this.ratio||isNaN(this.ratio))&&(this.ratio=0),this.setHandleLength_(Math.max(0,t.viewWidth*this.ratio)),this.setHandlePosition(this.constrainHandle_((t.viewLeft-t.contentLeft)*this.ratio))},t.Scrollbar.prototype.resizeVertical_=function(t){this.resizeViewVertical(t)},t.Scrollbar.prototype.resizeViewVertical=function(e){var i=e.viewHeight-1;this.pair_&&(i-=t.Scrollbar.scrollbarThickness),this.setScrollViewSize_(Math.max(0,i)),i=e.absoluteLeft+.5,this.workspace_.RTL||(i+=e.viewWidth-t.Scrollbar.scrollbarThickness-1),this.setPosition(i,e.absoluteTop+.5),this.resizeContentVertical(e)},t.Scrollbar.prototype.resizeContentVertical=function(t){this.pair_||this.setVisible(this.scrollViewSize_<t.contentHeight),this.ratio=this.scrollViewSize_/t.contentHeight,(-1/0==this.ratio||1/0==this.ratio||isNaN(this.ratio))&&(this.ratio=0),this.setHandleLength_(Math.max(0,t.viewHeight*this.ratio)),this.setHandlePosition(this.constrainHandle_((t.viewTop-t.contentTop)*this.ratio))},t.Scrollbar.prototype.createDom_=function(e){var i="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");e&&(i+=" "+e),this.outerSvg_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{class:i},null),this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),e=Math.floor((t.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),t.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},t.Scrollbar.prototype.isVisible=function(){return this.isVisible_},t.Scrollbar.prototype.setContainerVisible=function(t){var e=t!=this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},t.Scrollbar.prototype.setVisible=function(t){var e=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,e&&this.updateDisplay_()},t.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},t.Scrollbar.prototype.onMouseDownBar_=function(e){if(this.workspace_.markFocused(),t.Touch.clearTouchIdentifier(),this.cleanUp_(),t.utils.isRightButton(e))e.stopPropagation();else{var i=t.utils.mouseToSvg(e,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());i=this.horizontal_?i.x:i.y;var n=t.utils.getInjectionDivXY_(this.svgHandle_);n=this.horizontal_?n.x:n.y;var o=this.handlePosition_,r=.95*this.handleLength_;i<=n?o-=r:i>=n+this.handleLength_&&(o+=r),this.setHandlePosition(this.constrainHandle_(o)),this.onScroll_(),e.stopPropagation(),e.preventDefault()}},t.Scrollbar.prototype.onMouseDownHandle_=function(e){this.workspace_.markFocused(),this.cleanUp_(),t.utils.isRightButton(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?e.clientX:e.clientY,t.Scrollbar.onMouseUpWrapper_=t.bindEventWithChecks_(document,"mouseup",this,this.onMouseUpHandle_),t.Scrollbar.onMouseMoveWrapper_=t.bindEventWithChecks_(document,"mousemove",this,this.onMouseMoveHandle_),e.stopPropagation(),e.preventDefault())},t.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandle_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.onScroll_()},t.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),t.Touch.clearTouchIdentifier(),this.cleanUp_()},t.Scrollbar.prototype.cleanUp_=function(){t.hideChaff(!0),t.Scrollbar.onMouseUpWrapper_&&(t.unbindEvent_(t.Scrollbar.onMouseUpWrapper_),t.Scrollbar.onMouseUpWrapper_=null),t.Scrollbar.onMouseMoveWrapper_&&(t.unbindEvent_(t.Scrollbar.onMouseMoveWrapper_),t.Scrollbar.onMouseMoveWrapper_=null)},t.Scrollbar.prototype.constrainHandle_=function(t){return 0>=t||isNaN(t)||this.scrollViewSize_<this.handleLength_?0:Math.min(t,this.scrollViewSize_-this.handleLength_)},t.Scrollbar.prototype.onScroll_=function(){var t=this.handlePosition_/this.scrollViewSize_;isNaN(t)&&(t=0);var e={};this.horizontal_?e.x=t:e.y=t,this.workspace_.setMetrics(e)},t.Scrollbar.prototype.set=function(t){this.setHandlePosition(this.constrainHandle_(t*this.ratio)),this.onScroll_()},t.Scrollbar.prototype.setOrigin=function(e,i){this.origin_=new t.utils.Coordinate(e,i)},t.Tooltip={},t.Tooltip.visible=!1,t.Tooltip.blocked_=!1,t.Tooltip.LIMIT=50,t.Tooltip.mouseOutPid_=0,t.Tooltip.showPid_=0,t.Tooltip.lastX_=0,t.Tooltip.lastY_=0,t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.OFFSET_X=0,t.Tooltip.OFFSET_Y=10,t.Tooltip.RADIUS_OK=10,t.Tooltip.HOVER_MS=750,t.Tooltip.MARGINS=5,t.Tooltip.DIV=null,t.Tooltip.getTooltipOfObject=function(e){if(e=t.Tooltip.getTargetObject_(e)){for(e=e.tooltip;"function"==typeof e;)e=e();if("string"!=typeof e)throw Error("Tooltip function must return a string.");return e}return""},t.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},t.Tooltip.createDom=function(){t.Tooltip.DIV||(t.Tooltip.DIV=document.createElement("div"),t.Tooltip.DIV.className="blocklyTooltipDiv",(t.parentContainer||document.body).appendChild(t.Tooltip.DIV))},t.Tooltip.bindMouseEvents=function(e){e.mouseOverWrapper_=t.bindEvent_(e,"mouseover",null,t.Tooltip.onMouseOver_),e.mouseOutWrapper_=t.bindEvent_(e,"mouseout",null,t.Tooltip.onMouseOut_),e.addEventListener("mousemove",t.Tooltip.onMouseMove_,!1)},t.Tooltip.unbindMouseEvents=function(e){e&&(t.unbindEvent_(e.mouseOverWrapper_),t.unbindEvent_(e.mouseOutWrapper_),e.removeEventListener("mousemove",t.Tooltip.onMouseMove_))},t.Tooltip.onMouseOver_=function(e){t.Tooltip.blocked_||(e=t.Tooltip.getTargetObject_(e.currentTarget),t.Tooltip.element_!=e&&(t.Tooltip.hide(),t.Tooltip.poisonedElement_=null,t.Tooltip.element_=e),clearTimeout(t.Tooltip.mouseOutPid_))},t.Tooltip.onMouseOut_=function(e){t.Tooltip.blocked_||(t.Tooltip.mouseOutPid_=setTimeout((function(){t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.hide()}),1),clearTimeout(t.Tooltip.showPid_))},t.Tooltip.onMouseMove_=function(e){if(t.Tooltip.element_&&t.Tooltip.element_.tooltip&&!t.Tooltip.blocked_)if(t.Tooltip.visible){var i=t.Tooltip.lastX_-e.pageX;e=t.Tooltip.lastY_-e.pageY,Math.sqrt(i*i+e*e)>t.Tooltip.RADIUS_OK&&t.Tooltip.hide()}else t.Tooltip.poisonedElement_!=t.Tooltip.element_&&(clearTimeout(t.Tooltip.showPid_),t.Tooltip.lastX_=e.pageX,t.Tooltip.lastY_=e.pageY,t.Tooltip.showPid_=setTimeout(t.Tooltip.show_,t.Tooltip.HOVER_MS))},t.Tooltip.dispose=function(){t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.hide()},t.Tooltip.hide=function(){t.Tooltip.visible&&(t.Tooltip.visible=!1,t.Tooltip.DIV&&(t.Tooltip.DIV.style.display="none")),t.Tooltip.showPid_&&clearTimeout(t.Tooltip.showPid_)},t.Tooltip.block=function(){t.Tooltip.hide(),t.Tooltip.blocked_=!0},t.Tooltip.unblock=function(){t.Tooltip.blocked_=!1},t.Tooltip.show_=function(){if(!t.Tooltip.blocked_&&(t.Tooltip.poisonedElement_=t.Tooltip.element_,t.Tooltip.DIV)){t.Tooltip.DIV.textContent="";var e=t.Tooltip.getTooltipOfObject(t.Tooltip.element_);e=(e=t.utils.string.wrap(e,t.Tooltip.LIMIT)).split("\n");for(var i=0;i<e.length;i++){var n=document.createElement("div");n.appendChild(document.createTextNode(e[i])),t.Tooltip.DIV.appendChild(n)}e=t.Tooltip.element_.RTL,i=document.documentElement.clientWidth,n=document.documentElement.clientHeight,t.Tooltip.DIV.style.direction=e?"rtl":"ltr",t.Tooltip.DIV.style.display="block",t.Tooltip.visible=!0;var o=t.Tooltip.lastX_;o=e?o-(t.Tooltip.OFFSET_X+t.Tooltip.DIV.offsetWidth):o+t.Tooltip.OFFSET_X;var r=t.Tooltip.lastY_+t.Tooltip.OFFSET_Y;r+t.Tooltip.DIV.offsetHeight>n+window.scrollY&&(r-=t.Tooltip.DIV.offsetHeight+2*t.Tooltip.OFFSET_Y),e?o=Math.max(t.Tooltip.MARGINS-window.scrollX,o):o+t.Tooltip.DIV.offsetWidth>i+window.scrollX-2*t.Tooltip.MARGINS&&(o=i-t.Tooltip.DIV.offsetWidth-2*t.Tooltip.MARGINS),t.Tooltip.DIV.style.top=r+"px",t.Tooltip.DIV.style.left=o+"px"}},t.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},t.WorkspaceDragSurfaceSvg.prototype.SVG_=null,t.WorkspaceDragSurfaceSvg.prototype.container_=null,t.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},t.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(e,i){e=e.toFixed(0),i=i.toFixed(0),this.SVG_.style.display="block",t.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+i+"px, 0px)")},t.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return t.utils.getRelativeXY(this.SVG_)},t.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(e){if(!e)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var i=this.SVG_.childNodes[0],n=this.SVG_.childNodes[1];if(!(i&&n&&t.utils.dom.hasClass(i,"blocklyBlockCanvas")&&t.utils.dom.hasClass(n,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?t.utils.dom.insertAfter(i,this.previousSibling_):e.insertBefore(i,e.firstChild),t.utils.dom.insertAfter(n,i),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");t.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},t.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,e,i,n,o,r){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=i,t.setAttribute("transform","translate(0, 0) scale("+r+")"),e.setAttribute("transform","translate(0, 0) scale("+r+")"),this.SVG_.setAttribute("width",n),this.SVG_.setAttribute("height",o),this.SVG_.appendChild(t),this.SVG_.appendChild(e),this.SVG_.style.display="block"},t.ASTNode=function(e,i,n){if(!i)throw Error("Cannot create a node without a location.");this.type_=e,this.isConnection_=t.ASTNode.isConnectionType_(e),this.location_=i,this.wsCoordinate_=null,this.processParams_(n||null)},t.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},t.ASTNode.NAVIGATE_ALL_FIELDS=!1,t.ASTNode.DEFAULT_OFFSET_Y=-20,t.ASTNode.isConnectionType_=function(e){switch(e){case t.ASTNode.types.PREVIOUS:case t.ASTNode.types.NEXT:case t.ASTNode.types.INPUT:case t.ASTNode.types.OUTPUT:return!0}return!1},t.ASTNode.createFieldNode=function(e){return e?new t.ASTNode(t.ASTNode.types.FIELD,e):null},t.ASTNode.createConnectionNode=function(e){return e?e.type==t.INPUT_VALUE||e.type==t.NEXT_STATEMENT&&e.getParentInput()?t.ASTNode.createInputNode(e.getParentInput()):e.type==t.NEXT_STATEMENT?new t.ASTNode(t.ASTNode.types.NEXT,e):e.type==t.OUTPUT_VALUE?new t.ASTNode(t.ASTNode.types.OUTPUT,e):e.type==t.PREVIOUS_STATEMENT?new t.ASTNode(t.ASTNode.types.PREVIOUS,e):null:null},t.ASTNode.createInputNode=function(e){return e&&e.connection?new t.ASTNode(t.ASTNode.types.INPUT,e.connection):null},t.ASTNode.createBlockNode=function(e){return e?new t.ASTNode(t.ASTNode.types.BLOCK,e):null},t.ASTNode.createStackNode=function(e){return e?new t.ASTNode(t.ASTNode.types.STACK,e):null},t.ASTNode.createWorkspaceNode=function(e,i){return i&&e?new t.ASTNode(t.ASTNode.types.WORKSPACE,e,{wsCoordinate:i}):null},t.ASTNode.createTopNode=function(e){var i=e.previousConnection||e.outputConnection;return i?t.ASTNode.createConnectionNode(i):t.ASTNode.createBlockNode(e)},t.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},t.ASTNode.prototype.getLocation=function(){return this.location_},t.ASTNode.prototype.getType=function(){return this.type_},t.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},t.ASTNode.prototype.isConnection=function(){return this.isConnection_},t.ASTNode.prototype.findNextForInput_=function(){var e,i=this.location_.getParentInput(),n=i.getSourceBlock();for(i=n.inputList.indexOf(i)+1;e=n.inputList[i];i++){for(var o,r=e.fieldRow,s=0;o=r[s];s++)if(o.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(o);if(e.connection)return t.ASTNode.createInputNode(e)}return null},t.ASTNode.prototype.findNextForField_=function(){var e=this.location_,i=e.getParentInput(),n=e.getSourceBlock(),o=n.inputList.indexOf(i);for(e=i.fieldRow.indexOf(e)+1;i=n.inputList[o];o++){for(var r=i.fieldRow;e<r.length;){if(r[e].isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(r[e]);e++}if(e=0,i.connection)return t.ASTNode.createInputNode(i)}return null},t.ASTNode.prototype.findPrevForInput_=function(){for(var e,i=this.location_.getParentInput(),n=i.getSourceBlock(),o=n.inputList.indexOf(i);e=n.inputList[o];o--){if(e.connection&&e!==i)return t.ASTNode.createInputNode(e);for(var r,s=(e=e.fieldRow).length-1;r=e[s];s--)if(r.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(r)}return null},t.ASTNode.prototype.findPrevForField_=function(){var e,i=this.location_,n=i.getParentInput(),o=i.getSourceBlock(),r=o.inputList.indexOf(n);for(i=n.fieldRow.indexOf(i)-1;e=o.inputList[r];r--){if(e.connection&&e!==n)return t.ASTNode.createInputNode(e);for(e=e.fieldRow;-1<i;){if(e[i].isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(e[i]);i--}0<=r-1&&(i=o.inputList[r-1].fieldRow.length-1)}return null},t.ASTNode.prototype.navigateBetweenStacks_=function(e){var i=this.getLocation();if(i instanceof t.Block||(i=i.getSourceBlock()),!i||!i.workspace)return null;var n=i.getRootBlock();i=n.workspace.getTopBlocks(!0);for(var o,r=0;o=i[r];r++)if(n.id==o.id)return-1==(e=r+(e?1:-1))||e==i.length?null:t.ASTNode.createStackNode(i[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")},t.ASTNode.prototype.findTopASTNodeForBlock_=function(e){var i=e.previousConnection||e.outputConnection;return i?t.ASTNode.createConnectionNode(i):t.ASTNode.createBlockNode(e)},t.ASTNode.prototype.getOutAstNodeForBlock_=function(e){if(!e)return null;var i=(e=e.getTopStackBlock()).previousConnection||e.outputConnection;return i&&i.targetConnection&&i.targetConnection.getParentInput()?t.ASTNode.createInputNode(i.targetConnection.getParentInput()):t.ASTNode.createStackNode(e)},t.ASTNode.prototype.findFirstFieldOrInput_=function(e){e=e.inputList;for(var i,n=0;i=e[n];n++){for(var o,r=i.fieldRow,s=0;o=r[s];s++)if(o.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(o);if(i.connection)return t.ASTNode.createInputNode(i)}return null},t.ASTNode.prototype.getSourceBlock=function(){return this.getType()===t.ASTNode.types.BLOCK||this.getType()===t.ASTNode.types.STACK?this.getLocation():this.getType()===t.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},t.ASTNode.prototype.next=function(){switch(this.type_){case t.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case t.ASTNode.types.OUTPUT:var e=this.location_;return t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.FIELD:return this.findNextForField_();case t.ASTNode.types.INPUT:return this.findNextForInput_();case t.ASTNode.types.BLOCK:return t.ASTNode.createConnectionNode(this.location_.nextConnection);case t.ASTNode.types.PREVIOUS:return e=this.location_,t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.NEXT:return e=this.location_,t.ASTNode.createConnectionNode(e.targetConnection)}return null},t.ASTNode.prototype.in=function(){switch(this.type_){case t.ASTNode.types.WORKSPACE:var e=this.location_.getTopBlocks(!0);if(0<e.length)return t.ASTNode.createStackNode(e[0]);break;case t.ASTNode.types.STACK:return e=this.location_,this.findTopASTNodeForBlock_(e);case t.ASTNode.types.BLOCK:return e=this.location_,this.findFirstFieldOrInput_(e);case t.ASTNode.types.INPUT:return t.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},t.ASTNode.prototype.prev=function(){switch(this.type_){case t.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case t.ASTNode.types.FIELD:return this.findPrevForField_();case t.ASTNode.types.INPUT:return this.findPrevForInput_();case t.ASTNode.types.BLOCK:var e=this.location_;return t.ASTNode.createConnectionNode(e.previousConnection||e.outputConnection);case t.ASTNode.types.PREVIOUS:if((e=(e=this.location_).targetConnection)&&!e.getParentInput())return t.ASTNode.createConnectionNode(e);break;case t.ASTNode.types.NEXT:return e=this.location_,t.ASTNode.createBlockNode(e.getSourceBlock())}return null},t.ASTNode.prototype.out=function(){switch(this.type_){case t.ASTNode.types.STACK:var e=this.location_,i=e.getRelativeToSurfaceXY();return i=new t.utils.Coordinate(i.x,i.y+t.ASTNode.DEFAULT_OFFSET_Y),t.ASTNode.createWorkspaceNode(e.workspace,i);case t.ASTNode.types.OUTPUT:return(i=(e=this.location_).targetConnection)?t.ASTNode.createConnectionNode(i):t.ASTNode.createStackNode(e.getSourceBlock());case t.ASTNode.types.FIELD:return t.ASTNode.createBlockNode(this.location_.getSourceBlock());case t.ASTNode.types.INPUT:return e=this.location_,t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.BLOCK:return e=this.location_,this.getOutAstNodeForBlock_(e);case t.ASTNode.types.PREVIOUS:case t.ASTNode.types.NEXT:return e=this.location_,this.getOutAstNodeForBlock_(e.getSourceBlock())}return null},t.Blocks=Object.create(null),t.utils.deprecation={},t.utils.deprecation.warn=function(t,e,i,n){t=t+" was deprecated on "+e+" and will be deleted on "+i+".",n&&(t+="\nUse "+n+" instead."),console.warn(t)},t.Connection=function(t,e){this.sourceBlock_=t,this.type=e},t.Connection.CAN_CONNECT=0,t.Connection.REASON_SELF_CONNECTION=1,t.Connection.REASON_WRONG_TYPE=2,t.Connection.REASON_TARGET_NULL=3,t.Connection.REASON_CHECKS_FAILED=4,t.Connection.REASON_DIFFERENT_WORKSPACES=5,t.Connection.REASON_SHADOW_PARENT=6,t.Connection.REASON_DRAG_CHECKS_FAILED=7,t.Connection.prototype.targetConnection=null,t.Connection.prototype.disposed=!1,t.Connection.prototype.check_=null,t.Connection.prototype.shadowDom_=null,t.Connection.prototype.x=0,t.Connection.prototype.y=0,t.Connection.prototype.connect_=function(e){var i,n=this,o=n.getSourceBlock(),r=e.getSourceBlock();if(e.isConnected()&&e.disconnect(),n.isConnected()){var s=n.targetBlock(),a=n.getShadowDom();if(n.shadowDom_=null,s.isShadow())a=t.Xml.blockToDom(s),s.dispose(!1),s=null;else if(n.type==t.INPUT_VALUE){if(!s.outputConnection)throw Error("Orphan block does not have an output connection.");var l=t.Connection.lastConnectionInRow(r,s);l&&(s.outputConnection.connect(l),s=null)}else if(n.type==t.NEXT_STATEMENT){if(!s.previousConnection)throw Error("Orphan block does not have a previous connection.");for(l=r;l.nextConnection;){var c=l.getNextBlock();if(!c||c.isShadow()){s.workspace.connectionChecker.canConnect(s.previousConnection,l.nextConnection,!1)&&(l.nextConnection.connect(s.previousConnection),s=null);break}l=c}}if(s&&(n.disconnect(),t.Events.recordUndo)){var h=t.Events.getGroup();setTimeout((function(){s.workspace&&!s.getParent()&&(t.Events.setGroup(h),s.outputConnection?s.outputConnection.onFailedConnect(n):s.previousConnection&&s.previousConnection.onFailedConnect(n),t.Events.setGroup(!1))}),t.BUMP_DELAY)}n.shadowDom_=a}t.Events.isEnabled()&&(i=new t.Events.BlockMove(r)),t.Connection.connectReciprocally_(n,e),r.setParent(o),i&&(i.recordNew(),t.Events.fire(i))},t.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},t.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Connection.prototype.isSuperior=function(){return this.type==t.INPUT_VALUE||this.type==t.NEXT_STATEMENT},t.Connection.prototype.isConnected=function(){return!!this.targetConnection},t.Connection.prototype.canConnectWithReason=function(e){return t.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,e,!1)},t.Connection.prototype.checkConnection=function(e){t.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var i=this.getConnectionChecker(),n=i.canConnectWithReason(this,e,!1);if(n!=t.Connection.CAN_CONNECT)throw Error(i.getErrorMessage(n,this,e))},t.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},t.Connection.prototype.isConnectionAllowed=function(e){return t.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!0)},t.Connection.prototype.onFailedConnect=function(t){},t.Connection.prototype.connect=function(e){if(this.targetConnection!=e&&this.getConnectionChecker().canConnect(this,e,!1)){var i=t.Events.getGroup();i||t.Events.setGroup(!0),this.isSuperior()?this.connect_(e):e.connect_(this),i||t.Events.setGroup(!1)}},t.Connection.connectReciprocally_=function(t,e){if(!t||!e)throw Error("Cannot connect null connections.");t.targetConnection=e,e.targetConnection=t},t.Connection.singleConnection_=function(e,i){var n=null;i=i.outputConnection;for(var o=0;o<e.inputList.length;o++){var r=e.inputList[o].connection,s=i.getConnectionChecker();if(r&&r.type==t.INPUT_VALUE&&s.canConnect(i,r,!1)){if(n)return null;n=r}}return n},t.Connection.lastConnectionInRow=function(e,i){for(var n;n=t.Connection.singleConnection_(e,i);)if(!(e=n.targetBlock())||e.isShadow())return n;return null},t.Connection.prototype.disconnect=function(){var e=this.targetConnection;if(!e)throw Error("Source connection not connected.");if(e.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var i=this.sourceBlock_,n=e.getSourceBlock();e=this}else i=e.getSourceBlock(),n=this.sourceBlock_;var o=t.Events.getGroup();o||t.Events.setGroup(!0),this.disconnectInternal_(i,n),n.isShadow()||e.respawnShadow_(),o||t.Events.setGroup(!1)},t.Connection.prototype.disconnectInternal_=function(e,i){var n;t.Events.isEnabled()&&(n=new t.Events.BlockMove(i)),this.targetConnection=this.targetConnection.targetConnection=null,i.setParent(null),n&&(n.recordNew(),t.Events.fire(n))},t.Connection.prototype.respawnShadow_=function(){var e=this.getSourceBlock(),i=this.getShadowDom();if(e.workspace&&i)if((e=t.Xml.domToBlock(i,e.workspace)).outputConnection)this.connect(e.outputConnection);else{if(!e.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(e.previousConnection)}},t.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},t.Connection.prototype.checkType=function(e){return t.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!1)},t.Connection.prototype.checkType_=function(e){return t.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(e)},t.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},t.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},t.Connection.prototype.getCheck=function(){return this.check_},t.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},t.Connection.prototype.getShadowDom=function(){return this.shadowDom_},t.Connection.prototype.neighbours=function(t){return[]},t.Connection.prototype.getParentInput=function(){for(var t=null,e=this.sourceBlock_,i=e.inputList,n=0;n<e.inputList.length;n++)if(i[n].connection===this){t=i[n];break}return t},t.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var e="Output Connection of ";else if(t.previousConnection==this)e="Previous Connection of ";else if(t.nextConnection==this)e="Next Connection of ";else{e=null;for(var i,n=0;i=t.inputList[n];n++)if(i.connection==this){e=i;break}if(!e)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";e='Input "'+e.name+'" connection on '}return e+t.toDevString()},t.Extensions={},t.Extensions.ALL_={},t.Extensions.register=function(e,i){if("string"!=typeof e||""==e.trim())throw Error('Error: Invalid extension name "'+e+'"');if(t.Extensions.ALL_[e])throw Error('Error: Extension "'+e+'" is already registered.');if("function"!=typeof i)throw Error('Error: Extension "'+e+'" must be a function');t.Extensions.ALL_[e]=i},t.Extensions.registerMixin=function(e,i){if(!i||"object"!=typeof i)throw Error('Error: Mixin "'+e+'" must be a object');t.Extensions.register(e,(function(){this.mixin(i)}))},t.Extensions.registerMutator=function(e,i,n,o){var r='Error when registering mutator "'+e+'": ';t.Extensions.checkHasFunction_(r,i.domToMutation,"domToMutation"),t.Extensions.checkHasFunction_(r,i.mutationToDom,"mutationToDom");var s=t.Extensions.checkMutatorDialog_(i,r);if(n&&"function"!=typeof n)throw Error('Extension "'+e+'" is not a function');t.Extensions.register(e,(function(){if(s){if(!t.Mutator)throw Error(r+"Missing require for Blockly.Mutator");this.setMutator(new t.Mutator(o||[]))}this.mixin(i),n&&n.apply(this)}))},t.Extensions.unregister=function(e){t.Extensions.ALL_[e]?delete t.Extensions.ALL_[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},t.Extensions.apply=function(e,i,n){var o=t.Extensions.ALL_[e];if("function"!=typeof o)throw Error('Error: Extension "'+e+'" not found.');if(n)t.Extensions.checkNoMutatorProperties_(e,i);else var r=t.Extensions.getMutatorProperties_(i);if(o.apply(i),n)t.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+e+'": ',i);else if(!t.Extensions.mutatorPropertiesMatch_(r,i))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},t.Extensions.checkHasFunction_=function(t,e,i){if(!e)throw Error(t+'missing required property "'+i+'"');if("function"!=typeof e)throw Error(t+'" required property "'+i+'" must be a function')},t.Extensions.checkNoMutatorProperties_=function(e,i){if(t.Extensions.getMutatorProperties_(i).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+i.id)},t.Extensions.checkMutatorDialog_=function(t,e){var i=void 0!==t.compose,n=void 0!==t.decompose;if(i&&n){if("function"!=typeof t.compose)throw Error(e+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(e+"decompose must be a function.");return!0}if(i||n)throw Error(e+'Must have both or neither of "compose" and "decompose"');return!1},t.Extensions.checkBlockHasMutatorProperties_=function(e,i){if("function"!=typeof i.domToMutation)throw Error(e+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof i.mutationToDom)throw Error(e+'Applying a mutator didn\'t add "mutationToDom"');t.Extensions.checkMutatorDialog_(i,e)},t.Extensions.getMutatorProperties_=function(t){var e=[];return void 0!==t.domToMutation&&e.push(t.domToMutation),void 0!==t.mutationToDom&&e.push(t.mutationToDom),void 0!==t.compose&&e.push(t.compose),void 0!==t.decompose&&e.push(t.decompose),e},t.Extensions.mutatorPropertiesMatch_=function(e,i){if((i=t.Extensions.getMutatorProperties_(i)).length!=e.length)return!1;for(var n=0;n<i.length;n++)if(e[n]!=i[n])return!1;return!0},t.Extensions.buildTooltipForDropdown=function(e,i){var n=[];return"object"==typeof document&&t.utils.runAfterPageLoad((function(){for(var e in i)t.utils.checkMessageReferences(i[e])})),function(){this.type&&-1==n.indexOf(this.type)&&(t.Extensions.checkDropdownOptionsInTable_(this,e,i),n.push(this.type)),this.setTooltip(function(){var o=String(this.getFieldValue(e)),r=i[o];return null==r?-1==n.indexOf(this.type)&&(o="No tooltip mapping for value "+o+" of field "+e,null!=this.type&&(o+=" of block type "+this.type),console.warn(o+".")):r=t.utils.replaceMessageReferences(r),r}.bind(this))}},t.Extensions.checkDropdownOptionsInTable_=function(t,e,i){var n=t.getField(e);if(!n.isOptionListDynamic()){n=n.getOptions();for(var o=0;o<n.length;++o){var r=n[o][1];null==i[r]&&console.warn("No tooltip mapping for value "+r+" of field "+e+" of block type "+t.type)}}},t.Extensions.buildTooltipWithFieldText=function(e,i){return"object"==typeof document&&t.utils.runAfterPageLoad((function(){t.utils.checkMessageReferences(e)})),function(){this.setTooltip(function(){var n=this.getField(i);return t.utils.replaceMessageReferences(e).replace("%1",n?n.getText():"")}.bind(this))}},t.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},t.Extensions.register("parent_tooltip_when_inline",t.Extensions.extensionParentTooltip_),t.fieldRegistry={},t.fieldRegistry.register=function(e,i){t.registry.register(t.registry.Type.FIELD,e,i)},t.fieldRegistry.unregister=function(e){t.registry.unregister(t.registry.Type.FIELD,e)},t.fieldRegistry.fromJson=function(e){var i=t.registry.getObject(t.registry.Type.FIELD,e.type);return i?i.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},t.blockAnimations={},t.blockAnimations.disconnectPid_=0,t.blockAnimations.disconnectGroup_=null,t.blockAnimations.disposeUiEffect=function(e){var i=e.workspace,n=e.getSvgRoot();i.getAudioManager().play("delete"),e=i.getSvgXY(n),(n=n.cloneNode(!0)).translateX_=e.x,n.translateY_=e.y,n.setAttribute("transform","translate("+e.x+","+e.y+")"),i.getParentSvg().appendChild(n),n.bBox_=n.getBBox(),t.blockAnimations.disposeUiStep_(n,i.RTL,new Date,i.scale)},t.blockAnimations.disposeUiStep_=function(e,i,n,o){var r=(new Date-n)/150;1<r?t.utils.dom.removeNode(e):(e.setAttribute("transform","translate("+(e.translateX_+(i?-1:1)*e.bBox_.width*o/2*r)+","+(e.translateY_+e.bBox_.height*o*r)+") scale("+(1-r)*o+")"),setTimeout(t.blockAnimations.disposeUiStep_,10,e,i,n,o))},t.blockAnimations.connectionUiEffect=function(e){var i=e.workspace,n=i.scale;if(i.getAudioManager().play("click"),!(1>n)){var o=i.getSvgXY(e.getSvgRoot());e.outputConnection?(o.x+=(e.RTL?3:-3)*n,o.y+=13*n):e.previousConnection&&(o.x+=(e.RTL?-23:23)*n,o.y+=3*n),e=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{cx:o.x,cy:o.y,r:0,fill:"none",stroke:"#888","stroke-width":10},i.getParentSvg()),t.blockAnimations.connectionUiStep_(e,new Date,n)}},t.blockAnimations.connectionUiStep_=function(e,i,n){var o=(new Date-i)/150;1<o?t.utils.dom.removeNode(e):(e.setAttribute("r",25*o*n),e.style.opacity=1-o,t.blockAnimations.disconnectPid_=setTimeout(t.blockAnimations.connectionUiStep_,10,e,i,n))},t.blockAnimations.disconnectUiEffect=function(e){if(e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var i=e.getHeightWidth().height;i=Math.atan(10/i)/Math.PI*180,e.RTL||(i*=-1),t.blockAnimations.disconnectUiStep_(e.getSvgRoot(),i,new Date)}},t.blockAnimations.disconnectUiStep_=function(e,i,n){var o=(new Date-n)/200;1<o?e.skew_="":(e.skew_="skewX("+Math.round(Math.sin(o*Math.PI*3)*(1-o)*i)+")",t.blockAnimations.disconnectGroup_=e,t.blockAnimations.disconnectPid_=setTimeout(t.blockAnimations.disconnectUiStep_,10,e,i,n)),e.setAttribute("transform",e.translate_+e.skew_)},t.blockAnimations.disconnectUiStop=function(){if(t.blockAnimations.disconnectGroup_){clearTimeout(t.blockAnimations.disconnectPid_);var e=t.blockAnimations.disconnectGroup_;e.skew_="",e.setAttribute("transform",e.translate_),t.blockAnimations.disconnectGroup_=null}},t.InsertionMarkerManager=function(e){this.topBlock_=t.selected=e,this.workspace_=e.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},t.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},t.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,t.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{t.Events.enable()}},t.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},t.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},t.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},t.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(t.Events.disable(),this.hidePreview_(),t.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var e=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;t.blockAnimations.connectionUiEffect(e.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},t.InsertionMarkerManager.prototype.update=function(e,i){var n=this.getCandidate_(e);((this.wouldDeleteBlock_=this.shouldDelete_(n,i))||this.shouldUpdatePreviews_(n,e))&&(t.Events.disable(),this.maybeHidePreview_(n),this.maybeShowPreview_(n),t.Events.enable())},t.InsertionMarkerManager.prototype.createMarkerBlock_=function(e){var i=e.type;t.Events.disable();try{var n=this.workspace_.newBlock(i);if(n.setInsertionMarker(!0),e.mutationToDom){var o=e.mutationToDom();o&&n.domToMutation(o)}for(i=0;i<e.inputList.length;i++){var r=e.inputList[i];if(r.name!=t.Block.COLLAPSED_INPUT_NAME){var s=n.inputList[i];for(o=0;o<r.fieldRow.length;o++)s.fieldRow[o].setValue(r.fieldRow[o].getValue())}}n.setCollapsed(e.isCollapsed()),n.setInputsInline(e.getInputsInline()),n.initSvg(),n.getSvgRoot().setAttribute("visibility","hidden")}finally{t.Events.enable()}return n},t.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var e=this.topBlock_.getConnections_(!1),i=this.topBlock_.lastConnectionInStack();if(i&&i!=this.topBlock_.nextConnection){if(e.push(i),this.lastOnStack_=i,this.lastMarker_){t.Events.disable();try{this.lastMarker_.dispose()}finally{t.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(i.getSourceBlock())}return e},t.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(e,i){var n=e.local,o=e.closest;return e=e.radius,n&&o?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==o&&this.localConnection_==n||(n=this.localConnection_.x+i.x-this.closestConnection_.x,i=this.localConnection_.y+i.y-this.closestConnection_.y,i=Math.sqrt(n*n+i*i),o&&e>i-t.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},t.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var e=this.getStartRadius_(),i=null,n=null,o=0;o<this.availableConnections_.length;o++){var r=this.availableConnections_[o],s=r.closest(e,t);s.connection&&(i=s.connection,n=r,e=s.radius)}return{closest:i,local:n,radius:e}},t.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?t.CONNECTING_SNAP_RADIUS:t.SNAP_RADIUS},t.InsertionMarkerManager.prototype.shouldDelete_=function(e,i){return e=e&&!!e.closest&&i!=t.DELETE_AREA_TOOLBOX,!!i&&!this.topBlock_.getParent()&&this.topBlock_.isDeletable()&&!e},t.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var e=t.closest;t=t.local,e&&(e==this.closestConnection_||e.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=e,this.localConnection_=t,this.showPreview_()))}},t.InsertionMarkerManager.prototype.showPreview_=function(){var e=this.closestConnection_,i=this.workspace_.getRenderer();switch(i.getConnectionPreviewMethod(e,this.localConnection_,this.topBlock_)){case t.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}e&&i.shouldHighlightConnection(e)&&e.highlight()},t.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var e=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(e||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},t.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},t.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,e=this.closestConnection_,i=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=i.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");i.render(),i.rendered=!0,i.getSvgRoot().setAttribute("visibility","visible"),t&&e&&i.positionNearConnection(t,e),e&&t.connect(e),this.markerConnection_=t},t.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var e=this.markerConnection_,i=e.getSourceBlock(),n=i.nextConnection,o=i.previousConnection,r=i.outputConnection;if(r=e.type==t.INPUT_VALUE&&!(r&&r.targetConnection),!(e!=n||o&&o.targetConnection)||r?e.targetBlock().unplug(!1):e.type==t.NEXT_STATEMENT&&e!=n?((n=e.targetConnection).getSourceBlock().unplug(!1),o=o?o.targetConnection:null,i.unplug(!0),o&&o.connect(n)):i.unplug(!0),e.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,i.getSvgRoot().setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},t.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},t.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},t.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},t.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},t.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},t.BlockDragger=function(e,i){this.draggingBlock_=e,this.workspace_=i,this.draggedConnectionManager_=new t.InsertionMarkerManager(this.draggingBlock_),this.deleteArea_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=t.BlockDragger.initIconData_(e)},t.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},t.BlockDragger.initIconData_=function(t){var e=[];t=t.getDescendants(!1);for(var i,n=0;i=t[n];n++){i=i.getIcons();for(var o=0;o<i.length;o++){var r={location:i[o].getIconLocation(),icon:i[o]};e.push(r)}}return e},t.BlockDragger.prototype.startBlockDrag=function(e,i){t.Events.getGroup()||t.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),t.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),t.blockAnimations.disconnectUiStop(),(this.draggingBlock_.getParent()||i&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())&&(this.draggingBlock_.unplug(i),e=this.pixelsToWorkspaceUnits_(e),e=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),t.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface(),(e=this.workspace_.getToolbox())&&"function"==typeof e.addStyle&&(i=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.addStyle(i))},t.BlockDragger.prototype.fireDragStartEvent_=function(){var e=new t.Events.Ui(this.draggingBlock_,"dragStart",null,this.draggingBlock_.getDescendants(!1));t.Events.fire(e)},t.BlockDragger.prototype.dragBlock=function(e,i){i=this.pixelsToWorkspaceUnits_(i);var n=t.utils.Coordinate.sum(this.startXY_,i);this.draggingBlock_.moveDuringDrag(n),this.dragIcons_(i),this.deleteArea_=this.workspace_.isDeleteArea(e),this.draggedConnectionManager_.update(i,this.deleteArea_),this.updateCursorDuringBlockDrag_()},t.BlockDragger.prototype.endBlockDrag=function(e,i){this.dragBlock(e,i),this.dragIconData_=[],this.fireDragEndEvent_(),t.utils.dom.stopTextWidthCache(),t.blockAnimations.disconnectUiStop(),e=this.pixelsToWorkspaceUnits_(i),i=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.moveOffDragSurface(i),this.maybeDeleteBlock_()||(this.draggingBlock_.moveConnections(e.x,e.y),this.draggingBlock_.setDragging(!1),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()),this.workspace_.setResizesEnabled(!0),(e=this.workspace_.getToolbox())&&"function"==typeof e.removeStyle&&(i=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.removeStyle(i)),t.Events.setGroup(!1)},t.BlockDragger.prototype.fireDragEndEvent_=function(){var e=new t.Events.Ui(this.draggingBlock_,"dragStop",this.draggingBlock_.getDescendants(!1),null);t.Events.fire(e)},t.BlockDragger.prototype.fireMoveEvent_=function(){var e=new t.Events.BlockMove(this.draggingBlock_);e.oldCoordinate=this.startXY_,e.recordNew(),t.Events.fire(e)},t.BlockDragger.prototype.maybeDeleteBlock_=function(){var e=this.workspace_.trashcan;return this.wouldDeleteBlock_?(e&&setTimeout(e.closeLid.bind(e),100),this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),t.draggingConnections=[]):e&&e.closeLid(),this.wouldDeleteBlock_},t.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock();var e=this.workspace_.trashcan;this.wouldDeleteBlock_?(this.draggingBlock_.setDeleteStyle(!0),this.deleteArea_==t.DELETE_AREA_TRASH&&e&&e.setLidOpen(!0)):(this.draggingBlock_.setDeleteStyle(!1),e&&e.setLidOpen(!1))},t.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new t.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},t.BlockDragger.prototype.dragIcons_=function(e){for(var i=0;i<this.dragIconData_.length;i++){var n=this.dragIconData_[i];n.icon.setIconLocation(t.utils.Coordinate.sum(n.location,e))}},t.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},t.ConnectionChecker=function(){},t.ConnectionChecker.prototype.canConnect=function(e,i,n,o){return this.canConnectWithReason(e,i,n,o)==t.Connection.CAN_CONNECT},t.ConnectionChecker.prototype.canConnectWithReason=function(e,i,n,o){var r=this.doSafetyChecks(e,i);return r!=t.Connection.CAN_CONNECT?r:this.doTypeChecks(e,i)?n&&!this.doDragChecks(e,i,o||0)?t.Connection.REASON_DRAG_CHECKS_FAILED:t.Connection.CAN_CONNECT:t.Connection.REASON_CHECKS_FAILED},t.ConnectionChecker.prototype.getErrorMessage=function(e,i,n){switch(e){case t.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case t.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case t.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case t.Connection.REASON_TARGET_NULL:return"Target connection is null.";case t.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+i+" expected "+i.getCheck()+", found "+n.getCheck();case t.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case t.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},t.ConnectionChecker.prototype.doSafetyChecks=function(e,i){if(!e||!i)return t.Connection.REASON_TARGET_NULL;if(e.isSuperior())var n=e.getSourceBlock(),o=i.getSourceBlock();else o=e.getSourceBlock(),n=i.getSourceBlock();return n==o?t.Connection.REASON_SELF_CONNECTION:i.type!=t.OPPOSITE_TYPE[e.type]?t.Connection.REASON_WRONG_TYPE:n.workspace!==o.workspace?t.Connection.REASON_DIFFERENT_WORKSPACES:n.isShadow()&&!o.isShadow()?t.Connection.REASON_SHADOW_PARENT:t.Connection.CAN_CONNECT},t.ConnectionChecker.prototype.doTypeChecks=function(t,e){if(t=t.getCheck(),e=e.getCheck(),!t||!e)return!0;for(var i=0;i<t.length;i++)if(-1!=e.indexOf(t[i]))return!0;return!1},t.ConnectionChecker.prototype.doDragChecks=function(e,i,n){if(e.distanceFrom(i)>n||i.getSourceBlock().isInsertionMarker())return!1;switch(i.type){case t.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,i);case t.OUTPUT_VALUE:if(i.isConnected()&&!i.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case t.INPUT_VALUE:if(i.isConnected()&&!i.targetBlock().isMovable()&&!i.targetBlock().isShadow())return!1;break;case t.NEXT_STATEMENT:if(i.isConnected()&&!e.getSourceBlock().nextConnection&&!i.targetBlock().isShadow()&&i.targetBlock().nextConnection)return!1;break;default:return!1}return-1==t.draggingConnections.indexOf(i)},t.ConnectionChecker.prototype.canConnectToPrevious_=function(e,i){return!(e.targetConnection||-1!=t.draggingConnections.indexOf(i)||i.targetConnection&&(!(e=i.targetBlock()).isInsertionMarker()||e.getPreviousBlock()))},t.registry.register(t.registry.Type.CONNECTION_CHECKER,t.registry.DEFAULT,t.ConnectionChecker),t.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},t.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},t.VariableMap.prototype.renameVariable=function(e,i){var n=this.getVariable(i,e.type),o=this.workspace.getAllBlocks(!1);t.Events.setGroup(!0);try{n&&n.getId()!=e.getId()?this.renameVariableWithConflict_(e,i,n,o):this.renameVariableAndUses_(e,i,o)}finally{t.Events.setGroup(!1)}},t.VariableMap.prototype.renameVariableById=function(t,e){var i=this.getVariableById(t);if(!i)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(i,e)},t.VariableMap.prototype.renameVariableAndUses_=function(e,i,n){for(t.Events.fire(new t.Events.VarRename(e,i)),e.name=i,i=0;i<n.length;i++)n[i].updateVarName(e)},t.VariableMap.prototype.renameVariableWithConflict_=function(e,i,n,o){var r=e.type;for(i!=n.name&&this.renameVariableAndUses_(n,i,o),i=0;i<o.length;i++)o[i].renameVarById(e.getId(),n.getId());t.Events.fire(new t.Events.VarDelete(e)),e=this.getVariablesOfType(r).indexOf(e),this.variableMap_[r].splice(e,1)},t.VariableMap.prototype.createVariable=function(e,i,n){var o=this.getVariable(e,i);if(o){if(n&&o.getId()!=n)throw Error('Variable "'+e+'" is already in use and its id is "'+o.getId()+'" which conflicts with the passed in id, "'+n+'".');return o}if(n&&this.getVariableById(n))throw Error('Variable id, "'+n+'", is already in use.');return o=n||t.utils.genUid(),i=i||"",o=new t.VariableModel(this.workspace,e,i,o),(e=this.variableMap_[i]||[]).push(o),delete this.variableMap_[i],this.variableMap_[i]=e,o},t.VariableMap.prototype.deleteVariable=function(e){for(var i,n=this.variableMap_[e.type],o=0;i=n[o];o++)if(i.getId()==e.getId()){n.splice(o,1),t.Events.fire(new t.Events.VarDelete(e));break}},t.VariableMap.prototype.deleteVariableById=function(e){var i=this.getVariableById(e);if(i){var n,o=i.name,r=this.getVariableUsesById(e);for(e=0;n=r[e];e++)if("procedures_defnoreturn"==n.type||"procedures_defreturn"==n.type)return e=n.getFieldValue("NAME"),o=t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",e),void t.alert(o);var s=this;1<r.length?(o=t.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(r.length)).replace("%2",o),t.confirm(o,(function(t){t&&i&&s.deleteVariableInternal(i,r)}))):s.deleteVariableInternal(i,r)}else console.warn("Can't delete non-existent variable: "+e)},t.VariableMap.prototype.deleteVariableInternal=function(e,i){var n=t.Events.getGroup();n||t.Events.setGroup(!0);try{for(var o=0;o<i.length;o++)i[o].dispose(!0);this.deleteVariable(e)}finally{n||t.Events.setGroup(!1)}},t.VariableMap.prototype.getVariable=function(e,i){if(i=this.variableMap_[i||""])for(var n,o=0;n=i[o];o++)if(t.Names.equals(n.name,e))return n;return null},t.VariableMap.prototype.getVariableById=function(t){for(var e=Object.keys(this.variableMap_),i=0;i<e.length;i++)for(var n,o=e[i],r=0;n=this.variableMap_[o][r];r++)if(n.getId()==t)return n;return null},t.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},t.VariableMap.prototype.getVariableTypes=function(e){var i={};t.utils.object.mixin(i,this.variableMap_),e&&e.getPotentialVariableMap()&&t.utils.object.mixin(i,e.getPotentialVariableMap().variableMap_),e=Object.keys(i),i=!1;for(var n=0;n<e.length;n++)""==e[n]&&(i=!0);return i||e.push(""),e},t.VariableMap.prototype.getAllVariables=function(){var t,e=[];for(t in this.variableMap_)e=e.concat(this.variableMap_[t]);return e},t.VariableMap.prototype.getAllVariableNames=function(){var t,e=[];for(t in this.variableMap_)for(var i,n=this.variableMap_[t],o=0;i=n[o];o++)e.push(i.name);return e},t.VariableMap.prototype.getVariableUsesById=function(t){for(var e=[],i=this.workspace.getAllBlocks(!1),n=0;n<i.length;n++){var o=i[n].getVarModels();if(o)for(var r=0;r<o.length;r++)o[r].getId()==t&&e.push(i[n])}return e},t.Workspace=function(e){this.id=t.utils.genUid(),t.Workspace.WorkspaceDB_[this.id]=this,this.options=e||new t.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(t.registry.getClassFromOptions(t.registry.Type.CONNECTION_CHECKER,this.options))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new t.VariableMap(this),this.potentialVariableMap_=null},t.Workspace.prototype.rendered=!1,t.Workspace.prototype.isClearing=!1,t.Workspace.prototype.MAX_UNDO=1024,t.Workspace.prototype.connectionDBList=null,t.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete t.Workspace.WorkspaceDB_[this.id]},t.Workspace.SCAN_ANGLE=3,t.Workspace.prototype.sortObjects_=function(e,i){return e=e.getRelativeToSurfaceXY(),i=i.getRelativeToSurfaceXY(),e.y+t.Workspace.prototype.sortObjects_.offset*e.x-(i.y+t.Workspace.prototype.sortObjects_.offset*i.x)},t.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},t.Workspace.prototype.removeTopBlock=function(e){if(!t.utils.arrayRemove(this.topBlocks_,e))throw Error("Block not present in workspace's list of top-most blocks.")},t.Workspace.prototype.getTopBlocks=function(e){var i=[].concat(this.topBlocks_);return e&&1<i.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),i.sort(this.sortObjects_)),i},t.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},t.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},t.Workspace.prototype.getBlocksByType=function(e,i){return this.typedBlocksDB_[e]?(e=this.typedBlocksDB_[e].slice(0),i&&1<e.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e):[]},t.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},t.Workspace.prototype.removeTopComment=function(e){if(!t.utils.arrayRemove(this.topComments_,e))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[e.id]},t.Workspace.prototype.getTopComments=function(e){var i=[].concat(this.topComments_);return e&&1<i.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),i.sort(this.sortObjects_)),i},t.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var e=[],i=0;i<t.length;i++)e.push.apply(e,t[i].getDescendants(!0))}else for(e=this.getTopBlocks(!1),i=0;i<e.length;i++)e.push.apply(e,e[i].getChildren(!1));return e.filter((function(t){return!t.isInsertionMarker()}))},t.Workspace.prototype.clear=function(){this.isClearing=!0;try{var e=t.Events.getGroup();for(e||t.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);e||t.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},t.Workspace.prototype.renameVariableById=function(t,e){this.variableMap_.renameVariableById(t,e)},t.Workspace.prototype.createVariable=function(t,e,i){return this.variableMap_.createVariable(t,e,i)},t.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},t.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},t.Workspace.prototype.getVariable=function(t,e){return this.variableMap_.getVariable(t,e)},t.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},t.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},t.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},t.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},t.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},t.Workspace.prototype.getWidth=function(){return 0},t.Workspace.prototype.newBlock=function(e,i){return new t.Block(this,e,i)},t.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},t.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},t.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var e,i=0;for(e in t){if(t[e]>this.remainingCapacityOfType(e))return!1;i+=t[e]}return!(i>this.remainingCapacity())},t.Workspace.prototype.hasBlockLimits=function(){return 1/0!=this.options.maxBlocks||!!this.options.maxInstances},t.Workspace.prototype.getUndoStack=function(){return this.undoStack_},t.Workspace.prototype.getRedoStack=function(){return this.redoStack_},t.Workspace.prototype.undo=function(e){var i=e?this.redoStack_:this.undoStack_,n=e?this.undoStack_:this.redoStack_,o=i.pop();if(o){for(var r=[o];i.length&&o.group&&o.group==i[i.length-1].group;)r.push(i.pop());for(i=0;o=r[i];i++)n.push(o);r=t.Events.filter(r,e),t.Events.recordUndo=!1;try{for(i=0;o=r[i];i++)o.run(e)}finally{t.Events.recordUndo=!0}}},t.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,t.Events.clearPendingUndo()},t.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},t.Workspace.prototype.removeChangeListener=function(e){t.utils.arrayRemove(this.listeners_,e)},t.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var e,i=0;e=this.listeners_[i];i++)e(t)},t.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},t.Workspace.prototype.setBlockById=function(t,e){this.blockDB_[t]=e},t.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},t.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},t.Workspace.prototype.allInputsFilled=function(t){for(var e,i=this.getTopBlocks(!1),n=0;e=i[n];n++)if(!e.allInputsFilled(t))return!1;return!0},t.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},t.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new t.VariableMap(this)},t.Workspace.prototype.getVariableMap=function(){return this.variableMap_},t.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},t.Workspace.WorkspaceDB_=Object.create(null),t.Workspace.getById=function(e){return t.Workspace.WorkspaceDB_[e]||null},t.Workspace.getAll=function(){var e,i=[];for(e in t.Workspace.WorkspaceDB_)i.push(t.Workspace.WorkspaceDB_[e]);return i},t.Bubble=function(e,i,n,o,r,s){this.workspace_=e,this.content_=i,this.shape_=n,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,n=t.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(n=-n),this.arrow_radians_=t.utils.math.toRadians(n),e.getBubbleCanvas().appendChild(this.createDom_(i,!(!r||!s))),this.setAnchorLocation(o),r&&s||(r=(e=this.content_.getBBox()).width+2*t.Bubble.BORDER_WIDTH,s=e.height+2*t.Bubble.BORDER_WIDTH),this.setBubbleSize(r,s),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},t.Bubble.BORDER_WIDTH=6,t.Bubble.ARROW_THICKNESS=5,t.Bubble.ARROW_ANGLE=20,t.Bubble.ARROW_BEND=4,t.Bubble.ANCHOR_RADIUS=8,t.Bubble.onMouseUpWrapper_=null,t.Bubble.onMouseMoveWrapper_=null,t.Bubble.unbindDragEvents_=function(){t.Bubble.onMouseUpWrapper_&&(t.unbindEvent_(t.Bubble.onMouseUpWrapper_),t.Bubble.onMouseUpWrapper_=null),t.Bubble.onMouseMoveWrapper_&&(t.unbindEvent_(t.Bubble.onMouseMoveWrapper_),t.Bubble.onMouseMoveWrapper_=null)},t.Bubble.bubbleMouseUp_=function(e){t.Touch.clearTouchIdentifier(),t.Bubble.unbindDragEvents_()},t.Bubble.prototype.rendered_=!1,t.Bubble.prototype.anchorXY_=null,t.Bubble.prototype.relativeLeft_=0,t.Bubble.prototype.relativeTop_=0,t.Bubble.prototype.width_=0,t.Bubble.prototype.height_=0,t.Bubble.prototype.autoLayout_=!0,t.Bubble.prototype.createDom_=function(e,i){this.bubbleGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null);var n={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return t.utils.userAgent.JAVA_FX&&(n={}),n=t.utils.dom.createSvgElement(t.utils.Svg.G,n,this.bubbleGroup_),this.bubbleArrow_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{},n),this.bubbleBack_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:t.Bubble.BORDER_WIDTH,ry:t.Bubble.BORDER_WIDTH},n),i?(this.resizeGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),i=2*t.Bubble.BORDER_WIDTH,t.utils.dom.createSvgElement(t.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,i.toString())},this.resizeGroup_),t.utils.dom.createSvgElement(t.utils.Svg.LINE,{class:"blocklyResizeLine",x1:i/3,y1:i-1,x2:i-1,y2:i/3},this.resizeGroup_),t.utils.dom.createSvgElement(t.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*i/3,y1:i-1,x2:i-1,y2:2*i/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=t.bindEventWithChecks_(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=t.bindEventWithChecks_(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(e),this.bubbleGroup_},t.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},t.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},t.Bubble.prototype.bubbleMouseDown_=function(t){var e=this.workspace_.getGesture(t);e&&e.handleBubbleStart(t,this)},t.Bubble.prototype.showContextMenu=function(t){},t.Bubble.prototype.isDeletable=function(){return!1},t.Bubble.prototype.setDeleteStyle=function(t){},t.Bubble.prototype.resizeMouseDown_=function(e){this.promote(),t.Bubble.unbindDragEvents_(),t.utils.isRightButton(e)||(this.workspace_.startDrag(e,new t.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),t.Bubble.onMouseUpWrapper_=t.bindEventWithChecks_(document,"mouseup",this,t.Bubble.bubbleMouseUp_),t.Bubble.onMouseMoveWrapper_=t.bindEventWithChecks_(document,"mousemove",this,this.resizeMouseMove_),t.hideChaff()),e.stopPropagation()},t.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},t.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},t.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},t.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},t.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},t.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetrics();t.viewLeft/=this.workspace_.scale,t.viewWidth/=this.workspace_.scale,t.viewTop/=this.workspace_.scale,t.viewHeight/=this.workspace_.scale;var e=this.getOptimalRelativeLeft_(t),i=this.getOptimalRelativeTop_(t),n=this.shape_.getBBox(),o={x:e,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},r={x:-this.width_-30,y:i};i={x:n.width,y:i};var s={x:e,y:n.height};e=n.width<n.height?i:s,n=n.width<n.height?s:i,i=this.getOverlap_(o,t),s=this.getOverlap_(r,t);var a=this.getOverlap_(e,t);t=this.getOverlap_(n,t),i==(t=Math.max(i,s,a,t))?(this.relativeLeft_=o.x,this.relativeTop_=o.y):s==t?(this.relativeLeft_=r.x,this.relativeTop_=r.y):a==t?(this.relativeLeft_=e.x,this.relativeTop_=e.y):(this.relativeLeft_=n.x,this.relativeTop_=n.y)},t.Bubble.prototype.getOverlap_=function(t,e){var i=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(i+this.width_,e.viewLeft+e.viewWidth)-Math.max(i,e.viewLeft))*(Math.min(t+this.height_,e.viewTop+e.viewHeight)-Math.max(t,e.viewTop))/(this.width_*this.height_)))},t.Bubble.prototype.getOptimalRelativeLeft_=function(e){var i=-this.width_/4;if(this.width_>e.viewWidth)return i;if(this.workspace_.RTL)var n=this.anchorXY_.x-i,o=n-this.width_,r=e.viewLeft+e.viewWidth,s=e.viewLeft+t.Scrollbar.scrollbarThickness/this.workspace_.scale;else n=(o=i+this.anchorXY_.x)+this.width_,s=e.viewLeft,r=e.viewLeft+e.viewWidth-t.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?o<s?i=-(s-this.anchorXY_.x+this.width_):n>r&&(i=-(r-this.anchorXY_.x)):o<s?i=s-this.anchorXY_.x:n>r&&(i=r-this.anchorXY_.x-this.width_),i},t.Bubble.prototype.getOptimalRelativeTop_=function(e){var i=-this.height_/4;if(this.height_>e.viewHeight)return i;var n=this.anchorXY_.y+i,o=n+this.height_,r=e.viewTop;e=e.viewTop+e.viewHeight-t.Scrollbar.scrollbarThickness/this.workspace_.scale;var s=this.anchorXY_.y;return n<r?i=r-s:o>e&&(i=e-s-this.height_),i},t.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.moveTo(t,this.relativeTop_+this.anchorXY_.y)},t.Bubble.prototype.moveTo=function(t,e){this.bubbleGroup_.setAttribute("transform","translate("+t+","+e+")")},t.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},t.Bubble.prototype.getBubbleSize=function(){return new t.utils.Size(this.width_,this.height_)},t.Bubble.prototype.setBubbleSize=function(e,i){var n=2*t.Bubble.BORDER_WIDTH;e=Math.max(e,n+45),i=Math.max(i,n+20),this.width_=e,this.height_=i,this.bubbleBack_.setAttribute("width",e),this.bubbleBack_.setAttribute("height",i),this.resizeGroup_&&(this.workspace_.RTL?this.resizeGroup_.setAttribute("transform","translate("+2*t.Bubble.BORDER_WIDTH+","+(i-n)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(e-n)+","+(i-n)+")")),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},t.Bubble.prototype.renderArrow_=function(){var e=[],i=this.width_/2,n=this.height_/2,o=-this.relativeLeft_,r=-this.relativeTop_;if(i==o&&n==r)e.push("M "+i+","+n);else{r-=n,o-=i,this.workspace_.RTL&&(o*=-1);var s=Math.sqrt(r*r+o*o),a=Math.acos(o/s);0>r&&(a=2*Math.PI-a);var l=a+Math.PI/2;l>2*Math.PI&&(l-=2*Math.PI);var c=Math.sin(l),h=Math.cos(l),u=this.getBubbleSize();l=(u.width+u.height)/t.Bubble.ARROW_THICKNESS,l=Math.min(l,u.width,u.height)/4,o=i+(u=1-t.Bubble.ANCHOR_RADIUS/s)*o,r=n+u*r,u=i+l*h;var d=n+l*c;i-=l*h,n-=l*c,(c=a+this.arrow_radians_)>2*Math.PI&&(c-=2*Math.PI),a=Math.sin(c)*s/t.Bubble.ARROW_BEND,s=Math.cos(c)*s/t.Bubble.ARROW_BEND,e.push("M"+u+","+d),e.push("C"+(u+s)+","+(d+a)+" "+o+","+r+" "+o+","+r),e.push("C"+o+","+r+" "+(i+s)+","+(n+a)+" "+i+","+n)}e.push("z"),this.bubbleArrow_.setAttribute("d",e.join(" "))},t.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},t.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&t.unbindEvent_(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&t.unbindEvent_(this.onMouseDownResizeWrapper_),t.Bubble.unbindDragEvents_(),t.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},t.Bubble.prototype.moveDuringDrag=function(t,e){t?t.translateSurface(e.x,e.y):this.moveTo(e.x,e.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-e.x-this.width_:e.x-this.anchorXY_.x,this.relativeTop_=e.y-this.anchorXY_.y,this.renderArrow_()},t.Bubble.prototype.getRelativeToSurfaceXY=function(){return new t.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},t.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},t.Events.CommentBase=function(e){this.commentId=(this.isBlank=void 0===e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id,this.group=t.Events.getGroup(),this.recordUndo=t.Events.recordUndo},t.utils.object.inherits(t.Events.CommentBase,t.Events.Abstract),t.Events.CommentBase.prototype.toJson=function(){var e=t.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(e.commentId=this.commentId),e},t.Events.CommentBase.prototype.fromJson=function(e){t.Events.CommentBase.superClass_.fromJson.call(this,e),this.commentId=e.commentId},t.Events.CommentChange=function(e,i,n){t.Events.CommentChange.superClass_.constructor.call(this,e),e&&(this.oldContents_=void 0===i?"":i,this.newContents_=void 0===n?"":n)},t.utils.object.inherits(t.Events.CommentChange,t.Events.CommentBase),t.Events.CommentChange.prototype.type=t.Events.COMMENT_CHANGE,t.Events.CommentChange.prototype.toJson=function(){var e=t.Events.CommentChange.superClass_.toJson.call(this);return e.newContents=this.newContents_,e},t.Events.CommentChange.prototype.fromJson=function(e){t.Events.CommentChange.superClass_.fromJson.call(this,e),this.newContents_=e.newValue},t.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},t.Events.CommentChange.prototype.run=function(t){var e=this.getEventWorkspace_().getCommentById(this.commentId);e?e.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},t.Events.CommentCreate=function(e){t.Events.CommentCreate.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},t.utils.object.inherits(t.Events.CommentCreate,t.Events.CommentBase),t.Events.CommentCreate.prototype.type=t.Events.COMMENT_CREATE,t.Events.CommentCreate.prototype.toJson=function(){var e=t.Events.CommentCreate.superClass_.toJson.call(this);return e.xml=t.Xml.domToText(this.xml),e},t.Events.CommentCreate.prototype.fromJson=function(e){t.Events.CommentCreate.superClass_.fromJson.call(this,e),this.xml=t.Xml.textToDom(e.xml)},t.Events.CommentCreate.prototype.run=function(e){t.Events.CommentCreateDeleteHelper(this,e)},t.Events.CommentCreateDeleteHelper=function(e,i){var n=e.getEventWorkspace_();i?((i=t.utils.xml.createElement("xml")).appendChild(e.xml),t.Xml.domToWorkspace(i,n)):(n=n.getCommentById(e.commentId))?n.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+e.commentId)},t.Events.CommentDelete=function(e){t.Events.CommentDelete.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},t.utils.object.inherits(t.Events.CommentDelete,t.Events.CommentBase),t.Events.CommentDelete.prototype.type=t.Events.COMMENT_DELETE,t.Events.CommentDelete.prototype.toJson=function(){return t.Events.CommentDelete.superClass_.toJson.call(this)},t.Events.CommentDelete.prototype.fromJson=function(e){t.Events.CommentDelete.superClass_.fromJson.call(this,e)},t.Events.CommentDelete.prototype.run=function(e){t.Events.CommentCreateDeleteHelper(this,!e)},t.Events.CommentMove=function(e){t.Events.CommentMove.superClass_.constructor.call(this,e),e&&(this.comment_=e,this.oldCoordinate_=e.getXY(),this.newCoordinate_=null)},t.utils.object.inherits(t.Events.CommentMove,t.Events.CommentBase),t.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},t.Events.CommentMove.prototype.type=t.Events.COMMENT_MOVE,t.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},t.Events.CommentMove.prototype.toJson=function(){var e=t.Events.CommentMove.superClass_.toJson.call(this);return this.newCoordinate_&&(e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),e},t.Events.CommentMove.prototype.fromJson=function(e){t.Events.CommentMove.superClass_.fromJson.call(this,e),e.newCoordinate&&(e=e.newCoordinate.split(","),this.newCoordinate_=new t.utils.Coordinate(Number(e[0]),Number(e[1])))},t.Events.CommentMove.prototype.isNull=function(){return t.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},t.Events.CommentMove.prototype.run=function(t){var e=this.getEventWorkspace_().getCommentById(this.commentId);if(e){t=t?this.newCoordinate_:this.oldCoordinate_;var i=e.getXY();e.moveBy(t.x-i.x,t.y-i.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_CREATE,t.Events.CommentCreate),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_CHANGE,t.Events.CommentChange),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_MOVE,t.Events.CommentMove),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_DELETE,t.Events.CommentDelete),t.BubbleDragger=function(e,i){this.draggingBubble_=e,this.workspace_=i,this.deleteArea_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=t.utils.is3dSupported()&&i.getBlockDragSurface()?i.getBlockDragSurface():null},t.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},t.BubbleDragger.prototype.startBubbleDrag=function(){t.Events.getGroup()||t.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0);var e=this.workspace_.getToolbox();if(e&&"function"==typeof e.addStyle){var i=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e.addStyle(i)}},t.BubbleDragger.prototype.dragBubble=function(e,i){i=this.pixelsToWorkspaceUnits_(i),i=t.utils.Coordinate.sum(this.startXY_,i),this.draggingBubble_.moveDuringDrag(this.dragSurface_,i),this.draggingBubble_.isDeletable()&&(this.deleteArea_=this.workspace_.isDeleteArea(e),this.updateCursorDuringBubbleDrag_())},t.BubbleDragger.prototype.maybeDeleteBubble_=function(){var t=this.workspace_.trashcan;return this.wouldDeleteBubble_?(t&&setTimeout(t.closeLid.bind(t),100),this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):t&&t.closeLid(),this.wouldDeleteBubble_},t.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.wouldDeleteBubble_=this.deleteArea_!=t.DELETE_AREA_NONE;var e=this.workspace_.trashcan;this.wouldDeleteBubble_?(this.draggingBubble_.setDeleteStyle(!0),this.deleteArea_==t.DELETE_AREA_TRASH&&e&&e.setLidOpen(!0)):(this.draggingBubble_.setDeleteStyle(!1),e&&e.setLidOpen(!1))},t.BubbleDragger.prototype.endBubbleDrag=function(e,i){this.dragBubble(e,i),e=this.pixelsToWorkspaceUnits_(i),e=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBubble_.moveTo(e.x,e.y),this.maybeDeleteBubble_()||(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),(e=this.workspace_.getToolbox())&&"function"==typeof e.removeStyle&&(i=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.removeStyle(i)),t.Events.setGroup(!1)},t.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var e=new t.Events.CommentMove(this.draggingBubble_);e.setOldCoordinate(this.startXY_),e.recordNew(),t.Events.fire(e)}},t.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new t.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},t.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},t.WorkspaceDragger=function(e){this.workspace_=e,this.startScrollXY_=new t.utils.Coordinate(e.scrollX,e.scrollY)},t.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},t.WorkspaceDragger.prototype.startDrag=function(){t.selected&&t.selected.unselect(),this.workspace_.setupDragSurface()},t.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},t.WorkspaceDragger.prototype.drag=function(e){e=t.utils.Coordinate.sum(this.startScrollXY_,e),this.workspace_.scroll(e.x,e.y)},t.FlyoutDragger=function(e){t.FlyoutDragger.superClass_.constructor.call(this,e.getWorkspace()),this.scrollbar_=e.scrollbar,this.horizontalLayout_=e.horizontalLayout},t.utils.object.inherits(t.FlyoutDragger,t.WorkspaceDragger),t.FlyoutDragger.prototype.drag=function(e){e=t.utils.Coordinate.sum(this.startScrollXY_,e),this.horizontalLayout_?this.scrollbar_.set(-e.x):this.scrollbar_.set(-e.y)},t.Action=function(t,e){this.name=t,this.desc=e},t.navigation={},t.navigation.loggingCallback=null,t.navigation.STATE_FLYOUT=1,t.navigation.STATE_WS=2,t.navigation.STATE_TOOLBOX=3,t.navigation.WS_MOVE_DISTANCE=40,t.navigation.currentState_=t.navigation.STATE_WS,t.navigation.actionNames={PREVIOUS:"previous",NEXT:"next",IN:"in",OUT:"out",INSERT:"insert",MARK:"mark",DISCONNECT:"disconnect",TOOLBOX:"toolbox",EXIT:"exit",TOGGLE_KEYBOARD_NAV:"toggle_keyboard_nav",MOVE_WS_CURSOR_UP:"move workspace cursor up",MOVE_WS_CURSOR_DOWN:"move workspace cursor down",MOVE_WS_CURSOR_LEFT:"move workspace cursor left",MOVE_WS_CURSOR_RIGHT:"move workspace cursor right"},t.navigation.MARKER_NAME="local_marker_1",t.navigation.getMarker=function(){return t.navigation.getNavigationWorkspace().getMarker(t.navigation.MARKER_NAME)},t.navigation.getNavigationWorkspace=function(){return t.getMainWorkspace()},t.navigation.focusToolbox_=function(){var e=t.navigation.getNavigationWorkspace().getToolbox();e&&(t.navigation.currentState_=t.navigation.STATE_TOOLBOX,t.navigation.resetFlyout_(!1),t.navigation.getMarker().getCurNode()||t.navigation.markAtCursor_(),e.getSelectedItem()||e.selectItemByPosition(0))},t.navigation.focusFlyout_=function(){t.navigation.currentState_=t.navigation.STATE_FLYOUT;var e=t.navigation.getNavigationWorkspace(),i=e.getToolbox();e=i?i.getFlyout():e.getFlyout(),t.navigation.getMarker().getCurNode()||t.navigation.markAtCursor_(),e&&e.getWorkspace()&&0<(e=e.getWorkspace().getTopBlocks(!0)).length&&(e=e[0],e=t.ASTNode.createStackNode(e),t.navigation.getFlyoutCursor_().setCurNode(e))},t.navigation.focusWorkspace_=function(){t.hideChaff();var e=t.navigation.getNavigationWorkspace(),i=e.getCursor(),n=!!e.getToolbox(),o=e.getTopBlocks(!0);t.navigation.resetFlyout_(n),t.navigation.currentState_=t.navigation.STATE_WS,0<o.length?i.setCurNode(t.ASTNode.createTopNode(o[0])):(n=new t.utils.Coordinate(100,100),e=t.ASTNode.createWorkspaceNode(e,n),i.setCurNode(e))},t.navigation.getFlyoutCursor_=function(){var e=t.navigation.getNavigationWorkspace(),i=null;return e.rendered&&(i=(e=(i=e.getToolbox())?i.getFlyout():e.getFlyout())?e.getWorkspace().getCursor():null),i},t.navigation.insertFromFlyout=function(){var e=t.navigation.getNavigationWorkspace(),i=e.getFlyout();if(i&&i.isVisible()){var n=t.navigation.getFlyoutCursor_().getCurNode().getLocation();n.isEnabled()?((i=i.createBlock(n)).render(),i.setConnectionTracking(!0),e.getCursor().setCurNode(t.ASTNode.createBlockNode(i)),t.navigation.modify_()||t.navigation.warn_("Something went wrong while inserting a block from the flyout."),t.navigation.focusWorkspace_(),e.getCursor().setCurNode(t.ASTNode.createTopNode(i)),t.navigation.removeMark_()):t.navigation.warn_("Can't insert a disabled block.")}else t.navigation.warn_("Trying to insert from the flyout when the flyout does not  exist or is not visible")},t.navigation.resetFlyout_=function(e){t.navigation.getFlyoutCursor_()&&(t.navigation.getFlyoutCursor_().hide(),e&&t.navigation.getNavigationWorkspace().getFlyout().hide())},t.navigation.modifyWarn_=function(){var e=t.navigation.getMarker().getCurNode(),i=t.navigation.getNavigationWorkspace().getCursor().getCurNode();return e?i?(e=e.getType(),i=i.getType(),e==t.ASTNode.types.FIELD?(t.navigation.warn_("Should not have been able to mark a field."),!1):e==t.ASTNode.types.BLOCK?(t.navigation.warn_("Should not have been able to mark a block."),!1):e==t.ASTNode.types.STACK?(t.navigation.warn_("Should not have been able to mark a stack."),!1):i==t.ASTNode.types.FIELD?(t.navigation.warn_("Cannot attach a field to anything else."),!1):i!=t.ASTNode.types.WORKSPACE||(t.navigation.warn_("Cannot attach a workspace to anything else."),!1)):(t.navigation.warn_("Cannot insert with no cursor node."),!1):(t.navigation.warn_("Cannot insert with no marked node."),!1)},t.navigation.moveBlockToWorkspace_=function(e,i){return!!e&&(e.isShadow()?(t.navigation.warn_("Cannot move a shadow block to the workspace."),!1):(e.getParent()&&e.unplug(!1),e.moveTo(i.getWsCoordinate()),!0))},t.navigation.modify_=function(){var e=t.navigation.getMarker().getCurNode(),i=t.navigation.getNavigationWorkspace().getCursor().getCurNode();if(!t.navigation.modifyWarn_())return!1;var n=e.getType(),o=i.getType(),r=i.getLocation(),s=e.getLocation();return e.isConnection()&&i.isConnection()?t.navigation.connect_(r,s):!e.isConnection()||o!=t.ASTNode.types.BLOCK&&o!=t.ASTNode.types.STACK?n==t.ASTNode.types.WORKSPACE?(i=i?i.getSourceBlock():null,t.navigation.moveBlockToWorkspace_(i,e)):(t.navigation.warn_("Unexpected state in Blockly.navigation.modify_."),!1):t.navigation.insertBlock(r,s)},t.navigation.disconnectChild_=function(e,i){var n=e.getSourceBlock(),o=i.getSourceBlock();n.getRootBlock()==o.getRootBlock()&&(-1<n.getDescendants(!1).indexOf(o)?t.navigation.getInferiorConnection_(i).disconnect():t.navigation.getInferiorConnection_(e).disconnect())},t.navigation.moveAndConnect_=function(e,i){if(!e||!i)return!1;var n=e.getSourceBlock();return!!e.getConnectionChecker().canConnect(e,i,!1)&&(t.navigation.disconnectChild_(e,i),i.isSuperior()||n.getRootBlock().positionNearConnection(e,i),i.connect(e),!0)},t.navigation.getInferiorConnection_=function(t){var e=t.getSourceBlock();return t.isSuperior()?e.previousConnection?e.previousConnection:e.outputConnection?e.outputConnection:null:t},t.navigation.getSuperiorConnection_=function(t){return t.isSuperior()?t:t.targetConnection?t.targetConnection:null},t.navigation.connect_=function(e,i){if(!e||!i)return!1;var n=t.navigation.getInferiorConnection_(e),o=t.navigation.getSuperiorConnection_(i),r=t.navigation.getSuperiorConnection_(e),s=t.navigation.getInferiorConnection_(i);return!!(n&&o&&t.navigation.moveAndConnect_(n,o)||r&&s&&t.navigation.moveAndConnect_(r,s)||t.navigation.moveAndConnect_(e,i))||(o=(n=e.getConnectionChecker()).canConnectWithReason(e,i,!1),t.navigation.warn_("Connection failed with error: "+n.getErrorMessage(o,e,i)),!1)},t.navigation.insertBlock=function(e,i){switch(i.type){case t.PREVIOUS_STATEMENT:if(t.navigation.connect_(e.nextConnection,i))return!0;break;case t.NEXT_STATEMENT:if(t.navigation.connect_(e.previousConnection,i))return!0;break;case t.INPUT_VALUE:if(t.navigation.connect_(e.outputConnection,i))return!0;break;case t.OUTPUT_VALUE:for(var n=0;n<e.inputList.length;n++){var o=e.inputList[n].connection;if(o&&o.type===t.INPUT_VALUE&&t.navigation.connect_(o,i))return!0}if(e.outputConnection&&t.navigation.connect_(e.outputConnection,i))return!0}return t.navigation.warn_("This block can not be inserted at the marked location."),!1},t.navigation.disconnectBlocks_=function(){var e=t.navigation.getNavigationWorkspace(),i=e.getCursor().getCurNode();if(i.isConnection()){var n=i.getLocation();n.isConnected()?(i=n.isSuperior()?n:n.targetConnection,(n=n.isSuperior()?n.targetConnection:n).getSourceBlock().isShadow()?t.navigation.log_("Cannot disconnect a shadow block"):(i.disconnect(),n.bumpAwayFrom(i),i.getSourceBlock().getRootBlock().bringToFront(),i=t.ASTNode.createConnectionNode(i),e.getCursor().setCurNode(i))):t.navigation.log_("Cannot disconnect unconnected connection")}else t.navigation.log_("Cannot disconnect blocks when the cursor is not on a connection")},t.navigation.markAtCursor_=function(){t.navigation.getMarker().setCurNode(t.navigation.getNavigationWorkspace().getCursor().getCurNode())},t.navigation.removeMark_=function(){var e=t.navigation.getMarker();e.setCurNode(null),e.hide()},t.navigation.setState=function(e){t.navigation.currentState_=e},t.navigation.moveCursorOnBlockDelete=function(e){var i=t.navigation.getNavigationWorkspace();if(i&&(i=i.getCursor())){var n=i.getCurNode();(n=n?n.getSourceBlock():null)===e?n.getParent()?(e=n.previousConnection||n.outputConnection)&&i.setCurNode(t.ASTNode.createConnectionNode(e.targetConnection)):i.setCurNode(t.ASTNode.createWorkspaceNode(n.workspace,n.getRelativeToSurfaceXY())):n&&-1<e.getChildren(!1).indexOf(n)&&i.setCurNode(t.ASTNode.createWorkspaceNode(n.workspace,n.getRelativeToSurfaceXY()))}},t.navigation.moveCursorOnBlockMutation=function(e){var i=t.navigation.getNavigationWorkspace().getCursor();if(i){var n=i.getCurNode();(n=n?n.getSourceBlock():null)===e&&i.setCurNode(t.ASTNode.createBlockNode(n))}},t.navigation.enableKeyboardAccessibility=function(){var e=t.navigation.getNavigationWorkspace();e.keyboardAccessibilityMode||(e.keyboardAccessibilityMode=!0,t.navigation.focusWorkspace_())},t.navigation.disableKeyboardAccessibility=function(){var e=t.navigation.getNavigationWorkspace();e.keyboardAccessibilityMode&&(e.keyboardAccessibilityMode=!1,e.getCursor().hide(),t.navigation.getMarker().hide(),t.navigation.getFlyoutCursor_()&&t.navigation.getFlyoutCursor_().hide())},t.navigation.log_=function(e){t.navigation.loggingCallback?t.navigation.loggingCallback("log",e):console.log(e)},t.navigation.warn_=function(e){t.navigation.loggingCallback?t.navigation.loggingCallback("warn",e):console.warn(e)},t.navigation.error_=function(e){t.navigation.loggingCallback?t.navigation.loggingCallback("error",e):console.error(e)},t.navigation.onKeyPress=function(e){return e=t.user.keyMap.serializeKeyEvent(e),!!(e=t.user.keyMap.getActionByKeyCode(e))&&t.navigation.onBlocklyAction(e)},t.navigation.onBlocklyAction=function(e){var i=t.navigation.getNavigationWorkspace(),n=i.options.readOnly,o=!1;return i.keyboardAccessibilityMode?n?-1<t.navigation.READONLY_ACTION_LIST.indexOf(e)&&(o=t.navigation.handleActions_(e)):o=t.navigation.handleActions_(e):e.name===t.navigation.actionNames.TOGGLE_KEYBOARD_NAV&&(t.navigation.enableKeyboardAccessibility(),o=!0),o},t.navigation.handleActions_=function(e){return e.name==t.navigation.actionNames.TOOLBOX||t.navigation.currentState_==t.navigation.STATE_TOOLBOX?t.navigation.toolboxOnAction_(e):e.name==t.navigation.actionNames.TOGGLE_KEYBOARD_NAV?(t.navigation.disableKeyboardAccessibility(),!0):t.navigation.currentState_==t.navigation.STATE_WS?t.navigation.workspaceOnAction_(e):t.navigation.currentState_==t.navigation.STATE_FLYOUT&&t.navigation.flyoutOnAction_(e)},t.navigation.flyoutOnAction_=function(e){var i=t.navigation.getNavigationWorkspace(),n=i.getToolbox();if((i=n?n.getFlyout():i.getFlyout())&&i.onBlocklyAction(e))return!0;switch(e.name){case t.navigation.actionNames.OUT:return t.navigation.focusToolbox_(),!0;case t.navigation.actionNames.MARK:return t.navigation.insertFromFlyout(),!0;case t.navigation.actionNames.EXIT:return t.navigation.focusWorkspace_(),!0;default:return!1}},t.navigation.toolboxOnAction_=function(e){var i=t.navigation.getNavigationWorkspace(),n=i.getToolbox();return!((!n||"function"!=typeof n.onBlocklyAction||!n.onBlocklyAction(e))&&(e.name===t.navigation.actionNames.TOOLBOX?(i.getToolbox()?t.navigation.focusToolbox_():t.navigation.focusFlyout_(),0):e.name===t.navigation.actionNames.IN?(t.navigation.focusFlyout_(),0):e.name!==t.navigation.actionNames.EXIT||(t.navigation.focusWorkspace_(),0)))},t.navigation.moveWSCursor_=function(e,i){var n=t.navigation.getNavigationWorkspace(),o=n.getCursor(),r=n.getCursor().getCurNode();return r.getType()===t.ASTNode.types.WORKSPACE&&(r=r.getWsCoordinate(),o.setCurNode(t.ASTNode.createWorkspaceNode(n,new t.utils.Coordinate(e*t.navigation.WS_MOVE_DISTANCE+r.x,i*t.navigation.WS_MOVE_DISTANCE+r.y))),!0)},t.navigation.workspaceOnAction_=function(e){if(t.navigation.getNavigationWorkspace().getCursor().onBlocklyAction(e))return!0;switch(e.name){case t.navigation.actionNames.INSERT:return t.navigation.modify_(),!0;case t.navigation.actionNames.MARK:return t.navigation.handleEnterForWS_(),!0;case t.navigation.actionNames.DISCONNECT:return t.navigation.disconnectBlocks_(),!0;case t.navigation.actionNames.MOVE_WS_CURSOR_UP:return t.navigation.moveWSCursor_(0,-1);case t.navigation.actionNames.MOVE_WS_CURSOR_DOWN:return t.navigation.moveWSCursor_(0,1);case t.navigation.actionNames.MOVE_WS_CURSOR_LEFT:return t.navigation.moveWSCursor_(-1,0);case t.navigation.actionNames.MOVE_WS_CURSOR_RIGHT:return t.navigation.moveWSCursor_(1,0);default:return!1}},t.navigation.handleEnterForWS_=function(){var e=t.navigation.getNavigationWorkspace().getCursor().getCurNode(),i=e.getType();i==t.ASTNode.types.FIELD?e.getLocation().showEditor():e.isConnection()||i==t.ASTNode.types.WORKSPACE?t.navigation.markAtCursor_():i==t.ASTNode.types.BLOCK?t.navigation.warn_("Cannot mark a block."):i==t.ASTNode.types.STACK&&t.navigation.warn_("Cannot mark a stack.")},t.navigation.ACTION_PREVIOUS=new t.Action(t.navigation.actionNames.PREVIOUS,"Go to the previous location."),t.navigation.ACTION_OUT=new t.Action(t.navigation.actionNames.OUT,"Go to the parent of the current location."),t.navigation.ACTION_NEXT=new t.Action(t.navigation.actionNames.NEXT,"Go to the next location."),t.navigation.ACTION_IN=new t.Action(t.navigation.actionNames.IN,"Go to the first child of the current location."),t.navigation.ACTION_INSERT=new t.Action(t.navigation.actionNames.INSERT,"Connect the current location to the marked location."),t.navigation.ACTION_MARK=new t.Action(t.navigation.actionNames.MARK,"Mark the current location."),t.navigation.ACTION_DISCONNECT=new t.Action(t.navigation.actionNames.DISCONNECT,"Disconnect the block at the current location from its parent."),t.navigation.ACTION_TOOLBOX=new t.Action(t.navigation.actionNames.TOOLBOX,"Open the toolbox."),t.navigation.ACTION_EXIT=new t.Action(t.navigation.actionNames.EXIT,"Close the current modal, such as a toolbox or field editor."),t.navigation.ACTION_TOGGLE_KEYBOARD_NAV=new t.Action(t.navigation.actionNames.TOGGLE_KEYBOARD_NAV,"Turns on and off keyboard navigation."),t.navigation.ACTION_MOVE_WS_CURSOR_LEFT=new t.Action(t.navigation.actionNames.MOVE_WS_CURSOR_LEFT,"Move the workspace cursor to the lefts."),t.navigation.ACTION_MOVE_WS_CURSOR_RIGHT=new t.Action(t.navigation.actionNames.MOVE_WS_CURSOR_RIGHT,"Move the workspace cursor to the right."),t.navigation.ACTION_MOVE_WS_CURSOR_UP=new t.Action(t.navigation.actionNames.MOVE_WS_CURSOR_UP,"Move the workspace cursor up."),t.navigation.ACTION_MOVE_WS_CURSOR_DOWN=new t.Action(t.navigation.actionNames.MOVE_WS_CURSOR_DOWN,"Move the workspace cursor down."),t.navigation.READONLY_ACTION_LIST=[t.navigation.ACTION_PREVIOUS,t.navigation.ACTION_OUT,t.navigation.ACTION_IN,t.navigation.ACTION_NEXT,t.navigation.ACTION_TOGGLE_KEYBOARD_NAV],t.Gesture=function(e,i){this.mouseDownXY_=null,this.currentDragDeltaXY_=new t.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=i,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=e,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!t.DRAG_STACK},t.Gesture.prototype.dispose=function(){t.Touch.clearTouchIdentifier(),t.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&t.unbindEvent_(this.onMoveWrapper_),this.onUpWrapper_&&t.unbindEvent_(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},t.Gesture.prototype.updateFromEvent_=function(e){var i=new t.utils.Coordinate(e.clientX,e.clientY);this.updateDragDelta_(i)&&(this.updateIsDragging_(),t.longStop_()),this.mostRecentEvent_=e},t.Gesture.prototype.updateDragDelta_=function(e){return this.currentDragDeltaXY_=t.utils.Coordinate.difference(e,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=t.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?t.FLYOUT_DRAG_RADIUS:t.DRAG_RADIUS))},t.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),t.Events.getGroup()||t.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},t.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},t.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},t.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=this.flyout_?new t.FlyoutDragger(this.flyout_):new t.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},t.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},t.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new t.BlockDragger(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startBlockDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_)},t.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new t.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},t.Gesture.prototype.doStart=function(e){t.utils.isTargetInput(e)?this.cancel():(this.hasStarted_=!0,t.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),t.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=e,t.Tooltip.block(),this.targetBlock_&&(!this.targetBlock_.isInFlyout&&e.shiftKey&&this.targetBlock_.workspace.keyboardAccessibilityMode?this.creatorWorkspace_.getCursor().setCurNode(t.ASTNode.createTopNode(this.targetBlock_)):this.targetBlock_.select()),t.utils.isRightButton(e)?this.handleRightClick(e):("touchstart"!=e.type.toLowerCase()&&"pointerdown"!=e.type.toLowerCase()||"mouse"==e.pointerType||t.longStart(e,this),this.mouseDownXY_=new t.utils.Coordinate(e.clientX,e.clientY),this.healStack_=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e)))},t.Gesture.prototype.bindMouseEvents=function(e){this.onMoveWrapper_=t.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=t.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this)),e.preventDefault(),e.stopPropagation()},t.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},t.Gesture.prototype.handleUp=function(e){this.updateFromEvent_(e),t.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(e,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(e,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(e),e.preventDefault(),e.stopPropagation(),this.dispose())},t.Gesture.prototype.cancel=function(){this.isEnding_||(t.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},t.Gesture.prototype.handleRightClick=function(e){this.targetBlock_?(this.bringBlockToFront_(),t.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(e)):this.startBubble_?this.startBubble_.showContextMenu(e):this.startWorkspace_&&!this.flyout_&&(t.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()},t.Gesture.prototype.handleWsStart=function(e,i){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(i),this.mostRecentEvent_=e,this.doStart(e),this.startWorkspace_.keyboardAccessibilityMode&&t.navigation.setState(t.navigation.STATE_WS)},t.Gesture.prototype.fireWorkspaceClick_=function(e){var i=new t.Events.Ui(null,"click",null,"workspace");i.workspaceId=e.id,t.Events.fire(i)},t.Gesture.prototype.handleFlyoutStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(e),this.handleWsStart(t,e.getWorkspace())},t.Gesture.prototype.handleBlockStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(e),this.mostRecentEvent_=t},t.Gesture.prototype.handleBubbleStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(e),this.mostRecentEvent_=t},t.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},t.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},t.Gesture.prototype.doBlockClick_=function(){this.flyout_&&this.flyout_.autoClose?this.targetBlock_.isEnabled()&&(t.Events.getGroup()||t.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump()):t.Events.fire(new t.Events.Ui(this.startBlock_,"click",void 0,"block")),this.bringBlockToFront_(),t.Events.setGroup(!1)},t.Gesture.prototype.doWorkspaceClick_=function(e){var i=this.creatorWorkspace_;e.shiftKey&&i.keyboardAccessibilityMode?(e=new t.utils.Coordinate(e.clientX,e.clientY),e=t.utils.screenToWsCoordinates(i,e),e=t.ASTNode.createWorkspaceNode(i,e),i.getCursor().setCurNode(e)):t.selected&&t.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||i)},t.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},t.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},t.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},t.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},t.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},t.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},t.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},t.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},t.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},t.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},t.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},t.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},t.Gesture.prototype.hasStarted=function(){return this.hasStarted_},t.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},t.Gesture.inProgress=function(){for(var e,i=t.Workspace.getAll(),n=0;e=i[n];n++)if(e.currentGesture_)return!0;return!1},t.Field=function(e,i,n){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new t.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,n&&this.configure_(n),this.setValue(e),i&&this.setValidator(i)},t.Field.prototype.DEFAULT_VALUE=null,t.Field.prototype.name=void 0,t.Field.prototype.disposed=!1,t.Field.prototype.maxDisplayLength=50,t.Field.prototype.sourceBlock_=null,t.Field.prototype.isDirty_=!0,t.Field.prototype.visible_=!0,t.Field.prototype.clickTarget_=null,t.Field.NBSP=" ",t.Field.prototype.EDITABLE=!0,t.Field.prototype.SERIALIZABLE=!1,t.Field.prototype.configure_=function(e){var i=e.tooltip;"string"==typeof i&&(i=t.utils.replaceMessageReferences(e.tooltip)),i&&this.setTooltip(i)},t.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},t.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},t.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},t.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},t.Field.prototype.initModel=function(){},t.Field.prototype.createBorderRect_=function(){this.borderRect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},t.Field.prototype.createTextElement_=function(){this.textElement_=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},t.Field.prototype.bindEvents_=function(){t.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=t.bindEventWithChecks_(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},t.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},t.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},t.Field.prototype.dispose=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hideIfOwner(this),t.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&t.unbindEvent_(this.mouseDownWrapper_),t.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},t.Field.prototype.updateEditable=function(){var e=this.fieldGroup_;this.EDITABLE&&e&&(this.sourceBlock_.isEditable()?(t.utils.dom.addClass(e,"blocklyEditableText"),t.utils.dom.removeClass(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(t.utils.dom.addClass(e,"blocklyNonEditableText"),t.utils.dom.removeClass(e,"blocklyEditableText"),e.style.cursor=""))},t.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},t.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},t.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},t.Field.prototype.isVisible=function(){return this.visible_},t.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var e=this.getSvgRoot();e&&(e.style.display=t?"block":"none")}},t.Field.prototype.setValidator=function(t){this.validator_=t},t.Field.prototype.getValidator=function(){return this.validator_},t.Field.prototype.classValidator=function(e){return t.utils.deprecation.warn("Field.prototype.classValidator","May 2019","December 2020","Blockly.Field.prototype.doClassValidation_"),e},t.Field.prototype.callValidator=function(e){t.utils.deprecation.warn("Field.prototype.callValidator","May 2019","December 2020");var i=this.classValidator(e);if(null===i)return null;if(void 0!==i&&(e=i),i=this.getValidator()){if(null===(i=i.call(this,e)))return null;void 0!==i&&(e=i)}return e},t.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},t.Field.prototype.applyColour=function(){},t.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},t.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},t.Field.prototype.updateWidth=function(){t.utils.deprecation.warn("Field.prototype.updateWidth","May 2019","December 2020","Blockly.Field.prototype.updateSize_ or Blockly.utils.dom.getTextWidth"),this.updateSize_()},t.Field.prototype.updateSize_=function(e){var i=this.getConstants(),n=2*(e=null!=e?e:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),o=i.FIELD_TEXT_HEIGHT,r=0;this.textElement_&&(n+=r=t.utils.dom.getFastTextWidth(this.textElement_,i.FIELD_TEXT_FONTSIZE,i.FIELD_TEXT_FONTWEIGHT,i.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(o=Math.max(o,i.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=o,this.size_.width=n,this.positionTextElement_(e,r),this.positionBorderRect_()},t.Field.prototype.positionTextElement_=function(t,e){if(this.textElement_){var i=this.getConstants(),n=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-e-t:t),this.textElement_.setAttribute("y",i.FIELD_TEXT_BASELINE_CENTER?n:n-i.FIELD_TEXT_HEIGHT/2+i.FIELD_TEXT_BASELINE)}},t.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},t.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new t.utils.Size(0,0)},t.Field.prototype.getScaledBBox=function(){if(this.borderRect_)e=this.borderRect_.getBoundingClientRect(),n=t.utils.style.getPageOffset(this.borderRect_),o=e.width,e=e.height;else{var e=this.sourceBlock_.getHeightWidth(),i=this.sourceBlock_.workspace.scale,n=this.getAbsoluteXY_(),o=e.width*i;e=e.height*i,t.utils.userAgent.GECKO?(n.x+=1.5*i,n.y+=1.5*i):t.utils.userAgent.EDGE||t.utils.userAgent.IE||(n.x-=.5*i,n.y-=.5*i),o+=1*i,e+=1*i}return new t.utils.Rect(n.y,n.y+e,n.x,n.x+o)},t.Field.prototype.getDisplayText_=function(){var e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"…"),e=e.replace(/\s/g,t.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="‏"),e):t.Field.NBSP},t.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},t.Field.prototype.setText=function(e){throw t.utils.deprecation.warn("Field.prototype.setText","May 2019","December 2020","Blockly.Field.prototype.setValue"),Error("setText method is deprecated")},t.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},t.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},t.Field.prototype.setValue=function(e){if(null!==e){var i=this.doClassValidation_(e);if(!((e=this.processValidation_(e,i))instanceof Error)){if((i=this.getValidator())&&(i=i.call(this,e),(e=this.processValidation_(e,i))instanceof Error))return;if(!(i=this.sourceBlock_)||!i.disposed){var n=this.getValue();n!==e&&(i&&t.Events.isEnabled()&&t.Events.fire(new t.Events.BlockChange(i,"field",this.name||null,n,e)),this.doValueUpdate_(e),this.isDirty_&&this.forceRerender())}}}},t.Field.prototype.processValidation_=function(t,e){return null===e?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==e&&(t=e),t)},t.Field.prototype.getValue=function(){return this.value_},t.Field.prototype.doClassValidation_=function(t){return null==t?null:t=this.classValidator(t)},t.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},t.Field.prototype.doValueInvalid_=function(t){},t.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},t.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var e=this.getClickTarget_();e?e.tooltip=t:this.tooltip_=t},t.Field.prototype.getTooltip=function(){var e=this.getClickTarget_();return e?t.Tooltip.getTooltipOfObject(e):t.Tooltip.getTooltipOfObject({tooltip:this.tooltip_})},t.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},t.Field.prototype.getAbsoluteXY_=function(){return t.utils.style.getPageOffset(this.getClickTarget_())},t.Field.prototype.referencesVariables=function(){return!1},t.Field.prototype.getParentInput=function(){for(var t=null,e=this.sourceBlock_,i=e.inputList,n=0;n<e.inputList.length;n++)for(var o=i[n],r=o.fieldRow,s=0;s<r.length;s++)if(r[s]===this){t=o;break}return t},t.Field.prototype.getFlipRtl=function(){return!1},t.Field.prototype.isTabNavigable=function(){return!1},t.Field.prototype.onBlocklyAction=function(t){return!1},t.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},t.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},t.Field.prototype.updateMarkers_=function(){var e=this.sourceBlock_.workspace;e.keyboardAccessibilityMode&&this.cursorSvg_&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg_&&e.getMarker(t.navigation.MARKER_NAME).draw()},t.FieldLabel=function(e,i,n){this.class_=null,t.FieldLabel.superClass_.constructor.call(this,e,null,n),n||(this.class_=i||null)},t.utils.object.inherits(t.FieldLabel,t.Field),t.FieldLabel.prototype.DEFAULT_VALUE="",t.FieldLabel.fromJson=function(e){var i=t.utils.replaceMessageReferences(e.text);return new t.FieldLabel(i,void 0,e)},t.FieldLabel.prototype.EDITABLE=!1,t.FieldLabel.prototype.configure_=function(e){t.FieldLabel.superClass_.configure_.call(this,e),this.class_=e.class},t.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&t.utils.dom.addClass(this.textElement_,this.class_)},t.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},t.FieldLabel.prototype.setClass=function(e){this.textElement_&&(this.class_&&t.utils.dom.removeClass(this.textElement_,this.class_),e&&t.utils.dom.addClass(this.textElement_,e)),this.class_=e},t.fieldRegistry.register("field_label",t.FieldLabel),t.Input=function(e,i,n,o){if(e!=t.DUMMY_INPUT&&!i)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=e,this.name=i,this.sourceBlock_=n,this.connection=o,this.fieldRow=[]},t.Input.prototype.align=t.ALIGN_LEFT,t.Input.prototype.visible_=!0,t.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Input.prototype.appendField=function(t,e){return this.insertFieldAt(this.fieldRow.length,t,e),this},t.Input.prototype.insertFieldAt=function(e,i,n){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return i||""==i&&n?("string"==typeof i&&(i=new t.FieldLabel(i)),i.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(i.init(),i.applyColour()),i.name=n,i.setVisible(this.isVisible()),(n=i).prefixField&&(e=this.insertFieldAt(e,n.prefixField)),this.fieldRow.splice(e,0,i),++e,n.suffixField&&(e=this.insertFieldAt(e,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),e):e},t.Input.prototype.removeField=function(t,e){for(var i,n=0;i=this.fieldRow[n];n++)if(i.name===t)return i.dispose(),this.fieldRow.splice(n,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(e)return!1;throw Error('Field "'+t+'" not found.')},t.Input.prototype.isVisible=function(){return this.visible_},t.Input.prototype.setVisible=function(t){var e=[];if(this.visible_==t)return e;this.visible_=t;for(var i,n=0;i=this.fieldRow[n];n++)i.setVisible(t);return this.connection&&(this.connection=this.connection,t?e=this.connection.startTrackingAll():this.connection.stopTrackingAll(),n=this.connection.targetBlock())&&(n.getSvgRoot().style.display=t?"block":"none"),e},t.Input.prototype.markDirty=function(){for(var t,e=0;t=this.fieldRow[e];e++)t.markDirty()},t.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},t.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},t.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},t.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},t.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},t.Input.prototype.dispose=function(){for(var t,e=0;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},t.Block=function(e,i,n){if(t.Generator&&void 0!==t.Generator.prototype[i])throw Error('Block prototypeName "'+i+'" conflicts with Blockly.Generator members.');if(this.id=n&&!e.getBlockById(n)?n:t.utils.genUid(),e.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new t.utils.Size(160,80)},this.xy_=new t.utils.Coordinate(0,0),this.workspace=e,this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,i){if(this.type=i,!(n=t.Blocks[i])||"object"!=typeof n)throw TypeError("Unknown block type: "+i);t.utils.object.mixin(this,n)}e.addTopBlock(this),e.addTypedBlock(this),(e=t.Events.getGroup())||t.Events.setGroup(!0),i=t.Events.recordUndo;try{"function"==typeof this.init&&(t.Events.recordUndo=!1,this.init(),t.Events.recordUndo=i),t.Events.isEnabled()&&t.Events.fire(new t.Events.BlockCreate(this))}finally{e||t.Events.setGroup(!1),t.Events.recordUndo=i}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},t.Block.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",t.Block.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",t.Block.prototype.data=null,t.Block.prototype.disposed=!1,t.Block.prototype.hue_=null,t.Block.prototype.colour_="#000000",t.Block.prototype.styleName_=null,t.Block.prototype.dispose=function(e){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),t.Events.isEnabled()&&t.Events.fire(new t.Events.BlockDelete(this)),t.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),t.selected==this&&(t.selected=null);for(var i=this.childBlocks_.length-1;0<=i;i--)this.childBlocks_[i].dispose(!1);i=0;for(var n;n=this.inputList[i];i++)n.dispose();this.inputList.length=0;var o,r=this.getConnections_(!0);for(i=0;o=r[i];i++)o.dispose()}finally{t.Events.enable(),this.disposed=!0}}},t.Block.prototype.initModel=function(){for(var t,e=0;t=this.inputList[e];e++)for(var i,n=0;i=t.fieldRow[n];n++)i.initModel&&i.initModel()},t.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},t.Block.prototype.unplugFromRow_=function(t){var e=null;this.outputConnection.isConnected()&&(e=this.outputConnection.targetConnection,this.outputConnection.disconnect()),e&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,e,!1)?e.connect(t):t.onFailedConnect(e))},t.Block.prototype.getOnlyValueConnection_=function(){for(var e=null,i=0;i<this.inputList.length;i++){var n=this.inputList[i].connection;if(n&&n.type==t.INPUT_VALUE&&n.targetConnection){if(e)return null;e=n}}return e},t.Block.prototype.unplugFromStack_=function(t){var e=null;this.previousConnection.isConnected()&&(e=this.previousConnection.targetConnection,this.previousConnection.disconnect());var i=this.getNextBlock();t&&i&&!i.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),e&&this.workspace.connectionChecker.canConnect(e,t,!1)&&e.connect(t))},t.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var e,i=0;e=this.inputList[i];i++)e.connection&&t.push(e.connection);return t},t.Block.prototype.lastConnectionInStack=function(){for(var t=this.nextConnection;t;){var e=t.targetBlock();if(!e)return t;t=e.nextConnection}return null},t.Block.prototype.bumpNeighbours=function(){console.warn("Not expected to reach Block.bumpNeighbours function. BlockSvg.bumpNeighbours was expected to be called instead.")},t.Block.prototype.getParent=function(){return this.parentBlock_},t.Block.prototype.getInputWithBlock=function(t){for(var e,i=0;e=this.inputList[i];i++)if(e.connection&&e.connection.targetBlock()==t)return e;return null},t.Block.prototype.getSurroundParent=function(){var t=this;do{var e=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==e);return t},t.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},t.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},t.Block.prototype.getFirstStatementConnection=function(){for(var e,i=0;e=this.inputList[i];i++)if(e.connection&&e.connection.type==t.NEXT_STATEMENT)return e.connection;return null},t.Block.prototype.getRootBlock=function(){var t=this;do{var e=t;t=e.parentBlock_}while(t);return e},t.Block.prototype.getTopStackBlock=function(){var t=this;do{var e=t.getPreviousBlock()}while(e&&e.getNextBlock()==t&&(t=e));return t},t.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var e,i=0;e=this.inputList[i];i++)e.connection&&(e=e.connection.targetBlock())&&t.push(e);return(i=this.getNextBlock())&&t.push(i),t},t.Block.prototype.setParent=function(e){if(e!=this.parentBlock_){if(this.parentBlock_){if(t.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}},t.Block.prototype.getDescendants=function(t){for(var e,i=[this],n=this.getChildren(t),o=0;e=n[o];o++)i.push.apply(i,e.getDescendants(t));return i},t.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setDeletable=function(t){this.deletable_=t},t.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setMovable=function(t){this.movable_=t},t.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(t.utils.getBlockTypeCounts(this,!0))},t.Block.prototype.isShadow=function(){return this.isShadow_},t.Block.prototype.setShadow=function(t){this.isShadow_=t},t.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},t.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},t.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var e;e=this.inputList[t];t++)for(var i,n=0;i=e.fieldRow[n];n++)i.updateEditable()},t.Block.prototype.isDisposed=function(){return this.disposed},t.Block.prototype.getMatchingConnection=function(t,e){var i=this.getConnections_(!0);if(t=t.getConnections_(!0),i.length!=t.length)throw Error("Connection lists did not match in length.");for(var n=0;n<t.length;n++)if(t[n]==e)return i[n];return null},t.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},t.Block.prototype.setTooltip=function(t){this.tooltip=t},t.Block.prototype.getTooltip=function(){return t.Tooltip.getTooltipOfObject(this)},t.Block.prototype.getColour=function(){return this.colour_},t.Block.prototype.getStyleName=function(){return this.styleName_},t.Block.prototype.getHue=function(){return this.hue_},t.Block.prototype.setColour=function(e){e=t.utils.parseBlockColour(e),this.hue_=e.hue,this.colour_=e.hex},t.Block.prototype.setStyle=function(t){this.styleName_=t},t.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},t.Block.prototype.getField=function(t){for(var e,i=0;e=this.inputList[i];i++)for(var n,o=0;n=e.fieldRow[o];o++)if(n.name==t)return n;return null},t.Block.prototype.getVars=function(){for(var t,e=[],i=0;t=this.inputList[i];i++)for(var n,o=0;n=t.fieldRow[o];o++)n.referencesVariables()&&e.push(n.getValue());return e},t.Block.prototype.getVarModels=function(){for(var t,e=[],i=0;t=this.inputList[i];i++)for(var n,o=0;n=t.fieldRow[o];o++)n.referencesVariables()&&(n=this.workspace.getVariableById(n.getValue()))&&e.push(n);return e},t.Block.prototype.updateVarName=function(t){for(var e,i=0;e=this.inputList[i];i++)for(var n,o=0;n=e.fieldRow[o];o++)n.referencesVariables()&&t.getId()==n.getValue()&&n.refreshVariableName()},t.Block.prototype.renameVarById=function(t,e){for(var i,n=0;i=this.inputList[n];n++)for(var o,r=0;o=i.fieldRow[r];r++)o.referencesVariables()&&t==o.getValue()&&o.setValue(e)},t.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},t.Block.prototype.setFieldValue=function(t,e){var i=this.getField(e);if(!i)throw Error('Field "'+e+'" not found.');i.setValue(t)},t.Block.prototype.setPreviousStatement=function(e,i){if(e){if(void 0===i&&(i=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(t.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(i)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},t.Block.prototype.setNextStatement=function(e,i){if(e)void 0===i&&(i=null),this.nextConnection||(this.nextConnection=this.makeConnection_(t.NEXT_STATEMENT)),this.nextConnection.setCheck(i);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},t.Block.prototype.setOutput=function(e,i){if(e){if(void 0===i&&(i=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(t.OUTPUT_VALUE)}this.outputConnection.setCheck(i)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},t.Block.prototype.setInputsInline=function(e){this.inputsInline!=e&&(t.Events.fire(new t.Events.BlockChange(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)},t.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==t.DUMMY_INPUT&&this.inputList[e].type==t.DUMMY_INPUT)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==t.INPUT_VALUE&&this.inputList[e].type==t.DUMMY_INPUT)return!0;return!1},t.Block.prototype.setOutputShape=function(t){this.outputShape_=t},t.Block.prototype.getOutputShape=function(){return this.outputShape_},t.Block.prototype.setDisabled=function(e){t.utils.deprecation.warn("Block.prototype.setDisabled","May 2019","May 2020","Block.prototype.setEnabled"),this.setEnabled(!e)},t.Block.prototype.isEnabled=function(){return!this.disabled},t.Block.prototype.setEnabled=function(e){this.isEnabled()!=e&&(t.Events.fire(new t.Events.BlockChange(this,"disabled",null,this.disabled,!e)),this.disabled=!e)},t.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},t.Block.prototype.isCollapsed=function(){return this.collapsed_},t.Block.prototype.setCollapsed=function(e){this.collapsed_!=e&&(t.Events.fire(new t.Events.BlockChange(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)},t.Block.prototype.toString=function(e,i){function n(t){var e=t.getCheck();return!e&&t.targetConnection&&(e=t.targetConnection.getCheck()),!!e&&(-1!=e.indexOf("Boolean")||-1!=e.indexOf("Number"))}function o(){a&&a.getType()==l.getType()&&a.getLocation()==l.getLocation()&&(a=null)}var r=[];i=i||"?";var s=t.ASTNode.NAVIGATE_ALL_FIELDS;t.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var a=t.ASTNode.createBlockNode(this),l=a;a;){switch(a.getType()){case t.ASTNode.types.INPUT:var c=a.getLocation();a.in()?n(c)&&r.push("("):r.push(i);break;case t.ASTNode.types.FIELD:(c=a.getLocation()).name!=t.Block.COLLAPSED_FIELD_NAME&&r.push(c.getText())}if(!(a=(c=a).in()||c.next())){for(a=c.out(),o();a&&!a.next();)a=a.out(),o(),a&&a.getType()==t.ASTNode.types.INPUT&&n(a.getLocation())&&r.push(")");a&&(a=a.next())}}for(t.ASTNode.NAVIGATE_ALL_FIELDS=s,i=2,s=r.length;i<s;i++)"("==r[i-2]&&")"==r[i]&&(r[i-2]=r[i-1],r.splice(i-1,2),s-=2);return r=r.join(" ").replace(/(\() | (\))/gim,"$1$2").trim()||"???",e&&r.length>e&&(r=r.substring(0,e-3)+"..."),r},t.Block.prototype.appendValueInput=function(e){return this.appendInput_(t.INPUT_VALUE,e)},t.Block.prototype.appendStatementInput=function(e){return this.appendInput_(t.NEXT_STATEMENT,e)},t.Block.prototype.appendDummyInput=function(e){return this.appendInput_(t.DUMMY_INPUT,e||"")},t.Block.prototype.jsonInit=function(e){var i=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(i+"Must not have both an output and a previousStatement.");if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(i+"Must not have both a colour and a style.");e.style?this.jsonInitStyle_(e,i):this.jsonInitColour_(e,i);for(var n=0;void 0!==e["message"+n];)this.interpolate_(e["message"+n],e["args"+n]||[],e["lastDummyAlign"+n],i),n++;if(void 0!==e.inputsInline&&this.setInputsInline(e.inputsInline),void 0!==e.output&&this.setOutput(!0,e.output),void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.previousStatement&&this.setPreviousStatement(!0,e.previousStatement),void 0!==e.nextStatement&&this.setNextStatement(!0,e.nextStatement),void 0!==e.tooltip&&(n=e.tooltip,n=t.utils.replaceMessageReferences(n),this.setTooltip(n)),void 0!==e.enableContextMenu&&(n=e.enableContextMenu,this.contextMenu=!!n),void 0!==e.helpUrl&&(n=e.helpUrl,n=t.utils.replaceMessageReferences(n),this.setHelpUrl(n)),"string"==typeof e.extensions&&(console.warn(i+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),void 0!==e.mutator&&t.Extensions.apply(e.mutator,this,!0),Array.isArray(e.extensions))for(e=e.extensions,i=0;i<e.length;++i)t.Extensions.apply(e[i],this,!1)},t.Block.prototype.jsonInitColour_=function(t,e){if("colour"in t)if(void 0===t.colour)console.warn(e+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(i){console.warn(e+"Illegal colour value: ",t)}}},t.Block.prototype.jsonInitStyle_=function(t,e){t=t.style;try{this.setStyle(t)}catch(i){console.warn(e+"Style does not exist: ",t)}},t.Block.prototype.mixin=function(e,i){if(void 0!==i&&"boolean"!=typeof i)throw Error("opt_disableCheck must be a boolean if provided");if(!i){for(var n in i=[],e)void 0!==this[n]&&i.push(n);if(i.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(i))}t.utils.object.mixin(this,e)},t.Block.prototype.interpolate_=function(e,i,n,o){var r=t.utils.tokenizeInterpolation(e),s=[],a=0;e=[];for(var l=0;l<r.length;l++){var c=r[l];if("number"==typeof c){if(0>=c||c>i.length)throw Error('Block "'+this.type+'": Message index %'+c+" out of range.");if(s[c])throw Error('Block "'+this.type+'": Message index %'+c+" duplicated.");s[c]=!0,a++,e.push(i[c-1])}else(c=c.trim())&&e.push(c)}if(a!=i.length)throw Error('Block "'+this.type+'": Message does not reference all '+i.length+" arg(s).");for(e.length&&("string"==typeof e[e.length-1]||t.utils.string.startsWith(e[e.length-1].type,"field_"))&&(l={type:"input_dummy"},n&&(l.align=n),e.push(l)),n={LEFT:t.ALIGN_LEFT,RIGHT:t.ALIGN_RIGHT,CENTRE:t.ALIGN_CENTRE,CENTER:t.ALIGN_CENTRE},i=[],l=0;l<e.length;l++)if("string"==typeof(s=e[l]))i.push([s,void 0]);else{r=a=null;do{if(c=!1,"string"==typeof s)a=new t.FieldLabel(s);else switch(s.type){case"input_value":r=this.appendValueInput(s.name);break;case"input_statement":r=this.appendStatementInput(s.name);break;case"input_dummy":r=this.appendDummyInput(s.name);break;default:!(a=t.fieldRegistry.fromJson(s))&&s.alt&&(s=s.alt,c=!0)}}while(c);if(a)i.push([a,s.name]);else if(r){for(s.check&&r.setCheck(s.check),s.align&&(void 0===(a=n[s.align.toUpperCase()])?console.warn(o+"Illegal align value: ",s.align):r.setAlign(a)),s=0;s<i.length;s++)r.appendField(i[s][0],i[s][1]);i.length=0}}},t.Block.prototype.appendInput_=function(e,i){var n=null;return e!=t.INPUT_VALUE&&e!=t.NEXT_STATEMENT||(n=this.makeConnection_(e)),e==t.NEXT_STATEMENT&&this.statementInputCount++,e=new t.Input(e,i,this,n),this.inputList.push(e),e},t.Block.prototype.moveInputBefore=function(t,e){if(t!=e){for(var i,n=-1,o=e?-1:this.inputList.length,r=0;i=this.inputList[r];r++)if(i.name==t){if(n=r,-1!=o)break}else if(e&&i.name==e&&(o=r,-1!=n))break;if(-1==n)throw Error('Named input "'+t+'" not found.');if(-1==o)throw Error('Reference input "'+e+'" not found.');this.moveNumberedInputBefore(n,o)}},t.Block.prototype.moveNumberedInputBefore=function(t,e){if(t==e)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(e>this.inputList.length)throw RangeError("Reference input "+e+" out of bounds.");var i=this.inputList[t];this.inputList.splice(t,1),t<e&&e--,this.inputList.splice(e,0,i)},t.Block.prototype.removeInput=function(e,i){for(var n,o=0;n=this.inputList[o];o++)if(n.name==e)return n.type==t.NEXT_STATEMENT&&this.statementInputCount--,n.dispose(),this.inputList.splice(o,1),!0;if(i)return!1;throw Error("Input not found: "+e)},t.Block.prototype.getInput=function(t){for(var e,i=0;e=this.inputList[i];i++)if(e.name==t)return e;return null},t.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},t.Block.prototype.getCommentText=function(){return this.commentModel.text},t.Block.prototype.setCommentText=function(e){this.commentModel.text!=e&&(t.Events.fire(new t.Events.BlockChange(this,"comment",null,this.commentModel.text,e)),this.comment=this.commentModel.text=e)},t.Block.prototype.setWarningText=function(t,e){},t.Block.prototype.setMutator=function(t){},t.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},t.Block.prototype.moveBy=function(e,i){if(this.parentBlock_)throw Error("Block has parent.");var n=new t.Events.BlockMove(this);this.xy_.translate(e,i),n.recordNew(),t.Events.fire(n)},t.Block.prototype.makeConnection_=function(e){return new t.Connection(this,e)},t.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var e,i=0;e=this.inputList[i];i++)if(e.connection&&(!(e=e.connection.targetBlock())||!e.allInputsFilled(t)))return!1;return!(i=this.getNextBlock())||i.allInputsFilled(t)},t.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},t.blockRendering={},t.blockRendering.IPathObject=function(t,e){},t.utils.aria={},t.utils.aria.ARIA_PREFIX_="aria-",t.utils.aria.ROLE_ATTRIBUTE_="role",t.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},t.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},t.utils.aria.setRole=function(e,i){e.setAttribute(t.utils.aria.ROLE_ATTRIBUTE_,i)},t.utils.aria.setState=function(e,i,n){Array.isArray(n)&&(n=n.join(" ")),e.setAttribute(t.utils.aria.ARIA_PREFIX_+i,n)},t.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},t.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},t.Menu.prototype.render=function(e){var i=document.createElement("div");i.className="blocklyMenu goog-menu blocklyNonSelectable",i.tabIndex=0,this.roleName_&&t.utils.aria.setRole(i,this.roleName_),this.element_=i;for(var n,o=0;n=this.menuItems_[o];o++)i.appendChild(n.createDom());this.mouseOverHandler_=t.bindEventWithChecks_(i,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=t.bindEventWithChecks_(i,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=t.bindEventWithChecks_(i,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=t.bindEventWithChecks_(i,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=t.bindEventWithChecks_(i,"keydown",this,this.handleKeyEvent_),e.appendChild(i)},t.Menu.prototype.getElement=function(){return this.element_},t.Menu.prototype.focus=function(){var e=this.getElement();e&&(e.focus({preventScroll:!0}),t.utils.dom.addClass(e,"blocklyFocused"))},t.Menu.prototype.blur_=function(){var e=this.getElement();e&&(e.blur(),t.utils.dom.removeClass(e,"blocklyFocused"))},t.Menu.prototype.setRole=function(t){this.roleName_=t},t.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(t.unbindEvent_(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(t.unbindEvent_(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(t.unbindEvent_(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(t.unbindEvent_(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(t.unbindEvent_(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var e,i=0;e=this.menuItems_[i];i++)e.dispose();this.element_=null},t.Menu.prototype.getMenuItem_=function(e){for(var i=this.getElement();e&&e!=i;){if(t.utils.dom.hasClass(e,"blocklyMenuItem"))for(var n,o=0;n=this.menuItems_[o];o++)if(n.getElement()==e)return n;e=e.parentElement}return null},t.Menu.prototype.setHighlighted=function(e){var i=this.highlightedItem_;i&&(i.setHighlighted(!1),this.highlightedItem_=null),e&&(e.setHighlighted(!0),this.highlightedItem_=e,i=this.getElement(),t.utils.style.scrollIntoContainerView(e.getElement(),i),t.utils.aria.setState(i,t.utils.aria.State.ACTIVEDESCENDANT,e.getId()))},t.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},t.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},t.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},t.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},t.Menu.prototype.highlightHelper_=function(t,e){t+=e;for(var i;i=this.menuItems_[t];){if(i.isEnabled()){this.setHighlighted(i);break}t+=e}},t.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},t.Menu.prototype.handleClick_=function(e){var i=this.openingCoords;if(this.openingCoords=null,i&&"number"==typeof e.clientX){var n=new t.utils.Coordinate(e.clientX,e.clientY);if(1>t.utils.Coordinate.distance(i,n))return}(e=this.getMenuItem_(e.target))&&e.performAction()},t.Menu.prototype.handleMouseEnter_=function(t){this.focus()},t.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},t.Menu.prototype.handleKeyEvent_=function(e){if(this.menuItems_.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var i=this.highlightedItem_;switch(e.keyCode){case t.utils.KeyCodes.ENTER:case t.utils.KeyCodes.SPACE:i&&i.performAction();break;case t.utils.KeyCodes.UP:this.highlightPrevious();break;case t.utils.KeyCodes.DOWN:this.highlightNext();break;case t.utils.KeyCodes.PAGE_UP:case t.utils.KeyCodes.HOME:this.highlightFirst_();break;case t.utils.KeyCodes.PAGE_DOWN:case t.utils.KeyCodes.END:this.highlightLast_();break;default:return}e.preventDefault(),e.stopPropagation()}},t.Menu.prototype.getSize=function(){var e=this.getElement(),i=t.utils.style.getSize(e);return i.height=e.scrollHeight,i},t.MenuItem=function(t,e){this.content_=t,this.value_=e,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},t.MenuItem.prototype.createDom=function(){var e=document.createElement("div");e.id=t.utils.IdGenerator.getNextUniqueId(),this.element_=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var i=document.createElement("div");if(i.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var n=document.createElement("div");n.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",i.appendChild(n)}return n=this.content_,"string"==typeof this.content_&&(n=document.createTextNode(this.content_)),i.appendChild(n),e.appendChild(i),this.roleName_&&t.utils.aria.setRole(e,this.roleName_),t.utils.aria.setState(e,t.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),t.utils.aria.setState(e,t.utils.aria.State.DISABLED,!this.enabled_),e},t.MenuItem.prototype.dispose=function(){this.element_=null},t.MenuItem.prototype.getElement=function(){return this.element_},t.MenuItem.prototype.getId=function(){return this.element_.id},t.MenuItem.prototype.getValue=function(){return this.value_},t.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},t.MenuItem.prototype.setRole=function(t){this.roleName_=t},t.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},t.MenuItem.prototype.setChecked=function(t){this.checked_=t},t.MenuItem.prototype.setHighlighted=function(e){this.highlight_=e;var i=this.getElement();i&&this.isEnabled()&&(e?(t.utils.dom.addClass(i,"blocklyMenuItemHighlight"),t.utils.dom.addClass(i,"goog-menuitem-highlight")):(t.utils.dom.removeClass(i,"blocklyMenuItemHighlight"),t.utils.dom.removeClass(i,"goog-menuitem-highlight")))},t.MenuItem.prototype.isEnabled=function(){return this.enabled_},t.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},t.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},t.MenuItem.prototype.onAction=function(t,e){this.actionHandler_=t.bind(e)},t.ContextMenu={},t.ContextMenu.currentBlock=null,t.ContextMenu.menu_=null,t.ContextMenu.show=function(e,i,n){if(t.WidgetDiv.show(t.ContextMenu,n,t.ContextMenu.dispose),i.length){var o=t.ContextMenu.populate_(i,n);t.ContextMenu.menu_=o,t.ContextMenu.position_(o,e,n),setTimeout((function(){o.focus()}),1),t.ContextMenu.currentBlock=null}else t.ContextMenu.hide()},t.ContextMenu.populate_=function(e,i){var n=new t.Menu;n.setRole(t.utils.aria.Role.MENU);for(var o,r=0;o=e[r];r++){var s=new t.MenuItem(o.text);s.setRightToLeft(i),s.setRole(t.utils.aria.Role.MENUITEM),n.addChild(s),s.setEnabled(o.enabled),o.enabled&&s.onAction((function(e){t.ContextMenu.hide(),this.callback(this.scope)}),o)}return n},t.ContextMenu.position_=function(e,i,n){var o=t.utils.getViewportBBox();i=new t.utils.Rect(i.clientY+o.top,i.clientY+o.top,i.clientX+o.left,i.clientX+o.left),t.ContextMenu.createWidget_(e);var r=e.getSize();n&&(i.left+=r.width,i.right+=r.width,o.left+=r.width,o.right+=r.width),t.WidgetDiv.positionWithAnchor(o,i,r,n),e.focus()},t.ContextMenu.createWidget_=function(e){e.render(t.WidgetDiv.DIV);var i=e.getElement();t.utils.dom.addClass(i,"blocklyContextMenu"),t.bindEventWithChecks_(i,"contextmenu",null,t.utils.noEvent),e.focus()},t.ContextMenu.hide=function(){t.WidgetDiv.hideIfOwner(t.ContextMenu),t.ContextMenu.currentBlock=null},t.ContextMenu.dispose=function(){t.ContextMenu.menu_&&(t.ContextMenu.menu_.dispose(),t.ContextMenu.menu_=null)},t.ContextMenu.callbackFactory=function(e,i){return function(){t.Events.disable();try{var n=t.Xml.domToBlock(i,e.workspace),o=e.getRelativeToSurfaceXY();o.x=e.RTL?o.x-t.SNAP_RADIUS:o.x+t.SNAP_RADIUS,o.y+=2*t.SNAP_RADIUS,n.moveBy(o.x,o.y)}finally{t.Events.enable()}t.Events.isEnabled()&&!n.isShadow()&&t.Events.fire(new t.Events.BlockCreate(n)),n.select()}},t.ContextMenu.commentDeleteOption=function(e){return{text:t.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){t.Events.setGroup(!0),e.dispose(!0,!0),t.Events.setGroup(!1)}}},t.ContextMenu.commentDuplicateOption=function(e){return{text:t.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){t.duplicate(e)}}},t.ContextMenu.workspaceCommentOption=function(e,i){if(!t.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var n={enabled:!t.utils.userAgent.IE};return n.text=t.Msg.ADD_COMMENT,n.callback=function(){var n=new t.WorkspaceCommentSvg(e,t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,t.WorkspaceCommentSvg.DEFAULT_SIZE,t.WorkspaceCommentSvg.DEFAULT_SIZE),o=e.getInjectionDiv().getBoundingClientRect();o=new t.utils.Coordinate(i.clientX-o.left,i.clientY-o.top);var r=e.getOriginOffsetInPixels();(o=t.utils.Coordinate.difference(o,r)).scale(1/e.scale),n.moveBy(o.x,o.y),e.rendered&&(n.initSvg(),n.render(),n.select())},n},t.ContextMenuItems={},t.ContextMenuItems.registerUndo=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:0})},t.ContextMenuItems.registerRedo=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:0})},t.ContextMenuItems.registerCleanup=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:0})},t.ContextMenuItems.toggleOption_=function(t,e){for(var i=0,n=0;n<e.length;n++)for(var o=e[n];o;)setTimeout(o.setCollapsed.bind(o,t),i),o=o.getNextBlock(),i+=10},t.ContextMenuItems.registerCollapse=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var e=0;e<t.length;e++)for(var i=t[e];i;){if(!i.isCollapsed())return"enabled";i=i.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){t.ContextMenuItems.toggleOption_(!0,e.workspace.getTopBlocks(!0))},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:0})},t.ContextMenuItems.registerExpand=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var e=0;e<t.length;e++)for(var i=t[e];i;){if(i.isCollapsed())return"enabled";i=i.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){t.ContextMenuItems.toggleOption_(!1,e.workspace.getTopBlocks(!0))},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:0})},t.ContextMenuItems.addDeletableBlocks_=function(e,i){if(e.isDeletable())Array.prototype.push.apply(i,e.getDescendants(!1));else{e=e.getChildren(!1);for(var n=0;n<e.length;n++)t.ContextMenuItems.addDeletableBlocks_(e[n],i)}},t.ContextMenuItems.getDeletableBlocks_=function(e){var i=[];e=e.getTopBlocks(!0);for(var n=0;n<e.length;n++)t.ContextMenuItems.addDeletableBlocks_(e[n],i);return i},t.ContextMenuItems.deleteNext_=function(e,i){t.Events.setGroup(i);var n=e.shift();n&&(n.workspace?(n.dispose(!1,!0),setTimeout(t.ContextMenuItems.deleteNext_,10,e,i)):t.ContextMenuItems.deleteNext_(e,i)),t.Events.setGroup(!1)},t.ContextMenuItems.registerDeleteAll=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){if(e.workspace)return 1==(e=t.ContextMenuItems.getDeletableBlocks_(e.workspace).length)?t.Msg.DELETE_BLOCK:t.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(e){if(e.workspace)return 0<t.ContextMenuItems.getDeletableBlocks_(e.workspace).length?"enabled":"disabled"},callback:function(e){if(e.workspace){e.workspace.cancelCurrentGesture();var i=t.ContextMenuItems.getDeletableBlocks_(e.workspace),n=t.utils.genUid();2>i.length?t.ContextMenuItems.deleteNext_(i,n):t.confirm(t.Msg.DELETE_ALL_BLOCKS.replace("%1",i.length),(function(e){e&&t.ContextMenuItems.deleteNext_(i,n)}))}},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:0})},t.ContextMenuItems.registerWorkspaceOptions_=function(){t.ContextMenuItems.registerUndo(),t.ContextMenuItems.registerRedo(),t.ContextMenuItems.registerCleanup(),t.ContextMenuItems.registerCollapse(),t.ContextMenuItems.registerExpand(),t.ContextMenuItems.registerDeleteAll()},t.ContextMenuItems.registerDuplicate=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(e){e.block&&t.duplicate(e.block)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:0})},t.ContextMenuItems.registerComment=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getCommentIcon()?t.Msg.REMOVE_COMMENT:t.Msg.ADD_COMMENT},preconditionFn:function(e){return e=e.block,t.utils.userAgent.IE||e.isInFlyout||!e.workspace.options.comments||e.isCollapsed()||!e.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:0})},t.ContextMenuItems.registerInline=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getInputsInline()?t.Msg.EXTERNAL_INPUTS:t.Msg.INLINE_INPUTS},preconditionFn:function(e){if(!(e=e.block).isInFlyout&&e.isMovable()&&!e.isCollapsed())for(var i=1;i<e.inputList.length;i++)if(e.inputList[i-1].type!=t.NEXT_STATEMENT&&e.inputList[i].type!=t.NEXT_STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:0})},t.ContextMenuItems.registerCollapseExpandBlock=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isCollapsed()?t.Msg.EXPAND_BLOCK:t.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:0})},t.ContextMenuItems.registerDisable=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isEnabled()?t.Msg.DISABLE_BLOCK:t.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(e){e=e.block;var i=t.Events.getGroup();i||t.Events.setGroup(!0),e.setEnabled(!e.isEnabled()),i||t.Events.setGroup(!1)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:0})},t.ContextMenuItems.registerDelete=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){var i=e.block;return e=i.getDescendants(!1).length,(i=i.getNextBlock())&&(e-=i.getDescendants(!1).length),1==e?t.Msg.DELETE_BLOCK:t.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(e){t.Events.setGroup(!0),e.block.dispose(!0,!0),t.Events.setGroup(!1)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:0})},t.ContextMenuItems.registerHelp=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:0})},t.ContextMenuItems.registerBlockOptions_=function(){t.ContextMenuItems.registerDuplicate(),t.ContextMenuItems.registerComment(),t.ContextMenuItems.registerInline(),t.ContextMenuItems.registerCollapseExpandBlock(),t.ContextMenuItems.registerDisable(),t.ContextMenuItems.registerDelete(),t.ContextMenuItems.registerHelp()},t.ContextMenuItems.registerDefaultOptions=function(){t.ContextMenuItems.registerWorkspaceOptions_(),t.ContextMenuItems.registerBlockOptions_()},t.ContextMenuRegistry=function(){t.ContextMenuRegistry.registry=this,this.registry_={},t.ContextMenuItems.registerDefaultOptions()},t.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},t.ContextMenuRegistry.registry=null,t.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with id "'+t.id+'" is already registered.');this.registry_[t.id]=t},t.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with id "'+t+'" not found.');delete this.registry_[t]},t.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]?this.registry_[t]:null},t.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,e){var i=[],n=this.registry_;return Object.keys(n).forEach((function(o){if(o=n[o],t==o.scopeType){var r=o.preconditionFn(e);"hidden"!=r&&(o={text:"function"==typeof o.displayText?o.displayText(e):o.displayText,enabled:"enabled"==r,callback:o.callback,scope:e,weight:o.weight},i.push(o))}})),i.sort((function(t,e){return t.weight-e.weight})),i},new t.ContextMenuRegistry,t.RenderedConnection=function(e,i){t.RenderedConnection.superClass_.constructor.call(this,e,i),this.db_=e.workspace.connectionDBList[i],this.dbOpposite_=e.workspace.connectionDBList[t.OPPOSITE_TYPE[i]],this.offsetInBlock_=new t.utils.Coordinate(0,0),this.trackedState_=t.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},t.utils.object.inherits(t.RenderedConnection,t.Connection),t.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},t.RenderedConnection.prototype.dispose=function(){t.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},t.RenderedConnection.prototype.getSourceBlock=function(){return t.RenderedConnection.superClass_.getSourceBlock.call(this)},t.RenderedConnection.prototype.targetBlock=function(){return t.RenderedConnection.superClass_.targetBlock.call(this)},t.RenderedConnection.prototype.distanceFrom=function(t){var e=this.x-t.x;return t=this.y-t.y,Math.sqrt(e*e+t*t)},t.RenderedConnection.prototype.bumpAwayFrom=function(e){if(!this.sourceBlock_.workspace.isDragging()){var i=this.sourceBlock_.getRootBlock();if(!i.isInFlyout){var n=!1;if(!i.isMovable()){if(!(i=e.getSourceBlock().getRootBlock()).isMovable())return;e=this,n=!0}var o=t.selected==i;o||i.addSelect();var r=e.x+t.SNAP_RADIUS+Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.x,s=e.y+t.SNAP_RADIUS+Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.y;n&&(s=-s),i.RTL&&(r=e.x-t.SNAP_RADIUS-Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.x),i.moveBy(r,s),o||i.removeSelect()}}},t.RenderedConnection.prototype.moveTo=function(e,i){this.trackedState_==t.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,i),this.trackedState_=t.RenderedConnection.TrackedState.TRACKED):this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,i)),this.x=e,this.y=i},t.RenderedConnection.prototype.moveBy=function(t,e){this.moveTo(this.x+t,this.y+e)},t.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},t.RenderedConnection.prototype.setOffsetInBlock=function(t,e){this.offsetInBlock_.x=t,this.offsetInBlock_.y=e},t.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},t.RenderedConnection.prototype.tighten=function(){var e=this.targetConnection.x-this.x,i=this.targetConnection.y-this.y;if(0!=e||0!=i){var n=this.targetBlock(),o=n.getSvgRoot();if(!o)throw Error("block is not rendered.");o=t.utils.getRelativeXY(o),n.getSvgRoot().setAttribute("transform","translate("+(o.x-e)+","+(o.y-i)+")"),n.moveConnections(-e,-i)}},t.RenderedConnection.prototype.closest=function(t,e){return this.dbOpposite_.searchForClosest(this,t,e)},t.RenderedConnection.prototype.highlight=function(){var e=this.sourceBlock_.workspace.getRenderer().getConstants(),i=e.shapeFor(this);this.type==t.INPUT_VALUE||this.type==t.OUTPUT_VALUE?(e=e.TAB_OFFSET_FROM_TOP,i=t.utils.svgPaths.moveBy(0,-e)+t.utils.svgPaths.lineOnAxis("v",e)+i.pathDown+t.utils.svgPaths.lineOnAxis("v",e)):(e=e.NOTCH_OFFSET_LEFT-e.CORNER_RADIUS,i=t.utils.svgPaths.moveBy(-e,0)+t.utils.svgPaths.lineOnAxis("h",e)+i.pathLeft+t.utils.svgPaths.lineOnAxis("h",e)),e=this.sourceBlock_.getRelativeToSurfaceXY(),t.Connection.highlightedPath_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:i,transform:"translate("+(this.x-e.x)+","+(this.y-e.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},t.RenderedConnection.prototype.unhighlight=function(){t.utils.dom.removeNode(t.Connection.highlightedPath_),delete t.Connection.highlightedPath_},t.RenderedConnection.prototype.setTracking=function(e){e&&this.trackedState_==t.RenderedConnection.TrackedState.TRACKED||!e&&this.trackedState_==t.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db_.addConnection(this,this.y),this.trackedState_=t.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=t.RenderedConnection.TrackedState.UNTRACKED))},t.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),e=0;e<t.length;e++){for(var i=t[e],n=i.getConnections_(!0),o=0;o<n.length;o++)n[o].setTracking(!1);for(i=i.getIcons(),o=0;o<i.length;o++)i[o].setVisible(!1)}},t.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var e=[];if(this.type!=t.INPUT_VALUE&&this.type!=t.NEXT_STATEMENT)return e;var i=this.targetBlock();if(i){if(i.isCollapsed()){var n=[];i.outputConnection&&n.push(i.outputConnection),i.nextConnection&&n.push(i.nextConnection),i.previousConnection&&n.push(i.previousConnection)}else n=i.getConnections_(!0);for(var o=0;o<n.length;o++)e.push.apply(e,n[o].startTrackingAll());e.length||(e[0]=i)}return e},t.RenderedConnection.prototype.isConnectionAllowed=function(e,i){return t.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(e)>i)&&t.RenderedConnection.superClass_.isConnectionAllowed.call(this,e)},t.RenderedConnection.prototype.onFailedConnect=function(t){this.bumpAwayFrom(t)},t.RenderedConnection.prototype.disconnectInternal_=function(e,i){t.RenderedConnection.superClass_.disconnectInternal_.call(this,e,i),e.rendered&&e.render(),i.rendered&&(i.updateDisabled(),i.render(),i.getSvgRoot().style.display="block")},t.RenderedConnection.prototype.respawnShadow_=function(){t.RenderedConnection.superClass_.respawnShadow_.call(this);var e=this.targetBlock();e&&(e.initSvg(),e.render(!1),(e=this.getSourceBlock()).rendered&&e.render())},t.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},t.RenderedConnection.prototype.connect_=function(e){t.RenderedConnection.superClass_.connect_.call(this,e);var i=this.getSourceBlock();e=e.getSourceBlock();var n=i.rendered,o=e.rendered;n&&i.updateDisabled(),o&&e.updateDisabled(),n&&o&&(this.type==t.NEXT_STATEMENT||this.type==t.PREVIOUS_STATEMENT?e.render():i.render()),(i=i.getInputWithBlock(e))&&(i=i.isVisible(),e.getSvgRoot().style.display=i?"block":"none")},t.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},t.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},t.Marker.prototype.setDrawer=function(t){this.drawer_=t},t.Marker.prototype.getDrawer=function(){return this.drawer_},t.Marker.prototype.getCurNode=function(){return this.curNode_},t.Marker.prototype.setCurNode=function(t){var e=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(e,this.curNode_)},t.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},t.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},t.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},t.Cursor=function(){t.Cursor.superClass_.constructor.call(this),this.type="cursor"},t.utils.object.inherits(t.Cursor,t.Marker),t.Cursor.prototype.next=function(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()==t.ASTNode.types.NEXT||e.getType()==t.ASTNode.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e},t.Cursor.prototype.in=function(){var e=this.getCurNode();return e?(e.getType()!=t.ASTNode.types.PREVIOUS&&e.getType()!=t.ASTNode.types.OUTPUT||(e=e.next()),(e=e.in())&&this.setCurNode(e),e):null},t.Cursor.prototype.prev=function(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()==t.ASTNode.types.NEXT||e.getType()==t.ASTNode.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e},t.Cursor.prototype.out=function(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()==t.ASTNode.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null},t.Cursor.prototype.onBlocklyAction=function(e){if(this.getCurNode()&&this.getCurNode().getType()===t.ASTNode.types.FIELD&&this.getCurNode().getLocation().onBlocklyAction(e))return!0;switch(e.name){case t.navigation.actionNames.PREVIOUS:return this.prev(),!0;case t.navigation.actionNames.OUT:return this.out(),!0;case t.navigation.actionNames.NEXT:return this.next(),!0;case t.navigation.actionNames.IN:return this.in(),!0;default:return!1}},t.BasicCursor=function(){t.BasicCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.BasicCursor,t.Cursor),t.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},t.BasicCursor.prototype.in=function(){return this.next()},t.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},t.BasicCursor.prototype.out=function(){return this.prev()},t.BasicCursor.prototype.getNextNode_=function(t,e){if(!t)return null;var i=t.in()||t.next();return e(i)?i:i?this.getNextNode_(i,e):e(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,e):null},t.BasicCursor.prototype.getPreviousNode_=function(t,e){if(!t)return null;var i=t.prev();return e(i=i?this.getRightMostChild_(i):t.out())?i:i?this.getPreviousNode_(i,e):null},t.BasicCursor.prototype.validNode_=function(e){var i=!1;return(e=e&&e.getType())!=t.ASTNode.types.OUTPUT&&e!=t.ASTNode.types.INPUT&&e!=t.ASTNode.types.FIELD&&e!=t.ASTNode.types.NEXT&&e!=t.ASTNode.types.PREVIOUS&&e!=t.ASTNode.types.WORKSPACE||(i=!0),i},t.BasicCursor.prototype.findSiblingOrParent_=function(t){if(!t)return null;var e=t.next();return e||this.findSiblingOrParent_(t.out())},t.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},t.TabNavigateCursor=function(){t.TabNavigateCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.TabNavigateCursor,t.BasicCursor),t.TabNavigateCursor.prototype.validNode_=function(e){var i=!1,n=e&&e.getType();return e&&(e=e.getLocation(),n==t.ASTNode.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(i=!0)),i},t.BlockSvg=function(e,i,n){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=e,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=t.utils.is3dSupported()&&!!e.getBlockDragSurface();var o=this.pathObject.svgPath;o.tooltip=this,t.Tooltip.bindMouseEvents(o),t.BlockSvg.superClass_.constructor.call(this,e,i,n),this.svgGroup_.dataset&&(this.svgGroup_.dataset.id=this.id)},t.utils.object.inherits(t.BlockSvg,t.Block),t.BlockSvg.prototype.height=0,t.BlockSvg.prototype.width=0,t.BlockSvg.prototype.warningTextDb_=null,t.BlockSvg.INLINE=-1,t.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",t.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var e,i=0;e=this.inputList[i];i++)e.init();for(e=this.getIcons(),i=0;i<e.length;i++)e[i].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),i=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!i||t.bindEventWithChecks_(i,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,i.parentNode||this.workspace.getCanvas().appendChild(i)},t.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},t.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},t.BlockSvg.prototype.getColourShadow=function(){return t.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},t.BlockSvg.prototype.getColourBorder=function(){return t.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},t.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(t.selected!=this){var e=null;if(t.selected){e=t.selected.id,t.Events.disable();try{t.selected.unselect()}finally{t.Events.enable()}}(e=new t.Events.Ui(null,"selected",e,this.id)).workspaceId=this.workspace.id,t.Events.fire(e),t.selected=this,this.addSelect()}},t.BlockSvg.prototype.unselect=function(){if(t.selected==this){var e=new t.Events.Ui(null,"selected",this.id,null);e.workspaceId=this.workspace.id,t.Events.fire(e),t.selected=null,this.removeSelect()}},t.BlockSvg.prototype.mutator=null,t.BlockSvg.prototype.comment=null,t.BlockSvg.prototype.commentIcon_=null,t.BlockSvg.prototype.warning=null,t.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},t.BlockSvg.prototype.setParent=function(e){var i=this.parentBlock_;if(e!=i){t.utils.dom.startTextWidthCache(),t.BlockSvg.superClass_.setParent.call(this,e),t.utils.dom.stopTextWidthCache();var n=this.getSvgRoot();if(!this.workspace.isClearing&&n){var o=this.getRelativeToSurfaceXY();e?(e.getSvgRoot().appendChild(n),e=this.getRelativeToSurfaceXY(),this.moveConnections(e.x-o.x,e.y-o.y)):i&&(this.workspace.getCanvas().appendChild(n),this.translate(o.x,o.y)),this.applyColour()}}},t.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var e=0,i=0,n=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,o=this.getSvgRoot();if(o)do{var r=t.utils.getRelativeXY(o);e+=r.x,i+=r.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==o&&(e+=(r=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,i+=r.y),o=o.parentNode}while(o&&o!=this.workspace.getCanvas()&&o!=n);return new t.utils.Coordinate(e,i)},t.BlockSvg.prototype.moveBy=function(e,i){if(this.parentBlock_)throw Error("Block has parent.");var n=t.Events.isEnabled();if(n)var o=new t.Events.BlockMove(this);var r=this.getRelativeToSurfaceXY();this.translate(r.x+e,r.y+i),this.moveConnections(e,i),n&&(o.recordNew(),t.Events.fire(o)),this.workspace.resizeContents()},t.BlockSvg.prototype.translate=function(t,e){this.getSvgRoot().setAttribute("transform","translate("+t+","+e+")")},t.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},t.BlockSvg.prototype.moveTo=function(t){var e=this.getRelativeToSurfaceXY();this.moveBy(t.x-e.x,t.y-e.y)},t.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},t.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},t.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},t.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var e=t.getSpacing(),i=e/2,n=this.getRelativeToSurfaceXY();t=Math.round((n.x-i)/e)*e+i-n.x,e=Math.round((n.y-i)/e)*e+i-n.y,t=Math.round(t),e=Math.round(e),0==t&&0==e||this.moveBy(t,e)}}},t.BlockSvg.prototype.getBoundingRectangle=function(){var e=this.getRelativeToSurfaceXY(),i=this.getHeightWidth();if(this.RTL)var n=e.x-i.width,o=e.x;else n=e.x,o=e.x+i.width;return new t.utils.Rect(e.y,e.y+i.height,n,o)},t.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var t,e=0;t=this.inputList[e];e++)t.markDirty()},t.BlockSvg.prototype.setCollapsed=function(e){this.collapsed_!=e&&(t.BlockSvg.superClass_.setCollapsed.call(this,e),e?this.rendered&&this.render():this.updateCollapsed_())},t.BlockSvg.prototype.updateCollapsed_=function(){for(var e,i=this.isCollapsed(),n=t.Block.COLLAPSED_INPUT_NAME,o=t.Block.COLLAPSED_FIELD_NAME,r=0;e=this.inputList[r];r++)e.name!=n&&e.setVisible(!i);if(i){for(e=this.getIcons(),r=0;i=e[r];r++)i.setVisible(!1);r=this.toString(t.COLLAPSE_CHARS),(e=this.getField(o))?e.setValue(r):(e=this.getInput(n)||this.appendDummyInput(n)).appendField(new t.FieldLabel(r),o)}else this.removeInput(n)},t.BlockSvg.prototype.tab=function(e,i){var n=new t.TabNavigateCursor;n.setCurNode(t.ASTNode.createFieldNode(e)),e=n.getCurNode(),n.onBlocklyAction(i?t.navigation.ACTION_NEXT:t.navigation.ACTION_PREVIOUS),(i=n.getCurNode())&&i!==e&&(i.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(i))},t.BlockSvg.prototype.onMouseDown_=function(t){var e=this.workspace&&this.workspace.getGesture(t);e&&e.handleBlockStart(t,this)},t.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},t.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var e=t.ContextMenuRegistry.registry.getContextMenuOptions(t.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e},t.BlockSvg.prototype.showContextMenu=function(e){var i=this.generateContextMenu();i&&i.length&&(t.ContextMenu.show(e,i,this.RTL),t.ContextMenu.currentBlock=this)},t.BlockSvg.prototype.moveConnections=function(t,e){if(this.rendered){for(var i=this.getConnections_(!1),n=0;n<i.length;n++)i[n].moveBy(t,e);for(i=this.getIcons(),n=0;n<i.length;n++)i[n].computeIconLocation();for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].moveConnections(t,e)}},t.BlockSvg.prototype.setDragging=function(e){if(e){var i=this.getSvgRoot();i.translate_="",i.skew_="",t.draggingConnections=t.draggingConnections.concat(this.getConnections_(!0)),t.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else t.draggingConnections=[],t.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(i=0;i<this.childBlocks_.length;i++)this.childBlocks_[i].setDragging(e)},t.BlockSvg.prototype.setMovable=function(e){t.BlockSvg.superClass_.setMovable.call(this,e),this.pathObject.updateMovable(e)},t.BlockSvg.prototype.setEditable=function(e){t.BlockSvg.superClass_.setEditable.call(this,e),e=this.getIcons();for(var i=0;i<e.length;i++)e[i].updateEditable()},t.BlockSvg.prototype.setShadow=function(e){t.BlockSvg.superClass_.setShadow.call(this,e),this.applyColour()},t.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},t.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},t.BlockSvg.prototype.dispose=function(e,i){if(this.workspace){t.Tooltip.dispose(),t.Tooltip.unbindMouseEvents(this.pathObject.svgPath),t.utils.dom.startTextWidthCache();var n=this.workspace;if(t.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),t.ContextMenu.currentBlock==this&&t.ContextMenu.hide(),this.workspace.keyboardAccessibilityMode&&t.navigation.moveCursorOnBlockDelete(this),i&&this.rendered&&(this.unplug(e),t.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var o in this.warningTextDb_)clearTimeout(this.warningTextDb_[o]);this.warningTextDb_=null}for(i=this.getIcons(),o=0;o<i.length;o++)i[o].dispose();t.BlockSvg.superClass_.dispose.call(this,!!e),t.utils.dom.removeNode(this.svgGroup_),n.resizeContents(),this.svgGroup_=null,t.utils.dom.stopTextWidthCache()}},t.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var e=t.Xml.blockToDom(this,!0);t.Xml.deleteNext(e);var i=this.getRelativeToSurfaceXY();return e.setAttribute("x",this.RTL?-i.x:i.x),e.setAttribute("y",i.y),{xml:e,source:this.workspace,typeCounts:t.utils.getBlockTypeCounts(this,!0)}},t.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),e=0;e<t.length;e++)t[e].applyColour();for(t=0;e=this.inputList[t];t++)for(var i,n=0;i=e.fieldRow[n];n++)i.applyColour()},t.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var e,i=0;e=t[i];i++)e.rendered&&e.updateDisabled()},t.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},t.BlockSvg.prototype.setCommentText=function(e){if(!t.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=e&&(t.BlockSvg.superClass_.setCommentText.call(this,e),e=null!=e,!!this.commentIcon_==e?this.commentIcon_.updateText():(e?this.comment=this.commentIcon_=new t.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},t.BlockSvg.prototype.setWarningText=function(e,i){if(!t.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var n=i||"";if(n)this.warningTextDb_[n]&&(clearTimeout(this.warningTextDb_[n]),delete this.warningTextDb_[n]);else for(var o in this.warningTextDb_)clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o];if(this.workspace.isDragging()){var r=this;this.warningTextDb_[n]=setTimeout((function(){r.workspace&&(delete r.warningTextDb_[n],r.setWarningText(e,n))}),100)}else{if(this.isInFlyout&&(e=null),i=!1,"string"==typeof e){o=this.getSurroundParent();for(var s=null;o;)o.isCollapsed()&&(s=o),o=o.getSurroundParent();s&&s.setWarningText(t.Msg.COLLAPSED_WARNINGS_WARNING,t.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new t.Warning(this),i=!0),this.warning.setText(e,n)}else this.warning&&!n?(this.warning.dispose(),i=!0):this.warning&&(i=this.warning.getText(),this.warning.setText("",n),(o=this.warning.getText())||this.warning.dispose(),i=i!=o);i&&this.rendered&&(this.render(),this.bumpNeighbours())}},t.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setDisabled=function(e){t.utils.deprecation.warn("BlockSvg.prototype.setDisabled","May 2019","May 2020","BlockSvg.prototype.setEnabled"),this.setEnabled(!e)},t.BlockSvg.prototype.setEnabled=function(e){this.isEnabled()!=e&&(t.BlockSvg.superClass_.setEnabled.call(this,e),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},t.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},t.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},t.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},t.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},t.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},t.BlockSvg.prototype.setColour=function(e){t.BlockSvg.superClass_.setColour.call(this,e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()},t.BlockSvg.prototype.setStyle=function(t){var e=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!e)throw Error("Invalid style name: "+t);this.hat=e.hat,this.pathObject.setStyle(e),this.colour_=e.colourPrimary,this.style=e,this.applyColour()},t.BlockSvg.prototype.bringToFront=function(){var t=this;do{var e=t.getSvgRoot(),i=e.parentNode,n=i.childNodes;n[n.length-1]!==e&&i.appendChild(e),t=t.getParent()}while(t)},t.BlockSvg.prototype.setPreviousStatement=function(e,i){t.BlockSvg.superClass_.setPreviousStatement.call(this,e,i),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setNextStatement=function(e,i){t.BlockSvg.superClass_.setNextStatement.call(this,e,i),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setOutput=function(e,i){t.BlockSvg.superClass_.setOutput.call(this,e,i),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setInputsInline=function(e){t.BlockSvg.superClass_.setInputsInline.call(this,e),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.removeInput=function(e,i){return e=t.BlockSvg.superClass_.removeInput.call(this,e,i),this.rendered&&(this.render(),this.bumpNeighbours()),e},t.BlockSvg.prototype.moveNumberedInputBefore=function(e,i){t.BlockSvg.superClass_.moveNumberedInputBefore.call(this,e,i),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.appendInput_=function(e,i){return e=t.BlockSvg.superClass_.appendInput_.call(this,e,i),this.rendered&&(this.render(),this.bumpNeighbours()),e},t.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var e=this.nextConnection.targetBlock();e&&e.setConnectionTracking(t)}if(!this.collapsed_)for(e=0;e<this.inputList.length;e++){var i=this.inputList[e].connection;i&&(i.setTracking(t),(i=i.targetBlock())&&i.setConnectionTracking(t))}},t.BlockSvg.prototype.getConnections_=function(t){var e=[];if((t||this.rendered)&&(this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var i;i=this.inputList[t];t++)i.connection&&e.push(i.connection)}return e},t.BlockSvg.prototype.lastConnectionInStack=function(){return t.BlockSvg.superClass_.lastConnectionInStack.call(this)},t.BlockSvg.prototype.getMatchingConnection=function(e,i){return t.BlockSvg.superClass_.getMatchingConnection.call(this,e,i)},t.BlockSvg.prototype.makeConnection_=function(e){return new t.RenderedConnection(this,e)},t.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var e=this.getRootBlock();if(!e.isInFlyout)for(var i,n=this.getConnections_(!1),o=0;i=n[o];o++){i.isConnected()&&i.isSuperior()&&i.targetBlock().bumpNeighbours();for(var r,s=i.neighbours(t.SNAP_RADIUS),a=0;r=s[a];a++)i.isConnected()&&r.isConnected()||r.getSourceBlock().getRootBlock()!=e&&(i.isSuperior()?r.bumpAwayFrom(i):i.bumpAwayFrom(r))}}},t.BlockSvg.prototype.scheduleSnapAndBump=function(){var e=this,i=t.Events.getGroup();setTimeout((function(){t.Events.setGroup(i),e.snapToGrid(),t.Events.setGroup(!1)}),t.BUMP_DELAY/2),setTimeout((function(){t.Events.setGroup(i),e.bumpNeighbours(),t.Events.setGroup(!1)}),t.BUMP_DELAY)},t.BlockSvg.prototype.positionNearConnection=function(e,i){e.type!=t.NEXT_STATEMENT&&e.type!=t.INPUT_VALUE||this.moveBy(i.x-e.x,i.y-e.y)},t.BlockSvg.prototype.getParent=function(){return t.BlockSvg.superClass_.getParent.call(this)},t.BlockSvg.prototype.getRootBlock=function(){return t.BlockSvg.superClass_.getRootBlock.call(this)},t.BlockSvg.prototype.render=function(e){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,t.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==e){var i=this.getParent();i?i.render(!0):this.workspace.resizeContents()}t.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},t.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(t.navigation.MARKER_NAME).draw()},t.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var e=0;e<this.inputList.length;e++){var i=this.inputList[e].connection;i&&(i.moveToOffset(t),i.isConnected()&&i.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},t.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},t.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},t.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,e=this.width,i=this.getNextBlock();if(i){i=i.getHeightWidth();var n=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=i.height-n,e=Math.max(e,i.width)}return{height:t,width:e}},t.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},t.BlockSvg.prototype.highlightShapeForInput=function(t,e){this.pathObject.updateShapeForInputHighlight(t,e)},t.blockRendering.useDebugger=!1,t.blockRendering.register=function(e,i){t.registry.register(t.registry.Type.RENDERER,e,i)},t.blockRendering.unregister=function(e){t.registry.unregister(t.registry.Type.RENDERER,e)},t.blockRendering.startDebugger=function(){t.blockRendering.useDebugger=!0},t.blockRendering.stopDebugger=function(){t.blockRendering.useDebugger=!1},t.blockRendering.init=function(e,i,n){return(e=new(t.registry.getClass(t.registry.Type.RENDERER,e))(e)).init(i,n),e},t.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},t.ConnectionDB.prototype.addConnection=function(t,e){e=this.calculateIndexForYPos_(e),this.connections_.splice(e,0,t)},t.ConnectionDB.prototype.findIndexOfConnection_=function(t,e){if(!this.connections_.length)return-1;var i=this.calculateIndexForYPos_(e);if(i>=this.connections_.length)return-1;e=t.y;for(var n=i;0<=n&&this.connections_[n].y==e;){if(this.connections_[n]==t)return n;n--}for(;i<this.connections_.length&&this.connections_[i].y==e;){if(this.connections_[i]==t)return i;i++}return-1},t.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var e=0,i=this.connections_.length;e<i;){var n=Math.floor((e+i)/2);if(this.connections_[n].y<t)e=n+1;else{if(!(this.connections_[n].y>t)){e=n;break}i=n}}return e},t.ConnectionDB.prototype.removeConnection=function(t,e){if(-1==(t=this.findIndexOfConnection_(t,e)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},t.ConnectionDB.prototype.getNeighbours=function(t,e){function i(t){var i=o-n[t].x,s=r-n[t].y;return Math.sqrt(i*i+s*s)<=e&&l.push(n[t]),s<e}var n=this.connections_,o=t.x,r=t.y;t=0;for(var s=n.length-2,a=s;t<a;)n[a].y<r?t=a:s=a,a=Math.floor((t+s)/2);var l=[];if(s=t=a,n.length){for(;0<=t&&i(t);)t--;do{s++}while(s<n.length&&i(s))}return l},t.ConnectionDB.prototype.isInYRange_=function(t,e,i){return Math.abs(this.connections_[t].y-e)<=i},t.ConnectionDB.prototype.searchForClosest=function(t,e,i){if(!this.connections_.length)return{connection:null,radius:e};var n=t.y,o=t.x;t.x=o+i.x,t.y=n+i.y;var r=this.calculateIndexForYPos_(t.y);i=null;for(var s,a=e,l=r-1;0<=l&&this.isInYRange_(l,t.y,e);)s=this.connections_[l],this.connectionChecker_.canConnect(t,s,!0,a)&&(i=s,a=s.distanceFrom(t)),l--;for(;r<this.connections_.length&&this.isInYRange_(r,t.y,e);)s=this.connections_[r],this.connectionChecker_.canConnect(t,s,!0,a)&&(i=s,a=s.distanceFrom(t)),r++;return t.x=o,t.y=n,{connection:i,radius:a}},t.ConnectionDB.init=function(e){var i=[];return i[t.INPUT_VALUE]=new t.ConnectionDB(e),i[t.OUTPUT_VALUE]=new t.ConnectionDB(e),i[t.NEXT_STATEMENT]=new t.ConnectionDB(e),i[t.PREVIOUS_STATEMENT]=new t.ConnectionDB(e),i},t.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_={},this.workspace_=t},t.MarkerManager.prototype.registerMarker=function(t,e){this.markers_[t]&&this.unregisterMarker(t),e.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,e)),this.setMarkerSvg(e.getDrawer().createDom()),this.markers_[t]=e},t.MarkerManager.prototype.unregisterMarker=function(t){var e=this.markers_[t];if(!e)throw Error("Marker with id "+t+" does not exist. Can only unregistermarkers that exist.");e.dispose(),delete this.markers_[t]},t.MarkerManager.prototype.getCursor=function(){return this.cursor_},t.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]},t.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},t.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},t.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},t.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},t.MarkerManager.prototype.dispose=function(){for(var t,e=Object.keys(this.markers_),i=0;t=e[i];i++)this.unregisterMarker(t);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},t.ThemeManager=function(t,e){this.workspace_=t,this.theme_=e,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},t.ThemeManager.prototype.getTheme=function(){return this.theme_},t.ThemeManager.prototype.setTheme=function(e){var i,n=this.theme_;for(this.theme_=e,(e=this.workspace_.getInjectionDiv())&&(n&&t.utils.dom.removeClass(e,n.getClassName()),t.utils.dom.addClass(e,this.theme_.getClassName())),n=0;e=this.subscribedWorkspaces_[n];n++)e.refreshTheme();for(n=0,e=Object.keys(this.componentDB_);i=e[n];n++)for(var o,r=0;o=this.componentDB_[i][r];r++){var s=o.element;o=o.propertyName;var a=this.theme_&&this.theme_.getComponentStyle(i);s.style[o]=a||""}t.hideChaff()},t.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},t.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},t.ThemeManager.prototype.subscribe=function(t,e,i){this.componentDB_[e]||(this.componentDB_[e]=[]),this.componentDB_[e].push({element:t,propertyName:i}),e=this.theme_&&this.theme_.getComponentStyle(e),t.style[i]=e||""},t.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var e,i=Object.keys(this.componentDB_),n=0;e=i[n];n++){for(var o=this.componentDB_[e],r=o.length-1;0<=r;r--)o[r].element===t&&o.splice(r,1);this.componentDB_[e].length||delete this.componentDB_[e]}},t.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},t.TouchGesture=function(e,i){t.TouchGesture.superClass_.constructor.call(this,e,i),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},t.utils.object.inherits(t.TouchGesture,t.Gesture),t.TouchGesture.ZOOM_IN_MULTIPLIER=5,t.TouchGesture.ZOOM_OUT_MULTIPLIER=6,t.TouchGesture.prototype.doStart=function(e){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,t.TouchGesture.superClass_.doStart.call(this,e),!this.isEnding_&&t.Touch.isTouchEvent(e)&&this.handleTouchStart(e)},t.TouchGesture.prototype.bindMouseEvents=function(e){this.onStartWrapper_=t.bindEventWithChecks_(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=t.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=t.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this),!0),e.preventDefault(),e.stopPropagation()},t.TouchGesture.prototype.handleStart=function(e){!this.isDragging()&&t.Touch.isTouchEvent(e)&&(this.handleTouchStart(e),this.isMultiTouch()&&t.longStop_())},t.TouchGesture.prototype.handleMove=function(e){this.isDragging()?t.Touch.shouldHandleEvent(e)&&t.TouchGesture.superClass_.handleMove.call(this,e):this.isMultiTouch()?(t.Touch.isTouchEvent(e)&&this.handleTouchMove(e),t.longStop_()):t.TouchGesture.superClass_.handleMove.call(this,e)},t.TouchGesture.prototype.handleUp=function(e){t.Touch.isTouchEvent(e)&&!this.isDragging()&&this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()?t.Touch.shouldHandleEvent(e)&&t.TouchGesture.superClass_.handleUp.call(this,e):(e.preventDefault(),e.stopPropagation(),this.dispose())},t.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},t.TouchGesture.prototype.dispose=function(){t.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&t.unbindEvent_(this.onStartWrapper_)},t.TouchGesture.prototype.handleTouchStart=function(e){var i=t.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[i]=this.getTouchPoint(e),2==(i=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=t.utils.Coordinate.distance(this.cachedPoints_[i[0]],this.cachedPoints_[i[1]]),this.isMultiTouch_=!0,e.preventDefault())},t.TouchGesture.prototype.handleTouchMove=function(e){var i=t.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[i]=this.getTouchPoint(e),i=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===i.length?this.handlePinch_(e):t.TouchGesture.superClass_.handleMove.call(this,e)},t.TouchGesture.prototype.handlePinch_=function(e){var i=Object.keys(this.cachedPoints_);if(i=t.utils.Coordinate.distance(this.cachedPoints_[i[0]],this.cachedPoints_[i[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var n=i-this.previousScale_;n=0<n?n*t.TouchGesture.ZOOM_IN_MULTIPLIER:n*t.TouchGesture.ZOOM_OUT_MULTIPLIER;var o=this.startWorkspace_,r=t.utils.mouseToSvg(e,o.getParentSvg(),o.getInverseScreenCTM());o.zoom(r.x,r.y,n)}this.previousScale_=i,e.preventDefault()},t.TouchGesture.prototype.handleTouchEnd=function(e){e=t.Touch.getTouchIdentifierFromEvent(e),this.cachedPoints_[e]&&delete this.cachedPoints_[e],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},t.TouchGesture.prototype.getTouchPoint=function(e){return this.startWorkspace_?new t.utils.Coordinate(e.pageX?e.pageX:e.changedTouches[0].pageX,e.pageY?e.pageY:e.changedTouches[0].pageY):null},t.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},t.WorkspaceAudio.prototype.lastSound_=null,t.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},t.WorkspaceAudio.prototype.load=function(e,i){if(e.length){try{var n=new t.utils.global.Audio}catch(t){return}for(var o,r=0;r<e.length;r++){var s=e[r],a=s.match(/\.(\w+)$/);if(a&&n.canPlayType("audio/"+a[1])){o=new t.utils.global.Audio(s);break}}o&&o.play&&(this.SOUNDS_[i]=o)}},t.WorkspaceAudio.prototype.preload=function(){for(var e in this.SOUNDS_){var i=this.SOUNDS_[e];i.volume=.01;var n=i.play();if(void 0!==n?n.then(i.pause).catch((function(){})):i.pause(),t.utils.userAgent.IPAD||t.utils.userAgent.IPHONE)break}},t.WorkspaceAudio.prototype.play=function(e,i){var n=this.SOUNDS_[e];n?(e=new Date,null!=this.lastSound_&&e-this.lastSound_<t.SOUND_LIMIT||(this.lastSound_=e,(n=t.utils.userAgent.IPAD||t.utils.userAgent.ANDROID?n:n.cloneNode()).volume=void 0===i?1:i,n.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(e,i)},t.WorkspaceSvg=function(e,i,n){t.WorkspaceSvg.superClass_.constructor.call(this,e),this.getMetrics=e.getMetrics||t.WorkspaceSvg.getTopLevelWorkspaceMetrics_,this.setMetrics=e.setMetrics||t.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.connectionDBList=t.ConnectionDB.init(this.connectionChecker),i&&(this.blockDragSurface_=i),n&&(this.workspaceDragSurface_=n),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&t.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new t.WorkspaceAudio(e.parentWorkspace),this.grid_=this.options.gridPattern?new t.Grid(this.options.gridPattern,e.gridOptions):null,this.markerManager_=new t.MarkerManager(this),this.toolboxCategoryCallbacks_={},this.flyoutButtonCallbacks_={},t.Variables&&t.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(t.VARIABLE_CATEGORY_NAME,t.Variables.flyoutCategory),t.VariablesDynamic&&t.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(t.VARIABLE_DYNAMIC_CATEGORY_NAME,t.VariablesDynamic.flyoutCategory),t.Procedures&&t.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(t.PROCEDURE_CATEGORY_NAME,t.Procedures.flyoutCategory),this.addChangeListener(t.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new t.ThemeManager(this,this.options.theme||t.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=t.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[]},t.utils.object.inherits(t.WorkspaceSvg,t.Workspace),t.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,t.WorkspaceSvg.prototype.rendered=!0,t.WorkspaceSvg.prototype.isVisible_=!0,t.WorkspaceSvg.prototype.isFlyout=!1,t.WorkspaceSvg.prototype.isMutator=!1,t.WorkspaceSvg.prototype.resizesEnabled_=!0,t.WorkspaceSvg.prototype.scrollX=0,t.WorkspaceSvg.prototype.scrollY=0,t.WorkspaceSvg.prototype.startScrollX=0,t.WorkspaceSvg.prototype.startScrollY=0,t.WorkspaceSvg.prototype.dragDeltaXY_=null,t.WorkspaceSvg.prototype.scale=1,t.WorkspaceSvg.prototype.trashcan=null,t.WorkspaceSvg.prototype.scrollbar=null,t.WorkspaceSvg.prototype.flyout_=null,t.WorkspaceSvg.prototype.toolbox_=null,t.WorkspaceSvg.prototype.currentGesture_=null,t.WorkspaceSvg.prototype.blockDragSurface_=null,t.WorkspaceSvg.prototype.workspaceDragSurface_=null,t.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,t.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,t.WorkspaceSvg.prototype.injectionDiv_=null,t.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,t.WorkspaceSvg.prototype.targetWorkspace=null,t.WorkspaceSvg.prototype.inverseScreenCTM_=null,t.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,t.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},t.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},t.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},t.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},t.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},t.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},t.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},t.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},t.WorkspaceSvg.prototype.setTheme=function(e){e||(e=t.Themes.Classic),this.themeManager_.setTheme(e)},t.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter((function(t){return void 0!==t.getStyleName()}))),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var e=new t.Events.Ui(null,"theme",null,null);e.workspaceId=this.id,t.Events.fire(e)},t.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var e,i=0;e=t[i];i++){var n=e.getStyleName();n&&(e.setStyle(n),e.mutator&&e.mutator.updateBlockStyle())}},t.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},t.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},t.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},t.WorkspaceSvg.prototype.getSvgXY=function(e){var i=0,n=0,o=1;(t.utils.dom.containsNode(this.getCanvas(),e)||t.utils.dom.containsNode(this.getBubbleCanvas(),e))&&(o=this.scale);do{var r=t.utils.getRelativeXY(e);e!=this.getCanvas()&&e!=this.getBubbleCanvas()||(o=1),i+=r.x*o,n+=r.y*o,e=e.parentNode}while(e&&e!=this.getParentSvg());return new t.utils.Coordinate(i,n)},t.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return t.utils.getInjectionDivXY_(this.getCanvas())},t.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},t.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},t.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},t.WorkspaceSvg.prototype.createDom=function(e){if(this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyWorkspace"},null),e&&(this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),"blocklyMainBackground"==e&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(t.bindEventWithChecks_(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),t.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories){if(!t.Toolbox)throw Error("Missing require for Blockly.Toolbox");this.toolbox_=new(t.registry.getClassFromOptions(t.registry.Type.TOOLBOX,this.options))(this)}return this.grid_&&this.grid_.update(this.scale),this.recordDeleteAreas(),this.markerManager_.setCursor(new t.Cursor),this.markerManager_.registerMarker(t.navigation.MARKER_NAME,new t.Marker),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},t.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),t.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var e=this.getParentSvg();e&&e.parentNode&&t.utils.dom.removeNode(e.parentNode)}this.resizeHandlerWrapper_&&(t.unbindEvent_(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},t.WorkspaceSvg.prototype.newBlock=function(e,i){return new t.BlockSvg(this,e,i)},t.WorkspaceSvg.prototype.addTrashcan=function(){if(!t.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new t.Trashcan(this);var e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.svgBlockCanvas_)},t.WorkspaceSvg.prototype.addZoomControls=function(){if(!t.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new t.ZoomControls(this);var e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)},t.WorkspaceSvg.prototype.addFlyout=function(e){var i=new t.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides});if(i.toolboxPosition=this.options.toolboxPosition,this.horizontalLayout){if(!t.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout_=new t.HorizontalFlyout(i)}else{if(!t.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout_=new t.VerticalFlyout(i)}return this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(e)},t.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},t.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},t.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDeleteAreas()},t.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},t.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position(),this.trashcan&&this.trashcan.position(),this.zoomControls_&&this.zoomControls_.position(),this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},t.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var e=t.utils.getDocumentScroll();t.utils.Coordinate.equals(this.lastRecordedPageScroll_,e)||(this.lastRecordedPageScroll_=e,this.updateScreenCalculations_())},t.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},t.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},t.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},t.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){},t.WorkspaceSvg.prototype.translate=function(t,e){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,e);else{var i="translate("+t+","+e+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",i),this.svgBubbleCanvas_.setAttribute("transform",i)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,e,this.scale),this.grid_&&this.grid_.moveTo(t,e),this.maybeFireViewportChangeEvent()},t.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),t="translate("+t.x+","+t.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",t),this.svgBubbleCanvas_.setAttribute("transform",t)}},t.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var e=this.svgBlockCanvas_.previousSibling,i=parseInt(this.getParentSvg().getAttribute("width"),10),n=parseInt(this.getParentSvg().getAttribute("height"),10),o=t.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),e,i,n,this.scale),this.workspaceDragSurface_.translateSurface(o.x,o.y)}},t.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},t.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},t.WorkspaceSvg.prototype.setVisible=function(e){if(this.isVisible_=e,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&this.toolbox_.setVisible(e),e){for(var i=(e=this.getAllBlocks(!1)).length-1;0<=i;i--)e[i].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else t.hideChaff(!0)},t.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),e=t.length-1;0<=e;e--)t[e].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),e=0;e<t.length;e++)t[e].render(!1);this.markerManager_.updateMarkers()},t.WorkspaceSvg.prototype.highlightBlock=function(e,i){if(void 0===i){for(var n,o=0;n=this.highlightedBlocks_[o];o++)n.setHighlighted(!1);this.highlightedBlocks_.length=0}(n=e?this.getBlockById(e):null)&&((e=void 0===i||i)?-1==this.highlightedBlocks_.indexOf(n)&&this.highlightedBlocks_.push(n):t.utils.arrayRemove(this.highlightedBlocks_,n),n.setHighlighted(e))},t.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},t.WorkspaceSvg.prototype.pasteBlock_=function(e){t.Events.disable();try{var i=t.Xml.domToBlock(e,this),n=this.getMarker(t.navigation.MARKER_NAME).getCurNode();if(this.keyboardAccessibilityMode&&n&&n.isConnection()){var o=n.getLocation();return void t.navigation.insertBlock(i,o)}var r=parseInt(e.getAttribute("x"),10),s=parseInt(e.getAttribute("y"),10);if(!isNaN(r)&&!isNaN(s)){this.RTL&&(r=-r);do{e=!1;var a,l=this.getAllBlocks(!1);for(n=0;a=l[n];n++){var c=a.getRelativeToSurfaceXY();if(1>=Math.abs(r-c.x)&&1>=Math.abs(s-c.y)){e=!0;break}}if(!e){var h,u=i.getConnections_(!1);for(n=0;h=u[n];n++)if(h.closest(t.SNAP_RADIUS,new t.utils.Coordinate(r,s)).connection){e=!0;break}}e&&(r=this.RTL?r-t.SNAP_RADIUS:r+t.SNAP_RADIUS,s+=2*t.SNAP_RADIUS)}while(e);i.moveBy(r,s)}}finally{t.Events.enable()}t.Events.isEnabled()&&!i.isShadow()&&t.Events.fire(new t.Events.BlockCreate(i)),i.select()},t.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(e){t.Events.disable();try{var i=t.WorkspaceCommentSvg.fromXml(e,this),n=parseInt(e.getAttribute("x"),10),o=parseInt(e.getAttribute("y"),10);isNaN(n)||isNaN(o)||(this.RTL&&(n=-n),i.moveBy(n+50,o+50))}finally{t.Events.enable()}t.Events.isEnabled(),i.select()},t.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},t.WorkspaceSvg.prototype.renameVariableById=function(e,i){t.WorkspaceSvg.superClass_.renameVariableById.call(this,e,i),this.refreshToolboxSelection()},t.WorkspaceSvg.prototype.deleteVariableById=function(e){t.WorkspaceSvg.superClass_.deleteVariableById.call(this,e),this.refreshToolboxSelection()},t.WorkspaceSvg.prototype.createVariable=function(e,i,n){return e=t.WorkspaceSvg.superClass_.createVariable.call(this,e,i,n),this.refreshToolboxSelection(),e},t.WorkspaceSvg.prototype.recordDeleteAreas=function(){this.deleteAreaTrash_=this.trashcan&&this.svgGroup_.parentNode?this.trashcan.getClientRect():null,this.deleteAreaToolbox_=this.flyout_?this.flyout_.getClientRect():this.toolbox_&&"function"==typeof this.toolbox_.getClientRect?this.toolbox_.getClientRect():null},t.WorkspaceSvg.prototype.isDeleteArea=function(e){return this.deleteAreaTrash_&&this.deleteAreaTrash_.contains(e.clientX,e.clientY)?t.DELETE_AREA_TRASH:this.deleteAreaToolbox_&&this.deleteAreaToolbox_.contains(e.clientX,e.clientY)?t.DELETE_AREA_TOOLBOX:t.DELETE_AREA_NONE},t.WorkspaceSvg.prototype.onMouseDown_=function(t){var e=this.getGesture(t);e&&e.handleWsStart(t,this)},t.WorkspaceSvg.prototype.startDrag=function(e,i){(e=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,this.dragDeltaXY_=t.utils.Coordinate.difference(i,e)},t.WorkspaceSvg.prototype.moveDrag=function(e){return(e=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,t.utils.Coordinate.sum(this.dragDeltaXY_,e)},t.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},t.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},t.WorkspaceSvg.prototype.isContentBounded=function(){return this.options.moveOptions&&this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.controls||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},t.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},t.WorkspaceSvg.prototype.onMouseWheel_=function(e){if(t.Gesture.inProgress())e.preventDefault(),e.stopPropagation();else{var i=this.options.zoomOptions&&this.options.zoomOptions.wheel,n=this.options.moveOptions&&this.options.moveOptions.wheel;if(i||n){var o=t.utils.getScrollDeltaPixels(e);!i||!e.ctrlKey&&n?(i=this.scrollX-o.x,n=this.scrollY-o.y,e.shiftKey&&!o.x&&(i=this.scrollX-o.y,n=this.scrollY),this.scroll(i,n)):(o=-o.y/50,i=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(i.x,i.y,o)),e.preventDefault()}}},t.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var e=this.getTopBoundedElements();if(!e.length)return new t.utils.Rect(0,0,0,0);for(var i=e[0].getBoundingRectangle(),n=1;n<e.length;n++){var o=e[n].getBoundingRectangle();o.top<i.top&&(i.top=o.top),o.bottom>i.bottom&&(i.bottom=o.bottom),o.left<i.left&&(i.left=o.left),o.right>i.right&&(i.right=o.right)}return i},t.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),t.Events.setGroup(!0);for(var e,i=this.getTopBlocks(!0),n=0,o=0;e=i[o];o++)if(e.isMovable()){var r=e.getRelativeToSurfaceXY();e.moveBy(-r.x,n-r.y),e.snapToGrid(),n=e.getRelativeToSurfaceXY().y+e.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}t.Events.setGroup(!1),this.setResizesEnabled(!0)},t.WorkspaceSvg.prototype.showContextMenu=function(e){if(!this.options.readOnly&&!this.isFlyout){var i=t.ContextMenuRegistry.registry.getContextMenuOptions(t.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(i,e),t.ContextMenu.show(e,i,this.RTL)}},t.WorkspaceSvg.prototype.updateToolbox=function(e){if(e=t.utils.toolbox.convertToolboxDefToJson(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(t.utils.toolbox.hasCategories(e)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.render(e)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout_.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},t.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(t.mainWorkspace=this,this.setBrowserFocus())},t.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(t){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},t.WorkspaceSvg.prototype.zoom=function(t,e,i){i=Math.pow(this.options.zoomOptions.scaleSpeed,i);var n=this.scale*i;if(this.scale!=n){n>this.options.zoomOptions.maxScale?i=this.options.zoomOptions.maxScale/this.scale:n<this.options.zoomOptions.minScale&&(i=this.options.zoomOptions.minScale/this.scale);var o=this.getCanvas().getCTM(),r=this.getParentSvg().createSVGPoint();r.x=t,r.y=e,t=(r=r.matrixTransform(o.inverse())).x,e=r.y,o=o.translate(t*(1-i),e*(1-i)).scale(i),this.scrollX=o.e,this.scrollY=o.f,this.setScale(n)}},t.WorkspaceSvg.prototype.zoomCenter=function(t){var e=this.getMetrics();if(this.flyout_){var i=e.svgWidth?e.svgWidth/2:0;e=e.svgHeight?e.svgHeight/2:0}else i=e.viewWidth/2+e.absoluteLeft,e=e.viewHeight/2+e.absoluteTop;this.zoom(i,e,t)},t.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var e=this.getMetrics(),i=e.viewWidth;e=e.viewHeight;var n=this.getBlocksBoundingBox(),o=n.right-n.left;if(n=n.bottom-n.top,o){this.flyout_&&(this.horizontalLayout?(e+=this.flyout_.getHeight(),n+=this.flyout_.getHeight()/this.scale):(i+=this.flyout_.getWidth(),o+=this.flyout_.getWidth()/this.scale)),i/=o,e/=n,t.Events.disable();try{this.setScale(Math.min(i,e)),this.scrollCenter()}finally{t.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.beginCanvasTransition=function(){t.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),t.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},t.WorkspaceSvg.prototype.endCanvasTransition=function(){t.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),t.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},t.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),e=(t.contentWidth-t.viewWidth)/2,i=(t.contentHeight-t.viewHeight)/2;e=-e-t.contentLeft,i=-i-t.contentTop,this.scroll(e,i)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var e=t.getRelativeToSurfaceXY(),i=t.getHeightWidth(),n=this.scale;t=(e.x+(this.RTL?-1:1)*i.width/2)*n,e=(e.y+i.height/2)*n,i=this.getMetrics(),this.scroll(-(t-i.viewWidth/2),-(e-i.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.setScale=function(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,t.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDeleteAreas()),this.grid_&&this.grid_.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?(this.scrollbar.hScroll.resizeViewHorizontal(e),this.scrollbar.vScroll.resizeViewVertical(e)):(this.scrollbar.hScroll.resizeContentHorizontal(e),this.scrollbar.vScroll.resizeContentVertical(e)))},t.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},t.WorkspaceSvg.prototype.scroll=function(e,i){t.hideChaff(!0);var n=this.getMetrics(),o=n.contentWidth+n.contentLeft-n.viewWidth,r=n.contentHeight+n.contentTop-n.viewHeight;e=Math.min(e,-n.contentLeft),i=Math.min(i,-n.contentTop),e=Math.max(e,-o),i=Math.max(i,-r),this.scrollX=e,this.scrollY=i,this.scrollbar&&(this.scrollbar.hScroll.setHandlePosition(-(e+n.contentLeft)*this.scrollbar.hScroll.ratio),this.scrollbar.vScroll.setHandlePosition(-(i+n.contentTop)*this.scrollbar.vScroll.ratio)),e+=n.absoluteLeft,i+=n.absoluteTop,this.translate(e,i)},t.WorkspaceSvg.getDimensionsPx_=function(e){var i=0,n=0;return e&&(i=e.getWidth(),n=e.getHeight()),new t.utils.Size(i,n)},t.WorkspaceSvg.getContentDimensions_=function(e,i){return e.isContentBounded()?t.WorkspaceSvg.getContentDimensionsBounded_(e,i):t.WorkspaceSvg.getContentDimensionsExact_(e)},t.WorkspaceSvg.getContentDimensionsExact_=function(t){var e=t.getBlocksBoundingBox(),i=t.scale;t=e.top*i;var n=e.bottom*i,o=e.left*i;return{top:t,bottom:n,left:o,right:e=e.right*i,width:e-o,height:n-t}},t.WorkspaceSvg.getContentDimensionsBounded_=function(e,i){e=t.WorkspaceSvg.getContentDimensionsExact_(e);var n=i.width,o=n/2,r=(i=i.height)/2,s=Math.min(e.left-o,e.right-n),a=Math.min(e.top-r,e.bottom-i);return{left:s,top:a,height:Math.max(e.bottom+r,e.top+i)-a,width:Math.max(e.right+o,e.left+n)-s}},t.WorkspaceSvg.getTopLevelWorkspaceMetrics_=function(){var e=t.WorkspaceSvg.getDimensionsPx_(this.toolbox_),i=t.WorkspaceSvg.getDimensionsPx_(this.flyout_),n=t.svgSize(this.getParentSvg()),o={height:n.height,width:n.width};this.toolbox_?this.toolboxPosition==t.TOOLBOX_AT_TOP||this.toolboxPosition==t.TOOLBOX_AT_BOTTOM?o.height-=e.height:this.toolboxPosition!=t.TOOLBOX_AT_LEFT&&this.toolboxPosition!=t.TOOLBOX_AT_RIGHT||(o.width-=e.width):this.flyout_&&(this.toolboxPosition==t.TOOLBOX_AT_TOP||this.toolboxPosition==t.TOOLBOX_AT_BOTTOM?o.height-=i.height:this.toolboxPosition!=t.TOOLBOX_AT_LEFT&&this.toolboxPosition!=t.TOOLBOX_AT_RIGHT||(o.width-=i.width));var r=t.WorkspaceSvg.getContentDimensions_(this,o),s=0;this.toolbox_&&this.toolboxPosition==t.TOOLBOX_AT_LEFT?s=e.width:this.flyout_&&this.toolboxPosition==t.TOOLBOX_AT_LEFT&&(s=i.width);var a=0;return this.toolbox_&&this.toolboxPosition==t.TOOLBOX_AT_TOP?a=e.height:this.flyout_&&this.toolboxPosition==t.TOOLBOX_AT_TOP&&(a=i.height),{contentHeight:r.height,contentWidth:r.width,contentTop:r.top,contentLeft:r.left,viewHeight:o.height,viewWidth:o.width,viewTop:-this.scrollY,viewLeft:-this.scrollX,absoluteTop:a,absoluteLeft:s,svgHeight:n.height,svgWidth:n.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:this.toolboxPosition,flyoutWidth:i.width,flyoutHeight:i.height}},t.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var e=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-e.contentWidth*t.x-e.contentLeft),"number"==typeof t.y&&(this.scrollY=-e.contentHeight*t.y-e.contentTop),this.translate(this.scrollX+e.absoluteLeft,this.scrollY+e.absoluteTop)},t.WorkspaceSvg.prototype.getBlockById=function(e){return t.WorkspaceSvg.superClass_.getBlockById.call(this,e)},t.WorkspaceSvg.prototype.getTopBlocks=function(e){return t.WorkspaceSvg.superClass_.getTopBlocks.call(this,e)},t.WorkspaceSvg.prototype.addTopBlock=function(e){this.addTopBoundedElement(e),t.WorkspaceSvg.superClass_.addTopBlock.call(this,e)},t.WorkspaceSvg.prototype.removeTopBlock=function(e){this.removeTopBoundedElement(e),t.WorkspaceSvg.superClass_.removeTopBlock.call(this,e)},t.WorkspaceSvg.prototype.addTopComment=function(e){this.addTopBoundedElement(e),t.WorkspaceSvg.superClass_.addTopComment.call(this,e)},t.WorkspaceSvg.prototype.removeTopComment=function(e){this.removeTopBoundedElement(e),t.WorkspaceSvg.superClass_.removeTopComment.call(this,e)},t.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},t.WorkspaceSvg.prototype.removeTopBoundedElement=function(e){t.utils.arrayRemove(this.topBoundedElements_,e)},t.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},t.WorkspaceSvg.prototype.setResizesEnabled=function(t){var e=!this.resizesEnabled_&&t;this.resizesEnabled_=t,e&&this.resizeContents()},t.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),t.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},t.WorkspaceSvg.prototype.registerButtonCallback=function(t,e){if("function"!=typeof e)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=e},t.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},t.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},t.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,e){if("function"!=typeof e)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=e},t.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},t.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},t.WorkspaceSvg.prototype.getGesture=function(e){var i="mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type,n=this.currentGesture_;return n?i&&n.hasStarted()?(console.warn("Tried to start the same gesture twice."),n.cancel(),null):n:i?this.currentGesture_=new t.TouchGesture(e,this):null},t.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},t.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},t.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},t.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},t.inject=function(e,i){if(t.checkBlockColourConstants(),"string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e)),!e||!t.utils.dom.containsNode(document,e))throw Error("Error: container is not in current document.");i=new t.Options(i||{});var n=document.createElement("div");n.className="injectionDiv",n.tabIndex=0,t.utils.aria.setState(n,t.utils.aria.State.LABEL,t.Msg.WORKSPACE_ARIA_LABEL),e.appendChild(n),e=t.createDom_(n,i);var o=new t.BlockDragSurfaceSvg(n),r=new t.WorkspaceDragSurfaceSvg(n),s=t.createMainWorkspace_(e,i,o,r);return t.user.keyMap.setKeyMap(i.keyMap),t.init_(s),t.mainWorkspace=s,t.svgResize(s),n.addEventListener("focusin",(function(){t.mainWorkspace=s})),s},t.createDom_=function(e,i){e.setAttribute("dir","LTR"),t.Component.defaultRightToLeft=i.RTL,t.Css.inject(i.hasCss,i.pathToMedia),e=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},e);var n=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),o=String(Math.random()).substring(2);return i.gridPattern=t.Grid.createDom(o,i.gridOptions,n),e},t.createMainWorkspace_=function(e,i,n,o){i.parentWorkspace=null;var r=new t.WorkspaceSvg(i,n,o);return i=r.options,r.scale=i.zoomOptions.startScale,e.appendChild(r.createDom("blocklyMainBackground")),t.utils.dom.addClass(r.getInjectionDiv(),r.getRenderer().getClassName()),t.utils.dom.addClass(r.getInjectionDiv(),r.getTheme().getClassName()),!i.hasCategories&&i.languageTree&&(n=r.addFlyout(t.utils.Svg.SVG),t.utils.dom.insertAfter(n,e)),i.hasTrashcan&&r.addTrashcan(),i.zoomOptions&&i.zoomOptions.controls&&r.addZoomControls(),r.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color"),r.translate(0,0),i.readOnly||r.isMovable()||r.addChangeListener((function(e){if(!r.isDragging()&&!r.isMovable()&&-1!=t.Events.BUMP_EVENTS.indexOf(e.type)){var i=Object.create(null),n=r.getMetrics(),o=r.scale;if(i.RTL=r.RTL,i.viewLeft=n.viewLeft/o,i.viewTop=n.viewTop/o,i.viewRight=(n.viewLeft+n.viewWidth)/o,i.viewBottom=(n.viewTop+n.viewHeight)/o,r.isContentBounded()?(n=r.getBlocksBoundingBox(),i.contentLeft=n.left,i.contentTop=n.top,i.contentRight=n.right,i.contentBottom=n.bottom):(i.contentLeft=n.contentLeft/o,i.contentTop=n.contentTop/o,i.contentRight=(n.contentLeft+n.contentWidth)/o,i.contentBottom=(n.contentTop+n.contentHeight)/o),i.contentTop<i.viewTop||i.contentBottom>i.viewBottom||i.contentLeft<i.viewLeft||i.contentRight>i.viewRight){switch(n=null,e&&(n=t.Events.getGroup(),t.Events.setGroup(e.group)),e.type){case t.Events.BLOCK_CREATE:case t.Events.BLOCK_MOVE:var s=r.getBlockById(e.blockId);s&&(s=s.getRootBlock());break;case t.Events.COMMENT_CREATE:case t.Events.COMMENT_MOVE:s=r.getCommentById(e.commentId)}if(s){(o=s.getBoundingRectangle()).height=o.bottom-o.top,o.width=o.right-o.left;var a=i.viewTop,l=i.viewBottom-o.height;l=Math.max(a,l),a=t.utils.math.clamp(a,o.top,l)-o.top,l=i.viewLeft;var c=i.viewRight-o.width;i.RTL?l=Math.min(c,l):c=Math.max(l,c),i=t.utils.math.clamp(l,o.left,c)-o.left,s.moveBy(i,a)}e&&(!e.group&&s&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==n&&t.Events.setGroup(n))}}})),t.svgResize(r),t.WidgetDiv.createDom(),t.DropDownDiv.createDom(),t.Tooltip.createDom(),r},t.init_=function(e){var i=e.options,n=e.getParentSvg();if(t.bindEventWithChecks_(n.parentNode,"contextmenu",null,(function(e){t.utils.isTargetInput(e)||e.preventDefault()})),n=t.bindEventWithChecks_(window,"resize",null,(function(){t.hideChaff(!0),t.svgResize(e)})),e.setResizeHandlerWrapper(n),t.inject.bindDocumentEvents_(),i.languageTree){n=e.getToolbox();var o=e.getFlyout(!0);n?n.init():o&&(o.init(e),o.show(i.languageTree),"function"==typeof o.scrollToStart&&o.scrollToStart())}n=t.Scrollbar.scrollbarThickness,i.hasTrashcan&&(n=e.trashcan.init(n)),i.zoomOptions&&i.zoomOptions.controls&&e.zoomControls_.init(n),i.moveOptions&&i.moveOptions.scrollbars?(e.scrollbar=new t.ScrollbarPair(e),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),i.hasSounds&&t.inject.loadSounds_(i.pathToMedia,e)},t.inject.bindDocumentEvents_=function(){t.documentEventsBound_||(t.bindEventWithChecks_(document,"scroll",null,(function(){for(var e,i=t.Workspace.getAll(),n=0;e=i[n];n++)e.updateInverseScreenCTM&&e.updateInverseScreenCTM()})),t.bindEventWithChecks_(document,"keydown",null,t.onKeyDown),t.bindEvent_(document,"touchend",null,t.longStop_),t.bindEvent_(document,"touchcancel",null,t.longStop_),t.utils.userAgent.IPAD&&t.bindEventWithChecks_(window,"orientationchange",document,(function(){t.svgResize(t.getMainWorkspace())}))),t.documentEventsBound_=!0},t.inject.loadSounds_=function(e,i){var n=i.getAudioManager();n.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),n.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),n.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");var o=[];e=function(){for(;o.length;)t.unbindEvent_(o.pop());n.preload()},o.push(t.bindEventWithChecks_(document,"mousemove",null,e,!0)),o.push(t.bindEventWithChecks_(document,"touchstart",null,e,!0))},t.Names=function(t,e){if(this.variablePrefix_=e||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),e=0;e<t.length;e++)this.reservedDict_[t[e]]=!0;this.reset()},t.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",t.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},t.Names.prototype.setVariableMap=function(t){this.variableMap_=t},t.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.log("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.variableDB_.setVariableMap(workspace.getVariableMap());"),null)},t.Names.prototype.getName=function(e,i){if(i==t.VARIABLE_CATEGORY_NAME){var n=this.getNameForUserVariable_(e);n&&(e=n)}n=e.toLowerCase()+"_"+i;var o=i==t.VARIABLE_CATEGORY_NAME||i==t.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";return n in this.db_?o+this.db_[n]:(e=this.getDistinctName(e,i),this.db_[n]=e.substr(o.length),e)},t.Names.prototype.getDistinctName=function(e,i){e=this.safeName_(e);for(var n="";this.dbReverse_[e+n]||e+n in this.reservedDict_;)n=n?n+1:2;return e+=n,this.dbReverse_[e]=!0,(i==t.VARIABLE_CATEGORY_NAME||i==t.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+e},t.Names.prototype.safeName_=function(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(e[0])&&(e="my_"+e)):e=t.Msg.UNNAMED_KEY||"unnamed",e},t.Names.equals=function(t,e){return t.toLowerCase()==e.toLowerCase()},t.Procedures={},t.Procedures.NAME_TYPE=t.PROCEDURE_CATEGORY_NAME,t.Procedures.DEFAULT_ARG="x",t.Procedures.allProcedures=function(e){var i=e.getBlocksByType("procedures_defnoreturn",!1).map((function(t){return t.getProcedureDef()}));return e=e.getBlocksByType("procedures_defreturn",!1).map((function(t){return t.getProcedureDef()})),i.sort(t.Procedures.procTupleComparator_),e.sort(t.Procedures.procTupleComparator_),[i,e]},t.Procedures.procTupleComparator_=function(t,e){return t[0].toLowerCase().localeCompare(e[0].toLowerCase())},t.Procedures.findLegalName=function(e,i){if(i.isInFlyout)return e;for(e=e||t.Msg.UNNAMED_KEY||"unnamed";!t.Procedures.isLegalName_(e,i.workspace,i);){var n=e.match(/^(.*?)(\d+)$/);e=n?n[1]+(parseInt(n[2],10)+1):e+"2"}return e},t.Procedures.isLegalName_=function(e,i,n){return!t.Procedures.isNameUsed(e,i,n)},t.Procedures.isNameUsed=function(e,i,n){i=i.getAllBlocks(!1);for(var o=0;o<i.length;o++)if(i[o]!=n&&i[o].getProcedureDef){var r=i[o].getProcedureDef();if(t.Names.equals(r[0],e))return!0}return!1},t.Procedures.rename=function(e){e=e.trim();var i=t.Procedures.findLegalName(e,this.getSourceBlock()),n=this.getValue();if(n!=e&&n!=i){e=this.getSourceBlock().workspace.getAllBlocks(!1);for(var o=0;o<e.length;o++)e[o].renameProcedure&&e[o].renameProcedure(n,i)}return i},t.Procedures.flyoutCategory=function(e){function i(e,i){for(var o=0;o<e.length;o++){var r=e[o][0],s=e[o][1],a=t.utils.xml.createElement("block");a.setAttribute("type",i),a.setAttribute("gap",16);var l=t.utils.xml.createElement("mutation");for(l.setAttribute("name",r),a.appendChild(l),r=0;r<s.length;r++){var c=t.utils.xml.createElement("arg");c.setAttribute("name",s[r]),l.appendChild(c)}n.push(a)}}var n=[];if(t.Blocks.procedures_defnoreturn){var o=t.utils.xml.createElement("block");o.setAttribute("type","procedures_defnoreturn"),o.setAttribute("gap",16);var r=t.utils.xml.createElement("field");r.setAttribute("name","NAME"),r.appendChild(t.utils.xml.createTextNode(t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),o.appendChild(r),n.push(o)}return t.Blocks.procedures_defreturn&&((o=t.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),o.setAttribute("gap",16),(r=t.utils.xml.createElement("field")).setAttribute("name","NAME"),r.appendChild(t.utils.xml.createTextNode(t.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),o.appendChild(r),n.push(o)),t.Blocks.procedures_ifreturn&&((o=t.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),o.setAttribute("gap",16),n.push(o)),n.length&&n[n.length-1].setAttribute("gap",24),i((e=t.Procedures.allProcedures(e))[0],"procedures_callnoreturn"),i(e[1],"procedures_callreturn"),n},t.Procedures.updateMutatorFlyout_=function(e){for(var i,n=[],o=e.getBlocksByType("procedures_mutatorarg",!1),r=0;i=o[r];r++)n.push(i.getFieldValue("NAME"));o=t.utils.xml.createElement("xml"),(r=t.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(i=t.utils.xml.createElement("field")).setAttribute("name","NAME"),n=t.Variables.generateUniqueNameFromOptions(t.Procedures.DEFAULT_ARG,n),n=t.utils.xml.createTextNode(n),i.appendChild(n),r.appendChild(i),o.appendChild(r),e.updateToolbox(o)},t.Procedures.mutatorOpenListener=function(e){if(e.type==t.Events.UI&&"mutatorOpen"==e.element&&e.newValue){var i=(e=t.Workspace.getById(e.workspaceId).getBlockById(e.blockId)).type;"procedures_defnoreturn"!=i&&"procedures_defreturn"!=i||(e=e.mutator.getWorkspace(),t.Procedures.updateMutatorFlyout_(e),e.addChangeListener(t.Procedures.mutatorChangeListener_))}},t.Procedures.mutatorChangeListener_=function(e){e.type!=t.Events.BLOCK_CREATE&&e.type!=t.Events.BLOCK_DELETE&&e.type!=t.Events.BLOCK_CHANGE||(e=t.Workspace.getById(e.workspaceId),t.Procedures.updateMutatorFlyout_(e))},t.Procedures.getCallers=function(e,i){var n=[];i=i.getAllBlocks(!1);for(var o=0;o<i.length;o++)if(i[o].getProcedureCall){var r=i[o].getProcedureCall();r&&t.Names.equals(r,e)&&n.push(i[o])}return n},t.Procedures.mutateCallers=function(e){var i,n=t.Events.recordUndo,o=e.getProcedureDef()[0],r=e.mutationToDom(!0);for(e=t.Procedures.getCallers(o,e.workspace),o=0;i=e[o];o++){var s=i.mutationToDom();s=s&&t.Xml.domToText(s),i.domToMutation(r);var a=i.mutationToDom();s!=(a=a&&t.Xml.domToText(a))&&(t.Events.recordUndo=!1,t.Events.fire(new t.Events.BlockChange(i,"mutation",null,s,a)),t.Events.recordUndo=n)}},t.Procedures.getDefinition=function(e,i){i=i.getTopBlocks(!1);for(var n=0;n<i.length;n++)if(i[n].getProcedureDef){var o=i[n].getProcedureDef();if(o&&t.Names.equals(o[0],e))return i[n]}return null},t.VariableModel=function(e,i,n,o){this.workspace=e,this.name=i,this.type=n||"",this.id_=o||t.utils.genUid(),t.Events.fire(new t.Events.VarCreate(this))},t.VariableModel.prototype.getId=function(){return this.id_},t.VariableModel.compareByName=function(t,e){return(t=t.name.toLowerCase())<(e=e.name.toLowerCase())?-1:t==e?0:1},t.Variables={},t.Variables.NAME_TYPE=t.VARIABLE_CATEGORY_NAME,t.Variables.allUsedVarModels=function(t){var e=t.getAllBlocks(!1);t=Object.create(null);for(var i=0;i<e.length;i++){var n=e[i].getVarModels();if(n)for(var o=0;o<n.length;o++){var r=n[o],s=r.getId();s&&(t[s]=r)}}for(s in e=[],t)e.push(t[s]);return e},t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},t.Variables.allDeveloperVariables=function(e){e=e.getAllBlocks(!1);for(var i,n=Object.create(null),o=0;i=e[o];o++){var r=i.getDeveloperVariables;if(!r&&i.getDeveloperVars&&(r=i.getDeveloperVars,t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[i.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+i.type+"')"),t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[i.type]=!0)),r)for(i=r(),r=0;r<i.length;r++)n[i[r]]=!0}return Object.keys(n)},t.Variables.flyoutCategory=function(e){var i=[],n=document.createElement("button");return n.setAttribute("text","%{BKY_NEW_VARIABLE}"),n.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",(function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace())})),i.push(n),e=t.Variables.flyoutCategoryBlocks(e),i.concat(e)},t.Variables.flyoutCategoryBlocks=function(e){var i=[];if(0<(e=e.getVariablesOfType("")).length){var n=e[e.length-1];if(t.Blocks.variables_set){var o=t.utils.xml.createElement("block");o.setAttribute("type","variables_set"),o.setAttribute("gap",t.Blocks.math_change?8:24),o.appendChild(t.Variables.generateVariableFieldDom(n)),i.push(o)}if(t.Blocks.math_change&&((o=t.utils.xml.createElement("block")).setAttribute("type","math_change"),o.setAttribute("gap",t.Blocks.variables_get?20:8),o.appendChild(t.Variables.generateVariableFieldDom(n)),n=t.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),o.appendChild(n),i.push(o)),t.Blocks.variables_get){e.sort(t.VariableModel.compareByName),n=0;for(var r;r=e[n];n++)(o=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),o.setAttribute("gap",8),o.appendChild(t.Variables.generateVariableFieldDom(r)),i.push(o)}}return i},t.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",t.Variables.generateUniqueName=function(e){return t.Variables.generateUniqueNameFromOptions(t.Variables.VAR_LETTER_OPTIONS.charAt(0),e.getAllVariableNames())},t.Variables.generateUniqueNameFromOptions=function(e,i){if(!i.length)return e;for(var n=t.Variables.VAR_LETTER_OPTIONS,o="",r=n.indexOf(e);;){for(var s=!1,a=0;a<i.length;a++)if(i[a].toLowerCase()==e){s=!0;break}if(!s)return e;++r==n.length&&(r=0,o=Number(o)+1),e=n.charAt(r)+o}},t.Variables.createVariableButtonHandler=function(e,i,n){var o=n||"",r=function(n){t.Variables.promptName(t.Msg.NEW_VARIABLE_TITLE,n,(function(n){if(n){var s=t.Variables.nameUsedWithAnyType(n,e);if(s){if(s.type==o)var a=t.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",s.name);else a=(a=t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",s.name).replace("%2",s.type);t.alert(a,(function(){r(n)}))}else e.createVariable(n,o),i&&i(n)}else i&&i(null)}))};r("")},t.Variables.createVariable=t.Variables.createVariableButtonHandler,t.Variables.renameVariable=function(e,i,n){var o=function(r){var s=t.Msg.RENAME_VARIABLE_TITLE.replace("%1",i.name);t.Variables.promptName(s,r,(function(r){if(r){var s=t.Variables.nameUsedWithOtherType_(r,i.type,e);s?(s=t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",s.name).replace("%2",s.type),t.alert(s,(function(){o(r)}))):(e.renameVariableById(i.getId(),r),n&&n(r))}else n&&n(null)}))};o("")},t.Variables.promptName=function(e,i,n){t.prompt(e,i,(function(e){e&&((e=e.replace(/[\s\xa0]+/g," ").trim())==t.Msg.RENAME_VARIABLE||e==t.Msg.NEW_VARIABLE)&&(e=null),n(e)}))},t.Variables.nameUsedWithOtherType_=function(t,e,i){i=i.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var n,o=0;n=i[o];o++)if(n.name.toLowerCase()==t&&n.type!=e)return n;return null},t.Variables.nameUsedWithAnyType=function(t,e){e=e.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var i,n=0;i=e[n];n++)if(i.name.toLowerCase()==t)return i;return null},t.Variables.generateVariableFieldDom=function(e){var i=t.utils.xml.createElement("field");return i.setAttribute("name","VAR"),i.setAttribute("id",e.getId()),i.setAttribute("variabletype",e.type),e=t.utils.xml.createTextNode(e.name),i.appendChild(e),i},t.Variables.getOrCreateVariablePackage=function(e,i,n,o){var r=t.Variables.getVariable(e,i,n,o);return r||(r=t.Variables.createVariable_(e,i,n,o)),r},t.Variables.getVariable=function(t,e,i,n){var o=t.getPotentialVariableMap(),r=null;if(e&&(!(r=t.getVariableById(e))&&o&&(r=o.getVariableById(e)),r))return r;if(i){if(null==n)throw Error("Tried to look up a variable by name without a type");!(r=t.getVariable(i,n))&&o&&(r=o.getVariable(i,n))}return r},t.Variables.createVariable_=function(e,i,n,o){var r=e.getPotentialVariableMap();return n||(n=t.Variables.generateUniqueName(e.isFlyout?e.targetWorkspace:e)),r?r.createVariable(n,o,i):e.createVariable(n,o,i)},t.Variables.getAddedVariables=function(t,e){t=t.getAllVariables();var i=[];if(e.length!=t.length)for(var n=0;n<t.length;n++){var o=t[n];-1==e.indexOf(o)&&i.push(o)}return i},t.WidgetDiv={},t.WidgetDiv.owner_=null,t.WidgetDiv.dispose_=null,t.WidgetDiv.rendererClassName_="",t.WidgetDiv.themeClassName_="",t.WidgetDiv.createDom=function(){t.WidgetDiv.DIV||(t.WidgetDiv.DIV=document.createElement("div"),t.WidgetDiv.DIV.className="blocklyWidgetDiv",(t.parentContainer||document.body).appendChild(t.WidgetDiv.DIV))},t.WidgetDiv.show=function(e,i,n){t.WidgetDiv.hide(),t.WidgetDiv.owner_=e,t.WidgetDiv.dispose_=n,(e=t.WidgetDiv.DIV).style.direction=i?"rtl":"ltr",e.style.display="block",i=t.getMainWorkspace(),t.WidgetDiv.rendererClassName_=i.getRenderer().getClassName(),t.WidgetDiv.themeClassName_=i.getTheme().getClassName(),t.utils.dom.addClass(e,t.WidgetDiv.rendererClassName_),t.utils.dom.addClass(e,t.WidgetDiv.themeClassName_)},t.WidgetDiv.hide=function(){if(t.WidgetDiv.isVisible()){t.WidgetDiv.owner_=null;var e=t.WidgetDiv.DIV;e.style.display="none",e.style.left="",e.style.top="",t.WidgetDiv.dispose_&&t.WidgetDiv.dispose_(),t.WidgetDiv.dispose_=null,e.textContent="",t.WidgetDiv.rendererClassName_&&(t.utils.dom.removeClass(e,t.WidgetDiv.rendererClassName_),t.WidgetDiv.rendererClassName_=""),t.WidgetDiv.themeClassName_&&(t.utils.dom.removeClass(e,t.WidgetDiv.themeClassName_),t.WidgetDiv.themeClassName_=""),t.getMainWorkspace().markFocused()}},t.WidgetDiv.isVisible=function(){return!!t.WidgetDiv.owner_},t.WidgetDiv.hideIfOwner=function(e){t.WidgetDiv.owner_==e&&t.WidgetDiv.hide()},t.WidgetDiv.positionInternal_=function(e,i,n){t.WidgetDiv.DIV.style.left=e+"px",t.WidgetDiv.DIV.style.top=i+"px",t.WidgetDiv.DIV.style.height=n+"px"},t.WidgetDiv.positionWithAnchor=function(e,i,n,o){var r=t.WidgetDiv.calculateY_(e,i,n);e=t.WidgetDiv.calculateX_(e,i,n,o),0>r?t.WidgetDiv.positionInternal_(e,0,n.height+r):t.WidgetDiv.positionInternal_(e,r,n.height)},t.WidgetDiv.calculateX_=function(t,e,i,n){return n?(e=Math.max(e.right-i.width,t.left),Math.min(e,t.right-i.width)):(e=Math.min(e.left,t.right-i.width),Math.max(e,t.left))},t.WidgetDiv.calculateY_=function(t,e,i){return e.bottom+i.height>=t.bottom?e.top-i.height:e.bottom},t.VERSION="3.20200924.4",t.mainWorkspace=null,t.selected=null,t.draggingConnections=[],t.clipboardXml_=null,t.clipboardSource_=null,t.clipboardTypeCounts_=null,t.cache3dSupported_=null,t.parentContainer=null,t.svgSize=function(e){return new t.utils.Size(e.cachedWidth_,e.cachedHeight_)},t.resizeSvgContents=function(t){t.resizeContents()},t.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var e=t.getParentSvg(),i=e.parentNode;if(i){var n=i.offsetWidth;i=i.offsetHeight,e.cachedWidth_!=n&&(e.setAttribute("width",n+"px"),e.cachedWidth_=n),e.cachedHeight_!=i&&(e.setAttribute("height",i+"px"),e.cachedHeight_=i),t.resize()}},t.onKeyDown=function(e){var i=t.mainWorkspace;if(i&&!(t.utils.isTargetInput(e)||i.rendered&&!i.isVisible()))if(i.options.readOnly)t.navigation.onKeyPress(e);else{var n=!1;if(e.keyCode==t.utils.KeyCodes.ESC)t.hideChaff(),t.navigation.onBlocklyAction(t.navigation.ACTION_EXIT);else{if(!t.Gesture.inProgress()&&t.navigation.onKeyPress(e))return;if(e.keyCode==t.utils.KeyCodes.BACKSPACE||e.keyCode==t.utils.KeyCodes.DELETE){if(e.preventDefault(),t.Gesture.inProgress())return;t.selected&&t.selected.isDeletable()&&(n=!0)}else if(e.altKey||e.ctrlKey||e.metaKey){if(t.Gesture.inProgress())return;t.selected&&t.selected.isDeletable()&&t.selected.isMovable()&&(e.keyCode==t.utils.KeyCodes.C?(t.hideChaff(),t.copy_(t.selected)):e.keyCode!=t.utils.KeyCodes.X||t.selected.workspace.isFlyout||(t.copy_(t.selected),n=!0)),e.keyCode==t.utils.KeyCodes.V?t.clipboardXml_&&((e=t.clipboardSource_).isFlyout&&(e=e.targetWorkspace),t.clipboardTypeCounts_&&e.isCapacityAvailable(t.clipboardTypeCounts_)&&(t.Events.setGroup(!0),e.paste(t.clipboardXml_),t.Events.setGroup(!1))):e.keyCode==t.utils.KeyCodes.Z?(t.hideChaff(),i.undo(e.shiftKey)):e.ctrlKey&&e.keyCode==t.utils.KeyCodes.Y&&(t.hideChaff(),i.undo(!0))}}n&&!t.selected.workspace.isFlyout&&(t.Events.setGroup(!0),t.hideChaff(),t.selected.dispose(!0,!0),t.Events.setGroup(!1))}},t.copy_=function(e){(e=e.toCopyData())&&(t.clipboardXml_=e.xml,t.clipboardSource_=e.source,t.clipboardTypeCounts_=e.typeCounts)},t.duplicate=function(e){var i=t.clipboardXml_,n=t.clipboardSource_;t.copy_(e),e.workspace.paste(t.clipboardXml_),t.clipboardXml_=i,t.clipboardSource_=n},t.onContextMenu_=function(e){t.utils.isTargetInput(e)||e.preventDefault()},t.hideChaff=function(e){t.Tooltip.hide(),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation(),e||((e=t.getMainWorkspace()).trashcan&&e.trashcan.flyout&&e.trashcan.closeFlyout(),(e=e.getToolbox())&&e.getFlyout()&&e.getFlyout().autoClose&&e.clearSelection())},t.getMainWorkspace=function(){return t.mainWorkspace},t.alert=function(t,e){alert(t),e&&e()},t.confirm=function(t,e){e(confirm(t))},t.prompt=function(t,e,i){i(prompt(t,e))},t.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},t.defineBlocksWithJsonArray=function(e){for(var i=0;i<e.length;i++){var n=e[i];if(n){var o=n.type;null==o||""===o?console.warn("Block definition #"+i+" in JSON array is missing a type attribute. Skipping."):(t.Blocks[o]&&console.warn("Block definition #"+i+' in JSON array overwrites prior definition of "'+o+'".'),t.Blocks[o]={init:t.jsonInitFactory_(n)})}else console.warn("Block definition #"+i+" in JSON array is "+n+". Skipping.")}},t.bindEventWithChecks_=function(e,i,n,o,r,s){var a=!1,l=function(e){var i=!r;e=t.Touch.splitEventByTouches(e);for(var s,l=0;s=e[l];l++)i&&!t.Touch.shouldHandleEvent(s)||(t.Touch.setClientFromTouch(s),n?o.call(n,s):o(s),a=!0)},c=[];if(t.utils.global.PointerEvent&&i in t.Touch.TOUCH_MAP)for(var h,u=0;h=t.Touch.TOUCH_MAP[i][u];u++)e.addEventListener(h,l,!1),c.push([e,h,l]);else if(e.addEventListener(i,l,!1),c.push([e,i,l]),i in t.Touch.TOUCH_MAP){var d=function(t){l(t),a&&!s&&t.preventDefault()};for(u=0;h=t.Touch.TOUCH_MAP[i][u];u++)e.addEventListener(h,d,!1),c.push([e,h,d])}return c},t.bindEvent_=function(e,i,n,o){var r=function(t){n?o.call(n,t):o(t)},s=[];if(t.utils.global.PointerEvent&&i in t.Touch.TOUCH_MAP)for(var a,l=0;a=t.Touch.TOUCH_MAP[i][l];l++)e.addEventListener(a,r,!1),s.push([e,a,r]);else if(e.addEventListener(i,r,!1),s.push([e,i,r]),i in t.Touch.TOUCH_MAP){var c=function(t){if(t.changedTouches&&1==t.changedTouches.length){var e=t.changedTouches[0];t.clientX=e.clientX,t.clientY=e.clientY}r(t),t.preventDefault()};for(l=0;a=t.Touch.TOUCH_MAP[i][l];l++)e.addEventListener(a,c,!1),s.push([e,a,c])}return s},t.unbindEvent_=function(t){for(;t.length;){var e=t.pop(),i=e[2];e[0].removeEventListener(e[1],i,!1)}return i},t.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},t.hueToHex=function(e){return t.utils.colour.hsvToHex(e,t.HSV_SATURATION,255*t.HSV_VALUE)},t.checkBlockColourConstants=function(){t.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),t.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),t.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),t.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),t.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),t.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),t.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),t.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),t.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),t.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),t.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),t.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),t.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),t.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),t.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),t.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},t.checkBlockColourConstant_=function(e,i,n){for(var o="Blockly",r=t,s=0;s<i.length;++s)o+="."+i[s],r&&(r=r[i[s]]);r&&r!==n&&(e=(void 0===n?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",o).replace("%2",e),console.warn(e))},t.setParentContainer=function(e){t.parentContainer=e},t.Icon=function(t){this.block_=t,this.iconGroup_=null},t.Icon.prototype.collapseHidden=!0,t.Icon.prototype.SIZE=17,t.Icon.prototype.bubble_=null,t.Icon.prototype.iconXY_=null,t.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&t.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),t.bindEventWithChecks_(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},t.Icon.prototype.dispose=function(){t.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},t.Icon.prototype.updateEditable=function(){},t.Icon.prototype.isVisible=function(){return!!this.bubble_},t.Icon.prototype.iconClick_=function(e){this.block_.workspace.isDragging()||this.block_.isInFlyout||t.utils.isRightButton(e)||this.setVisible(!this.isVisible())},t.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},t.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},t.Icon.prototype.computeIconLocation=function(){var e=this.block_.getRelativeToSurfaceXY(),i=t.utils.getRelativeXY(this.iconGroup_);e=new t.utils.Coordinate(e.x+i.x+this.SIZE/2,e.y+i.y+this.SIZE/2),t.utils.Coordinate.equals(this.getIconLocation(),e)||this.setIconLocation(e)},t.Icon.prototype.getIconLocation=function(){return this.iconXY_},t.Icon.prototype.getCorrectedSize=function(){return new t.utils.Size(t.Icon.prototype.SIZE,t.Icon.prototype.SIZE-2)},t.Warning=function(e){t.Warning.superClass_.constructor.call(this,e),this.createIcon(),this.text_={}},t.utils.object.inherits(t.Warning,t.Icon),t.Warning.prototype.collapseHidden=!1,t.Warning.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},e)},t.Warning.textToDom_=function(e){var i=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:t.Bubble.BORDER_WIDTH},null);e=e.split("\n");for(var n=0;n<e.length;n++){var o=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{dy:"1em",x:t.Bubble.BORDER_WIDTH},i),r=document.createTextNode(e[n]);o.appendChild(r)}return i},t.Warning.prototype.setVisible=function(e){e!=this.isVisible()&&(t.Events.fire(new t.Events.Ui(this.block_,"warningOpen",!e,e)),e?this.createBubble():this.disposeBubble())},t.Warning.prototype.createBubble=function(){if(this.paragraphElement_=t.Warning.textToDom_(this.getText()),this.bubble_=new t.Bubble(this.block_.workspace,this.paragraphElement_,this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.block_.RTL)for(var e,i=this.paragraphElement_.getBBox().width,n=0;e=this.paragraphElement_.childNodes[n];n++)e.setAttribute("text-anchor","end"),e.setAttribute("x",i+t.Bubble.BORDER_WIDTH);this.applyColour()},t.Warning.prototype.disposeBubble=function(){this.bubble_.dispose(),this.paragraphElement_=this.body_=this.bubble_=null},t.Warning.prototype.setText=function(t,e){this.text_[e]!=t&&(t?this.text_[e]=t:delete this.text_[e],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},t.Warning.prototype.getText=function(){var t,e=[];for(t in this.text_)e.push(this.text_[t]);return e.join("\n")},t.Warning.prototype.dispose=function(){this.block_.warning=null,t.Icon.prototype.dispose.call(this)},t.Comment=function(e){t.Comment.superClass_.constructor.call(this,e),this.model_=e.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},t.utils.object.inherits(t.Comment,t.Icon),t.Comment.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},e)},t.Comment.prototype.createEditor_=function(){this.foreignObject_=t.utils.dom.createSvgElement(t.utils.Svg.FOREIGNOBJECT,{x:t.Bubble.BORDER_WIDTH,y:t.Bubble.BORDER_WIDTH},null);var e=document.createElementNS(t.utils.dom.HTML_NS,"body");e.setAttribute("xmlns",t.utils.dom.HTML_NS),e.className="blocklyMinimalBody";var i=this.textarea_=document.createElementNS(t.utils.dom.HTML_NS,"textarea");return i.className="blocklyCommentTextarea",i.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),i.value=this.model_.text,this.resizeTextarea_(),e.appendChild(i),this.foreignObject_.appendChild(e),this.onMouseUpWrapper_=t.bindEventWithChecks_(i,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=t.bindEventWithChecks_(i,"wheel",this,(function(t){t.stopPropagation()})),this.onChangeWrapper_=t.bindEventWithChecks_(i,"change",this,(function(e){this.cachedText_!=this.model_.text&&t.Events.fire(new t.Events.BlockChange(this.block_,"comment",null,this.cachedText_,this.model_.text))})),this.onInputWrapper_=t.bindEventWithChecks_(i,"input",this,(function(t){this.model_.text=i.value})),setTimeout(i.focus.bind(i),0),this.foreignObject_},t.Comment.prototype.updateEditable=function(){t.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},t.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},t.Comment.prototype.resizeTextarea_=function(){var e=this.model_.size,i=2*t.Bubble.BORDER_WIDTH,n=e.width-i;e=e.height-i,this.foreignObject_.setAttribute("width",n),this.foreignObject_.setAttribute("height",e),this.textarea_.style.width=n-4+"px",this.textarea_.style.height=e-4+"px"},t.Comment.prototype.setVisible=function(e){e!=this.isVisible()&&(t.Events.fire(new t.Events.Ui(this.block_,"commentOpen",!e,e)),(this.model_.pinned=e)?this.createBubble_():this.disposeBubble_())},t.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||t.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},t.Comment.prototype.createEditableBubble_=function(){this.bubble_=new t.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},t.Comment.prototype.createNonEditableBubble_=function(){t.Warning.prototype.createBubble.call(this)},t.Comment.prototype.disposeBubble_=function(){this.paragraphElement_?t.Warning.prototype.disposeBubble.call(this):(this.onMouseUpWrapper_&&(t.unbindEvent_(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(t.unbindEvent_(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(t.unbindEvent_(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(t.unbindEvent_(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.foreignObject_=this.textarea_=this.bubble_=null)},t.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},t.Comment.prototype.getBubbleSize=function(){return this.model_.size},t.Comment.prototype.setBubbleSize=function(t,e){this.bubble_?this.bubble_.setBubbleSize(t,e):(this.model_.size.width=t,this.model_.size.height=e)},t.Comment.prototype.getText=function(){return t.utils.deprecation.warn("Comment.prototype.getText","August 2019","December 2020","block.getCommentText"),this.model_.text||""},t.Comment.prototype.setText=function(e){t.utils.deprecation.warn("Comment.prototype.setText","August 2019","December 2020","block.setCommentText"),this.model_.text!=e&&(this.model_.text=e,this.updateText())},t.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},t.Comment.prototype.dispose=function(){this.block_.comment=null,t.Icon.prototype.dispose.call(this)},t.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,overflow: hidden;,}".split(",")),t.FlyoutCursor=function(){t.FlyoutCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.FlyoutCursor,t.Cursor),t.FlyoutCursor.prototype.onBlocklyAction=function(e){switch(e.name){case t.navigation.actionNames.PREVIOUS:return this.prev(),!0;case t.navigation.actionNames.NEXT:return this.next(),!0;default:return!1}},t.FlyoutCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=t.next())&&this.setCurNode(t),t):null},t.FlyoutCursor.prototype.in=function(){return null},t.FlyoutCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=t.prev())&&this.setCurNode(t),t):null},t.FlyoutCursor.prototype.out=function(){return null},t.Flyout=function(e){e.getMetrics=this.getMetrics_.bind(this),e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new t.WorkspaceSvg(e),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.RTL=!!e.RTL,this.horizontalLayout=!1,this.toolboxPosition_=e.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},t.Flyout.prototype.autoClose=!0,t.Flyout.prototype.isVisible_=!1,t.Flyout.prototype.containerVisible_=!0,t.Flyout.prototype.CORNER_RADIUS=8,t.Flyout.prototype.MARGIN=t.Flyout.prototype.CORNER_RADIUS,t.Flyout.prototype.GAP_X=3*t.Flyout.prototype.MARGIN,t.Flyout.prototype.GAP_Y=3*t.Flyout.prototype.MARGIN,t.Flyout.prototype.SCROLLBAR_PADDING=2,t.Flyout.prototype.width_=0,t.Flyout.prototype.height_=0,t.Flyout.prototype.dragAngleRange_=70,t.Flyout.prototype.createDom=function(e){return this.svgGroup_=t.utils.dom.createSvgElement(e,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.workspace_.getMarkerManager().setCursor(new t.FlyoutCursor),this.svgGroup_},t.Flyout.prototype.init=function(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.scrollbar=new t.Scrollbar(this.workspace_,this.horizontalLayout,!1,"blocklyFlyoutScrollbar"),this.hide(),Array.prototype.push.apply(this.eventWrappers_,t.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,t.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap()},t.Flyout.prototype.dispose=function(){this.hide(),t.unbindEvent_(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},t.Flyout.prototype.getWidth=function(){return this.width_},t.Flyout.prototype.getHeight=function(){return this.height_},t.Flyout.prototype.getWorkspace=function(){return this.workspace_},t.Flyout.prototype.isVisible=function(){return this.isVisible_},t.Flyout.prototype.setVisible=function(t){var e=t!=this.isVisible();this.isVisible_=t,e&&this.updateDisplay_()},t.Flyout.prototype.setContainerVisible=function(t){var e=t!=this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},t.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.scrollbar.setContainerVisible(t)},t.Flyout.prototype.positionAt_=function(e,i,n,o){this.svgGroup_.setAttribute("width",e),this.svgGroup_.setAttribute("height",i),"svg"==this.svgGroup_.tagName?t.utils.dom.setCssTransform(this.svgGroup_,"translate("+n+"px,"+o+"px)"):this.svgGroup_.setAttribute("transform","translate("+n+","+o+")"),this.scrollbar&&(this.scrollbar.setOrigin(n,o),this.scrollbar.resize(),this.scrollbar.setPosition(this.scrollbar.position.x,this.scrollbar.position.y))},t.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var e,i=0;e=this.listeners_[i];i++)t.unbindEvent_(e);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},t.Flyout.prototype.show=function(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof e&&(e=this.getDynamicCategoryContents_(e)),this.setVisible(!0),e=t.utils.toolbox.convertFlyoutDefToJsonArray(e),e=this.createFlyoutInfo_(e),this.layout_(e.contents,e.gaps),this.listeners_.push(t.bindEventWithChecks_(this.svgBackground_,"mouseover",this,(function(){for(var t,e=this.workspace_.getTopBlocks(!1),i=0;t=e[i];i++)t.removeSelect()}))),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},t.Flyout.prototype.createFlyoutInfo_=function(e){var i=[],n=[];this.permanentlyDisabled_.length=0;for(var o,r=this.horizontalLayout?this.GAP_X:this.GAP_Y,s=0;o=e[s];s++)switch(o.custom&&(o=this.getDynamicCategoryContents_(o.custom),o=t.utils.toolbox.convertFlyoutDefToJsonArray(o),e.splice.apply(e,[s,1].concat(o)),o=e[s]),o.kind.toUpperCase()){case"BLOCK":var a=o,l=this.getBlockXml_(a);o=this.createBlock_(l),a=parseInt(a.gap||l.getAttribute("gap"),10),n.push(isNaN(a)?r:a),i.push({type:"block",block:o});break;case"SEP":this.addSeparatorGap_(o,n,r);break;case"LABEL":o=this.createButton_(o,!0),i.push({type:"button",button:o}),n.push(r);break;case"BUTTON":o=this.createButton_(o,!1),i.push({type:"button",button:o}),n.push(r)}return{contents:i,gaps:n}},t.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},t.Flyout.prototype.createButton_=function(e,i){if(!t.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new t.FlyoutButton(this.workspace_,this.targetWorkspace,e,i)},t.Flyout.prototype.createBlock_=function(e){return(e=t.Xml.domToBlock(e,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(e),e},t.Flyout.prototype.getBlockXml_=function(e){var i=null,n=e.blockxml;if(n&&"string"!=typeof n?i=n:n&&"string"==typeof n?(i=t.Xml.textToDom(n),e.blockxml=i):e.type&&((i=t.utils.xml.createElement("xml")).setAttribute("type",e.type),i.setAttribute("disabled",e.disabled),e.blockxml=i),!i)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return i},t.Flyout.prototype.addSeparatorGap_=function(t,e,i){t=parseInt(t.gap,10),!isNaN(t)&&0<e.length?e[e.length-1]=t:e.push(i)},t.Flyout.prototype.clearOldBlocks_=function(){for(var e,i=this.workspace_.getTopBlocks(!1),n=0;e=i[n];n++)e.workspace==this.workspace_&&e.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(i=this.mats_[n])&&(t.Tooltip.unbindMouseEvents(i),t.utils.dom.removeNode(i));for(n=this.mats_.length=0;i=this.buttons_[n];n++)i.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},t.Flyout.prototype.addBlockListeners_=function(e,i,n){this.listeners_.push(t.bindEventWithChecks_(e,"mousedown",null,this.blockMouseDown_(i))),this.listeners_.push(t.bindEventWithChecks_(n,"mousedown",null,this.blockMouseDown_(i))),this.listeners_.push(t.bindEvent_(e,"mouseenter",i,i.addSelect)),this.listeners_.push(t.bindEvent_(e,"mouseleave",i,i.removeSelect)),this.listeners_.push(t.bindEvent_(n,"mouseenter",i,i.addSelect)),this.listeners_.push(t.bindEvent_(n,"mouseleave",i,i.removeSelect))},t.Flyout.prototype.blockMouseDown_=function(t){var e=this;return function(i){var n=e.targetWorkspace.getGesture(i);n&&(n.setStartBlock(t),n.handleFlyoutStart(i,e))}},t.Flyout.prototype.onMouseDown_=function(t){var e=this.targetWorkspace.getGesture(t);e&&e.handleFlyoutStart(t,this)},t.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},t.Flyout.prototype.createBlock=function(e){var i=null;t.Events.disable();var n=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{i=this.placeNewBlock_(e)}finally{t.Events.enable()}if(t.hideChaff(),e=t.Variables.getAddedVariables(this.targetWorkspace,n),t.Events.isEnabled()){for(t.Events.setGroup(!0),n=0;n<e.length;n++)t.Events.fire(new t.Events.VarCreate(e[n]));t.Events.fire(new t.Events.Create(i))}return this.autoClose?this.hide():this.filterForCapacity_(),i},t.Flyout.prototype.initFlyoutButton_=function(e,i,n){var o=e.createDom();e.moveTo(i,n),e.show(),this.listeners_.push(t.bindEventWithChecks_(o,"mousedown",this,this.onMouseDown_)),this.buttons_.push(e)},t.Flyout.prototype.createRect_=function(e,i,n,o,r){return(i=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{"fill-opacity":0,x:i,y:n,height:o.height,width:o.width},null)).tooltip=e,t.Tooltip.bindMouseEvents(i),this.workspace_.getCanvas().insertBefore(i,e.getSvgRoot()),e.flyoutRect_=i,this.mats_[r]=i},t.Flyout.prototype.moveRectToBlock_=function(t,e){var i=e.getHeightWidth();t.setAttribute("width",i.width),t.setAttribute("height",i.height),e=e.getRelativeToSurfaceXY(),t.setAttribute("y",e.y),t.setAttribute("x",this.RTL?e.x-i.width:e.x)},t.Flyout.prototype.filterForCapacity_=function(){for(var e,i=this.workspace_.getTopBlocks(!1),n=0;e=i[n];n++)if(-1==this.permanentlyDisabled_.indexOf(e))for(var o=this.targetWorkspace.isCapacityAvailable(t.utils.getBlockTypeCounts(e));e;)e.setEnabled(o),e=e.getNextBlock()},t.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},t.Flyout.prototype.isScrollable=function(){return!!this.scrollbar&&this.scrollbar.isVisible()},t.Flyout.prototype.placeNewBlock_=function(e){var i=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered.");var n=t.Xml.blockToDom(e,!0);if(i.setResizesEnabled(!1),!(n=t.Xml.domToBlock(n,i)).getSvgRoot())throw Error("block is not rendered.");var o=i.getOriginOffsetInPixels(),r=this.workspace_.getOriginOffsetInPixels();return(e=e.getRelativeToSurfaceXY()).scale(this.workspace_.scale),e=t.utils.Coordinate.sum(r,e),(o=t.utils.Coordinate.difference(e,o)).scale(1/i.scale),n.moveBy(o.x,o.y),n},t.Flyout.prototype.onBlocklyAction=function(t){return this.workspace_.getCursor().onBlocklyAction(t)},t.HorizontalFlyout=function(e){t.HorizontalFlyout.superClass_.constructor.call(this,e),this.horizontalLayout=!0},t.utils.object.inherits(t.HorizontalFlyout,t.Flyout),t.HorizontalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var e=this.workspace_.getCanvas().getBBox()}catch(t){e={height:0,y:0,width:0,x:0}}var i=this.SCROLLBAR_PADDING,n=this.SCROLLBAR_PADDING;this.toolboxPosition_==t.TOOLBOX_AT_BOTTOM&&(i=0);var o=this.height_;return this.toolboxPosition_==t.TOOLBOX_AT_TOP&&(o-=this.SCROLLBAR_PADDING),{contentHeight:(e.height+2*this.MARGIN)*this.workspace_.scale,contentWidth:(e.width+2*this.MARGIN)*this.workspace_.scale,contentTop:0,contentLeft:0,viewHeight:o,viewWidth:this.width_-2*this.SCROLLBAR_PADDING,viewTop:-this.workspace_.scrollY,viewLeft:-this.workspace_.scrollX,absoluteTop:i,absoluteLeft:n}},t.HorizontalFlyout.prototype.setMetrics_=function(t){var e=this.getMetrics_();e&&("number"==typeof t.x&&(this.workspace_.scrollX=-e.contentWidth*t.x),this.workspace_.translate(this.workspace_.scrollX+e.absoluteLeft,this.workspace_.scrollY+e.absoluteTop))},t.HorizontalFlyout.prototype.position=function(){if(this.isVisible()){var e=this.targetWorkspace.getMetrics();e&&(this.width_=e.viewWidth,this.setBackgroundPath_(e.viewWidth-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),this.positionAt_(this.width_,this.height_,0,this.targetWorkspace.toolboxPosition==this.toolboxPosition_?e.toolboxHeight?this.toolboxPosition_==t.TOOLBOX_AT_TOP?e.toolboxHeight:e.viewHeight-this.height_:this.toolboxPosition_==t.TOOLBOX_AT_TOP?0:e.viewHeight:this.toolboxPosition_==t.TOOLBOX_AT_TOP?0:e.viewHeight+e.absoluteTop-this.height_))}},t.HorizontalFlyout.prototype.setBackgroundPath_=function(e,i){var n=this.toolboxPosition_==t.TOOLBOX_AT_TOP,o=["M 0,"+(n?0:this.CORNER_RADIUS)];n?(o.push("h",e+2*this.CORNER_RADIUS),o.push("v",i),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",-e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),o.push("h",e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",i),o.push("h",-e-2*this.CORNER_RADIUS)),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))},t.HorizontalFlyout.prototype.scrollToStart=function(){this.scrollbar.set(this.RTL?1/0:0)},t.HorizontalFlyout.prototype.wheel_=function(e){var i=t.utils.getScrollDeltaPixels(e),n=i.x||i.y;n&&(n=(i=this.getMetrics_()).viewLeft+n,n=Math.min(n,i.contentWidth-i.viewWidth),n=Math.max(n,0),this.scrollbar.set(n),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()),e.preventDefault(),e.stopPropagation()},t.HorizontalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace.scale;var i=this.MARGIN,n=i+this.tabWidth_;this.RTL&&(t=t.reverse());for(var o,r=0;o=t[r];r++)if("block"==o.type){for(var s,a=(o=o.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;o.render(),a=o.getSvgRoot(),l=o.getHeightWidth(),s=o.outputConnection?this.tabWidth_:0,s=this.RTL?n+l.width:n-s,o.moveBy(s,i),s=this.createRect_(o,s,i,l,r),n+=l.width+e[r],this.addBlockListeners_(a,o,s)}else"button"==o.type&&(this.initFlyoutButton_(o.button,n,i),n+=o.button.width+e[r])},t.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=this.dragAngleRange_;return t<90+e&&t>90-e||t>-90-e&&t<-90+e},t.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),i=e.top;return this.toolboxPosition_==t.TOOLBOX_AT_TOP?new t.utils.Rect(-1e9,i+e.height,-1e9,1e9):new t.utils.Rect(i,1e9,-1e9,1e9)},t.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace.scale;for(var e,i=0,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++)i=Math.max(i,e.getHeightWidth().height);if(i+=1.5*this.MARGIN,i*=this.workspace_.scale,i+=t.Scrollbar.scrollbarThickness,this.height_!=i){for(o=0;e=n[o];o++)e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=t.TOOLBOX_AT_TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+i),this.height_=i,this.position()}},t.registry.register(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,t.registry.DEFAULT,t.HorizontalFlyout),t.VerticalFlyout=function(e){t.VerticalFlyout.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.VerticalFlyout,t.Flyout),t.VerticalFlyout.registryName="verticalFlyout",t.VerticalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var t=this.workspace_.getCanvas().getBBox()}catch(e){t={height:0,y:0,width:0,x:0}}var e=this.SCROLLBAR_PADDING,i=this.height_-2*this.SCROLLBAR_PADDING,n=this.width_;return this.RTL||(n-=this.SCROLLBAR_PADDING),{contentHeight:t.height*this.workspace_.scale+2*this.MARGIN,contentWidth:t.width*this.workspace_.scale+2*this.MARGIN,contentTop:t.y,contentLeft:t.x,viewHeight:i,viewWidth:n,viewTop:-this.workspace_.scrollY+t.y,viewLeft:-this.workspace_.scrollX,absoluteTop:e,absoluteLeft:0}},t.VerticalFlyout.prototype.setMetrics_=function(t){var e=this.getMetrics_();e&&("number"==typeof t.y&&(this.workspace_.scrollY=-e.contentHeight*t.y),this.workspace_.translate(this.workspace_.scrollX+e.absoluteLeft,this.workspace_.scrollY+e.absoluteTop))},t.VerticalFlyout.prototype.position=function(){if(this.isVisible()){var e=this.targetWorkspace.getMetrics();e&&(this.height_=e.viewHeight,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,e.viewHeight-2*this.CORNER_RADIUS),this.positionAt_(this.width_,this.height_,this.targetWorkspace.toolboxPosition==this.toolboxPosition_?e.toolboxWidth?this.toolboxPosition_==t.TOOLBOX_AT_LEFT?e.toolboxWidth:e.viewWidth-this.width_:this.toolboxPosition_==t.TOOLBOX_AT_LEFT?0:e.viewWidth:this.toolboxPosition_==t.TOOLBOX_AT_LEFT?0:e.viewWidth+e.absoluteLeft-this.width_,0))}},t.VerticalFlyout.prototype.setBackgroundPath_=function(e,i){var n=this.toolboxPosition_==t.TOOLBOX_AT_RIGHT,o=e+this.CORNER_RADIUS;(o=["M "+(n?o:0)+",0"]).push("h",n?-e:e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",Math.max(0,i)),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",n?e:-e),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))},t.VerticalFlyout.prototype.scrollToStart=function(){this.scrollbar.set(0)},t.VerticalFlyout.prototype.wheel_=function(e){var i=t.utils.getScrollDeltaPixels(e);if(i.y){var n=this.getMetrics_();i=n.viewTop-n.contentTop+i.y,i=Math.min(i,n.contentHeight-n.viewHeight),i=Math.max(i,0),this.scrollbar.set(i),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},t.VerticalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace.scale;for(var i,n=this.MARGIN,o=this.RTL?n:n+this.tabWidth_,r=0;i=t[r];r++)if("block"==i.type){for(var s,a=(i=i.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;i.render(),a=i.getSvgRoot(),l=i.getHeightWidth(),s=i.outputConnection?o-this.tabWidth_:o,i.moveBy(s,n),s=this.createRect_(i,this.RTL?s-l.width:s,n,l,r),this.addBlockListeners_(a,i,s),n+=l.height+e[r]}else"button"==i.type&&(this.initFlyoutButton_(i.button,o,n),n+=i.button.height+e[r])},t.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=this.dragAngleRange_;return t<e&&t>-e||t<-180+e||t>180-e},t.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),i=e.left;return this.toolboxPosition_==t.TOOLBOX_AT_LEFT?new t.utils.Rect(-1e9,1e9,-1e9,i+e.width):new t.utils.Rect(-1e9,1e9,i,1e9)},t.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace.scale;for(var e,i=0,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++){var r=e.getHeightWidth().width;e.outputConnection&&(r-=this.tabWidth_),i=Math.max(i,r)}for(o=0;e=this.buttons_[o];o++)i=Math.max(i,e.width);if(i+=1.5*this.MARGIN+this.tabWidth_,i*=this.workspace_.scale,i+=t.Scrollbar.scrollbarThickness,this.width_!=i){for(o=0;e=n[o];o++){if(this.RTL){r=e.getRelativeToSurfaceXY().x;var s=i/this.workspace_.scale-this.MARGIN;e.outputConnection||(s-=this.tabWidth_),e.moveBy(s-r,0)}e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e)}if(this.RTL)for(o=0;e=this.buttons_[o];o++)n=e.getPosition().y,e.moveTo(i/this.workspace_.scale-e.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=t.TOOLBOX_AT_LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+i,this.targetWorkspace.scrollY),this.width_=i,this.position()}},t.registry.register(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.registry.DEFAULT,t.VerticalFlyout),t.FlyoutButton=function(e,i,n,o){this.workspace_=e,this.targetWorkspace_=i,this.text_=n.text,this.position_=new t.utils.Coordinate(0,0),this.isLabel_=o,this.callbackKey_=n.callbackKey||n.callbackkey,this.cssClass_=n["web-class"]||null,this.onMouseUpWrapper_=null,this.info=n},t.FlyoutButton.MARGIN_X=5,t.FlyoutButton.MARGIN_Y=2,t.FlyoutButton.prototype.width=0,t.FlyoutButton.prototype.height=0,t.FlyoutButton.prototype.createDom=function(){var e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(e+=" "+this.cssClass_),this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:e},this.workspace_.getCanvas()),!this.isLabel_)var i=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);e=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),o=t.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(o+="‏"),n.textContent=o,this.isLabel_&&(this.svgText_=n,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var r=t.utils.style.getComputedStyle(n,"fontSize"),s=t.utils.style.getComputedStyle(n,"fontWeight"),a=t.utils.style.getComputedStyle(n,"fontFamily");return this.width=t.utils.dom.getFastTextWidthWithSizeString(n,r,s,a),o=t.utils.dom.measureFontMetrics(o,r,s,a),this.height=o.height,this.isLabel_||(this.width+=2*t.FlyoutButton.MARGIN_X,this.height+=2*t.FlyoutButton.MARGIN_Y,i.setAttribute("width",this.width),i.setAttribute("height",this.height)),e.setAttribute("width",this.width),e.setAttribute("height",this.height),n.setAttribute("x",this.width/2),n.setAttribute("y",this.height/2-o.height/2+o.baseline),this.updateTransform_(),this.onMouseUpWrapper_=t.bindEventWithChecks_(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},t.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},t.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},t.FlyoutButton.prototype.moveTo=function(t,e){this.position_.x=t,this.position_.y=e,this.updateTransform_()},t.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},t.FlyoutButton.prototype.getPosition=function(){return this.position_},t.FlyoutButton.prototype.getButtonText=function(){return this.text_},t.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},t.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&t.unbindEvent_(this.onMouseUpWrapper_),this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},t.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},t.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),t.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},t.Generator.NAME_TYPE="generated_function",t.Generator.prototype.INFINITE_LOOP_TRAP=null,t.Generator.prototype.STATEMENT_PREFIX=null,t.Generator.prototype.STATEMENT_SUFFIX=null,t.Generator.prototype.INDENT="  ",t.Generator.prototype.COMMENT_WRAP=60,t.Generator.prototype.ORDER_OVERRIDES=[],t.Generator.prototype.workspaceToCode=function(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=t.getMainWorkspace());var i=[];this.init(e),e=e.getTopBlocks(!0);for(var n,o=0;n=e[o];o++){var r=this.blockToCode(n);Array.isArray(r)&&(r=r[0]),r&&(n.outputConnection&&(r=this.scrubNakedValue(r),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,n)+r),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,n))),i.push(r))}return i=i.join("\n"),(i=(i=(i=this.finish(i)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},t.Generator.prototype.prefixLines=function(t,e){return e+t.replace(/(?!\n$)\n/g,"\n"+e)},t.Generator.prototype.allNestedComments=function(t){var e=[];t=t.getDescendants(!0);for(var i=0;i<t.length;i++){var n=t[i].getCommentText();n&&e.push(n)}return e.length&&e.push(""),e.join("\n")},t.Generator.prototype.blockToCode=function(t,e){if(!t)return"";if(!t.isEnabled())return e?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return e?"":this.blockToCode(t.getChildren(!1)[0]);var i=this[t.type];if("function"!=typeof i)throw Error('Language "'+this.name_+'" does not know how to generate  code for block type "'+t.type+'".');if(i=i.call(t,t),Array.isArray(i)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,i[0],e),i[1]]}if("string"==typeof i)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(i=this.injectId(this.STATEMENT_PREFIX,t)+i),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(i+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,i,e);if(null===i)return"";throw SyntaxError("Invalid code generated: "+i)},t.Generator.prototype.valueToCode=function(t,e,i){if(isNaN(i))throw TypeError("Expecting valid order from block: "+t.type);var n=t.getInputTargetBlock(e);if(!n)return"";if(""===(e=this.blockToCode(n)))return"";if(!Array.isArray(e))throw TypeError("Expecting tuple from value block: "+n.type);if(t=e[0],e=e[1],isNaN(e))throw TypeError("Expecting valid order from value block: "+n.type);if(!t)return"";n=!1;var o=Math.floor(i),r=Math.floor(e);if(o<=r&&(o!=r||0!=o&&99!=o))for(n=!0,o=0;o<this.ORDER_OVERRIDES.length;o++)if(this.ORDER_OVERRIDES[o][0]==i&&this.ORDER_OVERRIDES[o][1]==e){n=!1;break}return n&&(t="("+t+")"),t},t.Generator.prototype.statementToCode=function(t,e){if(t=t.getInputTargetBlock(e),"string"!=typeof(e=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return e&&(e=this.prefixLines(e,this.INDENT)),e},t.Generator.prototype.addLoopTrap=function(t,e){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,e),this.INDENT)+t),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,e),this.INDENT)+t),this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,e),this.INDENT)),t},t.Generator.prototype.injectId=function(t,e){return e=e.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+e+"'")},t.Generator.prototype.RESERVED_WORDS_="",t.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},t.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",t.Generator.prototype.provideFunction_=function(e,i){if(!this.definitions_[e]){var n,o=this.variableDB_.getDistinctName(e,t.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[e]=o,i=i.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);n!=i;)n=i,i=i.replace(/^(( {2})*) {2}/gm,"$1\0");i=i.replace(/\0/g,this.INDENT),this.definitions_[e]=i}return this.functionNames_[e]},t.Generator.prototype.init=function(t){},t.Generator.prototype.scrub_=function(t,e,i){return e},t.Generator.prototype.finish=function(t){return t},t.Generator.prototype.scrubNakedValue=function(t){return t},t.ToolboxItem=function(e,i,n){this.id_=e.toolboxitemid||t.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=n||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=i,this.workspace_=this.parentToolbox_.getWorkspace()},t.ToolboxItem.prototype.init=function(){},t.ToolboxItem.prototype.getDiv=function(){return null},t.ToolboxItem.prototype.getId=function(){return this.id_},t.ToolboxItem.prototype.getParent=function(){return null},t.ToolboxItem.prototype.getLevel=function(){return this.level_},t.ToolboxItem.prototype.isSelectable=function(){return!1},t.ToolboxItem.prototype.isCollapsible=function(){return!1},t.ToolboxItem.prototype.dispose=function(){},t.ToolboxCategory=function(e,i,n){t.ToolboxCategory.superClass_.constructor.call(this,e,i,n),this.name_=t.utils.replaceMessageReferences(e.name),this.colour_=this.getColour_(e),this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),t.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(e)},t.utils.object.inherits(t.ToolboxCategory,t.ToolboxItem),t.ToolboxCategory.registrationName="category",t.ToolboxCategory.nestedPadding=19,t.ToolboxCategory.borderWidth=8,t.ToolboxCategory.defaultBackgroundColour="#57e",t.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},t.ToolboxCategory.prototype.parseContents_=function(t){var e=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(e){t=0;for(var i;i=e[t];t++)this.flyoutItems_.push(i)}},t.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},t.ToolboxCategory.prototype.createDom_=function(){this.htmlDiv_=this.createContainer_(),t.utils.aria.setRole(this.htmlDiv_,t.utils.aria.Role.TREEITEM),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.SELECTED,!1),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.setAttribute("id",this.id_),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),t.utils.aria.setRole(this.iconDom_,t.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_);var e=this.createLabelDom_(this.name_);return this.rowContents_.appendChild(e),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.LABELLEDBY,e.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},t.ToolboxCategory.prototype.createContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.container),e},t.ToolboxCategory.prototype.createRowContainer_=function(){var e=document.createElement("div");t.utils.dom.addClass(e,this.cssConfig_.row);var i=t.ToolboxCategory.nestedPadding*this.getLevel();return i=i.toString()+"px",this.workspace_.RTL?e.style.paddingRight=i:e.style.paddingLeft=i,e},t.ToolboxCategory.prototype.createRowContentsContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.rowcontentcontainer),e},t.ToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||t.utils.dom.addClass(e,this.cssConfig_.icon),e.style.display="inline-block",e},t.ToolboxCategory.prototype.createLabelDom_=function(e){var i=document.createElement("span");return i.setAttribute("id",this.getId()+".label"),i.textContent=e,t.utils.dom.addClass(i,this.cssConfig_.label),i},t.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},t.ToolboxCategory.prototype.addColourBorder_=function(e){e&&(e=t.ToolboxCategory.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)},t.ToolboxCategory.prototype.getColour_=function(t){var e=t.categorystyle||t.categoryStyle;return(t=t.colour)&&e?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):e?this.getColourfromStyle_(e):this.parseColour_(t)},t.ToolboxCategory.prototype.getColourfromStyle_=function(t){var e=this.workspace_.getTheme();if(t&&e){if((e=e.categoryStyles[t])&&e.colour)return this.parseColour_(e.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},t.ToolboxCategory.prototype.parseColour_=function(e){if(null==(e=t.utils.replaceMessageReferences(e))||""===e)return"";var i=Number(e);return isNaN(i)?(i=t.utils.colour.parse(e))?i:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):t.hueToHex(i)},t.ToolboxCategory.prototype.openIcon_=function(e){e&&(t.utils.dom.removeClasses(e,this.cssConfig_.closedicon),t.utils.dom.addClass(e,this.cssConfig_.openicon))},t.ToolboxCategory.prototype.closeIcon_=function(e){e&&(t.utils.dom.removeClasses(e,this.cssConfig_.openicon),t.utils.dom.addClass(e,this.cssConfig_.closedicon))},t.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},t.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},t.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},t.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},t.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},t.ToolboxCategory.prototype.onClick=function(t){},t.ToolboxCategory.prototype.setSelected=function(e){if(e){var i=this.parseColour_(t.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||i,t.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",t.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.SELECTED,e)},t.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},t.ToolboxCategory.prototype.getName=function(){return this.name_},t.ToolboxCategory.prototype.getParent=function(){return this.parent_},t.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},t.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},t.ToolboxCategory.prototype.updateFlyoutContents=function(e){this.flyoutItems_=[],"string"==typeof e?this.toolboxItemDef_.custom=e:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=t.utils.toolbox.convertFlyoutDefToJsonArray(e)),this.parseContents_(this.toolboxItemDef_)},t.ToolboxCategory.prototype.dispose=function(){t.utils.dom.removeNode(this.htmlDiv_)},t.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.ToolboxCategory.registrationName,t.ToolboxCategory),t.ToolboxSeparator=function(e,i){t.ToolboxSeparator.superClass_.constructor.call(this,e,i),this.cssConfig_={container:"blocklyTreeSeparator"},t.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig)},t.utils.object.inherits(t.ToolboxSeparator,t.ToolboxItem),t.ToolboxSeparator.registrationName="sep",t.ToolboxSeparator.prototype.init=function(){this.createDom_()},t.ToolboxSeparator.prototype.createDom_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.container),this.htmlDiv_=e},t.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},t.ToolboxSeparator.prototype.dispose=function(){t.utils.dom.removeNode(this.htmlDiv_)},t.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.ToolboxSeparator.registrationName,t.ToolboxSeparator),t.CollapsibleToolboxCategory=function(e,i,n){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],t.CollapsibleToolboxCategory.superClass_.constructor.call(this,e,i,n)},t.utils.object.inherits(t.CollapsibleToolboxCategory,t.ToolboxCategory),t.CollapsibleToolboxCategory.registrationName="collapsibleCategory",t.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var e=t.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return e.contents="blocklyToolboxContents",e},t.CollapsibleToolboxCategory.prototype.parseContents_=function(e){var i=e.contents,n=!0;if(e.custom)this.flyoutItems_=e.custom;else if(i){e=0;for(var o;o=i[e];e++)!t.registry.hasItem(t.registry.Type.TOOLBOX_ITEM,o.kind)||o.kind.toLowerCase()==t.ToolboxSeparator.registrationName&&n?(this.flyoutItems_.push(o),n=!0):(this.createToolboxItem_(o),n=!1)}},t.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(e){var i=e.kind;"CATEGORY"==i.toUpperCase()&&t.utils.toolbox.isCategoryCollapsible(e)&&(i=t.CollapsibleToolboxCategory.registrationName),e=new(t.registry.getClass(t.registry.Type.TOOLBOX_ITEM,i))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)},t.CollapsibleToolboxCategory.prototype.init=function(){t.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},t.CollapsibleToolboxCategory.prototype.createDom_=function(){t.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),t.utils.aria.setRole(this.subcategoriesDiv_,t.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},t.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||(t.utils.dom.addClass(e,this.cssConfig_.icon),e.style.visibility="visible"),e.style.display="inline-block",e},t.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(e){var i=document.createElement("div");t.utils.dom.addClass(i,this.cssConfig_.contents);for(var n=0;n<e.length;n++){var o=e[n];o.init(),o=o.getDiv(),i.appendChild(o)}return i},t.CollapsibleToolboxCategory.prototype.setExpanded=function(e){this.expanded_!=e&&((this.expanded_=e)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize())},t.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var e,i=0;e=this.getChildToolboxItems()[i];i++)e.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},t.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},t.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},t.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},t.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},t.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.CollapsibleToolboxCategory.registrationName,t.CollapsibleToolboxCategory),t.Toolbox=function(t){this.workspace_=t,this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_={},this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},t.Toolbox.prototype.init=function(){var e=this.workspace_,i=e.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),t.utils.dom.insertAfter(this.flyout_.createDom("svg"),i),this.flyout_.init(e),this.render(this.toolboxDef_),(e=e.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color")},t.Toolbox.prototype.createDom_=function(e){e=e.getParentSvg();var i=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,t.utils.aria.setRole(this.contentsDiv_,t.utils.aria.Role.TREE),i.appendChild(this.contentsDiv_),e.parentNode.insertBefore(i,e),this.attachEvents_(i,this.contentsDiv_),i},t.Toolbox.prototype.createContainer_=function(){var e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),t.utils.dom.addClass(e,"blocklyToolboxDiv"),t.utils.dom.addClass(e,"blocklyNonSelectable"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e},t.Toolbox.prototype.createContentsContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e},t.Toolbox.prototype.attachEvents_=function(e,i){e=t.bindEventWithChecks_(e,"mousedown",this,this.onClick_,!1,!0),this.boundEvents_.push(e),i=t.bindEventWithChecks_(i,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(i)},t.Toolbox.prototype.onClick_=function(e){if(t.utils.isRightButton(e)||e.target==this.HtmlDiv)t.hideChaff(!1);else{var i=e.srcElement.getAttribute("id");i&&(i=this.getToolboxItemById(i)).isSelectable()&&(this.setSelectedItem(i),i.onClick(e)),t.hideChaff(!0)}t.Touch.clearTouchIdentifier()},t.Toolbox.prototype.onKeyDown_=function(e){var i=!1;switch(e.keyCode){case t.utils.KeyCodes.DOWN:i=this.selectNext_();break;case t.utils.KeyCodes.UP:i=this.selectPrevious_();break;case t.utils.KeyCodes.LEFT:i=this.selectParent_();break;case t.utils.KeyCodes.RIGHT:i=this.selectChild_();break;case t.utils.KeyCodes.ENTER:case t.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),i=!0);break;default:i=!1}i&&e.preventDefault()},t.Toolbox.prototype.createFlyout_=function(){var e=this.workspace_,i=new t.Options({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides});if(i.toolboxPosition=e.options.toolboxPosition,!(e=e.horizontalLayout?t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.options):t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.options)))throw Error("Blockly.VerticalFlyout, Blockly.HorizontalFlyout or your own custom flyout must be required.");return new e(i)},t.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var e=0;e<this.contents_.length;e++){var i=this.contents_[e];i&&i.dispose()}this.contents_=[],this.contentMap_={},this.renderContents_(t.contents),this.position()},t.Toolbox.prototype.renderContents_=function(t){for(var e,i=document.createDocumentFragment(),n=0;e=t[n];n++)this.createToolboxItem_(e,i);this.contentsDiv_.appendChild(i)},t.Toolbox.prototype.createToolboxItem_=function(e,i){var n=e.kind;"CATEGORY"==n.toUpperCase()&&t.utils.toolbox.isCategoryCollapsible(e)&&(n=t.CollapsibleToolboxCategory.registrationName),(n=t.registry.getClass(t.registry.Type.TOOLBOX_ITEM,n.toLowerCase()))&&(e=new n(e,this),this.addToolboxItem_(e),e.init(),(e=e.getDiv())&&i.appendChild(e))},t.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var e,i=0;e=t.getChildToolboxItems()[i];i++)this.addToolboxItem_(e)},t.Toolbox.prototype.getToolboxItems=function(){return this.contents_},t.Toolbox.prototype.addStyle=function(e){t.utils.dom.addClass(this.HtmlDiv,e)},t.Toolbox.prototype.removeStyle=function(e){t.utils.dom.removeClass(this.HtmlDiv,e)},t.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv)return null;var e=this.HtmlDiv.getBoundingClientRect(),i=e.top,n=i+e.height,o=e.left;return e=o+e.width,this.toolboxPosition==t.utils.toolbox.Position.TOP?new t.utils.Rect(-1e7,n,-1e7,1e7):this.toolboxPosition==t.utils.toolbox.Position.BOTTOM?new t.utils.Rect(i,1e7,-1e7,1e7):this.toolboxPosition==t.utils.toolbox.Position.LEFT?new t.utils.Rect(-1e7,1e7,-1e7,e):new t.utils.Rect(-1e7,1e7,o,1e7)},t.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]},t.Toolbox.prototype.getWidth=function(){return this.width_},t.Toolbox.prototype.getHeight=function(){return this.height_},t.Toolbox.prototype.getFlyout=function(){return this.flyout_},t.Toolbox.prototype.getWorkspace=function(){return this.workspace_},t.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},t.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},t.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},t.Toolbox.prototype.position=function(){var e=this.HtmlDiv;e&&(this.horizontalLayout_?(e.style.left="0",e.style.height="auto",e.style.width="100%",this.height_=e.offsetHeight,this.toolboxPosition==t.TOOLBOX_AT_TOP?e.style.top="0":e.style.bottom="0"):(this.toolboxPosition==t.TOOLBOX_AT_RIGHT?e.style.right="0":e.style.left="0",e.style.height="100%",this.width_=e.offsetWidth),this.flyout_.position())},t.Toolbox.prototype.handleToolboxItemResize=function(){var e=this.workspace_,i=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition==t.TOOLBOX_AT_LEFT?e.scrollX+i.width:e.scrollX,this.toolboxPosition==t.TOOLBOX_AT_TOP?e.scrollY+i.height:e.scrollY),t.svgResize(e)},t.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},t.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var e=this.contents_[t];e.refreshTheme&&e.refreshTheme()}},t.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},t.Toolbox.prototype.setVisible=function(t){this.HtmlDiv.style.display=t?"block":"none"},t.Toolbox.prototype.setSelectedItem=function(t){var e=this.selectedItem_;!t&&!e||t&&!t.isSelectable()||(this.shouldDeselectItem_(e,t)&&null!=e&&this.deselectItem_(e),this.shouldSelectItem_(e,t)&&null!=t&&this.selectItem_(e,t),this.updateFlyout_(e,t),this.fireSelectEvent_(e,t))},t.Toolbox.prototype.shouldDeselectItem_=function(t,e){return null!=t&&(!t.isCollapsible()||t!=e)},t.Toolbox.prototype.shouldSelectItem_=function(t,e){return null!=e&&e!=t},t.Toolbox.prototype.deselectItem_=function(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),t.utils.aria.setState(this.contentsDiv_,t.utils.aria.State.ACTIVEDESCENDANT,"")},t.Toolbox.prototype.selectItem_=function(e,i){this.selectedItem_=i,this.previouslySelectedItem_=e,i.setSelected(!0),t.utils.aria.setState(this.contentsDiv_,t.utils.aria.State.ACTIVEDESCENDANT,i.getId())},t.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},t.Toolbox.prototype.updateFlyout_=function(t,e){(t!=e||e.isCollapsible())&&e&&e.getContents().length?(this.flyout_.show(e.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},t.Toolbox.prototype.fireSelectEvent_=function(e,i){var n=e&&e.getName(),o=i&&i.getName();e==i&&(o=null),(e=new t.Events.Ui(null,"category",n,o)).workspaceId=this.workspace_.id,t.Events.fire(e)},t.Toolbox.prototype.onBlocklyAction=function(e){if(!this.selectedItem_)return!1;switch(e.name){case t.navigation.actionNames.PREVIOUS:return this.selectPrevious_();case t.navigation.actionNames.OUT:return this.selectParent_();case t.navigation.actionNames.NEXT:return this.selectNext_();case t.navigation.actionNames.IN:return this.selectChild_();default:return!1}},t.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},t.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},t.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var e=this.contents_[t];e&&!e.isSelectable();)e=this.contents_[++t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1},t.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var e=this.contents_[t];e&&!e.isSelectable();)e=this.contents_[--t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1},t.Toolbox.prototype.dispose=function(){this.flyout_.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)t.unbindEvent_(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),t.utils.dom.removeNode(this.HtmlDiv)},t.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),t.registry.register(t.registry.Type.TOOLBOX,t.registry.DEFAULT,t.Toolbox),t.Trashcan=function(e){if(this.workspace_=e,this.contents_=[],this.flyout=null,!(0>=this.workspace_.options.maxTrashcanContents)){if(e=new t.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides}),this.workspace_.horizontalLayout){if(e.toolboxPosition=this.workspace_.toolboxPosition==t.utils.toolbox.Position.TOP?t.utils.toolbox.Position.BOTTOM:t.utils.toolbox.Position.TOP,!t.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout=new t.HorizontalFlyout(e)}else{if(e.toolboxPosition=this.workspace_.toolboxPosition==t.utils.toolbox.Position.RIGHT?t.utils.toolbox.Position.LEFT:t.utils.toolbox.Position.RIGHT,!t.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout=new t.VerticalFlyout(e)}this.workspace_.addChangeListener(this.onDelete_.bind(this))}},t.Trashcan.prototype.WIDTH_=47,t.Trashcan.prototype.BODY_HEIGHT_=44,t.Trashcan.prototype.LID_HEIGHT_=16,t.Trashcan.prototype.MARGIN_BOTTOM_=20,t.Trashcan.prototype.MARGIN_SIDE_=20,t.Trashcan.prototype.MARGIN_HOTSPOT_=10,t.Trashcan.prototype.SPRITE_LEFT_=0,t.Trashcan.prototype.SPRITE_TOP_=32,t.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,t.Trashcan.ANIMATION_LENGTH_=80,t.Trashcan.ANIMATION_FRAMES_=4,t.Trashcan.OPACITY_MIN_=.4,t.Trashcan.OPACITY_MAX_=.8,t.Trashcan.MAX_LID_ANGLE_=45,t.Trashcan.prototype.isLidOpen=!1,t.Trashcan.prototype.minOpenness_=0,t.Trashcan.prototype.svgGroup_=null,t.Trashcan.prototype.svgLid_=null,t.Trashcan.prototype.lidTask_=0,t.Trashcan.prototype.lidOpen_=0,t.Trashcan.prototype.left_=0,t.Trashcan.prototype.top_=0,t.Trashcan.prototype.createDom=function(){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyTrash"},null);var e=String(Math.random()).substring(2),i=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+e},this.svgGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},i);var n=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,x:-this.SPRITE_LEFT_,height:t.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+e+")"},this.svgGroup_);return n.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),i=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+e},this.svgGroup_),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},i),this.svgLid_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,x:-this.SPRITE_LEFT_,height:t.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+e+")"},this.svgGroup_),this.svgLid_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),t.bindEventWithChecks_(this.svgGroup_,"mouseup",this,this.click),t.bindEvent_(n,"mouseover",this,this.mouseOver_),t.bindEvent_(n,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},t.Trashcan.prototype.init=function(e){return 0<this.workspace_.options.maxTrashcanContents&&(t.utils.dom.insertAfter(this.flyout.createDom(t.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.verticalSpacing_=this.MARGIN_BOTTOM_+e,this.setLidOpen(!1),this.verticalSpacing_+this.BODY_HEIGHT_+this.LID_HEIGHT_},t.Trashcan.prototype.dispose=function(){this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},t.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},t.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},t.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){for(var e,i=[],n=0;e=this.contents_[n];n++)i[n]=t.Xml.textToDom(e);this.flyout.show(i),this.fireUiEvent_(!0)}},t.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},t.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},t.Trashcan.prototype.position=function(){if(this.verticalSpacing_){var e=this.workspace_.getMetrics();e&&(this.left_=e.toolboxPosition==t.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?e.viewWidth+e.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-t.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+t.Scrollbar.scrollbarThickness,this.top_=e.toolboxPosition==t.TOOLBOX_AT_BOTTOM?this.verticalSpacing_:e.viewHeight+e.absoluteTop-(this.BODY_HEIGHT_+this.LID_HEIGHT_)-this.verticalSpacing_,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))}},t.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),i=e.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return e=e.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,new t.utils.Rect(i,i+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,e,e+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},t.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},t.Trashcan.prototype.animateLid_=function(){var e=t.Trashcan.ANIMATION_FRAMES_,i=1/(e+1);this.lidOpen_+=this.isLidOpen?i:-i,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*t.Trashcan.MAX_LID_ANGLE_),i=t.Trashcan.OPACITY_MIN_,this.svgGroup_.style.opacity=i+this.lidOpen_*(t.Trashcan.OPACITY_MAX_-i),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),t.Trashcan.ANIMATION_LENGTH_/e))},t.Trashcan.prototype.setLidAngle_=function(e){var i=this.workspace_.toolboxPosition==t.TOOLBOX_AT_RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(i?-e:e)+","+(i?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},t.Trashcan.prototype.setMinOpenness_=function(e){this.minOpenness_=e,this.isLidOpen||this.setLidAngle_(e*t.Trashcan.MAX_LID_ANGLE_)},t.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},t.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},t.Trashcan.prototype.fireUiEvent_=function(e){(e=new t.Events.Ui(null,"trashcanOpen",null,e)).workspaceId=this.workspace_.id,t.Events.fire(e)},t.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},t.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},t.Trashcan.prototype.onDelete_=function(e){if(!(0>=this.workspace_.options.maxTrashcanContents)&&e.type==t.Events.BLOCK_DELETE&&e.oldXml.tagName&&"shadow"!=e.oldXml.tagName.toLowerCase()&&(e=this.cleanBlockXML_(e.oldXml),-1==this.contents_.indexOf(e))){for(this.contents_.unshift(e);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},t.Trashcan.prototype.cleanBlockXML_=function(e){for(var i=e=e.cloneNode(!0);i;){i.removeAttribute&&(i.removeAttribute("x"),i.removeAttribute("y"),i.removeAttribute("id"),i.removeAttribute("disabled"),"comment"==i.nodeName&&(i.removeAttribute("h"),i.removeAttribute("w"),i.removeAttribute("pinned")));var n=i.firstChild||i.nextSibling;if(!n)for(n=i.parentNode;n;){if(n.nextSibling){n=n.nextSibling;break}n=n.parentNode}i=n}return t.Xml.domToText(e)},t.VariablesDynamic={},t.VariablesDynamic.onCreateVariableButtonClick_String=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"String")},t.VariablesDynamic.onCreateVariableButtonClick_Number=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Number")},t.VariablesDynamic.onCreateVariableButtonClick_Colour=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Colour")},t.VariablesDynamic.flyoutCategory=function(e){var i=[],n=document.createElement("button");return n.setAttribute("text",t.Msg.NEW_STRING_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),i.push(n),(n=document.createElement("button")).setAttribute("text",t.Msg.NEW_NUMBER_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),i.push(n),(n=document.createElement("button")).setAttribute("text",t.Msg.NEW_COLOUR_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),i.push(n),e.registerButtonCallback("CREATE_VARIABLE_STRING",t.VariablesDynamic.onCreateVariableButtonClick_String),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",t.VariablesDynamic.onCreateVariableButtonClick_Number),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",t.VariablesDynamic.onCreateVariableButtonClick_Colour),e=t.VariablesDynamic.flyoutCategoryBlocks(e),i.concat(e)},t.VariablesDynamic.flyoutCategoryBlocks=function(e){var i=[];if(0<(e=e.getAllVariables()).length){if(t.Blocks.variables_set_dynamic){var n=e[e.length-1],o=t.utils.xml.createElement("block");o.setAttribute("type","variables_set_dynamic"),o.setAttribute("gap",24),o.appendChild(t.Variables.generateVariableFieldDom(n)),i.push(o)}if(t.Blocks.variables_get_dynamic){e.sort(t.VariableModel.compareByName),n=0;for(var r;r=e[n];n++)(o=t.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),o.setAttribute("gap",8),o.appendChild(t.Variables.generateVariableFieldDom(r)),i.push(o)}}return i},t.ZoomControls=function(t){this.workspace_=t,this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.verticalSpacing_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},t.ZoomControls.prototype.WIDTH_=32,t.ZoomControls.prototype.HEIGHT_=110,t.ZoomControls.prototype.MARGIN_BOTTOM_=20,t.ZoomControls.prototype.MARGIN_SIDE_=20,t.ZoomControls.prototype.svgGroup_=null,t.ZoomControls.prototype.left_=0,t.ZoomControls.prototype.top_=0,t.ZoomControls.prototype.createDom=function(){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null);var e=String(Math.random()).substring(2);return this.createZoomOutSvg_(e),this.createZoomInSvg_(e),this.workspace_.isMovable()&&this.createZoomResetSvg_(e),this.svgGroup_},t.ZoomControls.prototype.init=function(t){return this.verticalSpacing_=this.MARGIN_BOTTOM_+t,this.verticalSpacing_+this.HEIGHT_},t.ZoomControls.prototype.dispose=function(){this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&t.unbindEvent_(this.onZoomResetWrapper_),this.onZoomInWrapper_&&t.unbindEvent_(this.onZoomInWrapper_),this.onZoomOutWrapper_&&t.unbindEvent_(this.onZoomOutWrapper_)},t.ZoomControls.prototype.position=function(){if(this.verticalSpacing_){var e=this.workspace_.getMetrics();e&&(this.left_=e.toolboxPosition==t.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?e.viewWidth+e.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-t.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+t.Scrollbar.scrollbarThickness,e.toolboxPosition==t.TOOLBOX_AT_BOTTOM?(this.top_=this.verticalSpacing_,this.zoomInGroup_.setAttribute("transform","translate(0, 34)"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, 77)")):(this.top_=e.viewHeight+e.absoluteTop-this.HEIGHT_-this.verticalSpacing_,this.zoomInGroup_.setAttribute("transform","translate(0, 43)"),this.zoomOutGroup_.setAttribute("transform","translate(0, 77)")),this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))}},t.ZoomControls.prototype.createZoomOutSvg_=function(e){this.zoomOutGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var i=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},i),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomOutWrapper_=t.bindEventWithChecks_(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},t.ZoomControls.prototype.createZoomInSvg_=function(e){this.zoomInGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var i=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},i),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomInWrapper_=t.bindEventWithChecks_(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},t.ZoomControls.prototype.zoom_=function(e,i){this.workspace_.markFocused();var n=this.workspace_.scale;this.workspace_.zoomCenter(e),this.fireZoomEvent_(n),t.Touch.clearTouchIdentifier(),i.stopPropagation(),i.preventDefault()},t.ZoomControls.prototype.createZoomResetSvg_=function(e){this.zoomResetGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var i=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},i),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomResetWrapper_=t.bindEventWithChecks_(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},t.ZoomControls.prototype.resetZoom_=function(e){this.workspace_.markFocused();var i=this.workspace_.scale;this.workspace_.setScale(this.workspace_.options.zoomOptions.startScale),this.workspace_.beginCanvasTransition(),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(i),t.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()},t.ZoomControls.prototype.fireZoomEvent_=function(e){(e=new t.Events.Ui(null,"zoom",e,this.workspace_.scale)).workspaceId=this.workspace_.id,t.Events.fire(e)},t.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),t.Mutator=function(e){t.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=e},t.utils.object.inherits(t.Mutator,t.Icon),t.Mutator.prototype.workspaceWidth_=0,t.Mutator.prototype.workspaceHeight_=0,t.Mutator.prototype.setBlock=function(t){this.block_=t},t.Mutator.prototype.getWorkspace=function(){return this.workspace_},t.Mutator.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},e),t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},e)},t.Mutator.prototype.iconClick_=function(e){this.block_.isEditable()&&t.Icon.prototype.iconClick_.call(this,e)},t.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{x:t.Bubble.BORDER_WIDTH,y:t.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var e,i=t.utils.xml.createElement("xml"),n=0;e=this.quarkNames_[n];n++){var o=t.utils.xml.createElement("block");o.setAttribute("type",e),i.appendChild(o)}else i=null;return(n=new t.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?t.utils.toolbox.Position.RIGHT:t.utils.toolbox.Position.LEFT,(e=!!i)&&(n.languageTree=t.utils.toolbox.convertToolboxDefToJson(i),n.getMetrics=this.getFlyoutMetrics_.bind(this)),this.workspace_=new t.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(t.Events.disableOrphans),i=e?this.workspace_.addFlyout(t.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),i&&n.insertBefore(i,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},t.Mutator.prototype.updateEditable=function(){t.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&t.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&t.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},t.Mutator.prototype.resizeBubble_=function(){var e=2*t.Bubble.BORDER_WIDTH,i=this.workspace_.getCanvas().getBBox(),n=i.width+i.x,o=i.height+3*e,r=this.workspace_.getFlyout();if(r){var s=r.getMetrics_();o=Math.max(o,s.contentHeight+20),n+=r.getWidth()}this.block_.RTL&&(n=-i.x),n+=3*e,(Math.abs(this.workspaceWidth_-n)>e||Math.abs(this.workspaceHeight_-o)>e)&&(this.workspaceWidth_=n,this.workspaceHeight_=o,this.bubble_.setBubbleSize(n+e,o+e),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_)),this.block_.RTL&&(e="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",e)),this.workspace_.resize()},t.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDeleteAreas()},t.Mutator.prototype.setVisible=function(e){if(e!=this.isVisible())if(t.Events.fire(new t.Events.Ui(this.block_,"mutatorOpen",!e,e)),e){this.bubble_=new t.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var i=this.workspace_.options.languageTree;e=this.workspace_.getFlyout(),i&&(e.init(this.workspace_),e.show(i)),this.rootBlock_=this.block_.decompose(this.workspace_),i=this.rootBlock_.getDescendants(!1);for(var n,o=0;n=i[o];o++)n.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),e?(i=2*e.CORNER_RADIUS,e=this.rootBlock_.RTL?e.getWidth()+i:i):e=i=16,this.block_.RTL&&(e=-e),this.rootBlock_.moveBy(e,i),this.block_.saveConnections){var r=this,s=this.block_;s.saveConnections(this.rootBlock_),this.sourceListener_=function(){s.saveConnections(r.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},t.Mutator.prototype.workspaceChanged_=function(e){if(e.type!=t.Events.UI&&(e.type!=t.Events.CHANGE||"disabled"!=e.element)){if(!this.workspace_.isDragging())for(var i=this.workspace_.getTopBlocks(!1),n=0;e=i[n];n++){var o=e.getRelativeToSurfaceXY();if(20>o.y&&e.moveBy(0,20-o.y),e.RTL){var r=-20,s=this.workspace_.getFlyout();s&&(r-=s.getWidth()),o.x>r&&e.moveBy(r-o.x,0)}else 20>o.x&&e.moveBy(20-o.x,0)}this.rootBlock_.workspace==this.workspace_&&(t.Events.setGroup(!0),i=(i=(e=this.block_).mutationToDom())&&t.Xml.domToText(i),n=e.rendered,e.rendered=!1,e.compose(this.rootBlock_),e.rendered=n,e.initSvg(),t.getMainWorkspace().keyboardAccessibilityMode&&t.navigation.moveCursorOnBlockMutation(e),e.rendered&&e.render(),i!=(n=(n=e.mutationToDom())&&t.Xml.domToText(n))&&t.Events.fire(new t.Events.BlockChange(e,"mutation",null,i,n)),this.workspace_.isDragging()||this.resizeBubble_(),t.Events.setGroup(!1))}},t.Mutator.prototype.getFlyoutMetrics_=function(){var t=this.workspace_.getFlyout();return t=t?t.getWidth():0,{contentHeight:0,contentWidth:0,contentTop:0,contentLeft:0,viewHeight:this.workspaceHeight_,viewWidth:this.workspaceWidth_-t,viewTop:0,viewLeft:0,absoluteTop:0,absoluteLeft:this.workspace_.RTL?0:t}},t.Mutator.prototype.dispose=function(){this.block_.mutator=null,t.Icon.prototype.dispose.call(this)},t.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var e=t.getAllBlocks(!1),i=0;i<e.length;i++){var n=e[i];n.setStyle(n.getStyleName())}if(i=t.getFlyout())for(t=i.workspace_.getAllBlocks(!1),i=0;i<t.length;i++)(n=t[i]).setStyle(n.getStyleName())}},t.Mutator.reconnect=function(t,e,i){if(!t||!t.getSourceBlock().workspace)return!1;i=e.getInput(i).connection;var n=t.targetBlock();return!(n&&n!=e||i.targetConnection==t||(i.isConnected()&&i.disconnect(),i.connect(t),0))},t.Mutator.findParentWs=function(t){var e=null;if(t&&t.options){var i=t.options.parentWorkspace;t.isFlyout?i&&i.options&&(e=i.options.parentWorkspace):i&&(e=i)}return e},t.FieldTextInput=function(e,i,n){this.spellcheck_=!0,t.FieldTextInput.superClass_.constructor.call(this,e,i,n),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},t.utils.object.inherits(t.FieldTextInput,t.Field),t.FieldTextInput.prototype.DEFAULT_VALUE="",t.FieldTextInput.fromJson=function(e){var i=t.utils.replaceMessageReferences(e.text);return new t.FieldTextInput(i,void 0,e)},t.FieldTextInput.prototype.SERIALIZABLE=!0,t.FieldTextInput.BORDERRADIUS=4,t.FieldTextInput.prototype.CURSOR="text",t.FieldTextInput.prototype.configure_=function(e){t.FieldTextInput.superClass_.configure_.call(this,e),"boolean"==typeof e.spellcheck&&(this.spellcheck_=e.spellcheck)},t.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var t,e=0,i=0,n=0;t=this.sourceBlock_.inputList[n];n++){for(var o=0;t.fieldRow[o];o++)e++;t.connection&&i++}this.fullBlockClickTarget_=1>=e&&this.sourceBlock_.outputConnection&&!i}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},t.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},t.FieldTextInput.prototype.doValueInvalid_=function(e){this.isBeingEdited_&&(this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&t.Events.isEnabled()&&t.Events.fire(new t.Events.BlockChange(this.sourceBlock_,"field",this.name||null,e,this.value_)))},t.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},t.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},t.FieldTextInput.prototype.render_=function(){if(t.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var e=this.htmlInput_;this.isTextValid_?(t.utils.dom.removeClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!1)):(t.utils.dom.addClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!0))}},t.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},t.FieldTextInput.prototype.showEditor_=function(e,i){this.workspace_=this.sourceBlock_.workspace,!(e=i||!1)&&(t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(e)},t.FieldTextInput.prototype.showPromptEditor_=function(){var e=this;t.prompt(t.Msg.CHANGE_VALUE_TITLE,this.getText(),(function(t){e.setValue(t)}))},t.FieldTextInput.prototype.showInlineEditor_=function(e){t.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},t.FieldTextInput.prototype.widgetCreate_=function(){var e=t.WidgetDiv.DIV;t.utils.dom.addClass(this.getClickTarget_(),"editing");var i=document.createElement("input");i.className="blocklyHtmlInput",i.setAttribute("spellcheck",this.spellcheck_);var n=this.workspace_.getScale(),o=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";if(e.style.fontSize=o,i.style.fontSize=o,o=t.FieldTextInput.BORDERRADIUS*n+"px",this.fullBlockClickTarget_){o=((o=this.getScaledBBox()).bottom-o.top)/2+"px";var r=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;i.style.border=1*n+"px solid "+r,e.style.borderRadius=o,e.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(e.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*n+"px")}return i.style.borderRadius=o,e.appendChild(i),i.value=i.defaultValue=this.getEditorText_(this.value_),i.untypedDefaultValue_=this.value_,i.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(i),i},t.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var e=t.WidgetDiv.DIV.style;e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,t.utils.dom.removeClass(this.getClickTarget_(),"editing")},t.FieldTextInput.prototype.bindInputEvents_=function(e){this.onKeyDownWrapper_=t.bindEventWithChecks_(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=t.bindEventWithChecks_(e,"input",this,this.onHtmlInputChange_)},t.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(t.unbindEvent_(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(t.unbindEvent_(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},t.FieldTextInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode==t.utils.KeyCodes.ENTER?(t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()):e.keyCode==t.utils.KeyCodes.ESC?(this.htmlInput_.value=this.htmlInput_.defaultValue,t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()):e.keyCode==t.utils.KeyCodes.TAB&&(t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())},t.FieldTextInput.prototype.onHtmlInputChange_=function(e){(e=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=e,t.Events.setGroup(!0),e=this.getValueFromEditorText_(e),this.setValue(e),this.forceRerender(),this.resizeEditor_(),t.Events.setGroup(!1))},t.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},t.FieldTextInput.prototype.resizeEditor_=function(){var e=t.WidgetDiv.DIV,i=this.getScaledBBox();e.style.width=i.right-i.left+"px",e.style.height=i.bottom-i.top+"px",i=new t.utils.Coordinate(this.sourceBlock_.RTL?i.right-e.offsetWidth:i.left,i.top),e.style.left=i.x+"px",e.style.top=i.y+"px"},t.FieldTextInput.numberValidator=function(t){return console.warn("Blockly.FieldTextInput.numberValidator is deprecated. Use Blockly.FieldNumber instead."),null===t?null:(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,""),t=Number(t||0),isNaN(t)?null:String(t))},t.FieldTextInput.nonnegativeIntegerValidator=function(e){return(e=t.FieldTextInput.numberValidator(e))&&(e=String(Math.max(0,Math.floor(e)))),e},t.FieldTextInput.prototype.isTabNavigable=function(){return!0},t.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},t.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},t.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},t.fieldRegistry.register("field_input",t.FieldTextInput),t.FieldAngle=function(e,i,n){this.clockwise_=t.FieldAngle.CLOCKWISE,this.offset_=t.FieldAngle.OFFSET,this.wrap_=t.FieldAngle.WRAP,this.round_=t.FieldAngle.ROUND,t.FieldAngle.superClass_.constructor.call(this,e,i,n),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=null},t.utils.object.inherits(t.FieldAngle,t.FieldTextInput),t.FieldAngle.prototype.DEFAULT_VALUE=0,t.FieldAngle.fromJson=function(e){return new t.FieldAngle(e.angle,void 0,e)},t.FieldAngle.prototype.SERIALIZABLE=!0,t.FieldAngle.ROUND=15,t.FieldAngle.HALF=50,t.FieldAngle.CLOCKWISE=!1,t.FieldAngle.OFFSET=0,t.FieldAngle.WRAP=360,t.FieldAngle.RADIUS=t.FieldAngle.HALF-1,t.FieldAngle.prototype.configure_=function(e){switch(t.FieldAngle.superClass_.configure_.call(this,e),e.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var i=e.clockwise;"boolean"==typeof i&&(this.clockwise_=i),null!=(i=e.offset)&&(i=Number(i),isNaN(i)||(this.offset_=i)),null!=(i=e.wrap)&&(i=Number(i),isNaN(i)||(this.wrap_=i)),null!=(e=e.round)&&(e=Number(e),isNaN(e)||(this.round_=e))},t.FieldAngle.prototype.initView=function(){t.FieldAngle.superClass_.initView.call(this),this.symbol_=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("°")),this.textElement_.appendChild(this.symbol_)},t.FieldAngle.prototype.render_=function(){t.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},t.FieldAngle.prototype.showEditor_=function(e){t.FieldAngle.superClass_.showEditor_.call(this,e,t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD),e=this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(e),t.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},t.FieldAngle.prototype.dropdownCreate_=function(){var e=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",height:2*t.FieldAngle.HALF+"px",width:2*t.FieldAngle.HALF+"px",style:"touch-action: none"},null),i=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{cx:t.FieldAngle.HALF,cy:t.FieldAngle.HALF,r:t.FieldAngle.RADIUS,class:"blocklyAngleCircle"},e);this.gauge_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyAngleGauge"},e),this.line_=t.utils.dom.createSvgElement(t.utils.Svg.LINE,{x1:t.FieldAngle.HALF,y1:t.FieldAngle.HALF,class:"blocklyAngleLine"},e);for(var n=0;360>n;n+=15)t.utils.dom.createSvgElement(t.utils.Svg.LINE,{x1:t.FieldAngle.HALF+t.FieldAngle.RADIUS,y1:t.FieldAngle.HALF,x2:t.FieldAngle.HALF+t.FieldAngle.RADIUS-(0==n%45?10:5),y2:t.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+n+","+t.FieldAngle.HALF+","+t.FieldAngle.HALF+")"},e);return this.clickWrapper_=t.bindEventWithChecks_(e,"click",this,this.hide_),this.clickSurfaceWrapper_=t.bindEventWithChecks_(i,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=t.bindEventWithChecks_(i,"mousemove",this,this.onMouseMove_,!0,!0),e},t.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(t.unbindEvent_(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(t.unbindEvent_(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(t.unbindEvent_(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},t.FieldAngle.prototype.hide_=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hide()},t.FieldAngle.prototype.onMouseMove_=function(e){var i=this.gauge_.ownerSVGElement.getBoundingClientRect(),n=e.clientX-i.left-t.FieldAngle.HALF;e=e.clientY-i.top-t.FieldAngle.HALF,i=Math.atan(-e/n),isNaN(i)||(i=t.utils.math.toDegrees(i),0>n?i+=180:0<e&&(i+=360),i=this.clockwise_?this.offset_+360-i:360-(this.offset_-i),this.displayMouseOrKeyboardValue_(i))},t.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},t.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var e=Number(this.getText())+this.offset_,i=t.utils.math.toRadians(e%360);e=["M ",t.FieldAngle.HALF,",",t.FieldAngle.HALF];var n=t.FieldAngle.HALF,o=t.FieldAngle.HALF;if(!isNaN(i)){var r=Number(this.clockwise_),s=t.utils.math.toRadians(this.offset_),a=Math.cos(s)*t.FieldAngle.RADIUS,l=Math.sin(s)*-t.FieldAngle.RADIUS;r&&(i=2*s-i),n+=Math.cos(i)*t.FieldAngle.RADIUS,o-=Math.sin(i)*t.FieldAngle.RADIUS,i=Math.abs(Math.floor((i-s)/Math.PI)%2),r&&(i=1-i),e.push(" l ",a,",",l," A ",t.FieldAngle.RADIUS,",",t.FieldAngle.RADIUS," 0 ",i," ",r," ",n,",",o," z")}this.gauge_.setAttribute("d",e.join("")),this.line_.setAttribute("x2",n),this.line_.setAttribute("y2",o)}},t.FieldAngle.prototype.onHtmlInputKeyDown_=function(e){var i;if(t.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,e),e.keyCode===t.utils.KeyCodes.LEFT?i=this.sourceBlock_.RTL?1:-1:e.keyCode===t.utils.KeyCodes.RIGHT?i=this.sourceBlock_.RTL?-1:1:e.keyCode===t.utils.KeyCodes.DOWN?i=-1:e.keyCode===t.utils.KeyCodes.UP&&(i=1),i){var n=this.getValue();this.displayMouseOrKeyboardValue_(n+i*this.round_),e.preventDefault(),e.stopPropagation()}},t.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},t.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},t.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),t.fieldRegistry.register("field_angle",t.FieldAngle),t.FieldCheckbox=function(e,i,n){this.checkChar_=null,t.FieldCheckbox.superClass_.constructor.call(this,e,i,n)},t.utils.object.inherits(t.FieldCheckbox,t.Field),t.FieldCheckbox.prototype.DEFAULT_VALUE=!1,t.FieldCheckbox.fromJson=function(e){return new t.FieldCheckbox(e.checked,void 0,e)},t.FieldCheckbox.CHECK_CHAR="✓",t.FieldCheckbox.prototype.SERIALIZABLE=!0,t.FieldCheckbox.prototype.CURSOR="default",t.FieldCheckbox.prototype.configure_=function(e){t.FieldCheckbox.superClass_.configure_.call(this,e),e.checkCharacter&&(this.checkChar_=e.checkCharacter)},t.FieldCheckbox.prototype.initView=function(){t.FieldCheckbox.superClass_.initView.call(this),t.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},t.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},t.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||t.FieldCheckbox.CHECK_CHAR},t.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},t.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},t.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},t.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},t.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},t.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},t.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},t.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},t.fieldRegistry.register("field_checkbox",t.FieldCheckbox),t.FieldColour=function(e,i,n){t.FieldColour.superClass_.constructor.call(this,e,i,n),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},t.utils.object.inherits(t.FieldColour,t.Field),t.FieldColour.fromJson=function(e){return new t.FieldColour(e.colour,void 0,e)},t.FieldColour.prototype.SERIALIZABLE=!0,t.FieldColour.prototype.CURSOR="default",t.FieldColour.prototype.isDirty_=!1,t.FieldColour.prototype.colours_=null,t.FieldColour.prototype.titles_=null,t.FieldColour.prototype.columns_=0,t.FieldColour.prototype.configure_=function(e){t.FieldColour.superClass_.configure_.call(this,e),e.colourOptions&&(this.colours_=e.colourOptions,this.titles_=e.colourTitles),e.columns&&(this.columns_=e.columns)},t.FieldColour.prototype.initView=function(){this.size_=new t.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},t.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},t.FieldColour.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:t.utils.colour.parse(e)},t.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},t.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},t.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),t.FieldColour.prototype.DEFAULT_VALUE=t.FieldColour.COLOURS[0],t.FieldColour.TITLES=[],t.FieldColour.COLUMNS=7,t.FieldColour.prototype.setColours=function(t,e){return this.colours_=t,e&&(this.titles_=e),this},t.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},t.FieldColour.prototype.showEditor_=function(){this.picker_=this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(this.picker_),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},t.FieldColour.prototype.onClick_=function(e){null!==(e=(e=e.target)&&e.label)&&(this.setValue(e),t.DropDownDiv.hideIfOwner(this))},t.FieldColour.prototype.onKeyDown_=function(e){var i=!1;e.keyCode===t.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),i=!0):e.keyCode===t.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),i=!0):e.keyCode===t.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),i=!0):e.keyCode===t.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),i=!0):e.keyCode===t.utils.KeyCodes.ENTER&&((i=this.getHighlighted_())&&null!==(i=i&&i.label)&&this.setValue(i),t.DropDownDiv.hideWithoutAnimation(),i=!0),i&&e.stopPropagation()},t.FieldColour.prototype.onBlocklyAction=function(e){if(this.picker_){if(e===t.navigation.ACTION_PREVIOUS)return this.moveHighlightBy_(0,-1),!0;if(e===t.navigation.ACTION_NEXT)return this.moveHighlightBy_(0,1),!0;if(e===t.navigation.ACTION_OUT)return this.moveHighlightBy_(-1,0),!0;if(e===t.navigation.ACTION_IN)return this.moveHighlightBy_(1,0),!0}return t.FieldColour.superClass_.onBlocklyAction.call(this,e)},t.FieldColour.prototype.moveHighlightBy_=function(e,i){var n=this.colours_||t.FieldColour.COLOURS,o=this.columns_||t.FieldColour.COLUMNS,r=this.highlightedIndex_%o,s=Math.floor(this.highlightedIndex_/o);r+=e,s+=i,0>e?0>r&&0<s?(r=o-1,s--):0>r&&(r=0):0<e?r>o-1&&s<Math.floor(n.length/o)-1?(r=0,s++):r>o-1&&r--:0>i?0>s&&(s=0):0<i&&s>Math.floor(n.length/o)-1&&(s=Math.floor(n.length/o)-1),this.setHighlightedCell_(this.picker_.childNodes[s].childNodes[r],s*o+r)},t.FieldColour.prototype.onMouseMove_=function(t){var e=(t=t.target)&&Number(t.getAttribute("data-index"));null!==e&&e!==this.highlightedIndex_&&this.setHighlightedCell_(t,e)},t.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},t.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var e=this.getHighlighted_();e&&t.utils.dom.removeClass(e,"blocklyColourHighlighted")},t.FieldColour.prototype.getHighlighted_=function(){var e=this.columns_||t.FieldColour.COLUMNS,i=this.picker_.childNodes[Math.floor(this.highlightedIndex_/e)];return i?i.childNodes[this.highlightedIndex_%e]:null},t.FieldColour.prototype.setHighlightedCell_=function(e,i){var n=this.getHighlighted_();n&&t.utils.dom.removeClass(n,"blocklyColourHighlighted"),t.utils.dom.addClass(e,"blocklyColourHighlighted"),this.highlightedIndex_=i,t.utils.aria.setState(this.picker_,t.utils.aria.State.ACTIVEDESCENDANT,e.getAttribute("id"))},t.FieldColour.prototype.dropdownCreate_=function(){var e=this.columns_||t.FieldColour.COLUMNS,i=this.colours_||t.FieldColour.COLOURS,n=this.titles_||t.FieldColour.TITLES,o=this.getValue(),r=document.createElement("table");r.className="blocklyColourTable",r.tabIndex=0,r.dir="ltr",t.utils.aria.setRole(r,t.utils.aria.Role.GRID),t.utils.aria.setState(r,t.utils.aria.State.EXPANDED,!0),t.utils.aria.setState(r,t.utils.aria.State.ROWCOUNT,Math.floor(i.length/e)),t.utils.aria.setState(r,t.utils.aria.State.COLCOUNT,e);for(var s,a=0;a<i.length;a++){0==a%e&&(s=document.createElement("tr"),t.utils.aria.setRole(s,t.utils.aria.Role.ROW),r.appendChild(s));var l=document.createElement("td");s.appendChild(l),l.label=i[a],l.title=n[a]||i[a],l.id=t.utils.IdGenerator.getNextUniqueId(),l.setAttribute("data-index",a),t.utils.aria.setRole(l,t.utils.aria.Role.GRIDCELL),t.utils.aria.setState(l,t.utils.aria.State.LABEL,i[a]),t.utils.aria.setState(l,t.utils.aria.State.SELECTED,i[a]==o),l.style.backgroundColor=i[a],i[a]==o&&(l.className="blocklyColourSelected",this.highlightedIndex_=a)}return this.onClickWrapper_=t.bindEventWithChecks_(r,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=t.bindEventWithChecks_(r,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=t.bindEventWithChecks_(r,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=t.bindEventWithChecks_(r,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=t.bindEventWithChecks_(r,"keydown",this,this.onKeyDown_),r},t.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(t.unbindEvent_(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(t.unbindEvent_(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(t.unbindEvent_(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(t.unbindEvent_(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(t.unbindEvent_(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},t.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),t.fieldRegistry.register("field_colour",t.FieldColour),t.FieldDropdown=function(e,i,n){"function"!=typeof e&&t.FieldDropdown.validateOptions_(e),this.menuGenerator_=e,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],t.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],i,n),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},t.utils.object.inherits(t.FieldDropdown,t.Field),t.FieldDropdown.fromJson=function(e){return new t.FieldDropdown(e.options,void 0,e)},t.FieldDropdown.prototype.SERIALIZABLE=!0,t.FieldDropdown.CHECKMARK_OVERHANG=25,t.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,t.FieldDropdown.IMAGE_Y_OFFSET=5,t.FieldDropdown.IMAGE_Y_PADDING=2*t.FieldDropdown.IMAGE_Y_OFFSET,t.FieldDropdown.ARROW_CHAR=t.utils.userAgent.ANDROID?"▼":"▾",t.FieldDropdown.prototype.CURSOR="default",t.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&t.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},t.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},t.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?t.FieldDropdown.ARROW_CHAR+" ":" "+t.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},t.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},t.FieldDropdown.prototype.showEditor_=function(e){if(this.menu_=this.dropdownCreate_(),this.menu_.openingCoords=e&&"number"==typeof e.clientX?new t.utils.Coordinate(e.clientX,e.clientY):null,this.menu_.render(t.DropDownDiv.getContentDiv()),e=this.menu_.getElement(),t.utils.dom.addClass(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){e=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var i=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;t.DropDownDiv.setColour(e,i)}t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},t.FieldDropdown.prototype.dropdownCreate_=function(){var e=new t.Menu;e.setRole(t.utils.aria.Role.LISTBOX);var i=this.getOptions(!1);this.selectedMenuItem_=null;for(var n=0;n<i.length;n++){var o=i[n][0],r=i[n][1];if("object"==typeof o){var s=new Image(o.width,o.height);s.src=o.src,s.alt=o.alt||"",o=s}(o=new t.MenuItem(o,r)).setRole(t.utils.aria.Role.OPTION),o.setRightToLeft(this.sourceBlock_.RTL),o.setCheckable(!0),e.addChild(o),o.setChecked(r==this.value_),r==this.value_&&(this.selectedMenuItem_=o),o.onAction(this.handleMenuActionEvent_,this)}return e},t.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},t.FieldDropdown.prototype.handleMenuActionEvent_=function(e){t.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,e)},t.FieldDropdown.prototype.onItemSelected_=function(t,e){this.setValue(e.getValue())},t.FieldDropdown.prototype.trimOptions_=function(){var e=this.menuGenerator_;if(Array.isArray(e)){for(var i=!1,n=0;n<e.length;n++){var o=e[n][0];"string"==typeof o?e[n][0]=t.utils.replaceMessageReferences(o):(null!=o.alt&&(e[n][0].alt=t.utils.replaceMessageReferences(o.alt)),i=!0)}if(!(i||2>e.length)){for(i=[],n=0;n<e.length;n++)i.push(e[n][0]);n=t.utils.string.shortestStringLength(i),o=t.utils.string.commonWordPrefix(i,n);var r=t.utils.string.commonWordSuffix(i,n);!o&&!r||n<=o+r||(o&&(this.prefixField=i[0].substring(0,o-1)),r&&(this.suffixField=i[0].substr(1-r)),this.menuGenerator_=t.FieldDropdown.applyTrim_(e,o,r))}}},t.FieldDropdown.applyTrim_=function(t,e,i){for(var n=[],o=0;o<t.length;o++){var r=t[o][0],s=t[o][1];r=r.substring(e,r.length-i),n[o]=[r,s]}return n},t.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},t.FieldDropdown.prototype.getOptions=function(e){return this.isOptionListDynamic()?(this.generatedOptions_&&e||(this.generatedOptions_=this.menuGenerator_.call(this),t.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},t.FieldDropdown.prototype.doClassValidation_=function(t){for(var e,i=!1,n=this.getOptions(!0),o=0;e=n[o];o++)if(e[1]==t){i=!0;break}return i?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},t.FieldDropdown.prototype.doValueUpdate_=function(e){t.FieldDropdown.superClass_.doValueUpdate_.call(this,e),e=this.getOptions(!0);for(var i,n=0;i=e[n];n++)i[1]==this.value_&&(this.selectedOption_=i)},t.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",this.sourceBlock_.style.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=this.sourceBlock_.style.colourSecondary:this.arrow_.style.fill=this.sourceBlock_.style.colourPrimary)},t.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},t.FieldDropdown.prototype.renderSelectedImage_=function(e){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",e.src),this.imageElement_.setAttribute("height",e.height),this.imageElement_.setAttribute("width",e.width);var i=Number(e.height);e=Number(e.width);var n=!!this.borderRect_,o=Math.max(n?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,i+t.FieldDropdown.IMAGE_Y_PADDING);n=n?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var r=this.svgArrow_?this.positionSVGArrow_(e+n,o/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):t.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=e+r+2*n,this.size_.height=o;var s=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",n+r):(s=e+r,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",n)),this.imageElement_.setAttribute("y",o/2-i/2),this.positionTextElement_(s+n,e+r)},t.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),t.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var e=!!this.borderRect_,i=Math.max(e?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),n=t.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);e=e?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var o=0;this.svgArrow_&&(o=this.positionSVGArrow_(n+e,i/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=n+o+2*e,this.size_.height=i,this.positionTextElement_(e,n)},t.FieldDropdown.prototype.positionSVGArrow_=function(t,e){if(!this.svgArrow_)return 0;var i=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,n=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,o=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?i:t+n)+","+e+")"),o+n},t.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},t.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var e=!1,i=0;i<t.length;++i){var n=t[i];Array.isArray(n)?"string"!=typeof n[1]?(e=!0,console.error("Invalid option["+i+"]: Each FieldDropdown option id must be a string. Found "+n[1]+" in: ",n)):n[0]&&"string"!=typeof n[0]&&"string"!=typeof n[0].src&&(e=!0,console.error("Invalid option["+i+"]: Each FieldDropdown option must have a string label or image description. Found"+n[0]+" in: ",n)):(e=!0,console.error("Invalid option["+i+"]: Each FieldDropdown option must be an array. Found: ",n))}if(e)throw TypeError("Found invalid FieldDropdown options.")},t.FieldDropdown.prototype.onBlocklyAction=function(e){if(this.menu_){if(e===t.navigation.ACTION_PREVIOUS)return this.menu_.highlightPrevious(),!0;if(e===t.navigation.ACTION_NEXT)return this.menu_.highlightNext(),!0}return t.FieldDropdown.superClass_.onBlocklyAction.call(this,e)},t.fieldRegistry.register("field_dropdown",t.FieldDropdown),t.FieldLabelSerializable=function(e,i,n){t.FieldLabelSerializable.superClass_.constructor.call(this,e,i,n)},t.utils.object.inherits(t.FieldLabelSerializable,t.FieldLabel),t.FieldLabelSerializable.fromJson=function(e){var i=t.utils.replaceMessageReferences(e.text);return new t.FieldLabelSerializable(i,void 0,e)},t.FieldLabelSerializable.prototype.EDITABLE=!1,t.FieldLabelSerializable.prototype.SERIALIZABLE=!0,t.fieldRegistry.register("field_label_serializable",t.FieldLabelSerializable),t.FieldImage=function(e,i,n,o,r,s,a){if(!e)throw Error("Src value of an image field is required");if(e=t.utils.replaceMessageReferences(e),n=Number(t.utils.replaceMessageReferences(n)),i=Number(t.utils.replaceMessageReferences(i)),isNaN(n)||isNaN(i))throw Error("Height and width values of an image field must cast to numbers.");if(0>=n||0>=i)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",t.FieldImage.superClass_.constructor.call(this,e,null,a),a||(this.flipRtl_=!!s,this.altText_=t.utils.replaceMessageReferences(o)||""),this.size_=new t.utils.Size(i,n+t.FieldImage.Y_PADDING),this.imageHeight_=n,this.clickHandler_=null,"function"==typeof r&&(this.clickHandler_=r),this.imageElement_=null},t.utils.object.inherits(t.FieldImage,t.Field),t.FieldImage.prototype.DEFAULT_VALUE="",t.FieldImage.fromJson=function(e){return new t.FieldImage(e.src,e.width,e.height,void 0,void 0,void 0,e)},t.FieldImage.Y_PADDING=1,t.FieldImage.prototype.EDITABLE=!1,t.FieldImage.prototype.isDirty_=!1,t.FieldImage.prototype.configure_=function(e){t.FieldImage.superClass_.configure_.call(this,e),this.flipRtl_=!!e.flipRtl,this.altText_=t.utils.replaceMessageReferences(e.alt)||""},t.FieldImage.prototype.initView=function(){this.imageElement_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},t.FieldImage.prototype.updateSize_=function(){},t.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},t.FieldImage.prototype.doValueUpdate_=function(e){this.value_=e,this.imageElement_&&this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},t.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},t.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},t.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},t.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},t.FieldImage.prototype.getText_=function(){return this.altText_},t.fieldRegistry.register("field_image",t.FieldImage),t.FieldMultilineInput=function(e,i,n){t.FieldMultilineInput.superClass_.constructor.call(this,e,i,n),this.textGroup_=null},t.utils.object.inherits(t.FieldMultilineInput,t.FieldTextInput),t.FieldMultilineInput.fromJson=function(e){var i=t.utils.replaceMessageReferences(e.text);return new t.FieldMultilineInput(i,void 0,e)},t.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},t.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},t.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},t.FieldMultilineInput.prototype.getDisplayText_=function(){var e=this.value_;if(!e)return t.Field.NBSP;var i=e.split("\n");e="";for(var n=0;n<i.length;n++){var o=i[n];o.length>this.maxDisplayLength&&(o=o.substring(0,this.maxDisplayLength-4)+"..."),e+=o=o.replace(/\s/g,t.Field.NBSP),n!==i.length-1&&(e+="\n")}return this.sourceBlock_.RTL&&(e+="‏"),e},t.FieldMultilineInput.prototype.render_=function(){for(var e;e=this.textGroup_.firstChild;)this.textGroup_.removeChild(e);e=this.getDisplayText_().split("\n");for(var i=0,n=0;n<e.length;n++){var o=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:i+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(e[n])),i+=o}this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),e=this.htmlInput_,this.isTextValid_?(t.utils.dom.removeClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!1)):(t.utils.dom.addClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!0)))},t.FieldMultilineInput.prototype.updateSize_=function(){for(var e=this.textGroup_.childNodes,i=0,n=0,o=0;o<e.length;o++){var r=t.utils.dom.getTextWidth(e[o]);r>i&&(i=r),n+=this.getConstants().FIELD_TEXT_HEIGHT+(0<o?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}this.borderRect_&&(n+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,i+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",i),this.borderRect_.setAttribute("height",n)),this.size_.width=i,this.size_.height=n,this.positionBorderRect_()},t.FieldMultilineInput.prototype.widgetCreate_=function(){var e=t.WidgetDiv.DIV,i=this.workspace_.getScale(),n=document.createElement("textarea");n.className="blocklyHtmlInput blocklyHtmlTextAreaInput",n.setAttribute("spellcheck",this.spellcheck_);var o=this.getConstants().FIELD_TEXT_FONTSIZE*i+"pt";e.style.fontSize=o,n.style.fontSize=o,n.style.borderRadius=t.FieldTextInput.BORDERRADIUS*i+"px",o=this.getConstants().FIELD_BORDER_RECT_X_PADDING*i;var r=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*i/2;return n.style.padding=r+"px "+o+"px "+r+"px "+o+"px",o=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n.style.lineHeight=o*i+"px",e.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,t.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(n),n},t.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode!==t.utils.KeyCodes.ENTER&&t.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,e)},t.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,}".split(",")),t.fieldRegistry.register("field_multilinetext",t.FieldMultilineInput),t.FieldNumber=function(e,i,n,o,r,s){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,t.FieldNumber.superClass_.constructor.call(this,e,r,s),s||this.setConstraints(i,n,o)},t.utils.object.inherits(t.FieldNumber,t.FieldTextInput),t.FieldNumber.prototype.DEFAULT_VALUE=0,t.FieldNumber.fromJson=function(e){return new t.FieldNumber(e.value,void 0,void 0,void 0,void 0,e)},t.FieldNumber.prototype.SERIALIZABLE=!0,t.FieldNumber.prototype.configure_=function(e){t.FieldNumber.superClass_.configure_.call(this,e),this.setMinInternal_(e.min),this.setMaxInternal_(e.max),this.setPrecisionInternal_(e.precision)},t.FieldNumber.prototype.setConstraints=function(t,e,i){this.setMinInternal_(t),this.setMaxInternal_(e),this.setPrecisionInternal_(i),this.setValue(this.getValue())},t.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},t.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},t.FieldNumber.prototype.getMin=function(){return this.min_},t.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},t.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},t.FieldNumber.prototype.getMax=function(){return this.max_},t.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},t.FieldNumber.prototype.setPrecisionInternal_=function(t){null==t?this.precision_=0:(t=Number(t),isNaN(t)||(this.precision_=t));var e=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}),i=e.indexOf(".");this.decimalPlaces_=-1==i?t?0:null:e.length-i-1},t.FieldNumber.prototype.getPrecision=function(){return this.precision_},t.FieldNumber.prototype.doClassValidation_=function(t){return null===t?null:(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t)?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t))},t.FieldNumber.prototype.widgetCreate_=function(){var e=t.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&t.utils.aria.setState(e,t.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&t.utils.aria.setState(e,t.utils.aria.State.VALUEMAX,this.max_),e},t.fieldRegistry.register("field_number",t.FieldNumber),t.FieldVariable=function(e,i,n,o,r){this.menuGenerator_=t.FieldVariable.dropdownCreate,this.defaultVariableName=e||"",this.size_=new t.utils.Size(0,0),r&&this.configure_(r),i&&this.setValidator(i),r||this.setTypes_(n,o)},t.utils.object.inherits(t.FieldVariable,t.FieldDropdown),t.FieldVariable.fromJson=function(e){var i=t.utils.replaceMessageReferences(e.variable);return new t.FieldVariable(i,void 0,void 0,void 0,e)},t.FieldVariable.prototype.SERIALIZABLE=!0,t.FieldVariable.prototype.configure_=function(e){t.FieldVariable.superClass_.configure_.call(this,e),this.setTypes_(e.variableTypes,e.defaultType)},t.FieldVariable.prototype.initModel=function(){if(!this.variable_){var e=t.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(e.getId())}},t.FieldVariable.prototype.shouldAddBorderRect_=function(){return t.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},t.FieldVariable.prototype.fromXml=function(e){var i=e.getAttribute("id"),n=e.textContent,o=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(i=t.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,i,n,o),null!=o&&o!==i.type)throw Error("Serialized variable type with id '"+i.getId()+"' had type "+i.type+", and does not match variable field that references it: "+t.Xml.domToText(e)+".");this.setValue(i.getId())},t.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},t.FieldVariable.prototype.setSourceBlock=function(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");t.FieldVariable.superClass_.setSourceBlock.call(this,e)},t.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},t.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},t.FieldVariable.prototype.getVariable=function(){return this.variable_},t.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},t.FieldVariable.prototype.doClassValidation_=function(e){if(null===e)return null;var i=t.Variables.getVariable(this.sourceBlock_.workspace,e);return i?(i=i.type,this.typeIsAllowed_(i)?e:(console.warn("Variable type doesn't match this field!  Type was "+i),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)},t.FieldVariable.prototype.doValueUpdate_=function(e){this.variable_=t.Variables.getVariable(this.sourceBlock_.workspace,e),t.FieldVariable.superClass_.doValueUpdate_.call(this,e)},t.FieldVariable.prototype.typeIsAllowed_=function(t){var e=this.getVariableTypes_();if(!e)return!0;for(var i=0;i<e.length;i++)if(t==e[i])return!0;return!1},t.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},t.FieldVariable.prototype.setTypes_=function(t,e){if(e=e||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var i=!1,n=0;n<t.length;n++)t[n]==e&&(i=!0);if(!i)throw Error("Invalid default type '"+e+"' in the definition of a FieldVariable")}this.defaultType_=e,this.variableTypes=t},t.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},t.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var e=this.getText(),i=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var n=this.getVariableTypes_(),o=0;o<n.length;o++){var r=this.sourceBlock_.workspace.getVariablesOfType(n[o]);i=i.concat(r)}for(i.sort(t.VariableModel.compareByName),n=[],o=0;o<i.length;o++)n[o]=[i[o].name,i[o].getId()];return n.push([t.Msg.RENAME_VARIABLE,t.RENAME_VARIABLE_ID]),t.Msg.DELETE_VARIABLE&&n.push([t.Msg.DELETE_VARIABLE.replace("%1",e),t.DELETE_VARIABLE_ID]),n},t.FieldVariable.prototype.onItemSelected_=function(e,i){if(e=i.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(e==t.RENAME_VARIABLE_ID)return void t.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(e==t.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(e)},t.FieldVariable.prototype.referencesVariables=function(){return!0},t.fieldRegistry.register("field_variable",t.FieldVariable),t.utils.svgPaths={},t.utils.svgPaths.point=function(t,e){return" "+t+","+e+" "},t.utils.svgPaths.curve=function(t,e){return" "+t+e.join("")},t.utils.svgPaths.moveTo=function(t,e){return" M "+t+","+e+" "},t.utils.svgPaths.moveBy=function(t,e){return" m "+t+","+e+" "},t.utils.svgPaths.lineTo=function(t,e){return" l "+t+","+e+" "},t.utils.svgPaths.line=function(t){return" l"+t.join("")},t.utils.svgPaths.lineOnAxis=function(t,e){return" "+t+" "+e+" "},t.utils.svgPaths.arc=function(t,e,i,n){return t+" "+i+" "+i+" "+e+n},t.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=t.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!t.utils.userAgent.IE&&!t.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},t.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},t.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles={};var e,i=t.blockStyles;for(e in i)this.blockStyles[e]=this.validatedBlockStyle_(i[e]);this.setDynamicProperties_(t)},t.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},t.blockRendering.ConstantProvider.prototype.setFontConstants_=function(e){this.FIELD_TEXT_FONTFAMILY=e.fontStyle&&null!=e.fontStyle.family?e.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=e.fontStyle&&null!=e.fontStyle.weight?e.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=e.fontStyle&&null!=e.fontStyle.size?e.fontStyle.size:this.FIELD_TEXT_FONTSIZE,e=t.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline},t.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},t.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var e="auto_"+t;return this.blockStyles[e]||(this.blockStyles[e]=this.createBlockStyle_(t)),{style:this.blockStyles[e],name:e}},t.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},t.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},t.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(e){var i={};return e&&t.utils.object.mixin(i,e),e=t.utils.parseBlockColour(i.colourPrimary||"#000"),i.colourPrimary=e.hex,i.colourSecondary=i.colourSecondary?t.utils.parseBlockColour(i.colourSecondary).hex:this.generateSecondaryColour_(i.colourPrimary),i.colourTertiary=i.colourTertiary?t.utils.parseBlockColour(i.colourTertiary).hex:this.generateTertiaryColour_(i.colourPrimary),i.hat=i.hat||"",i},t.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(e){return t.utils.colour.blend("#fff",e,.6)||e},t.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(e){return t.utils.colour.blend("#fff",e,.3)||e},t.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&t.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&t.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&t.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},t.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var e=this.JAGGED_TEETH_HEIGHT,i=this.JAGGED_TEETH_WIDTH;return{height:e,width:i,path:t.utils.svgPaths.line([t.utils.svgPaths.point(i,e/4),t.utils.svgPaths.point(2*-i,e/2),t.utils.svgPaths.point(i,e/4)])}},t.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,i=this.START_HAT_WIDTH;return{height:e,width:i,path:t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(30,-e),t.utils.svgPaths.point(70,-e),t.utils.svgPaths.point(i,0)])}},t.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function e(e){var o=-(e=e?-1:1),r=n/2,s=r+2.5,a=r+.5,l=t.utils.svgPaths.point(-i,e*r);return r=t.utils.svgPaths.point(i,e*r),t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(0,e*s),t.utils.svgPaths.point(-i,o*a),l])+t.utils.svgPaths.curve("s",[t.utils.svgPaths.point(i,2.5*o),r])}var i=this.TAB_WIDTH,n=this.TAB_HEIGHT,o=e(!0),r=e(!1);return{type:this.SHAPES.PUZZLE,width:i,height:n,pathDown:r,pathUp:o}},t.blockRendering.ConstantProvider.prototype.makeNotch=function(){function e(e){return t.utils.svgPaths.line([t.utils.svgPaths.point(e*o,n),t.utils.svgPaths.point(3*e,0),t.utils.svgPaths.point(e*o,-n)])}var i=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,o=(i-3)/2,r=e(1),s=e(-1);return{type:this.SHAPES.NOTCH,width:i,height:n,pathLeft:r,pathRight:s}},t.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS;return{width:e,height:e,pathTop:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-e,e)),pathBottom:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(e,e))}},t.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var e=this.CORNER_RADIUS,i=t.utils.svgPaths.moveBy(0,e)+t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,-e)),n=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,e)),o=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,-e));return{topLeft:i,topRight:n,bottomRight:t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,e)),bottomLeft:o,rightHeight:e}},t.blockRendering.ConstantProvider.prototype.shapeFor=function(e){switch(e.type){case t.INPUT_VALUE:case t.OUTPUT_VALUE:return this.PUZZLE_TAB;case t.PREVIOUS_STATEMENT:case t.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},t.blockRendering.ConstantProvider.prototype.createDom=function(e,i,n){this.injectCSS_(i,n),e=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),i=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},i),n=t.utils.dom.createSvgElement(t.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},i),t.utils.dom.createSvgElement(t.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},n),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},i),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},i),this.embossFilterId=i.id,this.embossFilter_=i,i=t.utils.dom.createSvgElement(t.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},i),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},i),this.disabledPatternId=i.id,this.disabledPattern_=i,t.blockRendering.Debug&&(e=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),i=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},i),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter_=e)},t.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,e){e=this.getCSS_(e),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var i=e.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=i:((e=document.createElement("style")).id=t,t=document.createTextNode(i),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild),this.cssNode_=e)},t.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},t.blockRendering.MarkerSvg=function(t,e,i){this.workspace_=t,this.marker_=i,this.parent_=null,this.constants_=e,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=i.colour||t},t.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",t.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",t.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,t.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},t.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},t.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},t.blockRendering.MarkerSvg.prototype.createDom=function(){var e=this.isCursor()?t.blockRendering.MarkerSvg.CURSOR_CLASS:t.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:e},null),this.createDomInternal_(),this.svgGroup_},t.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},t.blockRendering.MarkerSvg.prototype.draw=function(t,e){if(e){this.constants_=this.workspace_.getRenderer().getConstants();var i=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||i,this.applyColour_(e),this.showAtLocation_(e),this.fireMarkerEvent_(t,e),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},t.blockRendering.MarkerSvg.prototype.showAtLocation_=function(e){var i=e.getLocation();e.getType()==t.ASTNode.types.BLOCK?this.showWithBlock_(e):e.getType()==t.ASTNode.types.OUTPUT?this.showWithOutput_(e):i.type==t.INPUT_VALUE?this.showWithInput_(e):i.type==t.NEXT_STATEMENT?this.showWithNext_(e):e.getType()==t.ASTNode.types.PREVIOUS?this.showWithPrevious_(e):e.getType()==t.ASTNode.types.FIELD?this.showWithField_(e):e.getType()==t.ASTNode.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()==t.ASTNode.types.STACK&&this.showWithStack_(e)},t.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(e){var i=(e=e.getSourceBlock()).width,n=e.height,o=n*t.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,r=this.constants_.CURSOR_BLOCK_PADDING;if(e.previousConnection){var s=this.constants_.shapeFor(e.previousConnection);this.positionPrevious_(i,r,o,s)}else e.outputConnection?(s=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(i,n,s)):this.positionBlock_(i,r,o);this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},t.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},t.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},t.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var e=t.getWsCoordinate();t=e.x,e=e.y,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,e,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var e=(t=t.getLocation()).getSize().width,i=t.getSize().height;this.positionRect_(0,0,e,i),this.setParent_(t),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var e=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var e=t.getLocation();t=e.getSourceBlock();var i=0;e=e.getOffsetInBlock().y;var n=t.getHeightWidth().width;this.workspace_.RTL&&(i=-n),this.positionLine_(i,e,n),this.setParent_(t),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var e=(t=t.getLocation()).getHeightWidth(),i=e.width+this.constants_.CURSOR_STACK_PADDING;e=e.height+this.constants_.CURSOR_STACK_PADDING;var n=-this.constants_.CURSOR_STACK_PADDING/2,o=-this.constants_.CURSOR_STACK_PADDING/2,r=n;this.workspace_.RTL&&(r=-(i+n)),this.positionRect_(r,o,i,e),this.setParent_(t),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},t.blockRendering.MarkerSvg.prototype.positionBlock_=function(e,i,n){e=t.utils.svgPaths.moveBy(-i,n)+t.utils.svgPaths.lineOnAxis("V",-i)+t.utils.svgPaths.lineOnAxis("H",e+2*i)+t.utils.svgPaths.lineOnAxis("V",n),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionInput_=function(e){var i=e.getOffsetInBlock().x,n=e.getOffsetInBlock().y;e=t.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+i+","+n+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},t.blockRendering.MarkerSvg.prototype.positionLine_=function(t,e,i){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",e),this.markerSvgLine_.setAttribute("width",i),this.currentMarkerSvg=this.markerSvgLine_},t.blockRendering.MarkerSvg.prototype.positionOutput_=function(e,i,n){e=t.utils.svgPaths.moveBy(e,0)+t.utils.svgPaths.lineOnAxis("h",-(e-n.width))+t.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+n.pathDown+t.utils.svgPaths.lineOnAxis("V",i)+t.utils.svgPaths.lineOnAxis("H",e),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionPrevious_=function(e,i,n,o){e=t.utils.svgPaths.moveBy(-i,n)+t.utils.svgPaths.lineOnAxis("V",-i)+t.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+o.pathLeft+t.utils.svgPaths.lineOnAxis("H",e+2*i)+t.utils.svgPaths.lineOnAxis("V",n),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionRect_=function(t,e,i,n){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",e),this.markerSvgRect_.setAttribute("width",i),this.markerSvgRect_.setAttribute("height",n),this.currentMarkerSvg=this.markerSvgRect_},t.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},t.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},t.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(e,i){var n=i.getSourceBlock(),o=this.isCursor()?"cursorMove":"markerMove";e=new t.Events.Ui(n,o,e,i),i.getType()==t.ASTNode.types.WORKSPACE&&(e.workspaceId=i.getLocation().id),t.Events.fire(e)},t.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},t.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=t.utils.dom.createSvgElement(t.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerSvgLine_),t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerInput_),e.attributeName="stroke",t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerBlock_)}return this.markerSvg_},t.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(t=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstChild.setAttribute("values",t),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},t.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_)},t.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},t.blockRendering.Types.LEFT_CORNER=t.blockRendering.Types.LEFT_SQUARE_CORNER|t.blockRendering.Types.LEFT_ROUND_CORNER,t.blockRendering.Types.RIGHT_CORNER=t.blockRendering.Types.RIGHT_SQUARE_CORNER|t.blockRendering.Types.RIGHT_ROUND_CORNER,t.blockRendering.Types.nextTypeValue_=16777216,t.blockRendering.Types.getType=function(e){return Object.prototype.hasOwnProperty.call(t.blockRendering.Types,e)||(t.blockRendering.Types[e]=t.blockRendering.Types.nextTypeValue_,t.blockRendering.Types.nextTypeValue_<<=1),t.blockRendering.Types[e]},t.blockRendering.Types.isField=function(e){return e.type&t.blockRendering.Types.FIELD},t.blockRendering.Types.isHat=function(e){return e.type&t.blockRendering.Types.HAT},t.blockRendering.Types.isIcon=function(e){return e.type&t.blockRendering.Types.ICON},t.blockRendering.Types.isSpacer=function(e){return e.type&t.blockRendering.Types.SPACER},t.blockRendering.Types.isInRowSpacer=function(e){return e.type&t.blockRendering.Types.IN_ROW_SPACER},t.blockRendering.Types.isInput=function(e){return e.type&t.blockRendering.Types.INPUT},t.blockRendering.Types.isExternalInput=function(e){return e.type&t.blockRendering.Types.EXTERNAL_VALUE_INPUT},t.blockRendering.Types.isInlineInput=function(e){return e.type&t.blockRendering.Types.INLINE_INPUT},t.blockRendering.Types.isStatementInput=function(e){return e.type&t.blockRendering.Types.STATEMENT_INPUT},t.blockRendering.Types.isPreviousConnection=function(e){return e.type&t.blockRendering.Types.PREVIOUS_CONNECTION},t.blockRendering.Types.isNextConnection=function(e){return e.type&t.blockRendering.Types.NEXT_CONNECTION},t.blockRendering.Types.isPreviousOrNextConnection=function(e){return e.type&(t.blockRendering.Types.PREVIOUS_CONNECTION|t.blockRendering.Types.NEXT_CONNECTION)},t.blockRendering.Types.isLeftRoundedCorner=function(e){return e.type&t.blockRendering.Types.LEFT_ROUND_CORNER},t.blockRendering.Types.isRightRoundedCorner=function(e){return e.type&t.blockRendering.Types.RIGHT_ROUND_CORNER},t.blockRendering.Types.isLeftSquareCorner=function(e){return e.type&t.blockRendering.Types.LEFT_SQUARE_CORNER},t.blockRendering.Types.isRightSquareCorner=function(e){return e.type&t.blockRendering.Types.RIGHT_SQUARE_CORNER},t.blockRendering.Types.isCorner=function(e){return e.type&t.blockRendering.Types.CORNER},t.blockRendering.Types.isJaggedEdge=function(e){return e.type&t.blockRendering.Types.JAGGED_EDGE},t.blockRendering.Types.isRow=function(e){return e.type&t.blockRendering.Types.ROW},t.blockRendering.Types.isBetweenRowSpacer=function(e){return e.type&t.blockRendering.Types.BETWEEN_ROW_SPACER},t.blockRendering.Types.isTopRow=function(e){return e.type&t.blockRendering.Types.TOP_ROW},t.blockRendering.Types.isBottomRow=function(e){return e.type&t.blockRendering.Types.BOTTOM_ROW},t.blockRendering.Types.isTopOrBottomRow=function(e){return e.type&(t.blockRendering.Types.TOP_ROW|t.blockRendering.Types.BOTTOM_ROW)},t.blockRendering.Types.isInputRow=function(e){return e.type&t.blockRendering.Types.INPUT_ROW},t.blockRendering.Measurable=function(e){this.height=this.width=0,this.type=t.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},t.blockRendering.Connection=function(e,i){t.blockRendering.Connection.superClass_.constructor.call(this,e),this.connectionModel=i,this.shape=this.constants_.shapeFor(i),this.isDynamicShape=!!this.shape.isDynamic,this.type|=t.blockRendering.Types.CONNECTION},t.utils.object.inherits(t.blockRendering.Connection,t.blockRendering.Measurable),t.blockRendering.OutputConnection=function(e,i){t.blockRendering.OutputConnection.superClass_.constructor.call(this,e,i),this.type|=t.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},t.utils.object.inherits(t.blockRendering.OutputConnection,t.blockRendering.Connection),t.blockRendering.PreviousConnection=function(e,i){t.blockRendering.PreviousConnection.superClass_.constructor.call(this,e,i),this.type|=t.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},t.utils.object.inherits(t.blockRendering.PreviousConnection,t.blockRendering.Connection),t.blockRendering.NextConnection=function(e,i){t.blockRendering.NextConnection.superClass_.constructor.call(this,e,i),this.type|=t.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},t.utils.object.inherits(t.blockRendering.NextConnection,t.blockRendering.Connection),t.blockRendering.InputConnection=function(e,i){t.blockRendering.InputConnection.superClass_.constructor.call(this,e,i.connection),this.type|=t.blockRendering.Types.INPUT,this.input=i,this.align=i.align,(this.connectedBlock=i.connection&&i.connection.targetBlock()?i.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},t.utils.object.inherits(t.blockRendering.InputConnection,t.blockRendering.Connection),t.blockRendering.InlineInput=function(e,i){t.blockRendering.InlineInput.superClass_.constructor.call(this,e,i),this.type|=t.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},t.utils.object.inherits(t.blockRendering.InlineInput,t.blockRendering.InputConnection),t.blockRendering.StatementInput=function(e,i){t.blockRendering.StatementInput.superClass_.constructor.call(this,e,i),this.type|=t.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},t.utils.object.inherits(t.blockRendering.StatementInput,t.blockRendering.InputConnection),t.blockRendering.ExternalValueInput=function(e,i){t.blockRendering.ExternalValueInput.superClass_.constructor.call(this,e,i),this.type|=t.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},t.utils.object.inherits(t.blockRendering.ExternalValueInput,t.blockRendering.InputConnection),t.blockRendering.Icon=function(e,i){t.blockRendering.Icon.superClass_.constructor.call(this,e),this.icon=i,this.isVisible=i.isVisible(),this.type|=t.blockRendering.Types.ICON,e=i.getCorrectedSize(),this.height=e.height,this.width=e.width},t.utils.object.inherits(t.blockRendering.Icon,t.blockRendering.Measurable),t.blockRendering.JaggedEdge=function(e){t.blockRendering.JaggedEdge.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},t.utils.object.inherits(t.blockRendering.JaggedEdge,t.blockRendering.Measurable),t.blockRendering.Field=function(e,i,n){t.blockRendering.Field.superClass_.constructor.call(this,e),this.field=i,this.isEditable=i.EDITABLE,this.flipRtl=i.getFlipRtl(),this.type|=t.blockRendering.Types.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width,this.parentInput=n},t.utils.object.inherits(t.blockRendering.Field,t.blockRendering.Measurable),t.blockRendering.Hat=function(e){t.blockRendering.Hat.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},t.utils.object.inherits(t.blockRendering.Hat,t.blockRendering.Measurable),t.blockRendering.SquareCorner=function(e,i){t.blockRendering.SquareCorner.superClass_.constructor.call(this,e),this.type=(i&&"left"!=i?t.blockRendering.Types.RIGHT_SQUARE_CORNER:t.blockRendering.Types.LEFT_SQUARE_CORNER)|t.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},t.utils.object.inherits(t.blockRendering.SquareCorner,t.blockRendering.Measurable),t.blockRendering.RoundCorner=function(e,i){t.blockRendering.RoundCorner.superClass_.constructor.call(this,e),this.type=(i&&"left"!=i?t.blockRendering.Types.RIGHT_ROUND_CORNER:t.blockRendering.Types.LEFT_ROUND_CORNER)|t.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},t.utils.object.inherits(t.blockRendering.RoundCorner,t.blockRendering.Measurable),t.blockRendering.InRowSpacer=function(e,i){t.blockRendering.InRowSpacer.superClass_.constructor.call(this,e),this.type=this.type|t.blockRendering.Types.SPACER|t.blockRendering.Types.IN_ROW_SPACER,this.width=i,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},t.utils.object.inherits(t.blockRendering.InRowSpacer,t.blockRendering.Measurable),t.blockRendering.Row=function(e){this.type=t.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},t.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},t.blockRendering.Row.prototype.getLastInput=function(){for(var e,i=this.elements.length-1;e=this.elements[i];i--)if(t.blockRendering.Types.isInput(e))return e;return null},t.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},t.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},t.blockRendering.Row.prototype.getFirstSpacer=function(){for(var e,i=0;e=this.elements[i];i++)if(t.blockRendering.Types.isSpacer(e))return e;return null},t.blockRendering.Row.prototype.getLastSpacer=function(){for(var e,i=this.elements.length-1;e=this.elements[i];i--)if(t.blockRendering.Types.isSpacer(e))return e;return null},t.blockRendering.TopRow=function(e){t.blockRendering.TopRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},t.utils.object.inherits(t.blockRendering.TopRow,t.blockRendering.Row),t.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var e=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,i=t.getPreviousBlock();return!!t.outputConnection||e||!!i&&i.getNextBlock()==t},t.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},t.blockRendering.TopRow.prototype.measure=function(){for(var e,i=0,n=0,o=0,r=0;e=this.elements[r];r++)n+=e.width,t.blockRendering.Types.isSpacer(e)||(t.blockRendering.Types.isHat(e)?o=Math.max(o,e.ascenderHeight):i=Math.max(i,e.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,i)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width},t.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},t.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},t.blockRendering.BottomRow=function(e){t.blockRendering.BottomRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},t.utils.object.inherits(t.blockRendering.BottomRow,t.blockRendering.Row),t.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},t.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},t.blockRendering.BottomRow.prototype.measure=function(){for(var e,i=0,n=0,o=0,r=0;e=this.elements[r];r++)n+=e.width,t.blockRendering.Types.isSpacer(e)||(t.blockRendering.Types.isNextConnection(e)?o=Math.max(o,e.height):i=Math.max(i,e.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,i)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width},t.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},t.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},t.blockRendering.SpacerRow=function(e,i,n){t.blockRendering.SpacerRow.superClass_.constructor.call(this,e),this.type=this.type|t.blockRendering.Types.SPACER|t.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=n,this.height=i,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new t.blockRendering.InRowSpacer(this.constants_,n)]},t.utils.object.inherits(t.blockRendering.SpacerRow,t.blockRendering.Row),t.blockRendering.SpacerRow.prototype.measure=function(){},t.blockRendering.InputRow=function(e){t.blockRendering.InputRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},t.utils.object.inherits(t.blockRendering.InputRow,t.blockRendering.Row),t.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var e,i=0,n=0;e=this.elements[n];n++)this.width+=e.width,t.blockRendering.Types.isInput(e)&&(t.blockRendering.Types.isStatementInput(e)?i+=e.connectedBlockWidth:t.blockRendering.Types.isExternalInput(e)&&0!=e.connectedBlockWidth&&(i+=e.connectedBlockWidth-e.connectionWidth)),t.blockRendering.Types.isSpacer(e)||(this.height=Math.max(this.height,e.height));this.connectedBlockWidths=i,this.widthWithConnectedBlocks=this.width+i},t.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},t.blockRendering.RenderInfo=function(e,i){this.block_=i,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.outputConnection=i.outputConnection?new t.blockRendering.OutputConnection(this.constants_,i.outputConnection):null,this.isInline=i.getInputsInline()&&!i.isCollapsed(),this.isCollapsed=i.isCollapsed(),this.isInsertionMarker=i.isInsertionMarker(),this.RTL=i.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new t.blockRendering.TopRow(this.constants_),this.bottomRow=new t.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},t.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},t.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var e=new t.blockRendering.InputRow(this.constants_);this.inputRows.push(e);var i=this.block_.getIcons();if(i.length)for(var n,o=0;n=i[o];o++){var r=new t.blockRendering.Icon(this.constants_,n);this.isCollapsed&&n.collapseHidden?this.hiddenIcons.push(r):e.elements.push(r)}for(n=null,o=0;i=this.block_.inputList[o];o++)if(i.isVisible()){for(this.shouldStartNewRow_(i,n)&&(this.rows.push(e),e=new t.blockRendering.InputRow(this.constants_),this.inputRows.push(e)),n=0;r=i.fieldRow[n];n++)e.elements.push(new t.blockRendering.Field(this.constants_,r,i));this.addInput_(i,e),n=i}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new t.blockRendering.JaggedEdge(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)},t.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var e=!!this.block_.previousConnection,i=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;this.topRow.hasLeftSquareCorner(this.block_)?this.topRow.elements.push(new t.blockRendering.SquareCorner(this.constants_)):this.topRow.elements.push(new t.blockRendering.RoundCorner(this.constants_)),i?(e=new t.blockRendering.Hat(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new t.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type==t.NEXT_STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,this.topRow.hasRightSquareCorner(this.block_)?this.topRow.elements.push(new t.blockRendering.SquareCorner(this.constants_,"right")):this.topRow.elements.push(new t.blockRendering.RoundCorner(this.constants_,"right"))},t.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==t.NEXT_STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new t.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new t.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new t.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new t.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new t.blockRendering.RoundCorner(this.constants_,"right"))},t.blockRendering.RenderInfo.prototype.addInput_=function(e,i){this.isInline&&e.type==t.INPUT_VALUE?(i.elements.push(new t.blockRendering.InlineInput(this.constants_,e)),i.hasInlineInput=!0):e.type==t.NEXT_STATEMENT?(i.elements.push(new t.blockRendering.StatementInput(this.constants_,e)),i.hasStatement=!0):e.type==t.INPUT_VALUE?(i.elements.push(new t.blockRendering.ExternalValueInput(this.constants_,e)),i.hasExternalInput=!0):e.type==t.DUMMY_INPUT&&(i.minHeight=Math.max(i.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),i.hasDummyInput=!0),null==i.align&&(i.align=e.align)},t.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(e,i){return!(!i||e.type!=t.NEXT_STATEMENT&&i.type!=t.NEXT_STATEMENT&&(e.type!=t.INPUT_VALUE&&e.type!=t.DUMMY_INPUT||this.isInline))},t.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var e,i=0;e=this.rows[i];i++){var n=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(var o=0;o<n.length-1;o++){e.elements.push(n[o]);var r=this.getInRowSpacing_(n[o],n[o+1]);e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,r))}e.elements.push(n[n.length-1]),e.endsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(n[n.length-1],null)))}}},t.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(e,i){if(!e&&i&&t.blockRendering.Types.isStatementInput(i))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&t.blockRendering.Types.isInput(e)&&!i){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}return e&&t.blockRendering.Types.isLeftSquareCorner(e)&&i&&(t.blockRendering.Types.isPreviousConnection(i)||t.blockRendering.Types.isNextConnection(i))?i.notchOffset:e&&t.blockRendering.Types.isLeftRoundedCorner(e)&&i&&(t.blockRendering.Types.isPreviousConnection(i)||t.blockRendering.Types.isNextConnection(i))?i.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},t.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var t,e=0,i=0,n=0,o=0;t=this.rows[o];o++){if(t.measure(),i=Math.max(i,t.width),t.hasStatement){var r=t.getLastInput();e=Math.max(e,t.width-r.width)}n=Math.max(n,t.widthWithConnectedBlocks)}for(this.statementEdge=e,this.width=i,o=0;t=this.rows[o];o++)t.hasStatement&&(t.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(i,n),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},t.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var e,i=0;e=this.rows[i];i++)if(e.hasStatement)this.alignStatementRow_(e);else{var n=e.width;0<(n=this.getDesiredRowWidth_(e)-n)&&this.addAlignmentPadding_(e,n),t.blockRendering.Types.isTopOrBottomRow(e)&&(e.widthWithConnectedBlocks=e.width)}},t.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},t.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(e,i){var n=e.getFirstSpacer(),o=e.getLastSpacer();(e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=i),e.align==t.ALIGN_LEFT?o.width+=i:e.align==t.ALIGN_CENTRE?(n.width+=i/2,o.width+=i/2):e.align==t.ALIGN_RIGHT?n.width+=i:o.width+=i,e.width+=i},t.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var e=t.getLastInput(),i=t.width-e.width,n=this.statementEdge;0<(i=n-i)&&this.addAlignmentPadding_(t,i),i=t.width,n=this.getDesiredRowWidth_(t),e.width+=n-i,e.height=Math.max(e.height,t.height),t.width+=n-i,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},t.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var e=0;e<t.length;e++)this.rows.push(t[e]),e!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[e],t[e+1]))},t.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(e,i){var n=this.getSpacerRowHeight_(e,i),o=this.getSpacerRowWidth_(e,i);return n=new t.blockRendering.SpacerRow(this.constants_,n,o),e.hasStatement&&(n.followsStatement=!0),i.hasStatement&&(n.precedesStatement=!0),n},t.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,e){return this.width-this.startX},t.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){return this.constants_.MEDIUM_PADDING},t.blockRendering.RenderInfo.prototype.getElemCenterline_=function(e,i){return t.blockRendering.Types.isSpacer(i)?e.yPos+i.height/2:t.blockRendering.Types.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(i)?e+i.height/2:e-i.height/2):t.blockRendering.Types.isTopRow(e)?t.blockRendering.Types.isHat(i)?e.capline-i.height/2:e.capline+i.height/2:e.yPos+e.height/2},t.blockRendering.RenderInfo.prototype.recordElemPositions_=function(e){for(var i,n=e.xPos,o=0;i=e.elements[o];o++)t.blockRendering.Types.isSpacer(i)&&(i.height=e.height),i.xPos=n,i.centerline=this.getElemCenterline_(e,i),n+=i.width},t.blockRendering.RenderInfo.prototype.finalize_=function(){for(var t,e=0,i=0,n=0;t=this.rows[n];n++)t.yPos=i,t.xPos=this.startX,i+=t.height,e=Math.max(e,t.widthWithConnectedBlocks),this.recordElemPositions_(t);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=e+this.startX,this.height=i,this.startY=this.topRow.capline,this.bottomRow.baseline=i-this.bottomRow.descenderHeight},t.blockRendering.Drawer=function(t,e){this.block_=t,this.info_=e,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=e.getRenderer().getConstants()},t.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},t.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},t.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var t,e=0;t=this.info_.hiddenIcons[e];e++)t.icon.iconGroup_.setAttribute("display","none")},t.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var e=this.info_.rows[t];e.hasJaggedEdge?this.drawJaggedEdge_(e):e.hasStatement?this.drawStatementInput_(e):e.hasExternalInput?this.drawValueInput_(e):this.drawRightSideRow_(e)}this.drawBottom_(),this.drawLeft_()},t.blockRendering.Drawer.prototype.drawTop_=function(){var e=this.info_.topRow,i=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var n,o=0;n=i[o];o++)t.blockRendering.Types.isLeftRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:t.blockRendering.Types.isRightRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:t.blockRendering.Types.isPreviousConnection(n)?this.outlinePath_+=n.shape.pathLeft:t.blockRendering.Types.isHat(n)?this.outlinePath_+=this.constants_.START_HAT.path:t.blockRendering.Types.isSpacer(n)&&(this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",n.width));this.outlinePath_+=t.utils.svgPaths.lineOnAxis("v",e.height)},t.blockRendering.Drawer.prototype.drawJaggedEdge_=function(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+t.utils.svgPaths.lineOnAxis("v",e.height-this.constants_.JAGGED_TEETH.height)},t.blockRendering.Drawer.prototype.drawValueInput_=function(e){var i=e.getLastInput();this.positionExternalValueConnection_(e);var n="function"==typeof i.shape.pathDown?i.shape.pathDown(i.height):i.shape.pathDown;this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",i.xPos+i.width)+n+t.utils.svgPaths.lineOnAxis("v",e.height-i.connectionHeight)},t.blockRendering.Drawer.prototype.drawStatementInput_=function(e){var i=e.getLastInput(),n=i.xPos+i.notchOffset+i.shape.width;i=i.shape.pathRight+t.utils.svgPaths.lineOnAxis("h",-(i.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var o=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",n)+i+t.utils.svgPaths.lineOnAxis("v",o)+this.constants_.INSIDE_CORNERS.pathBottom+t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},t.blockRendering.Drawer.prototype.drawRightSideRow_=function(e){this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.blockRendering.Drawer.prototype.drawBottom_=function(){var e=this.info_.bottomRow,i=e.elements;this.positionNextConnection_();for(var n,o=0,r="",s=i.length-1;n=i[s];s--)t.blockRendering.Types.isNextConnection(n)?r+=n.shape.pathRight:t.blockRendering.Types.isLeftSquareCorner(n)?r+=t.utils.svgPaths.lineOnAxis("H",e.xPos):t.blockRendering.Types.isLeftRoundedCorner(n)?r+=this.constants_.OUTSIDE_CORNERS.bottomLeft:t.blockRendering.Types.isRightRoundedCorner(n)?(r+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):t.blockRendering.Types.isSpacer(n)&&(r+=t.utils.svgPaths.lineOnAxis("h",-1*n.width));this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.baseline-o),this.outlinePath_+=r},t.blockRendering.Drawer.prototype.drawLeft_=function(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){var i=e.connectionOffsetY+e.height;e="function"==typeof e.shape.pathUp?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",i)+e}this.outlinePath_+="z"},t.blockRendering.Drawer.prototype.drawInternals_=function(){for(var e,i=0;e=this.info_.rows[i];i++)for(var n,o=0;n=e.elements[o];o++)t.blockRendering.Types.isInlineInput(n)?this.drawInlineInput_(n):(t.blockRendering.Types.isIcon(n)||t.blockRendering.Types.isField(n))&&this.layoutField_(n)},t.blockRendering.Drawer.prototype.layoutField_=function(e){if(t.blockRendering.Types.isField(e))var i=e.field.getSvgRoot();else t.blockRendering.Types.isIcon(e)&&(i=e.icon.iconGroup_);var n=e.centerline-e.height/2,o=e.xPos,r="";this.info_.RTL&&(o=-(o+e.width),e.flipRtl&&(o+=e.width,r="scale(-1 1)")),t.blockRendering.Types.isIcon(e)?(i.setAttribute("display","block"),i.setAttribute("transform","translate("+o+","+n+")"),e.icon.computeIconLocation()):i.setAttribute("transform","translate("+o+","+n+")"+r),this.info_.isInsertionMarker&&i.setAttribute("display","none")},t.blockRendering.Drawer.prototype.drawInlineInput_=function(e){var i=e.width,n=e.height,o=e.connectionOffsetY,r=e.connectionHeight+o;this.inlinePath_+=t.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-n/2)+t.utils.svgPaths.lineOnAxis("v",o)+e.shape.pathDown+t.utils.svgPaths.lineOnAxis("v",n-r)+t.utils.svgPaths.lineOnAxis("h",i-e.connectionWidth)+t.utils.svgPaths.lineOnAxis("v",-n)+"z",this.positionInlineInputConnection_(e)},t.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){var e=t.centerline-t.height/2;if(t.connectionModel){var i=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(i*=-1),t.connectionModel.setOffsetInBlock(i,e+t.connectionOffsetY)}},t.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var i=t.xPos+t.statementEdge+e.notchOffset;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,t.yPos)}},t.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var i=t.xPos+t.width;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,t.yPos)}},t.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var e=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-e:e,0)}},t.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,i=e.xPos;e.connectionModel.setOffsetInBlock(this.info_.RTL?-i:i,t.baseline)}},t.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},t.blockRendering.PathObject=function(e,i,n){this.constants=n,this.svgRoot=e,this.svgPath=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=i,this.markerSvg=this.cursorSvg=null},t.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},t.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},t.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},t.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},t.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},t.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},t.blockRendering.PathObject.prototype.setClass_=function(e,i){i?t.utils.dom.addClass(this.svgRoot,e):t.utils.dom.removeClass(this.svgRoot,e)},t.blockRendering.PathObject.prototype.updateHighlighted=function(t){t?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")},t.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},t.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},t.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},t.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},t.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},t.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},t.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},t.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,e){},t.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},t.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},t.blockRendering.Renderer.prototype.init=function(e,i){this.constants_=this.makeConstants_(),i&&(this.overrides=i,t.utils.object.mixin(this.constants_,i)),this.constants_.setTheme(e),this.constants_.init()},t.blockRendering.Renderer.prototype.createDom=function(t,e){this.constants_.createDom(t,this.name+"-"+e.name,"."+this.getClassName()+"."+e.getClassName())},t.blockRendering.Renderer.prototype.refreshDom=function(e,i){var n=this.getConstants();n.dispose(),this.constants_=this.makeConstants_(),this.overrides&&t.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=n.randomIdentifier,this.constants_.setTheme(i),this.constants_.init(),this.createDom(e,i)},t.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},t.blockRendering.Renderer.prototype.makeConstants_=function(){return new t.blockRendering.ConstantProvider},t.blockRendering.Renderer.prototype.makeRenderInfo_=function(e){return new t.blockRendering.RenderInfo(this,e)},t.blockRendering.Renderer.prototype.makeDrawer_=function(e,i){return new t.blockRendering.Drawer(e,i)},t.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!t.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new t.blockRendering.Debug(this.getConstants())},t.blockRendering.Renderer.prototype.makeMarkerDrawer=function(e,i){return new t.blockRendering.MarkerSvg(e,this.getConstants(),i)},t.blockRendering.Renderer.prototype.makePathObject=function(e,i){return new t.blockRendering.PathObject(e,i,this.constants_)},t.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},t.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},t.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(e,i,n){return n==t.OUTPUT_VALUE?(n=i.outputConnection,e=t.Connection.lastConnectionInRow(e,i)):(n=i.previousConnection,e=e.lastConnectionInStack()),!!e&&n.getConnectionChecker().canConnect(e,n,!1)},t.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(e,i,n){return i.type==t.OUTPUT_VALUE||i.type==t.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(n,e.targetBlock(),i.type)?t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},t.blockRendering.Renderer.prototype.render=function(e){t.blockRendering.useDebugger&&!e.renderingDebugger&&(e.renderingDebugger=this.makeDebugger_());var i=this.makeRenderInfo_(e);i.measure(),this.makeDrawer_(e,i).draw()},t.geras={},t.geras.ConstantProvider=function(){t.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30},t.utils.object.inherits(t.geras.ConstantProvider,t.blockRendering.ConstantProvider),t.geras.ConstantProvider.prototype.getCSS_=function(e){return t.geras.ConstantProvider.superClass_.getCSS_.call(this,e).concat([e+" .blocklyInsertionMarker>.blocklyPathLight,",e+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},t.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},t.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},t.geras.Highlighter.prototype.drawTopCorner=function(e){this.steps_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var i,n=0;i=e.elements[n];n++)t.blockRendering.Types.isLeftSquareCorner(i)?this.steps_+=this.highlightConstants_.START_POINT:t.blockRendering.Types.isLeftRoundedCorner(i)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):t.blockRendering.Types.isPreviousConnection(i)?this.steps_+=this.notchPaths_.pathLeft:t.blockRendering.Types.isHat(i)?this.steps_+=this.startPaths_.path(this.RTL_):t.blockRendering.Types.isSpacer(i)&&0!=i.width&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",i.xPos+i.width-this.highlightOffset_));this.steps_+=t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width-this.highlightOffset_)},t.geras.Highlighter.prototype.drawJaggedEdge_=function(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+t.utils.svgPaths.lineOnAxis("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},t.geras.Highlighter.prototype.drawValueInput=function(e){var i=e.getLastInput();if(this.RTL_){var n=e.height-i.connectionHeight;this.steps_+=t.utils.svgPaths.moveTo(i.xPos+i.width-this.highlightOffset_,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",n)}else this.steps_+=t.utils.svgPaths.moveTo(i.xPos+i.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},t.geras.Highlighter.prototype.drawStatementInput=function(e){var i=e.getLastInput();if(this.RTL_){var n=e.height-2*this.insideCornerPaths_.height;this.steps_+=t.utils.svgPaths.moveTo(i.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",n)+this.insideCornerPaths_.pathBottom(this.RTL_)+t.utils.svgPaths.lineTo(e.width-i.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=t.utils.svgPaths.moveTo(i.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+t.utils.svgPaths.lineTo(e.width-i.xPos-this.insideCornerPaths_.width,0)},t.geras.Highlighter.prototype.drawRightSideRow=function(e){var i=e.xPos+e.width-this.highlightOffset_;e.followsStatement&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",i)),this.RTL_&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",i),e.height>this.highlightOffset_&&(this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height-this.highlightOffset_)))},t.geras.Highlighter.prototype.drawBottomRow=function(e){if(this.RTL_)this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.baseline-this.highlightOffset_);else{var i=this.info_.bottomRow.elements[0];t.blockRendering.Types.isLeftSquareCorner(i)?this.steps_+=t.utils.svgPaths.moveTo(e.xPos+this.highlightOffset_,e.baseline-this.highlightOffset_):t.blockRendering.Types.isLeftRoundedCorner(i)&&(this.steps_+=t.utils.svgPaths.moveTo(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},t.geras.Highlighter.prototype.drawLeft=function(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=t.utils.svgPaths.moveTo(this.info_.startX,e):(this.steps_+=t.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=t.utils.svgPaths.lineOnAxis("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,t.blockRendering.Types.isLeftRoundedCorner(e.elements[0])?this.steps_+=t.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.capline+this.highlightOffset_))},t.geras.Highlighter.prototype.drawInlineInput=function(e){var i=this.highlightOffset_,n=e.xPos+e.connectionWidth,o=e.centerline-e.height/2,r=e.width-e.connectionWidth,s=o+i;this.RTL_?(o=e.connectionOffsetY-i,e=e.height-(e.connectionOffsetY+e.connectionHeight)+i,this.inlineSteps_+=t.utils.svgPaths.moveTo(n-i,s)+t.utils.svgPaths.lineOnAxis("v",o)+this.puzzleTabPaths_.pathDown(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",e)+t.utils.svgPaths.lineOnAxis("h",r)):this.inlineSteps_+=t.utils.svgPaths.moveTo(e.xPos+e.width+i,s)+t.utils.svgPaths.lineOnAxis("v",e.height)+t.utils.svgPaths.lineOnAxis("h",-r)+t.utils.svgPaths.moveTo(n,o+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},t.geras.InlineInput=function(e,i){t.geras.InlineInput.superClass_.constructor.call(this,e,i),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},t.utils.object.inherits(t.geras.InlineInput,t.blockRendering.InlineInput),t.geras.StatementInput=function(e,i){t.geras.StatementInput.superClass_.constructor.call(this,e,i),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},t.utils.object.inherits(t.geras.StatementInput,t.blockRendering.StatementInput),t.geras.RenderInfo=function(e,i){t.geras.RenderInfo.superClass_.constructor.call(this,e,i)},t.utils.object.inherits(t.geras.RenderInfo,t.blockRendering.RenderInfo),t.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.geras.RenderInfo.prototype.populateBottomRow_=function(){t.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==t.NEXT_STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},t.geras.RenderInfo.prototype.addInput_=function(e,i){this.isInline&&e.type==t.INPUT_VALUE?(i.elements.push(new t.geras.InlineInput(this.constants_,e)),i.hasInlineInput=!0):e.type==t.NEXT_STATEMENT?(i.elements.push(new t.geras.StatementInput(this.constants_,e)),i.hasStatement=!0):e.type==t.INPUT_VALUE?(i.elements.push(new t.blockRendering.ExternalValueInput(this.constants_,e)),i.hasExternalInput=!0):e.type==t.DUMMY_INPUT&&(i.minHeight=Math.max(i.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),i.hasDummyInput=!0),this.isInline||null!=i.align||(i.align=e.align)},t.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var e,i=!1,n=0;e=this.rows[n];n++)e.hasExternalInput&&(i=!0);for(n=0;e=this.rows[n];n++){var o=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var r=0;r<o.length-1;r++){e.elements.push(o[r]);var s=this.getInRowSpacing_(o[r],o[r+1]);e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,s))}e.elements.push(o[o.length-1]),e.endsWithElemSpacer()&&(s=this.getInRowSpacing_(o[o.length-1],null),i&&e.hasDummyInput&&(s+=this.constants_.TAB_WIDTH),e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,s)))}}},t.geras.RenderInfo.prototype.getInRowSpacing_=function(e,i){if(!e)return i&&t.blockRendering.Types.isField(i)&&i.isEditable?this.constants_.MEDIUM_PADDING:i&&t.blockRendering.Types.isInlineInput(i)?this.constants_.MEDIUM_LARGE_PADDING:i&&t.blockRendering.Types.isStatementInput(i)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!t.blockRendering.Types.isInput(e)&&(!i||t.blockRendering.Types.isStatementInput(i)))return t.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:t.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:t.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:t.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:t.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:t.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInput(e)&&!i){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!t.blockRendering.Types.isInput(e)&&i&&t.blockRendering.Types.isInput(i)){if(t.blockRendering.Types.isField(e)&&e.isEditable){if(t.blockRendering.Types.isInlineInput(i)||t.blockRendering.Types.isExternalInput(i))return this.constants_.SMALL_PADDING}else{if(t.blockRendering.Types.isInlineInput(i)||t.blockRendering.Types.isExternalInput(i))return this.constants_.MEDIUM_LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(i))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(t.blockRendering.Types.isIcon(e)&&i&&!t.blockRendering.Types.isInput(i))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInlineInput(e)&&i&&t.blockRendering.Types.isField(i))return i.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isLeftSquareCorner(e)&&i){if(t.blockRendering.Types.isHat(i))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isPreviousConnection(i))return i.notchOffset;if(t.blockRendering.Types.isNextConnection(i))return e=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,i.notchOffset+e}if(t.blockRendering.Types.isLeftRoundedCorner(e)&&i){if(t.blockRendering.Types.isPreviousConnection(i))return i.notchOffset-this.constants_.CORNER_RADIUS;if(t.blockRendering.Types.isNextConnection(i))return e=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,i.notchOffset-this.constants_.CORNER_RADIUS+e}return t.blockRendering.Types.isField(e)&&i&&t.blockRendering.Types.isField(i)&&e.isEditable==i.isEditable||i&&t.blockRendering.Types.isJaggedEdge(i)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.geras.RenderInfo.prototype.getSpacerRowHeight_=function(e,i){return t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(i)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:t.blockRendering.Types.isTopRow(e)||t.blockRendering.Types.isBottomRow(i)?this.constants_.NO_PADDING:e.hasExternalInput&&i.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&i.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&i.hasStatement||!e.hasStatement&&i.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.geras.RenderInfo.prototype.getElemCenterline_=function(e,i){if(t.blockRendering.Types.isSpacer(i))return e.yPos+i.height/2;if(t.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(i)?e+i.height/2:e-i.height/2;if(t.blockRendering.Types.isTopRow(e))return t.blockRendering.Types.isHat(i)?e.capline-i.height/2:e.capline+i.height/2;var n=e.yPos;return t.blockRendering.Types.isField(i)||t.blockRendering.Types.isIcon(i)?(n+=i.height/2,(e.hasInlineInput||e.hasStatement)&&i.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(n+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):n=t.blockRendering.Types.isInlineInput(i)?n+i.height/2:n+e.height/2,n},t.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var e,i=0,n=null,o=this.rows.length-1;e=this.rows[o];o--)e.nextRightEdge=i,t.blockRendering.Types.isInputRow(e)&&(e.hasStatement&&this.alignStatementRow_(e),n&&n.hasStatement&&e.width<n.width?e.nextRightEdge=n.width:i=e.width,n=e);for(o=i=0;e=this.rows[o];o++)e.hasStatement?i=this.getDesiredRowWidth_(e):t.blockRendering.Types.isSpacer(e)?e.width=Math.max(i,e.nextRightEdge):(0<(i=Math.max(i,e.nextRightEdge)-e.width)&&this.addAlignmentPadding_(e,i),i=e.width)}else t.geras.RenderInfo.superClass_.alignRowElements_.call(this)},t.geras.RenderInfo.prototype.getDesiredRowWidth_=function(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:t.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},t.geras.RenderInfo.prototype.finalize_=function(){for(var t,e=0,i=0,n=0;t=this.rows[n];n++){t.yPos=i,t.xPos=this.startX,i+=t.height,e=Math.max(e,t.widthWithConnectedBlocks);var o=i-this.topRow.ascenderHeight;t==this.bottomRow&&o<this.constants_.MIN_BLOCK_HEIGHT&&(o=this.constants_.MIN_BLOCK_HEIGHT-o,this.bottomRow.height+=o,i+=o),this.recordElemPositions_(t)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=i-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=i+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},t.geras.Drawer=function(e,i){t.geras.Drawer.superClass_.constructor.call(this,e,i),this.highlighter_=new t.geras.Highlighter(i)},t.utils.object.inherits(t.geras.Drawer,t.blockRendering.Drawer),t.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var e=this.block_.pathObject;e.setPath(this.outlinePath_+"\n"+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},t.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),t.geras.Drawer.superClass_.drawTop_.call(this)},t.geras.Drawer.prototype.drawJaggedEdge_=function(e){this.highlighter_.drawJaggedEdge_(e),t.geras.Drawer.superClass_.drawJaggedEdge_.call(this,e)},t.geras.Drawer.prototype.drawValueInput_=function(e){this.highlighter_.drawValueInput(e),t.geras.Drawer.superClass_.drawValueInput_.call(this,e)},t.geras.Drawer.prototype.drawStatementInput_=function(e){this.highlighter_.drawStatementInput(e),t.geras.Drawer.superClass_.drawStatementInput_.call(this,e)},t.geras.Drawer.prototype.drawRightSideRow_=function(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width)+t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),t.geras.Drawer.superClass_.drawBottom_.call(this)},t.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),t.geras.Drawer.superClass_.drawLeft_.call(this)},t.geras.Drawer.prototype.drawInlineInput_=function(e){this.highlighter_.drawInlineInput(e),t.geras.Drawer.superClass_.drawInlineInput_.call(this,e)},t.geras.Drawer.prototype.positionInlineInputConnection_=function(t){var e=t.centerline-t.height/2;if(t.connectionModel){var i=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(i*=-1),t.connectionModel.setOffsetInBlock(i,e+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},t.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var i=t.xPos+t.statementEdge+e.notchOffset;i=this.info_.RTL?-1*i:i+this.constants_.DARK_PATH_OFFSET,e.connectionModel.setOffsetInBlock(i,t.yPos+this.constants_.DARK_PATH_OFFSET)}},t.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var i=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,t.yPos)}},t.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,i=e.xPos;e.connectionModel.setOffsetInBlock((this.info_.RTL?-i:i)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},t.geras.HighlightConstantProvider=function(e){this.constantProvider=e,this.OFFSET=.5,this.START_POINT=t.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},t.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},t.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,i=this.OFFSET,n=(1-Math.SQRT1_2)*(e+i)-i,o=t.utils.svgPaths.moveBy(n,n)+t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-n-i,e-n)),r=t.utils.svgPaths.arc("a","0 0,0",e+i,t.utils.svgPaths.point(e+i,e+i)),s=t.utils.svgPaths.moveBy(n,-n)+t.utils.svgPaths.arc("a","0 0,0",e+i,t.utils.svgPaths.point(e-n,n+i));return{width:e+i,height:e,pathTop:function(t){return t?o:""},pathBottom:function(t){return t?r:s}}},t.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,i=this.OFFSET,n=(1-Math.SQRT1_2)*(e-i)+i,o=t.utils.svgPaths.moveBy(n,n)+t.utils.svgPaths.arc("a","0 0,1",e-i,t.utils.svgPaths.point(e-n,-n+i)),r=t.utils.svgPaths.moveBy(i,e)+t.utils.svgPaths.arc("a","0 0,1",e-i,t.utils.svgPaths.point(e,-e+i)),s=-n,a=t.utils.svgPaths.moveBy(n,s)+t.utils.svgPaths.arc("a","0 0,1",e-i,t.utils.svgPaths.point(-n+i,-s-e));return{height:e,topLeft:function(t){return t?o:r},bottomLeft:function(){return a}}},t.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var e=this.constantProvider.TAB_WIDTH,i=this.constantProvider.TAB_HEIGHT,n=t.utils.svgPaths.moveBy(-2,3.4-i)+t.utils.svgPaths.lineTo(-.45*e,-2.1),o=t.utils.svgPaths.lineOnAxis("v",2.5)+t.utils.svgPaths.moveBy(.97*-e,2.5)+t.utils.svgPaths.curve("q",[t.utils.svgPaths.point(.05*-e,10),t.utils.svgPaths.point(.3*e,9.5)])+t.utils.svgPaths.moveBy(.67*e,-1.9)+t.utils.svgPaths.lineOnAxis("v",2.5),r=t.utils.svgPaths.lineOnAxis("v",-1.5)+t.utils.svgPaths.moveBy(-.92*e,-.5)+t.utils.svgPaths.curve("q",[t.utils.svgPaths.point(-.19*e,-5.5),t.utils.svgPaths.point(0,-11)])+t.utils.svgPaths.moveBy(.92*e,1),s=t.utils.svgPaths.moveBy(-5,i-.7)+t.utils.svgPaths.lineTo(.46*e,-2.1);return{width:e,height:i,pathUp:function(t){return t?n:r},pathDown:function(t){return t?o:s}}},t.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:t.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},t.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:t.utils.svgPaths.lineTo(5.1,2.6)+t.utils.svgPaths.moveBy(-10.2,6.8)+t.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},t.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var e=this.constantProvider.START_HAT.height,i=t.utils.svgPaths.moveBy(25,-8.7)+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(29.7,-6.2),t.utils.svgPaths.point(57.2,-.5),t.utils.svgPaths.point(75,8.7)]),n=t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(17.8,-9.2),t.utils.svgPaths.point(45.3,-14.9),t.utils.svgPaths.point(75,-8.7)])+t.utils.svgPaths.moveTo(100.5,e+.5);return{path:function(t){return t?i:n}}},t.geras.PathObject=function(e,i,n){this.constants=n,this.svgRoot=e,this.svgPathDark=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=i},t.utils.object.inherits(t.geras.PathObject,t.blockRendering.PathObject),t.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},t.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},t.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},t.geras.PathObject.prototype.applyColour=function(e){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),t.geras.PathObject.superClass_.applyColour.call(this,e),this.svgPath.setAttribute("stroke","none")},t.geras.PathObject.prototype.setStyle=function(e){this.style=e,this.colourDark=t.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},t.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},t.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},t.geras.PathObject.prototype.updateDisabled_=function(e){t.geras.PathObject.superClass_.updateDisabled_.call(this,e),e&&this.svgPath.setAttribute("stroke","none")},t.geras.Renderer=function(e){t.geras.Renderer.superClass_.constructor.call(this,e),this.highlightConstants_=null},t.utils.object.inherits(t.geras.Renderer,t.blockRendering.Renderer),t.geras.Renderer.prototype.init=function(e,i){t.geras.Renderer.superClass_.init.call(this,e,i),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},t.geras.Renderer.prototype.refreshDom=function(e,i){t.geras.Renderer.superClass_.refreshDom.call(this,e,i),this.getHighlightConstants().init()},t.geras.Renderer.prototype.makeConstants_=function(){return new t.geras.ConstantProvider},t.geras.Renderer.prototype.makeRenderInfo_=function(e){return new t.geras.RenderInfo(this,e)},t.geras.Renderer.prototype.makeDrawer_=function(e,i){return new t.geras.Drawer(e,i)},t.geras.Renderer.prototype.makePathObject=function(e,i){return new t.geras.PathObject(e,i,this.getConstants())},t.geras.Renderer.prototype.makeHighlightConstants_=function(){return new t.geras.HighlightConstantProvider(this.getConstants())},t.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},t.blockRendering.register("geras",t.geras.Renderer),t.thrasos={},t.thrasos.RenderInfo=function(e,i){t.thrasos.RenderInfo.superClass_.constructor.call(this,e,i)},t.utils.object.inherits(t.thrasos.RenderInfo,t.blockRendering.RenderInfo),t.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var e,i=!1,n=0;e=this.rows[n];n++)e.hasExternalInput&&(i=!0);for(n=0;e=this.rows[n];n++){var o=e.elements;e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0])));for(var r=0;r<o.length-1;r++){e.elements.push(o[r]);var s=this.getInRowSpacing_(o[r],o[r+1]);e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,s))}e.elements.push(o[o.length-1]),e.endsWithElemSpacer()&&(s=this.getInRowSpacing_(o[o.length-1],null),i&&e.hasDummyInput&&(s+=this.constants_.TAB_WIDTH),e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,s)))}},t.thrasos.RenderInfo.prototype.getInRowSpacing_=function(e,i){if(!e)return i&&t.blockRendering.Types.isField(i)&&i.isEditable?this.constants_.MEDIUM_PADDING:i&&t.blockRendering.Types.isInlineInput(i)?this.constants_.MEDIUM_LARGE_PADDING:i&&t.blockRendering.Types.isStatementInput(i)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!t.blockRendering.Types.isInput(e)&&!i)return t.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:t.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:t.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:t.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:t.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:t.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInput(e)&&!i){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!t.blockRendering.Types.isInput(e)&&i&&t.blockRendering.Types.isInput(i)){if(t.blockRendering.Types.isField(e)&&e.isEditable){if(t.blockRendering.Types.isInlineInput(i)||t.blockRendering.Types.isExternalInput(i))return this.constants_.SMALL_PADDING}else{if(t.blockRendering.Types.isInlineInput(i)||t.blockRendering.Types.isExternalInput(i))return this.constants_.MEDIUM_LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(i))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(t.blockRendering.Types.isIcon(e)&&i&&!t.blockRendering.Types.isInput(i))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInlineInput(e)&&i&&t.blockRendering.Types.isField(i))return i.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isLeftSquareCorner(e)&&i){if(t.blockRendering.Types.isHat(i))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isPreviousConnection(i)||t.blockRendering.Types.isNextConnection(i))return i.notchOffset}return t.blockRendering.Types.isLeftRoundedCorner(e)&&i?i.notchOffset-this.constants_.CORNER_RADIUS:t.blockRendering.Types.isField(e)&&i&&t.blockRendering.Types.isField(i)&&e.isEditable==i.isEditable||i&&t.blockRendering.Types.isJaggedEdge(i)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(e,i){return t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(i)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:t.blockRendering.Types.isTopRow(e)||t.blockRendering.Types.isBottomRow(i)?this.constants_.NO_PADDING:e.hasExternalInput&&i.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&i.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&i.hasStatement||e.hasDummyInput||i.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.thrasos.RenderInfo.prototype.getElemCenterline_=function(e,i){if(t.blockRendering.Types.isSpacer(i))return e.yPos+i.height/2;if(t.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(i)?e+i.height/2:e-i.height/2;if(t.blockRendering.Types.isTopRow(e))return t.blockRendering.Types.isHat(i)?e.capline-i.height/2:e.capline+i.height/2;var n=e.yPos;return t.blockRendering.Types.isField(i)&&e.hasStatement?n+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+i.height/2):n+e.height/2},t.thrasos.RenderInfo.prototype.finalize_=function(){for(var t,e=0,i=0,n=0;t=this.rows[n];n++){t.yPos=i,t.xPos=this.startX,i+=t.height,e=Math.max(e,t.widthWithConnectedBlocks);var o=i-this.topRow.ascenderHeight;t==this.bottomRow&&o<this.constants_.MIN_BLOCK_HEIGHT&&(o=this.constants_.MIN_BLOCK_HEIGHT-o,this.bottomRow.height+=o,i+=o),this.recordElemPositions_(t)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=i-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=i,this.startY=this.topRow.capline},t.thrasos.Renderer=function(e){t.thrasos.Renderer.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.thrasos.Renderer,t.blockRendering.Renderer),t.thrasos.Renderer.prototype.makeRenderInfo_=function(e){return new t.thrasos.RenderInfo(this,e)},t.blockRendering.register("thrasos",t.thrasos.Renderer),t.zelos={},t.zelos.ConstantProvider=function(){t.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},t.utils.object.inherits(t.zelos.ConstantProvider,t.blockRendering.ConstantProvider),t.zelos.ConstantProvider.prototype.setFontConstants_=function(e){t.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},t.zelos.ConstantProvider.prototype.init=function(){t.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},t.zelos.ConstantProvider.prototype.setDynamicProperties_=function(e){t.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var i=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=i&&!isNaN(i)?i:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE},t.zelos.ConstantProvider.prototype.dispose=function(){t.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&t.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&t.utils.dom.removeNode(this.replacementGlowFilter_)},t.zelos.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,i=this.START_HAT_WIDTH;return{height:e,width:i,path:t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(25,-e),t.utils.svgPaths.point(71,-e),t.utils.svgPaths.point(i,0)])}},t.zelos.ConstantProvider.prototype.makeHexagonal=function(){function e(e,n,o){var r=e/2;return r=r>i?i:r,o=o?-1:1,e=(n?-1:1)*e/2,t.utils.svgPaths.lineTo(-o*r,e)+t.utils.svgPaths.lineTo(o*r,e)}var i=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(t){return(t/=2)>i?i:t},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},t.zelos.ConstantProvider.prototype.makeRounded=function(){function e(e,i,o){var r=e>n?e-n:0;return e=(e>n?n:e)/2,t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point((i?-1:1)*e,(i?-1:1)*e))+t.utils.svgPaths.lineOnAxis("v",(o?1:-1)*r)+t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point((i?1:-1)*e,(i?-1:1)*e))}var i=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,n=2*i;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(t){return(t/=2)>i?i:t},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},t.zelos.ConstantProvider.prototype.makeSquared=function(){function e(e,n,o){return e-=2*i,t.utils.svgPaths.arc("a","0 0,1",i,t.utils.svgPaths.point((n?-1:1)*i,(n?-1:1)*i))+t.utils.svgPaths.lineOnAxis("v",(o?1:-1)*e)+t.utils.svgPaths.arc("a","0 0,1",i,t.utils.svgPaths.point((n?1:-1)*i,(n?-1:1)*i))}var i=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(t){return i},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},t.zelos.ConstantProvider.prototype.shapeFor=function(e){var i=e.getCheck();switch(!i&&e.targetConnection&&(i=e.targetConnection.getCheck()),e.type){case t.INPUT_VALUE:case t.OUTPUT_VALUE:if(null!=(e=e.getSourceBlock().getOutputShape()))switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return i&&-1!=i.indexOf("Boolean")?this.HEXAGONAL:(i&&-1!=i.indexOf("Number")||i&&i.indexOf("String"),this.ROUNDED);case t.PREVIOUS_STATEMENT:case t.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},t.zelos.ConstantProvider.prototype.makeNotch=function(){function e(e){return t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*r/2,0),t.utils.svgPaths.point(e*r*3/4,a/2),t.utils.svgPaths.point(e*r,a)])+t.utils.svgPaths.line([t.utils.svgPaths.point(e*r,s)])+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*r/4,a/2),t.utils.svgPaths.point(e*r/2,a),t.utils.svgPaths.point(e*r,a)])+t.utils.svgPaths.lineOnAxis("h",e*o)+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*r/2,0),t.utils.svgPaths.point(e*r*3/4,-a/2),t.utils.svgPaths.point(e*r,-a)])+t.utils.svgPaths.line([t.utils.svgPaths.point(e*r,-s)])+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*r/4,-a/2),t.utils.svgPaths.point(e*r/2,-a),t.utils.svgPaths.point(e*r,-a)])}var i=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,o=i/3,r=o/3,s=n/2,a=s/2,l=e(1),c=e(-1);return{type:this.SHAPES.NOTCH,width:i,height:n,pathLeft:l,pathRight:c}},t.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS,i=t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-e,e)),n=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,e));return{width:e,height:e,pathTop:i,pathBottom:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(e,e)),rightWidth:e,rightHeight:e,pathTopRight:n,pathBottomRight:t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,e))}},t.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(e){return t.utils.colour.blend("#000",e,.15)||e},t.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(e){return t.utils.colour.blend("#000",e,.25)||e},t.zelos.ConstantProvider.prototype.createDom=function(e,i,n){t.zelos.ConstantProvider.superClass_.createDom.call(this,e,i,n),e=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),i=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},i),n=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},i),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},i),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},i),this.selectedGlowFilterId=i.id,this.selectedGlowFilter_=i,e=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),i=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},i),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter_=e},t.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},t.zelos.TopRow=function(e){t.zelos.TopRow.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.TopRow,t.blockRendering.TopRow),t.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},t.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){var e=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection;return!!t.outputConnection||e},t.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},t.zelos.BottomRow=function(e){t.zelos.BottomRow.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.BottomRow,t.blockRendering.BottomRow),t.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},t.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},t.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},t.zelos.RightConnectionShape=function(e){t.zelos.RightConnectionShape.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},t.utils.object.inherits(t.zelos.RightConnectionShape,t.blockRendering.Measurable),t.zelos.StatementInput=function(e,i){if(t.zelos.StatementInput.superClass_.constructor.call(this,e,i),this.connectedBlock){for(e=this.connectedBlock;e.getNextBlock();)e=e.getNextBlock();e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}},t.utils.object.inherits(t.zelos.StatementInput,t.blockRendering.StatementInput),t.zelos.RenderInfo=function(e,i){t.zelos.RenderInfo.superClass_.constructor.call(this,e,i),this.topRow=new t.zelos.TopRow(this.constants_),this.bottomRow=new t.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!i.getInputsInline()||i.isCollapsed(),this.hasStatementInput=0<i.statementInputCount,this.rightSide=this.outputConnection?new t.zelos.RightConnectionShape(this.constants_):null},t.utils.object.inherits(t.zelos.RenderInfo,t.blockRendering.RenderInfo),t.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},t.zelos.RenderInfo.prototype.shouldStartNewRow_=function(e,i){return!!i&&(e.type==t.NEXT_STATEMENT||i.type==t.NEXT_STATEMENT||(e.type==t.INPUT_VALUE||e.type==t.DUMMY_INPUT)&&(!this.isInline||this.isMultiRow))},t.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):t.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},t.zelos.RenderInfo.prototype.getInRowSpacing_=function(e,i){return e&&i||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&i&&t.blockRendering.Types.isStatementInput(i)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&t.blockRendering.Types.isLeftRoundedCorner(e)&&i&&(t.blockRendering.Types.isPreviousConnection(i)||t.blockRendering.Types.isNextConnection(i))?i.notchOffset-this.constants_.CORNER_RADIUS:e&&t.blockRendering.Types.isLeftSquareCorner(e)&&i&&t.blockRendering.Types.isHat(i)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},t.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(e,i){if(t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(i))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var n=t.blockRendering.Types.isInputRow(e)&&e.hasStatement,o=t.blockRendering.Types.isInputRow(i)&&i.hasStatement;return o||n?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),o&&n?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):t.blockRendering.Types.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):t.blockRendering.Types.isBottomRow(i)?this.outputConnection?!i.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},t.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(e,i){var n=this.width-this.startX;return t.blockRendering.Types.isInputRow(e)&&e.hasStatement||t.blockRendering.Types.isInputRow(i)&&i.hasStatement?Math.max(n,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):n},t.zelos.RenderInfo.prototype.getElemCenterline_=function(e,i){if(e.hasStatement&&!t.blockRendering.Types.isSpacer(i)&&!t.blockRendering.Types.isStatementInput(i))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(t.blockRendering.Types.isInlineInput(i)){var n=i.connectedBlock;if(n&&n.outputConnection&&n.nextConnection)return e.yPos+n.height/2}return t.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,e,i)},t.zelos.RenderInfo.prototype.addInput_=function(e,i){e.type==t.DUMMY_INPUT&&i.hasDummyInput&&i.align==t.ALIGN_LEFT&&e.align==t.ALIGN_RIGHT&&(i.rightAlignedDummyInput=e),t.zelos.RenderInfo.superClass_.addInput_.call(this,e,i)},t.zelos.RenderInfo.prototype.addAlignmentPadding_=function(e,i){if(e.rightAlignedDummyInput){for(var n,o,r=0;(o=e.elements[r])&&(t.blockRendering.Types.isSpacer(o)&&(n=o),!t.blockRendering.Types.isField(o)||o.parentInput!=e.rightAlignedDummyInput);r++);if(n)return n.width+=i,void(e.width+=i)}t.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,e,i)},t.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,i=e,n=2;n<this.rows.length-1;n+=2){var o=this.rows[n-1],r=this.rows[n],s=this.rows[n+1];if(o=2==n?!!this.topRow.hasPreviousConnection:!!o.followsStatement,s=n+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement,t.blockRendering.Types.isInputRow(r)&&r.hasStatement)r.measure(),i=r.width-r.getLastInput().width+e;else if(o&&(2==n||s)&&t.blockRendering.Types.isInputRow(r)&&!r.hasStatement){s=r.xPos,o=null;for(var a,l=0;a=r.elements[l];l++)t.blockRendering.Types.isSpacer(a)&&(o=a),!(o&&(t.blockRendering.Types.isField(a)||t.blockRendering.Types.isInput(a))&&s<i)||t.blockRendering.Types.isField(a)&&(a.field instanceof t.FieldLabel||a.field instanceof t.FieldImage)||(o.width+=i-s),s+=a.width}}},t.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var t,e=0,i=0;t=this.rows[i];i++)t.yPos=e,e+=t.height;this.height=e,i=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,e=this.outputConnection.shape.height(i),i=this.outputConnection.shape.width(i),this.outputConnection.height=e,this.outputConnection.width=i,this.outputConnection.startX=i,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(e),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(i),t=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(t=i,this.rightSide.height=e,this.rightSide.width=t,this.rightSide.centerline=e/2,this.rightSide.xPos=this.width+t),this.startX=i,this.width+=i+t,this.widthWithChildren+=i+t}},t.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e,i=0,n=0;e=this.rows[n];n++)if(t.blockRendering.Types.isInputRow(e)){i=e.elements[e.elements.length-2];var o=this.getNegativeSpacing_(e.elements[1]),r=this.getNegativeSpacing_(i);i=o+r;var s=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-i<s&&(o=(i=this.width-s)/2,r=i/2),e.elements.unshift(new t.blockRendering.InRowSpacer(this.constants_,-o)),e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,-r))}if(i)for(this.width-=i,this.widthWithChildren-=i,this.rightSide.xPos-=i,n=0;e=this.rows[n];n++)t.blockRendering.Types.isTopOrBottomRow(e)&&(e.elements[1].width-=i,e.elements[1].widthWithConnectedBlocks-=i),e.width-=i,e.widthWithConnectedBlocks-=i}},t.zelos.RenderInfo.prototype.getNegativeSpacing_=function(e){if(!e)return 0;var i=this.outputConnection.width,n=this.outputConnection.shape.type,o=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(n){case o.SHAPES.ROUND:return n=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,i-(n=this.height/2>n?n:this.height/2)*(1-Math.sin(Math.acos((n-this.constants_.SMALL_PADDING)/n)));default:return 0}if(t.blockRendering.Types.isInlineInput(e)){var r=e.connectedBlock;return e=r?r.pathObject.outputShapeType:e.shape.type,r&&r.outputConnection&&(r.statementInputCount||r.nextConnection)||n==o.SHAPES.HEXAGONAL&&n!=e?0:i-this.constants_.SHAPE_IN_SHAPE_PADDING[n][e]}return t.blockRendering.Types.isField(e)?n==o.SHAPES.ROUND&&e.field instanceof t.FieldTextInput?i-2.75*o.GRID_UNIT:i-this.constants_.SHAPE_IN_SHAPE_PADDING[n][0]:t.blockRendering.Types.isIcon(e)?this.constants_.SMALL_PADDING:0},t.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var e=2;e<this.rows.length-1;e+=2){var i=this.rows[e-1],n=this.rows[e],o=this.rows[e+1],r=2==e,s=e+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!o.precedesStatement;if(r?this.topRow.hasPreviousConnection:i.followsStatement){var a=3==n.elements.length&&(n.elements[1].field instanceof t.FieldLabel||n.elements[1].field instanceof t.FieldImage);if(!r&&a)i.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.SMALL_PADDING,n.height-=this.constants_.MEDIUM_PADDING;else if(r||s){if(s){for(r=!1,s=0;a=n.elements[s];s++)if(t.blockRendering.Types.isInlineInput(a)&&a.connectedBlock&&!a.connectedBlock.isShadow()&&40<=a.connectedBlock.getHeightWidth().height){r=!0;break}r&&(i.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.SMALL_PADDING)}}else i.height+=this.constants_.SMALL_PADDING}}},t.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),t.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},t.zelos.Drawer=function(e,i){t.zelos.Drawer.superClass_.constructor.call(this,e,i)},t.utils.object.inherits(t.zelos.Drawer,t.blockRendering.Drawer),t.zelos.Drawer.prototype.draw=function(){var e=this.block_.pathObject;e.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),e.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&e.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()},t.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):t.zelos.Drawer.superClass_.drawOutline_.call(this)},t.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():t.zelos.Drawer.superClass_.drawLeft_.call(this)},t.zelos.Drawer.prototype.drawRightSideRow_=function(e){if(!(0>=e.height))if(e.precedesStatement||e.followsStatement){var i=this.constants_.INSIDE_CORNERS.rightHeight;i=e.height-(e.precedesStatement?i:0),this.outlinePath_+=(e.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<i?t.utils.svgPaths.lineOnAxis("V",e.yPos+i):"")+(e.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},t.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},t.zelos.Drawer.prototype.drawFlatTop_=function(){var e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",e.width)},t.zelos.Drawer.prototype.drawFlatBottom_=function(){var e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.baseline),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",-e.width)},t.zelos.Drawer.prototype.drawInlineInput_=function(e){this.positionInlineInputConnection_(e);var i=e.input.name;if(!e.connectedBlock&&!this.info_.isInsertionMarker){var n=e.width-2*e.connectionWidth;e=t.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-e.height/2)+t.utils.svgPaths.lineOnAxis("h",n)+e.shape.pathRightDown(e.height)+t.utils.svgPaths.lineOnAxis("h",-n)+e.shape.pathUp(e.height)+"z",this.block_.pathObject.setOutlinePath(i,e)}},t.zelos.Drawer.prototype.drawStatementInput_=function(e){var i=e.getLastInput(),n=i.xPos+i.notchOffset+i.shape.width,o=i.shape.pathRight+t.utils.svgPaths.lineOnAxis("h",-(i.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,r=e.height-2*this.constants_.INSIDE_CORNERS.height;i=this.constants_.INSIDE_CORNERS.pathBottom+t.utils.svgPaths.lineOnAxis("h",i.notchOffset-this.constants_.INSIDE_CORNERS.width)+(i.connectedBottomNextConnection?"":i.shape.pathLeft),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",n)+o+t.utils.svgPaths.lineOnAxis("v",r)+i+t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},t.zelos.PathObject=function(e,i,n){t.zelos.PathObject.superClass_.constructor.call(this,e,i,n),this.constants=n,this.svgPathSelected_=null,this.outlines_={},this.outputShapeType=this.remainingOutlines_=null},t.utils.object.inherits(t.zelos.PathObject,t.blockRendering.PathObject),t.zelos.PathObject.prototype.setPath=function(e){t.zelos.PathObject.superClass_.setPath.call(this,e),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",e)},t.zelos.PathObject.prototype.applyColour=function(e){t.zelos.PathObject.superClass_.applyColour.call(this,e),e.isShadow()&&e.getParent()&&this.svgPath.setAttribute("stroke",e.getParent().style.colourTertiary),e=0;for(var i,n=Object.keys(this.outlines_);i=n[e];e++)this.outlines_[i].setAttribute("fill",this.style.colourTertiary)},t.zelos.PathObject.prototype.flipRTL=function(){t.zelos.PathObject.superClass_.flipRTL.call(this);for(var e,i=0,n=Object.keys(this.outlines_);e=n[i];i++)this.outlines_[e].setAttribute("transform","scale(-1 1)")},t.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},t.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},t.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,e){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(e?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},t.zelos.PathObject.prototype.beginDrawing=function(){this.remainingOutlines_={};for(var t,e=0,i=Object.keys(this.outlines_);t=i[e];e++)this.remainingOutlines_[t]=1},t.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t,e=0,i=Object.keys(this.remainingOutlines_);t=i[e];e++)this.removeOutlinePath_(t);this.remainingOutlines_=null},t.zelos.PathObject.prototype.setOutlinePath=function(t,e){(t=this.getOutlinePath_(t)).setAttribute("d",e),t.setAttribute("fill",this.style.colourTertiary)},t.zelos.PathObject.prototype.getOutlinePath_=function(e){return this.outlines_[e]||(this.outlines_[e]=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[e],this.outlines_[e]},t.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},t.zelos.MarkerSvg=function(e,i,n){t.zelos.MarkerSvg.superClass_.constructor.call(this,e,i,n)},t.utils.object.inherits(t.zelos.MarkerSvg,t.blockRendering.MarkerSvg),t.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var e=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(e),this.showCurrent_()},t.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},t.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},t.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var e=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,e.width,e.height),this.setParent_(t),this.showCurrent_()},t.zelos.MarkerSvg.prototype.positionCircle_=function(t,e){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",e),this.currentMarkerSvg=this.markerCircle_},t.zelos.MarkerSvg.prototype.hide=function(){t.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},t.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(t.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerCircle_)}return this.markerSvg_},t.zelos.MarkerSvg.prototype.applyColour_=function(e){t.zelos.MarkerSvg.superClass_.applyColour_.call(this,e),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},t.zelos.Renderer=function(e){t.zelos.Renderer.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.Renderer,t.blockRendering.Renderer),t.zelos.Renderer.prototype.makeConstants_=function(){return new t.zelos.ConstantProvider},t.zelos.Renderer.prototype.makeRenderInfo_=function(e){return new t.zelos.RenderInfo(this,e)},t.zelos.Renderer.prototype.makeDrawer_=function(e,i){return new t.zelos.Drawer(e,i)},t.zelos.Renderer.prototype.makeMarkerDrawer=function(e,i){return new t.zelos.MarkerSvg(e,this.getConstants(),i)},t.zelos.Renderer.prototype.makePathObject=function(e,i){return new t.zelos.PathObject(e,i,this.getConstants())},t.zelos.Renderer.prototype.shouldHighlightConnection=function(e){return e.type!=t.INPUT_VALUE&&e.type!==t.OUTPUT_VALUE},t.zelos.Renderer.prototype.getConnectionPreviewMethod=function(e,i,n){return i.type==t.OUTPUT_VALUE?e.isConnected()?t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:t.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:t.zelos.Renderer.superClass_.getConnectionPreviewMethod(e,i,n)},t.blockRendering.register("zelos",t.zelos.Renderer),t.Themes.Dark=t.Theme.defineTheme("dark",{base:t.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),t.Themes.Deuteranopia={},t.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},t.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},t.Themes.Deuteranopia=new t.Theme("deuteranopia",t.Themes.Deuteranopia.defaultBlockStyles,t.Themes.Deuteranopia.categoryStyles),t.Themes.HighContrast={},t.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},t.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},t.Themes.HighContrast=new t.Theme("highcontrast",t.Themes.HighContrast.defaultBlockStyles,t.Themes.HighContrast.categoryStyles),t.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),t.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),t.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),t.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),t.Themes.Tritanopia={},t.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},t.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},t.Themes.Tritanopia=new t.Theme("tritanopia",t.Themes.Tritanopia.defaultBlockStyles,t.Themes.Tritanopia.categoryStyles),t.requires={},t})?n.apply(e,o):n)||(t.exports=r)},256:function(t,e,i){var n,o,r;o=[i(97)],void 0===(r="function"==typeof(n=function(t){"use strict";return t.setLocale=function(e){t.Msg=t.Msg||{},Object.keys(e).forEach((function(i){t.Msg[i]=e[i]}))},t})?n.apply(e,o):n)||(t.exports=r)},369:function(t,e,i){var n,o,r;!function(s,a){"use strict";o=[i(755)],void 0===(r="function"==typeof(n=function t(e,i){Object.keys||(Object.keys=(n=Object.prototype.hasOwnProperty,o=!{toString:null}.propertyIsEnumerable("toString"),s=(r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){if("function"!=typeof t&&("object"!=typeof t||null===t))throw new TypeError("Object.keys called on non-object");var e,i,a=[];for(e in t)n.call(t,e)&&a.push(e);if(o)for(i=0;i<s;i++)n.call(t,r[i])&&a.push(r[i]);return a}));var n,o,r,s;var a={},l="5.5.2";a.VERSION=l;var c={ar:{OK:"موافق",CANCEL:"الغاء",CONFIRM:"تأكيد"},bg_BG:{OK:"Ок",CANCEL:"Отказ",CONFIRM:"Потвърждавам"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},eu:{OK:"OK",CANCEL:"Ezeztatu",CONFIRM:"Onartu"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"قبول",CANCEL:"لغو",CONFIRM:"تایید"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"Confirmer"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},hu:{OK:"OK",CANCEL:"Mégsem",CONFIRM:"Megerősít"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},ka:{OK:"OK",CANCEL:"გაუქმება",CONFIRM:"დადასტურება"},ko:{OK:"OK",CANCEL:"취소",CONFIRM:"확인"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sk:{OK:"OK",CANCEL:"Zrušiť",CONFIRM:"Potvrdiť"},sl:{OK:"OK",CANCEL:"Prekliči",CONFIRM:"Potrdi"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},sw:{OK:"Sawa",CANCEL:"Ghairi",CONFIRM:"Thibitisha"},ta:{OK:"சரி",CANCEL:"ரத்து செய்",CONFIRM:"உறுதி செய்"},th:{OK:"ตกลง",CANCEL:"ยกเลิก",CONFIRM:"ยืนยัน"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},uk:{OK:"OK",CANCEL:"Відміна",CONFIRM:"Прийняти"},vi:{OK:"OK",CANCEL:"Hủy bỏ",CONFIRM:"Xác nhận"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}},h={dialog:'<div class="bootbox modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><div class="bootbox-body"></div></div></div></div></div>',header:'<div class="modal-header"><h5 class="modal-title"></h5></div>',footer:'<div class="modal-footer"></div>',closeButton:'<button type="button" class="bootbox-close-button close" aria-hidden="true">&times;</button>',form:'<form class="bootbox-form"></form>',button:'<button type="button" class="btn"></button>',option:"<option></option>",promptMessage:'<div class="bootbox-prompt-message"></div>',inputs:{text:'<input class="bootbox-input bootbox-input-text form-control" autocomplete="off" type="text" />',textarea:'<textarea class="bootbox-input bootbox-input-textarea form-control"></textarea>',email:'<input class="bootbox-input bootbox-input-email form-control" autocomplete="off" type="email" />',select:'<select class="bootbox-input bootbox-input-select form-control"></select>',checkbox:'<div class="form-check checkbox"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-checkbox" type="checkbox" /></label></div>',radio:'<div class="form-check radio"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-radio" type="radio" name="bootbox-radio" /></label></div>',date:'<input class="bootbox-input bootbox-input-date form-control" autocomplete="off" type="date" />',time:'<input class="bootbox-input bootbox-input-time form-control" autocomplete="off" type="time" />',number:'<input class="bootbox-input bootbox-input-number form-control" autocomplete="off" type="number" />',password:'<input class="bootbox-input bootbox-input-password form-control" autocomplete="off" type="password" />',range:'<input class="bootbox-input bootbox-input-range form-control-range" autocomplete="off" type="range" />'}},u={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body",value:"",inputType:"text",swapButtonOrder:!1,centerVertical:!1,multiple:!1,scrollable:!1,reusable:!1};function d(t,e){var i=t.length,n={};if(i<1||i>2)throw new Error("Invalid argument length");return 2===i||"string"==typeof t[0]?(n[e[0]]=t[0],n[e[1]]=t[1]):n=t[0],n}function p(t,i,n){return e.extend(!0,{},t,d(i,n))}function g(t,e,i,n){var o;n&&n[0]&&(o=n[0].locale||u.locale,(n[0].swapButtonOrder||u.swapButtonOrder)&&(e=e.reverse()));return f(p({className:"bootbox-"+t,buttons:m(e,o)},n,i),e)}function f(t,e){var n={};return b(e,(function(t,e){n[e]=!0})),b(t.buttons,(function(t){if(n[t]===i)throw new Error('button key "'+t+'" is not allowed (options are '+e.join(" ")+")")})),t}function m(t,e){for(var i={},n=0,o=t.length;n<o;n++){var r=t[n],s=r.toLowerCase(),a=r.toUpperCase();i[s]={label:v(a,e)}}return i}function v(t,e){var i=c[e];return i?i[t]:c.en[t]}function _(t){var i,n;if("object"!=typeof t)throw new Error("Please supply an object of options");if(!t.message)throw new Error('"message" option must not be null or an empty string.');return(t=e.extend({},u,t)).backdrop?t.backdrop="string"!=typeof t.backdrop||"static"!==t.backdrop.toLowerCase()||"static":t.backdrop=!1!==t.backdrop&&0!==t.backdrop&&"static",t.buttons||(t.buttons={}),i=t.buttons,n=y(i),b(i,(function(o,r,s){if(e.isFunction(r)&&(r=i[o]={callback:r}),"object"!==e.type(r))throw new Error('button with key "'+o+'" must be an object');if(r.label||(r.label=o),!r.className){var a=!1;a=t.swapButtonOrder?0===s:s===n-1,r.className=n<=2&&a?"btn-primary":"btn-secondary btn-default"}})),t}function y(t){return Object.keys(t).length}function b(t,i){var n=0;e.each(t,(function(t,e){i(t,e,n++)}))}function w(t){t.data.dialog.find(".bootbox-accept").first().trigger("focus")}function k(t){t.target===t.data.dialog[0]&&t.data.dialog.remove()}function C(t){t.target===t.data.dialog[0]&&(t.data.dialog.off("escape.close.bb"),t.data.dialog.off("click"))}function T(t,i,n){t.stopPropagation(),t.preventDefault(),e.isFunction(n)&&!1===n.call(i,t)||i.modal("hide")}function E(t,e,n){var o=!1,r=!0,s=!0;if("date"===t)e===i||(r=x(e))?n===i||(s=x(n))||console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your max value may not be enforced by this browser.'):console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your min value may not be enforced by this browser.');else if("time"===t){if(e!==i&&!(r=S(e)))throw new Error('"min" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.');if(n!==i&&!(s=S(n)))throw new Error('"max" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.')}else{if(e!==i&&isNaN(e))throw r=!1,new Error('"min" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-min for more information.');if(n!==i&&isNaN(n))throw s=!1,new Error('"max" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.')}if(r&&s){if(n<=e)throw new Error('"max" must be greater than "min". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.');o=!0}return o}function S(t){return/([01][0-9]|2[0-3]):[0-5][0-9]?:[0-5][0-9]/.test(t)}function x(t){return/(\d{4})-(\d{2})-(\d{2})/.test(t)}return a.locales=function(t){return t?c[t]:c},a.addLocale=function(t,i){return e.each(["OK","CANCEL","CONFIRM"],(function(t,e){if(!i[e])throw new Error('Please supply a translation for "'+e+'"')})),c[t]={OK:i.OK,CANCEL:i.CANCEL,CONFIRM:i.CONFIRM},a},a.removeLocale=function(t){if("en"===t)throw new Error('"en" is used as the default and fallback locale and cannot be removed.');return delete c[t],a},a.setLocale=function(t){return a.setDefaults("locale",t)},a.setDefaults=function(){var t={};return 2===arguments.length?t[arguments[0]]=arguments[1]:t=arguments[0],e.extend(u,t),a},a.hideAll=function(){return e(".bootbox").modal("hide"),a},a.init=function(i){return t(i||e)},a.dialog=function(t){if(e.fn.modal===i)throw new Error('"$.fn.modal" is not defined; please double check you have included the Bootstrap JavaScript library. See https://getbootstrap.com/docs/4.4/getting-started/javascript/ for more details.');if(t=_(t),e.fn.modal.Constructor.VERSION){t.fullBootstrapVersion=e.fn.modal.Constructor.VERSION;var n=t.fullBootstrapVersion.indexOf(".");t.bootstrap=t.fullBootstrapVersion.substring(0,n)}else t.bootstrap="2",t.fullBootstrapVersion="2.3.2",console.warn("Bootbox will *mostly* work with Bootstrap 2, but we do not officially support it. Please upgrade, if possible.");var o=e(h.dialog),r=o.find(".modal-dialog"),s=o.find(".modal-body"),a=e(h.header),l=e(h.footer),c=t.buttons,u={onEscape:t.onEscape};if(s.find(".bootbox-body").html(t.message),y(t.buttons)>0&&(b(c,(function(t,i){var n=e(h.button);switch(n.data("bb-handler",t),n.addClass(i.className),t){case"ok":case"confirm":n.addClass("bootbox-accept");break;case"cancel":n.addClass("bootbox-cancel")}n.html(i.label),l.append(n),u[t]=i.callback})),s.after(l)),!0===t.animate&&o.addClass("fade"),t.className&&o.addClass(t.className),t.size)switch(t.fullBootstrapVersion.substring(0,3)<"3.1"&&console.warn('"size" requires Bootstrap 3.1.0 or higher. You appear to be using '+t.fullBootstrapVersion+". Please upgrade to use this option."),t.size){case"small":case"sm":r.addClass("modal-sm");break;case"large":case"lg":r.addClass("modal-lg");break;case"extra-large":case"xl":r.addClass("modal-xl"),t.fullBootstrapVersion.substring(0,3)<"4.2"&&console.warn('Using size "xl"/"extra-large" requires Bootstrap 4.2.0 or higher. You appear to be using '+t.fullBootstrapVersion+". Please upgrade to use this option.")}if(t.scrollable&&(r.addClass("modal-dialog-scrollable"),t.fullBootstrapVersion.substring(0,3)<"4.3"&&console.warn('Using "scrollable" requires Bootstrap 4.3.0 or higher. You appear to be using '+t.fullBootstrapVersion+". Please upgrade to use this option.")),t.title&&(s.before(a),o.find(".modal-title").html(t.title)),t.closeButton){var d=e(h.closeButton);t.title?t.bootstrap>3?o.find(".modal-header").append(d):o.find(".modal-header").prepend(d):d.prependTo(s)}if(t.centerVertical&&(r.addClass("modal-dialog-centered"),t.fullBootstrapVersion<"4.0.0"&&console.warn('"centerVertical" requires Bootstrap 4.0.0-beta.3 or higher. You appear to be using '+t.fullBootstrapVersion+". Please upgrade to use this option.")),t.reusable||o.one("hide.bs.modal",{dialog:o},C),t.onHide){if(!e.isFunction(t.onHide))throw new Error('Argument supplied to "onHide" must be a function');o.on("hide.bs.modal",t.onHide)}if(t.reusable||o.one("hidden.bs.modal",{dialog:o},k),t.onHidden){if(!e.isFunction(t.onHidden))throw new Error('Argument supplied to "onHidden" must be a function');o.on("hidden.bs.modal",t.onHidden)}if(t.onShow){if(!e.isFunction(t.onShow))throw new Error('Argument supplied to "onShow" must be a function');o.on("show.bs.modal",t.onShow)}if(o.one("shown.bs.modal",{dialog:o},w),t.onShown){if(!e.isFunction(t.onShown))throw new Error('Argument supplied to "onShown" must be a function');o.on("shown.bs.modal",t.onShown)}return!0===t.backdrop&&o.on("click.dismiss.bs.modal",(function(t){o.children(".modal-backdrop").length&&(t.currentTarget=o.children(".modal-backdrop").get(0)),t.target===t.currentTarget&&o.trigger("escape.close.bb")})),o.on("escape.close.bb",(function(t){u.onEscape&&T(t,o,u.onEscape)})),o.on("click",".modal-footer button:not(.disabled)",(function(t){var n=e(this).data("bb-handler");n!==i&&T(t,o,u[n])})),o.on("click",".bootbox-close-button",(function(t){T(t,o,u.onEscape)})),o.on("keyup",(function(t){27===t.which&&o.trigger("escape.close.bb")})),e(t.container).append(o),o.modal({backdrop:t.backdrop,keyboard:!1,show:!1}),t.show&&o.modal("show"),o},a.alert=function(){var t;if((t=g("alert",["ok"],["message","callback"],arguments)).callback&&!e.isFunction(t.callback))throw new Error('alert requires the "callback" property to be a function when provided');return t.buttons.ok.callback=t.onEscape=function(){return!e.isFunction(t.callback)||t.callback.call(this)},a.dialog(t)},a.confirm=function(){var t;if(t=g("confirm",["cancel","confirm"],["message","callback"],arguments),!e.isFunction(t.callback))throw new Error("confirm requires a callback");return t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,!1)},t.buttons.confirm.callback=function(){return t.callback.call(this,!0)},a.dialog(t)},a.prompt=function(){var t,n,o,r,s,l;if(o=e(h.form),(t=g("prompt",["cancel","confirm"],["title","callback"],arguments)).value||(t.value=u.value),t.inputType||(t.inputType=u.inputType),s=t.show===i?u.show:t.show,t.show=!1,t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,null)},t.buttons.confirm.callback=function(){var i;if("checkbox"===t.inputType)i=r.find("input:checked").map((function(){return e(this).val()})).get();else if("radio"===t.inputType)i=r.find("input:checked").val();else{if(r[0].checkValidity&&!r[0].checkValidity())return!1;i="select"===t.inputType&&!0===t.multiple?r.find("option:selected").map((function(){return e(this).val()})).get():r.val()}return t.callback.call(this,i)},!t.title)throw new Error("prompt requires a title");if(!e.isFunction(t.callback))throw new Error("prompt requires a callback");if(!h.inputs[t.inputType])throw new Error("Invalid prompt type");switch(r=e(h.inputs[t.inputType]),t.inputType){case"text":case"textarea":case"email":case"password":r.val(t.value),t.placeholder&&r.attr("placeholder",t.placeholder),t.pattern&&r.attr("pattern",t.pattern),t.maxlength&&r.attr("maxlength",t.maxlength),t.required&&r.prop({required:!0}),t.rows&&!isNaN(parseInt(t.rows))&&"textarea"===t.inputType&&r.attr({rows:t.rows});break;case"date":case"time":case"number":case"range":if(r.val(t.value),t.placeholder&&r.attr("placeholder",t.placeholder),t.pattern&&r.attr("pattern",t.pattern),t.required&&r.prop({required:!0}),"date"!==t.inputType&&t.step){if(!("any"===t.step||!isNaN(t.step)&&parseFloat(t.step)>0))throw new Error('"step" must be a valid positive number or the value "any". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-step for more information.');r.attr("step",t.step)}E(t.inputType,t.min,t.max)&&(t.min!==i&&r.attr("min",t.min),t.max!==i&&r.attr("max",t.max));break;case"select":var c={};if(l=t.inputOptions||[],!e.isArray(l))throw new Error("Please pass an array of input options");if(!l.length)throw new Error('prompt with "inputType" set to "select" requires at least one option');t.placeholder&&r.attr("placeholder",t.placeholder),t.required&&r.prop({required:!0}),t.multiple&&r.prop({multiple:!0}),b(l,(function(t,n){var o=r;if(n.value===i||n.text===i)throw new Error('each option needs a "value" property and a "text" property');n.group&&(c[n.group]||(c[n.group]=e("<optgroup />").attr("label",n.group)),o=c[n.group]);var s=e(h.option);s.attr("value",n.value).text(n.text),o.append(s)})),b(c,(function(t,e){r.append(e)})),r.val(t.value);break;case"checkbox":var d=e.isArray(t.value)?t.value:[t.value];if(!(l=t.inputOptions||[]).length)throw new Error('prompt with "inputType" set to "checkbox" requires at least one option');r=e('<div class="bootbox-checkbox-list"></div>'),b(l,(function(n,o){if(o.value===i||o.text===i)throw new Error('each option needs a "value" property and a "text" property');var s=e(h.inputs[t.inputType]);s.find("input").attr("value",o.value),s.find("label").append("\n"+o.text),b(d,(function(t,e){e===o.value&&s.find("input").prop("checked",!0)})),r.append(s)}));break;case"radio":if(t.value!==i&&e.isArray(t.value))throw new Error('prompt with "inputType" set to "radio" requires a single, non-array value for "value"');if(!(l=t.inputOptions||[]).length)throw new Error('prompt with "inputType" set to "radio" requires at least one option');r=e('<div class="bootbox-radiobutton-list"></div>');var p=!0;b(l,(function(n,o){if(o.value===i||o.text===i)throw new Error('each option needs a "value" property and a "text" property');var s=e(h.inputs[t.inputType]);s.find("input").attr("value",o.value),s.find("label").append("\n"+o.text),t.value!==i&&o.value===t.value&&(s.find("input").prop("checked",!0),p=!1),r.append(s)})),p&&r.find('input[type="radio"]').first().prop("checked",!0)}if(o.append(r),o.on("submit",(function(t){t.preventDefault(),t.stopPropagation(),n.find(".bootbox-accept").trigger("click")})),""!==e.trim(t.message)){var f=e(h.promptMessage).html(t.message);o.prepend(f),t.message=o}else t.message=o;return(n=a.dialog(t)).off("shown.bs.modal",w),n.on("shown.bs.modal",(function(){r.focus()})),!0===s&&n.modal("show"),n},a})?n.apply(e,o):n)||(t.exports=r)}()},915:(t,e,i)=>{i(294),i(309),i(929),i(50),i(63),i(737),i(852),i(278),i(927),i(497),i(814),i(377)},377:(t,e,i)=>{!function(t){"use strict";var e=function(i,n){this.options=t.extend({},e.DEFAULTS,n);var o=this.options.target===e.DEFAULTS.target?t(this.options.target):t(document).find(this.options.target);this.$target=o.on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(i),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function i(i){return this.each((function(){var n=t(this),o=n.data("bs.affix"),r="object"==typeof i&&i;o||n.data("bs.affix",o=new e(this,r)),"string"==typeof i&&o[i]()}))}e.VERSION="3.4.1",e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0,target:window},e.prototype.getState=function(t,e,i,n){var o=this.$target.scrollTop(),r=this.$element.offset(),s=this.$target.height();if(null!=i&&"top"==this.affixed)return o<i&&"top";if("bottom"==this.affixed)return null!=i?!(o+this.unpin<=r.top)&&"bottom":!(o+s<=t-n)&&"bottom";var a=null==this.affixed,l=a?o:r.top;return null!=i&&o<=i?"top":null!=n&&l+(a?s:e)>=t-n&&"bottom"},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var i=this.$element.height(),n=this.options.offset,o=n.top,r=n.bottom,s=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(r=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof r&&(r=n.bottom(this.$element));var a=this.getState(s,i,o,r);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-i-r})}};var n=t.fn.affix;t.fn.affix=i,t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",(function(){t('[data-spy="affix"]').each((function(){var e=t(this),n=e.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),i.call(e,n)}))}))}(i(755))},309:(t,e,i)=>{!function(t){"use strict";var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.VERSION="3.4.1",i.TRANSITION_DURATION=150,i.prototype.close=function(e){var n=t(this),o=n.attr("data-target");o||(o=(o=n.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,"")),o="#"===o?[]:o;var r=t(document).find(o);function s(){r.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),r.length||(r=n.closest(".alert")),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s())};var n=t.fn.alert;t.fn.alert=function(e){return this.each((function(){var n=t(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof e&&o[e].call(n)}))},t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",e,i.prototype.close)}(i(755))},929:(t,e,i)=>{!function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.isLoading=!1};function i(i){return this.each((function(){var n=t(this),o=n.data("bs.button"),r="object"==typeof i&&i;o||n.data("bs.button",o=new e(this,r)),"toggle"==i?o.toggle():i&&o.setState(i)}))}e.VERSION="3.4.1",e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",r=n.data();e+="Text",null==r.resetText&&n.data("resetText",n[o]()),setTimeout(t.proxy((function(){n[o](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i).prop(i,!1))}),this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=i,t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',(function(e){var n=t(e.target).closest(".btn");i.call(n,"toggle"),t(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))})).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',(function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))}))}(i(755))},50:(t,e,i)=>{!function(t){"use strict";var e=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};function i(i){return this.each((function(){var n=t(this),o=n.data("bs.carousel"),r=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i),s="string"==typeof i?i:r.slide;o||n.data("bs.carousel",o=new e(this,r)),"number"==typeof i?o.to(i):s?o[s]():r.interval&&o.pause().cycle()}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=600,e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},e.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},e.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var n=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(n)},e.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",(function(){e.to(t)})):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){if(!this.sliding)return this.slide("next")},e.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},e.prototype.slide=function(i,n){var o=this.$element.find(".item.active"),r=n||this.getItemForDirection(i,o),s=this.interval,a="next"==i?"left":"right",l=this;if(r.hasClass("active"))return this.sliding=!1;var c=r[0],h=t.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=t(this.$indicators.children()[this.getItemIndex(r)]);u&&u.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(i),"object"==typeof r&&r.length&&r[0].offsetWidth,o.addClass(a),r.addClass(a),o.one("bsTransitionEnd",(function(){r.removeClass([i,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout((function(){l.$element.trigger(d)}),0)})).emulateTransitionEnd(e.TRANSITION_DURATION)):(o.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(d)),s&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=i,t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var o=function(e){var n=t(this),o=n.attr("href");o&&(o=o.replace(/.*(?=#[^\s]+$)/,""));var r=n.attr("data-target")||o,s=t(document).find(r);if(s.hasClass("carousel")){var a=t.extend({},s.data(),n.data()),l=n.attr("data-slide-to");l&&(a.interval=!1),i.call(s,a),l&&s.data("bs.carousel").to(l),e.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",(function(){t('[data-ride="carousel"]').each((function(){var e=t(this);i.call(e,e.data())}))}))}(i(755))},63:(t,e,i)=>{!function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+i.id+'"],[data-toggle="collapse"][data-target="#'+i.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function i(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(document).find(n)}function n(i){return this.each((function(){var n=t(this),o=n.data("bs.collapse"),r=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i);!o&&r.toggle&&/show|hide/.test(i)&&(r.toggle=!1),o||n.data("bs.collapse",o=new e(this,r)),"string"==typeof i&&o[i]()}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=350,e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(i=o.data("bs.collapse"))&&i.transitioning)){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),i||o.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(e.TRANSITION_DURATION)[s](this.$element[0][l])}}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var i=t.Event("hide.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return o.call(this);this.$element[n](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(e.TRANSITION_DURATION)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},e.prototype.getParent=function(){return t(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy((function(e,n){var o=t(n);this.addAriaAndCollapsedClass(i(o),o)}),this)).end()},e.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',(function(e){var o=t(this);o.attr("data-target")||e.preventDefault();var r=i(o),s=r.data("bs.collapse")?"toggle":o.data();n.call(r,s)}))}(i(755))},737:(t,e,i)=>{!function(t){"use strict";var e='[data-toggle="dropdown"]',i=function(e){t(e).on("click.bs.dropdown",this.toggle)};function n(e){var i=e.attr("data-target");i||(i=(i=e.attr("href"))&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n="#"!==i?t(document).find(i):null;return n&&n.length?n:e.parent()}function o(i){i&&3===i.which||(t(".dropdown-backdrop").remove(),t(e).each((function(){var e=t(this),o=n(e),r={relatedTarget:this};o.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(o[0],i.target)||(o.trigger(i=t.Event("hide.bs.dropdown",r)),i.isDefaultPrevented()||(e.attr("aria-expanded","false"),o.removeClass("open").trigger(t.Event("hidden.bs.dropdown",r)))))})))}i.VERSION="3.4.1",i.prototype.toggle=function(e){var i=t(this);if(!i.is(".disabled, :disabled")){var r=n(i),s=r.hasClass("open");if(o(),!s){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",o);var a={relatedTarget:this};if(r.trigger(e=t.Event("show.bs.dropdown",a)),e.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger(t.Event("shown.bs.dropdown",a))}return!1}},i.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var o=t(this);if(i.preventDefault(),i.stopPropagation(),!o.is(".disabled, :disabled")){var r=n(o),s=r.hasClass("open");if(!s&&27!=i.which||s&&27==i.which)return 27==i.which&&r.find(e).trigger("focus"),o.trigger("click");var a=r.find(".dropdown-menu li:not(.disabled):visible a");if(a.length){var l=a.index(i.target);38==i.which&&l>0&&l--,40==i.which&&l<a.length-1&&l++,~l||(l=0),a.eq(l).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=function(e){return this.each((function(){var n=t(this),o=n.data("bs.dropdown");o||n.data("bs.dropdown",o=new i(this)),"string"==typeof e&&o[e].call(n)}))},t.fn.dropdown.Constructor=i,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",(function(t){t.stopPropagation()})).on("click.bs.dropdown.data-api",e,i.prototype.toggle).on("keydown.bs.dropdown.data-api",e,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(i(755))},852:(t,e,i)=>{!function(t){"use strict";var e=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy((function(){this.$element.trigger("loaded.bs.modal")}),this))};function i(i,n){return this.each((function(){var o=t(this),r=o.data("bs.modal"),s=t.extend({},e.DEFAULTS,o.data(),"object"==typeof i&&i);r||o.data("bs.modal",r=new e(this,s)),"string"==typeof i?r[i](n):s.show&&r.show(n)}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(i){var n=this,o=t.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",(function(){n.$element.one("mouseup.dismiss.bs.modal",(function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)}))})),this.backdrop((function(){var o=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:i});o?n.$dialog.one("bsTransitionEnd",(function(){n.$element.trigger("focus").trigger(r)})).emulateTransitionEnd(e.TRANSITION_DURATION):n.$element.trigger("focus").trigger(r)})))},e.prototype.hide=function(i){i&&i.preventDefault(),i=t.Event("hide.bs.modal"),this.$element.trigger(i),this.isShown&&!i.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy((function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")}),this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy((function(t){27==t.which&&this.hide()}),this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},e.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop((function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")}))},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(i){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy((function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())}),this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;r?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):i()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){n.removeBackdrop(),i&&i()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):s()}else i&&i()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var i=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",e+i),t(this.fixedContent).each((function(e,n){var o=n.style.paddingRight,r=t(n).css("padding-right");t(n).data("padding-right",o).css("padding-right",parseFloat(r)+i+"px")})))},e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),t(this.fixedContent).each((function(e,i){var n=t(i).data("padding-right");t(i).removeData("padding-right"),i.style.paddingRight=n||""}))},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=i,t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(e){var n=t(this),o=n.attr("href"),r=n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,""),s=t(document).find(r),a=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),n.data());n.is("a")&&e.preventDefault(),s.one("show.bs.modal",(function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",(function(){n.is(":visible")&&n.trigger("focus")}))})),i.call(s,a,this)}))}(i(755))},927:(t,e,i)=>{!function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.4.1",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),(e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype)).constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();if(this.options.html){var n=typeof i;this.options.sanitize&&(e=this.sanitizeHtml(e),"string"===n&&(i=this.sanitizeHtml(i))),t.find(".popover-title").html(e),t.find(".popover-content").children().detach().end()["string"===n?"html":"append"](i)}else t.find(".popover-title").text(e),t.find(".popover-content").children().detach().end().text(i);t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=function(i){return this.each((function(){var n=t(this),o=n.data("bs.popover"),r="object"==typeof i&&i;!o&&/destroy|hide/.test(i)||(o||n.data("bs.popover",o=new e(this,r)),"string"==typeof i&&o[i]())}))},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(i(755))},497:(t,e,i)=>{!function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(i).is(document.body)?t(window):t(i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each((function(){var n=t(this),o=n.data("bs.scrollspy"),r="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new e(this,r)),"string"==typeof i&&o[i]()}))}e.VERSION="3.4.1",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map((function(){var e=t(this),o=e.data("target")||e.attr("href"),r=/^#./.test(o)&&t(o);return r&&r.length&&r.is(":visible")&&[[r[i]().top+n,o]]||null})).sort((function(t,e){return t[0]-e[0]})).each((function(){e.offsets.push(this[0]),e.targets.push(this[1])}))},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return s!=(t=r[r.length-1])&&this.activate(t);if(s&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)s!=r[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",(function(){t('[data-spy="scroll"]').each((function(){var e=t(this);i.call(e,e.data())}))}))}(i(755))},814:(t,e,i)=>{!function(t){"use strict";var e=function(e){this.element=t(e)};function i(i){return this.each((function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new e(this)),"string"==typeof i&&o[i]()}))}e.VERSION="3.4.1",e.TRANSITION_DURATION=150,e.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=i.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(r),e.trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){var a=t(document).find(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),(function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})}))}}},e.prototype.activate=function(i,n,o){var r=n.find("> .active"),s=o&&t.support.transition&&(r.length&&r.hasClass("fade")||!!n.find("> .fade").length);function a(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(i[0].offsetWidth,i.addClass("in")):i.removeClass("fade"),i.parent(".dropdown-menu").length&&i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}r.length&&s?r.one("bsTransitionEnd",a).emulateTransitionEnd(e.TRANSITION_DURATION):a(),r.removeClass("in")};var n=t.fn.tab;t.fn.tab=i,t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var o=function(e){e.preventDefault(),i.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(i(755))},278:(t,e,i)=>{!function(t){"use strict";var e=["sanitize","whiteList","sanitizeFn"],i=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],n={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},o=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,r=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function s(e,n){var s=e.nodeName.toLowerCase();if(-1!==t.inArray(s,n))return-1===t.inArray(s,i)||Boolean(e.nodeValue.match(o)||e.nodeValue.match(r));for(var a=t(n).filter((function(t,e){return e instanceof RegExp})),l=0,c=a.length;l<c;l++)if(s.match(a[l]))return!0;return!1}function a(e,i,n){if(0===e.length)return e;if(n&&"function"==typeof n)return n(e);if(!document.implementation||!document.implementation.createHTMLDocument)return e;var o=document.implementation.createHTMLDocument("sanitization");o.body.innerHTML=e;for(var r=t.map(i,(function(t,e){return e})),a=t(o.body).find("*"),l=0,c=a.length;l<c;l++){var h=a[l],u=h.nodeName.toLowerCase();if(-1!==t.inArray(u,r))for(var d=t.map(h.attributes,(function(t){return t})),p=[].concat(i["*"]||[],i[u]||[]),g=0,f=d.length;g<f;g++)s(d[g],p)||h.removeAttribute(d[g].nodeName);else h.parentNode.removeChild(h)}return o.body.innerHTML}var l=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};l.VERSION="3.4.1",l.TRANSITION_DURATION=150,l.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:n},l.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(document).find(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),r=o.length;r--;){var s=o[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},l.prototype.getDefaults=function(){return l.DEFAULTS},l.prototype.getOptions=function(i){var n=this.$element.data();for(var o in n)n.hasOwnProperty(o)&&-1!==t.inArray(o,e)&&delete n[o];return(i=t.extend({},this.getDefaults(),n,i)).delay&&"number"==typeof i.delay&&(i.delay={show:i.delay,hide:i.delay}),i.sanitize&&(i.template=a(i.template,i.whiteList,i.sanitizeFn)),i},l.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,(function(t,n){i[t]!=n&&(e[t]=n)})),e},l.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState)i.hoverState="in";else{if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout((function(){"in"==i.hoverState&&i.show()}),i.options.delay.show)}},l.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},l.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout((function(){"out"==i.hoverState&&i.hide()}),i.options.delay.hide)}},l.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var n=this,o=this.tip(),r=this.getUID(this.type);this.setContent(),o.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,c=a.test(s);c&&(s=s.replace(a,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(t(document).find(this.options.container)):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var h=this.getPosition(),u=o[0].offsetWidth,d=o[0].offsetHeight;if(c){var p=s,g=this.getPosition(this.$viewport);s="bottom"==s&&h.bottom+d>g.bottom?"top":"top"==s&&h.top-d<g.top?"bottom":"right"==s&&h.right+u>g.width?"left":"left"==s&&h.left-u<g.left?"right":s,o.removeClass(p).addClass(s)}var f=this.getCalculatedOffset(s,h,u,d);this.applyPlacement(f,s);var m=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",m).emulateTransitionEnd(l.TRANSITION_DURATION):m()}},l.prototype.applyPlacement=function(e,i){var n=this.tip(),o=n[0].offsetWidth,r=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top+=s,e.left+=a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=r&&(e.top=e.top+r-c);var h=this.getViewportAdjustedDelta(i,e,l,c);h.left?e.left+=h.left:e.top+=h.top;var u=/top|bottom/.test(i),d=u?2*h.left-o+l:2*h.top-r+c,p=u?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(d,n[0][p],u)},l.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},l.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();this.options.html?(this.options.sanitize&&(e=a(e,this.options.whiteList,this.options.sanitizeFn)),t.find(".tooltip-inner").html(e)):t.find(".tooltip-inner").text(e),t.removeClass("fade in top bottom left right")},l.prototype.hide=function(e){var i=this,n=t(this.$tip),o=t.Event("hide.bs."+this.type);function r(){"in"!=i.hoverState&&n.detach(),i.$element&&i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),e&&e()}if(this.$element.trigger(o),!o.isDefaultPrevented())return n.removeClass("in"),t.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",r).emulateTransitionEnd(l.TRANSITION_DURATION):r(),this.hoverState=null,this},l.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},l.prototype.hasContent=function(){return this.getTitle()},l.prototype.getPosition=function(e){var i=(e=e||this.$element)[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var r=window.SVGElement&&i instanceof window.SVGElement,s=n?{top:0,left:0}:r?null:e.offset(),a={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,a,l,s)},l.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},l.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-s.scroll,l=e.top+r-s.scroll+n;a<s.top?o.top=s.top-a:l>s.top+s.height&&(o.top=s.top+s.height-l)}else{var c=e.left-r,h=e.left+r+i;c<s.left?o.left=s.left-c:h>s.right&&(o.left=s.left+s.width-h)}return o},l.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},l.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},l.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},l.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},l.prototype.enable=function(){this.enabled=!0},l.prototype.disable=function(){this.enabled=!1},l.prototype.toggleEnabled=function(){this.enabled=!this.enabled},l.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},l.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide((function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null}))},l.prototype.sanitizeHtml=function(t){return a(t,this.options.whiteList,this.options.sanitizeFn)};var c=t.fn.tooltip;t.fn.tooltip=function(e){return this.each((function(){var i=t(this),n=i.data("bs.tooltip"),o="object"==typeof e&&e;!n&&/destroy|hide/.test(e)||(n||i.data("bs.tooltip",n=new l(this,o)),"string"==typeof e&&n[e]())}))},t.fn.tooltip.Constructor=l,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=c,this}}(i(755))},294:(t,e,i)=>{!function(t){"use strict";t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",(function(){i=!0}));return setTimeout((function(){i||t(n).trigger(t.support.transition.end)}),e),this},t((function(){t.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})}))}(i(755))},259:function(t,e,i){var n,o;o=this,void 0===(n=function(){return o.Chartist=function(){var t={version:"0.11.4"};return function(t,e){"use strict";var i=t.window,n=t.document;e.namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},e.noop=function(t){return t},e.alphaNumerate=function(t){return String.fromCharCode(97+t%26)},e.extend=function(t){var i,n,o;for(t=t||{},i=1;i<arguments.length;i++)for(var r in n=arguments[i])o=n[r],t[r]="object"!=typeof o||null===o||o instanceof Array?o:e.extend(t[r],o);return t},e.replaceAll=function(t,e,i){return t.replace(new RegExp(e,"g"),i)},e.ensureUnit=function(t,e){return"number"==typeof t&&(t+=e),t},e.quantity=function(t){if("string"==typeof t){var e=/^(\d+)\s*(.*)$/g.exec(t);return{value:+e[1],unit:e[2]||void 0}}return{value:t}},e.querySelector=function(t){return t instanceof Node?t:n.querySelector(t)},e.times=function(t){return Array.apply(null,new Array(t))},e.sum=function(t,e){return t+(e||0)},e.mapMultiply=function(t){return function(e){return e*t}},e.mapAdd=function(t){return function(e){return e+t}},e.serialMap=function(t,i){var n=[],o=Math.max.apply(null,t.map((function(t){return t.length})));return e.times(o).forEach((function(e,o){var r=t.map((function(t){return t[o]}));n[o]=i.apply(null,r)})),n},e.roundWithPrecision=function(t,i){var n=Math.pow(10,i||e.precision);return Math.round(t*n)/n},e.precision=8,e.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},e.serialize=function(t){return null==t?t:("number"==typeof t?t=""+t:"object"==typeof t&&(t=JSON.stringify({data:t})),Object.keys(e.escapingMap).reduce((function(t,i){return e.replaceAll(t,i,e.escapingMap[i])}),t))},e.deserialize=function(t){if("string"!=typeof t)return t;t=Object.keys(e.escapingMap).reduce((function(t,i){return e.replaceAll(t,e.escapingMap[i],i)}),t);try{t=void 0!==(t=JSON.parse(t)).data?t.data:t}catch(t){}return t},e.createSvg=function(t,i,n,o){var r;return i=i||"100%",n=n||"100%",Array.prototype.slice.call(t.querySelectorAll("svg")).filter((function(t){return t.getAttributeNS(e.namespaces.xmlns,"ct")})).forEach((function(e){t.removeChild(e)})),(r=new e.Svg("svg").attr({width:i,height:n}).addClass(o))._node.style.width=i,r._node.style.height=n,t.appendChild(r._node),r},e.normalizeData=function(t,i,n){var o,r={raw:t,normalized:{}};return r.normalized.series=e.getDataArray({series:t.series||[]},i,n),o=r.normalized.series.every((function(t){return t instanceof Array}))?Math.max.apply(null,r.normalized.series.map((function(t){return t.length}))):r.normalized.series.length,r.normalized.labels=(t.labels||[]).slice(),Array.prototype.push.apply(r.normalized.labels,e.times(Math.max(0,o-r.normalized.labels.length)).map((function(){return""}))),i&&e.reverseData(r.normalized),r},e.safeHasProperty=function(t,e){return null!==t&&"object"==typeof t&&t.hasOwnProperty(e)},e.isDataHoleValue=function(t){return null==t||"number"==typeof t&&isNaN(t)},e.reverseData=function(t){t.labels.reverse(),t.series.reverse();for(var e=0;e<t.series.length;e++)"object"==typeof t.series[e]&&void 0!==t.series[e].data?t.series[e].data.reverse():t.series[e]instanceof Array&&t.series[e].reverse()},e.getDataArray=function(t,i,n){function o(t){if(e.safeHasProperty(t,"value"))return o(t.value);if(e.safeHasProperty(t,"data"))return o(t.data);if(t instanceof Array)return t.map(o);if(!e.isDataHoleValue(t)){if(n){var i={};return"string"==typeof n?i[n]=e.getNumberOrUndefined(t):i.y=e.getNumberOrUndefined(t),i.x=t.hasOwnProperty("x")?e.getNumberOrUndefined(t.x):i.x,i.y=t.hasOwnProperty("y")?e.getNumberOrUndefined(t.y):i.y,i}return e.getNumberOrUndefined(t)}}return t.series.map(o)},e.normalizePadding=function(t,e){return e=e||0,"number"==typeof t?{top:t,right:t,bottom:t,left:t}:{top:"number"==typeof t.top?t.top:e,right:"number"==typeof t.right?t.right:e,bottom:"number"==typeof t.bottom?t.bottom:e,left:"number"==typeof t.left?t.left:e}},e.getMetaData=function(t,e){var i=t.data?t.data[e]:t[e];return i?i.meta:void 0},e.orderOfMagnitude=function(t){return Math.floor(Math.log(Math.abs(t))/Math.LN10)},e.projectLength=function(t,e,i){return e/i.range*t},e.getAvailableHeight=function(t,i){return Math.max((e.quantity(i.height).value||t.height())-(i.chartPadding.top+i.chartPadding.bottom)-i.axisX.offset,0)},e.getHighLow=function(t,i,n){var o={high:void 0===(i=e.extend({},i,n?i["axis"+n.toUpperCase()]:{})).high?-Number.MAX_VALUE:+i.high,low:void 0===i.low?Number.MAX_VALUE:+i.low},r=void 0===i.high,s=void 0===i.low;function a(t){if(void 0!==t)if(t instanceof Array)for(var e=0;e<t.length;e++)a(t[e]);else{var i=n?+t[n]:+t;r&&i>o.high&&(o.high=i),s&&i<o.low&&(o.low=i)}}return(r||s)&&a(t),(i.referenceValue||0===i.referenceValue)&&(o.high=Math.max(i.referenceValue,o.high),o.low=Math.min(i.referenceValue,o.low)),o.high<=o.low&&(0===o.low?o.high=1:o.low<0?o.high=0:(o.high>0||(o.high=1),o.low=0)),o},e.isNumeric=function(t){return null!==t&&isFinite(t)},e.isFalseyButZero=function(t){return!t&&0!==t},e.getNumberOrUndefined=function(t){return e.isNumeric(t)?+t:void 0},e.isMultiValue=function(t){return"object"==typeof t&&("x"in t||"y"in t)},e.getMultiValue=function(t,i){return e.isMultiValue(t)?e.getNumberOrUndefined(t[i||"y"]):e.getNumberOrUndefined(t)},e.rho=function(t){if(1===t)return t;function e(t,i){return t%i==0?i:e(i,t%i)}function i(t){return t*t+1}var n,o=2,r=2;if(t%2==0)return 2;do{o=i(o)%t,r=i(i(r))%t,n=e(Math.abs(o-r),t)}while(1===n);return n},e.getBounds=function(t,i,n,o){var r,s,a,l=0,c={high:i.high,low:i.low};c.valueRange=c.high-c.low,c.oom=e.orderOfMagnitude(c.valueRange),c.step=Math.pow(10,c.oom),c.min=Math.floor(c.low/c.step)*c.step,c.max=Math.ceil(c.high/c.step)*c.step,c.range=c.max-c.min,c.numberOfSteps=Math.round(c.range/c.step);var h=e.projectLength(t,c.step,c)<n,u=o?e.rho(c.range):0;if(o&&e.projectLength(t,1,c)>=n)c.step=1;else if(o&&u<c.step&&e.projectLength(t,u,c)>=n)c.step=u;else for(;;){if(h&&e.projectLength(t,c.step,c)<=n)c.step*=2;else{if(h||!(e.projectLength(t,c.step/2,c)>=n))break;if(c.step/=2,o&&c.step%1!=0){c.step*=2;break}}if(l++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}var d=2221e-19;function p(t,e){return t===(t+=e)&&(t*=1+(e>0?d:-d)),t}for(c.step=Math.max(c.step,d),s=c.min,a=c.max;s+c.step<=c.low;)s=p(s,c.step);for(;a-c.step>=c.high;)a=p(a,-c.step);c.min=s,c.max=a,c.range=c.max-c.min;var g=[];for(r=c.min;r<=c.max;r=p(r,c.step)){var f=e.roundWithPrecision(r);f!==g[g.length-1]&&g.push(f)}return c.values=g,c},e.polarToCartesian=function(t,e,i,n){var o=(n-90)*Math.PI/180;return{x:t+i*Math.cos(o),y:e+i*Math.sin(o)}},e.createChartRect=function(t,i,n){var o=!(!i.axisX&&!i.axisY),r=o?i.axisY.offset:0,s=o?i.axisX.offset:0,a=t.width()||e.quantity(i.width).value||0,l=t.height()||e.quantity(i.height).value||0,c=e.normalizePadding(i.chartPadding,n);a=Math.max(a,r+c.left+c.right),l=Math.max(l,s+c.top+c.bottom);var h={padding:c,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return o?("start"===i.axisX.position?(h.y2=c.top+s,h.y1=Math.max(l-c.bottom,h.y2+1)):(h.y2=c.top,h.y1=Math.max(l-c.bottom-s,h.y2+1)),"start"===i.axisY.position?(h.x1=c.left+r,h.x2=Math.max(a-c.right,h.x1+1)):(h.x1=c.left,h.x2=Math.max(a-c.right-r,h.x1+1))):(h.x1=c.left,h.x2=Math.max(a-c.right,h.x1+1),h.y2=c.top,h.y1=Math.max(l-c.bottom,h.y2+1)),h},e.createGrid=function(t,i,n,o,r,s,a,l){var c={};c[n.units.pos+"1"]=t,c[n.units.pos+"2"]=t,c[n.counterUnits.pos+"1"]=o,c[n.counterUnits.pos+"2"]=o+r;var h=s.elem("line",c,a.join(" "));l.emit("draw",e.extend({type:"grid",axis:n,index:i,group:s,element:h},c))},e.createGridBackground=function(t,e,i,n){var o=t.elem("rect",{x:e.x1,y:e.y2,width:e.width(),height:e.height()},i,!0);n.emit("draw",{type:"gridBackground",group:t,element:o})},e.createLabel=function(t,i,o,r,s,a,l,c,h,u,d){var p,g={};if(g[s.units.pos]=t+l[s.units.pos],g[s.counterUnits.pos]=l[s.counterUnits.pos],g[s.units.len]=i,g[s.counterUnits.len]=Math.max(0,a-10),u){var f=n.createElement("span");f.className=h.join(" "),f.setAttribute("xmlns",e.namespaces.xhtml),f.innerText=r[o],f.style[s.units.len]=Math.round(g[s.units.len])+"px",f.style[s.counterUnits.len]=Math.round(g[s.counterUnits.len])+"px",p=c.foreignObject(f,e.extend({style:"overflow: visible;"},g))}else p=c.elem("text",g,h.join(" ")).text(r[o]);d.emit("draw",e.extend({type:"label",axis:s,index:o,group:c,element:p,text:r[o]},g))},e.getSeriesOption=function(t,e,i){if(t.name&&e.series&&e.series[t.name]){var n=e.series[t.name];return n.hasOwnProperty(i)?n[i]:e[i]}return e[i]},e.optionsProvider=function(t,n,o){var r,s,a=e.extend({},t),l=[];function c(t){var l=r;if(r=e.extend({},a),n)for(s=0;s<n.length;s++)i.matchMedia(n[s][0]).matches&&(r=e.extend(r,n[s][1]));o&&t&&o.emit("optionsChanged",{previousOptions:l,currentOptions:r})}function h(){l.forEach((function(t){t.removeListener(c)}))}if(!i.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(n)for(s=0;s<n.length;s++){var u=i.matchMedia(n[s][0]);u.addListener(c),l.push(u)}return c(),{removeMediaQueryListeners:h,getCurrentOptions:function(){return e.extend({},r)}}},e.splitIntoSegments=function(t,i,n){var o={increasingX:!1,fillHoles:!1};n=e.extend({},o,n);for(var r=[],s=!0,a=0;a<t.length;a+=2)void 0===e.getMultiValue(i[a/2].value)?n.fillHoles||(s=!0):(n.increasingX&&a>=2&&t[a]<=t[a-2]&&(s=!0),s&&(r.push({pathCoordinates:[],valueData:[]}),s=!1),r[r.length-1].pathCoordinates.push(t[a],t[a+1]),r[r.length-1].valueData.push(i[a/2]));return r}}(this||i.g,t),function(t,e){"use strict";e.Interpolation={},e.Interpolation.none=function(t){var i={fillHoles:!1};return t=e.extend({},i,t),function(i,n){for(var o=new e.Svg.Path,r=!0,s=0;s<i.length;s+=2){var a=i[s],l=i[s+1],c=n[s/2];void 0!==e.getMultiValue(c.value)?(r?o.move(a,l,!1,c):o.line(a,l,!1,c),r=!1):t.fillHoles||(r=!0)}return o}},e.Interpolation.simple=function(t){var i={divisor:2,fillHoles:!1};t=e.extend({},i,t);var n=1/Math.max(1,t.divisor);return function(i,o){for(var r,s,a,l=new e.Svg.Path,c=0;c<i.length;c+=2){var h=i[c],u=i[c+1],d=(h-r)*n,p=o[c/2];void 0!==p.value?(void 0===a?l.move(h,u,!1,p):l.curve(r+d,s,h-d,u,h,u,!1,p),r=h,s=u,a=p):t.fillHoles||(r=h=a=void 0)}return l}},e.Interpolation.cardinal=function(t){var i={tension:1,fillHoles:!1};t=e.extend({},i,t);var n=Math.min(1,Math.max(0,t.tension)),o=1-n;return function i(r,s){var a=e.splitIntoSegments(r,s,{fillHoles:t.fillHoles});if(a.length){if(a.length>1){var l=[];return a.forEach((function(t){l.push(i(t.pathCoordinates,t.valueData))})),e.Svg.Path.join(l)}if(r=a[0].pathCoordinates,s=a[0].valueData,r.length<=4)return e.Interpolation.none()(r,s);for(var c,h=(new e.Svg.Path).move(r[0],r[1],!1,s[0]),u=0,d=r.length;d-2*!c>u;u+=2){var p=[{x:+r[u-2],y:+r[u-1]},{x:+r[u],y:+r[u+1]},{x:+r[u+2],y:+r[u+3]},{x:+r[u+4],y:+r[u+5]}];c?u?d-4===u?p[3]={x:+r[0],y:+r[1]}:d-2===u&&(p[2]={x:+r[0],y:+r[1]},p[3]={x:+r[2],y:+r[3]}):p[0]={x:+r[d-2],y:+r[d-1]}:d-4===u?p[3]=p[2]:u||(p[0]={x:+r[u],y:+r[u+1]}),h.curve(n*(-p[0].x+6*p[1].x+p[2].x)/6+o*p[2].x,n*(-p[0].y+6*p[1].y+p[2].y)/6+o*p[2].y,n*(p[1].x+6*p[2].x-p[3].x)/6+o*p[2].x,n*(p[1].y+6*p[2].y-p[3].y)/6+o*p[2].y,p[2].x,p[2].y,!1,s[(u+2)/2])}return h}return e.Interpolation.none()([])}},e.Interpolation.monotoneCubic=function(t){var i={fillHoles:!1};return t=e.extend({},i,t),function i(n,o){var r=e.splitIntoSegments(n,o,{fillHoles:t.fillHoles,increasingX:!0});if(r.length){if(r.length>1){var s=[];return r.forEach((function(t){s.push(i(t.pathCoordinates,t.valueData))})),e.Svg.Path.join(s)}if(n=r[0].pathCoordinates,o=r[0].valueData,n.length<=4)return e.Interpolation.none()(n,o);var a,l,c=[],h=[],u=n.length/2,d=[],p=[],g=[],f=[];for(a=0;a<u;a++)c[a]=n[2*a],h[a]=n[2*a+1];for(a=0;a<u-1;a++)g[a]=h[a+1]-h[a],f[a]=c[a+1]-c[a],p[a]=g[a]/f[a];for(d[0]=p[0],d[u-1]=p[u-2],a=1;a<u-1;a++)0===p[a]||0===p[a-1]||p[a-1]>0!=p[a]>0?d[a]=0:(d[a]=3*(f[a-1]+f[a])/((2*f[a]+f[a-1])/p[a-1]+(f[a]+2*f[a-1])/p[a]),isFinite(d[a])||(d[a]=0));for(l=(new e.Svg.Path).move(c[0],h[0],!1,o[0]),a=0;a<u-1;a++)l.curve(c[a]+f[a]/3,h[a]+d[a]*f[a]/3,c[a+1]-f[a]/3,h[a+1]-d[a+1]*f[a]/3,c[a+1],h[a+1],!1,o[a+1]);return l}return e.Interpolation.none()([])}},e.Interpolation.step=function(t){var i={postpone:!0,fillHoles:!1};return t=e.extend({},i,t),function(i,n){for(var o,r,s,a=new e.Svg.Path,l=0;l<i.length;l+=2){var c=i[l],h=i[l+1],u=n[l/2];void 0!==u.value?(void 0===s?a.move(c,h,!1,u):(t.postpone?a.line(c,r,!1,s):a.line(o,h,!1,u),a.line(c,h,!1,u)),o=c,r=h,s=u):t.fillHoles||(o=r=s=void 0)}return a}}}(this||i.g,t),function(t,e){"use strict";e.EventEmitter=function(){var t=[];function e(e,i){t[e]=t[e]||[],t[e].push(i)}function i(e,i){t[e]&&(i?(t[e].splice(t[e].indexOf(i),1),0===t[e].length&&delete t[e]):delete t[e])}function n(e,i){t[e]&&t[e].forEach((function(t){t(i)})),t["*"]&&t["*"].forEach((function(t){t(e,i)}))}return{addEventHandler:e,removeEventHandler:i,emit:n}}}(this||i.g,t),function(t,e){"use strict";function i(t){var e=[];if(t.length)for(var i=0;i<t.length;i++)e.push(t[i]);return e}function n(t,i){var n=i||this.prototype||e.Class,o=Object.create(n);e.Class.cloneDefinitions(o,t);var r=function(){var t,i=o.constructor||function(){};return t=this===e?Object.create(o):this,i.apply(t,Array.prototype.slice.call(arguments,0)),t};return r.prototype=o,r.super=n,r.extend=this.extend,r}function o(){var t=i(arguments),e=t[0];return t.splice(1,t.length-1).forEach((function(t){Object.getOwnPropertyNames(t).forEach((function(i){delete e[i],Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}))})),e}e.Class={extend:n,cloneDefinitions:o}}(this||i.g,t),function(t,e){"use strict";var i=t.window;function n(t,i,n){return t&&(this.data=t||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),i&&(this.options=e.extend({},n?this.options:this.defaultOptions,i),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=e.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this}function o(){return this.initializeTimeoutId?i.clearTimeout(this.initializeTimeoutId):(i.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this}function r(t,e){return this.eventEmitter.addEventHandler(t,e),this}function s(t,e){return this.eventEmitter.removeEventHandler(t,e),this}function a(){i.addEventListener("resize",this.resizeListener),this.optionsProvider=e.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(t){t instanceof Array?t[0](this,t[1]):t(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}function l(t,i,n,o,r){this.container=e.querySelector(t),this.data=i||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.defaultOptions=n,this.options=o,this.responsiveOptions=r,this.eventEmitter=e.EventEmitter(),this.supportsForeignObject=e.Svg.isSupported("Extensibility"),this.supportsAnimations=e.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(a.bind(this),0)}e.Base=e.Class.extend({constructor:l,optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:n,detach:o,on:r,off:s,version:e.version,supportsForeignObject:!1})}(this||i.g,t),function(t,e){"use strict";var i=t.document;function n(t,n,o,r,s){t instanceof Element?this._node=t:(this._node=i.createElementNS(e.namespaces.svg,t),"svg"===t&&this.attr({"xmlns:ct":e.namespaces.ct})),n&&this.attr(n),o&&this.addClass(o),r&&(s&&r._node.firstChild?r._node.insertBefore(this._node,r._node.firstChild):r._node.appendChild(this._node))}function o(t,i){return"string"==typeof t?i?this._node.getAttributeNS(i,t):this._node.getAttribute(t):(Object.keys(t).forEach(function(i){if(void 0!==t[i])if(-1!==i.indexOf(":")){var n=i.split(":");this._node.setAttributeNS(e.namespaces[n[0]],i,t[i])}else this._node.setAttribute(i,t[i])}.bind(this)),this)}function r(t,i,n,o){return new e.Svg(t,i,n,this,o)}function s(){return this._node.parentNode instanceof SVGElement?new e.Svg(this._node.parentNode):null}function a(){for(var t=this._node;"svg"!==t.nodeName;)t=t.parentNode;return new e.Svg(t)}function l(t){var i=this._node.querySelector(t);return i?new e.Svg(i):null}function c(t){var i=this._node.querySelectorAll(t);return i.length?new e.Svg.List(i):null}function h(){return this._node}function u(t,n,o,r){if("string"==typeof t){var s=i.createElement("div");s.innerHTML=t,t=s.firstChild}t.setAttribute("xmlns",e.namespaces.xmlns);var a=this.elem("foreignObject",n,o,r);return a._node.appendChild(t),a}function d(t){return this._node.appendChild(i.createTextNode(t)),this}function p(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}function g(){return this._node.parentNode.removeChild(this._node),this.parent()}function f(t){return this._node.parentNode.replaceChild(t._node,this._node),t}function m(t,e){return e&&this._node.firstChild?this._node.insertBefore(t._node,this._node.firstChild):this._node.appendChild(t._node),this}function v(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]}function _(t){return this._node.setAttribute("class",this.classes(this._node).concat(t.trim().split(/\s+/)).filter((function(t,e,i){return i.indexOf(t)===e})).join(" ")),this}function y(t){var e=t.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter((function(t){return-1===e.indexOf(t)})).join(" ")),this}function b(){return this._node.setAttribute("class",""),this}function w(){return this._node.getBoundingClientRect().height}function k(){return this._node.getBoundingClientRect().width}function C(t,i,n){return void 0===i&&(i=!0),Object.keys(t).forEach(function(o){function r(t,i){var r,s,a,l={};t.easing&&(a=t.easing instanceof Array?t.easing:e.Svg.Easing[t.easing],delete t.easing),t.begin=e.ensureUnit(t.begin,"ms"),t.dur=e.ensureUnit(t.dur,"ms"),a&&(t.calcMode="spline",t.keySplines=a.join(" "),t.keyTimes="0;1"),i&&(t.fill="freeze",l[o]=t.from,this.attr(l),s=e.quantity(t.begin||0).value,t.begin="indefinite"),r=this.elem("animate",e.extend({attributeName:o},t)),i&&setTimeout(function(){try{r._node.beginElement()}catch(e){l[o]=t.to,this.attr(l),r.remove()}}.bind(this),s),n&&r._node.addEventListener("beginEvent",function(){n.emit("animationBegin",{element:this,animate:r._node,params:t})}.bind(this)),r._node.addEventListener("endEvent",function(){n&&n.emit("animationEnd",{element:this,animate:r._node,params:t}),i&&(l[o]=t.to,this.attr(l),r.remove())}.bind(this))}t[o]instanceof Array?t[o].forEach(function(t){r.bind(this)(t,!1)}.bind(this)):r.bind(this)(t[o],i)}.bind(this)),this}e.Svg=e.Class.extend({constructor:n,attr:o,elem:r,parent:s,root:a,querySelector:l,querySelectorAll:c,getNode:h,foreignObject:u,text:d,empty:p,remove:g,replace:f,append:m,classes:v,addClass:_,removeClass:y,removeAllClasses:b,height:w,width:k,animate:C}),e.Svg.isSupported=function(t){return i.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#"+t,"1.1")};var T={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};function E(t){var i=this;this.svgElements=[];for(var n=0;n<t.length;n++)this.svgElements.push(new e.Svg(t[n]));Object.keys(e.Svg.prototype).filter((function(t){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(t)})).forEach((function(t){i[t]=function(){var n=Array.prototype.slice.call(arguments,0);return i.svgElements.forEach((function(i){e.Svg.prototype[t].apply(i,n)})),i}}))}e.Svg.Easing=T,e.Svg.List=e.Class.extend({constructor:E})}(this||i.g,t),function(t,e){"use strict";var i={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},n={accuracy:3};function o(t,i,n,o,r,s){var a=e.extend({command:r?t.toLowerCase():t.toUpperCase()},i,s?{data:s}:{});n.splice(o,0,a)}function r(t,e){t.forEach((function(n,o){i[n.command.toLowerCase()].forEach((function(i,r){e(n,i,o,r,t)}))}))}function s(t,i){this.pathElements=[],this.pos=0,this.close=t,this.options=e.extend({},n,i)}function a(t){return void 0!==t?(this.pos=Math.max(0,Math.min(this.pathElements.length,t)),this):this.pos}function l(t){return this.pathElements.splice(this.pos,t),this}function c(t,e,i,n){return o("M",{x:+t,y:+e},this.pathElements,this.pos++,i,n),this}function h(t,e,i,n){return o("L",{x:+t,y:+e},this.pathElements,this.pos++,i,n),this}function u(t,e,i,n,r,s,a,l){return o("C",{x1:+t,y1:+e,x2:+i,y2:+n,x:+r,y:+s},this.pathElements,this.pos++,a,l),this}function d(t,e,i,n,r,s,a,l,c){return o("A",{rx:+t,ry:+e,xAr:+i,lAf:+n,sf:+r,x:+s,y:+a},this.pathElements,this.pos++,l,c),this}function p(t){var n=t.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce((function(t,e){return e.match(/[A-Za-z]/)&&t.push([]),t[t.length-1].push(e),t}),[]);"Z"===n[n.length-1][0].toUpperCase()&&n.pop();var o=n.map((function(t){var n=t.shift(),o=i[n.toLowerCase()];return e.extend({command:n},o.reduce((function(e,i,n){return e[i]=+t[n],e}),{}))})),r=[this.pos,0];return Array.prototype.push.apply(r,o),Array.prototype.splice.apply(this.pathElements,r),this.pos+=o.length,this}function g(){var t=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(e,n){var o=i[n.command.toLowerCase()].map(function(e){return this.options.accuracy?Math.round(n[e]*t)/t:n[e]}.bind(this));return e+n.command+o.join(",")}.bind(this),"")+(this.close?"Z":"")}function f(t,e){return r(this.pathElements,(function(i,n){i[n]*="x"===n[0]?t:e})),this}function m(t,e){return r(this.pathElements,(function(i,n){i[n]+="x"===n[0]?t:e})),this}function v(t){return r(this.pathElements,(function(e,i,n,o,r){var s=t(e,i,n,o,r);(s||0===s)&&(e[i]=s)})),this}function _(t){var i=new e.Svg.Path(t||this.close);return i.pos=this.pos,i.pathElements=this.pathElements.slice().map((function(t){return e.extend({},t)})),i.options=e.extend({},this.options),i}function y(t){var i=[new e.Svg.Path];return this.pathElements.forEach((function(n){n.command===t.toUpperCase()&&0!==i[i.length-1].pathElements.length&&i.push(new e.Svg.Path),i[i.length-1].pathElements.push(n)})),i}function b(t,i,n){for(var o=new e.Svg.Path(i,n),r=0;r<t.length;r++)for(var s=t[r],a=0;a<s.pathElements.length;a++)o.pathElements.push(s.pathElements[a]);return o}e.Svg.Path=e.Class.extend({constructor:s,position:a,remove:l,move:c,line:h,curve:u,arc:d,scale:f,translate:m,transform:v,parse:p,stringify:g,clone:_,splitByCommand:y}),e.Svg.Path.elementDescriptions=i,e.Svg.Path.join=b}(this||i.g,t),function(t,e){"use strict";t.window,t.document;var i={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};function n(t,e,n,o){this.units=t,this.counterUnits=t===i.x?i.y:i.x,this.chartRect=e,this.axisLength=e[t.rectEnd]-e[t.rectStart],this.gridOffset=e[t.rectOffset],this.ticks=n,this.options=o}function o(t,i,n,o,r){var s=o["axis"+this.units.pos.toUpperCase()],a=this.ticks.map(this.projectValue.bind(this)),l=this.ticks.map(s.labelInterpolationFnc);a.forEach(function(c,h){var u,d={x:0,y:0};u=a[h+1]?a[h+1]-c:Math.max(this.axisLength-c,30),e.isFalseyButZero(l[h])&&""!==l[h]||("x"===this.units.pos?(c=this.chartRect.x1+c,d.x=o.axisX.labelOffset.x,"start"===o.axisX.position?d.y=this.chartRect.padding.top+o.axisX.labelOffset.y+(n?5:20):d.y=this.chartRect.y1+o.axisX.labelOffset.y+(n?5:20)):(c=this.chartRect.y1-c,d.y=o.axisY.labelOffset.y-(n?u:0),"start"===o.axisY.position?d.x=n?this.chartRect.padding.left+o.axisY.labelOffset.x:this.chartRect.x1-10:d.x=this.chartRect.x2+o.axisY.labelOffset.x+10),s.showGrid&&e.createGrid(c,h,this,this.gridOffset,this.chartRect[this.counterUnits.len](),t,[o.classNames.grid,o.classNames[this.units.dir]],r),s.showLabel&&e.createLabel(c,u,h,l,this,s.offset,d,i,[o.classNames.label,o.classNames[this.units.dir],"start"===s.position?o.classNames[s.position]:o.classNames.end],n,r))}.bind(this))}e.Axis=e.Class.extend({constructor:n,createGridAndLabels:o,projectValue:function(t,e,i){throw new Error("Base axis can't be instantiated!")}}),e.Axis.units=i}(this||i.g,t),function(t,e){"use strict";function i(t,i,n,o){var r=o.highLow||e.getHighLow(i,o,t.pos);this.bounds=e.getBounds(n[t.rectEnd]-n[t.rectStart],r,o.scaleMinSpace||20,o.onlyInteger),this.range={min:this.bounds.min,max:this.bounds.max},e.AutoScaleAxis.super.constructor.call(this,t,n,this.bounds.values,o)}function n(t){return this.axisLength*(+e.getMultiValue(t,this.units.pos)-this.bounds.min)/this.bounds.range}t.window,t.document,e.AutoScaleAxis=e.Axis.extend({constructor:i,projectValue:n})}(this||i.g,t),function(t,e){"use strict";function i(t,i,n,o){var r=o.highLow||e.getHighLow(i,o,t.pos);this.divisor=o.divisor||1,this.ticks=o.ticks||e.times(this.divisor).map(function(t,e){return r.low+(r.high-r.low)/this.divisor*e}.bind(this)),this.ticks.sort((function(t,e){return t-e})),this.range={min:r.low,max:r.high},e.FixedScaleAxis.super.constructor.call(this,t,n,this.ticks,o),this.stepLength=this.axisLength/this.divisor}function n(t){return this.axisLength*(+e.getMultiValue(t,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}t.window,t.document,e.FixedScaleAxis=e.Axis.extend({constructor:i,projectValue:n})}(this||i.g,t),function(t,e){"use strict";function i(t,i,n,o){e.StepAxis.super.constructor.call(this,t,n,o.ticks,o);var r=Math.max(1,o.ticks.length-(o.stretch?1:0));this.stepLength=this.axisLength/r}function n(t,e){return this.stepLength*e}t.window,t.document,e.StepAxis=e.Axis.extend({constructor:i,projectValue:n})}(this||i.g,t),function(t,e){"use strict";t.window,t.document;var i={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};function n(t){var n=e.normalizeData(this.data,t.reverseData,!0);this.svg=e.createSvg(this.container,t.width,t.height,t.classNames.chart);var o,r,s=this.svg.elem("g").addClass(t.classNames.gridGroup),a=this.svg.elem("g"),l=this.svg.elem("g").addClass(t.classNames.labelGroup),c=e.createChartRect(this.svg,t,i.padding);o=void 0===t.axisX.type?new e.StepAxis(e.Axis.units.x,n.normalized.series,c,e.extend({},t.axisX,{ticks:n.normalized.labels,stretch:t.fullWidth})):t.axisX.type.call(e,e.Axis.units.x,n.normalized.series,c,t.axisX),r=void 0===t.axisY.type?new e.AutoScaleAxis(e.Axis.units.y,n.normalized.series,c,e.extend({},t.axisY,{high:e.isNumeric(t.high)?t.high:t.axisY.high,low:e.isNumeric(t.low)?t.low:t.axisY.low})):t.axisY.type.call(e,e.Axis.units.y,n.normalized.series,c,t.axisY),o.createGridAndLabels(s,l,this.supportsForeignObject,t,this.eventEmitter),r.createGridAndLabels(s,l,this.supportsForeignObject,t,this.eventEmitter),t.showGridBackground&&e.createGridBackground(s,c,t.classNames.gridBackground,this.eventEmitter),n.raw.series.forEach(function(i,s){var l=a.elem("g");l.attr({"ct:series-name":i.name,"ct:meta":e.serialize(i.meta)}),l.addClass([t.classNames.series,i.className||t.classNames.series+"-"+e.alphaNumerate(s)].join(" "));var h=[],u=[];n.normalized.series[s].forEach(function(t,a){var l={x:c.x1+o.projectValue(t,a,n.normalized.series[s]),y:c.y1-r.projectValue(t,a,n.normalized.series[s])};h.push(l.x,l.y),u.push({value:t,valueIndex:a,meta:e.getMetaData(i,a)})}.bind(this));var d={lineSmooth:e.getSeriesOption(i,t,"lineSmooth"),showPoint:e.getSeriesOption(i,t,"showPoint"),showLine:e.getSeriesOption(i,t,"showLine"),showArea:e.getSeriesOption(i,t,"showArea"),areaBase:e.getSeriesOption(i,t,"areaBase")},p=("function"==typeof d.lineSmooth?d.lineSmooth:d.lineSmooth?e.Interpolation.monotoneCubic():e.Interpolation.none())(h,u);if(d.showPoint&&p.pathElements.forEach(function(n){var a=l.elem("line",{x1:n.x,y1:n.y,x2:n.x+.01,y2:n.y},t.classNames.point).attr({"ct:value":[n.data.value.x,n.data.value.y].filter(e.isNumeric).join(","),"ct:meta":e.serialize(n.data.meta)});this.eventEmitter.emit("draw",{type:"point",value:n.data.value,index:n.data.valueIndex,meta:n.data.meta,series:i,seriesIndex:s,axisX:o,axisY:r,group:l,element:a,x:n.x,y:n.y})}.bind(this)),d.showLine){var g=l.elem("path",{d:p.stringify()},t.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:n.normalized.series[s],path:p.clone(),chartRect:c,index:s,series:i,seriesIndex:s,seriesMeta:i.meta,axisX:o,axisY:r,group:l,element:g})}if(d.showArea&&r.range){var f=Math.max(Math.min(d.areaBase,r.range.max),r.range.min),m=c.y1-r.projectValue(f);p.splitByCommand("M").filter((function(t){return t.pathElements.length>1})).map((function(t){var e=t.pathElements[0],i=t.pathElements[t.pathElements.length-1];return t.clone(!0).position(0).remove(1).move(e.x,m).line(e.x,e.y).position(t.pathElements.length+1).line(i.x,m)})).forEach(function(e){var a=l.elem("path",{d:e.stringify()},t.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:n.normalized.series[s],path:e.clone(),series:i,seriesIndex:s,axisX:o,axisY:r,chartRect:c,index:s,group:l,element:a})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:r.bounds,chartRect:c,axisX:o,axisY:r,svg:this.svg,options:t})}function o(t,n,o,r){e.Line.super.constructor.call(this,t,n,i,e.extend({},i,o),r)}e.Line=e.Base.extend({constructor:o,createChart:n})}(this||i.g,t),function(t,e){"use strict";t.window,t.document;var i={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};function n(t){var n,o;t.distributeSeries?(n=e.normalizeData(this.data,t.reverseData,t.horizontalBars?"x":"y")).normalized.series=n.normalized.series.map((function(t){return[t]})):n=e.normalizeData(this.data,t.reverseData,t.horizontalBars?"x":"y"),this.svg=e.createSvg(this.container,t.width,t.height,t.classNames.chart+(t.horizontalBars?" "+t.classNames.horizontalBars:""));var r=this.svg.elem("g").addClass(t.classNames.gridGroup),s=this.svg.elem("g"),a=this.svg.elem("g").addClass(t.classNames.labelGroup);if(t.stackBars&&0!==n.normalized.series.length){var l=e.serialMap(n.normalized.series,(function(){return Array.prototype.slice.call(arguments).map((function(t){return t})).reduce((function(t,e){return{x:t.x+(e&&e.x)||0,y:t.y+(e&&e.y)||0}}),{x:0,y:0})}));o=e.getHighLow([l],t,t.horizontalBars?"x":"y")}else o=e.getHighLow(n.normalized.series,t,t.horizontalBars?"x":"y");o.high=+t.high||(0===t.high?0:o.high),o.low=+t.low||(0===t.low?0:o.low);var c,h,u,d,p,g=e.createChartRect(this.svg,t,i.padding);h=t.distributeSeries&&t.stackBars?n.normalized.labels.slice(0,1):n.normalized.labels,t.horizontalBars?(c=d=void 0===t.axisX.type?new e.AutoScaleAxis(e.Axis.units.x,n.normalized.series,g,e.extend({},t.axisX,{highLow:o,referenceValue:0})):t.axisX.type.call(e,e.Axis.units.x,n.normalized.series,g,e.extend({},t.axisX,{highLow:o,referenceValue:0})),u=p=void 0===t.axisY.type?new e.StepAxis(e.Axis.units.y,n.normalized.series,g,{ticks:h}):t.axisY.type.call(e,e.Axis.units.y,n.normalized.series,g,t.axisY)):(u=d=void 0===t.axisX.type?new e.StepAxis(e.Axis.units.x,n.normalized.series,g,{ticks:h}):t.axisX.type.call(e,e.Axis.units.x,n.normalized.series,g,t.axisX),c=p=void 0===t.axisY.type?new e.AutoScaleAxis(e.Axis.units.y,n.normalized.series,g,e.extend({},t.axisY,{highLow:o,referenceValue:0})):t.axisY.type.call(e,e.Axis.units.y,n.normalized.series,g,e.extend({},t.axisY,{highLow:o,referenceValue:0})));var f=t.horizontalBars?g.x1+c.projectValue(0):g.y1-c.projectValue(0),m=[];u.createGridAndLabels(r,a,this.supportsForeignObject,t,this.eventEmitter),c.createGridAndLabels(r,a,this.supportsForeignObject,t,this.eventEmitter),t.showGridBackground&&e.createGridBackground(r,g,t.classNames.gridBackground,this.eventEmitter),n.raw.series.forEach(function(i,o){var r,a,l=o-(n.raw.series.length-1)/2;r=t.distributeSeries&&!t.stackBars?u.axisLength/n.normalized.series.length/2:t.distributeSeries&&t.stackBars?u.axisLength/2:u.axisLength/n.normalized.series[o].length/2,(a=s.elem("g")).attr({"ct:series-name":i.name,"ct:meta":e.serialize(i.meta)}),a.addClass([t.classNames.series,i.className||t.classNames.series+"-"+e.alphaNumerate(o)].join(" ")),n.normalized.series[o].forEach(function(s,h){var v,_,y,b;if(b=t.distributeSeries&&!t.stackBars?o:t.distributeSeries&&t.stackBars?0:h,v=t.horizontalBars?{x:g.x1+c.projectValue(s&&s.x?s.x:0,h,n.normalized.series[o]),y:g.y1-u.projectValue(s&&s.y?s.y:0,b,n.normalized.series[o])}:{x:g.x1+u.projectValue(s&&s.x?s.x:0,b,n.normalized.series[o]),y:g.y1-c.projectValue(s&&s.y?s.y:0,h,n.normalized.series[o])},u instanceof e.StepAxis&&(u.options.stretch||(v[u.units.pos]+=r*(t.horizontalBars?-1:1)),v[u.units.pos]+=t.stackBars||t.distributeSeries?0:l*t.seriesBarDistance*(t.horizontalBars?-1:1)),y=m[h]||f,m[h]=y-(f-v[u.counterUnits.pos]),void 0!==s){var w={};w[u.units.pos+"1"]=v[u.units.pos],w[u.units.pos+"2"]=v[u.units.pos],!t.stackBars||"accumulate"!==t.stackMode&&t.stackMode?(w[u.counterUnits.pos+"1"]=f,w[u.counterUnits.pos+"2"]=v[u.counterUnits.pos]):(w[u.counterUnits.pos+"1"]=y,w[u.counterUnits.pos+"2"]=m[h]),w.x1=Math.min(Math.max(w.x1,g.x1),g.x2),w.x2=Math.min(Math.max(w.x2,g.x1),g.x2),w.y1=Math.min(Math.max(w.y1,g.y2),g.y1),w.y2=Math.min(Math.max(w.y2,g.y2),g.y1);var k=e.getMetaData(i,h);_=a.elem("line",w,t.classNames.bar).attr({"ct:value":[s.x,s.y].filter(e.isNumeric).join(","),"ct:meta":e.serialize(k)}),this.eventEmitter.emit("draw",e.extend({type:"bar",value:s,index:h,meta:k,series:i,seriesIndex:o,axisX:d,axisY:p,chartRect:g,group:a,element:_},w))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:c.bounds,chartRect:g,axisX:d,axisY:p,svg:this.svg,options:t})}function o(t,n,o,r){e.Bar.super.constructor.call(this,t,n,i,e.extend({},i,o),r)}e.Bar=e.Base.extend({constructor:o,createChart:n})}(this||i.g,t),function(t,e){"use strict";t.window,t.document;var i={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",sliceDonutSolid:"ct-slice-donut-solid",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutSolid:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:e.noop,labelDirection:"neutral",reverseData:!1,ignoreEmptyValues:!1};function n(t,e,i){var n=e.x>t.x;return n&&"explode"===i||!n&&"implode"===i?"start":n&&"implode"===i||!n&&"explode"===i?"end":"middle"}function o(t){var o,r,s,a,l,c=e.normalizeData(this.data),h=[],u=t.startAngle;this.svg=e.createSvg(this.container,t.width,t.height,t.donut?t.classNames.chartDonut:t.classNames.chartPie),r=e.createChartRect(this.svg,t,i.padding),s=Math.min(r.width()/2,r.height()/2),l=t.total||c.normalized.series.reduce((function(t,e){return t+e}),0);var d=e.quantity(t.donutWidth);"%"===d.unit&&(d.value*=s/100),s-=t.donut&&!t.donutSolid?d.value/2:0,a="outside"===t.labelPosition||t.donut&&!t.donutSolid?s:"center"===t.labelPosition?0:t.donutSolid?s-d.value/2:s/2,a+=t.labelOffset;var p={x:r.x1+r.width()/2,y:r.y2+r.height()/2},g=1===c.raw.series.filter((function(t){return t.hasOwnProperty("value")?0!==t.value:0!==t})).length;c.raw.series.forEach(function(t,e){h[e]=this.svg.elem("g",null,null)}.bind(this)),t.showLabel&&(o=this.svg.elem("g",null,null)),c.raw.series.forEach(function(i,r){if(0!==c.normalized.series[r]||!t.ignoreEmptyValues){h[r].attr({"ct:series-name":i.name}),h[r].addClass([t.classNames.series,i.className||t.classNames.series+"-"+e.alphaNumerate(r)].join(" "));var f=l>0?u+c.normalized.series[r]/l*360:0,m=Math.max(0,u-(0===r||g?0:.2));f-m>=359.99&&(f=m+359.99);var v,_,y,b=e.polarToCartesian(p.x,p.y,s,m),w=e.polarToCartesian(p.x,p.y,s,f),k=new e.Svg.Path(!t.donut||t.donutSolid).move(w.x,w.y).arc(s,s,0,f-u>180,0,b.x,b.y);t.donut?t.donutSolid&&(y=s-d.value,v=e.polarToCartesian(p.x,p.y,y,u-(0===r||g?0:.2)),_=e.polarToCartesian(p.x,p.y,y,f),k.line(v.x,v.y),k.arc(y,y,0,f-u>180,1,_.x,_.y)):k.line(p.x,p.y);var C=t.classNames.slicePie;t.donut&&(C=t.classNames.sliceDonut,t.donutSolid&&(C=t.classNames.sliceDonutSolid));var T=h[r].elem("path",{d:k.stringify()},C);if(T.attr({"ct:value":c.normalized.series[r],"ct:meta":e.serialize(i.meta)}),t.donut&&!t.donutSolid&&(T._node.style.strokeWidth=d.value+"px"),this.eventEmitter.emit("draw",{type:"slice",value:c.normalized.series[r],totalDataSum:l,index:r,meta:i.meta,series:i,group:h[r],element:T,path:k.clone(),center:p,radius:s,startAngle:u,endAngle:f}),t.showLabel){var E,S;E=1===c.raw.series.length?{x:p.x,y:p.y}:e.polarToCartesian(p.x,p.y,a,u+(f-u)/2),S=c.normalized.labels&&!e.isFalseyButZero(c.normalized.labels[r])?c.normalized.labels[r]:c.normalized.series[r];var x=t.labelInterpolationFnc(S,r);if(x||0===x){var R=o.elem("text",{dx:E.x,dy:E.y,"text-anchor":n(p,E,t.labelDirection)},t.classNames.label).text(""+x);this.eventEmitter.emit("draw",{type:"label",index:r,group:o,element:R,text:""+x,x:E.x,y:E.y})}}u=f}}.bind(this)),this.eventEmitter.emit("created",{chartRect:r,svg:this.svg,options:t})}function r(t,n,o,r){e.Pie.super.constructor.call(this,t,n,i,e.extend({},i,o),r)}e.Pie=e.Base.extend({constructor:r,createChart:o,determineAnchorPosition:n})}(this||i.g,t),t}()}.apply(e,[]))||(t.exports=n)},162:function(t,e,i){var n,o,r;o=[],void 0===(r="function"==typeof(n=function(){"use strict";function e(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function n(t,e,i){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){l(n.response,e,i)},n.onerror=function(){console.error("could not download file")},n.send()}function o(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(i){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof i.g&&i.g.global===i.g?i.g:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,e,i){var a=s.URL||s.webkitURL,l=document.createElement("a");e=e||t.name||"download",l.download=e,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?r(l):o(l.href)?n(t,e,i):r(l,l.target="_blank")):(l.href=a.createObjectURL(t),setTimeout((function(){a.revokeObjectURL(l.href)}),4e4),setTimeout((function(){r(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,i,s){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,s),i);else if(o(t))n(t,i,s);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){r(a)}))}}:function(t,e,i,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,i);var r="application/octet-stream"===t.type,l=/constructor/i.test(s.HTMLElement)||s.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||r&&l||a)&&"undefined"!=typeof FileReader){var h=new FileReader;h.onloadend=function(){var t=h.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},h.readAsDataURL(t)}else{var u=s.URL||s.webkitURL,d=u.createObjectURL(t);o?o.location=d:location.href=d,o=null,setTimeout((function(){u.revokeObjectURL(d)}),4e4)}});s.saveAs=l.saveAs=l,t.exports=l})?n.apply(e,o):n)||(t.exports=r)},587:(t,e,i)=>{var n,o,r;o=[i(755)],void 0===(r="function"==typeof(n=function(t){t.extend(t.fn,{validate:function(e){if(this.length){var i=t.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",(function(e){i.submitButton=e.currentTarget,t(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(this).attr("formnovalidate")&&(i.cancelSubmit=!0)})),this.on("submit.validate",(function(e){function n(){var n,o;return i.submitButton&&(i.settings.submitHandler||i.formSubmitted)&&(n=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),!(i.settings.submitHandler&&!i.settings.debug)||(o=i.settings.submitHandler.call(i,i.currentForm,e),n&&n.remove(),void 0!==o&&o)}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)}))),i)}e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,i,n;return t(this[0]).is("form")?e=this.validate().form():(n=[],e=!0,i=t(this[0].form).validate(),this.each((function(){(e=i.element(this)&&e)||(n=n.concat(i.errorList))})),i.errorList=n),e},rules:function(e,i){var n,o,r,s,a,l,c=this[0],h=void 0!==this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=c&&(!c.form&&h&&(c.form=this.closest("form")[0],c.name=this.attr("name")),null!=c.form)){if(e)switch(o=(n=t.data(c.form,"validator").settings).rules,r=t.validator.staticRules(c),e){case"add":t.extend(r,t.validator.normalizeRule(i)),delete r.messages,o[c.name]=r,i.messages&&(n.messages[c.name]=t.extend(n.messages[c.name],i.messages));break;case"remove":return i?(l={},t.each(i.split(/\s/),(function(t,e){l[e]=r[e],delete r[e]})),l):(delete o[c.name],r)}return(s=t.validator.normalizeRules(t.extend({},t.validator.classRules(c),t.validator.attributeRules(c),t.validator.dataRules(c),t.validator.staticRules(c)),c)).required&&(a=s.required,delete s.required,s=t.extend({required:a},s)),s.remote&&(a=s.remote,delete s.remote,s=t.extend(s,{remote:a})),s}}});var e,i=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};t.extend(t.expr.pseudos||t.expr[":"],{blank:function(e){return!i(""+t(e).val())},filled:function(e){var n=t(e).val();return null!==n&&!!i(""+n)},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(void 0===i||(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,(function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),(function(){return i}))}))),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(e,i){var n=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===i.which&&""===this.elementValue(e)||-1!==t.inArray(i.keyCode,n)||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(n):t(e).addClass(i).removeClass(n)},unhighlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(n):t(e).removeClass(i).addClass(n)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}."),step:t.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var e,i=this.currentForm,n=this.groups={};function o(e){var n=void 0!==t(this).attr("contenteditable")&&"false"!==t(this).attr("contenteditable");if(!this.form&&n&&(this.form=t(this).closest("form")[0],this.name=t(this).attr("name")),i===this.form){var o=t.data(this.form,"validator"),r="on"+e.type.replace(/^validate/,""),s=o.settings;s[r]&&!t(this).is(s.ignore)&&s[r].call(o,this,e)}}t.each(this.settings.groups,(function(e,i){"string"==typeof i&&(i=i.split(/\s/)),t.each(i,(function(t,i){n[i]=e}))})),e=this.settings.rules,t.each(e,(function(i,n){e[i]=t.validator.normalizeRule(n)})),t(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",o).on("click.validate","select, option, [type='radio'], [type='checkbox']",o),this.settings.invalidHandler&&t(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var i,n,o=this.clean(e),r=this.validationTargetFor(o),s=this,a=!0;return void 0===r?delete this.invalid[o.name]:(this.prepareElement(r),this.currentElements=t(r),(n=this.groups[r.name])&&t.each(this.groups,(function(t,e){e===n&&t!==r.name&&(o=s.validationTargetFor(s.clean(s.findByName(t))))&&o.name in s.invalid&&(s.currentElements.push(o),a=s.check(o)&&a)})),i=!1!==this.check(r),a=a&&i,this.invalid[r.name]=!i,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),t(e).attr("aria-invalid",!i)),a},showErrors:function(e){if(e){var i=this;t.extend(this.errorMap,e),this.errorList=t.map(this.errorMap,(function(t,e){return{message:t,element:i.findByName(e)[0]}})),this.successList=t.grep(this.successList,(function(t){return!(t.name in e)}))}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(t){var e;if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,""),this.findByName(t[e].name).removeClass(this.settings.validClass);else t.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)void 0!==t[e]&&null!==t[e]&&!1!==t[e]&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,(function(t){return t.element.name===e.name})).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter((function(){var n=this.name||t(this).attr("name"),o=void 0!==t(this).attr("contenteditable")&&"false"!==t(this).attr("contenteditable");return!n&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),o&&(this.form=t(this).closest("form")[0],this.name=n),!(this.form!==e.currentForm||n in i||!e.objectLength(t(this).rules())||(i[n]=!0,0))}))},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([])},reset:function(){this.resetInternals(),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i,n,o=t(e),r=e.type,s=void 0!==o.attr("contenteditable")&&"false"!==o.attr("contenteditable");return"radio"===r||"checkbox"===r?this.findByName(e.name).filter(":checked").val():"number"===r&&void 0!==e.validity?e.validity.badInput?"NaN":o.val():(i=s?o.text():o.val(),"file"===r?"C:\\fakepath\\"===i.substr(0,12)?i.substr(12):(n=i.lastIndexOf("/"))>=0||(n=i.lastIndexOf("\\"))>=0?i.substr(n+1):i:"string"==typeof i?i.replace(/\r/g,""):i)},check:function(e){e=this.validationTargetFor(this.clean(e));var i,n,o,r,s=t(e).rules(),a=t.map(s,(function(t,e){return e})).length,l=!1,c=this.elementValue(e);for(n in"function"==typeof s.normalizer?r=s.normalizer:"function"==typeof this.settings.normalizer&&(r=this.settings.normalizer),r&&(c=r.call(e,c),delete s.normalizer),s){o={method:n,parameters:s[n]};try{if("dependency-mismatch"===(i=t.validator.methods[n].call(this,c,e,o.parameters))&&1===a){l=!0;continue}if(l=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,o),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+o.method+"' method.",t),t instanceof TypeError&&(t.message+=".  Exception occurred when checking element "+e.id+", check the '"+o.method+"' method."),t}}if(!l)return this.objectLength(s)&&this.successList.push(e),!0},customDataMessage:function(e,i){return t(e).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,i){"string"==typeof i&&(i={method:i});var n=this.findDefined(this.customMessage(e.name,i.method),this.customDataMessage(e,i.method),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),o=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,i.parameters,e):o.test(n)&&(n=t.validator.format(n.replace(o,"{$1}"),i.parameters)),n},formatAndAdd:function(t,e){var i=this.defaultMessage(t,e);this.errorList.push({message:i,element:t,method:e.method}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map((function(){return this.element}))},showLabel:function(e,i){var n,o,r,s,a=this.errorsFor(e),l=this.idOrName(e),c=t(e).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(i)):(n=a=t("<"+this.settings.errorElement+">").attr("id",l+"-error").addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement.call(this,n,t(e)):n.insertAfter(e),a.is("label")?a.attr("for",l):0===a.parents("label[for='"+this.escapeCssMeta(l)+"']").length&&(r=a.attr("id"),c?c.match(new RegExp("\\b"+this.escapeCssMeta(r)+"\\b"))||(c+=" "+r):c=r,t(e).attr("aria-describedby",c),(o=this.groups[e.name])&&(s=this,t.each(s.groups,(function(e,i){i===o&&t("[name='"+s.escapeCssMeta(e)+"']",s.currentForm).attr("aria-describedby",a.attr("id"))}))))),!i&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,e)),this.toShow=this.toShow.add(a)},errorsFor:function(e){var i=this.escapeCssMeta(this.idOrName(e)),n=t(e).attr("aria-describedby"),o="label[for='"+i+"'], label[for='"+i+"'] *";return n&&(o=o+", #"+this.escapeCssMeta(n).replace(/\s+/g,", #")),this.errors().filter(o)},escapeCssMeta:function(t){return t.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(e,i){return!!t(e,i.form).length},function:function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,t(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t(e).removeClass(this.settings.pendingClass),i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.submitButton&&t("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,i){return i="string"==typeof i&&i||"remote",t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:i})})},destroy:function(){this.resetForm(),t(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},n=t(e).attr("class");return n&&t.each(n.split(" "),(function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])})),i},normalizeAttributeRule:function(t,e,i,n){/min|max|step/.test(i)&&(null===e||/number|range|text/.test(e))&&(n=Number(n),isNaN(n)&&(n=void 0)),n||0===n?t[i]=n:e===i&&"range"!==e&&(t[i]=!0)},attributeRules:function(e){var i,n,o={},r=t(e),s=e.getAttribute("type");for(i in t.validator.methods)"required"===i?(""===(n=e.getAttribute(i))&&(n=!0),n=!!n):n=r.attr(i),this.normalizeAttributeRule(o,s,i,n);return o.maxlength&&/-1|2147483647|524288/.test(o.maxlength)&&delete o.maxlength,o},dataRules:function(e){var i,n,o={},r=t(e),s=e.getAttribute("type");for(i in t.validator.methods)""===(n=r.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()))&&(n=!0),this.normalizeAttributeRule(o,s,i,n);return o},staticRules:function(e){var i={},n=t.data(e.form,"validator");return n.settings.rules&&(i=t.validator.normalizeRule(n.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,(function(n,o){if(!1!==o){if(o.param||o.depends){var r=!0;switch(typeof o.depends){case"string":r=!!t(o.depends,i.form).length;break;case"function":r=o.depends.call(i,i)}r?e[n]=void 0===o.param||o.param:(t.data(i.form,"validator").resetElements(t(i)),delete e[n])}}else delete e[n]})),t.each(e,(function(t,n){e[t]="function"==typeof n&&"normalizer"!==t?n(i):n})),t.each(["minlength","maxlength"],(function(){e[this]&&(e[this]=Number(e[this]))})),t.each(["rangelength","range"],(function(){var t;e[this]&&(Array.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(t=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(t[0]),Number(t[1])]))})),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),(function(){i[this]=!0})),e=i}return e},addMethod:function(e,i,n){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==n?n:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var o=t(i).val();return o&&o.length>0}return this.checkable(i)?this.getLength(e,i)>0:null!=e&&e.length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)},date:(e=!1,function(t,i){return e||(e=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(i)||!/Invalid|NaN/.test(new Date(t).toString())}),dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(t,e,i){var n=Array.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n>=i},maxlength:function(t,e,i){var n=Array.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n<=i},rangelength:function(t,e,i){var n=Array.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n>=i[0]&&n<=i[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||t<=i},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},step:function(e,i,n){var o,r=t(i).attr("type"),s="Step attribute on input type "+r+" is not supported.",a=["text","number","range"],l=new RegExp("\\b"+r+"\\b"),c=function(t){var e=(""+t).match(/(?:\.(\d+))?$/);return e&&e[1]?e[1].length:0},h=function(t){return Math.round(t*Math.pow(10,o))},u=!0;if(r&&!l.test(a.join()))throw new Error(s);return o=c(n),(c(e)>o||h(e)%h(n)!=0)&&(u=!1),this.optional(i)||u},equalTo:function(e,i,n){var o=t(n);return this.settings.onfocusout&&o.not(".validate-equalTo-blur").length&&o.addClass("validate-equalTo-blur").on("blur.validate-equalTo",(function(){t(i).valid()})),e===o.val()},remote:function(e,i,n,o){if(this.optional(i))return"dependency-mismatch";o="string"==typeof o&&o||"remote";var r,s,a,l=this.previousValue(i,o);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),l.originalMessage=l.originalMessage||this.settings.messages[i.name][o],this.settings.messages[i.name][o]=l.message,n="string"==typeof n&&{url:n}||n,a=t.param(t.extend({data:e},n.data)),l.old===a?l.valid:(l.old=a,r=this,this.startRequest(i),(s={})[i.name]=e,t.ajax(t.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:s,context:r.currentForm,success:function(t){var n,s,a,c=!0===t||"true"===t;r.settings.messages[i.name][o]=l.originalMessage,c?(a=r.formSubmitted,r.resetInternals(),r.toHide=r.errorsFor(i),r.formSubmitted=a,r.successList.push(i),r.invalid[i.name]=!1,r.showErrors()):(n={},s=t||r.defaultMessage(i,{method:o,parameters:e}),n[i.name]=l.message=s,r.invalid[i.name]=!0,r.showErrors(n)),l.valid=c,r.stopRequest(i,c)}},n)),"pending")}}});var n,o={};return t.ajaxPrefilter?t.ajaxPrefilter((function(t,e,i){var n=t.port;"abort"===t.mode&&(o[n]&&o[n].abort(),o[n]=i)})):(n=t.ajax,t.ajax=function(e){var i=("mode"in e?e:t.ajaxSettings).mode,r=("port"in e?e:t.ajaxSettings).port;return"abort"===i?(o[r]&&o[r].abort(),o[r]=n.apply(this,arguments),o[r]):n.apply(this,arguments)}),t})?n.apply(e,o):n)||(t.exports=r)},755:function(t,e){var i;!function(e,i){"use strict";"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(e)}("undefined"!=typeof window?window:this,(function(n,o){"use strict";var r=[],s=Object.getPrototypeOf,a=r.slice,l=r.flat?function(t){return r.flat.call(t)}:function(t){return r.concat.apply([],t)},c=r.push,h=r.indexOf,u={},d=u.toString,p=u.hasOwnProperty,g=p.toString,f=g.call(Object),m={},v=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},_=function(t){return null!=t&&t===t.window},y=n.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,i){var n,o,r=(i=i||y).createElement("script");if(r.text=t,e)for(n in b)(o=e[n]||e.getAttribute&&e.getAttribute(n))&&r.setAttribute(n,o);i.head.appendChild(r).parentNode.removeChild(r)}function k(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?u[d.call(t)]||"object":typeof t}var C="3.6.0",T=function(t,e){return new T.fn.init(t,e)};function E(t){var e=!!t&&"length"in t&&t.length,i=k(t);return!v(t)&&!_(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}T.fn=T.prototype={jquery:C,constructor:T,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=T.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return T.each(this,t)},map:function(t){return this.pushStack(T.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(T.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:r.sort,splice:r.splice},T.extend=T.fn.extend=function(){var t,e,i,n,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||v(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)n=t[e],"__proto__"!==e&&s!==n&&(c&&n&&(T.isPlainObject(n)||(o=Array.isArray(n)))?(i=s[e],r=o&&!Array.isArray(i)?[]:o||T.isPlainObject(i)?i:{},o=!1,s[e]=T.extend(c,r,n)):void 0!==n&&(s[e]=n));return s},T.extend({expando:"jQuery"+(C+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==d.call(t))&&(!(e=s(t))||"function"==typeof(i=p.call(e,"constructor")&&e.constructor)&&g.call(i)===f)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,i){w(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,n=0;if(E(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},makeArray:function(t,e){var i=e||[];return null!=t&&(E(Object(t))?T.merge(i,"string"==typeof t?[t]:t):c.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:h.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;n++)t[o++]=e[n];return t.length=o,t},grep:function(t,e,i){for(var n=[],o=0,r=t.length,s=!i;o<r;o++)!e(t[o],o)!==s&&n.push(t[o]);return n},map:function(t,e,i){var n,o,r=0,s=[];if(E(t))for(n=t.length;r<n;r++)null!=(o=e(t[r],r,i))&&s.push(o);else for(r in t)null!=(o=e(t[r],r,i))&&s.push(o);return l(s)},guid:1,support:m}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=r[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){u["[object "+e+"]"]=e.toLowerCase()}));var S=function(t){var e,i,n,o,r,s,a,l,c,h,u,d,p,g,f,m,v,_,y,b="sizzle"+1*new Date,w=t.document,k=0,C=0,T=lt(),E=lt(),S=lt(),x=lt(),R=function(t,e){return t===e&&(u=!0),0},A={}.hasOwnProperty,I=[],D=I.pop,O=I.push,N=I.push,L=I.slice,M=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\[[\\x20\\t\\r\\n\\f]*("+F+")(?:"+P+"*([*^$|!~]?=)"+P+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+P+"*\\]",$=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",H=new RegExp(P+"+","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),V=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),G=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),z=new RegExp(P+"|>"),j=new RegExp($),X=new RegExp("^"+F+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,q=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),it=function(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},nt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ot=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){d()},st=bt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{N.apply(I=L.call(w.childNodes),w.childNodes),I[w.childNodes.length].nodeType}catch(t){N={apply:I.length?function(t,e){O.apply(t,L.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function at(t,e,n,o){var r,a,c,h,u,g,v,_=e&&e.ownerDocument,w=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return n;if(!o&&(d(e),e=e||p,f)){if(11!==w&&(u=Q.exec(t)))if(r=u[1]){if(9===w){if(!(c=e.getElementById(r)))return n;if(c.id===r)return n.push(c),n}else if(_&&(c=_.getElementById(r))&&y(e,c)&&c.id===r)return n.push(c),n}else{if(u[2])return N.apply(n,e.getElementsByTagName(t)),n;if((r=u[3])&&i.getElementsByClassName&&e.getElementsByClassName)return N.apply(n,e.getElementsByClassName(r)),n}if(i.qsa&&!x[t+" "]&&(!m||!m.test(t))&&(1!==w||"object"!==e.nodeName.toLowerCase())){if(v=t,_=e,1===w&&(z.test(t)||G.test(t))){for((_=tt.test(t)&&vt(e.parentNode)||e)===e&&i.scope||((h=e.getAttribute("id"))?h=h.replace(nt,ot):e.setAttribute("id",h=b)),a=(g=s(t)).length;a--;)g[a]=(h?"#"+h:":scope")+" "+yt(g[a]);v=g.join(",")}try{return N.apply(n,_.querySelectorAll(v)),n}catch(e){x(t,!0)}finally{h===b&&e.removeAttribute("id")}}}return l(t.replace(U,"$1"),e,n,o)}function lt(){var t=[];return function e(i,o){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=o}}function ct(t){return t[b]=!0,t}function ht(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var i=t.split("|"),o=i.length;o--;)n.attrHandle[i[o]]=e}function dt(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function gt(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function ft(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&st(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return ct((function(e){return e=+e,ct((function(i,n){for(var o,r=t([],i.length,e),s=r.length;s--;)i[o=r[s]]&&(i[o]=!(n[o]=i[o]))}))}))}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=at.support={},r=at.isXML=function(t){var e=t&&t.namespaceURI,i=t&&(t.ownerDocument||t).documentElement;return!Y.test(e||i&&i.nodeName||"HTML")},d=at.setDocument=function(t){var e,o,s=t?t.ownerDocument||t:w;return s!=p&&9===s.nodeType&&s.documentElement?(g=(p=s).documentElement,f=!r(p),w!=p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",rt,!1):o.attachEvent&&o.attachEvent("onunload",rt)),i.scope=ht((function(t){return g.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),i.attributes=ht((function(t){return t.className="i",!t.getAttribute("className")})),i.getElementsByTagName=ht((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),i.getElementsByClassName=J.test(p.getElementsByClassName),i.getById=ht((function(t){return g.appendChild(t).id=b,!p.getElementsByName||!p.getElementsByName(b).length})),i.getById?(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var i=e.getElementById(t);return i?[i]:[]}}):(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var i,n,o,r=e.getElementById(t);if(r){if((i=r.getAttributeNode("id"))&&i.value===t)return[r];for(o=e.getElementsByName(t),n=0;r=o[n++];)if((i=r.getAttributeNode("id"))&&i.value===t)return[r]}return[]}}),n.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},n.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&f)return e.getElementsByClassName(t)},v=[],m=[],(i.qsa=J.test(p.querySelectorAll))&&(ht((function(t){var e;g.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+B+")"),t.querySelectorAll("[id~="+b+"-]").length||m.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||m.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]"),t.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ht((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),g.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(i.matchesSelector=J.test(_=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.oMatchesSelector||g.msMatchesSelector))&&ht((function(t){i.disconnectedMatch=_.call(t,"*"),_.call(t,"[s!='']:x"),v.push("!=",$)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=J.test(g.compareDocumentPosition),y=e||J.test(g.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},R=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t==p||t.ownerDocument==w&&y(w,t)?-1:e==p||e.ownerDocument==w&&y(w,e)?1:h?M(h,t)-M(h,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var i,n=0,o=t.parentNode,r=e.parentNode,s=[t],a=[e];if(!o||!r)return t==p?-1:e==p?1:o?-1:r?1:h?M(h,t)-M(h,e):0;if(o===r)return dt(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;s[n]===a[n];)n++;return n?dt(s[n],a[n]):s[n]==w?-1:a[n]==w?1:0},p):p},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(d(t),i.matchesSelector&&f&&!x[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var n=_.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){x(e,!0)}return at(e,p,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!=p&&d(t),y(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=p&&d(t);var o=n.attrHandle[e.toLowerCase()],r=o&&A.call(n.attrHandle,e.toLowerCase())?o(t,e,!f):void 0;return void 0!==r?r:i.attributes||!f?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},at.escape=function(t){return(t+"").replace(nt,ot)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,n=[],o=0,r=0;if(u=!i.detectDuplicates,h=!i.sortStable&&t.slice(0),t.sort(R),u){for(;e=t[r++];)e===t[r]&&(o=n.push(r));for(;o--;)t.splice(n[o],1)}return h=null,t},o=at.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=o(e);return i},(n=at.selectors={cacheLength:50,createPseudo:ct,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,it),t[3]=(t[3]||t[4]||t[5]||"").replace(et,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&j.test(i)&&(e=s(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=T[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+P+"|$)"))&&T(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(n){var o=at.attr(n,t);return null==o?"!="===e:!e||(o+="","="===e?o===i:"!="===e?o!==i:"^="===e?i&&0===o.indexOf(i):"*="===e?i&&o.indexOf(i)>-1:"$="===e?i&&o.slice(-i.length)===i:"~="===e?(" "+o.replace(H," ")+" ").indexOf(i)>-1:"|="===e&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var c,h,u,d,p,g,f=r!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),_=!l&&!a,y=!1;if(m){if(r){for(;f;){for(d=e;d=d[f];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;g=f="only"===t&&!g&&"nextSibling"}return!0}if(g=[s?m.firstChild:m.lastChild],s&&_){for(y=(p=(c=(h=(u=(d=m)[b]||(d[b]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===k&&c[1])&&c[2],d=p&&m.childNodes[p];d=++p&&d&&d[f]||(y=p=0)||g.pop();)if(1===d.nodeType&&++y&&d===e){h[t]=[k,p,y];break}}else if(_&&(y=p=(c=(h=(u=(d=e)[b]||(d[b]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===k&&c[1]),!1===y)for(;(d=++p&&d&&d[f]||(y=p=0)||g.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++y||(_&&((h=(u=d[b]||(d[b]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]=[k,y]),d!==e)););return(y-=o)===n||y%n==0&&y/n>=0}}},PSEUDO:function(t,e){var i,o=n.pseudos[t]||n.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return o[b]?o(e):o.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?ct((function(t,i){for(var n,r=o(t,e),s=r.length;s--;)t[n=M(t,r[s])]=!(i[n]=r[s])})):function(t){return o(t,0,i)}):o}},pseudos:{not:ct((function(t){var e=[],i=[],n=a(t.replace(U,"$1"));return n[b]?ct((function(t,e,i,o){for(var r,s=n(t,null,o,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))})):function(t,o,r){return e[0]=t,n(e,null,r,i),e[0]=null,!i.pop()}})),has:ct((function(t){return function(e){return at(t,e).length>0}})),contains:ct((function(t){return t=t.replace(et,it),function(e){return(e.textContent||o(e)).indexOf(t)>-1}})),lang:ct((function(t){return X.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,it).toLowerCase(),function(e){var i;do{if(i=f?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===g},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ft(!1),disabled:ft(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return Z.test(t.nodeName)},input:function(t){return q.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt((function(){return[0]})),last:mt((function(t,e){return[e-1]})),eq:mt((function(t,e,i){return[i<0?i+e:i]})),even:mt((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:mt((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:mt((function(t,e,i){for(var n=i<0?i+e:i>e?e:i;--n>=0;)t.push(n);return t})),gt:mt((function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=gt(e);function _t(){}function yt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function bt(t,e,i){var n=e.dir,o=e.next,r=o||n,s=i&&"parentNode"===r,a=C++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,o);return!1}:function(e,i,l){var c,h,u,d=[k,a];if(l){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||s)if(h=(u=e[b]||(e[b]={}))[e.uniqueID]||(u[e.uniqueID]={}),o&&o===e.nodeName.toLowerCase())e=e[n]||e;else{if((c=h[r])&&c[0]===k&&c[1]===a)return d[2]=c[2];if(h[r]=d,d[2]=t(e,i,l))return!0}return!1}}function wt(t){return t.length>1?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function kt(t,e,i,n,o){for(var r,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(r=t[a])&&(i&&!i(r,n,o)||(s.push(r),c&&e.push(a)));return s}function Ct(t,e,i,n,o,r){return n&&!n[b]&&(n=Ct(n)),o&&!o[b]&&(o=Ct(o,r)),ct((function(r,s,a,l){var c,h,u,d=[],p=[],g=s.length,f=r||function(t,e,i){for(var n=0,o=e.length;n<o;n++)at(t,e[n],i);return i}(e||"*",a.nodeType?[a]:a,[]),m=!t||!r&&e?f:kt(f,d,t,a,l),v=i?o||(r?t:g||n)?[]:s:m;if(i&&i(m,v,a,l),n)for(c=kt(v,p),n(c,[],a,l),h=c.length;h--;)(u=c[h])&&(v[p[h]]=!(m[p[h]]=u));if(r){if(o||t){if(o){for(c=[],h=v.length;h--;)(u=v[h])&&c.push(m[h]=u);o(null,v=[],c,l)}for(h=v.length;h--;)(u=v[h])&&(c=o?M(r,u):d[h])>-1&&(r[c]=!(s[c]=u))}}else v=kt(v===s?v.splice(g,v.length):v),o?o(null,s,v,l):N.apply(s,v)}))}function Tt(t){for(var e,i,o,r=t.length,s=n.relative[t[0].type],a=s||n.relative[" "],l=s?1:0,h=bt((function(t){return t===e}),a,!0),u=bt((function(t){return M(e,t)>-1}),a,!0),d=[function(t,i,n){var o=!s&&(n||i!==c)||((e=i).nodeType?h(t,i,n):u(t,i,n));return e=null,o}];l<r;l++)if(i=n.relative[t[l].type])d=[bt(wt(d),i)];else{if((i=n.filter[t[l].type].apply(null,t[l].matches))[b]){for(o=++l;o<r&&!n.relative[t[o].type];o++);return Ct(l>1&&wt(d),l>1&&yt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(U,"$1"),i,l<o&&Tt(t.slice(l,o)),o<r&&Tt(t=t.slice(o)),o<r&&yt(t))}d.push(i)}return wt(d)}return _t.prototype=n.filters=n.pseudos,n.setFilters=new _t,s=at.tokenize=function(t,e){var i,o,r,s,a,l,c,h=E[t+" "];if(h)return e?0:h.slice(0);for(a=t,l=[],c=n.preFilter;a;){for(s in i&&!(o=V.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=G.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(U," ")}),a=a.slice(i.length)),n.filter)!(o=K[s].exec(a))||c[s]&&!(o=c[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return e?a.length:a?at.error(t):E(t,l).slice(0)},a=at.compile=function(t,e){var i,o=[],r=[],a=S[t+" "];if(!a){for(e||(e=s(t)),i=e.length;i--;)(a=Tt(e[i]))[b]?o.push(a):r.push(a);(a=S(t,function(t,e){var i=e.length>0,o=t.length>0,r=function(r,s,a,l,h){var u,g,m,v=0,_="0",y=r&&[],b=[],w=c,C=r||o&&n.find.TAG("*",h),T=k+=null==w?1:Math.random()||.1,E=C.length;for(h&&(c=s==p||s||h);_!==E&&null!=(u=C[_]);_++){if(o&&u){for(g=0,s||u.ownerDocument==p||(d(u),a=!f);m=t[g++];)if(m(u,s||p,a)){l.push(u);break}h&&(k=T)}i&&((u=!m&&u)&&v--,r&&y.push(u))}if(v+=_,i&&_!==v){for(g=0;m=e[g++];)m(y,b,s,a);if(r){if(v>0)for(;_--;)y[_]||b[_]||(b[_]=D.call(l));b=kt(b)}N.apply(l,b),h&&!r&&b.length>0&&v+e.length>1&&at.uniqueSort(l)}return h&&(k=T,c=w),y};return i?ct(r):r}(r,o))).selector=t}return a},l=at.select=function(t,e,i,o){var r,l,c,h,u,d="function"==typeof t&&t,p=!o&&s(t=d.selector||t);if(i=i||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===e.nodeType&&f&&n.relative[l[1].type]){if(!(e=(n.find.ID(c.matches[0].replace(et,it),e)||[])[0]))return i;d&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(r=K.needsContext.test(t)?0:l.length;r--&&(c=l[r],!n.relative[h=c.type]);)if((u=n.find[h])&&(o=u(c.matches[0].replace(et,it),tt.test(l[0].type)&&vt(e.parentNode)||e))){if(l.splice(r,1),!(t=o.length&&yt(l)))return N.apply(i,o),i;break}}return(d||a(t,p))(o,e,!f,i,!e||tt.test(t)&&vt(e.parentNode)||e),i},i.sortStable=b.split("").sort(R).join("")===b,i.detectDuplicates=!!u,d(),i.sortDetached=ht((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),ht((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ut("type|href|height|width",(function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),i.attributes&&ht((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ut("value",(function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ht((function(t){return null==t.getAttribute("disabled")}))||ut(B,(function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null})),at}(n);T.find=S,T.expr=S.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=S.uniqueSort,T.text=S.getText,T.isXMLDoc=S.isXML,T.contains=S.contains,T.escapeSelector=S.escape;var x=function(t,e,i){for(var n=[],o=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&T(t).is(i))break;n.push(t)}return n},R=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},A=T.expr.match.needsContext;function I(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(t,e,i){return v(e)?T.grep(t,(function(t,n){return!!e.call(t,n,t)!==i})):e.nodeType?T.grep(t,(function(t){return t===e!==i})):"string"!=typeof e?T.grep(t,(function(t){return h.call(e,t)>-1!==i})):T.filter(e,t,i)}T.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?T.find.matchesSelector(n,t)?[n]:[]:T.find.matches(t,T.grep(e,(function(t){return 1===t.nodeType})))},T.fn.extend({find:function(t){var e,i,n=this.length,o=this;if("string"!=typeof t)return this.pushStack(T(t).filter((function(){for(e=0;e<n;e++)if(T.contains(o[e],this))return!0})));for(i=this.pushStack([]),e=0;e<n;e++)T.find(t,o[e],i);return n>1?T.uniqueSort(i):i},filter:function(t){return this.pushStack(O(this,t||[],!1))},not:function(t){return this.pushStack(O(this,t||[],!0))},is:function(t){return!!O(this,"string"==typeof t&&A.test(t)?T(t):t||[],!1).length}});var N,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(t,e,i){var n,o;if(!t)return this;if(i=i||N,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:L.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:y,!0)),D.test(n[1])&&T.isPlainObject(e))for(n in e)v(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(o=y.getElementById(n[2]))&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):v(t)?void 0!==i.ready?i.ready(t):t(T):T.makeArray(t,this)}).prototype=T.fn,N=T(y);var M=/^(?:parents|prev(?:Until|All))/,B={children:!0,contents:!0,next:!0,prev:!0};function P(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if(T.contains(this,e[t]))return!0}))},closest:function(t,e){var i,n=0,o=this.length,r=[],s="string"!=typeof t&&T(t);if(!A.test(t))for(;n<o;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&T.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(r.length>1?T.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?h.call(T(t),this[0]):h.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return x(t,"parentNode")},parentsUntil:function(t,e,i){return x(t,"parentNode",i)},next:function(t){return P(t,"nextSibling")},prev:function(t){return P(t,"previousSibling")},nextAll:function(t){return x(t,"nextSibling")},prevAll:function(t){return x(t,"previousSibling")},nextUntil:function(t,e,i){return x(t,"nextSibling",i)},prevUntil:function(t,e,i){return x(t,"previousSibling",i)},siblings:function(t){return R((t.parentNode||{}).firstChild,t)},children:function(t){return R(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(I(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},(function(t,e){T.fn[t]=function(i,n){var o=T.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=T.filter(n,o)),this.length>1&&(B[t]||T.uniqueSort(o),M.test(t)&&o.reverse()),this.pushStack(o)}}));var F=/[^\x20\t\r\n\f]+/g;function W(t){return t}function $(t){throw t}function H(t,e,i,n){var o;try{t&&v(o=t.promise)?o.call(t).done(e).fail(i):t&&v(o=t.then)?o.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}T.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return T.each(t.match(F)||[],(function(t,i){e[i]=!0})),e}(t):T.extend({},t);var e,i,n,o,r=[],s=[],a=-1,l=function(){for(o=o||t.once,n=e=!0;s.length;a=-1)for(i=s.shift();++a<r.length;)!1===r[a].apply(i[0],i[1])&&t.stopOnFalse&&(a=r.length,i=!1);t.memory||(i=!1),e=!1,o&&(r=i?[]:"")},c={add:function(){return r&&(i&&!e&&(a=r.length-1,s.push(i)),function e(i){T.each(i,(function(i,n){v(n)?t.unique&&c.has(n)||r.push(n):n&&n.length&&"string"!==k(n)&&e(n)}))}(arguments),i&&!e&&l()),this},remove:function(){return T.each(arguments,(function(t,e){for(var i;(i=T.inArray(e,r,i))>-1;)r.splice(i,1),i<=a&&a--})),this},has:function(t){return t?T.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=i="",this},disabled:function(){return!r},lock:function(){return o=s=[],i||e||(r=i=""),this},locked:function(){return!!o},fireWith:function(t,i){return o||(i=[t,(i=i||[]).slice?i.slice():i],s.push(i),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},T.extend({Deferred:function(t){var e=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var t=arguments;return T.Deferred((function(i){T.each(e,(function(e,n){var o=v(t[n[4]])&&t[n[4]];r[n[1]]((function(){var t=o&&o.apply(this,arguments);t&&v(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,o?[t]:arguments)}))})),t=null})).promise()},then:function(t,i,o){var r=0;function s(t,e,i,o){return function(){var a=this,l=arguments,c=function(){var n,c;if(!(t<r)){if((n=i.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,v(c)?o?c.call(n,s(r,e,W,o),s(r,e,$,o)):(r++,c.call(n,s(r,e,W,o),s(r,e,$,o),s(r,e,W,e.notifyWith))):(i!==W&&(a=void 0,l=[n]),(o||e.resolveWith)(a,l))}},h=o?c:function(){try{c()}catch(n){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(n,h.stackTrace),t+1>=r&&(i!==$&&(a=void 0,l=[n]),e.rejectWith(a,l))}};t?h():(T.Deferred.getStackHook&&(h.stackTrace=T.Deferred.getStackHook()),n.setTimeout(h))}}return T.Deferred((function(n){e[0][3].add(s(0,n,v(o)?o:W,n.notifyWith)),e[1][3].add(s(0,n,v(t)?t:W)),e[2][3].add(s(0,n,v(i)?i:$))})).promise()},promise:function(t){return null!=t?T.extend(t,o):o}},r={};return T.each(e,(function(t,n){var s=n[2],a=n[5];o[n[1]]=s.add,a&&s.add((function(){i=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(n[3].fire),r[n[0]]=function(){return r[n[0]+"With"](this===r?void 0:this,arguments),this},r[n[0]+"With"]=s.fireWith})),o.promise(r),t&&t.call(r,r),r},when:function(t){var e=arguments.length,i=e,n=Array(i),o=a.call(arguments),r=T.Deferred(),s=function(t){return function(i){n[t]=this,o[t]=arguments.length>1?a.call(arguments):i,--e||r.resolveWith(n,o)}};if(e<=1&&(H(t,r.done(s(i)).resolve,r.reject,!e),"pending"===r.state()||v(o[i]&&o[i].then)))return r.then();for(;i--;)H(o[i],s(i),r.reject);return r.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&U.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){n.setTimeout((function(){throw t}))};var V=T.Deferred();function G(){y.removeEventListener("DOMContentLoaded",G),n.removeEventListener("load",G),T.ready()}T.fn.ready=function(t){return V.then(t).catch((function(t){T.readyException(t)})),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==t&&--T.readyWait>0||V.resolveWith(y,[T]))}}),T.ready.then=V.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?n.setTimeout(T.ready):(y.addEventListener("DOMContentLoaded",G),n.addEventListener("load",G));var z=function(t,e,i,n,o,r,s){var a=0,l=t.length,c=null==i;if("object"===k(i))for(a in o=!0,i)z(t,e,a,i[a],!0,r,s);else if(void 0!==n&&(o=!0,v(n)||(s=!0),c&&(s?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(T(t),i)})),e))for(;a<l;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return o?t:c?e.call(t):l?e(t[0],i):r},j=/^-ms-/,X=/-([a-z])/g;function K(t,e){return e.toUpperCase()}function Y(t){return t.replace(j,"ms-").replace(X,K)}var q=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Z(){this.expando=T.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(t){var e=t[this.expando];return e||(e={},q(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,o=this.cache(t);if("string"==typeof e)o[Y(e)]=i;else for(n in e)o[Y(n)]=e[n];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Y(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(Y):(e=Y(e))in n?[e]:e.match(F)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||T.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var J=new Z,Q=new Z,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function it(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(i)}catch(t){}Q.set(t,e,i)}else i=void 0;return i}T.extend({hasData:function(t){return Q.hasData(t)||J.hasData(t)},data:function(t,e,i){return Q.access(t,e,i)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,i){return J.access(t,e,i)},_removeData:function(t,e){J.remove(t,e)}}),T.fn.extend({data:function(t,e){var i,n,o,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(o=Q.get(r),1===r.nodeType&&!J.get(r,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(n=s[i].name).indexOf("data-")&&(n=Y(n.slice(5)),it(r,n,o[n]));J.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each((function(){Q.set(this,t)})):z(this,(function(e){var i;if(r&&void 0===e)return void 0!==(i=Q.get(r,t))||void 0!==(i=it(r,t))?i:void 0;this.each((function(){Q.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Q.remove(this,t)}))}}),T.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=J.get(t,e),i&&(!n||Array.isArray(i)?n=J.access(t,e,T.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=T.queue(t,e),n=i.length,o=i.shift(),r=T._queueHooks(t,e);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete r.stop,o.call(t,(function(){T.dequeue(t,e)}),r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return J.get(t,i)||J.access(t,i,{empty:T.Callbacks("once memory").add((function(){J.remove(t,[e+"queue",i])}))})}}),T.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?T.queue(this[0],t):void 0===e?this:this.each((function(){var i=T.queue(this,t,e);T._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&T.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){T.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,o=T.Deferred(),r=this,s=this.length,a=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=J.get(r[s],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(e)}});var nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ot=new RegExp("^(?:([+-])=|)("+nt+")([a-z%]*)$","i"),rt=["Top","Right","Bottom","Left"],st=y.documentElement,at=function(t){return T.contains(t.ownerDocument,t)},lt={composed:!0};st.getRootNode&&(at=function(t){return T.contains(t.ownerDocument,t)||t.getRootNode(lt)===t.ownerDocument});var ct=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===T.css(t,"display")};function ht(t,e,i,n){var o,r,s=20,a=n?function(){return n.cur()}:function(){return T.css(t,e,"")},l=a(),c=i&&i[3]||(T.cssNumber[e]?"":"px"),h=t.nodeType&&(T.cssNumber[e]||"px"!==c&&+l)&&ot.exec(T.css(t,e));if(h&&h[3]!==c){for(l/=2,c=c||h[3],h=+l||1;s--;)T.style(t,e,h+c),(1-r)*(1-(r=a()/l||.5))<=0&&(s=0),h/=r;h*=2,T.style(t,e,h+c),i=i||[]}return i&&(h=+h||+l||0,o=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=h,n.end=o)),o}var ut={};function dt(t){var e,i=t.ownerDocument,n=t.nodeName,o=ut[n];return o||(e=i.body.appendChild(i.createElement(n)),o=T.css(e,"display"),e.parentNode.removeChild(e),"none"===o&&(o="block"),ut[n]=o,o)}function pt(t,e){for(var i,n,o=[],r=0,s=t.length;r<s;r++)(n=t[r]).style&&(i=n.style.display,e?("none"===i&&(o[r]=J.get(n,"display")||null,o[r]||(n.style.display="")),""===n.style.display&&ct(n)&&(o[r]=dt(n))):"none"!==i&&(o[r]="none",J.set(n,"display",i)));for(r=0;r<s;r++)null!=o[r]&&(t[r].style.display=o[r]);return t}T.fn.extend({show:function(){return pt(this,!0)},hide:function(){return pt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){ct(this)?T(this).show():T(this).hide()}))}});var gt,ft,mt=/^(?:checkbox|radio)$/i,vt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,_t=/^$|^module$|\/(?:java|ecma)script/i;gt=y.createDocumentFragment().appendChild(y.createElement("div")),(ft=y.createElement("input")).setAttribute("type","radio"),ft.setAttribute("checked","checked"),ft.setAttribute("name","t"),gt.appendChild(ft),m.checkClone=gt.cloneNode(!0).cloneNode(!0).lastChild.checked,gt.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!gt.cloneNode(!0).lastChild.defaultValue,gt.innerHTML="<option></option>",m.option=!!gt.lastChild;var yt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function bt(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&I(t,e)?T.merge([t],i):i}function wt(t,e){for(var i=0,n=t.length;i<n;i++)J.set(t[i],"globalEval",!e||J.get(e[i],"globalEval"))}yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td,m.option||(yt.optgroup=yt.option=[1,"<select multiple='multiple'>","</select>"]);var kt=/<|&#?\w+;/;function Ct(t,e,i,n,o){for(var r,s,a,l,c,h,u=e.createDocumentFragment(),d=[],p=0,g=t.length;p<g;p++)if((r=t[p])||0===r)if("object"===k(r))T.merge(d,r.nodeType?[r]:r);else if(kt.test(r)){for(s=s||u.appendChild(e.createElement("div")),a=(vt.exec(r)||["",""])[1].toLowerCase(),l=yt[a]||yt._default,s.innerHTML=l[1]+T.htmlPrefilter(r)+l[2],h=l[0];h--;)s=s.lastChild;T.merge(d,s.childNodes),(s=u.firstChild).textContent=""}else d.push(e.createTextNode(r));for(u.textContent="",p=0;r=d[p++];)if(n&&T.inArray(r,n)>-1)o&&o.push(r);else if(c=at(r),s=bt(u.appendChild(r),"script"),c&&wt(s),i)for(h=0;r=s[h++];)_t.test(r.type||"")&&i.push(r);return u}var Tt=/^([^.]*)(?:\.(.+)|)/;function Et(){return!0}function St(){return!1}function xt(t,e){return t===function(){try{return y.activeElement}catch(t){}}()==("focus"===e)}function Rt(t,e,i,n,o,r){var s,a;if("object"==typeof e){for(a in"string"!=typeof i&&(n=n||i,i=void 0),e)Rt(t,a,i,n,e[a],r);return t}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=St;else if(!o)return t;return 1===r&&(s=o,(o=function(t){return T().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=T.guid++)),t.each((function(){T.event.add(this,e,o,n,i)}))}function At(t,e,i){i?(J.set(t,e,!1),T.event.add(t,e,{namespace:!1,handler:function(t){var n,o,r=J.get(this,e);if(1&t.isTrigger&&this[e]){if(r.length)(T.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=a.call(arguments),J.set(this,e,r),n=i(this,e),this[e](),r!==(o=J.get(this,e))||n?J.set(this,e,!1):o={},r!==o)return t.stopImmediatePropagation(),t.preventDefault(),o&&o.value}else r.length&&(J.set(this,e,{value:T.event.trigger(T.extend(r[0],T.Event.prototype),r.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===J.get(t,e)&&T.event.add(t,e,Et)}T.event={global:{},add:function(t,e,i,n,o){var r,s,a,l,c,h,u,d,p,g,f,m=J.get(t);if(q(t))for(i.handler&&(i=(r=i).handler,o=r.selector),o&&T.find.matchesSelector(st,o),i.guid||(i.guid=T.guid++),(l=m.events)||(l=m.events=Object.create(null)),(s=m.handle)||(s=m.handle=function(e){return void 0!==T&&T.event.triggered!==e.type?T.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(F)||[""]).length;c--;)p=f=(a=Tt.exec(e[c])||[])[1],g=(a[2]||"").split(".").sort(),p&&(u=T.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=T.event.special[p]||{},h=T.extend({type:p,origType:f,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&T.expr.match.needsContext.test(o),namespace:g.join(".")},r),(d=l[p])||((d=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,n,g,s)||t.addEventListener&&t.addEventListener(p,s)),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),o?d.splice(d.delegateCount++,0,h):d.push(h),T.event.global[p]=!0)},remove:function(t,e,i,n,o){var r,s,a,l,c,h,u,d,p,g,f,m=J.hasData(t)&&J.get(t);if(m&&(l=m.events)){for(c=(e=(e||"").match(F)||[""]).length;c--;)if(p=f=(a=Tt.exec(e[c])||[])[1],g=(a[2]||"").split(".").sort(),p){for(u=T.event.special[p]||{},d=l[p=(n?u.delegateType:u.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)h=d[r],!o&&f!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(d.splice(r,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(t,h));s&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,g,m.handle)||T.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)T.event.remove(t,p+e[c],i,n,!0);T.isEmptyObject(l)&&J.remove(t,"handle events")}},dispatch:function(t){var e,i,n,o,r,s,a=new Array(arguments.length),l=T.event.fix(t),c=(J.get(this,"events")||Object.create(null))[l.type]||[],h=T.event.special[l.type]||{};for(a[0]=l,e=1;e<arguments.length;e++)a[e]=arguments[e];if(l.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,l)){for(s=T.event.handlers.call(this,l,c),e=0;(o=s[e++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==r.namespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,void 0!==(n=((T.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,l),l.result}},handlers:function(t,e){var i,n,o,r,s,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(r=[],s={},i=0;i<l;i++)void 0===s[o=(n=e[i]).selector+" "]&&(s[o]=n.needsContext?T(o,this).index(c)>-1:T.find(o,this,null,[c]).length),s[o]&&r.push(n);r.length&&a.push({elem:c,handlers:r})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(T.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return mt.test(e.type)&&e.click&&I(e,"input")&&At(e,"click",Et),!1},trigger:function(t){var e=this||t;return mt.test(e.type)&&e.click&&I(e,"input")&&At(e,"click"),!0},_default:function(t){var e=t.target;return mt.test(e.type)&&e.click&&I(e,"input")&&J.get(e,"click")||I(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Et:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Et,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Et,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Et,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},(function(t,e){T.event.special[t]={setup:function(){return At(this,t,xt),!1},trigger:function(){return At(this,t),!0},_default:function(){return!0},delegateType:e}})),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){T.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,o=t.relatedTarget,r=t.handleObj;return o&&(o===n||T.contains(n,o))||(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}})),T.fn.extend({on:function(t,e,i,n){return Rt(this,t,e,i,n)},one:function(t,e,i,n){return Rt(this,t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,T(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=St),this.each((function(){T.event.remove(this,t,i,e)}))}});var It=/<script|<style|<link/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Nt(t,e){return I(t,"table")&&I(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Mt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Bt(t,e){var i,n,o,r,s,a;if(1===e.nodeType){if(J.hasData(t)&&(a=J.get(t).events))for(o in J.remove(e,"handle events"),a)for(i=0,n=a[o].length;i<n;i++)T.event.add(e,o,a[o][i]);Q.hasData(t)&&(r=Q.access(t),s=T.extend({},r),Q.set(e,s))}}function Pt(t,e){var i=e.nodeName.toLowerCase();"input"===i&&mt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Ft(t,e,i,n){e=l(e);var o,r,s,a,c,h,u=0,d=t.length,p=d-1,g=e[0],f=v(g);if(f||d>1&&"string"==typeof g&&!m.checkClone&&Dt.test(g))return t.each((function(o){var r=t.eq(o);f&&(e[0]=g.call(this,o,r.html())),Ft(r,e,i,n)}));if(d&&(r=(o=Ct(e,t[0].ownerDocument,!1,t,n)).firstChild,1===o.childNodes.length&&(o=r),r||n)){for(a=(s=T.map(bt(o,"script"),Lt)).length;u<d;u++)c=o,u!==p&&(c=T.clone(c,!0,!0),a&&T.merge(s,bt(c,"script"))),i.call(t[u],c,u);if(a)for(h=s[s.length-1].ownerDocument,T.map(s,Mt),u=0;u<a;u++)c=s[u],_t.test(c.type||"")&&!J.access(c,"globalEval")&&T.contains(h,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?T._evalUrl&&!c.noModule&&T._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},h):w(c.textContent.replace(Ot,""),c,h))}return t}function Wt(t,e,i){for(var n,o=e?T.filter(e,t):t,r=0;null!=(n=o[r]);r++)i||1!==n.nodeType||T.cleanData(bt(n)),n.parentNode&&(i&&at(n)&&wt(bt(n,"script")),n.parentNode.removeChild(n));return t}T.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var n,o,r,s,a=t.cloneNode(!0),l=at(t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(s=bt(a),n=0,o=(r=bt(t)).length;n<o;n++)Pt(r[n],s[n]);if(e)if(i)for(r=r||bt(t),s=s||bt(a),n=0,o=r.length;n<o;n++)Bt(r[n],s[n]);else Bt(t,a);return(s=bt(a,"script")).length>0&&wt(s,!l&&bt(t,"script")),a},cleanData:function(t){for(var e,i,n,o=T.event.special,r=0;void 0!==(i=t[r]);r++)if(q(i)){if(e=i[J.expando]){if(e.events)for(n in e.events)o[n]?T.event.remove(i,n):T.removeEvent(i,n,e.handle);i[J.expando]=void 0}i[Q.expando]&&(i[Q.expando]=void 0)}}}),T.fn.extend({detach:function(t){return Wt(this,t,!0)},remove:function(t){return Wt(this,t)},text:function(t){return z(this,(function(t){return void 0===t?T.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Ft(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Nt(this,t).appendChild(t)}))},prepend:function(){return Ft(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Nt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Ft(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Ft(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(bt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return T.clone(this,t,e)}))},html:function(t){return z(this,(function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!It.test(t)&&!yt[(vt.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(T.cleanData(bt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Ft(this,arguments,(function(e){var i=this.parentNode;T.inArray(this,t)<0&&(T.cleanData(bt(this)),i&&i.replaceChild(e,this))}),t)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){T.fn[t]=function(t){for(var i,n=[],o=T(t),r=o.length-1,s=0;s<=r;s++)i=s===r?this:this.clone(!0),T(o[s])[e](i),c.apply(n,i.get());return this.pushStack(n)}}));var $t=new RegExp("^("+nt+")(?!px)[a-z%]+$","i"),Ht=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Ut=function(t,e,i){var n,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];for(o in n=i.call(t),e)t.style[o]=r[o];return n},Vt=new RegExp(rt.join("|"),"i");function Gt(t,e,i){var n,o,r,s,a=t.style;return(i=i||Ht(t))&&(""!==(s=i.getPropertyValue(e)||i[e])||at(t)||(s=T.style(t,e)),!m.pixelBoxStyles()&&$t.test(s)&&Vt.test(e)&&(n=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function zt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(h){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",st.appendChild(c).appendChild(h);var t=n.getComputedStyle(h);i="1%"!==t.top,l=12===e(t.marginLeft),h.style.right="60%",s=36===e(t.right),o=36===e(t.width),h.style.position="absolute",r=12===e(h.offsetWidth/3),st.removeChild(c),h=null}}function e(t){return Math.round(parseFloat(t))}var i,o,r,s,a,l,c=y.createElement("div"),h=y.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===h.style.backgroundClip,T.extend(m,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),r},reliableTrDimensions:function(){var t,e,i,o;return null==a&&(t=y.createElement("table"),e=y.createElement("tr"),i=y.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",i.style.height="9px",i.style.display="block",st.appendChild(t).appendChild(e).appendChild(i),o=n.getComputedStyle(e),a=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===e.offsetHeight,st.removeChild(t)),a}}))}();var jt=["Webkit","Moz","ms"],Xt=y.createElement("div").style,Kt={};function Yt(t){var e=T.cssProps[t]||Kt[t];return e||(t in Xt?t:Kt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=jt.length;i--;)if((t=jt[i]+e)in Xt)return t}(t)||t)}var qt=/^(none|table(?!-c[ea]).+)/,Zt=/^--/,Jt={position:"absolute",visibility:"hidden",display:"block"},Qt={letterSpacing:"0",fontWeight:"400"};function te(t,e,i){var n=ot.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function ee(t,e,i,n,o,r){var s="width"===e?1:0,a=0,l=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=T.css(t,i+rt[s],!0,o)),n?("content"===i&&(l-=T.css(t,"padding"+rt[s],!0,o)),"margin"!==i&&(l-=T.css(t,"border"+rt[s]+"Width",!0,o))):(l+=T.css(t,"padding"+rt[s],!0,o),"padding"!==i?l+=T.css(t,"border"+rt[s]+"Width",!0,o):a+=T.css(t,"border"+rt[s]+"Width",!0,o));return!n&&r>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-a-.5))||0),l}function ie(t,e,i){var n=Ht(t),o=(!m.boxSizingReliable()||i)&&"border-box"===T.css(t,"boxSizing",!1,n),r=o,s=Gt(t,e,n),a="offset"+e[0].toUpperCase()+e.slice(1);if($t.test(s)){if(!i)return s;s="auto"}return(!m.boxSizingReliable()&&o||!m.reliableTrDimensions()&&I(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===T.css(t,"display",!1,n))&&t.getClientRects().length&&(o="border-box"===T.css(t,"boxSizing",!1,n),(r=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+ee(t,e,i||(o?"border":"content"),r,n,s)+"px"}function ne(t,e,i,n,o){return new ne.prototype.init(t,e,i,n,o)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Gt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=Y(e),l=Zt.test(e),c=t.style;if(l||(e=Yt(a)),s=T.cssHooks[e]||T.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(o=s.get(t,!1,n))?o:c[e];"string"===(r=typeof i)&&(o=ot.exec(i))&&o[1]&&(i=ht(t,e,o),r="number"),null!=i&&i==i&&("number"!==r||l||(i+=o&&o[3]||(T.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==i||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(l?c.setProperty(e,i):c[e]=i))}},css:function(t,e,i,n){var o,r,s,a=Y(e);return Zt.test(e)||(e=Yt(a)),(s=T.cssHooks[e]||T.cssHooks[a])&&"get"in s&&(o=s.get(t,!0,i)),void 0===o&&(o=Gt(t,e,n)),"normal"===o&&e in Qt&&(o=Qt[e]),""===i||i?(r=parseFloat(o),!0===i||isFinite(r)?r||0:o):o}}),T.each(["height","width"],(function(t,e){T.cssHooks[e]={get:function(t,i,n){if(i)return!qt.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ie(t,e,n):Ut(t,Jt,(function(){return ie(t,e,n)}))},set:function(t,i,n){var o,r=Ht(t),s=!m.scrollboxSize()&&"absolute"===r.position,a=(s||n)&&"border-box"===T.css(t,"boxSizing",!1,r),l=n?ee(t,e,n,a,r):0;return a&&s&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-ee(t,e,"border",!1,r)-.5)),l&&(o=ot.exec(i))&&"px"!==(o[3]||"px")&&(t.style[e]=i,i=T.css(t,e)),te(0,i,l)}}})),T.cssHooks.marginLeft=zt(m.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Gt(t,"marginLeft"))||t.getBoundingClientRect().left-Ut(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),T.each({margin:"",padding:"",border:"Width"},(function(t,e){T.cssHooks[t+e]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];n<4;n++)o[t+rt[n]+e]=r[n]||r[n-2]||r[0];return o}},"margin"!==t&&(T.cssHooks[t+e].set=te)})),T.fn.extend({css:function(t,e){return z(this,(function(t,e,i){var n,o,r={},s=0;if(Array.isArray(e)){for(n=Ht(t),o=e.length;s<o;s++)r[e[s]]=T.css(t,e[s],!1,n);return r}return void 0!==i?T.style(t,e,i):T.css(t,e)}),t,e,arguments.length>1)}}),T.Tween=ne,ne.prototype={constructor:ne,init:function(t,e,i,n,o,r){this.elem=t,this.prop=i,this.easing=o||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(T.cssNumber[i]?"":"px")},cur:function(){var t=ne.propHooks[this.prop];return t&&t.get?t.get(this):ne.propHooks._default.get(this)},run:function(t){var e,i=ne.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):ne.propHooks._default.set(this),this}},ne.prototype.init.prototype=ne.prototype,ne.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=T.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||!T.cssHooks[t.prop]&&null==t.elem.style[Yt(t.prop)]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}},ne.propHooks.scrollTop=ne.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},T.fx=ne.prototype.init,T.fx.step={};var oe,re,se=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function le(){re&&(!1===y.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(le):n.setTimeout(le,T.fx.interval),T.fx.tick())}function ce(){return n.setTimeout((function(){oe=void 0})),oe=Date.now()}function he(t,e){var i,n=0,o={height:t};for(e=e?1:0;n<4;n+=2-e)o["margin"+(i=rt[n])]=o["padding"+i]=t;return e&&(o.opacity=o.width=t),o}function ue(t,e,i){for(var n,o=(de.tweeners[e]||[]).concat(de.tweeners["*"]),r=0,s=o.length;r<s;r++)if(n=o[r].call(i,e,t))return n}function de(t,e,i){var n,o,r=0,s=de.prefilters.length,a=T.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var e=oe||ce(),i=Math.max(0,c.startTime+c.duration-e),n=1-(i/c.duration||0),r=0,s=c.tweens.length;r<s;r++)c.tweens[r].run(n);return a.notifyWith(t,[c,n,i]),n<1&&s?i:(s||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:T.extend({},e),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},i),originalProperties:e,originalOptions:i,startTime:oe||ce(),duration:i.duration,tweens:[],createTween:function(e,i){var n=T.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)c.tweens[i].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),h=c.props;for(!function(t,e){var i,n,o,r,s;for(i in t)if(o=e[n=Y(i)],r=t[i],Array.isArray(r)&&(o=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),(s=T.cssHooks[n])&&"expand"in s)for(i in r=s.expand(r),delete t[n],r)i in t||(t[i]=r[i],e[i]=o);else e[n]=o}(h,c.opts.specialEasing);r<s;r++)if(n=de.prefilters[r].call(c,t,h,c.opts))return v(n.stop)&&(T._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return T.map(h,ue,c),v(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),T.fx.timer(T.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}T.Animation=T.extend(de,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return ht(i.elem,t,ot.exec(e),i),i}]},tweener:function(t,e){v(t)?(e=t,t=["*"]):t=t.match(F);for(var i,n=0,o=t.length;n<o;n++)i=t[n],de.tweeners[i]=de.tweeners[i]||[],de.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,o,r,s,a,l,c,h,u="width"in e||"height"in e,d=this,p={},g=t.style,f=t.nodeType&&ct(t),m=J.get(t,"fxshow");for(n in i.queue||(null==(s=T._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,T.queue(t,"fx").length||s.empty.fire()}))}))),e)if(o=e[n],se.test(o)){if(delete e[n],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!m||void 0===m[n])continue;f=!0}p[n]=m&&m[n]||T.style(t,n)}if((l=!T.isEmptyObject(e))||!T.isEmptyObject(p))for(n in u&&1===t.nodeType&&(i.overflow=[g.overflow,g.overflowX,g.overflowY],null==(c=m&&m.display)&&(c=J.get(t,"display")),"none"===(h=T.css(t,"display"))&&(c?h=c:(pt([t],!0),c=t.style.display||c,h=T.css(t,"display"),pt([t]))),("inline"===h||"inline-block"===h&&null!=c)&&"none"===T.css(t,"float")&&(l||(d.done((function(){g.display=c})),null==c&&(h=g.display,c="none"===h?"":h)),g.display="inline-block")),i.overflow&&(g.overflow="hidden",d.always((function(){g.overflow=i.overflow[0],g.overflowX=i.overflow[1],g.overflowY=i.overflow[2]}))),l=!1,p)l||(m?"hidden"in m&&(f=m.hidden):m=J.access(t,"fxshow",{display:c}),r&&(m.hidden=!f),f&&pt([t],!0),d.done((function(){for(n in f||pt([t]),J.remove(t,"fxshow"),p)T.style(t,n,p[n])}))),l=ue(f?m[n]:0,n,d),n in m||(m[n]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?de.prefilters.unshift(t):de.prefilters.push(t)}}),T.speed=function(t,e,i){var n=t&&"object"==typeof t?T.extend({},t):{complete:i||!i&&e||v(t)&&t,duration:t,easing:i&&e||e&&!v(e)&&e};return T.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in T.fx.speeds?n.duration=T.fx.speeds[n.duration]:n.duration=T.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){v(n.old)&&n.old.call(this),n.queue&&T.dequeue(this,n.queue)},n},T.fn.extend({fadeTo:function(t,e,i,n){return this.filter(ct).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=T.isEmptyObject(t),r=T.speed(e,i,n),s=function(){var e=de(this,T.extend({},t),r);(o||J.get(this,"finish"))&&e.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,o=null!=t&&t+"queueHooks",r=T.timers,s=J.get(this);if(o)s[o]&&s[o].stop&&n(s[o]);else for(o in s)s[o]&&s[o].stop&&ae.test(o)&&n(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(i),e=!1,r.splice(o,1));!e&&i||T.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=J.get(this),n=i[t+"queue"],o=i[t+"queueHooks"],r=T.timers,s=n?n.length:0;for(i.finish=!0,T.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<s;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish}))}}),T.each(["toggle","show","hide"],(function(t,e){var i=T.fn[e];T.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(he(e,!0),t,n,o)}})),T.each({slideDown:he("show"),slideUp:he("hide"),slideToggle:he("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){T.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}})),T.timers=[],T.fx.tick=function(){var t,e=0,i=T.timers;for(oe=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||T.fx.stop(),oe=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){re||(re=!0,le())},T.fx.stop=function(){re=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(t,e){return t=T.fx&&T.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,i){var o=n.setTimeout(e,t);i.stop=function(){n.clearTimeout(o)}}))},function(){var t=y.createElement("input"),e=y.createElement("select").appendChild(y.createElement("option"));t.type="checkbox",m.checkOn=""!==t.value,m.optSelected=e.selected,(t=y.createElement("input")).value="t",t.type="radio",m.radioValue="t"===t.value}();var pe,ge=T.expr.attrHandle;T.fn.extend({attr:function(t,e){return z(this,T.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){T.removeAttr(this,t)}))}}),T.extend({attr:function(t,e,i){var n,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?T.prop(t,e,i):(1===r&&T.isXMLDoc(t)||(o=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?pe:void 0)),void 0!==i?null===i?void T.removeAttr(t,e):o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:(t.setAttribute(e,i+""),i):o&&"get"in o&&null!==(n=o.get(t,e))?n:null==(n=T.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&I(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,o=e&&e.match(F);if(o&&1===t.nodeType)for(;i=o[n++];)t.removeAttribute(i)}}),pe={set:function(t,e,i){return!1===e?T.removeAttr(t,i):t.setAttribute(i,i),i}},T.each(T.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=ge[e]||T.find.attr;ge[e]=function(t,e,n){var o,r,s=e.toLowerCase();return n||(r=ge[s],ge[s]=o,o=null!=i(t,e,n)?s:null,ge[s]=r),o}}));var fe=/^(?:input|select|textarea|button)$/i,me=/^(?:a|area)$/i;function ve(t){return(t.match(F)||[]).join(" ")}function _e(t){return t.getAttribute&&t.getAttribute("class")||""}function ye(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(F)||[]}T.fn.extend({prop:function(t,e){return z(this,T.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[T.propFix[t]||t]}))}}),T.extend({prop:function(t,e,i){var n,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&T.isXMLDoc(t)||(e=T.propFix[e]||e,o=T.propHooks[e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):fe.test(t.nodeName)||me.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(T.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){T.propFix[this.toLowerCase()]=this})),T.fn.extend({addClass:function(t){var e,i,n,o,r,s,a,l=0;if(v(t))return this.each((function(e){T(this).addClass(t.call(this,e,_e(this)))}));if((e=ye(t)).length)for(;i=this[l++];)if(o=_e(i),n=1===i.nodeType&&" "+ve(o)+" "){for(s=0;r=e[s++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o!==(a=ve(n))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,o,r,s,a,l=0;if(v(t))return this.each((function(e){T(this).removeClass(t.call(this,e,_e(this)))}));if(!arguments.length)return this.attr("class","");if((e=ye(t)).length)for(;i=this[l++];)if(o=_e(i),n=1===i.nodeType&&" "+ve(o)+" "){for(s=0;r=e[s++];)for(;n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");o!==(a=ve(n))&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t,n="string"===i||Array.isArray(t);return"boolean"==typeof e&&n?e?this.addClass(t):this.removeClass(t):v(t)?this.each((function(i){T(this).toggleClass(t.call(this,i,_e(this),e),e)})):this.each((function(){var e,o,r,s;if(n)for(o=0,r=T(this),s=ye(t);e=s[o++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==i||((e=_e(this))&&J.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":J.get(this,"__className__")||""))}))},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+ve(_e(i))+" ").indexOf(e)>-1)return!0;return!1}});var be=/\r/g;T.fn.extend({val:function(t){var e,i,n,o=this[0];return arguments.length?(n=v(t),this.each((function(i){var o;1===this.nodeType&&(null==(o=n?t.call(this,i,T(this).val()):t)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=T.map(o,(function(t){return null==t?"":t+""}))),(e=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))}))):o?(e=T.valHooks[o.type]||T.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(o,"value"))?i:"string"==typeof(i=o.value)?i.replace(be,""):null==i?"":i:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:ve(T.text(t))}},select:{get:function(t){var e,i,n,o=t.options,r=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?r+1:o.length;for(n=r<0?l:s?r:0;n<l;n++)if(((i=o[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!I(i.parentNode,"optgroup"))){if(e=T(i).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var i,n,o=t.options,r=T.makeArray(e),s=o.length;s--;)((n=o[s]).selected=T.inArray(T.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),T.each(["radio","checkbox"],(function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=T.inArray(T(t).val(),e)>-1}},m.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),m.focusin="onfocusin"in n;var we=/^(?:focusinfocus|focusoutblur)$/,ke=function(t){t.stopPropagation()};T.extend(T.event,{trigger:function(t,e,i,o){var r,s,a,l,c,h,u,d,g=[i||y],f=p.call(t,"type")?t.type:t,m=p.call(t,"namespace")?t.namespace.split("."):[];if(s=d=a=i=i||y,3!==i.nodeType&&8!==i.nodeType&&!we.test(f+T.event.triggered)&&(f.indexOf(".")>-1&&(m=f.split("."),f=m.shift(),m.sort()),c=f.indexOf(":")<0&&"on"+f,(t=t[T.expando]?t:new T.Event(f,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:T.makeArray(e,[t]),u=T.event.special[f]||{},o||!u.trigger||!1!==u.trigger.apply(i,e))){if(!o&&!u.noBubble&&!_(i)){for(l=u.delegateType||f,we.test(l+f)||(s=s.parentNode);s;s=s.parentNode)g.push(s),a=s;a===(i.ownerDocument||y)&&g.push(a.defaultView||a.parentWindow||n)}for(r=0;(s=g[r++])&&!t.isPropagationStopped();)d=s,t.type=r>1?l:u.bindType||f,(h=(J.get(s,"events")||Object.create(null))[t.type]&&J.get(s,"handle"))&&h.apply(s,e),(h=c&&s[c])&&h.apply&&q(s)&&(t.result=h.apply(s,e),!1===t.result&&t.preventDefault());return t.type=f,o||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(g.pop(),e)||!q(i)||c&&v(i[f])&&!_(i)&&((a=i[c])&&(i[c]=null),T.event.triggered=f,t.isPropagationStopped()&&d.addEventListener(f,ke),i[f](),t.isPropagationStopped()&&d.removeEventListener(f,ke),T.event.triggered=void 0,a&&(i[c]=a)),t.result}},simulate:function(t,e,i){var n=T.extend(new T.Event,i,{type:t,isSimulated:!0});T.event.trigger(n,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each((function(){T.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return T.event.trigger(t,e,i,!0)}}),m.focusin||T.each({focus:"focusin",blur:"focusout"},(function(t,e){var i=function(t){T.event.simulate(e,t.target,T.event.fix(t))};T.event.special[e]={setup:function(){var n=this.ownerDocument||this.document||this,o=J.access(n,e);o||n.addEventListener(t,i,!0),J.access(n,e,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,o=J.access(n,e)-1;o?J.access(n,e,o):(n.removeEventListener(t,i,!0),J.remove(n,e))}}}));var Ce=n.location,Te={guid:Date.now()},Ee=/\?/;T.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){}return i=e&&e.getElementsByTagName("parsererror")[0],e&&!i||T.error("Invalid XML: "+(i?T.map(i.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Se=/\[\]$/,xe=/\r?\n/g,Re=/^(?:submit|button|image|reset|file)$/i,Ae=/^(?:input|select|textarea|keygen)/i;function Ie(t,e,i,n){var o;if(Array.isArray(e))T.each(e,(function(e,o){i||Se.test(t)?n(t,o):Ie(t+"["+("object"==typeof o&&null!=o?e:"")+"]",o,i,n)}));else if(i||"object"!==k(e))n(t,e);else for(o in e)Ie(t+"["+o+"]",e[o],i,n)}T.param=function(t,e){var i,n=[],o=function(t,e){var i=v(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,(function(){o(this.name,this.value)}));else for(i in t)Ie(i,t[i],e,o);return n.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&Ae.test(this.nodeName)&&!Re.test(t)&&(this.checked||!mt.test(t))})).map((function(t,e){var i=T(this).val();return null==i?null:Array.isArray(i)?T.map(i,(function(t){return{name:e.name,value:t.replace(xe,"\r\n")}})):{name:e.name,value:i.replace(xe,"\r\n")}})).get()}});var De=/%20/g,Oe=/#.*$/,Ne=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Me=/^(?:GET|HEAD)$/,Be=/^\/\//,Pe={},Fe={},We="*/".concat("*"),$e=y.createElement("a");function He(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,r=e.toLowerCase().match(F)||[];if(v(i))for(;n=r[o++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function Ue(t,e,i,n){var o={},r=t===Fe;function s(a){var l;return o[a]=!0,T.each(t[a]||[],(function(t,a){var c=a(e,i,n);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),s(c),!1)})),l}return s(e.dataTypes[0])||!o["*"]&&s("*")}function Ve(t,e){var i,n,o=T.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&T.extend(!0,t,n),t}$e.href=Ce.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ce.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":We,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ve(Ve(t,T.ajaxSettings),e):Ve(T.ajaxSettings,t)},ajaxPrefilter:He(Pe),ajaxTransport:He(Fe),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,o,r,s,a,l,c,h,u,d,p=T.ajaxSetup({},e),g=p.context||p,f=p.context&&(g.nodeType||g.jquery)?T(g):T.event,m=T.Deferred(),v=T.Callbacks("once memory"),_=p.statusCode||{},b={},w={},k="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(c){if(!s)for(s={};e=Le.exec(r);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?r:null},setRequestHeader:function(t,e){return null==c&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)C.always(t[C.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||k;return i&&i.abort(e),E(0,e),this}};if(m.promise(C),p.url=((t||p.url||Ce.href)+"").replace(Be,Ce.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(F)||[""],null==p.crossDomain){l=y.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=$e.protocol+"//"+$e.host!=l.protocol+"//"+l.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=T.param(p.data,p.traditional)),Ue(Pe,p,e,C),c)return C;for(u in(h=T.event&&p.global)&&0==T.active++&&T.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Me.test(p.type),o=p.url.replace(Oe,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(De,"+")):(d=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(Ee.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Ne,"$1"),d=(Ee.test(o)?"&":"?")+"_="+Te.guid+++d),p.url=o+d),p.ifModified&&(T.lastModified[o]&&C.setRequestHeader("If-Modified-Since",T.lastModified[o]),T.etag[o]&&C.setRequestHeader("If-None-Match",T.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+We+"; q=0.01":""):p.accepts["*"]),p.headers)C.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(!1===p.beforeSend.call(g,C,p)||c))return C.abort();if(k="abort",v.add(p.complete),C.done(p.success),C.fail(p.error),i=Ue(Fe,p,e,C)){if(C.readyState=1,h&&f.trigger("ajaxSend",[C,p]),c)return C;p.async&&p.timeout>0&&(a=n.setTimeout((function(){C.abort("timeout")}),p.timeout));try{c=!1,i.send(b,E)}catch(t){if(c)throw t;E(-1,t)}}else E(-1,"No Transport");function E(t,e,s,l){var u,d,y,b,w,k=e;c||(c=!0,a&&n.clearTimeout(a),i=void 0,r=l||"",C.readyState=t>0?4:0,u=t>=200&&t<300||304===t,s&&(b=function(t,e,i){for(var n,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==l[0]&&l.unshift(r),i[r]}(p,C,s)),!u&&T.inArray("script",p.dataTypes)>-1&&T.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),b=function(t,e,i,n){var o,r,s,a,l,c={},h=t.dataTypes.slice();if(h[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=h.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=h.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if((a=o.split(" "))[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(p,b,C,u),u?(p.ifModified&&((w=C.getResponseHeader("Last-Modified"))&&(T.lastModified[o]=w),(w=C.getResponseHeader("etag"))&&(T.etag[o]=w)),204===t||"HEAD"===p.type?k="nocontent":304===t?k="notmodified":(k=b.state,d=b.data,u=!(y=b.error))):(y=k,!t&&k||(k="error",t<0&&(t=0))),C.status=t,C.statusText=(e||k)+"",u?m.resolveWith(g,[d,k,C]):m.rejectWith(g,[C,k,y]),C.statusCode(_),_=void 0,h&&f.trigger(u?"ajaxSuccess":"ajaxError",[C,p,u?d:y]),v.fireWith(g,[C,k]),h&&(f.trigger("ajaxComplete",[C,p]),--T.active||T.event.trigger("ajaxStop")))}return C},getJSON:function(t,e,i){return T.get(t,e,i,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],(function(t,e){T[e]=function(t,i,n,o){return v(i)&&(o=o||n,n=i,i=void 0),T.ajax(T.extend({url:t,type:e,dataType:o,data:i,success:n},T.isPlainObject(t)&&t))}})),T.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),T._evalUrl=function(t,e,i){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){T.globalEval(t,e,i)}})},T.fn.extend({wrapAll:function(t){var e;return this[0]&&(v(t)&&(t=t.call(this[0])),e=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return v(t)?this.each((function(e){T(this).wrapInner(t.call(this,e))})):this.each((function(){var e=T(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=v(t);return this.each((function(i){T(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){T(this).replaceWith(this.childNodes)})),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var Ge={0:200,1223:204},ze=T.ajaxSettings.xhr();m.cors=!!ze&&"withCredentials"in ze,m.ajax=ze=!!ze,T.ajaxTransport((function(t){var e,i;if(m.cors||ze&&!t.crossDomain)return{send:function(o,r){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)a.setRequestHeader(s,o[s]);e=function(t){return function(){e&&(e=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Ge[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),i=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout((function(){e&&i()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),T.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),T.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(n,o){e=T("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&o("error"===t.type?404:200,t.type)}),y.head.appendChild(e[0])},abort:function(){i&&i()}}}));var je,Xe=[],Ke=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Xe.pop()||T.expando+"_"+Te.guid++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",(function(t,e,i){var o,r,s,a=!1!==t.jsonp&&(Ke.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ke.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ke,"$1"+o):!1!==t.jsonp&&(t.url+=(Ee.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||T.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=n[o],n[o]=function(){s=arguments},i.always((function(){void 0===r?T(n).removeProp(o):n[o]=r,t[o]&&(t.jsonpCallback=e.jsonpCallback,Xe.push(o)),s&&v(r)&&r(s[0]),s=r=void 0})),"script"})),m.createHTMLDocument=((je=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===je.childNodes.length),T.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(m.createHTMLDocument?((n=(e=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,e.head.appendChild(n)):e=y),r=!i&&[],(o=D.exec(t))?[e.createElement(o[1])]:(o=Ct([t],e,r),r&&r.length&&T(r).remove(),T.merge([],o.childNodes)));var n,o,r},T.fn.load=function(t,e,i){var n,o,r,s=this,a=t.indexOf(" ");return a>-1&&(n=ve(t.slice(a)),t=t.slice(0,a)),v(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),s.length>0&&T.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done((function(t){r=arguments,s.html(n?T("<div>").append(T.parseHTML(t)).find(n):t)})).always(i&&function(t,e){s.each((function(){i.apply(this,r||[t.responseText,e,t])}))}),this},T.expr.pseudos.animated=function(t){return T.grep(T.timers,(function(e){return t===e.elem})).length},T.offset={setOffset:function(t,e,i){var n,o,r,s,a,l,c=T.css(t,"position"),h=T(t),u={};"static"===c&&(t.style.position="relative"),a=h.offset(),r=T.css(t,"top"),l=T.css(t,"left"),("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1?(s=(n=h.position()).top,o=n.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),v(e)&&(e=e.call(t,i,T.extend({},a))),null!=e.top&&(u.top=e.top-a.top+s),null!=e.left&&(u.left=e.left-a.left+o),"using"in e?e.using.call(t,u):h.css(u)}},T.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){T.offset.setOffset(this,t,e)}));var e,i,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],o={top:0,left:0};if("fixed"===T.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((o=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),o.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-T.css(n,"marginTop",!0),left:e.left-o.left-T.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||st}))}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var i="pageYOffset"===e;T.fn[t]=function(n){return z(this,(function(t,n,o){var r;if(_(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===o)return r?r[e]:t[n];r?r.scrollTo(i?r.pageXOffset:o,i?o:r.pageYOffset):t[n]=o}),t,n,arguments.length)}})),T.each(["top","left"],(function(t,e){T.cssHooks[e]=zt(m.pixelPosition,(function(t,i){if(i)return i=Gt(t,e),$t.test(i)?T(t).position()[e]+"px":i}))})),T.each({Height:"height",Width:"width"},(function(t,e){T.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,n){T.fn[n]=function(o,r){var s=arguments.length&&(i||"boolean"!=typeof o),a=i||(!0===o||!0===r?"margin":"border");return z(this,(function(e,i,o){var r;return _(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===o?T.css(e,i,a):T.style(e,i,o,a)}),e,s?o:void 0,s)}}))})),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){T.fn[e]=function(t){return this.on(e,t)}})),T.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){T.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}));var Ye=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;T.proxy=function(t,e){var i,n,o;if("string"==typeof e&&(i=t[e],e=t,t=i),v(t))return n=a.call(arguments,2),(o=function(){return t.apply(e||this,n.concat(a.call(arguments)))}).guid=t.guid=t.guid||T.guid++,o},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=I,T.isFunction=v,T.isWindow=_,T.camelCase=Y,T.type=k,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},T.trim=function(t){return null==t?"":(t+"").replace(Ye,"")},void 0===(i=function(){return T}.apply(e,[]))||(t.exports=i);var qe=n.jQuery,Ze=n.$;return T.noConflict=function(t){return n.$===T&&(n.$=Ze),t&&n.jQuery===T&&(n.jQuery=qe),T},void 0===o&&(n.jQuery=n.$=T),T}))},733:(t,e,i)=>{t.exports=function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[s]={exports:{}};e[s][0].call(c.exports,(function(t){return o(e[s][1][t]||t)}),c,c.exports,t,e,i,n)}return i[s].exports}for(var r=void 0,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){"use strict";var n=t("./utils"),o=t("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(t){for(var e,i,o,s,a,l,c,h=[],u=0,d=t.length,p=d,g="string"!==n.getTypeOf(t);u<t.length;)p=d-u,o=g?(e=t[u++],i=u<d?t[u++]:0,u<d?t[u++]:0):(e=t.charCodeAt(u++),i=u<d?t.charCodeAt(u++):0,u<d?t.charCodeAt(u++):0),s=e>>2,a=(3&e)<<4|i>>4,l=1<p?(15&i)<<2|o>>6:64,c=2<p?63&o:64,h.push(r.charAt(s)+r.charAt(a)+r.charAt(l)+r.charAt(c));return h.join("")},i.decode=function(t){var e,i,n,s,a,l,c=0,h=0,u="data:";if(t.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var d,p=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===r.charAt(64)&&p--,t.charAt(t.length-2)===r.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=o.uint8array?new Uint8Array(0|p):new Array(0|p);c<t.length;)e=r.indexOf(t.charAt(c++))<<2|(s=r.indexOf(t.charAt(c++)))>>4,i=(15&s)<<4|(a=r.indexOf(t.charAt(c++)))>>2,n=(3&a)<<6|(l=r.indexOf(t.charAt(c++))),d[h++]=e,64!==a&&(d[h++]=i),64!==l&&(d[h++]=n);return d}},{"./support":30,"./utils":32}],2:[function(t,e,i){"use strict";var n=t("./external"),o=t("./stream/DataWorker"),r=t("./stream/Crc32Probe"),s=t("./stream/DataLengthProbe");function a(t,e,i,n,o){this.compressedSize=t,this.uncompressedSize=e,this.crc32=i,this.compression=n,this.compressedContent=o}a.prototype={getContentWorker:function(){var t=new o(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new o(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,i){return t.pipe(new r).pipe(new s("uncompressedSize")).pipe(e.compressWorker(i)).pipe(new s("compressedSize")).withStreamInfo("compression",e)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,i){"use strict";var n=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(t){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,i){"use strict";var n=t("./utils"),o=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==n.getTypeOf(t)?function(t,e,i,n){var r=o,s=n+i;t^=-1;for(var a=n;a<s;a++)t=t>>>8^r[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,i,n){var r=o,s=n+i;t^=-1;for(var a=n;a<s;a++)t=t>>>8^r[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0}},{"./utils":32}],5:[function(t,e,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,e,i){"use strict";var n=null;n="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:n}},{lie:37}],7:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=t("pako"),r=t("./utils"),s=t("./stream/GenericWorker"),a=n?"uint8array":"array";function l(t,e){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}i.magic="\b\0",r.inherits(l,s),l.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(r.transformTo(a,t.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},i.compressWorker=function(t){return new l("Deflate",t)},i.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,i){"use strict";function n(t,e){var i,n="";for(i=0;i<e;i++)n+=String.fromCharCode(255&t),t>>>=8;return n}function o(t,e,i,o,s,h){var u,d,p=t.file,g=t.compression,f=h!==a.utf8encode,m=r.transformTo("string",h(p.name)),v=r.transformTo("string",a.utf8encode(p.name)),_=p.comment,y=r.transformTo("string",h(_)),b=r.transformTo("string",a.utf8encode(_)),w=v.length!==p.name.length,k=b.length!==_.length,C="",T="",E="",S=p.dir,x=p.date,R={crc32:0,compressedSize:0,uncompressedSize:0};e&&!i||(R.crc32=t.crc32,R.compressedSize=t.compressedSize,R.uncompressedSize=t.uncompressedSize);var A=0;e&&(A|=8),f||!w&&!k||(A|=2048);var I=0,D=0;S&&(I|=16),"UNIX"===s?(D=798,I|=function(t,e){var i=t;return t||(i=e?16893:33204),(65535&i)<<16}(p.unixPermissions,S)):(D=20,I|=function(t){return 63&(t||0)}(p.dosPermissions)),u=x.getUTCHours(),u<<=6,u|=x.getUTCMinutes(),u<<=5,u|=x.getUTCSeconds()/2,d=x.getUTCFullYear()-1980,d<<=4,d|=x.getUTCMonth()+1,d<<=5,d|=x.getUTCDate(),w&&(T=n(1,1)+n(l(m),4)+v,C+="up"+n(T.length,2)+T),k&&(E=n(1,1)+n(l(y),4)+b,C+="uc"+n(E.length,2)+E);var O="";return O+="\n\0",O+=n(A,2),O+=g.magic,O+=n(u,2),O+=n(d,2),O+=n(R.crc32,4),O+=n(R.compressedSize,4),O+=n(R.uncompressedSize,4),O+=n(m.length,2),O+=n(C.length,2),{fileRecord:c.LOCAL_FILE_HEADER+O+m+C,dirRecord:c.CENTRAL_FILE_HEADER+n(D,2)+O+n(y.length,2)+"\0\0\0\0"+n(I,4)+n(o,4)+m+C+y}}var r=t("../utils"),s=t("../stream/GenericWorker"),a=t("../utf8"),l=t("../crc32"),c=t("../signature");function h(t,e,i,n){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=i,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(h,s),h.prototype.push=function(t){var e=t.meta.percent||0,i=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,s.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:i?(e+100*(i-n-1))/i:100}}))},h.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var i=o(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,i=o(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),e)this.push({data:function(t){return c.DATA_DESCRIPTOR+n(t.crc32,4)+n(t.compressedSize,4)+n(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var i=this.bytesWritten-t,o=function(t,e,i,o,s){var a=r.transformTo("string",s(o));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(t,2)+n(t,2)+n(e,4)+n(i,4)+n(a.length,2)+a}(this.dirRecords.length,i,t,this.zipComment,this.encodeFileName);this.push({data:o,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},h.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(t){var e=this._sources;if(!s.prototype.error.call(this,t))return!1;for(var i=0;i<e.length;i++)try{e[i].error(t)}catch(t){}return!0},h.prototype.lock=function(){s.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,i){"use strict";var n=t("../compressions"),o=t("./ZipFileWorker");i.generateWorker=function(t,e,i){var r=new o(e.streamFiles,i,e.platform,e.encodeFileName),s=0;try{t.forEach((function(t,i){s++;var o=function(t,e){var i=t||e,o=n[i];if(!o)throw new Error(i+" is not a valid compression method !");return o}(i.options.compression,e.compression),a=i.options.compressionOptions||e.compressionOptions||{},l=i.dir,c=i.date;i._compressWorker(o,a).withStreamInfo("file",{name:t,dir:l,date:c,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(r)})),r.entriesCount=s}catch(t){r.error(t)}return r}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,i){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.7.1",n.loadAsync=function(t,e){return(new n).loadAsync(t,e)},n.external=t("./external"),e.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,i){"use strict";var n=t("./utils"),o=t("./external"),r=t("./utf8"),s=t("./zipEntries"),a=t("./stream/Crc32Probe"),l=t("./nodejsUtils");function c(t){return new o.Promise((function(e,i){var n=t.decompressed.getContentWorker().pipe(new a);n.on("error",(function(t){i(t)})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?i(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var i=this;return e=n.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),l.isNode&&l.isStream(t)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var i=new s(e);return i.load(t),i})).then((function(t){var i=[o.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var r=0;r<n.length;r++)i.push(c(n[r]));return o.Promise.all(i)})).then((function(t){for(var n=t.shift(),o=n.files,r=0;r<o.length;r++){var s=o[r];i.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:e.createFolders})}return n.zipComment.length&&(i.comment=n.zipComment),i}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,i){"use strict";var n=t("../utils"),o=t("../stream/GenericWorker");function r(t,e){o.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}n.inherits(r,o),r.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},r.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,i){"use strict";var n=t("readable-stream").Readable;function o(t,e,i){n.call(this,e),this._helper=t;var o=this;t.on("data",(function(t,e){o.push(t)||o._helper.pause(),i&&i(e)})).on("error",(function(t){o.emit("error",t)})).on("end",(function(){o.push(null)}))}t("../utils").inherits(o,n),o.prototype._read=function(){this._helper.resume()},e.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,e,i){"use strict";e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,i){"use strict";function n(t,e,i){var n,o=r.getTypeOf(e),a=r.extend(i||{},l);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=f(t)),a.createFolders&&(n=g(t))&&m.call(this,n,!0);var u="string"===o&&!1===a.binary&&!1===a.base64;i&&void 0!==i.binary||(a.binary=!u),(e instanceof c&&0===e.uncompressedSize||a.dir||!e||0===e.length)&&(a.base64=!1,a.binary=!0,e="",a.compression="STORE",o="string");var v=null;v=e instanceof c||e instanceof s?e:d.isNode&&d.isStream(e)?new p(t,e):r.prepareContent(t,e,a.binary,a.optimizedBinaryString,a.base64);var _=new h(t,v,a);this.files[t]=_}var o=t("./utf8"),r=t("./utils"),s=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),l=t("./defaults"),c=t("./compressedObject"),h=t("./zipObject"),u=t("./generate"),d=t("./nodejsUtils"),p=t("./nodejs/NodejsStreamInputAdapter"),g=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},f=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},m=function(t,e){return e=void 0!==e?e:l.createFolders,t=f(t),this.files[t]||n.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function v(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,i,n;for(e in this.files)n=this.files[e],(i=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(i,n)},filter:function(t){var e=[];return this.forEach((function(i,n){t(i,n)&&e.push(n)})),e},file:function(t,e,i){if(1!==arguments.length)return t=this.root+t,n.call(this,t,e,i),this;if(v(t)){var o=t;return this.filter((function(t,e){return!e.dir&&o.test(t)}))}var r=this.files[this.root+t];return r&&!r.dir?r:null},folder:function(t){if(!t)return this;if(v(t))return this.filter((function(e,i){return i.dir&&t.test(e)}));var e=this.root+t,i=m.call(this,e),n=this.clone();return n.root=i.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var i=this.filter((function(e,i){return i.name.slice(0,t.length)===t})),n=0;n<i.length;n++)delete this.files[i[n].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,i={};try{if((i=r.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=i.type.toLowerCase(),i.compression=i.compression.toUpperCase(),"binarystring"===i.type&&(i.type="string"),!i.type)throw new Error("No output type specified.");r.checkSupport(i.type),"darwin"!==i.platform&&"freebsd"!==i.platform&&"linux"!==i.platform&&"sunos"!==i.platform||(i.platform="UNIX"),"win32"===i.platform&&(i.platform="DOS");var n=i.comment||this.comment||"";e=u.generateWorker(this,i,n)}catch(t){(e=new s("error")).error(t)}return new a(e,i.type||"string",i.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,i){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,i){"use strict";var n=t("./DataReader");function o(t){n.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(o,n),o.prototype.byteAt=function(t){return this.data[this.zero+t]},o.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),o=t.charCodeAt(3),r=this.length-4;0<=r;--r)if(this.data[r]===e&&this.data[r+1]===i&&this.data[r+2]===n&&this.data[r+3]===o)return r-this.zero;return-1},o.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),o=t.charCodeAt(3),r=this.readData(4);return e===r[0]&&i===r[1]&&n===r[2]&&o===r[3]},o.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,e,i){"use strict";var n=t("../utils");function o(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,i=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)i=(i<<8)+this.byteAt(e);return this.index+=t,i},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=o},{"../utils":32}],19:[function(t,e,i){"use strict";var n=t("./Uint8ArrayReader");function o(t){n.call(this,t)}t("../utils").inherits(o,n),o.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,i){"use strict";var n=t("./DataReader");function o(t){n.call(this,t)}t("../utils").inherits(o,n),o.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},o.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},o.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},o.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,e,i){"use strict";var n=t("./ArrayReader");function o(t){n.call(this,t)}t("../utils").inherits(o,n),o.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,i){"use strict";var n=t("../utils"),o=t("../support"),r=t("./ArrayReader"),s=t("./StringReader"),a=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");e.exports=function(t){var e=n.getTypeOf(t);return n.checkSupport(e),"string"!==e||o.uint8array?"nodebuffer"===e?new a(t):o.uint8array?new l(n.transformTo("uint8array",t)):new r(n.transformTo("array",t)):new s(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,i){"use strict";i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,i){"use strict";var n=t("./GenericWorker"),o=t("../utils");function r(t){n.call(this,"ConvertWorker to "+t),this.destType=t}o.inherits(r,n),r.prototype.processChunk=function(t){this.push({data:o.transformTo(this.destType,t.data),meta:t.meta})},e.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,i){"use strict";var n=t("./GenericWorker"),o=t("../crc32");function r(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(r,n),r.prototype.processChunk=function(t){this.streamInfo.crc32=o(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,i){"use strict";var n=t("../utils"),o=t("./GenericWorker");function r(t){o.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}n.inherits(r,o),r.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}o.prototype.processChunk.call(this,t)},e.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,i){"use strict";var n=t("../utils"),o=t("./GenericWorker");function r(t){o.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=n.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}n.inherits(r,o),r.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,i){"use strict";function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var i=0;i<this._listeners[t].length;i++)this._listeners[t][i].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=n},{}],29:[function(t,e,i){"use strict";var n=t("../utils"),o=t("./ConvertWorker"),r=t("./GenericWorker"),s=t("../base64"),a=t("../support"),l=t("../external"),c=null;if(a.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function h(t,e){return new l.Promise((function(i,o){var r=[],a=t._internalType,l=t._outputType,c=t._mimeType;t.on("data",(function(t,i){r.push(t),e&&e(i)})).on("error",(function(t){r=[],o(t)})).on("end",(function(){try{var t=function(t,e,i){switch(t){case"blob":return n.newBlob(n.transformTo("arraybuffer",e),i);case"base64":return s.encode(e);default:return n.transformTo(t,e)}}(l,function(t,e){var i,n=0,o=null,r=0;for(i=0;i<e.length;i++)r+=e[i].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(o=new Uint8Array(r),i=0;i<e.length;i++)o.set(e[i],n),n+=e[i].length;return o;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(a,r),c);i(t)}catch(t){o(t)}r=[]})).resume()}))}function u(t,e,i){var s=e;switch(e){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=e,this._mimeType=i,n.checkSupport(s),this._worker=t.pipe(new o(s)),t.lock()}catch(t){this._worker=new r("error"),this._worker.error(t)}}u.prototype={accumulate:function(t){return h(this,t)},on:function(t,e){var i=this;return"data"===t?this._worker.on(t,(function(t){e.call(i,t.data,t.meta)})):this._worker.on(t,(function(){n.delay(e,arguments,i)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,i){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof Buffer,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(n),i.blob=0===o.getBlob("application/zip").size}catch(t){i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch(t){i.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,i){"use strict";for(var n=t("./utils"),o=t("./support"),r=t("./nodejsUtils"),s=t("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function h(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,i.utf8encode=function(t){return o.nodebuffer?r.newBufferFrom(t,"utf-8"):function(t){var e,i,n,r,s,a=t.length,l=0;for(r=0;r<a;r++)55296==(64512&(i=t.charCodeAt(r)))&&r+1<a&&56320==(64512&(n=t.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(n-56320),r++),l+=i<128?1:i<2048?2:i<65536?3:4;for(e=o.uint8array?new Uint8Array(l):new Array(l),r=s=0;s<l;r++)55296==(64512&(i=t.charCodeAt(r)))&&r+1<a&&56320==(64512&(n=t.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(n-56320),r++),i<128?e[s++]=i:(i<2048?e[s++]=192|i>>>6:(i<65536?e[s++]=224|i>>>12:(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63),e[s++]=128|i>>>6&63),e[s++]=128|63&i);return e}(t)},i.utf8decode=function(t){return o.nodebuffer?n.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,i,o,r,s=t.length,l=new Array(2*s);for(e=i=0;e<s;)if((o=t[e++])<128)l[i++]=o;else if(4<(r=a[o]))l[i++]=65533,e+=r-1;else{for(o&=2===r?31:3===r?15:7;1<r&&e<s;)o=o<<6|63&t[e++],r--;1<r?l[i++]=65533:o<65536?l[i++]=o:(o-=65536,l[i++]=55296|o>>10&1023,l[i++]=56320|1023&o)}return l.length!==i&&(l.subarray?l=l.subarray(0,i):l.length=i),n.applyFromCharCode(l)}(t=n.transformTo(o.uint8array?"uint8array":"array",t))},n.inherits(c,s),c.prototype.processChunk=function(t){var e=n.transformTo(o.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var r=e;(e=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),e.set(r,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var s=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;0<=i&&128==(192&t[i]);)i--;return i<0||0===i?e:i+a[t[i]]>e?i:e}(e),l=e;s!==e.length&&(o.uint8array?(l=e.subarray(0,s),this.leftOver=e.subarray(s,e.length)):(l=e.slice(0,s),this.leftOver=e.slice(s,e.length))),this.push({data:i.utf8decode(l),meta:t.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=c,n.inherits(h,s),h.prototype.processChunk=function(t){this.push({data:i.utf8encode(t.data),meta:t.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,i){"use strict";var n=t("./support"),o=t("./base64"),r=t("./nodejsUtils"),s=t("set-immediate-shim"),a=t("./external");function l(t){return t}function c(t,e){for(var i=0;i<t.length;++i)e[i]=255&t.charCodeAt(i);return e}i.newBlob=function(t,e){i.checkSupport("blob");try{return new Blob([t],{type:e})}catch(i){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(t,e,i){var n=[],o=0,r=t.length;if(r<=i)return String.fromCharCode.apply(null,t);for(;o<r;)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,t.slice(o,Math.min(o+i,r)))):n.push(String.fromCharCode.apply(null,t.subarray(o,Math.min(o+i,r)))),o+=i;return n.join("")},stringifyByChar:function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(t){return!1}}()}};function u(t){var e=65536,n=i.getTypeOf(t),o=!0;if("uint8array"===n?o=h.applyCanBeUsed.uint8array:"nodebuffer"===n&&(o=h.applyCanBeUsed.nodebuffer),o)for(;1<e;)try{return h.stringifyByChunk(t,n,e)}catch(t){e=Math.floor(e/2)}return h.stringifyByChar(t)}function d(t,e){for(var i=0;i<t.length;i++)e[i]=t[i];return e}i.applyFromCharCode=u;var p={};p.string={string:l,array:function(t){return c(t,new Array(t.length))},arraybuffer:function(t){return p.string.uint8array(t).buffer},uint8array:function(t){return c(t,new Uint8Array(t.length))},nodebuffer:function(t){return c(t,r.allocBuffer(t.length))}},p.array={string:u,array:l,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return r.newBufferFrom(t)}},p.arraybuffer={string:function(t){return u(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:l,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return r.newBufferFrom(new Uint8Array(t))}},p.uint8array={string:u,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:l,nodebuffer:function(t){return r.newBufferFrom(t)}},p.nodebuffer={string:u,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return p.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:l},i.transformTo=function(t,e){if(e=e||"",!t)return e;i.checkSupport(t);var n=i.getTypeOf(e);return p[n][t](e)},i.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&r.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(t){var e,i,n="";for(i=0;i<(t||"").length;i++)n+="\\x"+((e=t.charCodeAt(i))<16?"0":"")+e.toString(16).toUpperCase();return n},i.delay=function(t,e,i){s((function(){t.apply(i||null,e||[])}))},i.inherits=function(t,e){function i(){}i.prototype=e.prototype,t.prototype=new i},i.extend=function(){var t,e,i={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===i[e]&&(i[e]=arguments[t][e]);return i},i.prepareContent=function(t,e,r,s,l){return a.Promise.resolve(e).then((function(t){return n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new a.Promise((function(e,i){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){i(t.target.error)},n.readAsArrayBuffer(t)})):t})).then((function(e){var h=i.getTypeOf(e);return h?("arraybuffer"===h?e=i.transformTo("uint8array",e):"string"===h&&(l?e=o.decode(e):r&&!0!==s&&(e=function(t){return c(t,n.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):a.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,i){"use strict";var n=t("./reader/readerFor"),o=t("./utils"),r=t("./signature"),s=t("./zipEntry"),a=(t("./utf8"),t("./support"));function l(t){this.files=[],this.loadOptions=t}l.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(e)+", expected "+o.pretty(t)+")")}},isSignature:function(t,e){var i=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===e;return this.reader.setIndex(i),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",i=o.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,i,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),i=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(t=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var n=e-i;if(0<n)this.isSignature(e,r.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,i){"use strict";var n=t("./reader/readerFor"),o=t("./utils"),r=t("./compressedObject"),s=t("./crc32"),a=t("./utf8"),l=t("./compressions"),c=t("./support");function h(t,e){this.options=t,this.loadOptions=e}h.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,i;if(t.skip(22),this.fileNameLength=t.readInt(2),i=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(i),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in l)if(l.hasOwnProperty(e)&&l[e].magic===t)return l[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,i,n,o=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<o;)e=t.readInt(2),i=t.readInt(2),n=t.readData(i),this.extraFields[e]={id:e,length:i,value:n};t.setIndex(o)},handleUTF8:function(){var t=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var i=o.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var r=o.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(r)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=n(t.value);return 1!==e.readInt(1)||s(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=n(t.value);return 1!==e.readInt(1)||s(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},e.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,i){"use strict";function n(t,e,i){this.name=t,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=e,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}}var o=t("./stream/StreamHelper"),r=t("./stream/DataWorker"),s=t("./utf8"),a=t("./compressedObject"),l=t("./stream/GenericWorker");n.prototype={internalStream:function(t){var e=null,i="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(i=t.toLowerCase())||"text"===i;"binarystring"!==i&&"text"!==i||(i="string"),e=this._decompressWorker();var r=!this._dataBinary;r&&!n&&(e=e.pipe(new s.Utf8EncodeWorker)),!r&&n&&(e=e.pipe(new s.Utf8DecodeWorker))}catch(t){(e=new l("error")).error(t)}return new o(e,i,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(i,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new r(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<c.length;u++)n.prototype[c[u]]=h;e.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,n){(function(t){"use strict";var i,n,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var r=0,s=new o(h),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),i=function(){a.data=r=++r%2}}else if(t.setImmediate||void 0===t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){h(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(h,0)};else{var l=new t.MessageChannel;l.port1.onmessage=h,i=function(){l.port2.postMessage(0)}}var c=[];function h(){var t,e;n=!0;for(var i=c.length;i;){for(e=c,c=[],t=-1;++t<i;)e[t]();i=c.length}n=!1}e.exports=function(t){1!==c.push(t)||n||i()}}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,i){"use strict";var n=t("immediate");function o(){}var r={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==o&&p(this,t)}function h(t,e,i){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function u(t,e,i){n((function(){var n;try{n=e(i)}catch(n){return r.reject(t,n)}n===t?r.reject(t,new TypeError("Cannot resolve promise with itself")):r.resolve(t,n)}))}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var i=!1;function n(e){i||(i=!0,r.reject(t,e))}function o(e){i||(i=!0,r.resolve(t,e))}var s=g((function(){e(o,n)}));"error"===s.status&&n(s.value)}function g(t,e){var i={};try{i.value=t(e),i.status="success"}catch(t){i.status="error",i.value=t}return i}(e.exports=c).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(i){return e.resolve(t()).then((function(){return i}))}),(function(i){return e.resolve(t()).then((function(){throw i}))}))},c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var i=new this.constructor(o);return this.state!==l?u(i,this.state===a?t:e,this.outcome):this.queue.push(new h(i,t,e)),i},h.prototype.callFulfilled=function(t){r.resolve(this.promise,t)},h.prototype.otherCallFulfilled=function(t){u(this.promise,this.onFulfilled,t)},h.prototype.callRejected=function(t){r.reject(this.promise,t)},h.prototype.otherCallRejected=function(t){u(this.promise,this.onRejected,t)},r.resolve=function(t,e){var i=g(d,e);if("error"===i.status)return r.reject(t,i.value);var n=i.value;if(n)p(t,n);else{t.state=a,t.outcome=e;for(var o=-1,s=t.queue.length;++o<s;)t.queue[o].callFulfilled(e)}return t},r.reject=function(t,e){t.state=s,t.outcome=e;for(var i=-1,n=t.queue.length;++i<n;)t.queue[i].callRejected(e);return t},c.resolve=function(t){return t instanceof this?t:r.resolve(new this(o),t)},c.reject=function(t){var e=new this(o);return r.reject(e,t)},c.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return this.resolve([]);for(var s=new Array(i),a=0,l=-1,c=new this(o);++l<i;)h(t[l],l);return c;function h(t,o){e.resolve(t).then((function(t){s[o]=t,++a!==i||n||(n=!0,r.resolve(c,s))}),(function(t){n||(n=!0,r.reject(c,t))}))}},c.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return this.resolve([]);for(var s,a=-1,l=new this(o);++a<i;)s=t[a],e.resolve(s).then((function(t){n||(n=!0,r.resolve(l,t))}),(function(t){n||(n=!0,r.reject(l,t))}));return l}},{immediate:36}],38:[function(t,e,i){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,i){"use strict";var n=t("./zlib/deflate"),o=t("./utils/common"),r=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),l=Object.prototype.toString,c=0,h=-1,u=0,d=8;function p(t){if(!(this instanceof p))return new p(t);this.options=o.assign({level:h,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==c)throw new Error(s[i]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var g;if(g="string"==typeof e.dictionary?r.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(i=n.deflateSetDictionary(this.strm,g))!==c)throw new Error(s[i]);this._dict_set=!0}}function g(t,e){var i=new p(e);if(i.push(t,!0),i.err)throw i.msg||s[i.err];return i.result}p.prototype.push=function(t,e){var i,s,a=this.strm,h=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=r.string2buf(t):"[object ArrayBuffer]"===l.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new o.Buf8(h),a.next_out=0,a.avail_out=h),1!==(i=n.deflate(a,s))&&i!==c)return this.onEnd(i),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(r.buf2binstring(o.shrinkBuf(a.output,a.next_out))):this.onData(o.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==i);return 4===s?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===c):2!==s||(this.onEnd(c),!(a.avail_out=0))},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Deflate=p,i.deflate=g,i.deflateRaw=function(t,e){return(e=e||{}).raw=!0,g(t,e)},i.gzip=function(t,e){return(e=e||{}).gzip=!0,g(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,i){"use strict";var n=t("./zlib/inflate"),o=t("./utils/common"),r=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),l=t("./zlib/zstream"),c=t("./zlib/gzheader"),h=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,e.windowBits);if(i!==s.Z_OK)throw new Error(a[i]);this.header=new c,n.inflateGetHeader(this.strm,this.header)}function d(t,e){var i=new u(e);if(i.push(t,!0),i.err)throw i.msg||a[i.err];return i.result}u.prototype.push=function(t,e){var i,a,l,c,u,d,p=this.strm,g=this.options.chunkSize,f=this.options.dictionary,m=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?p.input=r.binstring2buf(t):"[object ArrayBuffer]"===h.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new o.Buf8(g),p.next_out=0,p.avail_out=g),(i=n.inflate(p,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&f&&(d="string"==typeof f?r.string2buf(f):"[object ArrayBuffer]"===h.call(f)?new Uint8Array(f):f,i=n.inflateSetDictionary(this.strm,d)),i===s.Z_BUF_ERROR&&!0===m&&(i=s.Z_OK,m=!1),i!==s.Z_STREAM_END&&i!==s.Z_OK)return this.onEnd(i),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&i!==s.Z_STREAM_END&&(0!==p.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=r.utf8border(p.output,p.next_out),c=p.next_out-l,u=r.buf2string(p.output,l),p.next_out=c,p.avail_out=g-c,c&&o.arraySet(p.output,p.output,l,c,0),this.onData(u)):this.onData(o.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(m=!0)}while((0<p.avail_in||0===p.avail_out)&&i!==s.Z_STREAM_END);return i===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(p.avail_out=0))},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Inflate=u,i.inflate=d,i.inflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},i.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,i,n,o){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),o);else for(var r=0;r<n;r++)t[o+r]=e[i+r]},flattenChunks:function(t){var e,i,n,o,r,s;for(e=n=0,i=t.length;e<i;e++)n+=t[e].length;for(s=new Uint8Array(n),e=o=0,i=t.length;e<i;e++)r=t[e],s.set(r,o),o+=r.length;return s}},r={arraySet:function(t,e,i,n,o){for(var r=0;r<n;r++)t[o+r]=e[i+r]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,r))},i.setTyped(n)},{}],42:[function(t,e,i){"use strict";var n=t("./common"),o=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(t){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){r=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(t,e){if(e<65537&&(t.subarray&&r||!t.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var i="",s=0;s<e;s++)i+=String.fromCharCode(t[s]);return i}s[254]=s[254]=1,i.string2buf=function(t){var e,i,o,r,s,a=t.length,l=0;for(r=0;r<a;r++)55296==(64512&(i=t.charCodeAt(r)))&&r+1<a&&56320==(64512&(o=t.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(o-56320),r++),l+=i<128?1:i<2048?2:i<65536?3:4;for(e=new n.Buf8(l),r=s=0;s<l;r++)55296==(64512&(i=t.charCodeAt(r)))&&r+1<a&&56320==(64512&(o=t.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(o-56320),r++),i<128?e[s++]=i:(i<2048?e[s++]=192|i>>>6:(i<65536?e[s++]=224|i>>>12:(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63),e[s++]=128|i>>>6&63),e[s++]=128|63&i);return e},i.buf2binstring=function(t){return l(t,t.length)},i.binstring2buf=function(t){for(var e=new n.Buf8(t.length),i=0,o=e.length;i<o;i++)e[i]=t.charCodeAt(i);return e},i.buf2string=function(t,e){var i,n,o,r,a=e||t.length,c=new Array(2*a);for(i=n=0;i<a;)if((o=t[i++])<128)c[n++]=o;else if(4<(r=s[o]))c[n++]=65533,i+=r-1;else{for(o&=2===r?31:3===r?15:7;1<r&&i<a;)o=o<<6|63&t[i++],r--;1<r?c[n++]=65533:o<65536?c[n++]=o:(o-=65536,c[n++]=55296|o>>10&1023,c[n++]=56320|1023&o)}return l(c,n)},i.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;0<=i&&128==(192&t[i]);)i--;return i<0||0===i?e:i+s[t[i]]>e?i:e}},{"./common":41}],43:[function(t,e,i){"use strict";e.exports=function(t,e,i,n){for(var o=65535&t|0,r=t>>>16&65535|0,s=0;0!==i;){for(i-=s=2e3<i?2e3:i;r=r+(o=o+e[n++]|0)|0,--s;);o%=65521,r%=65521}return o|r<<16|0}},{}],44:[function(t,e,i){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,i){"use strict";var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();e.exports=function(t,e,i,o){var r=n,s=o+i;t^=-1;for(var a=o;a<s;a++)t=t>>>8^r[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,i){"use strict";var n,o=t("../utils/common"),r=t("./trees"),s=t("./adler32"),a=t("./crc32"),l=t("./messages"),c=0,h=4,u=0,d=-2,p=-1,g=4,f=2,m=8,v=9,_=286,y=30,b=19,w=2*_+1,k=15,C=3,T=258,E=T+C+1,S=42,x=113,R=1,A=2,I=3,D=4;function O(t,e){return t.msg=l[e],e}function N(t){return(t<<1)-(4<t?9:0)}function L(t){for(var e=t.length;0<=--e;)t[e]=0}function M(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(o.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function B(t,e){r._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,M(t.strm)}function P(t,e){t.pending_buf[t.pending++]=e}function F(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function W(t,e){var i,n,o=t.max_chain_length,r=t.strstart,s=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-E?t.strstart-(t.w_size-E):0,c=t.window,h=t.w_mask,u=t.prev,d=t.strstart+T,p=c[r+s-1],g=c[r+s];t.prev_length>=t.good_match&&(o>>=2),a>t.lookahead&&(a=t.lookahead);do{if(c[(i=e)+s]===g&&c[i+s-1]===p&&c[i]===c[r]&&c[++i]===c[r+1]){r+=2,i++;do{}while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<d);if(n=T-(d-r),r=d-T,s<n){if(t.match_start=e,a<=(s=n))break;p=c[r+s-1],g=c[r+s]}}}while((e=u[e&h])>l&&0!=--o);return s<=t.lookahead?s:t.lookahead}function $(t){var e,i,n,r,l,c,h,u,d,p,g=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=g+(g-E)){for(o.arraySet(t.window,t.window,g,g,0),t.match_start-=g,t.strstart-=g,t.block_start-=g,e=i=t.hash_size;n=t.head[--e],t.head[e]=g<=n?n-g:0,--i;);for(e=i=g;n=t.prev[--e],t.prev[e]=g<=n?n-g:0,--i;);r+=g}if(0===t.strm.avail_in)break;if(c=t.strm,h=t.window,u=t.strstart+t.lookahead,p=void 0,(d=r)<(p=c.avail_in)&&(p=d),i=0===p?0:(c.avail_in-=p,o.arraySet(h,c.input,c.next_in,p,u),1===c.state.wrap?c.adler=s(c.adler,h,p,u):2===c.state.wrap&&(c.adler=a(c.adler,h,p,u)),c.next_in+=p,c.total_in+=p,p),t.lookahead+=i,t.lookahead+t.insert>=C)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+C-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<C)););}while(t.lookahead<E&&0!==t.strm.avail_in)}function H(t,e){for(var i,n;;){if(t.lookahead<E){if($(t),t.lookahead<E&&e===c)return R;if(0===t.lookahead)break}if(i=0,t.lookahead>=C&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-E&&(t.match_length=W(t,i)),t.match_length>=C)if(n=r._tr_tally(t,t.strstart-t.match_start,t.match_length-C),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=C){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(B(t,!1),0===t.strm.avail_out))return R}return t.insert=t.strstart<C-1?t.strstart:C-1,e===h?(B(t,!0),0===t.strm.avail_out?I:D):t.last_lit&&(B(t,!1),0===t.strm.avail_out)?R:A}function U(t,e){for(var i,n,o;;){if(t.lookahead<E){if($(t),t.lookahead<E&&e===c)return R;if(0===t.lookahead)break}if(i=0,t.lookahead>=C&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=C-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-E&&(t.match_length=W(t,i),t.match_length<=5&&(1===t.strategy||t.match_length===C&&4096<t.strstart-t.match_start)&&(t.match_length=C-1)),t.prev_length>=C&&t.match_length<=t.prev_length){for(o=t.strstart+t.lookahead-C,n=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-C),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=o&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=C-1,t.strstart++,n&&(B(t,!1),0===t.strm.avail_out))return R}else if(t.match_available){if((n=r._tr_tally(t,0,t.window[t.strstart-1]))&&B(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return R}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<C-1?t.strstart:C-1,e===h?(B(t,!0),0===t.strm.avail_out?I:D):t.last_lit&&(B(t,!1),0===t.strm.avail_out)?R:A}function V(t,e,i,n,o){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=o}function G(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*w),this.dyn_dtree=new o.Buf16(2*(2*y+1)),this.bl_tree=new o.Buf16(2*(2*b+1)),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(k+1),this.heap=new o.Buf16(2*_+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*_+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function z(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=f,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?S:x,t.adler=2===e.wrap?0:1,e.last_flush=c,r._tr_init(e),u):O(t,d)}function j(t){var e=z(t);return e===u&&function(t){t.window_size=2*t.w_size,L(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=C-1,t.match_available=0,t.ins_h=0}(t.state),e}function X(t,e,i,n,r,s){if(!t)return d;var a=1;if(e===p&&(e=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),r<1||v<r||i!==m||n<8||15<n||e<0||9<e||s<0||g<s)return O(t,d);8===n&&(n=9);var l=new G;return(t.state=l).strm=t,l.wrap=a,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+C-1)/C),l.window=new o.Buf8(2*l.w_size),l.head=new o.Buf16(l.hash_size),l.prev=new o.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new o.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=i,j(t)}n=[new V(0,0,0,0,(function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if($(t),0===t.lookahead&&e===c)return R;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,B(t,!1),0===t.strm.avail_out))return R;if(t.strstart-t.block_start>=t.w_size-E&&(B(t,!1),0===t.strm.avail_out))return R}return t.insert=0,e===h?(B(t,!0),0===t.strm.avail_out?I:D):(t.strstart>t.block_start&&(B(t,!1),t.strm.avail_out),R)})),new V(4,4,8,4,H),new V(4,5,16,8,H),new V(4,6,32,32,H),new V(4,4,16,16,U),new V(8,16,32,32,U),new V(8,16,128,128,U),new V(8,32,128,256,U),new V(32,128,258,1024,U),new V(32,258,258,4096,U)],i.deflateInit=function(t,e){return X(t,e,m,15,8,0)},i.deflateInit2=X,i.deflateReset=j,i.deflateResetKeep=z,i.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?d:(t.state.gzhead=e,u):d},i.deflate=function(t,e){var i,o,s,l;if(!t||!t.state||5<e||e<0)return t?O(t,d):d;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||666===o.status&&e!==h)return O(t,0===t.avail_out?-5:d);if(o.strm=t,i=o.last_flush,o.last_flush=e,o.status===S)if(2===o.wrap)t.adler=0,P(o,31),P(o,139),P(o,8),o.gzhead?(P(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),P(o,255&o.gzhead.time),P(o,o.gzhead.time>>8&255),P(o,o.gzhead.time>>16&255),P(o,o.gzhead.time>>24&255),P(o,9===o.level?2:2<=o.strategy||o.level<2?4:0),P(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(P(o,255&o.gzhead.extra.length),P(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=a(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(P(o,0),P(o,0),P(o,0),P(o,0),P(o,0),P(o,9===o.level?2:2<=o.strategy||o.level<2?4:0),P(o,3),o.status=x);else{var p=m+(o.w_bits-8<<4)<<8;p|=(2<=o.strategy||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(p|=32),p+=31-p%31,o.status=x,F(o,p),0!==o.strstart&&(F(o,t.adler>>>16),F(o,65535&t.adler)),t.adler=1}if(69===o.status)if(o.gzhead.extra){for(s=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>s&&(t.adler=a(t.adler,o.pending_buf,o.pending-s,s)),M(t),s=o.pending,o.pending!==o.pending_buf_size));)P(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>s&&(t.adler=a(t.adler,o.pending_buf,o.pending-s,s)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){s=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>s&&(t.adler=a(t.adler,o.pending_buf,o.pending-s,s)),M(t),s=o.pending,o.pending===o.pending_buf_size)){l=1;break}l=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,P(o,l)}while(0!==l);o.gzhead.hcrc&&o.pending>s&&(t.adler=a(t.adler,o.pending_buf,o.pending-s,s)),0===l&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){s=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>s&&(t.adler=a(t.adler,o.pending_buf,o.pending-s,s)),M(t),s=o.pending,o.pending===o.pending_buf_size)){l=1;break}l=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,P(o,l)}while(0!==l);o.gzhead.hcrc&&o.pending>s&&(t.adler=a(t.adler,o.pending_buf,o.pending-s,s)),0===l&&(o.status=103)}else o.status=103;if(103===o.status&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&M(t),o.pending+2<=o.pending_buf_size&&(P(o,255&t.adler),P(o,t.adler>>8&255),t.adler=0,o.status=x)):o.status=x),0!==o.pending){if(M(t),0===t.avail_out)return o.last_flush=-1,u}else if(0===t.avail_in&&N(e)<=N(i)&&e!==h)return O(t,-5);if(666===o.status&&0!==t.avail_in)return O(t,-5);if(0!==t.avail_in||0!==o.lookahead||e!==c&&666!==o.status){var g=2===o.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&($(t),0===t.lookahead)){if(e===c)return R;break}if(t.match_length=0,i=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(B(t,!1),0===t.strm.avail_out))return R}return t.insert=0,e===h?(B(t,!0),0===t.strm.avail_out?I:D):t.last_lit&&(B(t,!1),0===t.strm.avail_out)?R:A}(o,e):3===o.strategy?function(t,e){for(var i,n,o,s,a=t.window;;){if(t.lookahead<=T){if($(t),t.lookahead<=T&&e===c)return R;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=C&&0<t.strstart&&(n=a[o=t.strstart-1])===a[++o]&&n===a[++o]&&n===a[++o]){s=t.strstart+T;do{}while(n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&o<s);t.match_length=T-(s-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=C?(i=r._tr_tally(t,1,t.match_length-C),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(B(t,!1),0===t.strm.avail_out))return R}return t.insert=0,e===h?(B(t,!0),0===t.strm.avail_out?I:D):t.last_lit&&(B(t,!1),0===t.strm.avail_out)?R:A}(o,e):n[o.level].func(o,e);if(g!==I&&g!==D||(o.status=666),g===R||g===I)return 0===t.avail_out&&(o.last_flush=-1),u;if(g===A&&(1===e?r._tr_align(o):5!==e&&(r._tr_stored_block(o,0,0,!1),3===e&&(L(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),M(t),0===t.avail_out))return o.last_flush=-1,u}return e!==h?u:o.wrap<=0?1:(2===o.wrap?(P(o,255&t.adler),P(o,t.adler>>8&255),P(o,t.adler>>16&255),P(o,t.adler>>24&255),P(o,255&t.total_in),P(o,t.total_in>>8&255),P(o,t.total_in>>16&255),P(o,t.total_in>>24&255)):(F(o,t.adler>>>16),F(o,65535&t.adler)),M(t),0<o.wrap&&(o.wrap=-o.wrap),0!==o.pending?u:1)},i.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==S&&69!==e&&73!==e&&91!==e&&103!==e&&e!==x&&666!==e?O(t,d):(t.state=null,e===x?O(t,-3):u):d},i.deflateSetDictionary=function(t,e){var i,n,r,a,l,c,h,p,g=e.length;if(!t||!t.state)return d;if(2===(a=(i=t.state).wrap)||1===a&&i.status!==S||i.lookahead)return d;for(1===a&&(t.adler=s(t.adler,e,g,0)),i.wrap=0,g>=i.w_size&&(0===a&&(L(i.head),i.strstart=0,i.block_start=0,i.insert=0),p=new o.Buf8(i.w_size),o.arraySet(p,e,g-i.w_size,i.w_size,0),e=p,g=i.w_size),l=t.avail_in,c=t.next_in,h=t.input,t.avail_in=g,t.next_in=0,t.input=e,$(i);i.lookahead>=C;){for(n=i.strstart,r=i.lookahead-(C-1);i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+C-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++,--r;);i.strstart=n,i.lookahead=C-1,$(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=C-1,i.match_available=0,t.next_in=c,t.input=h,t.avail_in=l,i.wrap=a,u},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,i){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n,o,r,s,a,l,c,h,u,d,p,g,f,m,v,_,y,b,w,k,C,T,E,S;i=t.state,n=t.next_in,E=t.input,o=n+(t.avail_in-5),r=t.next_out,S=t.output,s=r-(e-t.avail_out),a=r+(t.avail_out-257),l=i.dmax,c=i.wsize,h=i.whave,u=i.wnext,d=i.window,p=i.hold,g=i.bits,f=i.lencode,m=i.distcode,v=(1<<i.lenbits)-1,_=(1<<i.distbits)-1;t:do{g<15&&(p+=E[n++]<<g,g+=8,p+=E[n++]<<g,g+=8),y=f[p&v];e:for(;;){if(p>>>=b=y>>>24,g-=b,0==(b=y>>>16&255))S[r++]=65535&y;else{if(!(16&b)){if(0==(64&b)){y=f[(65535&y)+(p&(1<<b)-1)];continue e}if(32&b){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}w=65535&y,(b&=15)&&(g<b&&(p+=E[n++]<<g,g+=8),w+=p&(1<<b)-1,p>>>=b,g-=b),g<15&&(p+=E[n++]<<g,g+=8,p+=E[n++]<<g,g+=8),y=m[p&_];i:for(;;){if(p>>>=b=y>>>24,g-=b,!(16&(b=y>>>16&255))){if(0==(64&b)){y=m[(65535&y)+(p&(1<<b)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(k=65535&y,g<(b&=15)&&(p+=E[n++]<<g,(g+=8)<b&&(p+=E[n++]<<g,g+=8)),l<(k+=p&(1<<b)-1)){t.msg="invalid distance too far back",i.mode=30;break t}if(p>>>=b,g-=b,(b=r-s)<k){if(h<(b=k-b)&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(T=d,(C=0)===u){if(C+=c-b,b<w){for(w-=b;S[r++]=d[C++],--b;);C=r-k,T=S}}else if(u<b){if(C+=c+u-b,(b-=u)<w){for(w-=b;S[r++]=d[C++],--b;);if(C=0,u<w){for(w-=b=u;S[r++]=d[C++],--b;);C=r-k,T=S}}}else if(C+=u-b,b<w){for(w-=b;S[r++]=d[C++],--b;);C=r-k,T=S}for(;2<w;)S[r++]=T[C++],S[r++]=T[C++],S[r++]=T[C++],w-=3;w&&(S[r++]=T[C++],1<w&&(S[r++]=T[C++]))}else{for(C=r-k;S[r++]=S[C++],S[r++]=S[C++],S[r++]=S[C++],2<(w-=3););w&&(S[r++]=S[C++],1<w&&(S[r++]=S[C++]))}break}}break}}while(n<o&&r<a);n-=w=g>>3,p&=(1<<(g-=w<<3))-1,t.next_in=n,t.next_out=r,t.avail_in=n<o?o-n+5:5-(n-o),t.avail_out=r<a?a-r+257:257-(r-a),i.hold=p,i.bits=g}},{}],49:[function(t,e,i){"use strict";var n=t("../utils/common"),o=t("./adler32"),r=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),l=1,c=2,h=0,u=-2,d=1,p=852,g=592;function f(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=d,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(p),e.distcode=e.distdyn=new n.Buf32(g),e.sane=1,e.back=-1,h):u}function _(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,v(t)):u}function y(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?u:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,_(t))):u}function b(t,e){var i,n;return t?(n=new m,(t.state=n).window=null,(i=y(t,e))!==h&&(t.state=null),i):u}var w,k,C=!0;function T(t){if(C){var e;for(w=new n.Buf32(512),k=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(l,t.lens,0,288,w,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(c,t.lens,0,32,k,0,t.work,{bits:5}),C=!1}t.lencode=w,t.lenbits=9,t.distcode=k,t.distbits=5}function E(t,e,i,o){var r,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),o>=s.wsize?(n.arraySet(s.window,e,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(o<(r=s.wsize-s.wnext)&&(r=o),n.arraySet(s.window,e,i-o,r,s.wnext),(o-=r)?(n.arraySet(s.window,e,i-o,o,0),s.wnext=o,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}i.inflateReset=_,i.inflateReset2=y,i.inflateResetKeep=v,i.inflateInit=function(t){return b(t,15)},i.inflateInit2=b,i.inflate=function(t,e){var i,p,g,m,v,_,y,b,w,k,C,S,x,R,A,I,D,O,N,L,M,B,P,F,W=0,$=new n.Buf8(4),H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return u;12===(i=t.state).mode&&(i.mode=13),v=t.next_out,g=t.output,y=t.avail_out,m=t.next_in,p=t.input,_=t.avail_in,b=i.hold,w=i.bits,k=_,C=y,B=h;t:for(;;)switch(i.mode){case d:if(0===i.wrap){i.mode=13;break}for(;w<16;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}if(2&i.wrap&&35615===b){$[i.check=0]=255&b,$[1]=b>>>8&255,i.check=r(i.check,$,2,0),w=b=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&b)<<8)+(b>>8))%31){t.msg="incorrect header check",i.mode=30;break}if(8!=(15&b)){t.msg="unknown compression method",i.mode=30;break}if(w-=4,M=8+(15&(b>>>=4)),0===i.wbits)i.wbits=M;else if(M>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<M,t.adler=i.check=1,i.mode=512&b?10:12,w=b=0;break;case 2:for(;w<16;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}if(i.flags=b,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=b>>8&1),512&i.flags&&($[0]=255&b,$[1]=b>>>8&255,i.check=r(i.check,$,2,0)),w=b=0,i.mode=3;case 3:for(;w<32;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}i.head&&(i.head.time=b),512&i.flags&&($[0]=255&b,$[1]=b>>>8&255,$[2]=b>>>16&255,$[3]=b>>>24&255,i.check=r(i.check,$,4,0)),w=b=0,i.mode=4;case 4:for(;w<16;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}i.head&&(i.head.xflags=255&b,i.head.os=b>>8),512&i.flags&&($[0]=255&b,$[1]=b>>>8&255,i.check=r(i.check,$,2,0)),w=b=0,i.mode=5;case 5:if(1024&i.flags){for(;w<16;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}i.length=b,i.head&&(i.head.extra_len=b),512&i.flags&&($[0]=255&b,$[1]=b>>>8&255,i.check=r(i.check,$,2,0)),w=b=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(_<(S=i.length)&&(S=_),S&&(i.head&&(M=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,p,m,S,M)),512&i.flags&&(i.check=r(i.check,p,S,m)),_-=S,m+=S,i.length-=S),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===_)break t;for(S=0;M=p[m+S++],i.head&&M&&i.length<65536&&(i.head.name+=String.fromCharCode(M)),M&&S<_;);if(512&i.flags&&(i.check=r(i.check,p,S,m)),_-=S,m+=S,M)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===_)break t;for(S=0;M=p[m+S++],i.head&&M&&i.length<65536&&(i.head.comment+=String.fromCharCode(M)),M&&S<_;);if(512&i.flags&&(i.check=r(i.check,p,S,m)),_-=S,m+=S,M)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;w<16;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}if(b!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}w=b=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;w<32;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}t.adler=i.check=f(b),w=b=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=v,t.avail_out=y,t.next_in=m,t.avail_in=_,i.hold=b,i.bits=w,2;t.adler=i.check=1,i.mode=12;case 12:if(5===e||6===e)break t;case 13:if(i.last){b>>>=7&w,w-=7&w,i.mode=27;break}for(;w<3;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}switch(i.last=1&b,w-=1,3&(b>>>=1)){case 0:i.mode=14;break;case 1:if(T(i),i.mode=20,6!==e)break;b>>>=2,w-=2;break t;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}b>>>=2,w-=2;break;case 14:for(b>>>=7&w,w-=7&w;w<32;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}if((65535&b)!=(b>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&b,w=b=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(S=i.length){if(_<S&&(S=_),y<S&&(S=y),0===S)break t;n.arraySet(g,p,m,S,v),_-=S,m+=S,y-=S,v+=S,i.length-=S;break}i.mode=12;break;case 17:for(;w<14;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}if(i.nlen=257+(31&b),b>>>=5,w-=5,i.ndist=1+(31&b),b>>>=5,w-=5,i.ncode=4+(15&b),b>>>=4,w-=4,286<i.nlen||30<i.ndist){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;w<3;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}i.lens[H[i.have++]]=7&b,b>>>=3,w-=3}for(;i.have<19;)i.lens[H[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,P={bits:i.lenbits},B=a(0,i.lens,0,19,i.lencode,0,i.work,P),i.lenbits=P.bits,B){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;I=(W=i.lencode[b&(1<<i.lenbits)-1])>>>16&255,D=65535&W,!((A=W>>>24)<=w);){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}if(D<16)b>>>=A,w-=A,i.lens[i.have++]=D;else{if(16===D){for(F=A+2;w<F;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}if(b>>>=A,w-=A,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}M=i.lens[i.have-1],S=3+(3&b),b>>>=2,w-=2}else if(17===D){for(F=A+3;w<F;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}w-=A,M=0,S=3+(7&(b>>>=A)),b>>>=3,w-=3}else{for(F=A+7;w<F;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}w-=A,M=0,S=11+(127&(b>>>=A)),b>>>=7,w-=7}if(i.have+S>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;S--;)i.lens[i.have++]=M}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,P={bits:i.lenbits},B=a(l,i.lens,0,i.nlen,i.lencode,0,i.work,P),i.lenbits=P.bits,B){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,P={bits:i.distbits},B=a(c,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,P),i.distbits=P.bits,B){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(6<=_&&258<=y){t.next_out=v,t.avail_out=y,t.next_in=m,t.avail_in=_,i.hold=b,i.bits=w,s(t,C),v=t.next_out,g=t.output,y=t.avail_out,m=t.next_in,p=t.input,_=t.avail_in,b=i.hold,w=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;I=(W=i.lencode[b&(1<<i.lenbits)-1])>>>16&255,D=65535&W,!((A=W>>>24)<=w);){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}if(I&&0==(240&I)){for(O=A,N=I,L=D;I=(W=i.lencode[L+((b&(1<<O+N)-1)>>O)])>>>16&255,D=65535&W,!(O+(A=W>>>24)<=w);){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}b>>>=O,w-=O,i.back+=O}if(b>>>=A,w-=A,i.back+=A,i.length=D,0===I){i.mode=26;break}if(32&I){i.back=-1,i.mode=12;break}if(64&I){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&I,i.mode=22;case 22:if(i.extra){for(F=i.extra;w<F;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}i.length+=b&(1<<i.extra)-1,b>>>=i.extra,w-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;I=(W=i.distcode[b&(1<<i.distbits)-1])>>>16&255,D=65535&W,!((A=W>>>24)<=w);){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}if(0==(240&I)){for(O=A,N=I,L=D;I=(W=i.distcode[L+((b&(1<<O+N)-1)>>O)])>>>16&255,D=65535&W,!(O+(A=W>>>24)<=w);){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}b>>>=O,w-=O,i.back+=O}if(b>>>=A,w-=A,i.back+=A,64&I){t.msg="invalid distance code",i.mode=30;break}i.offset=D,i.extra=15&I,i.mode=24;case 24:if(i.extra){for(F=i.extra;w<F;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}i.offset+=b&(1<<i.extra)-1,b>>>=i.extra,w-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===y)break t;if(S=C-y,i.offset>S){if((S=i.offset-S)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}x=S>i.wnext?(S-=i.wnext,i.wsize-S):i.wnext-S,S>i.length&&(S=i.length),R=i.window}else R=g,x=v-i.offset,S=i.length;for(y<S&&(S=y),y-=S,i.length-=S;g[v++]=R[x++],--S;);0===i.length&&(i.mode=21);break;case 26:if(0===y)break t;g[v++]=i.length,y--,i.mode=21;break;case 27:if(i.wrap){for(;w<32;){if(0===_)break t;_--,b|=p[m++]<<w,w+=8}if(C-=y,t.total_out+=C,i.total+=C,C&&(t.adler=i.check=i.flags?r(i.check,g,C,v-C):o(i.check,g,C,v-C)),C=y,(i.flags?b:f(b))!==i.check){t.msg="incorrect data check",i.mode=30;break}w=b=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;w<32;){if(0===_)break t;_--,b+=p[m++]<<w,w+=8}if(b!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}w=b=0}i.mode=29;case 29:B=1;break t;case 30:B=-3;break t;case 31:return-4;case 32:default:return u}return t.next_out=v,t.avail_out=y,t.next_in=m,t.avail_in=_,i.hold=b,i.bits=w,(i.wsize||C!==t.avail_out&&i.mode<30&&(i.mode<27||4!==e))&&E(t,t.output,t.next_out,C-t.avail_out)?(i.mode=31,-4):(k-=t.avail_in,C-=t.avail_out,t.total_in+=k,t.total_out+=C,i.total+=C,i.wrap&&C&&(t.adler=i.check=i.flags?r(i.check,g,C,t.next_out-C):o(i.check,g,C,t.next_out-C)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0==k&&0===C||4===e)&&B===h&&(B=-5),B)},i.inflateEnd=function(t){if(!t||!t.state)return u;var e=t.state;return e.window&&(e.window=null),t.state=null,h},i.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?u:((i.head=e).done=!1,h):u},i.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&11!==i.mode?u:11===i.mode&&o(1,e,n,0)!==i.check?-3:E(t,e,n,n)?(i.mode=31,-4):(i.havedict=1,h):u},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,i){"use strict";var n=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,i,l,c,h,u,d){var p,g,f,m,v,_,y,b,w,k=d.bits,C=0,T=0,E=0,S=0,x=0,R=0,A=0,I=0,D=0,O=0,N=null,L=0,M=new n.Buf16(16),B=new n.Buf16(16),P=null,F=0;for(C=0;C<=15;C++)M[C]=0;for(T=0;T<l;T++)M[e[i+T]]++;for(x=k,S=15;1<=S&&0===M[S];S--);if(S<x&&(x=S),0===S)return c[h++]=20971520,c[h++]=20971520,d.bits=1,0;for(E=1;E<S&&0===M[E];E++);for(x<E&&(x=E),C=I=1;C<=15;C++)if(I<<=1,(I-=M[C])<0)return-1;if(0<I&&(0===t||1!==S))return-1;for(B[1]=0,C=1;C<15;C++)B[C+1]=B[C]+M[C];for(T=0;T<l;T++)0!==e[i+T]&&(u[B[e[i+T]]++]=T);if(_=0===t?(N=P=u,19):1===t?(N=o,L-=257,P=r,F-=257,256):(N=s,P=a,-1),C=E,v=h,A=T=O=0,f=-1,m=(D=1<<(R=x))-1,1===t&&852<D||2===t&&592<D)return 1;for(;;){for(y=C-A,w=u[T]<_?(b=0,u[T]):u[T]>_?(b=P[F+u[T]],N[L+u[T]]):(b=96,0),p=1<<C-A,E=g=1<<R;c[v+(O>>A)+(g-=p)]=y<<24|b<<16|w|0,0!==g;);for(p=1<<C-1;O&p;)p>>=1;if(0!==p?(O&=p-1,O+=p):O=0,T++,0==--M[C]){if(C===S)break;C=e[i+u[T]]}if(x<C&&(O&m)!==f){for(0===A&&(A=x),v+=E,I=1<<(R=C-A);R+A<S&&!((I-=M[R+A])<=0);)R++,I<<=1;if(D+=1<<R,1===t&&852<D||2===t&&592<D)return 1;c[f=O&m]=x<<24|R<<16|v-h|0}}return 0!==O&&(c[v+O]=C-A<<24|64<<16|0),d.bits=x,0}},{"../utils/common":41}],51:[function(t,e,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,i){"use strict";var n=t("../utils/common"),o=0,r=1;function s(t){for(var e=t.length;0<=--e;)t[e]=0}var a=0,l=29,c=256,h=c+1+l,u=30,d=19,p=2*h+1,g=15,f=16,m=7,v=256,_=16,y=17,b=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(h+2));s(E);var S=new Array(2*u);s(S);var x=new Array(512);s(x);var R=new Array(256);s(R);var A=new Array(l);s(A);var I,D,O,N=new Array(u);function L(t,e,i,n,o){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=o,this.has_stree=t&&t.length}function M(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function B(t){return t<256?x[t]:x[256+(t>>>7)]}function P(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function F(t,e,i){t.bi_valid>f-i?(t.bi_buf|=e<<t.bi_valid&65535,P(t,t.bi_buf),t.bi_buf=e>>f-t.bi_valid,t.bi_valid+=i-f):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function W(t,e,i){F(t,i[2*e],i[2*e+1])}function $(t,e){for(var i=0;i|=1&t,t>>>=1,i<<=1,0<--e;);return i>>>1}function H(t,e,i){var n,o,r=new Array(g+1),s=0;for(n=1;n<=g;n++)r[n]=s=s+i[n-1]<<1;for(o=0;o<=e;o++){var a=t[2*o+1];0!==a&&(t[2*o]=$(r[a]++,a))}}function U(t){var e;for(e=0;e<h;e++)t.dyn_ltree[2*e]=0;for(e=0;e<u;e++)t.dyn_dtree[2*e]=0;for(e=0;e<d;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*v]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function V(t){8<t.bi_valid?P(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function G(t,e,i,n){var o=2*e,r=2*i;return t[o]<t[r]||t[o]===t[r]&&n[e]<=n[i]}function z(t,e,i){for(var n=t.heap[i],o=i<<1;o<=t.heap_len&&(o<t.heap_len&&G(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!G(e,n,t.heap[o],t.depth));)t.heap[i]=t.heap[o],i=o,o<<=1;t.heap[i]=n}function j(t,e,i){var n,o,r,s,a=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],o=t.pending_buf[t.l_buf+a],a++,0===n?W(t,o,e):(W(t,(r=R[o])+c+1,e),0!==(s=w[r])&&F(t,o-=A[r],s),W(t,r=B(--n),i),0!==(s=k[r])&&F(t,n-=N[r],s)),a<t.last_lit;);W(t,v,e)}function X(t,e){var i,n,o,r=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=p,i=0;i<l;i++)0!==r[2*i]?(t.heap[++t.heap_len]=c=i,t.depth[i]=0):r[2*i+1]=0;for(;t.heap_len<2;)r[2*(o=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[o]=0,t.opt_len--,a&&(t.static_len-=s[2*o+1]);for(e.max_code=c,i=t.heap_len>>1;1<=i;i--)z(t,r,i);for(o=l;i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],z(t,r,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,r[2*o]=r[2*i]+r[2*n],t.depth[o]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,r[2*i+1]=r[2*n+1]=o,t.heap[1]=o++,z(t,r,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,o,r,s,a,l=e.dyn_tree,c=e.max_code,h=e.stat_desc.static_tree,u=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,m=e.stat_desc.max_length,v=0;for(r=0;r<=g;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<p;i++)m<(r=l[2*l[2*(n=t.heap[i])+1]+1]+1)&&(r=m,v++),l[2*n+1]=r,c<n||(t.bl_count[r]++,s=0,f<=n&&(s=d[n-f]),a=l[2*n],t.opt_len+=a*(r+s),u&&(t.static_len+=a*(h[2*n+1]+s)));if(0!==v){do{for(r=m-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[m]--,v-=2}while(0<v);for(r=m;0!==r;r--)for(n=t.bl_count[r];0!==n;)c<(o=t.heap[--i])||(l[2*o+1]!==r&&(t.opt_len+=(r-l[2*o+1])*l[2*o],l[2*o+1]=r),n--)}}(t,e),H(r,c,t.bl_count)}function K(t,e,i){var n,o,r=-1,s=e[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)o=s,s=e[2*(n+1)+1],++a<l&&o===s||(a<c?t.bl_tree[2*o]+=a:0!==o?(o!==r&&t.bl_tree[2*o]++,t.bl_tree[2*_]++):a<=10?t.bl_tree[2*y]++:t.bl_tree[2*b]++,r=o,c=(a=0)===s?(l=138,3):o===s?(l=6,3):(l=7,4))}function Y(t,e,i){var n,o,r=-1,s=e[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),n=0;n<=i;n++)if(o=s,s=e[2*(n+1)+1],!(++a<l&&o===s)){if(a<c)for(;W(t,o,t.bl_tree),0!=--a;);else 0!==o?(o!==r&&(W(t,o,t.bl_tree),a--),W(t,_,t.bl_tree),F(t,a-3,2)):a<=10?(W(t,y,t.bl_tree),F(t,a-3,3)):(W(t,b,t.bl_tree),F(t,a-11,7));r=o,c=(a=0)===s?(l=138,3):o===s?(l=6,3):(l=7,4)}}s(N);var q=!1;function Z(t,e,i,o){F(t,(a<<1)+(o?1:0),3),function(t,e,i,o){V(t),o&&(P(t,i),P(t,~i)),n.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}i._tr_init=function(t){q||(function(){var t,e,i,n,o,r=new Array(g+1);for(n=i=0;n<l-1;n++)for(A[n]=i,t=0;t<1<<w[n];t++)R[i++]=n;for(R[i-1]=n,n=o=0;n<16;n++)for(N[n]=o,t=0;t<1<<k[n];t++)x[o++]=n;for(o>>=7;n<u;n++)for(N[n]=o<<7,t=0;t<1<<k[n]-7;t++)x[256+o++]=n;for(e=0;e<=g;e++)r[e]=0;for(t=0;t<=143;)E[2*t+1]=8,t++,r[8]++;for(;t<=255;)E[2*t+1]=9,t++,r[9]++;for(;t<=279;)E[2*t+1]=7,t++,r[7]++;for(;t<=287;)E[2*t+1]=8,t++,r[8]++;for(H(E,h+1,r),t=0;t<u;t++)S[2*t+1]=5,S[2*t]=$(t,5);I=new L(E,w,c+1,h,g),D=new L(S,k,0,u,g),O=new L(new Array(0),C,0,d,m)}(),q=!0),t.l_desc=new M(t.dyn_ltree,I),t.d_desc=new M(t.dyn_dtree,D),t.bl_desc=new M(t.bl_tree,O),t.bi_buf=0,t.bi_valid=0,U(t)},i._tr_stored_block=Z,i._tr_flush_block=function(t,e,i,n){var s,a,l=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return r;for(e=32;e<c;e++)if(0!==t.dyn_ltree[2*e])return r;return o}(t)),X(t,t.l_desc),X(t,t.d_desc),l=function(t){var e;for(K(t,t.dyn_ltree,t.l_desc.max_code),K(t,t.dyn_dtree,t.d_desc.max_code),X(t,t.bl_desc),e=d-1;3<=e&&0===t.bl_tree[2*T[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),s=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=s&&(s=a)):s=a=i+5,i+4<=s&&-1!==e?Z(t,e,i,n):4===t.strategy||a===s?(F(t,2+(n?1:0),3),j(t,E,S)):(F(t,4+(n?1:0),3),function(t,e,i,n){var o;for(F(t,e-257,5),F(t,i-1,5),F(t,n-4,4),o=0;o<n;o++)F(t,t.bl_tree[2*T[o]+1],3);Y(t,t.dyn_ltree,e-1),Y(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,l+1),j(t,t.dyn_ltree,t.dyn_dtree)),U(t),n&&V(t)},i._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(R[i]+c+1)]++,t.dyn_dtree[2*B(e)]++),t.last_lit===t.lit_bufsize-1},i._tr_align=function(t){F(t,2,3),W(t,v,E),function(t){16===t.bi_valid?(P(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,i){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,i){"use strict";e.exports="function"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)},655:(t,e,i)=>{"use strict";i.d(e,{ZT:()=>o,pi:()=>r,_T:()=>s,XA:()=>a,CR:()=>l,fl:()=>c});var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function o(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var r=function(){return(r=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i}function a(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}function l(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s}function c(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t}}}]);