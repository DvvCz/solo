(()=>{"use strict";var e,t={392:(e,t,n)=>{n.d(t,{eq:()=>Sn,WO:()=>pn,ae:()=>an,q2:()=>fn,G0:()=>bn,Mj:()=>mn,Dy:()=>un,H2:()=>In});var i=n(179);const o="tempProject",s="localProject",l=20,r="solocup",a="Solo",p="Solocup",c="https://media.parallax.com/blockly";n(915);var d=n(256),_=n.n(d),u=n(162),h=n(733),m=n(369),g=n.n(m),T=n(755);let I="unknown-client";const b=function(e,t,n){g().dialog({title:e,message:t,buttons:{confirm:{label:"Ok",className:"btn-primary",callback:n}}})},E=function(e,t,n){g().prompt({title:e,value:t,callback:n,buttons:{cancel:{label:"Cancel",className:"btn-default",callback:n},confirm:{label:"Confirm",className:"btn-primary",callback:n}}})},S=function(e,t,n){g().confirm({title:e,message:t,buttons:{confirm:{label:'<i class="fa fa-check"></i> Yes'},cancel:{label:'<i class="fa fa-times"></i> No'}},callback:function(e){n&&n(e)}})},f=function(e,t,n,i="Confirm",o="Cancel"){g().dialog({title:e,message:t,buttons:{cancel:{label:o,className:"btn-default",callback:function(){n(!1)}},confirm:{label:i,className:"btn-primary",callback:function(){n(!0)}}}})};function O(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(window.location.search)||[null,""])[1].replace(/\+/g,"%20"))||null}function R(e,t,n){n=n||t,navigator[e]&&-1!==navigator[e].indexOf(t)&&(I=n)}function L(e){const t=new Date;let n=t.getHours()>9?t.getHours().toString():`0${t.getHours().toString()}`;n+=t.getMinutes()>9?`:${t.getMinutes().toString()}`:`:0${t.getMinutes().toString()}`,n+=t.getSeconds()>9?`:${t.getSeconds().toString()}`:`:0${t.getSeconds().toString()}`;const i=t.getMilliseconds();n+=i>99?`.${i}`:i>9?`.0${i}`:`.00${i}`,console.log(`${n} ${e}`)}function N(e){return"string"!=typeof e||e.length<1?"my_project":(e=e.replace(/[/?<>\\:*|"]/g,"_").replace(/[\x00-\x1f\x80-\x9f]/g,"_").replace(/^\.+$/,"_").replace(/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,"_").replace(/[. ]+$/,"_")).length>31?e.substring(0,30):e}Array.prototype.sortedUnique||Object.defineProperty(Array.prototype,"sortedUnique",{value:function(){const e={},t=[];let n=this.length,i=0;for(let o=0;o<n;o++){const n=this[o];1!==e[n]&&(e[n]=1,t[i++]=n)}try{const e=[];let i=0;for(;t.length>0;){n=t.length;let o=0;for(let e=0;e<n;e++)parseInt(t[e],10)<parseInt(t[o],10)&&(o=e);e[i]=t[o],i++,t.splice(o,1)}return e}catch(e){return t}},enumerable:!1}),R("appVersion","X11","UNIX"),R("appVersion","Mac","MacOS"),R("appVersion","Linux",null),R("userAgent","Linux",null),R("platform","Linux",null),R("appVersion","Win","Windows"),R("userAgent","Windows",null),R("platform","Win","Windows"),R("oscpu","Windows",null),R("appVersion","CrOS","ChromeOS"),T((function(){T(".external_link").click((function(e){window.open(T(this).attr("href"),"_blank"),e.preventDefault()})),T("body").addClass(I),T("#client-instructions-copy").html(T("#client-instructions-original").html()),O("debug")&&console.log(navigator.browserSpecs)})),navigator.browserSpecs=function(){const e=navigator.userAgent;let t,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:t[1]||"",system:I}):"Chrome"===n[1]&&(t=e.match(/\b(OPR|Edge)\/(\d+)/),null!=t)?{name:t[1].replace("OPR","Opera"),version:t[2],system:I}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),{name:n[0],version:n[1],system:I})}();const A=e=>new Promise((t=>setTimeout(t,e))),C=function(e){return e=e.replace(/\)\s*[\n\r]\s*{/g,") {").replace(/\[([0-9]*)\]\s*=\s*{\s*([0-9xXbBA-F,\s]*)\s*};/g,(function(e,t,n){return"["+t+"] = {"+(n=n.replace(/\s/g,"").replace(/,/g,", "))+"};"}))};var k=n(755);const P=[];P.client_unknown="BlocklyProp is unable to determine what version of BlocklyProp Launcher is installed on your computer.<br>You may need to install or reinstall the BlocklyProp Launcher.",P.client_update_warning='BlocklyProp Solo requires BlocklyProp Launcher version <span class="client-required-version"></span>, or later.<br><br>The version detected on your system, BlocklyProp Client version <span class="client-your-version"></span> may not work<br>correctly with Solo. We recommend downloading and installing the latest software for<br>best results. You can use the link below to get started.',P.client_update_danger='BlocklyProp now requires at least version <span class="client-required-version"></span> of the BlocklyProp Launcher.<br>You appear to be using BlocklyProp Launcher version <span class="client-your-version"></span>.<br>You will not be able to load projects to your device until you upgrade your BlocklyProp Launcher.<br>Please use the link below to download the newest version.',P["editor_edit-details"]="Edit Project Details",P.menu_help_reference="Help & Reference",P.menu_download_simpleide="Download SimpleIDE files",P.editor_open_project_title="Open Project",P.editor_upload="Import project",P.editor_run_configure="Configure client",P.editor_about_solo="About Solo",P.editor_license="License",P.editor_license_dialog_title="BlocklyProp Solo License",P.editor_about_solo_dialog_title="About BlocklyProp Solo",P.editor_client_available='<strong>Select the correct port,</strong> then click <svg xmlns="http://www.w3.org/2000/svg" width="12" height="15" style="vertical-align: middle;"><path d="M4.4,0 L6.8,0 6.8,7.2 10,7.2 5.6,11.6 1.2,7.2 4.4,7.2 Z" style="stroke:#000;stroke-width:1;fill:#000;"/></svg> or <svg xmlns="http://www.w3.org/2000/svg" width="14" height="15" style="vertical-align: middle;"><path d="M4.4,0 L6.8,0 6.8,4.8 10,4.8 5.6,9.2 1.2,4.8 4.4,4.8 Z M0.4,9.6 L10.8,9.6 10.8,11.6 0.4,11.6 Z" style="stroke:#000;stroke-width:1;fill:#000;"/></svg>.',P.editor_client_available_short='<strong>Select the correct port,</strong> then click <svg xmlns="http://www.w3.org/2000/svg" width="14" height="15" style="vertical-align: middle;"><path d="M4.4,0 L6.8,0 6.8,4.8 10,4.8 5.6,9.2 1.2,4.8 4.4,4.8 Z M0.4,9.6 L10.8,9.6 10.8,11.6 0.4,11.6 Z" style="stroke:#000;stroke-width:1;fill:#000;"/></svg>.',P["editor_client_not-available"]="Unable to contact the BlocklyProp Launcher. Click for more information.",P.editor_client_title="BlocklyProp Launcher",P.editor_import="Import Project",P.editor_append="Append project file",P.editor_view_xml="XML",P.editor_new_button="New",P.editor_open_button="Open",P.editor_save="Save",P.editor_upload_selectfile="Select File",P.editor_upload_valid="The selected file appears valid.",P.editor_upload_notvalid="The selected file is not valid.",P.editor_upload_boardtype_warning="<strong>Warning!</strong> You are about to upload a blocks file from a different board/device than you are currently using.  If the blocks you are trying to upload are not available for your current board, uploading this blocks file into your project may <strong>break your project</strong>.  If your project does break after uploading this file - do not save it! Click your browser's refresh button to reload your project.",P.editor_button_cancel="Cancel",P.editor_button_open="Open",P.editor_button_replace="Replace",P.editor_button_append="Append",P["editor_save-check"]="Save project reminder",P.editor_button_close="Close",P.editor_run_compile="Compile",P.editor_title_result="Result",P.editor_title_terminal="Terminal",P.editor_title_graphing="Graphing",P.editor_graph_time_label="Time (seconds)",P["editor_save-as"]="Save project as",P.editor_saveas_boardtype_warning="<strong>Warning!</strong> You are about to save the blocks from your current project into a project that is for a different board/device.  If the blocks that are in your project are not available for the board/device you selected, the new project may <strong>not work!</strong>",P.editor_new_project_title="New project",P.editor_button_continue="Continue",P.project_saveaslink="Save As",P.project_savelink="Save",P.project_create_project_name="Project name",P.project_create_board_type="Board/Device/Project type",P.project_create_board_type_select="- board/device/project type -",P.project_name="Project Name",P.project_created="Created On",P.project_modified="Last Modified",P.project_create_description="Description",P.client_macOS_run_title="Running the BlocklyProp Launcher on your Mac",P.client_macOS_run_instructions1="Find the BlocklyProp Launcher application by opening a Finder window and clicking &quot;Applications&quot; on the left. Then look for the BlocklyProp Launcher application and double-click it:",P.client_run_instructions2="Once the BlocklyProp Launcher is running and connected, you may return to your browser and load programs to your device.",P.client_windows_run_title="Running the BlocklyProp Launcher on your Windows PC",P.client_windows_run_instructions1="Click the Windows (start) icon in the lower-left corner of your screen. Then look for the BlocklyProp Launcher application inside of the &quot;Parallax Inc&quot; folder:",P.client_chrome_run_title="Running the BlocklyProp Launcher on your Chromebook",P.client_chrome_run_instructions1="Click the App icon (circle) in the bottom-left corner of the screen. Find the BlocklyProp Launcher app and double-click it:",P.clientdownload_download_installer="Download the installer",P.client_download_launcher_macos_big_sur_installer="BP-Launcher installer for MacOS Big Sur",P.client_download_launcher_macos_catalina_installer="BP-Launcher installer for MacOS Catalina",P.client_download_launcher_macos_mojave_installer="BP-Launcher installer for MacOS Mojave",P.client_download_launcher_macos_high_sierra_installer="BP-Launcher installer for MacOS High Sierra",P.clientdownload_launcher_windows64_installer="Windows 7/8/8.1/10 (64-bit) BP-Launcher installer",P.clientdownload_launcher_windows64zip_installer="Windows 7/8/8.1/10 (64-bit) BP-Launcher installer (zip)",P.clientdownload_download_launcher="Install the Launcher App",P.clientdownload_client_chromeos_installer="Add to Chrome",P.clientdownload_os_menu="Choose a different operating system",P.menu_code="Code",P.menu_blocks="Blocks",P.os_name_win="Windows",P.os_name_mac="Mac OS",P.os_name_chr="Chrome OS";const y=e=>{try{return P[e]}catch(t){return L(`Unable to find ${e} in text labels`),""}},F=[["prop-btn-comp","Verify code (compile)"],["prop-btn-ram","Run once (load code to RAM)"],["prop-btn-eeprom","Load and run (save code to EEPROM)"],["prop-btn-term","Open Serial Terminal"],["prop-btn-graph","Open Graphing Output"],["btn-graph-play","Pause/Resume the graph"],["btn-graph-snapshot","Download a snapshot of the graph"],["btn-graph-csv","Download graph data as CSV"],["btn-graph-clear","Clear the graph"],["project-form-shared","Make project visible to other users"],["project-form-private","Hide project from other users"],["project-form-edit-shared","Make project visible to other users"],["project-form-edit-private","Hide project from other users"]];_().MSG_DUPLICATE_BLOCK="Duplicate",_().MSG_REMOVE_COMMENT="Remove Comment",_().MSG_ADD_COMMENT="Add Comment",_().MSG_EXTERNAL_INPUTS="External Inputs",_().MSG_INLINE_INPUTS="Inline Inputs",_().MSG_DELETE_BLOCK="Delete Block",_().MSG_DELETE_X_BLOCKS="Delete %1 Blocks",_().MSG_COLLAPSE_BLOCK="Collapse Block",_().MSG_EXPAND_BLOCK="Expand Block",_().MSG_DISABLE_BLOCK="Disable Block",_().MSG_ENABLE_BLOCK="Enable Block",_().MSG_HELP="Help",_().Msg.DIALOG_CHANGED_SINCE="The project has been changed since the last save.",_().Msg.DIALOG_PROJECT_SAVED="Project saved",_().Msg.DIALOG_SAVE_TITLE="Save",_().Msg.DIALOG_SAVE_FIRST="Save current project first?",_().Msg.DIALOG_PROJECT_SAVED_TEXT="The project has been saved",_().Msg.DIALOG_DOWNLOAD_GRAPH_DIALOG="Download Graph Output - Filename:",_().Msg.DIALOG_DOWNLOAD_DATA_DIALOG="Download Graph data as CSV - Filename:",_().Msg.DIALOG_ERROR="Error",_().Msg.DIALOG_LOADING_ERROR="Unable to load the project",_().Msg.DIALOG_BLOCKLYPROP_LAUNCHER="BlocklyProp Launcher",_().Msg.DIALOG_BLOCKLYPROP_LAUNCHER_CONFIGURE_TITLE="Configure the BlocklyProp-Launcher connection",_().Msg.DIALOG_SIDE_FILES_ERROR="A problem occurred when trying to create the SimpleIDE files: ",_().Msg.DIALOG_NO_CLIENT='<i class="glyphicon glyphicon-exclamation-sign"></i> BlocklyProp Launcher <strong>is not running</strong>',_().Msg.DIALOG_NO_DEVICE_TEXT="Ensure it is connected, powered on, and selected in the ports list. Make sure your BlocklyProp Launcher is up-to-date.",_().Msg.DIALOG_DEVICE_COMM_ERROR_TEXT='BlocklyProp Launcher not available to communicate with a microcontroller. It may help to "Force Refresh" by pressing Control-Shift-R (Windows/Linux) or Command-Shift-R (Mac).',_().Msg.DIALOG_NO_DEVICE="No devices found",_().Msg.DIALOG_DEVICE_COMM_ERROR="Device communication error",_().Msg.DIALOG_PORT_SEARCHING="Searching...",_().Msg.DIALOG_CLIENT_SEARCHING='<i class="glyphicon glyphicon-info-sign"></i> Looking for BlocklyProp Launcher',_().Msg.DIALOG_DOWNLOAD="Download Project - Filename:",_().Msg.DIALOG_UNSAVED_PROJECT="Unsaved Project",_().Msg.DIALOG_EMPTY_PROJECT="Empty Project",_().Msg.DIALOG_CANNOT_SAVE_EMPTY_PROJECT="You cannot save an empty project",_().Msg.DIALOG_CANNOT_COMPILE_EMPTY_PROJECT="You cannot compile an empty project",_().Msg.DIALOG_SAVE_BEFORE_ADD_BLOCKS="You must save your project before you can upload a blocks file to it.",_().Msg.DIALOG_MISSING_BLOCKS="Blocks missing",_().Msg.DIALOG_MISSING_BLOCKS_GRAPHING="To use the graphing feature, your program must have both a graph initialize block and a graph value block.",_().Msg.DIALOG_TERMINAL_NO_DEVICES_TO_CONNECT="Simulated terminal because there are no devices available to connect to",_().Msg.DIALOG_GRAPH_NO_DEVICES_TO_CONNECT="Simulated graph because there are no devices available to connect to",_().Msg.DIALOG_TERMINAL_NO_DEVICES="No connection established.",_().Msg.DIALOG_TERMINAL_CONNECTION_ESTABLISHED="Connection established with",_().Msg.DIALOG_TERMINAL_AT_BAUDRATE="at baudrate",_().MSG_CHANGE_VALUE_TITLE="Change value:",_().MSG_NEW_VARIABLE="New variable...",_().MSG_NEW_VARIABLE_TITLE="New variable name:",_().MSG_RENAME_VARIABLE="Rename variable...",_().MSG_RENAME_VARIABLE_TITLE='Rename all "%1" variables to:',_().LANG_VARIABLES_SET_ITEM="item",_().LANG_VARIABLES_GET_ITEM="item",_().LANG_CATEGORY_CONTROLS="Control",_().LANG_CONTROLS_IF_MSG_IF="if",_().LANG_CONTROLS_IF_MSG_ELSEIF="else if",_().LANG_CONTROLS_IF_MSG_ELSE="else",_().LANG_CONTROLS_IF_MSG_THEN="do",_().LANG_CONTROLS_IF_IF_TITLE_IF="if",_().LANG_CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections\nto reconfigure this if block.",_().LANG_CONTROLS_IF_ELSEIF_TITLE_ELSEIF="else if",_().LANG_CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",_().LANG_CONTROLS_IF_ELSE_TITLE_ELSE="else",_().LANG_CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",_().LANG_CONTROLS_REPEAT_TITLE_REPEAT="repeat",_().LANG_CONTROLS_REPEAT_TITLE_TIMES="times",_().LANG_CONTROLS_REPEAT_INPUT_DO="do",_().LANG_CONTROLS_FLOW_STATEMENTS_INPUT_OFLOOP="of loop",_().LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out",_().LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration",_().LANG_CONTROLS_FLOW_STATEMENTS_WARNING="Warning:\nThis block may only\nbe used within a loop.",_().LANG_CATEGORY_LOGIC="Logic",_().LANG_LOGIC_OPERATION_AND="and",_().LANG_LOGIC_OPERATION_OR="or",_().LANG_LOGIC_NEGATE_INPUT_NOT="not",_().LANG_LOGIC_BOOLEAN_TRUE="true",_().LANG_LOGIC_BOOLEAN_FALSE="false",_().LANG_LOGIC_NULL="null",_().LANG_CATEGORY_MATH="Math",_().LANG_PROCEDURES_DEFNORETURN_PROCEDURE="method",_().LANG_PROCEDURES_DEFNORETURN_DO="do",_().LANG_PROCEDURES_DEFRETURN_PROCEDURE=_().LANG_PROCEDURES_DEFNORETURN_PROCEDURE,_().LANG_PROCEDURES_DEFRETURN_DO=_().LANG_PROCEDURES_DEFNORETURN_DO,_().LANG_PROCEDURES_DEFRETURN_RETURN="return",_().LANG_PROCEDURES_DEF_DUPLICATE_WARNING="Warning:\nThis method has\nduplicate parameters.",_().LANG_PROCEDURES_CALLNORETURN_CALL="do",_().LANG_PROCEDURES_CALLNORETURN_PROCEDURE="method",_().LANG_PROCEDURES_CALLRETURN_CALL=_().LANG_PROCEDURES_CALLNORETURN_CALL,_().LANG_PROCEDURES_CALLRETURN_PROCEDURE=_().LANG_PROCEDURES_CALLNORETURN_PROCEDURE,_().LANG_PROCEDURES_MUTATORCONTAINER_TITLE="parameters",_().LANG_PROCEDURES_MUTATORARG_TITLE="variable:",_().LANG_PROCEDURES_HIGHLIGHT_DEF="Highlight Procedure",_().LANG_PROCEDURES_IFRETURN_WARNING="Warning:\nThis block may only be\nused within a method.",_().Msg.ADD_COMMENT="Add Comment",_().Msg.AUTH="Please authorize this app to enable your work to be saved and to allow it to be shared by you.",_().Msg.CHANGE_VALUE_TITLE="Change value:",_().Msg.CHAT="Chat with your collaborator by typing in this box!",_().Msg.CLEAN_UP="Clean up Blocks",_().Msg.COLLAPSE_ALL="Collapse Blocks",_().Msg.COLLAPSE_BLOCK="Collapse Block",_().Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",_().Msg.DELETE_BLOCK="Delete Block",_().Msg.DELETE_X_BLOCKS="Delete %1 Blocks",_().Msg.DISABLE_BLOCK="Disable Block",_().Msg.DUPLICATE_BLOCK="Duplicate",_().Msg.ENABLE_BLOCK="Enable Block",_().Msg.EXPAND_ALL="Expand Blocks",_().Msg.EXPAND_BLOCK="Expand Block",_().Msg.EXTERNAL_INPUTS="External Inputs",_().Msg.HELP="Help",_().Msg.INLINE_INPUTS="Inline Inputs",_().Msg.LOGIC_BOOLEAN_FALSE=_().LANG_LOGIC_BOOLEAN_FALSE,_().Msg.LOGIC_BOOLEAN_TRUE=_().LANG_LOGIC_BOOLEAN_TRUE,_().Msg.LOGIC_NEGATE_TITLE="not %1",_().Msg.LOGIC_NULL=_().LANG_LOGIC_NULL,_().Msg.LOGIC_OPERATION_AND=_().LANG_LOGIC_OPERATION_AND,_().Msg.LOGIC_OPERATION_OR=_().LANG_LOGIC_OPERATION_OR,_().Msg.LOGIC_TERNARY_CONDITION="test",_().Msg.LOGIC_TERNARY_IF_FALSE="if false",_().Msg.LOGIC_TERNARY_IF_TRUE="if true",_().Msg.MATH_CHANGE_TITLE="change %1 by %2",_().Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",_().Msg.MATH_ADDITION_SYMBOL="+",_().Msg.MATH_DIVISION_SYMBOL="÷",_().Msg.MATH_MULTIPLICATION_SYMBOL="×",_().Msg.MATH_SUBTRACTION_SYMBOL="-",_().Msg.ME="Me",_().Msg.NEW_VARIABLE="New variable...",_().Msg.NEW_VARIABLE_TITLE="New variable name:",_().Msg.ORDINAL_NUMBER_SUFFIX="",_().Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",_().Msg.PROCEDURES_BEFORE_PARAMS="with:",_().Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",_().Msg.PROCEDURES_CREATE_DO="Create '%1'",_().Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",_().Msg.PROCEDURES_DEFNORETURN_DO="",_().Msg.PROCEDURES_DEFNORETURN_PROCEDURE="my function",_().Msg.PROCEDURES_DEFNORETURN_TITLE="function",_().Msg.PROCEDURES_DEFRETURN_RETURN="return",_().Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",_().Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",_().Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",_().Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",_().Msg.PROCEDURES_MUTATORARG_TITLE="input name:",_().Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",_().Msg.REDO="Redo",_().Msg.REMOVE_COMMENT="Remove Comment",_().Msg.RENAME_VARIABLE="Rename variable...",_().Msg.DELETE_VARIABLE="Delete variable '%1'",_().Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",_().Msg.DELETE_VARIABLE_CONFIRMATION="Delete blocks containing %1 uses of the '%2' variable?",_().Msg.TODAY="Today",_().Msg.UNDO="Undo",_().Msg.VARIABLES_DEFAULT_NAME="item",_().Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",_().Msg.VARIABLES_SET="set %1 to %2",_().Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",_().Msg.PROCEDURES_DEFRETURN_TITLE=_().Msg.PROCEDURES_DEFNORETURN_TITLE,_().Msg.CONTROLS_IF_IF_TITLE_IF=_().LANG_CONTROLS_IF_MSG_IF,_().Msg.CONTROLS_WHILEUNTIL_INPUT_DO=_().LANG_CONTROLS_REPEAT_INPUT_DO,_().Msg.CONTROLS_IF_MSG_THEN=_().LANG_CONTROLS_REPEAT_INPUT_DO,_().Msg.CONTROLS_IF_ELSE_TITLE_ELSE=_().LANG_CONTROLS_IF_MSG_ELSE,_().Msg.PROCEDURES_DEFRETURN_PROCEDURE=_().Msg.PROCEDURES_DEFNORETURN_PROCEDURE,_().Msg.MATH_CHANGE_TITLE_ITEM=_().Msg.VARIABLES_DEFAULT_NAME,_().Msg.MATH_NUMBER_RANGE_TOO_LARGE_WARNING="WARNING: Your value is too small!  It must be greater than or equal to ",_().Msg.MATH_NUMBER_RANGE_TOO_SMALL_WARNING="WARNING: Your value is too large!  It must be less than or equal to ",_().Msg.MATH_NUMBER_RANGE_VALUE_INVALID_WARNING="WARNING: The value you entered is not available or not allowed!",_().Msg.PROCEDURES_DEFRETURN_DO=_().Msg.PROCEDURES_DEFNORETURN_DO,_().Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=_().LANG_CONTROLS_IF_MSG_ELSEIF,_().Msg.CONTROLS_FOREACH_INPUT_DO=_().LANG_CONTROLS_REPEAT_INPUT_DO,_().Msg.CONTROLS_FOR_INPUT_DO=_().LANG_CONTROLS_REPEAT_INPUT_DO,_().Msg.TEXT_APPEND_VARIABLE=_().Msg.VARIABLES_DEFAULT_NAME,_().Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=_().Msg.VARIABLES_DEFAULT_NAME,_().Msg.PROCEDURES_DEFRETURN_COMMENT=_().Msg.PROCEDURES_DEFNORETURN_COMMENT,_().DROPDOWN_MULTIPLIER=[["1","1"],["10","10"],["100","100"],["1000","1000"],["10,000","10000"],["100,000","100000"],["1,000,000","1000000"]],_().MSG_CONTROL_HELPURL="https://learn.parallax.com/ab-blocks/control",_().MSG_NUMBERS_HELPURL="https://learn.parallax.com/ab-blocks/numbers",_().MSG_STRINGS_HELPURL="https://learn.parallax.com/ab-blocks/strings",_().MSG_ARRAYS_HELPURL="https://learn.parallax.com/ab-blocks/arrays",_().MSG_VALUES_HELPURL="https://learn.parallax.com/ab-blocks/values",_().MSG_VARIABLES_HELPURL="https://learn.parallax.com/ab-blocks/variables",_().MSG_FUNCTIONS_HELPURL="https://learn.parallax.com/ab-blocks/functions",_().MSG_PINS_HELPURL="https://learn.parallax.com/ab-blocks/pins",_().MSG_SERIAL_LCD_HELPURL="https://learn.parallax.com/ab-blocks/serial-lcd",_().MSG_PARALLEL_LCD_HELPURL="https://learn.parallax.com/ab-blocks/parallel-lcd",_().MSG_GRAPHING_HELPURL="https://learn.parallax.com/ab-blocks/graph",_().MSG_OLED_HELPURL="https://learn.parallax.com/ab-blocks/oled",_().MSG_EPAPER_HELPURL="https://learn.parallax.com/ab-blocks/epaper",_().MSG_BADGE_DISPLAY_HELPURL="https://learn.parallax.com/ab-blocks/badgedisplay",_().MSG_BADGE_IR_COMM_HELPURL="https://learn.parallax.com/ab-blocks/badgeir",_().MSG_TERMINAL_HELPURL="https://learn.parallax.com/ab-blocks/terminal",_().MSG_PROTOCOLS_HELPURL="https://learn.parallax.com/ab-blocks/protocols",_().MSG_SWX_HELPURL="https://learn.parallax.com/ab-blocks/simple-wx",_().MSG_AWX_HELPURL="https://learn.parallax.com/ab-blocks/advanced-wx",_().MSG_XBEE_HELPURL="https://learn.parallax.com/ab-blocks/xbee",_().MSG_KEYPAD_HELPURL="https://learn.parallax.com/ab-blocks/keypad",_().MSG_BME680_HELPURL="https://learn.parallax.com/ab-blocks/air-quality",_().MSG_FPS_HELPURL="https://learn.parallax.com/ab-blocks/fingerprint",_().MSG_COMPASS_HELPURL="https://learn.parallax.com/ab-blocks/compass",_().MSG_GPS_HELPURL="https://learn.parallax.com/ab-blocks/gps",_().MSG_JOYSTICK_HELPURL="https://learn.parallax.com/ab-blocks/joystick",_().MSG_MEMSIC_HELPURL="https://learn.parallax.com/ab-blocks/memsic",_().MSG_ACCELEROMETER_HELPURL="https://learn.parallax.com/ab-blocks/accelerometer",_().MSG_PING_HELPURL="https://learn.parallax.com/ab-blocks/ping",_().MSG_PIR_HELPURL="https://learn.parallax.com/ab-blocks/pir",_().MSG_RFID_HELPURL="https://learn.parallax.com/ab-blocks/rfid",_().MSG_SONY_REMOTE_HELPURL="https://learn.parallax.com/ab-blocks/sony-remote",_().MSG_SOUND_IMPACT_HELPURL="https://learn.parallax.com/ab-blocks/sound-impact",_().MSG_TEMPERATURE_HELPURL="https://learn.parallax.com/ab-blocks/temp-humidity",_().MSG_COLORPAL_HELPURL="https://learn.parallax.com/ab-blocks/colorpal",_().MSG_EEPROM_HELPURL="https://learn.parallax.com/ab-blocks/memory",_().MSG_SD_HELPURL="https://learn.parallax.com/ab-blocks/memory",_().MSG_ANALOG_PULSES_HELPURL="https://learn.parallax.com/ab-blocks/analog-pins",_().MSG_ANALOG_PWM_HELPURL="https://learn.parallax.com/ab-blocks/pwm",_().MSG_ANALOG_PULSE_IN_OUT_HELPURL="https://learn.parallax.com/ab-blocks/pulsein-out",_().MSG_ANALOG_RC_TIME_HELPURL="https://learn.parallax.com/ab-blocks/rc-time",_().MSG_AUDIO_HELPURL="https://learn.parallax.com/ab-blocks/audio",_().MSG_SERVO_HELPURL="https://learn.parallax.com/ab-blocks/servo",_().MSG_ROBOT_HELPURL="https://learn.parallax.com/ab-blocks/robot",_().MSG_IMU_HELPURL="https://learn.parallax.com/ab-blocks/lsm9ds1",_().MSG_LIS3DH_HELPURL="https://learn.parallax.com/ab-blocks/lis3dh",_().MSG_WS2812B_HELPURL="https://learn.parallax.com/ab-blocks/ws2812b",_().MSG_SYSTEM_HELPURL="https://learn.parallax.com/ab-blocks/system",_().MSG_BADGE_LEDS_HELPURL="https://learn.parallax.com/ab-blocks/badge-leds",_().MSG_BADGE_IR_HELPURL="https://learn.parallax.com/ab-blocks/badgeir",_().MSG_BADGE_WX_LOCK="https://learn.parallax.com/ab-blocks/badge-lock",_().MSG_BADGE_DISPLAY_HELPURL="https://learn.parallax.com/ab-blocks/badgedisplay",_().MSG_BADGE_BUTTONS_HELPURL="https://learn.parallax.com/ab-blocks/badge-buttons",_().MSG_BADGE_ACCEL_HELPURL="https://learn.parallax.com/ab-blocks/badge-accel",_().MSG_COMMENT_TOOLTIP="add comment: Leave a note for people that will not affect the program.",_().MSG_CONTROLS_IF_TOOLTIP="If...do: when condition attached is true. Click the gear to add conditions.",_().MSG_CONTROLS_SELECT_TOOLTIP="switch...case: does statements when case condition is true. Click the gear to add conditions.",_().MSG_CONTROLS_REPEAT_TOOLTIP="conditional repeat: forever, x times , until, or while attached condition is true.",_().MSG_CONTROL_REPEAT_FOR_LOOP_TOOLTIP="repeat item: use variable and value blocks for counted loop.",_().MSG_CONTROLS_BREAK_TOOLTIP="break: Exit loop and skip to the next block.",_().MSG_CONSTANT_DEF_TOOLTIP="define constant: provide a named constant and give it a value.",_().MSG_CONSTANT_VALUE_TOOLTIP="constant value: returns the value of a named constant.",_().MSG_ARRAY_GET_TOOLTIP="array get element: gets a the value of the specified element in the array.",_().MSG_ARRAY_INIT_TOOLTIP="array initialize: sets up the array with the specified number of elements.",_().MSG_ARRAY_FILL_TOOLTIP="array fill: fills the array with the specified values.  Must be a comma separated list of integers.",_().MSG_ARRAY_SET_TOOLTIP="array set element: sets the value of the specified element in the array.",_().MSG_ARRAY_CLEAR_TOOLTIP="array clear: sets all of the elements of the array to 0 (zero).",_().MSG_BASE_DELAY_TOOLTIP="pause: wait for specified time (in milliseconds) then continue.",_().MSG_BASE_COUNT_TOOLTIP="count pulses: counts the number of times the selected pin detects high pulses during the specified duration.",_().MSG_COG_NEW_TOOLTIP="new processor: launch attached “run function” block if processor is available.",_().MSG_CONTROLS_RETURN_TOOLTIP="return: Required at the end of code enclosed in a “define function” block.",_().MSG_MATH_ARITHMETIC_TOOLTIP="math operation: + addition, - subtraction, x multiplication, / division, or % modulus.",_().MSG_MATH_LIMIT_TOOLTIP="limit: use first value, but if it's outside of second value, use second value instead.",_().MSG_MATH_CREMENT_TOOLTIP="de/increment: increase or decrease attached variable by 1.",_().MSG_MATH_RANDOM_TOOLTIP="random: Pick random number between the low “from” and high “to” values.",_().MSG_MATH_BITWISE_TOOLTIP="bitwise:& AND, | OR, ^ XOR, >> right shift, << left shift.",_().MSG_LOGIC_OPERATION_TOOLTIP="boolean comparison: and, or, and not, or not; return 1/true or 0/false.",_().MSG_LOGIC_NEGATE_TOOLTIP="not: Get boolean (1/true or 0/false) opposite,\nnegate: get the negative decimal value,\nabs: get the absolute value of.",_().MSG_PARENS_TOOLTIP="parentheses: Surrounds the enclosed block with parentheses ().  Use to change the order of mathematical operations in a series of blocks.",_().MSG_LOGIC_COMPARE_TOOLTIP="compare values: boolean comparison returns 1/true or 0/false.",_().MSG_STRING_COMPARE_TOOLTIP="compare strings: returns 1/true or 0/false. Case sensitive.",_().MSG_STRING_LENGTH_TOOLTIP="length of string: number of characters in string or string variable.",_().MSG_COMBINE_STRINGS_TOOLTIP="combine strings: join inserted strings and store in chosen variable.",_().MSG_FIND_SUBSTRING_TOOLTIP="find string location: of first character in substring from larger string.",_().MSG_GET_CHAR_AT_POSITION_TOOLTIP="get character at position: ASCII value (0 to 255) for nth character in string.",_().MSG_SET_CHAR_AT_POSITION_TOOLTIP="set character at position: nth in string, set with ASCII value (0 to 255).",_().MSG_GET_SUBSTRING_TOOLTIP="get part of string: in range of positions; store in variable item.",_().MSG_MATH_NUMBER_TOOLTIP="number value: positive or negative; truncates to integers.",_().MSG_STRING_TYPE_BLOCK_TOOLTIP="text string: up to 128 characters.",_().MSG_CHAR_TYPE_BLOCK_TOOLTIP="character value: Get value (32 to 126) of printable ASCII character selected.",_().MSG_MUSIC_NOTE_BLOCK_TOOLTIP="music note: Get frequency value of specified note.",_().MSG_LOGIC_BOOLEAN_TOOLTIP="true/false: Choose a value of 1 (true) or 0 (false).",_().MSG_HIGH_LOW_VALUE_TOOLTIP="high/low: Choose a value of 1 (high) or 0 (low).",_().MSG_COLOR_PICKER_TOOLTIP="color: Get 24-bit integer for color selected in box.",_().MSG_COLOR_VALUE_FROM_TOOLTIP="color value from: inserted red, green, and blue values (0 to 255).",_().MSG_GET_CHANNEL_FROM_TOOLTIP="get red/green/blue: value (0 to 255) for chosen component of color.",_().MSG_COMPARE_COLORS_TOOLTIP="compare colors: returns value from 0 (opposite) to 255 (identical).",_().MSG_SYSTEM_COUNTER_TOOLTIP="system counter: 0 to 4,294,967,295 before rolling over, or current clock frequency in MHz.",_().MSG_WAITCNT_TOOLTIP="wait until counter: waits until the system counter reaches the specified value.",_().MSG_WAIT_PIN_TOOLTIP="wait until pin: waits until the pin (or pins when using a mask) is or is not equal to the specified state.",_().MSG_REGISTER_SET_TOOLTIP="cog set register: sets the value of the specified cog register.",_().MSG_REGISTER_GET_TOOLTIP="cog get register: retrieves the value of the specified cog register.",_().MSG_CUSTOM_CODE_TOOLTIP="user code: must be properly written Propeller C code.  Places code input into specified location.",_().MSG_CUSTOM_CODE_MULTIPLE_TOOLTIP='User defined code: Set label, color, code, block type, and inputs.\nAdd correctly formatted Propeller C code to the includes,\nglobals, setups, main, and functions sections.\n Use "@1, @2, @3, @4, or @5" to insert values from inputs 1, 2, 3, 4, or 5 into your custom C code.',_().MSG_SYSTEM_RUN_AS_SETUP_TOOLTIP="Run as setup: executes any code generated by the blocks inside this block at the setup, immediately after the main() function.  Allows regular blocks be be executed ahead of initialize blocks.",_().MSG_VARIABLES_SET_TOOLTIP="set variable: name and attach initial value block.",_().MSG_VARIABLES_GET_TOOLTIP="use variable: choose set variables from dropdown.",_().MSG_PROCEDURES_DEFNORETURN_TOOLTIP="define function: group blocks to re-use ending with return; name group.",_().MSG_PROCEDURES_CALLNORETURN_TOOLTIP="return: use in a “define function” block to go back to the main code.",_().MSG_MAKE_PIN_TOOLTIP="make PIN (dropdown): Select I/O pin and setting with menus.",_().MSG_MAKE_PIN_INPUT_TOOLTIP="make PIN (programmable): Select I/O pin with value and setting with menu.",_().MSG_CHECK_PIN_TOOLTIP="check PIN (dropdown): Set I/O pin to an input and get its state; high = 1, low = 0.",_().MSG_CHECK_PIN_INPUT_TOOLTIP="check PIN (programmable): Set I/O pin of inserted value to an input and get its state; high = 1, low = 0.",_().MSG_SET_PINS_TOOLTIP="set multiple pins: define group then set each pin. Do not use on P29-P31.",_().MSG_GET_PINS_TOOLTIP="binary get pins: gets the value of a group of pins as a binary value. Highest pin is MSB.",_().MSG_SET_PINS_BINARY_TOOLTIP="binary set pins: define group then set each pins using a binary value. Highest pin is MSB. Do not use on P29-P31.",_().MSG_GRAPH_SETTINGS_TOOLTIP="Graph initialize: set how long data is held and the range of the graph.",_().MSG_GRAPH_OUTPUT_TOOLTIP="Graph output: send attached values to the graph.  Use in a repeat loop with a pause block, don't send data more than once every 25 ms.",_().MSG_DEBUG_LCD_INIT_TOOLTIP="LCD initialize: set I/O pin to LCD; match baud to LCD switches.",_().MSG_DEBUG_LCD_PRINT_TOOLTIP="LCD print text: display on serial LCD.",_().MSG_DEBUG_LCD_PRINT_MULTIPLE_TOOLTIP="LCD print multiple: send attached values or text to the LCD.",_().MSG_DEBUG_LCD_NUMBER_TOOLTIP="LCD print number: display on serial LCD.",_().MSG_DEBUG_LCD_ACTION_TOOLTIP="LCD command: select from dropdown.",_().MSG_DEBUG_LCD_SET_CURSOR_TOOLTIP="LCD set cursor: row and column.",_().MSG_DEBUG_LCD_MUSIC_NOTE_TOOLTIP="LCD play note: at octave for time set.",_().MSG_OLED_INITIALIZE_TOOLTIP="Display initialize: match to Propeller I/O pin connections.",_().MSG_OLED_UPDATE_TOOLTIP="Display update: send new drawings to the display.",_().MSG_OLED_FONT_LOADER_TOOLTIP="Display font loader: run alone to add fonts to EEPROM.",_().MSG_OLED_GET_MAX_HEIGHT_TOOLTIP="Display max height in pixels, accounts for screen orientation.",_().MSG_OLED_GET_MAX_WIDTH_TOOLTIP="Display max width in pixels, accounts for screen orientation.",_().MSG_OLED_CLEAR_SCREEN_TOOLTIP="Display command: clear screen, sleep, wake, invert screen.",_().MSG_OLED_TEXT_COLOR_TOOLTIP="Display font color: background is transparent if matched to font.",_().MSG_OLED_TEXT_SIZE_TOOLTIP="Display set text: Med, large, script and bubble require font loader.",_().MSG_OLED_SET_CURSOR_TOOLTIP="Display set cursor: 0,0 is top-left corner of display.",_().MSG_OLED_PRINT_TEXT_TOOLTIP="Display print text: send string to display.",_().MSG_OLED_PRINT_NUMBER_TOOLTIP="Display print number: display value as decimal, hex, or binary.",_().MSG_OLED_PRINT_MULTIPLE_TOOLTIP="Display print multiple: send attached values or text to the display.",_().MSG_OLED_DRAW_PIXEL_TOOLTIP="Display draw pixel: at x, y from top-left corner.",_().MSG_OLED_DRAW_LINE_TOOLTIP="Display draw line: set start and end points; 0,0 is top-left.",_().MSG_OLED_DRAW_TRIANGLE_TOOLTIP="Display draw triangle: set x,y position of each corner.",_().MSG_OLED_DRAW_RECTANGLE_TOOLTIP="Display draw rectangle: set x,y position of each corner.",_().MSG_OLED_DRAW_CIRCLE_TOOLTIP="Display draw circle: x,y of center point, radius, color, fill. ",_().MSG_OLED_BITMAP_TOOLTIP="Display Bitmap: Enter the name of the file (don't include the .bmp at the end) and the\nx,y position (top-left corner) to begin drawing the bitmap image.",_().MSG_CONSOLE_PRINT_TOOLTIP="Terminal print text: display contents of string block.",_().MSG_CONSOLE_PRINT_VARIABLES_TOOLTIP="Terminal print number: display value as decimal, hex, binary, or ASCII.",_().MSG_CONSOLE_PRINT_MULTIPLE_TOOLTIP="Terminal print multiple: send attached values or text to the terminal.",_().MSG_CONSOLE_SCAN_TEXT_TOOLTIP="Terminal receive text: up to 128-character string in variable.",_().MSG_CONSOLE_SCAN_NUMBER_TOOLTIP="Terminal receive number: as integer in variable.",_().MSG_CONSOLE_NEWLINE_TOOLTIP="Terminal new line: move cursor to far left of the next line.",_().MSG_CONSOLE_CLEAR_TOOLTIP="Terminal clear screen: then move cursor to 0,0 top left.",_().MSG_CONSOLE_MOVE_TO_POSITION_TOOLTIP="Terminal set cursor: at position x,y. Use Clear screen block first.",_().MSG_CONSOLE_CLOSE_TOOLTIP="Terminal close: closes the Simple Terminal object so that pins 30 and 31 can be used for other purposes such as a full-duplex serial connection.",_().MSG_SERIAL_OPEN_TOOLTIP="Serial initialize: match to Propeller I/O pin connections and device Baud rate.",_().MSG_SERIAL_TX_TOOLTIP="Serial transmit number: sends 32-bit integer as 4 bytes MSB-first.",_().MSG_SERIAL_SEND_TEXT_TOOLTIP="Serial transmit text: sends text as characters terminated by a 0 (NULL).",_().MSG_SERIAL_STATUS_TOOLTIP="Serial status: returns true (1), false (0), or a character depending on the status of the serial connection and the type of status requested.",_().MSG_SERIAL_RX_TOOLTIP="Serial receive number: receives 4 bytes MSB first and stores a a 32-bit integer.",_().MSG_SERIAL_RECEIVE_TEXT_TOOLTIP="Serial receive text: receives and stores characters into a variable until a 0 (NULL).",_().MSG_SERIAL_PRINT_MULTIPLE_TOOLTIP="Serial send multiple: send attached values or text to the device connected to the specified pin.",_().MSG_SERIAL_SCAN_MULTIPLE_TOOLTIP="Serial receive multiple: receive numbers or characters from the specified pin and store them in the specified variables.",_().MSG_SHIFT_IN_TOOLTIP="shift in: serially shift in a specified number of bits and provides an integer value.",_().MSG_SHIFT_OUT_TOOLTIP="shift out: serially shift out a specified number of bits from the specified value.",_().MSG_I2C_SEND_TOOLTIP="i2c send: send data to the specified device and register/memory address using the i2c/TWI protocol.  Refer to the device's datasheet for device address and register information.",_().MSG_I2C_RECEIVE_TOOLTIP="i2c receive: receive data from the specified device and register/memory address using the i2c/TWI protocol.  Refer to the device's datasheet for device address and register information.",_().MSG_I2C_MODE_TOOLTIP="i2c mode: specify whether the i2c clock line (SCL) is open-collector (default) or driven/push-pull by the Propeller MCU.",_().MSG_I2C_BUSY_TOOLTIP="i2c busy: returns true if the i2c if the specified device is busy.  Refer to the device's datasheet for device address information.",_().MSG_SWX_INIT_TOOLTIP="Simple WX initialize: Requires simplewx.html file. Match DO/DI to Propeller I/O pin connections, set terminal and program routing.",_().MSG_SWX_CONFIG_PAGE_TOOLTIP="Simple WX configure page: Requires simplewx.html file. Set terminal page title and background color.",_().MSG_SWX_SET_TOOLTIP="Simple WX set widget: Requires simplewx.html file. Set location, type, color, and values for a new widget.",_().MSG_SWX_READ_TOOLTIP="Simple WX read widgets: Requires simplewx.html file. Reads the current values of all the widgets.",_().MSG_SWX_GET_TOOLTIP="Simple WX widget value: Requires simplewx.html file. Provides the value of a widget from when it was last read.",_().MSG_SWX_SEND_TOOLTIP="Simple WX send to widget: Requires simplewx.html file. Send a value to a widget.",_().MSG_AWX_INIT_ADV_TOOLTIP="Advanced WX initialize: Match DO/DI to Propeller I/O pin connections, set terminal and program routing.",_().MSG_AWX_GET_IP_TOOLTIP="WX Get IP address: provides the module's IP address as a text string.",_().MSG_AWX_SCAN_MULTIPLE_TOOLTIP="Advanced WX scan multiple: scans the incoming string and stores the data as specified.",_().MSG_AWX_PRINT_TOOLTIP="Advanced WX print: prints the specified data to the WX module.",_().MSG_AWX_SCAN_STRING_TOOLTIP="Advanced WX scan string: stores an incoming string in the specified variable.",_().MSG_AWX_SEND_TOOLTIP="Advanced WX send: sends the specified data to the TCP connection.",_().MSG_AWX_RECEIVE_TOOLTIP="Advanced WX receive: receives and stores TCP data.",_().MSG_AWX_POLL_TOOLTIP="Advanced WX poll: Instructs the WX module to monitor for a connection and data.",_().MSG_AWX_LISTEN_TOOLTIP="Advanced WX connect: listens for incoming data and provides the connection information.",_().MSG_AWX_CODE_TOOLTIP="Advanced WX code: provides the value for one of the codes used by the WX module.",_().MSG_AWX_MODE_TOOLTIP="Advanced WX mode: sets or gets the current mode of the WX module.",_().MSG_AWX_BUFFER_TOOLTIP="Advanced WX buffer: use to set up a receive buffer variable.",_().MSG_AWX_DISCONNECT_TOOLTIP="Advanced WX disconnect: disconnected from the specified connection.",_().MSG_AWX_JOIN_NETWORK_TOOLTIP="Advanced WX join network: Join a network by specifying its SSID and that network's passphrase.",_().MSG_AWX_GET_IP_TOOLTIP="Advanced WX get IP address: provides the IP address of the specified mode as a string.",_().MSG_XBEE_SETUP_TOOLTIP="XBee initialize: match to Propeller I/O pin connections and XBee Baud rate.",_().MSG_XBEE_TRANSMIT_TOOLTIP="XBee transmit: sends information to an XBee.  Strings and numbers are terminated with an ASCII 13",_().MSG_XBEE_RECEIVE_TOOLTIP="XBee receive: receives information from an XBee.  Expects strings and numbers to be terminated with an ASCII 13",_().MSG_XBEE_PRINT_MULTIPLE_TOOLTIP="XBee send multiple: send attached values or text to the Xbee module.",_().MSG_XBEE_SCAN_MULTIPLE_TOOLTIP="XBee receive multiple: receive numbers or characters from the XBee module and store them in the specified variables.",_().MSG_WS2812B_INIT_TOOLTIP="RGB-LED init: match to Propeller I/O pin connections and number of LEDs.",_().MSG_BADGE_RGB_INIT_TOOLTIP="RGB-LED number: set the number of RGB (WS2812b) LEDs.",_().MSG_WS2812B_SET_TOOLTIP="RGB-LED set: specify color for a specific LED.",_().MSG_WS2812B_MULTIPLE_TOOLTIP="RGB-LED set multiple: specify color for a range of consecutive LEDs.",_().MSG_WS2812B_UPDATE_TOOLTIP="RGB-LED update: update colors of all connected RGB-LEDs.",_().MSG_KEYPAD_INIT_TOOLTIP="4x4 Keypad init: match to Propeller I/O pins:\nWith the keypad facing you, start match from the leftmost pin to the rightmost pin.\nThe four rightmost pins must be connected to pull down resistors\n of a resistance from 1 to 100 kOhm.",_().MSG_BME680_INIT_TOOLTIP="Air Quality init: match to Propeller I/O pin connections.",_().MSG_BME680_GET_VALUE_TOOLTIP="Air Quality get value: retrieves a value in the specified units from the last sensor reading.",_().MSG_BME680_READ_TOOLTIP="Air Quality read: trigger the sensor to take and store a reading.",_().MSG_BME680_HEATER="Air Quality heater: Enable or Disable the internal heating element in the Air Quality sensor.  If the heater is disabled, gas resistance will not provide a meaningful value.",_().MSG_KEYPAD_READ_TOOLTIP="4x4 Keypad read: provides the value of the key pressed.\nIf none are pressed, provides (-1).",_().MSG_GPS_INIT_TOOLTIP="GPS Init: match to Propeller I/O pin connections and GPS module baud rate.",_().MSG_GPS_HASFIX_TOOLTIP="GPS has satellite fix: Returns 1 if there is a valid fix, 0 (zero) if not.",_().MSG_GPS_LAT_TOOLTIP="GPS latitude: provides latitude in microdegrees. North latitudes are positive, South latitudes are negative.",_().MSG_GPS_LONG_TOOLTIP="GPS longitude: provides longitude in microdegrees. East longitudes are positive, West longitudes are negative.",_().MSG_GPS_HEADING_TOOLTIP="GPS heading: provides compass heading in degrees.  Values are only valid when in motion",_().MSG_GPS_ALTITUDE_TOOLTIP="GPS altitude: provides altitude in centimeters above sea level.",_().MSG_GPS_SATS_TOOLTIP="GPS satellites tracked: provides the number of satellites the GPS module can see.",_().MSG_GPS_VELOCITY_TOOLTIP="GPS speed: provides the speed the module is travelling in the specified units.",_().MSG_FPS_INIT_TOOLTIP="Fingerprint scanner initialize: match to Propeller I/O pin connections.",_().MSG_FPS_ADD_TOOLTIP="Fingerprint scanner capture: capture and save or delete a capture or captures and their ID(s).",_().MSG_FPS_SCAN_TOOLTIP="Fingerprint scanner scan: scan and identify or scan and compare a fingerprint, or count the number of saved captures.",_().MSG_HMC5883L_INIT_TOOLTIP="Compass initialize: match to Propeller I/O pin connections.",_().MSG_HMC5883L_READ_TOOLTIP="Compass heading: get current heading in degrees.",_().MSG_JOYSTICK_INPUT_TOOLTIP="Joystick: gets position of specified Joystick axis, match to A/D socket.",_().MSG_MX2125_ACCELERATION_XAXIS_TOOLTIP="Memsic x acceleration: gets side-to-side acceleration, match to Propeller I/O pin.",_().MSG_MX2125_ACCELERATION_YAXIS_TOOLTIP="Memsic y acceleration: gets front to back acceleration, match to Propeller I/O pin.",_().MSG_MX2125_ROTATION_TOOLTIP="Memsic rotation: gets rotation in degrees when held like a steering wheel, match to Propeller I/O pins.",_().MSG_MX2125_TILT_XAXIS_TOOLTIP="Memsic x tilt: gets x-\tilt in degrees from level with horizon, match to Propeller I/O pin.",_().MSG_MX2125_TILT_YAXIS_TOOLTIP="Memsic y tilt: gets y-tilt in degrees from level with horizon, match to Propeller I/O pin.",_().MSG_MMA7455_INIT_TOOLTIP="Accelerometer initialize: match to Propeller I/O pin connections.",_().MSG_MMA7455_ACCELERATION_TOOLTIP="Accelerometer store values: stores measured x, y, & z acceleration in specified variables.",_().MSG_LSM9DS1_INIT_TOOLTIP="IMU initialize: match to Propeller I/O pin connections.",_().MSG_LSM9DS1_READ_TOOLTIP="IMU read: get measurements from specified sensor.",_().MSG_LSM9DS1_MAG_CALIBRATE_TOOLTIP="IMU Calibrate Magnetometer: Initialize first. Rotate slowly thru all 3 axes until P26/P27 LEDs turn off.",_().MSG_LSM9DS1_TILT_TOOLTIP="IMU tilt: gets tilt along specified axis.",_().MSG_LSM9DS1_HEADING_TOOLTIP="IMU heading: specify axes, get current heading in degrees.",_().MSG_LIS3DH_INIT_TOOLTIP="LIS3DH initialize: match to Propeller I/O pin connections. If measuring tilt, set a smoothing factor (0-100). If measuring temperature, set an initial value and units. If measuring ADC voltage, set the measured ground and 3.3V values. \nRight click and choose Help for more information.",_().MSG_LIS3DH_READ_TOOLTIP="LIS3DH read: Select the sensors to read, then select the variables to store the readings into.",_().MSG_LIS3DH_TEMP_TOOLTIP="LIS3DH temperature: read the temperature.",_().MSG_SENSOR_PING_TOOLTIP="Ping))) distance: gets distance measured in the specified units, match to Propeller I/O pin.",_().MSG_PIR_SENSOR_TOOLTIP="PIR sensor: returns 1/true if motion is detected, match to Propeller I/O pin.",_().MSG_RFID_ENABLE_TOOLTIP="RFID initialize: match to Propeller I/O pin connections.",_().MSG_RFID_GET_TOOLTIP="RFID read: gets ID from RFID tag near sensor, returns 0 if no tag detected.",_().MSG_RFID_DISABLE_TOOLTIP="RFID disable/enable: enables or disables the RFID reader.",_().MSG_RFID_CLOSE_TOOLTIP="RFID close: Closes RFID object, frees resources used.",_().MSG_SIRC_GET_TOOLTIP="Sony Remote value: returns button pressed on remote, returns -1 if none, match to Propeller I/O pin.",_().MSG_SOUND_IMPACT_RUN_TOOLTIP="Sound Impact initialize: match to Propeller I/O pin connections.",_().MSG_SOUND_IMPACT_GET_TOOLTIP="Sound Impact get count: gets number of sound impacts since last block was used last.",_().MSG_SOUND_IMPACT_END_TOOLTIP="Sound Impact close: Closes Sound Impact sensor object, frees resources used.",_().MSG_COLORPAL_ENABLE_TOOLTIP="ColorPal initialize: match to Propeller I/O pin connections.",_().MSG_COLORPAL_GET_COLORS_RAW_TOOLTIP="ColorPal raw colors: stores raw (uncalibrated) color measurements in specified variables.",_().MSG_COLORPAL_GET_COLORS_TOOLTIP="ColorPal get color: stores approximate color as a single integer into the specified variable.",_().MSG_DHT22_READ_TOOLTIP="Temp & Humidity read: trigger a DHT22/AM2302/CM2302 sensor connected to the specified pin to take and store a reading.  Must use a 10kOhm pullup resistor.",_().MSG_DHT22_VALUE_TOOLTIP="Temp & Humidity value: returns the specified measurement from the last sensor read using the Temp & Humidity read block.",_().MSG_EEPROM_READ_TOOLTIP="EEPROM read: reads information from EEPROM memory starting at the specified address.",_().MSG_EEPROM_WRITE_TOOLTIP="EEPROM write: writes information to EEPROM memory starting at the specified address.",_().MSG_RC_CHARGE_DISCHARGE_TOOLTIP="RC charge/discharge: returns the charge/discharge time of an RC circuit connected to the specified I/O pin.",_().MSG_AB_VOLT_IN_TOOLTIP="A/D read: returns the value measured by the connected A/D channel in volt-100ths.",_().MSG_AB_VOLT_OUT_TOOLTIP="D/A output: outputs voltage on the connected D/A channel in volt-100ths.",_().MSG_PULSE_IN_TOOLTIP="Pulse-in: measures the duration a high or low pulse received by the connected I/O pin.",_().MSG_PULSE_OUT_TOOLTIP="Pulse-out: outputs a high or low pulse to the specified I/O pin for the specified duration.",_().MSG_PWM_START_TOOLTIP="PWM initialize: sets up PWM object in the Propeller.",_().MSG_PWM_SET_TOOLTIP="PWM set: sends the specified PWM pulses out the Propeller I/O pin specified. Set duty cycle to 0 to stop sending pulses.",_().MSG_PWM_STOP_TOOLTIP="PWM stop: Stops PWM object, frees up resources used on the Propeller.",_().MSG_MCP320X_SET_VREF_TOOLTIP="A/D chip set Vref: Set to the Vref voltage of the A/D chip.",_().MSG_MCP320X_READ_TOOLTIP="A/D chip read: Reads an analog voltage from the specified channel. Match to Propeller I/O pin connections.",_().MSG_WAV_PLAY_TOOLTIP="WAV play: Plays named WAV file stored on the SD card. MUST be used with other types of blocks, see Help.",_().MSG_WAV_STATUS_TOOLTIP="WAV status: returns 1/true if a .WAV file is playing, returns 0/false if not.",_().MSG_WAV_VOLUME_TOOLTIP="WAV volume: sets the volume of the WAV player - 0 (quietest) to 10 (loudest).",_().MSG_WAV_STOP_TOOLTIP="WAV stop: Stops the WAV player object, frees up resources on the Propeller.",_().MSG_WAV_SET_PINS_TOOLTIP="WAV set pins: Use only at the beginning of your program to send the WAV file player output to different pins.",_().MSG_BASE_FREQOUT_TOOLTIP="frequency out: sends pulses to the I/O pin at the specified frequency.",_().MSG_SOUND_INIT_TOOLTIP="sound initialize: starts the polyphonic (multi-tone) sound process.",_().MSG_SOUND_PLAY_TOOLTIP="sound play: set or stop the frequency, set the volume, and/or set the waveform of one of the four available channels.",_().MSG_SD_INIT_TOOLTIP="SD card initialize: start the SD card utility.",_().MSG_SD_OPEN_TOOLTIP="SD card open: open or create the specified file on the SD card",_().MSG_SD_READ_TOOLTIP="SD card read: read from, write to, or close the current file on the SD card.",_().MSG_SD_FILE_POINTER_TOOLTIP="SD card file pointer: ",_().MSG_SD_CLOSE_TOOLTIP="Close SD card file.",_().MSG_SERVO_MOVE_TOOLTIP="Standard servo: sets the position of a standard servo connected to the I/O pin.",_().MSG_SERVO_SPEED_TOOLTIP="CR servo speed: sets the speed of a continuous rotation servo connected to the I/O pin.",_().MSG_SERVO_SET_RAMP_TOOLTIP="CR servo set ramp: sets the amount a servo's speed can change each update cycle.",_().MSG_FB360_INIT_TOOLTIP="Feedback 360 servo initialize: sets up the feedback control system for the servo.  Match the signal and feedback pins to the Propeller I/O pin connections.",_().MSG_FB360_SETUP_TOOLTIP="Feedback 360 servo configure: use to set the maximum acceleration or maximum speed of the servo. Specify either the servo's signal or feedback pin.",_().MSG_FB360_SET_TOOLTIP="Feedback 360 servo set: sets the speed, absolute angle (where 0 is the position the servo was initialized in), or relative angle (change from current position). Specify either the servo's signal or feedback pin.",_().MSG_FB360_GET_TOOLTIP="Feedback 360 servo get: retrieves the servo's absolute angle (where 0 is the position the servo was initialized in). Specify either the servo's signal or feedback pin.",_().MSG_FB360_STATUS_TOOLTIP="Feedback 360 servo status: returns whether the FB360 servo is (true) or is not (false) in the state selected in the dropdown.",_().MSG_ROBOT_DRIVE_INIT_TOOLTIP="Robot drive init: set up the Robot's drive system on the Propeller.",_().MSG_ROBOT_DRIVE_DISTANCE_TOOLTIP="Robot drive distance: drives each wheel a specified distance.",_().MSG_ROBOT_RAMPING_TOOLTIP="Robot set acceleration: sets how slowly or quickly the robot is\nable to change its speed.  Higher values allow for faster speed changes.",_().MSG_ROBOT_DISTANCE_MAX_SPEED_TOOLTIP="Robot drive maximum speed: Sets the maximum speed the robot is allowed to drive.",_().MSG_ROBOT_DRIVE_SPEED_TOOLTIP="Robot drive speed: drives each wheel at a specified speed.",_().MSG_ROBOT_DRIVE_STOP_TOOLTIP="Robot drive stop: stops the robot from driving.",_().MSG_ROBOT_GET_TICKS_TOOLTIP="Robot encoder counts: retrieves the current encoder counts and stores them in the specified variables.",_().MSG_ROBOT_ACTIVITYBOT_CALIBRATE_TOOLTIP="ActivityBot calibrate: runs the ActivityBot calibration routine.",_().MSG_ROBOT_ACTIVITYBOT_DISPLAY_CALIBRATION_TOOLTIP="ActivityBot display calibration: displays the calibration results on the terminal.",_().MSG_ROBOT_PARALLAXY_LOAD_TOOLTIP="ActivityBot load firmware: loads the specified pre-written program to the robot.",_().MSG_STRING_TO_NUMBER_TOOLTIP="string to number: convert a number (integer) value to a string.",_().MSG_NUMBER_TO_STRING_TOOLTIP="number to string: convert a string representing a number to an integer.",_().MSG_NUMBER_BINARY_TOOLTIP="binary value: use to enter a binary number.",_().MSG_NUMBER_HEX_TOOLTIP="hexadecimal value: use to enter a hexadecimal number.",_().MSG_CONSTRAIN_VALUE_TOOLTIP="constrain value: prevent a value from being too large or too small.",_().MSG_MAP_VALUE_TOOLTIP="map value: scale a value from one range to a different range.",_().MSG_MATH_ADVANCED_TOOLTIP="advanced math: perform a trigonometric, exponential, or logarithmic function.\nAngles are in degrees.",_().MSG_MATH_INV_TRIG_TOOLTIP="inverse trig: perform an inverse trigonometric function.\nAngles are in degrees.",_().MSG_STRING_SCAN_MULTIPLE_TOOLTIP="scan string: look for and extract values or characters from a string.",_().MSG_STRING_SPLIT_TOOLTIP="split string: use to split up a string separated by the defined character. Use more than once to extract multiple string parts.",_().MSG_STRING_NULL_TOOLTIP="string empty: use to test if a string is null or empty.",_().MSG_STRING_TRIM_TOOLTIP="trim string: remove extra spaces at the beginning and end of a string of text.",_().MSG_STRING_VAR_LENGTH_TOOLTIP="string variable set length: set the size (in characters + 1) of the variables that store text.",_().MSG_STRING_SPRINT_MULTIPLE_TOOLTIP="create string: make a new string from attached values or text.",_().MSG_HEB_BADGE_AXIS_ACCELERATION_TOOLTIP="Accelerometer get: returns acceleration and tilt on one of 3 axes (AX, AY, or AZ) in centigravity (cg) units, which is 100ths of 1 gravity (1 g).",_().MSG_HEB_BADGE_EEPROM_IS_STORED_TOOLTIP="Memory contact: check if a string of text has already been stored in EEPROM memory.",_().MSG_HEB_BADGE_EEPROM_RETRIEVE_TOOLTIP="Memory get contact: retrieve text with a certain index number from EEPROM memory.",_().MSG_HEB_BADGE_EEPROM_STORE_TOOLTIP="Memory store contact: store text up to 128 characters to EEPROM memory.",_().MSG_HEB_BADGE_WAS_SHAKEN_TOOLTIP="Accelerometer shaken: check if accelerometer was shaken within the last half second.",_().MSG_HEB_CLEAR_SCREEN_TOOLTIP="Badge Display clear screen: clears screen by setting all pixels to black.",_().MSG_HEB_COLOR_VAL_TOOLTIP="Badge color value: use with the Badge set RGB-LED block to specify the RGB-LED color.",_().MSG_HEB_COUNT_CONTACTS_TOOLTIP="Memory count contacts: returns how many contacts are currently stored in EEPROM memory.",_().MSG_HEB_SET_FONT_TOOLTIP="Badge Display set font: sets the displayed text to be either large or small.",_().MSG_HEB_CURSOR_POSITION_TOOLTIP="Badge Display set cursor: 0,0 is top-left corner of display.",_().MSG_HEB_ERASE_ALL_CONTACTS_TOOLTIP="Memory erase contacts: erases entire user portion of EEPROM memory by placing 255 in each location.",_().MSG_HEB_IR_CLEAR_BUFFER_TOOLTIP="IR clear buffer: clear the infrared send/receive buffers.",_().MSG_HEB_IR_READ_SIGNAL_TOOLTIP="IR receive message: receive text from another badge.",_().MSG_HEB_IR_SEND_SIGNAL_TOOLTIP="IR send text: send text to another badge.",_().MSG_HEB_OLED_BOX_TOOLTIP="Badge Display draw rectangle: set x,y position of each corner.",_().MSG_HEB_OLED_CIRCLE_TOOLTIP="Badge Display draw circle: x,y of center point, radius, color, fill. ",_().MSG_HEB_OLED_LINE_TOOLTIP="Badge Display draw line: set start and end points; 0,0 is top-left.",_().MSG_HEB_OLED_POINT_TOOLTIP="Badge Display draw point: at x, y from top-left corner.",_().MSG_HEB_OLED_TRIANGLE_TOOLTIP="Badge Display draw triangle: set x,y position of each corner.",_().MSG_HEB_PRINT_MULTIPLE_TOOLTIP="Badge Display print multiple: send attached values or text to the display.",_().MSG_HEB_PRINT_NUMERIC_VAR_TOOLTIP="Badge Display print number: display value as decimal, hex, or binary.",_().MSG_HEB_PRINT_STRING_VAR_TOOLTIP="Badge Display print text: send string to display.",_().MSG_HEB_PWM_LED_TOOLTIP="Badge set LED brightness: set the brightness of the specified LED.",_().MSG_HEB_ROTATE_TOOLTIP="Badge Display rotate: rotate the screen image 180 degrees.",_().MSG_HEB_SET_LED_RGB_TOOLTIP="Badge set RGB-LED: set the specified RGB LED to a specific color.",_().MSG_HEB_TEXT_TO_SPEECH_SAY_TOOLTIP="TTS say: speaks the specified string of text based on what phonemes are used.",_().MSG_HEB_TEXT_TO_SPEECH_SPELL_TOOLTIP="TTS spell: speaks each letter in the specified string of text individually.",_().MSG_HEB_TEXT_TO_SPEECH_PINS_TOOLTIP="TTS set pins: sets the pins used to output text-to-speech. If you do not hear sound when\nusing a speaker on the earphone jack, set the left and right\nto the same pin",_().MSG_HEB_TEXT_TO_SPEECH_VOLUME_TOOLTIP="TTS volume: sets volume of the text-to-speech output (0-quiet/off to 7-loudest).",_().MSG_HEB_TOGGLE_LED_OPEN_TOOLTIP="Badge set LED: turn the specified LED on or off.",_().MSG_HEB_TOGGLE_LED_TOOLTIP="Badge set LED: turn the specified LED on or off.",_().MSG_HEB_TOUCHPAD_SENSITIVITY_TOOLTIP="Touch sensitivity: sets the sensitivity of the touchpads (A & B) on the badge.",_().MSG_HEB_TOUCHPAD_STATUS_TOOLTIP="Button: returns the state of the specified rocker or touchpad button (1) pressed, (0) not pressed. ",_().MSG_HEB_WX_LOCK_TOOLTIP="Badge WiFi Lock: set the badge to allow or prevent itself from being programmed over WiFi.",_().MSG_S3_COMMUNICATE_HELPURL="https://learn.parallax.com/s3-blocks/communicate",_().MSG_S3_CONTROL_HELPURL="https://learn.parallax.com/s3-blocks/control",_().MSG_S3_FACTORY_RESET_HELPURL="https://learn.parallax.com/s3-blocks/factory-reset",_().MSG_S3_FUNCTIONS_HELPURL="https://learn.parallax.com/s3-blocks/functions",_().MSG_S3_LEDS_HELPURL="https://learn.parallax.com/s3-blocks/leds",_().MSG_S3_LIGHT_HELPURL="https://learn.parallax.com/s3-blocks/light",_().MSG_S3_LINE_HELPURL="https://learn.parallax.com/s3-blocks/line",_().MSG_S3_MATH_HELPURL="https://learn.parallax.com/s3-blocks/math",_().MSG_S3_MOTORS_HELPURL="https://learn.parallax.com/s3-blocks/motors",_().MSG_S3_MEMORY_HELPURL="https://learn.parallax.com/s3-blocks/memory",_().MSG_S3_SERVO_HELPURL="https://learn.parallax.com/s3-blocks/servo",_().MSG_S3_OBSTACLE_HELPURL="https://learn.parallax.com/s3-blocks/obstacle",_().MSG_S3_PING_HELPURL="https://learn.parallax.com/s3-blocks/ping",_().MSG_S3_MIC_HELPURL="https://learn.parallax.com/s3-blocks/microphone",_().MSG_S3_SIRC_HELPURL="https://learn.parallax.com/s3-blocks/sirc",_().MSG_S3_RESET_BUTTON_HELPURL="https://learn.parallax.com/s3-blocks/reset-button",_().MSG_S3_SIMPLE_ACTIONS_HELPURL="https://learn.parallax.com/s3-blocks/simple-actions",_().MSG_S3_SIMPLE_CONTROL_HELPURL="https://learn.parallax.com/s3-blocks/simple-control",_().MSG_S3_SIMPLE_SENSORS_HELPURL="https://learn.parallax.com/s3-blocks/simple-sensors",_().MSG_S3_SOUND_HELPURL="https://learn.parallax.com/s3-blocks/sound",_().MSG_S3_STALL_HELPURL="https://learn.parallax.com/s3-blocks/stall",_().MSG_S3_VARIABLES_HELPURL="https://learn.parallax.com/s3-blocks/variables",_().MSG_S3_IO_HELPURL="https://learn.parallax.com/s3-blocks/io",_().MSG_S3_SCRIBBLER_LOOP_TOOLTIP="simple loop: repeats code inside the loop until an exit loop block is used.",_().MSG_S3_SCRIBBLER_LIMITED_LOOP_TOOLTIP="counted loop: repeats code a number of times",_().MSG_S3_SCRIBBLER_EXIT_LOOP_TOOLTIP="exit loop: exits out of a loop that is repeating code",_().MSG_S3_SCRIBBLER_SIMPLE_WAIT_TOOLTIP="simple wait: waits a set amount of time before moving on the to the next block",_().MSG_S3_SCRIBBLER_IF_LINE_TOOLTIP="detect line: detects a line underneath the Scribbler",_().MSG_S3_SCRIBBLER_IF_OBSTACLE_TOOLTIP="detect obstacle: detects if something is in front of the Scribbler",_().MSG_S3_SCRIBBLER_IF_LIGHT_TOOLTIP="detect ambient light: detects a light in front of the Scribbler",_().MSG_S3_SCRIBBLER_IF_STALLED_TOOLTIP="detect stall: detects if the Scribbler's wheels are stuck",_().MSG_S3_SCRIBBLER_IF_RANDOM_TOOLTIP="flip a coin: randomly returns a true or false",_().MSG_S3_SCRIBBLER_DRIVE_TOOLTIP="drive: used to move the Scribbler",_().MSG_S3_SCRIBBLER_SPIN_TOOLTIP="rotate: used to rotate the Scribbler",_().MSG_S3_SCRIBBLER_STOP_TOOLTIP="stop driving: stops the Scribbler's motors",_().MSG_S3_SCRIBBLER_PLAY_TOOLTIP="play note: plays a note using the Scribbler's speaker",_().MSG_S3_SCRIBBLER_LED_TOOLTIP="change LEDs: used to change the LED's on the Scribbler",_().MSG_S3_CONTROLS_REPEAT_TOOLTIP="conditional repeat: forever, x times , until, or while attached condition is true.",_().MSG_S3_CONTROLS_IF_TOOLTIP="if...do: when condition attached is true. Click the gear to add conditions.",_().MSG_S3_SCRIBBLER_WAIT_TOOLTIP="wait: waits a set amount of time before moving on the to the next block",_().MSG_S3_SPIN_COMMENT_TOOLTIP="note: use to add a note to your program.  Does not affect the program.",_().MSG_S3_PROCEDURES_DEFNORETURN_TOOLTIP="define function: group blocks to re-use ending with return; name group.",_().MSG_S3_PROCEDURES_CALLNORETURN_TOOLTIP="return: use in a “define function” block to go back to the main code.",_().MSG_S3_VARIABLES_SET_TOOLTIP="set variable: name and attach initial value block.",_().MSG_S3_VARIABLES_GET_TOOLTIP="use variable: choose set variables from dropdown.",_().MSG_S3_SPIN_INTEGER_TOOLTIP="number value: positive or negative; truncates to integers.",_().MSG_S3_MATH_INT_ANGLE_TOOLTIP="number of degrees: indicate how many degrees (rotation) to turn or move.",_().MSG_S3_SCRIBBLER_BOOLEAN_TOOLTIP="true/false: choose a true or false value",_().MSG_S3_SCRIBBLER_RANDOM_BOOLEAN_TOOLTIP="random true/false: randomly returns a true or false",_().MSG_S3_SCRIBBLER_RANDOM_NUMBER_TOOLTIP="random number: pick random number between the low “from” and high “to” values.",_().MSG_S3_MATH_ARITHMETIC_TOOLTIP="math operation: + addition, - subtraction, x multiplication, / division, or % modulus.",_().MSG_S3_MATH_LIMIT_TOOLTIP="highest/lowest: returns the highest or lowest of the two values inputted",_().MSG_S3_LOGIC_OPERATION_TOOLTIP="boolean comparison: and, or, and not, or not; returns true or false.",_().MSG_S3_LOGIC_NEGATE_TOOLTIP="not: returns false if input is true and true if input is false",_().MSG_S3_LOGIC_COMPARE_TOOLTIP="compare values: boolean comparison returns true or false",_().MSG_S3_LINE_SENSOR_TOOLTIP="line sensor reading: detection of a line by the sensors under the Scribbler",_().MSG_S3_LINE_CALIBRATE_TOOLTIP="line sensor calibrate: Use this block at the top of a line following program.\nSpins the Scribbler robot in place and calibrates the\nline following sensors by scanning the surface beneath it.",_().MSG_S3_OBSTACLE_SENSOR_TOOLTIP="obstacle sensor reading: detection of obstacles from the front sensors",_().MSG_S3_LIGHT_SENSOR_TOOLTIP="light sensor reading: measurements of light from the front sensors",_().MSG_S3_STALL_SENSOR_TOOLTIP="tail wheel stall: returns true of tail wheel is not spinning",_().MSG_S3_SPINNING_SENSOR_TOOLTIP="drive wheel stall: returns true if drive wheels are not spinning but should be",_().MSG_S3_RESET_BUTTON_PRESSES_TOOLTIP="button sensor: returns how many times the reset button was pressed",_().MSG_S3_SCRIBBLER_PING_TOOLTIP="Ping))) distance: measures distances using a Ping))) sensor attached to the hacker port",_().MSG_S3_SCRIBBLER_MIC_TOOLTIP="microphone: returns the volume of sound detected by the microphone as a percentage 0 to 100.",_().MSG_S3_SCRIBBLER_SIRC_TOOLTIP="Sony Remote value: returns button pressed on remote, returns -1 if none.",_().MSG_S3_MOVE_MOTORS_TOOLTIP="motor speed: use to move the Scribbler at specific speeds",_().MSG_S3_MOVE_MOTORS_DISTANCE_TOOLTIP="move distance: use to move the Scribbler specific distances",_().MSG_S3_MOVE_MOTORS_ANGLE_TOOLTIP="rotate by radius: rotates the scribbler by driving it",_().MSG_S3_MOVE_MOTORS_XY_TOOLTIP="move XY: use to move Scribbler to a new XY coordinate.\nChanges in position are relative to the position and\ndirection at the start of your program.\nOnly accurate when all movements are straight lines.",_().MSG_S3_SCRIBBLER_SERVO_TOOLTIP="rotate Servo: turns a servo connected to the hacker port to a position",_().MSG_S3_SCRIBBLER_STOP_SERVO_TOOLTIP="disable Servo: stops sending signals to the connected servo",_().MSG_S3_ANALOG_INPUT_TOOLTIP="analog read pin: Get the voltage input on the specified pin.",_().MSG_S3_DIGITAL_OUTPUT_TOOLTIP="digital set pin: Select I/O pin and setting with menus.",_().MSG_S3_DIGITAL_INPUT_TOOLTIP="digital read pin: Get the state of I/O pin; high = 1, low = 0.",_().MSG_S3_PLAY_POLYPHONY_TOOLTIP="play tone: mix two frequencies set in Hz.",_().MSG_S3_SCRIBBLER_MEMORY_READ_TOOLTIP="memory read: retrieve a value from the specified address (0 to 7936).",_().MSG_S3_SCRIBBLER_MEMORY_WRITE_TOOLTIP="memory write: save a value to the specified address (0 to 7936).  Values stay in memory even after the Scribbler is powered off.",_().MSG_S3_SERIAL_SEND_TEXT_TOOLTIP="send message: send text out from the serial port",_().MSG_S3_SERIAL_SEND_DECIMAL_TOOLTIP="send number: send a number out from the serial port",_().MSG_S3_SERIAL_SEND_CHAR_TOOLTIP="send character: send a character out from the serial port",_().MSG_S3_SERIAL_SEND_CTRL_TOOLTIP="send control character: send a special character out from the serial port",_().MSG_S3_SERIAL_CURSOR_XY_TOOLTIP="set cursor position: set the cursor position in the terminal",_().MSG_S3_SERIAL_RX_BYTE_TOOLTIP="receive character: receive a character from the serial port",_().MSG_S3_FACTORY_RESET_TOOLTIP="factory reset: use to reload the factory default demo program back onto the Scribbler",_().MSG_S3_ERROR_NO_WAS_CONDITION='WARNING: "was" ans "was not" conditions have been deprecated.\nPlease choose "is" or "is not".\nUse a variable block to keep track of the state of this sensor instead.';const M='<xml xmlns="https://developers.google.com/blockly/xml">';let D=null,v=null;function B(){D=null}function G(){return D}function w(e){return e instanceof U?(e!==D&&(D=e,v=e.boardType),D):null}function x(){return v}class U{constructor(e,t,n,i,o,s,l,r,a=!1,p="1",c=""){if(D||(D=this),this.name=e||"",this.description=t||"",n&&"object"==typeof n&&n.name?"activity-board"===n.name?this.boardType=W.activityboard:"heb-wx"===n.name?this.boardType=W.hebwx:this.boardType=n:(console.warn("Unknown board type received on object initialization."),this.boardType=W.unknown),this.projectType=i?H[i]:H.UNKNOWN,this.code=o&&o.length>0?o:M+"</xml>",!(s instanceof Date))throw Error("Project created on parameter must be a Date object");this.created=s,this.modified=l,this.timestamp=r,0===c.length&&console.log("Generating a new project uuid."),this.uuid=c.length>0?c:this.createUUID(),this.version=""===p?"1":p,this.id=0,this.descriptionHtml=t,this.private=!0,this.shared=!1,this.user="offline",this.yours=!0,this.saveTimer=null,a&&(this.projectData=this.getDetails())}getCreated(){return this.created}setCreated(e){if(!(e instanceof Date))throw Error(`Cannot set Project created on date with "${e}`);return this.created=e,e}getBoardName(){return this.boardType.name}getDetails(){return{id:this.id,board:this.boardType.name,type:this.projectType,name:this.name,description:this.description,"description-html":this.descriptionHtml,code:this.code,created:this.created,modified:this.modified,private:this.private,shared:this.shared,user:this.user,yours:this.yours,timestamp:this.timestamp,uuid:this.uuid,version:this.version}}isTimerSet(){return null!==this.saveTimer}setCode(e){this.code=e}setBoardType(e){e&&this.boardType.name.toUpperCase()!==e.toUpperCase()&&(this.boardType=U.convertBoardType(e))}setCodeWithNamespace(e){this.code=M+e+"</xml>"}stashProject(e){window.localStorage.setItem(e,JSON.stringify(this.getDetails()))}createUUID(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}static getEmptyProjectCodeHeader(){return M}static getTerminatedEmptyProjectCodeHeader(){return'<xml xmlns="https://developers.google.com/blockly/xml"/>'}static getTerminatedEmptyProjectCodeHeaderV2(){return'<xml xmlns="https://developers.google.com/blockly/xml"></xml>'}static convertBoardType(e){switch(e){case W.activityboard.name:return W.activityboard;case W.hebwx.name:return W.hebwx;case W.heb.name:return W.heb;case W.s3.name:return W.s3;case W.flip.name:return W.flip;case W.propcfile.name:return W.propcfile;case W.other.name:return W.other;default:return W.unknown}}static compare(e,t){return!!e&&(!!t&&(e.name===t.name&&(e.description===t.description&&e.code===t.code)))}static testProjectEquality(e,t){let n=!0;return e||(console.log("Project A is empty"),n=!1),t||(console.log("Project B is empty"),n=!1),e.name||(console.log("Project-A name is missing."),n=!1),t.name||(console.log("Project-B name is missing."),n=!1),e.name!==t.name&&(console.log("Project name A: %s Does not match B: %s",e.name,t.name),n=!1),e.description&&t.description||(console.log("Project description is undefined."),n=!1),e.description!==t.description&&(console.log("Project description mismatch"),n=!1),e.type!==t.type&&(console.log("ProjectType mismatch"),n=!1),e.board!==t.board&&(console.log("Board type mismatch"),n=!1),e.code!==t.code&&(console.log("Code segment mismatch"),n=!1),e.created!==t.created&&(console.log("Project created timestamp mismatch"),n=!1),e.modified!==t.modified&&(console.log("Project last modified timestamp mismatch"),n=!1),e.descriptionHtml!==t.descriptionHtml&&(console.log("Project HTML description mismatch"),n=!1),e.id!==t.id&&(console.log("Project A is not the same object as project B"),n=!1),n}static getProjectState(){return D}}function V(e){const t=new Date;let n;n=e&&e.board?U.convertBoardType(e.board):U.convertBoardType(e.boardType.name),void 0===n&&console.log("Unknown board type: %s",e.boardType.name);let i=t;return"number"==typeof e.created?i.setTime(e.created):i=e.created instanceof Date?e.created:new Date(e.created),new U(e.name,e.description,n,H.PROPC,e.code,i,e.modified&&e.modified.length>0?Date.parse(e.modified):t,t.getTime(),!1,e.version,e.uuid)}U.prototype.EmptyProjectCodeHeader_V0='<xml xmlns="http://www.w3.org/1999/xhtml">',U.prototype.setProjectTimer=function(e){this.saveTimer=e},U.prototype.resetProjectTimer=function(){this.saveTimer&&(console.log("Resetting the project save timer"),this.saveTimer.reset())},U.prototype.getProjectTimeSinceLastSave=function(){return this.saveTimer?this.saveTimer.getTimeSinceLastSave():(L("Called TimeSinceLastSave but there is no active timer"),0)},U.prototype.getProjectTimerEpoch=function(){return this.saveTimer.getEpochTime()};const H={PROPC:"PROPC",UNKNOWN:"UNKNOWN"},W={activityboard:{name:"activity-board",description:"Propeller Activity Board",digital:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14","14"],["15","15"],["16","16"],["17","17"],["26","26"],["27","27"]],analog:[["A0","0"],["A1","1"],["A2","2"],["A3","3"]],earphone_jack:"26, 27",earphone_jack_inverted:"-1, 27",sd_card:"22, 23, 24, 25",baudrate:115200,contiguous_pins_start:0,contiguous_pins_end:17,saves_to:[["Propeller Activity Board","activity-board"],["Propeller FLiP or Project Board","flip"],["Other Propeller Boards","other"]]},flip:{name:"flip",description:"Propeller FLiP or Project Board",digital:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14","14"],["15","15"],["16","16"],["17","17"],["18","18"],["19","19"],["20","20"],["21","21"],["22","22"],["23","23"],["24","24"],["25","25"],["26","26"],["27","27"]],analog:[],baudrate:115200,contiguous_pins_start:0,contiguous_pins_end:27,saves_to:[["Propeller FLiP or Project Board","flip"],["Propeller Activity Board","activity-board"],["Other Propeller Boards","other"]]},heb:{name:"heb",description:"Hackable Electronic Badge",digital:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"]],earphone_jack:"9, 10",earphone_jack_inverted:"-1, 10",analog:[],baudrate:115200,contiguous_pins_start:0,contiguous_pins_end:11,saves_to:[["Hackable Electronic Badge","heb"],["Badge WX","heb-wx"]]},hebwx:{name:"heb-wx",description:"Badge WX",digital:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"]],analog:[],earphone_jack:"0, 1",earphone_jack_inverted:"-1, 1",sd_card:"8, 7, 6, 5",baudrate:115200,contiguous_pins_start:0,contiguous_pins_end:11,saves_to:[["Hackable Electronic Badge","heb"],["Badge WX","heb-wx"]]},other:{name:"other",description:"Other Propeller Boards",digital:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14","14"],["15","15"],["16","16"],["17","17"],["18","18"],["19","19"],["20","20"],["21","21"],["22","22"],["23","23"],["24","24"],["25","25"],["26","26"],["27","27"],["28","28"],["29","29"],["30","30"],["31","31"]],analog:[],baudrate:115200,contiguous_pins_start:0,contiguous_pins_end:27,saves_to:[["Other Propeller Boards","other"],["Propeller Activity Board","activity-board"],["Propeller FLiP or Project Board","flip"]]},propcfile:{name:"propcfile",description:"Propeller C (code-only)",digital:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14","14"],["15","15"],["16","16"],["17","17"],["18","18"],["19","19"],["20","20"],["21","21"],["22","22"],["23","23"],["24","24"],["25","25"],["26","26"],["27","27"],["28","28"],["29","29"],["30","30"],["31","31"]],analog:[],baudrate:115200,contiguous_pins_start:0,contiguous_pins_end:27,saves_to:[]},s3:{name:"s3",description:"Scribbler Robot",digital:[["P0","0"],["P1","1"],["P2","2"],["P3","3"],["P4","4"],["P5","5"]],analog:[["A0","0"],["A1","1"]],baudrate:9600,contiguous_pins_start:0,contiguous_pins_end:5,saves_to:[["Scribbler Robot","s3"]]},unknown:{name:"unknown",description:"Board type is unknown",digital:[["P0","0"]],analog:[["A0","0"]],baudrate:115200,saves_to:[]}};U.aBoardType;_().propc=new(_().Generator)("propc"),_().HSV_SATURATION=.75,_().HSV_VALUE=.6,_().RTL=!1;const X={defaultColors:{deprecated:60,input:140,output:165,io:185,programming:205,functions:225,variables:250,math:275,binary:275,robot:295,heb:295,ab:320,protocols:340,system:320},grayscaleColors:{deprecated:"#a85c39",input:"#AAAAAA",output:"#222222",io:"#333333",programming:"#444444",functions:"#555555",variables:"#666666",math:"#777777",binary:"#777777",robot:"#888888",heb:"#888888",ab:"#999999",protocols:"#111111",system:"#999999"},activePalette:null,getColor:function(e){return X.activePalette&&void 0!==X.activePalette[e]?X.activePalette[e]:"#000000"}};-1===document.referrer.indexOf("?")||-1===document.referrer.split("?")[1].indexOf("grayscale=1")?X.activePalette=X.defaultColors:X.activePalette=X.grayscaleColors,_().propc.addReservedWords("INA,INB,OUTA,OUTB,DIRA,DIRB,CTRA,CTRB,PHSA,PHSB,CNT,CLKFREQ,"),_().propc.addReservedWords("auto,else,long,switch,break,enum,register,typedef,case,extern,return,union,char,float,short,unsigned,const,for,signed,void,continue,goto,sizeof,volatile,default,if,static,while,do,int,struct,"),_().propc.addReservedWords("_Packed,double,_bss_end,_bss_start,_byteReadyFlag,_byteToSend,_byteType,_C_LOCK,_clkfreq,_clkmodeval,_CLZSI,_CLZSI_ret,_cs,_doscanf,_doscanf_ct,_dosprnt,_driverlist,_FileDriver,_font,_gps_baud,_gps_rx_pin,_gps_tx_pin,_height,_hub_end,_intsprnt,_LMM_CALL_INDIRECT,_LMM_FCACHE_START,_LMM_RET,_load_start_adcACpropab_cog,_MASK_0000FFFF,_MASK_FFFFFFFF,_MULSI,_MULSI_ret,_rs,_rst,_safe_gets,_scanf_getf,_scanf_getl,_sclk,_screenLock,_servoPulseReps,_sid,_SimpleSerialDriver,_stack_end,_TMP0,_width,(float,int, long long, short, float, short, int),abd_abs,abd_blockGoto,"),_().propc.addReservedWords("abd_checkActivityBotStrings,abd_checkCenterPulseWidth,abd_checkForNoSignal,abd_checkForSwappedCables,abd_checkServoCalSupply,abd_cntrIdx,abd_cog,abd_dc,abd_dca,abd_displaySide,abd_dist,abd_distError,abd_ditherA,abd_ditherAa,abd_ditherAd,abd_ditherAp,abd_ditherV,abd_ditherVa,abd_ditherVd,abd_ditherVp,abd_dsr,abd_dvFlag,abd_ea,abd_ed,abd_edMax,abd_eeAddr,abd_elCnt,abd_encoders,abd_ePin,abd_ePinL,abd_ePinR,abd_gotoFlag,abd_gotoRampStep,abd_gotoSpeedLimit,abd_i,abd_intTabSetup,abd_nudgeCtr,abd_nudgeInc,abd_p,abd_rampStep,abd_record,abd_sample,abd_sampleCount,abd_senseEncoders,abd_spdmL,abd_spdmR,abd_spdrL,abd_spdrR,abd_speed,abd_speedd,abd_speedi,abd_speedLimit,abd_speedOld,abd_speedT,abd_sPin,abd_sPinL,abd_sPinR,abd_stack,abd_stopCtr,abd_stopPulseReps,abd_td,abd_tdst,abd_ticks,abd_ticksf,abd_ticksGuard,abd_ticksi,abd_trimB,abd_trimF,abd_trimticksB,abd_trimticksF,abd_us,abd_zdir,abd_zeroDelay,"),_().propc.addReservedWords("abort,abortChain__,abvolts_daCtrBits,abvolts_scale,accel,accel_shaken,accels,ad_in,ad_init,ad_volts,adc_in,adc_init,adc_start,adc_stop,adc_volts,adc124S021dc,adcACpropab_code,add_driver,AR,ard_blockGoto,ard_blockSpeed,ard_blockSpeedPrev,ard_cycles,ard_deadZone,ard_dhb10_arlo,ard_dhb10_terminal,ard_feedback,ard_gotoDoneReps,ard_increment,ard_mode,ard_offset,ard_opened,ard_ramp_interval,ard_rampStep,ard_rampStepMode,ard_replyMode,ard_servo_pin_L,ard_servo_pin_R,ard_speedAccLim,ard_speedL,ard_speedLimit,ard_speedR,ard_tRampStepPrev,asin,atan2,atof,atoi,audio_dac,audio0,badge_setup,badgeLight,badgeScreen,binary_audiosynth_dat_end,binary_audiosynth_dat_size,binary_audiosynth_dat_start,binary_pst_dat_end,binary_pst_dat_size,binary_pst_dat_start,binary_VGA_dat_end,binary_VGA_dat_size,binary_VGA_dat_start,binary_ws2812_driver_dat_end,binary_ws2812_driver_dat_size,"),_().propc.addReservedWords("binary_ws2812_driver_dat_start,BOTTOM,box,boxFilled,bt_accelInitFlag,button,buttons,cal_activityBot,cal_drive_display,cal_drive_pins,cal_drive_setramp,cal_drive_sleep,cal_drive_speeds,cal_drive_stop,cal_encoderPins,cal_encoders,cal_servoPins,CFG,circle,circleFilled,clear,clear_bit,cog_end,cog_endStackTest,cog_num,cog_run,cog_runStackTest,cogIRcom,cogstart,cogstart_stackTest,cogstop_stackTest,colorPal_close,colorPal_getRGB,colorPal_init,colorPal_open,colorPal_reset,colorPalRRGGBB,compareRRGGBB,compass_init,compass_read,ComputeOutCode,constrain,contacts_count,contacts_displayAll,contacts_eraseAll,contacts_setStartAddr,count,cpcog,cursor,cursor_x,cursor_y,da_ctr_cog,da_ctr_stop,da_init,da_out,da_res,da_setupScale,da_useScale,da_volts,dac_close,dac_ctr,dac_ctr_cog,dac_ctr_res,dac_ctr_stop,dac_loop,dac_set,dac_setup,dac_start,dac_stop,dev_ee_show,dfs_mount,dhb10_com,dhb10_reply,dhb10_terminal,dport_ptr,dprint,dprinti,"),_().propc.addReservedWords("drive_calibrationResults,drive_clearTicks,drive_close,drive_com,drive_displayInterpolation,drive_encoderPins,drive_feedback,drive_getSpeed,drive_getTicks,drive_getTicksCalc,drive_goto,drive_gotoBlocking,drive_gotoDoneDelay,drive_gotoMode,drive_gotoStatus,drive_open,drive_pins,drive_ramp,drive_rampStep,drive_servoPins,drive_setAcceleration,drive_setErrorLimit,drive_setMaxSpeed,drive_setMaxVelocity,drive_setramp,drive_setRampStep,drive_sleep,drive_speed,drive_speedBlocking,drive_speeds,drive_stop,DRIVER_LIST_SIZE,dscan,dt_end,dt_fromDateStr,dt_fromEt,dt_fromTimeStr,dt_get,dt_getms,dt_run,dt_set,dt_toDateStr,dt_toEt,dt_toTimeStr,dte_dateETV,dte_timeETV,dte_toCal,dte_toJD,dte_toSPD,ee_badgeCheck,ee_config,ee_displayIndex,ee_getByte,ee_getFloat32,ee_getInt,ee_getStr,ee_init,ee_putByte,ee_putFloat32,ee_putInt,ee_putStr,ee_readByte,ee_readFloat32,ee_readInt,ee_readShort,ee_readStr,ee_writeByte,ee_writeFloat32,"),_().propc.addReservedWords("ee_writeInt,ee_writeShort,ee_writeStr,eeBadgeOk,eeBus,eeHome,eei2cLock,eei2cLockFlag,eeNext,eeNextAddr,eeprint,eeprinted,eeRecCount,eeRecHome,eeRecOffice,eeRecs,eeRecsAddr,eescan,encoderFeedback,encoderLeds_start,encoderLeds_stop,endianSwap,fclose,fdserial_close,fdserial_open,fdserial_rxChar,fdserial_rxCheck,fdserial_rxCount,fdserial_rxFlush,fdserial_rxPeek,fdserial_rxReady,fdserial_rxTime,fdserial_txChar,fdserial_txEmpty,fdserial_txFlush,fingerprint_add,fingerprint_allowOverwrite,fingerprint_close,fingerprint_countUsers,fingerprint_deleteUser,fingerprint_lookupUserPrivlage,fingerprint_open,fingerprint_readResponse,fingerprint_scan,fingerprint_sendCommand,fingerprint_setStrictness,fingerprint_setTimeout,float2string,font_lg_bubble_data,font_lg_bubble_index,font_lg_bubble_zeroMap,font_lg_sans_data,font_lg_sans_index,font_lg_sans_zeroMap,font_lg_script_data,font_lg_script_index,font_lg_script_zeroMap,"),_().propc.addReservedWords("font_lg_serif_data,font_lg_serif_index,font_lg_serif_zeroMap,font_med_bubble_data,font_med_sans_data_01,font_med_sans_data_02,font_med_sans_data_03,font_med_sans_data_04,font_med_sans_data_05,font_med_sans_data_06,font_med_sans_data_07,font_med_sans_data_08,font_med_sans_data_09,font_med_sans_data_10,font_med_sans_data_11,font_med_sans_data_12,font_med_sans_data_13,font_med_sans_data_14,font_med_sans_data_15,font_med_sans_data_16,font_med_sans_data_17,font_med_script_data,font_med_serif_data,fopen,fp,fread,free,freqout,get_bit,get_direction,get_directions,get_output,get_outputs,get_state,get_states,get8bitColor,getBin,getChar,getColorRRGGBB,getDec,getFloat,getHex,getStr,gps_altitude,gps_changeBaud,gps_close,gps_cog,gps_data,gps_fix,gps_fixValid,gps_heading,gps_latitude,gps_longitude,gps_magneticVariation,gps_open,gps_rawDate,gps_rawTime,gps_run,gps_satsTracked,gps_ser,gps_stack,gps_stopping,gps_txByte,gps_velocity,"),_().propc.addReservedWords("greypalette,gVgaScreen,gVgaText,hdserial,high,HSA,HSB,i2c_busy,i2c_in,i2c_newbus,i2c_open,i2c_out,i2c_poll,i2c_readByte,i2c_readData,i2c_start,i2c_stop,i2c_writeByte,i2c_writeData,i2cLock,imu_accelAvailable,imu_calibrateAG,imu_calibrateMag,imu_clearAccelInterrupt,imu_clearGyroInterrupt,imu_clearMagInterrupt,imu_getAccelCalibration,imu_getAccelScale,imu_getGyroCalibration,imu_getGyroScale,imu_getMagCalibration,imu_getMagScale,imu_gyroAvailable,imu_init,imu_magAvailable,imu_readAccel,imu_readAccelCalculated,imu_readGyro,imu_readGyroCalculated,imu_readMag,imu_readMagCalculated,imu_readTemp,imu_readTempCalculated,imu_setAccelCalibration,imu_setAccelInterrupt,imu_setAccelScale,imu_setGyroCalibration,imu_setGyroInterrupt,imu_setGyroScale,imu_setMagCalibration,imu_setMagInterrupt,imu_setMagScale,imu_SPIreadBytes,imu_SPIwriteByte,imu_tempAvailable,inbox,inBuff,init_MMA7660FC,input,INSIDE,int_fraction,interpolate2,"),_().propc.addReservedWords("interpolation_table_setup,invert,ir_receive,ir_send,IRA,IRB,irclear,ircom_dec,ircom_hex,ircom_rjdec,ircom_rx,ircom_rxcheck,ircom_rxflush,ircom_rxtime,ircom_start,ircom_stop,ircom_str,ircom_tx,ircom_tx_bin,ircom_txflush,irprint,irscan,irself,keypad_getNumber,keypad_getNumberEndKey,keypad_read,keypad_readFrom,keypad_setup,led,led_off,led_on,leddat,leds,ledsself,LEFT,letter,light_clear,light_set_all,light_set_rgb,light_set_rgb1,light_set_rgb2,light_start,light_stop,line,longjmp,low,main_ret,malloc,map,mark,memcpy,memmove,memset,MMA7455_getMode,MMA7455_getxyz10,MMA7455_getxyz8,MMA7455_gRange,MMA7455_gRangeVal,MMA7455_init,MMA7455_pinClk,MMA7455_pinDat,MMA7455_pinEn,MMA7455_readByte,MMA7455_setMode,MMA7455_setOffsetX,MMA7455_setOffsetY,MMA7455_setOffsetZ,MMA7455_writeByte,ms,ms_timer,mstime_get,mstime_reset,mstime_set,mstime_start,mstime_stop,mx_accel,mx_rotate,mx_tilt,NA,NB,NT"),_().propc.addReservedWords("oledc_bitmap,oledc_clear,oledc_color565,oledc_copy,oledc_drawCharLarge,oledc_drawCharMedium,oledc_drawCharSmall,oledc_drawCircle,oledc_drawCircleHelper,oledc_drawFastHLine,oledc_drawFastVLine,oledc_drawLine,oledc_drawLinePrimative,oledc_drawNumber,oledc_drawPixel,oledc_drawPixelPrimative,oledc_drawRect,oledc_drawRoundRect,oledc_drawText,oledc_drawTriangle,oledc_fillCircle,oledc_fillCircleHelper,oledc_fillRect,oledc_fillRectPrimative,oledc_fillRoundRect,oledc_fillTriangle,oledc_font_sm,oledc_fontLoader,oledc_getCursorX,oledc_getCursorY,oledc_getHeight,oledc_getRotation,oledc_getWidth,oledc_goTo,oledc_init,oledc_invertDisplay,oledc_isScrolling,oledc_print,oledc_screenLock,oledc_screenLockClr,oledc_screenLockSet,oledc_scrollStart,oledc_scrollStop,oledc_setCursor,oledc_setRotation,oledc_setTextColor,oledc_setTextFont,oledc_setTextSize,oledc_setTextWrap,oledc_sleep,oledc_spiWrite,oledc_startup,oledc_wake,oledc_write,oledc_writeCommand,oleddat,oledprint"),_().propc.addReservedWords("ParseGGA,ParseRMC,pause,ping,ping_cm,ping_inches,point,PrepBuff,print,printi,printNumber,ptrBuff,pulse_in,pulse_out,putBin,putBinLen,putChar,putDec,putDecLen,putFloat,putFloatPrecision,putHex,putHexLen,putLine,putln,putStr,putStrLen,pw,pwL,pwm_set,pwm_start,pwm_stop,pwR,r,rand,raw2g100,rc_time,readBin,readChar,readDec,readFloat,readHex,readStr,receive,remainder,remapColor,replace_byte,retrieve,reverse,rfid_disable,rfid_enable,rfid_get,rfid_open,rfid_reset,rfidser_close,rgb,rgbs,RIGHT,rotate180,RQA,RQB"),_().propc.addReservedWords("S3,s3_booleanRandom,s3_buttonCount,s3_buttonPressed,s3_enableMic,s3_lightSensor,s3_lineSensor,s3_motorSet,s3_motorSetDistance,s3_motorSetRotate,s3_motorsMoving,s3_ping,s3_playNote,s3_randomRange,s3_readBars,s3_readMic,s3_readObstacle,s3_resetButtonCount,s3_runWithoutResult,s3_setLED,s3_setup,s3_setVoices,s3_setVolume,s3_simpleButton,s3_simpleDrive,s3_simpleLight,s3_simpleLine,s3_simpleObstacle,s3_simplePlay,s3_simpleRandom,s3_simpleSpin,s3_simpleStalled,s3_simpleStop,s3_stalled,scan"),_().propc.addReservedWords("SCL,screen_auto,screen_char32x16,screen_char7x5,screen_dataAddr,screen_getAuto,screen_getBuffer,screen_GetDisplayHeight,screen_GetDisplayType,screen_GetDisplayWidth,screen_getSplash,screen_HIGH,screen_image,screen_init,screen_LOW,screen_scrollLeft,screen_scrollLeftDiag,screen_scrollRight,screen_scrollRightDiag,screen_scrollStop,screen_setcommand,screen_SHIFTOUT,screen_ssd1306_Command,screen_ssd1306_Data,screen_start,screen_stop,screen_string16x4,screen_string8x1,screen_string8x2,screen_swap,"),_().propc.addReservedWords("screen_update,screen_WRITEBUFF,screenLock,scribbler_align_with,scribbler_arc,scribbler_arc_by,scribbler_arc_deg,scribbler_arc_deg_now,scribbler_arc_now,scribbler_arc_to,scribbler_beep,scribbler_begin_path,scribbler_button_count,scribbler_button_mode,scribbler_button_press,scribbler_command_tone,scribbler_default_light_calibration,scribbler_default_line_threshold,scribbler_default_obstacle_threshold,scribbler_default_wheel_calibration,scribbler_delay_tenths,scribbler_ee_read_byte,scribbler_ee_write_byte,scribbler_end_path,scribbler_get_adc_results,scribbler_get_charging,scribbler_get_light_calibration,scribbler_get_line_threshold,scribbler_get_mic_env,scribbler_get_model_s2,scribbler_get_model_s3,scribbler_get_obstacle_threshold,scribbler_get_results,scribbler_get_sync,scribbler_get_timer,scribbler_get_usb_powered"),_().propc.addReservedWords("scribbler_get_wheel_calibration,scribbler_go_back,scribbler_go_forward,scribbler_go_left,scribbler_go_right,scribbler_heading_is,scribbler_heading_is_deg,scribbler_here_is,scribbler_light_sensor,scribbler_light_sensor_log,scribbler_light_sensor_raw,scribbler_light_sensor_word,scribbler_line_sensor,scribbler_motion,scribbler_motion_addr,scribbler_move,scribbler_move_by,scribbler_move_now,scribbler_move_ready,scribbler_move_to,scribbler_moving,scribbler_obstacle,scribbler_play_pause,scribbler_play_sync,scribbler_play_tone,scribbler_play_tones,scribbler_read_light_calibration,scribbler_read_line_threshold,scribbler_read_obstacle_threshold,scribbler_read_wheel_calibration,scribbler_reset_button_count,scribbler_run_motors,scribbler_set_led,scribbler_set_leds,scribbler_set_light_calibration"),_().propc.addReservedWords("scribbler_set_line_threshold,scribbler_set_obstacle_threshold,scribbler_set_power_off,scribbler_set_speed,scribbler_set_voices,scribbler_set_volume,scribbler_set_wheel_calibration,scribbler_stalled,scribbler_start,scribbler_start_mic_env,scribbler_start_motors,scribbler_start_timer,scribbler_start_tones,scribbler_stop_all,scribbler_stop_now,scribbler_turn,scribbler_turn_by,scribbler_turn_by_deg,scribbler_turn_deg,scribbler_turn_deg_now,scribbler_turn_now,scribbler_turn_to,scribbler_turn_to_deg,scribbler_wait_stop,scribbler_wait_sync,scribbler_wheels_now,scribbler_write_light_calibration,scribbler_write_line_threshold,scribbler_write_obstacle_threshold,scribbler_write_wheel_calibration"),_().propc.addReservedWords("sd_mount,sleep,secondctr,self,send,serial_close,serial_open,serial_rxChar,serial_txChar,servo_angle,servo_disable,servo_get,servo_set,servo_setramp,servo_speed,servo_stop,servoAux_angle,servoAux_get,servoAux_set,servoAux_setRamp,servoAux_speed,servoAux_stop,set_1_blue,set_1_rgb,set_bit,set_direction,set_directions,set_drive_speed,set_io_dt,set_io_timeout,set_output,set_outputs,set_pause_dt,shape,shift_in,shift_out,sign"),_().propc.addReservedWords("simpleterm_close,simpleterm_fromTxDo,simpleterm_open,simpleterm_pointer,simpleterm_reopen,simpleterm_toRxDi,sirc_button,sirc_code,sirc_device,sirc_setTimeout,sound_adsr,sound_config,sound_end,sound_endAllSound,sound_endSound,sound_envelopeSet,sound_envelopeStart,sound_freq,sound_freqRaw,sound_loadPatch,sound_note,sound_param,sound_playChords,sound_playSound,sound_run,sound_sampleSet,sound_volume,sound_wave,soundImpact,soundImpact_end,soundImpact_getCount,soundImpact_run,spdL,spdR,speedPrev,sprint,sprinti,SPUTC,SPUTL,SPUTS,square_wave,square_wave_cog,square_wave_setup,square_wave_stop,srand,sscan,sscan_ct,st_buscnt,st_eeInitFlag,st_eeprom,st_iodt,st_mark,st_msTicks,st_pauseTicks,st_timeout,st_usTicks,store,stored,strcmp,strcpy,string,string2float,stringView,strlen,strncmp,strstr,strtok,talk_end,talk_run,talk_say,talk_set_speaker,talk_spell,tcL,tcR,term,term_cmd,text_size,textbgcolor,textcolor,textsize,TFTINVERTED,TFTROTATION,TFTSCROLLING"),_().propc.addReservedWords("ticksL,ticksR,timeout,timeTicksSetup,toggle,TOP,touch_start,TPCount,TPDischarge,TPPins,TRA,track,TRB,triangle,triangleFilled,us,UTA,UTB,vgatext_clear,vgatext_clearEOL,vgatext_close,vgatext_getColors,vgatext_getColumns,vgatext_getRows,vgatext_getX,vgatext_getY,vgatext_home,vgatext_open,vgatext_out,vgatext_putchar,vgatext_setColorPalette,vgatext_setColors,vgatext_setCoordPosition,vgatext_setX,vgatext_setXY,vgatext_setY,vgatext_start,vgatext_stop,VocalTract_aural_id,VocalTract_empty,VocalTract_full,VocalTract_go,VocalTract_sample_ptr,VocalTract_set_attenuation,VocalTract_set_pace,VocalTract_start,VocalTract_stop,wait,wav_close,wav_play,wav_playing,wav_reader,wav_stop,wav_volume,wavDacBufferH,wavDacBufferL,wifi_baud,wifi_buf,wifi_buf_size,wifi_bufferSize,wifi_command,wifi_comSelect,wifi_comSelectPin,wifi_connect,wifi_disconnect,wifi_event,wifi_fds,wifi_handle,wifi_id,wifi_ip,wifi_ipAddr,wifi_join,wifi_leave"),_().propc.addReservedWords("wifi_listen,wifi_mode,wifi_msReplyTimeout,wifi_pin_di,wifi_pin_do,wifi_poll,wifi_print,wifi_recv,wifi_replyStringCopy,wifi_replyStringDisplay,wifi_replyStringIn,wifi_scan,wifi_send,wifi_setBuffer,wifi_simpletermResume,wifi_simpletermSuspend,wifi_start,wifi_stationIp,wifi_status,wifi_stop,wifi_stringDisplay,wifi_timeoutFlag,wrap,writeBin,writeBinLen,writeChar,writeDec,writeDecLen,writeFloat,writeFloatPrecision,writeHex,writeHexLen,writeLine,writeStr,writeStrLen,ws_start,ws2812_close,ws2812_open,ws2812_set,ws2812_start,ws2812_stop,ws2812_wheel,ws2812_wheel_dim,ws2812b_open,ws2812b_start"),_().propc.addReservedWords("fp,fclose,fopen,fread,fseek,ftell,fwrite,sd_init,sd_mount,"),_().propc.ORDER_ATOMIC=0,_().propc.ORDER_UNARY_POSTFIX=1,_().propc.ORDER_UNARY_PREFIX=2,_().propc.ORDER_MULTIPLICATIVE=3,_().propc.ORDER_ADDITIVE=4,_().propc.ORDER_SHIFT=5,_().propc.ORDER_RELATIONAL=7,_().propc.ORDER_EQUALITY=8,_().propc.ORDER_BITWISE_AND=9,_().propc.ORDER_BITWISE_XOR=10,_().propc.ORDER_BITWISE_OR=11,_().propc.ORDER_LOGICAL_AND=12,_().propc.ORDER_LOGICAL_OR=13,_().propc.ORDER_CONDITIONAL=14,_().propc.ORDER_ASSIGNMENT=15,_().propc.ORDER_NONE=99,_().propc.init=function(e){const t=x();if(_().propc.definitions_=[],_().propc.definitions_["include simpletools"]='#include "simpletools.h"',_().propc.methods_={},_().propc.setups_={},_().propc.method_declarations_={},_().propc.global_vars_={},_().propc.cog_methods_={},_().propc.cog_setups_={},_().propc.stacks_=[],_().propc.vartype_={},_().propc.varlength_={},_().propc.string_var_lengths=[],"Scribbler Robot"===t.description?_().propc.definitions_.include_scribbler='#include "s3.h"':"Hackable Electronic Badge"===t.description?(_().propc.definitions_.badgetools='#include "badgetools.h"',_().propc.setups_.badgetools="badge_setup();"):"Badge WX"===t.description&&(_().propc.definitions_.badgetools='#include "badgewxtools.h"',_().propc.setups_.badgetools="badge_setup();"),_().Variables){_().propc.variableDB_?_().propc.variableDB_.reset():_().propc.variableDB_=new(_().Names)(_().propc.RESERVED_WORDS_),_().propc.variableDB_.setVariableMap(e.getVariableMap());const t=[],n=_().Variables.allUsedVarModels(e);for(let e=0;e<n.length;e++){const i=_().propc.variableDB_.getName(n[e].getId(),_().VARIABLE_CATEGORY_NAME);t[e]="{{$var_type_"+i+"}} "+i+"{{$var_length_"+i+"}};",_().propc.definitions_["variable"+e.toString(10)]=t[e]}}},_().propc.finish=function(e){const t=x(),n=[],i=[],o=[],s=[],l=[],r=[],a=[],p=[];for(const e in _().propc.global_vars_)if(Object.prototype.hasOwnProperty.call(_().propc.global_vars_,e)){const t=_().propc.global_vars_[e];l.push(t),r.push(e)}for(const e in _().propc.definitions_)if(Object.prototype.hasOwnProperty.call(_().propc.definitions_,e)){const t=_().propc.definitions_[e];t.match(/^#include/)||t.match(/^#define/)||t.match(/^#if/)||t.match(/^#end/)||t.match(/^#else/)||t.match(/^#pragma/)?n.push(t):t.match(/\/\/ GRAPH_[A-Z]*_START:/)?o.push(t):(l.push(t),r.push(e))}for(const e in _().propc.method_declarations_)if(Object.prototype.hasOwnProperty.call(_().propc.method_declarations_,e)){s.push(_().propc.method_declarations_[e]);for(const t in _().propc.cog_methods_)_().propc.cog_methods_[t].replace(/[^\w]+/g,"")===_().propc.method_declarations_[e].replace(/void/g,"").replace(/[^\w]+/g,"")&&p.push(e)}for(const e in _().propc.methods_)if(Object.prototype.hasOwnProperty.call(_().propc.methods_,e)){for(const t in _().propc.cog_setups_)if(_().propc.cog_setups_[t][0]===e){const n=_().propc.methods_[e],i=n.indexOf("{");_().propc.methods_[e]=n.substring(0,i+1)+_().propc.cog_setups_[t][1]+n.substring(i+1,i.length)}i.push(_().propc.methods_[e])}for(const e in l)if(Object.prototype.hasOwnProperty.call(l,e)){for(const t in _().propc.vartype_)l[e].indexOf("{{$var_type_"+t+"}}")>-1&&("LOCAL"!==_().propc.vartype_[t]?l[e]=l[e].replace("{{$var_type_"+t+"}}",_().propc.vartype_[t]):l[e]=l[e].replace("{{$var_type_"+t+"}} "+t+"{{$var_length_"+t+"}}",""),_().propc.varlength_[t]?l[e]=l[e].replace("{{$var_length_"+t+"}}","["+_().propc.varlength_[t]+"]"):l[e]=l[e].replace("{{$var_length_"+t+"}}",""));l[e].indexOf("{{$var_type_")>-1&&(l[e]=l[e].replace(/\{\{\$var_type_.*?\}\}/gi,"int").replace(/\{\{\$var_length_.*?\}\}/gi,"")),-1===r[e].indexOf("cCode")&&(l[e].indexOf("char *")>-1&&-1===l[e].indexOf("__")&&-1===l[e].indexOf("rfidBfr")&&-1===l[e].indexOf("wxBuffer")?l[e]=l[e].replace("char *","char ").replace(";","[64];"):l[e].indexOf("wxBuffer")>-1&&(l[e]=l[e].replace("char *","char ").replace("wxBuffer;","wxBuffer[64];")),l[e]=l[e].replace(/char \*(\w+)\[/g,"char $1["));const t=_().propc.string_var_lengths.length;for(let n=0;n<t;n++){const t=new RegExp("char\\s+"+_().propc.string_var_lengths[n][0]+"\\[");l[e].match(t)&&(l[e]="char "+_().propc.string_var_lengths[n][0]+"["+_().propc.string_var_lengths[n][1]+" + 1];")}for(const t in _().propc.cog_methods_)_().propc.methods_[t]&&_().propc.methods_[t].indexOf(l[e].replace(/[charint]* (\w+)[[\]0-9]*;/g,"$1"))>-1&&a.push(l[e])}for(const e in _().propc.stacks_)Object.prototype.hasOwnProperty.call(_().propc.stacks_,e)&&(l.push(_().propc.stacks_[e]),r.push(e));const c=[];for(const e in _().propc.setups_)Object.prototype.hasOwnProperty.call(_().propc.setups_,e)&&c.push("  "+_().propc.setups_[e]);"Scribbler Robot"===t.description&&(c.unshift(" "),c.unshift("  pause(100);"),c.unshift("  s3_setup();"),c.unshift("  // Initialize the robot"));let d="\n\n";l.toString().trim().length>0&&(d+="// ------ Global Variables and Objects ------\n");const u="// ------ Libraries and Definitions ------\n"+n.join("\n")+d+l.join("\n")+"\n\n";if(e.indexOf("// RAW PROPC CODE\n//{{||}}\n")>-1){return e.split("//{{||}}\n")[2]}{for(e=(e=(e="  "+e.replace(/\n/g,"\n  ")).replace(/\n\s+$/,"\n").replace(/pause\(0\);\n/g,"// pause(0);\n")).replace(/\(float\)\s*\(int\)/g,"(float)");e.match(/\(\(([^()]*)\)\)/g);)e=e.replace(/\(\(([^()]*)\)\)/g,"($1)");e="int main()\n{\n"+c.join("\n")+"\n"+e+"\n}";let n="";0===_().mainWorkspace.getAllBlocks().length&&"Propeller C (code-only)"!==t.description&&(n+="/* EMPTY_PROJECT */\n"),n+=o.join("\n")+"\n\n";let l="";s.length>0&&(l+="// ------ Function Declarations ------\n");let r="\n\n";return i.length>0&&(r+="// ------ Functions ------\n"),e=(e="/* PURE CODE ONLY */\n"===_().propc.definitions_.pure_code?_().propc.methods_.pure_code:n+u.replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n")+l+s.join("\n\n").replace(/\n\n+/g,"\n").replace(/\n*$/,"\n")+"\n// ------ Main Program ------\n"+e+r+i.join("\n")).replace(/(\w+)\s*=\s*\({0,1}"(.*)"\){0,1};/g,(function(e,t,n){return 0===n.indexOf(",")&&n.indexOf(', "')>-1?e:"strcpy("+t+', "'+n+'");\t\t\t// Save string into variable '+t+"."}))}},_().propc.scrubNakedValue=function(e){return e+";\n"},_().propc.scrub_=function(e,t){if(null===t)return"";let n="";if(!e.outputConnection||!e.outputConnection.targetConnection){const t=e.getCommentText();t&&(n+=_().propc.prefixLines(t,"// ")+"\n");for(let t=0;t<e.inputList.length;t++)if(e.inputList[t].type===_().INPUT_VALUE){const i=e.inputList[t].connection.targetBlock();if(i){const e=_().propc.allNestedComments(i);e&&(n+=_().propc.prefixLines(e,"// "))}}}const i=e.nextConnection&&e.nextConnection.targetBlock();return n+t+this.blockToCode(i)},_().FieldVariable.dropdownCreate=function(){if(!this.variable_)throw new Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let t=null;this.sourceBlock_&&(t=this.getSourceBlock().workspace);let n=[];if(t){const e=this.getVariableTypes_();for(let i=0;i<e.length;i++){const o=e[i],s=t.getVariablesOfType(o);n=n.concat(s)}}n.sort(_().VariableModel.compareByName);const i=[];for(let e=0;e<n.length;e++)i[e]=[n[e].name,n[e].getId()];return e!==_().LANG_VARIABLES_SET_ITEM&&i.push([_().Msg.RENAME_VARIABLE,_().RENAME_VARIABLE_ID]),_().Msg.DELETE_VARIABLE&&e!==_().LANG_VARIABLES_SET_ITEM&&i.push([_().Msg.DELETE_VARIABLE.replace("%1",e),_().DELETE_VARIABLE_ID]),i},_().Names.prototype.safeName_=function(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),(-1!=="0123456789".indexOf(e[0])||"_"===e[0]&&"_"===e[1])&&(e="my_"+e)):e="unnamed",e},_().Input.prototype.appendRange=function(e){return this.inputRange=e,this},_().Input.prototype.getRange=function(){return this.inputRange};_().FieldAceEditor=function(e,t,n){this.displayText_=e,this.arrowRendered_=!1,t||(t=""),_().FieldAceEditor.superClass_.constructor.call(this,t,n)},_().FieldAceEditor.fromJson=function(e){return new(_().FieldAceEditor)(e.value)},_().FieldAceEditor.prototype.SERIALIZABLE=!0,_().FieldAceEditor.prototype.doClassValidation_=function(e){return e},_().FieldAceEditor.prototype.render_=function(){if(!this.arrowRendered_){this.arrowRendered_=!0;const e=_().utils.dom.createSvgElement("tspan",{},null);this.arrow_=document.createTextNode(" ▾"),e.appendChild(this.arrow_),e.style.fill=this.getSourceBlock().getColour(),this.textElement_.insertBefore(e,this.textContent_.nextSibling)}_().FieldAceEditor.superClass_.render_.call(this)},_().FieldAceEditor.prototype.getText=function(){return this.getValue()},_().FieldAceEditor.prototype.getDisplayText_=function(){return this.displayText_},_().FieldAceEditor.prototype.showEditor_=function(){this.editor_=this.dropdownCreate_();const e=this;this.codeField_=ace.edit(this.editor_),this.codeField_.setTheme("ace/theme/chrome"),this.codeField_.getSession().setMode("ace/mode/c_cpp"),this.codeField_.getSession().setTabSize(2),this.codeField_.$blockScrolling=1/0,this.codeField_.setValue(this.getValue()),this.codeField_.focus(),this.codeField_.navigateFileEnd(),this.codeField_.on("change",(function(){e.setValue(e.codeField_.getValue())})),_().DropDownDiv.getContentDiv().appendChild(this.editor_),_().DropDownDiv.setColour("white","silver"),_().DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this))},_().FieldAceEditor.prototype.dropdownCreate_=function(){const e=document.createElement("div");return e.style.width="400px",e.style.height="250px",e},_().FieldAceEditor.prototype.dropdownDispose_=function(){this.setValue(this.codeField_.getValue()),this.codeField_.destroy(),this.editor_=null},_().propc.cCode=0,_().Blocks.math_number={init:function(){"Scribbler Robot"===x().description?(this.setHelpUrl(_().MSG_S3_MATH_HELPURL),this.setColour(X.getColor("math"))):(this.setHelpUrl(_().MSG_VALUES_HELPURL),this.setColour(X.getColor("programming"))),this.setTooltip(_().MSG_MATH_NUMBER_TOOLTIP),this.appendDummyInput("MAIN").appendField(new(_().FieldNumber)("0",null,null,1),"NUM"),this.setOutput(!0,"Number"),this.lastBlockText=" ",this.lastFieldType="number",this.warnTxt=null,this.connectedBlockId=null},onchange:function(e){!e||e.type!==_().Events.CHANGE&&e.type!==_().Events.MOVE||e.blockId!==this.id&&e.blockId!==this.connectedBlockId||this.updateShape()},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("blocktext",this.getFieldValue("TITLE")||""),e.setAttribute("warntext",this.warnTxt||""),e},domToMutation:function(e){this.lastBlockText=e.getAttribute("blocktext")||"",this.warnTxt=e.getAttribute("warntext")||null;const t=this.getFieldValue("NUM");this.getInput("MAIN")&&this.removeInput("MAIN"),""===this.lastBlockText?this.appendDummyInput("MAIN").appendField(new(_().FieldNumber)(t,null,null,1),"NUM"):this.appendDummyInput("MAIN").appendField(new(_().FieldNumber)(t,null,null,1),"NUM").appendField(this.lastBlockText,"TITLE"),this.setWarningText(this.warnTxt)},getRangeArray:function(){const e=["N",-100,100,Number(this.getFieldValue("NUM"))];if(this.outputConnection&&this.outputConnection.targetBlock()){const t=this.outputConnection.targetBlock().getInputWithBlock(this).getRange();if(t){const n=t.split(",");if(e[0]=n[0],"S"===n[0]||"R"===n[0])e[1]=Number(n[1]),e[2]=Number(n[2]);else if("A"===n[0])for(let t=4;t<n.length-3;t++)e[t]=Number(n[t-3])}}return e},updateShape:function(e){let t="number",n="",i=null;const o=e||this.getRangeArray();let s=new(_().FieldNumber)(o[3].toString(10),null,null,1);this.connectedBlockId=null;const l=this.outputConnection.targetBlock();if(l&&(this.connectedBlockId=l.id),"R"===o[0])o[3]<o[1]?i=_().Msg.MATH_NUMBER_RANGE_TOO_LARGE_WARNING+o[1].toString(10):o[3]>o[2]&&(i=_().Msg.MATH_NUMBER_RANGE_TOO_SMALL_WARNING+o[2].toString(10)),(o[3]<o[1]||o[3]>o[2])&&Math.abs(o[1]-o[2])<=1e7&&(n=o[2]>=2147483647?"(≥ "+o[0].toString(10)+")":o[1]<=-2147483647?"(≤"+o[1].toString(10)+")":Math.abs(o[1])===Math.abs(o[2])?"(+/- "+Math.abs(o[1]).toString(10)+")":"("+o[1].toString(10)+" to "+o[2].toString(10)+")");else if("A"===o[0]){let e=!0;for(let t=4;t<o.length-3;t++)if(o[3]===Number(o[t])){e=!1;break}e&&(i=_().Msg.MATH_NUMBER_RANGE_VALUE_INVALID_WARNING)}else"S"===o[0]&&(t="slider",o[3]>o[2]&&(o[3]=o[2]),o[3]<o[1]&&(o[3]=o[1]),s=new(_().FieldRange)(o[3].toString(10),o[1].toString(10),o[2].toString(10)));this.lastBlockText===n&&this.lastFieldType===t||(this.lastBlockText=n,this.lastFieldType=t,this.getInput("MAIN")&&this.removeInput("MAIN"),""===n?this.appendDummyInput("MAIN").appendField(s,"NUM"):this.appendDummyInput("MAIN").appendField(s,"NUM").appendField(n,"TITLE")),this.warnTxt=i,this.setWarningText(i)}},_().propc.math_number=function(){const e=window.parseInt(this.getFieldValue("NUM"));return[e,e<0?_().propc.ORDER_UNARY_PREFIX:_().propc.ORDER_ATOMIC]},_().Blocks.math_arithmetic={init:function(){"Scribbler Robot"===x().description?this.setHelpUrl(_().MSG_S3_MATH_HELPURL):this.setHelpUrl(_().MSG_NUMBERS_HELPURL),this.setTooltip(_().MSG_MATH_ARITHMETIC_TOOLTIP),this.setColour(X.getColor("math")),this.setOutput(!0,"Number"),this.appendValueInput("A").setCheck("Number"),this.appendValueInput("B").setCheck("Number").appendField(new(_().FieldDropdown)([["+"," + "],["−"," - "],["×"," * "],["÷"," / "],["% (remainder after division)"," % "],["^ (raise to the power of)"," p "]]),"OP"),this.setInputsInline(!0),this.myChildren_="B",this.setMutator(new(_().Mutator)(["math_arithmatic_term"]))},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("terms",this.myChildren_),e},domToMutation:function(e){if(this.myChildren_=e.getAttribute("terms"),this.myChildren_.charCodeAt(0)>"B".charCodeAt(0))for(let e="C".charCodeAt(0);e<=this.myChildren_.charCodeAt(0);e++)this.appendValueInput(String.fromCharCode(e)).setCheck("Number").appendField(new(_().FieldDropdown)([["+"," + "],["−"," - "],["×"," * "],["÷"," / "],["% (remainder after division)"," % "],["^ (raise to the power of)"," p "]]),"OP"+String.fromCharCode(e))},decompose:function(e){const t=e.newBlock("math_arithmatic_container");t.initSvg();let n=t.getInput("STACK").connection;if(this.myChildren_.charCodeAt(0)>"B".charCodeAt(0))for(let t="C".charCodeAt(0);t<=this.myChildren_.charCodeAt(0);t++){const t=e.newBlock("math_arithmatic_term");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){let t="C".charCodeAt(0);for(;this.getInput(String.fromCharCode(t));)this.removeInput(String.fromCharCode(t)),t++;t="C".charCodeAt(0);let n=e.getInputTargetBlock("STACK");for(;n;){const e=this.appendValueInput(String.fromCharCode(t)).setCheck("Number").appendField(new(_().FieldDropdown)([["+"," + "],["−"," - "],["×"," * "],["÷"," / "],["% (remainder after division)"," % "],["^ (raise to the power of)"," p "]]),"OP"+String.fromCharCode(t));n.valueConnection_&&e.connection.connect(n.valueConnection_),t++,n=n.nextConnection&&n.nextConnection.targetBlock()}this.myChildren_=String.fromCharCode(t-1)},saveConnections:function(e){let t=e.getInputTargetBlock("STACK"),n="C".charCodeAt(0);for(;t;){const e=this.getInput(String.fromCharCode(n));t.valueConnection_=e&&e.connection.targetConnection,t=t.nextConnection&&t.nextConnection.targetBlock(),n++}}},_().Blocks.math_arithmatic_container={init:function(){this.setColour(X.getColor("math")),this.appendDummyInput().appendField("Math"),this.appendDummyInput().appendField("  term"),this.appendDummyInput().appendField("  term"),this.setInputsInline(!1),this.appendStatementInput("STACK"),this.contextMenu=!1}},_().Blocks.math_arithmatic_term={init:function(){this.setColour(X.getColor("math")),this.appendDummyInput().appendField("term"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.contextMenu=!1}},_().propc.math_arithmetic=function(){const e=[this.getFieldValue("OP")],t=[_().propc.valueToCode(this,"A",_().propc.ORDER_MULTIPLICATIVE)||"0"];t.push(_().propc.valueToCode(this,"B",_().propc.ORDER_MULTIPLICATIVE)||"0");let n="";for(let n="C".charCodeAt(0);n<="Z".charCodeAt(0);n++)_().propc.valueToCode(this,String.fromCharCode(n),_().propc.ORDER_MULTIPLICATIVE)?(e.push(this.getFieldValue("OP"+String.fromCharCode(n))),t.push(_().propc.valueToCode(this,String.fromCharCode(n),_().propc.ORDER_MULTIPLICATIVE))):(e.push(""),t.push(""));e.push("");for(let i=0;i<26;i++)if(" p "===e[i])n+="pow("+t[i]+", ";else if(i>0){let o="",s=i-1;for(;s>-1&&" p "===e[s];)o+=")",s--;n+=t[i]+o+e[i]}else n+=t[i],n+=e[i];return[n,_().propc.ORDER_NONE]},_().Blocks.math_limit={helpUrl:_().MSG_NUMBERS_HELPURL,init:function(){this.setTooltip(_().MSG_MATH_LIMIT_TOOLTIP),this.setColour(X.getColor("math")),this.appendValueInput("A").setCheck("Number").appendField(new(_().FieldDropdown)([["highest of"," > "],["lowest of"," < "]]),"OP"),this.appendValueInput("B").setCheck("Number").appendField("and"),this.setInputsInline(!0),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.math_limit=function(){const e=this.getFieldValue("OP"),t=_().propc.valueToCode(this,"A",_().propc.ORDER_ASSIGNMENT)||"0",n=_().propc.valueToCode(this,"B",_().propc.ORDER_ASSIGNMENT)||"0";return["("+t+e+n+" ? "+t+" : "+n+")",_().propc.ORDER_ASSIGNMENT]},_().Blocks.math_crement={init:function(){"Scribbler Robot"===x().description?this.setHelpUrl(_().MSG_S3_MATH_HELPURL):this.setHelpUrl(_().MSG_NUMBERS_HELPURL),this.setTooltip(_().MSG_MATH_CREMENT_TOOLTIP),this.setColour(X.getColor("math")),this.appendValueInput("VAR").setCheck("Number").appendField(new(_().FieldDropdown)([["decrement","--"],["increment","++"]]),"OP"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0)}},_().propc.math_crement=function(){const e=this.getFieldValue("OP");return(_().propc.valueToCode(this,"VAR",_().propc.ORDER_UNARY_PREFIX)||"0")+e+";\n"},_().Blocks.math_random={init:function(){"Scribbler Robot"===x().description?this.setHelpUrl(_().MSG_S3_MATH_HELPURL):this.setHelpUrl(_().MSG_NUMBERS_HELPURL),this.setTooltip(_().MSG_MATH_RANDOM_TOOLTIP),this.setColour(X.getColor("math")),this.appendValueInput("A").setCheck("Number").appendField("random number from"),this.appendValueInput("B").setCheck("Number").appendField("to"),this.setInputsInline(!0),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number")}},_().propc.math_random=function(){return[`random(${_().propc.valueToCode(this,"A",_().propc.ORDER_ATOMIC)||"1"}, ${_().propc.valueToCode(this,"B",_().propc.ORDER_ATOMIC)||"100"})`,_().propc.ORDER_NONE]},_().Blocks.math_bitwise={helpUrl:_().MSG_NUMBERS_HELPURL,init:function(){this.setTooltip(_().MSG_MATH_BITWISE_TOOLTIP),this.setColour(X.getColor("math")),this.appendValueInput("A").setCheck("Number"),this.appendDummyInput().appendField(new(_().FieldDropdown)([["& (bitwise AND)"," & "],["| (bitwise OR)"," | "],["^ (bitwise XOR)"," ^ "],[">> (bitwise right shift)"," >> "],["<< (bitwise left shift)"," << "]]),"OP"),this.appendValueInput("B").setCheck("Number"),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.math_bitwise=function(){const e=_().propc.valueToCode(this,"A",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"B",_().propc.ORDER_NONE);return[e+this.getFieldValue("OP")+t,_().propc.ORDER_ATOMIC]},_().Blocks.base_delay={helpUrl:_().MSG_CONTROL_HELPURL,init:function(){this.setTooltip(_().MSG_BASE_DELAY_TOOLTIP),this.setColour(X.getColor("programming")),this.appendValueInput("DELAY_TIME","Number").appendField("pause (ms)").setCheck("Number"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.base_delay=function(){return"pause("+(_().propc.valueToCode(this,"DELAY_TIME",_().propc.ORDER_ATOMIC)||"1000")+");\n"},_().Blocks.string_type_block={helpUrl:_().MSG_VALUES_HELPURL,init:function(){this.setTooltip(_().MSG_STRING_TYPE_BLOCK_TOOLTIP),this.setColour(X.getColor("programming")),this.appendDummyInput().appendField("“").appendField(new(_().FieldTextInput)("Hello"),"TEXT").appendField("”"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"String")}},_().propc.string_type_block=function(){return['"'+this.getFieldValue("TEXT").replace(/"/g,'\\"')+'"',_().propc.ORDER_NONE]},_().Blocks.char_type_block={helpUrl:_().MSG_VALUES_HELPURL,init:function(){this.setTooltip(_().MSG_CHAR_TYPE_BLOCK_TOOLTIP),this.setColour(X.getColor("programming"));const e=[["32 - space","32"]];for(let t=33;t<127;t++)e.push([t.toString(10)+" - "+String.fromCharCode(t),t.toString(10)]);e.push(["7 - bell","7"]),e.push(["10 - line feed","10"]),e.push(["11 - tab","11"]),e.push(["13 - carriage return","13"]),e.push(["127 - delete","127"]),this.appendDummyInput().appendField("character").appendField(new(_().FieldDropdown)(e),"CHAR"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number")}},_().propc.char_type_block=function(){return[this.getFieldValue("CHAR"),_().propc.ORDER_NONE]},_().Blocks.music_note={helpUrl:_().MSG_VALUES_HELPURL,init:function(){this.setTooltip(_().MSG_MUSIC_NOTE_BLOCK_TOOLTIP),this.setColour(X.getColor("programming")),this.appendDummyInput().appendField("music note").appendField(new(_().FieldDropdown)([["C","2093.00"],["C♯/D♭","2217.46"],["D","2349.32"],["D♯/E♭","2489.02"],["E","2637.02"],["F","2793.83"],["F♯/G♭","2959.96"],["G","3135.96"],["G♯/A♭","3322.44"],["A","3520.00"],["A♯/B♭","3729.31"],["B","3951.07"]]),"NOTE").appendField("octave").appendField(new(_().FieldDropdown)([["1st","0.015625"],["2nd","0.03125"],["3rd","0.0625"],["4th","0.125"],["5th","0.25"],["6th","0.5"],["7th","1"],["8th","2"]]),"OCTAVE"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number")}},_().propc.music_note=function(){return[Math.round(parseFloat(this.getFieldValue("NOTE"))*parseFloat(this.getFieldValue("OCTAVE"))).toString(10),_().propc.ORDER_NONE]},_().Blocks.system_counter={init:function(){const e=x();this.setTooltip(_().MSG_SYSTEM_COUNTER_TOOLTIP),"Other Propeller Boards"===e.description?(this.setHelpUrl(_().MSG_SYSTEM_HELPURL),this.setColour(X.getColor("system"))):(this.setColour(X.getColor("programming")),this.setHelpUrl(_().MSG_VALUES_HELPURL)),this.appendDummyInput().appendField("system").appendField(new(_().FieldDropdown)([["counter","CNT"],["clock frequency","CLKFREQ"]]),"CMD"),this.setOutput(!0,"Number")}},_().propc.system_counter=function(){return[this.getFieldValue("CMD"),_().propc.ORDER_NONE]},_().Blocks.waitcnt={helpUrl:_().MSG_SYSTEM_HELPURL,init:function(){this.setTooltip(_().MSG_WAITCNT_TOOLTIP),this.setColour(X.getColor("system")),this.appendValueInput("TARGET").setCheck("Number").appendField("Wait until"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.waitcnt=function(){return"waitcnt("+_().propc.valueToCode(this,"TARGET",_().propc.ORDER_NONE)+");\n"},_().Blocks.register_set={helpUrl:_().MSG_SYSTEM_HELPURL,init:function(){this.setTooltip(_().MSG_REGISTER_SET_TOOLTIP),this.setColour(X.getColor("system")),this.appendValueInput("TARGET").setCheck("Number").appendField("cog").appendField(new(_().FieldDropdown)([["pin output","OUTA"],["pin direction","DIRA"],["counter A","CTRA"],["counter B","CTRB"],["frequency A","FRQA"],["frequency B","FRQB"],["phase accumulator A","PHSA"],["phase accumulator B","PHSB"]]),"CMD").appendField("register ="),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.register_set=function(){const e=_().propc.valueToCode(this,"TARGET",_().propc.ORDER_NONE);return this.getFieldValue("CMD")+" = "+e+";\n"},_().Blocks.register_get={helpUrl:_().MSG_SYSTEM_HELPURL,init:function(){this.setTooltip(_().MSG_REGISTER_GET_TOOLTIP),this.setColour(X.getColor("system")),this.appendDummyInput().appendField("cog").appendField(new(_().FieldDropdown)([["pin input","INA"],["pin output","OUTA"],["pin direction","DIRA"],["counter A","CTRA"],["counter B","CTRB"],["frequency A","FRQA"],["frequency B","FRQB"],["phase accumulator A","PHSA"],["phase accumulator B","PHSB"]]),"CMD").appendField("register"),this.setOutput(!0,"Number")}},_().propc.register_get=function(){return[this.getFieldValue("CMD"),_().propc.ORDER_NONE]},_().Blocks.custom_code={helpUrl:_().MSG_SYSTEM_HELPURL,init:function(){this.setTooltip(_().MSG_CUSTOM_CODE_TOOLTIP),this.setColour("#FF8800"),this.setWarningText('WARNING: This block has been deprecated.\nReplace with a "User defined code" block from the Control menu.'),this.appendDummyInput().appendField("user code").appendField(new(_().FieldTextInput)(""),"CODE").appendField("in").appendField(new(_().FieldDropdown)([["main","main"],["setup","setup"],["definitions","definitions"],["includes","includes"]]),"LOC"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.custom_code=function(){const e=this.getFieldValue("LOC"),t=this.getFieldValue("CODE");let n="";return"includes"===e?_().definitions_["cCode"+_().propc.cCode]=t:"setup"===e?_().propc.setups_["cCode"+_().propc.cCode]=t:"definitions"===e?_().propc.global_vars_["cCode"+_().propc.cCode]=t:n=t,_().propc.cCode++,n},_().Blocks.string_var_length={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_STRING_VAR_LENGTH_TOOLTIP),this.setColour(X.getColor("math")),this.setInputsInline(!1),this.appendDummyInput().appendField("String variable set size of"),this.optionList_=["var"],this.userDefinedConstantsList_=["MYVALUE"],this.setMYVALUEconstantValue=!1,this.updateConstMenu(),this.updateShape_(),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setMutator(new(_().Mutator)(["string_var_length_var","string_var_length_con"]))},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("options",JSON.stringify(this.optionList_)),e},domToMutation:function(e){let t=JSON.parse(e.getAttribute("options"));if(!t||t===[]){t=[];for(let n=0;n<parseInt(e.getAttribute("vars")||"1");n++)t.push("var")}this.optionList_=t,this.updateConstMenu(),this.updateShape_()},decompose:function(e){const t=e.newBlock("string_var_length_container");t.initSvg();let n=t.getInput("STACK").connection;for(let t=0;t<this.optionList_.length;t++){const i=e.newBlock("string_var_length_"+this.optionList_[t]);i.initSvg(),n.connect(i.previousConnection),n=i.nextConnection}return t},compose:function(e){let t=e.getInputTargetBlock("STACK");this.optionList_.length=0;const n=[];for(;t;){const e=t.type.split("_"),i=e.length-1;this.optionList_.push(e[i]),n.push([t.varName_,t.varLen_]),t=t.nextConnection&&t.nextConnection.targetBlock()}this.updateConstMenu(),this.updateShape_();for(let e=0;e<n.length;e++)n[e][0]&&this.setFieldValue(n[e][0],"VAR_NAME"+e),n[e][1]&&this.setFieldValue(n[e][1],"VAR_LEN"+e)},saveConnections:function(e){let t=e.getInputTargetBlock("STACK"),n=0;for(;t;)t.varName_=this.getFieldValue("VAR_NAME"+n),t.varLen_=this.getFieldValue("VAR_LEN"+n),n++,t=t.nextConnection&&t.nextConnection.targetBlock()},updateConstMenu:function(e,t){this.userDefinedConstantsList_=[];const n=_().getMainWorkspace().getAllBlocks();for(let i=0;i<n.length;i++)if("constant_define"===n[i].type){let o=n[i].getFieldValue("CONSTANT_NAME");o===e&&t&&(o=t),o&&this.userDefinedConstantsList_.push(o)}this.userDefinedConstantsList_.push("MYVALUE"),this.userDefinedConstantsList_=this.userDefinedConstantsList_.sortedUnique();for(let n=0;n<this.optionList_.length;n++){const i=this.getFieldValue("VAR_LEN"+n),o=this.getFieldValue("VAR_NAME"+n);i&&i===e&&t&&this.getInput("VAR"+n)&&(this.removeInput("VAR"+n),this.appendDummyInput("VAR"+n).appendField("variable").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VAR_NAME"+n).appendField("to").appendField(new(_().FieldDropdown)(this.userDefinedConstantsList_.map((function(e){return[e,e]}))),"VAR_LEN"+n).appendField("characters"),this.setFieldValue(t||"MYVALUE","VAR_LEN"+n),o&&this.setFieldValue(o,"VAR_NAME"+n),this.getInput("VAR"+(n+1))&&this.moveInputBefore("VAR"+n,"VAR"+(n+1)))}},updateShape_:function(){let e=0;for(;this.getInput("VAR"+e);)this.removeInput("VAR"+e),e++;for(e=0;e<this.optionList_.length;e++){const t=this.optionList_[e];this.appendDummyInput("VAR"+e).appendField("variable").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VAR_NAME"+e).appendField("to"),"con"===t?this.getInput("VAR"+e).appendField(new(_().FieldDropdown)(this.userDefinedConstantsList_.map((function(e){return[e,e]}))),"VAR_LEN"+e).appendField("characters"):this.getInput("VAR"+e).appendField(new(_().FieldNumber)("64",null,null,1),"VAR_LEN"+e).appendField("characters")}},onchange:function(){this.setMYVALUEconstantValue="";const e=_().getMainWorkspace();let t="";e.getBlocksByType("string_var_length").length>1&&(t+="WARNING! Only use one of these blocks!");let n="\n\nWARNING! MYVALUE is not defined!";e.getBlocksByType("constant_define",!1).forEach((function(e){"MYVALUE"===e.getFieldValue("CONSTANT_NAME")&&(n="")})),t+=n,""!==n&&(this.setMYVALUEconstantValue=!0),this.setWarningText(""===t?null:t.trim())}},_().Blocks.string_var_length_container={init:function(){this.setColour(X.getColor("math")),this.appendDummyInput().appendField("String variable lengths"),this.setInputsInline(!1),this.appendStatementInput("STACK"),this.contextMenu=!1}},_().Blocks.string_var_length_var={init:function(){this.setColour(X.getColor("math")),this.appendDummyInput().appendField("number"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.contextMenu=!1}},_().Blocks.string_var_length_con={init:function(){this.setColour(X.getColor("math")),this.appendDummyInput().appendField("named constant"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.contextMenu=!1}},_().propc.string_var_length=function(){!this.disabled&&this.setMYVALUEconstantValue&&(_().propc.definitions_.USER_MYVALUE="#define MY_MYVALUE\t64");let e=0;for(_().propc.string_var_lengths=[];this.getInput("VAR"+e.toString(10));){const t=this.getFieldValue("VAR_LEN"+e.toString(10));let n="";"con"===this.optionList_[e]&&(n="MY_"),_().propc.string_var_lengths.push([_().propc.variableDB_.getName(this.getFieldValue("VAR_NAME"+e.toString(10)),_().VARIABLE_CATEGORY_NAME),n+t]),e++}return""},_().Blocks.string_length={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_STRING_LENGTH_TOOLTIP),this.setColour(X.getColor("math")),this.appendValueInput("VALUE").setCheck("String").appendField("length of string"),this.setInputsInline(!0),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.string_length=function(){return["((int) strlen("+_().propc.valueToCode(this,"VALUE",_().propc.ORDER_NONE)+"))",_().propc.ORDER_NONE]},_().Blocks.high_low_value={helpUrl:_().MSG_VALUES_HELPURL,init:function(){this.setTooltip(_().MSG_HIGH_LOW_VALUE_TOOLTIP),this.setColour(X.getColor("programming")),this.appendDummyInput().appendField(new(_().FieldDropdown)([["high","1"],["low","0"]]),"VALUE"),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.high_low_value=function(){return[this.getFieldValue("VALUE"),_().propc.ORDER_ATOMIC]},_().Blocks.comment={helpUrl:_().MSG_CONTROL_HELPURL,init:function(){this.setTooltip(_().MSG_COMMENT_TOOLTIP),this.setColour(X.getColor("programming")),this.appendDummyInput("MAIN").appendField("add","TITLE").appendField(new(_().FieldDropdown)([["comment","COMMENT"],["blank separator","SPACER"]],(function(e){this.getSourceBlock().updateShape_(e)})),"ACTION").appendField(new(_().FieldTextInput)(""),"COMMENT_TEXT"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},mutationToDom:function(){const e=document.createElement("mutation"),t=this.getFieldValue("ACTION");return e.setAttribute("action",t),e},domToMutation:function(e){const t=e.getAttribute("action");this.updateShape_(t)},updateShape_:function(e){this.commentText=this.getFieldValue("COMMENT_TEXT"),this.getInput("MAIN")&&this.removeInput("MAIN"),"COMMENT"===e?(this.setColour(X.getColor("programming")),this.appendDummyInput("MAIN").appendField("add","TITLE").appendField(new(_().FieldDropdown)([["comment","COMMENT"],["blank separator","SPACER"]],(function(e){this.getSourceBlock().updateShape_(e)})),"ACTION").appendField(new(_().FieldTextInput)(this.commentText||""),"COMMENT_TEXT")):"SPACER"===e&&(this.setColour("#FFFFFF"),this.appendDummyInput("MAIN").appendField("   ","TITLE").appendField(new(_().FieldDropdown)([["       ▽       ","SPACER"],["comment","COMMENT"]],(function(e){this.getSourceBlock().updateShape_(e)})),"ACTION"))}},_().propc.comment=function(){const e=this.getFieldValue("COMMENT_TEXT");let t="";return e&&(t="// "+e.replace(/,+\s*$/g,"")+"\n"),t},_().Blocks.color_picker={helpUrl:_().MSG_VALUES_HELPURL,init:function(){this.setTooltip(_().MSG_COLOR_PICKER_TOOLTIP),this.setColour(X.getColor("programming")),this.appendDummyInput().appendField("color").appendField(new(_().FieldColour)("#FFFFFF").setColours(["#FFFFFF","#DFDFDF","#BFBFBF","#9F9F9F","#7F7F7F","#5F5F5F","#3F3F3F","#1F1F1F","#000000","#FFCCCC","#FF9999","#FF6666","#FF3333","#FF0000","#CC0000","#990000","#660000","#330000","#FFE5CC","#FFCB99","#FFB166","#FF9733","#FF7D00","#CC6400","#994B00","#663200","#331900","#FFFFCC","#FFFF99","#FFFF66","#FFFF33","#FFFF00","#CCCC00","#999900","#666600","#333300","#E5FFCC","#CBFF99","#B1FF66","#97FF33","#7DFF00","#64CC00","#4B9900","#326600","#193300","#CCFFCC","#99FF99","#66FF66","#33FF33","#00FF00","#00CC00","#009900","#006600","#003300","#CCFFE5","#99FFCB","#66FFB1","#33FF97","#00FF7D","#00CC64","#00994B","#006632","#003319","#CCFFFF","#99FFFF","#66FFFF","#33FFFF","#00FFFF","#00CCCC","#009999","#006666","#003333","#CCE5FF","#99CBFF","#66B1FF","#3397FF","#007DFF","#0064CC","#004B99","#003266","#001933","#CCCCFF","#9999FF","#6666FF","#3333FF","#0000FF","#0000CC","#000099","#000066","#000033","#E5CCFF","#CB99FF","#B166FF","#9733FF","#7D00FF","#6400CC","#4B0099","#320066","#190033","#FFCCFF","#FF99FF","#FF66FF","#FF33FF","#FF00FF","#CC00CC","#990099","#660066","#330033","#FFCCE5","#FF99CB","#FF66B1","#FF3397","#FF007D","#CC0064","#99004B","#660032","#330019"]).setColumns(9),"COLOR"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number")}},_().propc.color_picker=function(){return["0x"+this.getFieldValue("COLOR").substr(1),_().propc.ORDER_NONE]},_().Blocks.color_value_from={helpUrl:_().MSG_VALUES_HELPURL,init:function(){this.setTooltip(_().MSG_COLOR_VALUE_FROM_TOOLTIP),this.setColour(X.getColor("programming")),this.appendDummyInput().appendField("color value from:"),this.appendValueInput("RED_VALUE").appendRange("R,0,255,0").appendField("red").setCheck("Number"),this.appendValueInput("GREEN_VALUE").appendRange("R,0,255,0").appendField("green").setCheck("Number"),this.appendValueInput("BLUE_VALUE").appendRange("R,0,255,0").appendField("blue").setCheck("Number"),this.setOutput(!0,"Number"),this.setInputsInline(!0),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.color_value_from=function(){_().propc.definitions_.colormath='#include "colormath.h"';const e=_().propc.valueToCode(this,"RED_VALUE",_().propc.ORDER_NONE)||"0",t=_().propc.valueToCode(this,"GREEN_VALUE",_().propc.ORDER_NONE)||"0",n=_().propc.valueToCode(this,"BLUE_VALUE",_().propc.ORDER_NONE)||"0";let i,o,s;if(isNaN(parseInt(e))&&(i=e),isNaN(parseInt(t))&&(o=t),isNaN(parseInt(n))&&(s=n),void 0===i&&void 0===o&&void 0===s)return[`getColorRRGGBB(${e}, ${t}, ${n})`,_().propc.ORDER_NONE];let l="getColorRRGGBB(";return l+=`${i||e}, `,l+=`${o||t}, `,l+=`${s||n})`,[l,_().propc.ORDER_NONE]},_().Blocks.get_channel_from={helpUrl:_().MSG_VALUES_HELPURL,init:function(){this.setTooltip(_().MSG_GET_CHANNEL_FROM_TOOLTIP),this.setColour(X.getColor("programming")),this.appendDummyInput().appendField("get").appendField(new(_().FieldDropdown)([["Red","R"],["Green","G"],["Blue","B"]]),"CHANNEL"),this.appendValueInput("COLOR").appendField("value from").setCheck("Number"),this.setOutput(!0,"Number"),this.setInputsInline(!0),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.get_channel_from=function(){const e=this.getFieldValue("CHANNEL"),t=_().propc.valueToCode(this,"COLOR",_().propc.ORDER_NONE);return _().propc.definitions_.colormath='#include "colormath.h"',[`get8bitColor(${t}, "${e}")`,_().propc.ORDER_NONE]},_().Blocks.compare_colors={helpUrl:_().MSG_VALUES_HELPURL,init:function(){this.setTooltip(_().MSG_COMPARE_COLORS_TOOLTIP),this.setColour(X.getColor("programming")),this.appendDummyInput().appendField("compare"),this.appendValueInput("COLOR1").appendField("color 1:").setCheck("Number"),this.appendValueInput("COLOR2").appendField("color 2:").setCheck("Number"),this.setOutput(!0,"Number"),this.setInputsInline(!0),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.compare_colors=function(){const e=_().propc.valueToCode(this,"COLOR1",_().propc.ORDER_NONE)||"0",t=_().propc.valueToCode(this,"COLOR2",_().propc.ORDER_NONE)||"0";_().propc.definitions_.colormath='#include "colormath.h"';return["compareRRGGBB("+e+", "+t+")",_().propc.ORDER_NONE]},_().Blocks.logic_compare={category:_().LANG_CATEGORY_LOGIC,init:function(){"Scribbler Robot"===x().description?this.setHelpUrl(_().MSG_S3_MATH_HELPURL):this.setHelpUrl(_().MSG_NUMBERS_HELPURL),this.setTooltip(_().MSG_LOGIC_COMPARE_TOOLTIP),this.setColour(X.getColor("math")),this.setOutput(!0,"Number"),this.appendValueInput("A").setCheck("Number"),this.appendValueInput("B").setCheck("Number").appendField(new(_().FieldDropdown)([["=","=="],["≠","!="],["<","<"],["≤","<="],[">",">"],["≥",">="]]),"OP"),this.setInputsInline(!0)}},_().propc.logic_compare=function(){const e=this.getFieldValue("OP"),t="=="===e||"!="===e?_().propc.ORDER_EQUALITY:_().propc.ORDER_RELATIONAL;return[(_().propc.valueToCode(this,"A",t)||"0")+" "+e+" "+(_().propc.valueToCode(this,"B",t)||"0"),t]},_().Blocks.logic_operation={category:_().LANG_CATEGORY_LOGIC,init:function(){"Scribbler Robot"===x().description?this.setHelpUrl(_().MSG_S3_MATH_HELPURL):this.setHelpUrl(_().MSG_NUMBERS_HELPURL),this.setTooltip(_().MSG_LOGIC_OPERATION_TOOLTIP),this.setColour(X.getColor("math")),this.setOutput(!0,"Number"),this.appendValueInput("A").setCheck("Number"),this.appendValueInput("B").setCheck("Number").appendField(new(_().FieldDropdown)([["and"," && "],["or"," || "],["and not"," && !"],["or not"," || !"]]),"OP"),this.setInputsInline(!0)}},_().propc.logic_operation=function(){const e=this.getFieldValue("OP");let t=_().propc.ORDER_LOGICAL_AND;" || "!==e&&" || !"!==e||(t=_().propc.ORDER_LOGICAL_OR);return[(_().propc.valueToCode(this,"A",t)||"0")+" "+e+(_().propc.valueToCode(this,"B",t)||"0"),t]},_().Blocks.parens={init:function(){"Scribbler Robot"===x().description?this.setHelpUrl(_().MSG_S3_MATH_HELPURL):this.setHelpUrl(_().MSG_NUMBERS_HELPURL),this.setTooltip(_().MSG_PARENS_TOOLTIP),this.appendValueInput("BOOL").appendField("(","OP").setCheck("Number"),this.appendDummyInput("").appendField(")"),this.setInputsInline(!0),this.setColour(X.getColor("math")),this.setOutput(!0,"Number"),this.setInputsInline(!0)}},_().propc.parens=function(){return["("+(_().propc.valueToCode(this,"BOOL",_().propc.ORDER_ATOMIC)||"0")+")",_().propc.ORDER_ATOMIC]},_().Blocks.logic_negate={init:function(){"Scribbler Robot"===x().description?this.setHelpUrl(_().MSG_S3_MATH_HELPURL):this.setHelpUrl(_().MSG_NUMBERS_HELPURL),this.setTooltip(_().MSG_LOGIC_NEGATE_TOOLTIP),this.appendValueInput("BOOL").setCheck("Number").appendField(new(_().FieldDropdown)([["not","!"],["negate","-"],["abs","abs("]]),"OP"),this.setColour(X.getColor("math")),this.setOutput(!0,"Number"),this.setInputsInline(!1)}},_().propc.logic_negate=function(){let e=_().propc.ORDER_UNARY_PREFIX;const t=this.getFieldValue("OP");let n=t+(_().propc.valueToCode(this,"BOOL",e)||"0");return"abs("===t&&(n+=")",e=_().propc.ORDER_NONE),[n,e]},_().Blocks.logic_boolean={helpUrl:_().MSG_VALUES_HELPURL,init:function(){this.setTooltip(_().MSG_LOGIC_BOOLEAN_TOOLTIP),this.setColour(X.getColor("programming")),this.setOutput(!0,"Number"),this.appendDummyInput().appendField(new(_().FieldDropdown)([["true","TRUE"],["false","FALSE"]]),"BOOL")}},_().propc.logic_boolean=function(){return["TRUE"===this.getFieldValue("BOOL")?"1":"0",_().propc.ORDER_ATOMIC]},_().Blocks.combine_strings={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_COMBINE_STRINGS_TOOLTIP),this.setColour(X.getColor("math")),this.appendValueInput("STRA").setCheck("String").appendField("combine string"),this.appendValueInput("STRB").setCheck("String").appendField("with string"),this.appendDummyInput().appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.combine_strings=function(){const e=_().propc.valueToCode(this,"STRA",_().propc.ORDER_ATOMIC)||"",t=_().propc.valueToCode(this,"STRB",_().propc.ORDER_ATOMIC)||"",n=_().propc.variableDB_.getName(this.getFieldValue("VALUE"),_().VARIABLE_CATEGORY_NAME);let i="";return _().propc.vartype_[n]="char *",i+=""!==e&&""!==t?"sprint("+n+', "%s%s", '+e+", "+t+");\n":""!==e?"strcpy("+n+", "+t+");\n":""!==t?"strcpy("+n+", "+e+");\n":"// Both of the strings to combine are blank!\n",i},_().Blocks.find_substring={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_FIND_SUBSTRING_TOOLTIP),"find_substring"===this.type?(this.setColour("#FF8800"),this.setWarningText("WARNING: This block has been deprecated.\nReplace with a new block from the Operators > Numbers menu.\nOld blocks were (1) referenced, new blocks are (0) referenced.")):this.setColour(X.getColor("math")),this.appendValueInput("SUBSTR").setCheck("String").appendField("find location of text"),this.appendValueInput("STR").setCheck("String").appendField("in string"),"find_substring"!==this.type&&this.appendValueInput("LOC").appendField("starting at position"),this.setInputsInline(!0),this.setOutput(!0,"Number")}},_().Blocks.find_substring_zero=_().Blocks.find_substring,_().propc.find_substring=function(){const e=_().propc.valueToCode(this,"SUBSTR",_().propc.ORDER_ATOMIC)||"",t=_().propc.valueToCode(this,"STR",_().propc.ORDER_ATOMIC)||"",n=_().propc.valueToCode(this,"LOC",_().propc.ORDER_ATOMIC)||"0";let i="";return"find_substring"===this.type?(this.disabled||(_().propc.methods_.find_sub="int find_sub(char *__strS, char *__subS) { char* __pos = strstr(__strS, __subS); return (__pos - __strS + 1); }\n",_().propc.method_declarations_.find_sub="int find_sub(char *, char *);\n"),i="// WARNING! THIS BLOCK IS DEPRECATED! \n\n",i+=""!==e&&""!==t?"find_sub("+t+", "+e+")":"0"):(this.disabled||(_().propc.methods_.find_sub_zero="int str_loc(char *__strS, char *__subS, int __sLoc) { ",_().propc.methods_.find_sub_zero+="__sLoc = constrainInt(__sLoc, 0, (int) strlen(__strS) - 1);\n",_().propc.methods_.find_sub_zero+="char* __pos = strstr(__strS + __sLoc, __subS); return (__pos) ? (__pos - __strS) : -1; }\n",_().propc.method_declarations_.find_sub_zero="int str_loc(char *, char *, int);\n"),i+=""!==e&&""!==t?"str_loc("+t+", "+e+", "+n+")":"0"),[i,_().propc.ORDER_NONE]},_().propc.find_substring_zero=_().propc.find_substring,_().Blocks.get_char_at_position={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_GET_CHAR_AT_POSITION_TOOLTIP),"get_char_at_position"===this.type?(this.setColour("#FF8800"),this.setWarningText("WARNING: This block has been deprecated.\nReplace with a new block from the Operators > Numbers menu.\nOld blocks were (1) referenced, new blocks are (0) referenced.")):this.setColour(X.getColor("math")),this.appendValueInput("POSITION").setCheck("Number").appendField("get character at position"),this.appendDummyInput().appendField("of").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VALUE"),this.setInputsInline(!0),this.setOutput(!0,"Number")}},_().Blocks.get_char_at_position_zero=_().Blocks.get_char_at_position,_().propc.get_char_at_position=function(){const e=_().propc.valueToCode(this,"POSITION",_().propc.ORDER_ATOMIC)||"1",t=_().propc.variableDB_.getName(this.getFieldValue("VALUE"),_().VARIABLE_CATEGORY_NAME);let n;return n="get_char_at_position"===this.type?t+"[("+e+">(int)strlen("+t+")?(int)strlen("+t+"):"+e+")-1]":t+"["+e+"]",[n,_().propc.ORDER_NONE]},_().propc.get_char_at_position_zero=_().propc.get_char_at_position,_().Blocks.set_char_at_position={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_SET_CHAR_AT_POSITION_TOOLTIP),"set_char_at_position"===this.type?(this.setColour("#FF8800"),this.setWarningText("WARNING: This block has been deprecated.\nReplace with a new block from the Operators > Numbers menu.\nOld blocks were (1) referenced, new blocks are (0) referenced.")):this.setColour(X.getColor("math")),this.appendValueInput("POSITION").setCheck("Number").appendField("set character at position"),this.appendDummyInput().appendField("of string").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VALUE"),this.appendValueInput("CHAR").setCheck("Number").appendField("to"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().Blocks.set_char_at_position_zero=_().Blocks.set_char_at_position,_().propc.set_char_at_position=function(){const e=_().propc.valueToCode(this,"POSITION",_().propc.ORDER_ATOMIC)||"1";let t=_().propc.valueToCode(this,"CHAR",_().propc.ORDER_ATOMIC)||"32";3===t.length&&"'"===t[0]&&"'"===t[2]||(t!==t.replace(/[^0-9]+/g,"")?t="("+t+" & 0xFF)":0<parseInt(t)&&parseInt(t)<256||(t="("+t+" & 0xFF)"));const n=_().propc.variableDB_.getName(this.getFieldValue("VALUE"),_().VARIABLE_CATEGORY_NAME);return _().propc.vartype_[n]="char *","set_char_at_position"===this.type?n+"[("+e+">(int)strlen("+n+")?(int)strlen("+n+"):"+e+")-1] = "+t+"\n;":n+"["+e+"] = "+t+"\n;"},_().propc.set_char_at_position_zero=_().propc.set_char_at_position,_().Blocks.get_substring={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_GET_SUBSTRING_TOOLTIP),"get_substring"===this.type?(this.setColour("#FF8800"),this.setWarningText("WARNING: This block has been deprecated.\nReplace with a new block from the Operators > Numbers menu.\nOld blocks were (1) referenced, new blocks are (0) referenced.")):this.setColour(X.getColor("math")),this.appendDummyInput().appendField("get part of string").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"FROM_STR"),this.appendValueInput("START").setCheck("Number").appendField("from position"),this.appendValueInput("END").setCheck("Number").appendField(new(_().FieldDropdown)([["thru"," + 1"],["to",""]]),"PART").appendField("position"),this.appendDummyInput().appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"TO_STR"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().Blocks.get_substring_zero=_().Blocks.get_substring,_().propc.get_substring=function(){let e=_().propc.valueToCode(this,"START",_().propc.ORDER_ATOMIC)||"1",t=_().propc.valueToCode(this,"END",_().propc.ORDER_ATOMIC)||"2";const n=this.getFieldValue("PART"),i=_().propc.variableDB_.getName(this.getFieldValue("FROM_STR"),_().VARIABLE_CATEGORY_NAME),o=_().propc.variableDB_.getName(this.getFieldValue("TO_STR"),_().VARIABLE_CATEGORY_NAME);if(_().propc.vartype_[o]="char *",parseInt(e)>parseInt(t)){const n=e;e=t,t=n}let s="";if("get_substring"===this.type)_().propc.definitions_.str_Buffer="char *__scBfr;",s+="__stIdx = 0;\nfor(__ssIdx = ("+e+"-1); __ssIdx <= ("+t,s+=" <= (int)strlen("+i,s+=")?"+t+":(int)strlen("+i,s+="))-1; __ssIdx++) {\n__scBfr[__stIdx] = "+i,s+="[__ssIdx]; __stIdx++; }\n",s+="__scBfr[__stIdx] = 0;\n",s+="strcpy("+o+", __scBfr);\n";else if(s+="substr ("+o+", "+i+", "+e+", "+t+n+");\n",!this.disabled){let e="void substr(char *__outStr, char *__inStr, int __startPos, int __toPos) {__startPos";e+=" = (__startPos < 0 ? 0 : (__startPos > strlen(__inStr) ? strlen(__inStr) : __startPos));\n",e+="__toPos = (__toPos < 0 ? 0 : (__toPos > strlen(__inStr) ? strlen(__inStr) : __toPos",e+="));\nint __idx = ((__toPos < __startPos) ? __startPos : __toPos) - __startPos;\n",e+="memcpy(__outStr, __inStr + __startPos, __idx);\n__outStr[__idx] = 0;}",_().propc.methods_.substr=e,_().propc.method_declarations_.substr="void substr (char *, char *, int, int);\n"}return s},_().propc.get_substring_zero=_().propc.get_substring,_().Blocks.string_compare={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_STRING_COMPARE_TOOLTIP),this.setColour(X.getColor("math")),this.appendValueInput("STRA").setCheck("String").appendField("string"),this.appendValueInput("STRB").setCheck("String").appendField(new(_().FieldDropdown)([["is the same as","=="],["is not the same as","!="],["is alphabetically before","<"],["is alphabetically after",">"]]),"COMP"),this.setInputsInline(!0),this.setOutput(!0,"Number")}},_().propc.string_compare=function(){const e=_().propc.valueToCode(this,"STRA",_().propc.ORDER_ATOMIC)||"",t=_().propc.valueToCode(this,"STRB",_().propc.ORDER_ATOMIC)||"",n=this.getFieldValue("COMP");return""!==e&&""!==t?["(strcmp("+e+", "+t+") "+n+" 0)",_().propc.ORDER_NONE]:["(1"+n+"0)",_().propc.ORDER_NONE]},_().Blocks.string_to_number={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_STRING_TO_NUMBER_TOOLTIP),this.setColour("#FF8800"),this.setWarningText("WARNING: This block has been deprecated.\nReplace with a scan string block from the Operators > Numbers menu."),this.appendValueInput("STRING").setCheck("String").appendField("string"),this.appendDummyInput().appendField(new(_().FieldDropdown)([["in decimal","%d"],["in hexadecimal","%x"],["in binary","%b"]]),"TYPE").appendField("to integer store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VAR"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.string_to_number=function(){const e=_().propc.valueToCode(this,"STRING",_().propc.ORDER_ATOMIC)||"0",t=_().propc.variableDB_.getName(this.getFieldValue("VAR"),_().VARIABLE_CATEGORY_NAME);return"sscan("+e+', "'+this.getFieldValue("TYPE")+'", &'+t+");\n"},_().Blocks.number_to_string={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_NUMBER_TO_STRING_TOOLTIP),this.setColour("#FF8800"),this.setWarningText("WARNING: This block has been deprecated.\nReplace with a create string from block from the Operators > Numbers menu."),this.appendValueInput("NUMBER").setCheck("Number").appendField("integer"),this.appendDummyInput().appendField("to string in").appendField(new(_().FieldDropdown)([["decimal","%d"],["hexadecimal","%x"],["binary","%b"]]),"TYPE").appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VAR"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.number_to_string=function(){const e=_().propc.valueToCode(this,"NUMBER",_().propc.ORDER_ATOMIC)||"0",t=_().propc.variableDB_.getName(this.getFieldValue("VAR"),_().VARIABLE_CATEGORY_NAME);return _().propc.vartype_[t]="char *","sprint("+t+', "'+this.getFieldValue("TYPE")+'", '+e+");\n"},_().Blocks.string_split={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_STRING_SPLIT_TOOLTIP),this.setColour(X.getColor("math")),this.appendDummyInput().appendField("split string"),this.appendValueInput("FROM_STR").setCheck("String"),this.appendValueInput("CHAR").setCheck("Number").appendField("on"),this.appendDummyInput().appendField("store the").appendField(new(_().FieldDropdown)([["first part in","STR"],["next part in","NULL"]],(function(e){this.getSourceBlock().updateShape_(e)})),"PART").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"TO_STR"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},updateShape_:function(e){"NULL"===e&&this.getInput("FROM_STR")?this.removeInput("FROM_STR"):"NULL"===e||this.getInput("FROM_STR")||(this.appendValueInput("FROM_STR").setCheck("String"),this.moveInputBefore("FROM_STR","CHAR"))},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("from_str",this.getFieldValue("PART")),e},domToMutation:function(e){const t=e.getAttribute("from_str");this.updateShape_(t)}},_().propc.string_split=function(){const e=_().propc.valueToCode(this,"CHAR",_().propc.ORDER_ATOMIC)||"32";let t=_().propc.valueToCode(this,"FROM_STR",_().propc.ORDER_ATOMIC)||'"Hello World!"';const n=this.getFieldValue("PART"),i=_().propc.variableDB_.getName(this.getFieldValue("TO_STR"),_().VARIABLE_CATEGORY_NAME);if(_().propc.vartype_[i]="char *","NULL"===n&&(t=n),!this.disabled){let e="";e+="void str_split(char *__fromStr, char *__toStr, char __delim) {\nchar __d[2] = {__delim, 0};\n",e+="char *__token;\n\n__token = strtok(__fromStr, __d);\nstrcpy(__toStr, __token);\n}",_().propc.methods_.str_split=e,_().propc.method_declarations_.str_split="void str_split(char *, char *, char);\n"}return"str_split("+t+", "+i+", "+e+");\n"},_().Blocks.string_null={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_STRING_NULL_TOOLTIP),this.setColour(X.getColor("math")),this.appendValueInput("STR").appendField("string").setCheck("String"),this.appendDummyInput().appendField(new(_().FieldDropdown)([["is empty","[0] == 0"],["is not empty","[0] != 0"]]),"OP"),this.setOutput(!0,"Number")}},_().propc.string_null=function(){return[(_().propc.valueToCode(this,"STR",_().propc.ORDER_ATOMIC)||'"Hello World!"')+(this.getFieldValue("OP")||""),_().propc.ORDER_NONE]},_().Blocks.string_trim={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_STRING_TRIM_TOOLTIP),this.setColour(X.getColor("math")),this.appendValueInput("FROM_STR").appendField("trim string"),this.appendDummyInput().appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"TO_STR"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.string_trim=function(){const e=_().propc.valueToCode(this,"FROM_STR",_().propc.ORDER_ATOMIC)||'" Hello World! "',t=_().propc.variableDB_.getName(this.getFieldValue("TO_STR"),_().VARIABLE_CATEGORY_NAME);if(_().propc.vartype_[t]="char *",_().propc.vartype_[e]="char *",!this.disabled){let e="";e+="void str_trim(char *out, char *str)\n{\nconst char *end;\n\n",e+="while(isspace((unsigned char)*str)) str++;\nif(*str == 0)\n{\n*out = 0;\nreturn;\n",e+="}\nend = str + (int)strlen(str) - 1;\nwhile(end > str && isspace((unsigned char)*end)) end--;\n",e+="end++;\n\nmemcpy(out, str, end - str);\nout[end - str] = 0;\n}",_().propc.methods_.str_trim=e,_().propc.method_declarations_.str_trim="void str_trim(char *, char *);\n"}return"str_trim("+t+", "+e+");\n"},_().Blocks.number_binary={helpUrl:_().MSG_VALUES_HELPURL,init:function(){this.setTooltip(_().MSG_NUMBER_BINARY_TOOLTIP),this.setColour(X.getColor("programming")),this.appendDummyInput().appendField(new(_().FieldTextInput)("0101",(function(e){return null===e?null:e=(e=e.replace(/O/gi,"0")).replace(/[^0-1]/g,"")})),"NUMBER").appendField("binary"),this.setOutput(!0,"Number")}},_().propc.number_binary=function(){return["0b"+this.getFieldValue("NUMBER"),_().propc.ORDER_NONE]},_().Blocks.number_hex={helpUrl:_().MSG_VALUES_HELPURL,init:function(){this.setTooltip(_().MSG_NUMBER_HEX_TOOLTIP),this.setColour(X.getColor("programming")),this.appendDummyInput().appendField(new(_().FieldTextInput)("7F",(function(e){return null===e?null:e=(e=e.replace(/O/gi,"0")).replace(/[^0-9A-F]/gi,"").toUpperCase()})),"NUMBER").appendField("hexadecimal"),this.setOutput(!0,"Number")}},_().propc.number_hex=function(){return["0x"+this.getFieldValue("NUMBER"),_().propc.ORDER_NONE]},_().Blocks.constrain_value={helpUrl:_().MSG_NUMBERS_HELPURL,init:function(){this.setTooltip(_().MSG_CONSTRAIN_VALUE_TOOLTIP),this.setColour(X.getColor("math")),this.appendValueInput("NUMBER").setCheck("Number").appendField("constrain"),this.appendDummyInput().appendField("from").appendField(new(_().FieldNumber)("0",null,null,1),"MIN").appendField("(min) to").appendField(new(_().FieldNumber)("100",null,null,1),"MAX").appendField("(max)"),this.setInputsInline(!0),this.setOutput(!0,"Number")}},_().propc.constrain_value=function(){return["constrainInt("+(_().propc.valueToCode(this,"NUMBER",_().propc.ORDER_ATOMIC)||"0")+", "+window.parseInt(this.getFieldValue("MIN"))+", "+window.parseInt(this.getFieldValue("MAX"))+")",_().propc.ORDER_NONE]},_().Blocks.map_value={helpUrl:_().MSG_NUMBERS_HELPURL,init:function(){this.setTooltip(_().MSG_MAP_VALUE_TOOLTIP),this.setColour(X.getColor("math")),this.appendValueInput("NUMBER").setCheck("Number").appendField("map"),this.appendDummyInput().appendField("with range").appendField(new(_().FieldNumber)("0",null,null,1),"IMIN").appendField("(from A)").appendField(new(_().FieldNumber)("50",null,null,1),"IMAX").appendField("(from B) to range").appendField(new(_().FieldNumber)("0",null,null,1),"FMIN").appendField("(to A)").appendField(new(_().FieldNumber)("100",null,null,1),"FMAX").appendField("(to B)"),this.setInputsInline(!0),this.setOutput(!0,"Number")}},_().propc.map_value=function(){return["mapInt("+(_().propc.valueToCode(this,"NUMBER",_().propc.ORDER_ATOMIC)||"0")+","+window.parseInt(this.getFieldValue("IMIN"))+","+window.parseInt(this.getFieldValue("IMAX"))+","+window.parseInt(this.getFieldValue("FMIN"))+","+window.parseInt(this.getFieldValue("FMAX"))+")",_().propc.ORDER_NONE]},_().Blocks.math_advanced={helpUrl:_().MSG_NUMBERS_HELPURL,init:function(){this.setTooltip(_().MSG_MATH_ADVANCED_TOOLTIP),this.setColour(X.getColor("math")),this.appendValueInput("ARG1").setCheck("Number"),this.appendValueInput("ARG2").setCheck("Number").appendField(new(_().FieldDropdown)([["✕ the cosine of","cos"],["✕ the sine of","sin"],["✕ the tangent of","tan"],["✕ the square root of","sqrt"],["✕ e raised to the power of","exp"],["✕ the logarithm (base 10) of","log10"],["✕ the natural logarithm of","log"]]),"OP"),this.appendDummyInput("").appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"STORE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.math_advanced=function(){const e=_().propc.variableDB_.getName(this.getFieldValue("STORE"),_().VARIABLE_CATEGORY_NAME);let t=_().propc.valueToCode(this,"ARG1",_().propc.ORDER_ATOMIC)||"1",n=_().propc.valueToCode(this,"ARG2",_().propc.ORDER_ATOMIC)||"1";t=t.replace(/[(\-+ ](\d+)/g,"$1.0").replace(/\(int\)/g,""),n=n.replace(/[(\-+ ](\d+)/g,"$1.0").replace(/\(int\)/g,"");const i=this.getFieldValue("OP");let o="";return"sin"!==i&&"cos"!==i&&"tan"!==i||(o=" * PI/180.0"),e+" = (int) (((float)"+t+") * "+i+"(((float) "+n+")"+o+"));\n"},_().Blocks.math_inv_trig={helpUrl:_().MSG_NUMBERS_HELPURL,init:function(){this.setTooltip(_().MSG_MATH_INV_TRIG_TOOLTIP),this.setColour(X.getColor("math")),this.appendValueInput("ARG1").setCheck("Number").appendField(new(_().FieldDropdown)([["arcsine of (","asin"],["arccosine of (","acos"],["arctangent of (","atan2"]]),"OP"),this.appendValueInput("ARG2").setCheck("Number").appendField("÷"),this.appendValueInput("ARG3").appendField(") ×").setCheck("Number"),this.appendDummyInput().appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"STORE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.math_inv_trig=function(){const e=_().propc.variableDB_.getName(this.getFieldValue("STORE"),_().VARIABLE_CATEGORY_NAME);let t=_().propc.valueToCode(this,"ARG1",_().propc.ORDER_ATOMIC)||"1",n=_().propc.valueToCode(this,"ARG2",_().propc.ORDER_ATOMIC)||"1",i=_().propc.valueToCode(this,"ARG3",_().propc.ORDER_ATOMIC)||"1";t=t.replace(/([0-9])(\xA0| |\)|$)/g,"$1.0$2").replace(/\(int\)/g,""),n=n.replace(/([0-9])(\xA0| |\)|$)/g,"$1.0$2").replace(/\(int\)/g,""),i=i.replace(/([0-9])(\xA0| |\)|$)/g,"$1.0$2").replace(/\(int\)/g,"");const o=this.getFieldValue("OP");let s="/";return"atan2"===o&&(s=","),e+" = (int) (180.0 * "+o+"(((float) "+t+")"+s+"((float) "+n+")) * "+i+" / PI);\n"},_().Blocks.constant_define={helpUrl:_().MSG_VALUES_HELPURL,init:function(){this.setTooltip(_().MSG_CONSTANT_DEF_TOOLTIP),this.setColour(X.getColor("programming")),this.appendDummyInput("MAIN").appendField("constant").appendField(new(_().FieldTextInput)("MYVALUE",(function(e){return e=(e=e.toUpperCase()).replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),this.getSourceBlock().sendConstantVal(this.getSourceBlock().getFieldValue("CONSTANT_NAME"),e),e})),"CONSTANT_NAME").appendField(" = ").appendField(new(_().FieldTextInput)("0",(function(e){return e=0===e.indexOf("0x")?e.replace(/[^0-9xA-Fa-f-]/g,""):e.replace(/[^0-9b-]/g,"")})),"VALUE"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.sendUpdate=!0},sendConstantVal:function(e,t){if(this.sendUpdate||"-1"===e&&"-1"===t){"-1"===e&&"-1"===t&&(e=null,t=null);const n=_().getMainWorkspace().getBlocksByType("constant_value",!1);for(let i=0;i<n.length;i++)n[i]&&n[i].updateConstMenu&&n[i].updateConstMenu.call(n[i],e,t)}this.sendUpdate=!0},onchange:function(e){const t=this.getFieldValue("CONSTANT_NAME"),n=_().getMainWorkspace().getAllBlocks().toString();let i;if(e.oldXml){let t="";const n=(new XMLSerializer).serializeToString(e.oldXml);if(i=n.indexOf("CONSTANT_NAME"),i>-1&&n.indexOf("constant_define")>-1){const e=n.indexOf("</field",i);t=n.substring(i+15,e),this.sendConstantVal(t,null)}}let o=null;i=n.indexOf("constant "+t+"  ="),n.indexOf("constant "+t+"  =",i+1)>-1&&(o='WARNING! you can only define the constant "'+t+'" once!'),this.setWarningText(o)}},_().propc.constant_define=function(){if(!this.disabled){const e=this.getFieldValue("CONSTANT_NAME"),t=this.getFieldValue("VALUE");_().propc.definitions_["USER_"+e]="#define MY_"+e+" \t"+t}return""},_().Blocks.constant_value={helpUrl:_().MSG_VALUES_HELPURL,init:function(){this.userDefinedConstantsList_=[],this.setTooltip(_().MSG_CONSTANT_VALUE_TOOLTIP),this.setColour(X.getColor("programming")),this.appendDummyInput("VALUE_LIST").appendField(new(_().FieldDropdown)([["MYVALUE","MYVALUE"]]),"VALUE"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null),this.updateConstMenu("","")},updateConstMenu:function(e,t){this.userDefinedConstantsList_=[];const n=_().getMainWorkspace().getBlocksByType("constant_define",!1);for(let i=0;i<n.length;i++){let o=n[i].getFieldValue("CONSTANT_NAME");o===e&&t&&(o=t),o&&this.userDefinedConstantsList_.push(o)}this.userDefinedConstantsList_.push("MYVALUE"),this.userDefinedConstantsList_=this.userDefinedConstantsList_.sortedUnique();const i=this.getFieldValue("VALUE");this.getInput("VALUE_LIST")&&this.removeInput("VALUE_LIST"),this.appendDummyInput("VALUE_LIST").appendField(new(_().FieldDropdown)(this.userDefinedConstantsList_.map((function(e){return[e,e]}))),"VALUE"),i&&i===e&&t?this.setFieldValue(t,"VALUE"):i&&this.setFieldValue(i,"VALUE")},onchange:function(){const e=this.getFieldValue("VALUE");-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("constant "+e)?this.setWarningText("WARNING: Your program must include a constant define block for this value!"):this.setWarningText(null)}},_().propc.constant_value=function(){return[`MY_${this.getFieldValue("VALUE")}`,_().propc.ORDER_ATOMIC]},_().Blocks.propc_file={init:function(){this.setColour("#000000"),this.appendDummyInput().appendField(new(_().FieldTextInput)("single.c"),"FILENAME").appendField(new(_().FieldTextInput)(""),"CODE"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},_().propc.propc_file=function(){const e=this.getFieldValue("FILENAME");let t=this.getFieldValue("CODE");return-1===t.indexOf(" ")&&-1===t.indexOf("{")&&(t=atob(t)),"// RAW PROPC CODE\n//{{||}}\n"+e+"//{{||}}\n"+t},_().Blocks.console_print={helpUrl:_().MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(_().MSG_CONSOLE_PRINT_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendValueInput("MESSAGE").setCheck("String").appendField("Terminal print text"),this.appendDummyInput().appendField("then a new line").appendField(new(_().FieldCheckbox)("FALSE"),"ck_nl"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.console_print=function(){const e=_().propc.valueToCode(this,"MESSAGE",_().propc.ORDER_ATOMIC),t=this.getFieldValue("ck_nl");let n="print("+e.replace(/%/g,"%%")+");\n";return"TRUE"===t&&(n+='print("\\r");\n'),n},_().Blocks.console_print_variables={helpUrl:_().MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(_().MSG_CONSOLE_PRINT_VARIABLES_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendValueInput("VALUE").appendField("Terminal print number").setCheck("Number"),this.appendDummyInput().appendField("as").appendField(new(_().FieldDropdown)([["Decimal","DEC"],["Hexadecimal","HEX"],["Binary","BIN"],["ASCII Character","CHAR"]]),"FORMAT"),this.appendDummyInput().appendField("then a new line").appendField(new(_().FieldCheckbox)("FALSE"),"ck_nl"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.console_print_variables=function(){let e=_().propc.valueToCode(this,"VALUE",_().propc.ORDER_ATOMIC);const t=this.getFieldValue("FORMAT");let n="print(";return n+="TRUE"!==this.getFieldValue("ck_nl")?"BIN"===t?'"%b"':"HEX"===t?'"%x"':"DEC"===t?'"%d"':'"%c"':"BIN"===t?'"%b\\r"':"HEX"===t?'"%x\\r"':"DEC"===t?'"%d\\r"':'"%c\\r"',"CHAR"===t?(3===e.length&&"'"===e[0]&&"'"===e[2]||(e!==e.replace(/[^0-9]+/g,"")?e="("+e+" & 0xFF)":0<parseInt(e)&&parseInt(e)<256||(e="("+e+" & 0xFF)")),n+=", "+e+");\n"):n+=", "+e+");\n",n},_().Blocks.console_print_multiple={helpUrl:_().MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(_().MSG_CONSOLE_PRINT_MULTIPLE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Terminal print"),this.appendValueInput("PRINT0").setAlign(_().ALIGN_RIGHT).setCheck("String").appendField("text"),this.appendValueInput("PRINT1").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("decimal number"),this.appendDummyInput("NEWLINE").appendField("then a new line").appendField(new(_().FieldCheckbox)("FALSE"),"ck_nl"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!1),this.setMutator(new(_().Mutator)(["console_print_str","console_print_dec","console_print_hex","console_print_bin","console_print_float","console_print_char"])),this.optionList_=["str","dec"],this.specDigits_=!1,this.setWarningText(null)},mutationToDom:function(){const e=document.createElement("mutation"),t=[],n=[],i=[];e.setAttribute("options",JSON.stringify(this.optionList_));for(let e=0;e<this.optionList_.length;e++)t.push(this.getFieldValue("DIV"+e)||"0"),n.push(this.getFieldValue("PLACE"+e)||""),i.push(this.getFieldValue("DIGIT"+e)||"");return e.setAttribute("divisors",JSON.stringify(t)),this.specDigits_&&(e.setAttribute("places",JSON.stringify(n)),e.setAttribute("digits",JSON.stringify(i))),e},domToMutation:function(e){this.getInput("PRINT0")&&this.removeInput("PRINT0"),this.getInput("PRINT1")&&this.removeInput("PRINT1"),this.getInput("NEWLINE")&&this.removeInput("NEWLINE");const t=JSON.parse(e.getAttribute("options")),n=JSON.parse(e.getAttribute("divisors"));this.optionList_=t;let i=[],o=[];this.specDigits_=!1,(e.getAttribute("places")||e.getAttribute("digits"))&&(this.specDigits_=!0,i=JSON.parse(e.getAttribute("places")),o=JSON.parse(e.getAttribute("digits")));for(let e=0;e<this.optionList_.length;e++){let t="decimal number",s="Number";"str"===this.optionList_[e]?(t="text",s="String"):"char"===this.optionList_[e]?t="ASCII character":"hex"===this.optionList_[e]?t="hexadecimal number":"bin"===this.optionList_[e]&&(t="binary number"),"float"!==this.optionList_[e]||this.specDigits_?"float"===this.optionList_[e]&&this.specDigits_?(this.appendValueInput("PRINT"+e).setAlign(_().ALIGN_RIGHT).setCheck(s).appendField("float point  divide by","TYPE"+e).appendField(new(_().FieldDropdown)(_().DROPDOWN_MULTIPLIER),"DIV"+e).appendField("digits").appendField(new(_().FieldTextInput)("",(function(e){return(e=e.replace(/O/gi,"0").replace(/[^0-9]*/g,""))||""})),"DIGIT"+e).appendField("places").appendField(new(_().FieldTextInput)("",(function(e){return(e=e.replace(/O/gi,"0").replace(/[^0-9]*/g,""))||""})),"PLACE"+e),this.setFieldValue(n[e]||"100","DIV"+e),this.setFieldValue(i[e]||"","PLACE"+e),this.setFieldValue(o[e]||"","DIGIT"+e)):!this.specDigits_||"hex"!==this.optionList_[e]&&"dec"!==this.optionList_[e]&&"bin"!==this.optionList_[e]?this.appendValueInput("PRINT"+e).setAlign(_().ALIGN_RIGHT).setCheck(s).appendField(t,"TYPE"+e):(this.appendValueInput("PRINT"+e).setAlign(_().ALIGN_RIGHT).setCheck(s).appendField(t,"TYPE"+e).appendField("digits").appendField(new(_().FieldTextInput)("",(function(e){return(e=e.replace(/O/gi,"0").replace(/[^0-9]*/g,""))||""})),"DIGIT"+e),this.setFieldValue(o[e]||"","DIGIT"+e)):(this.appendValueInput("PRINT"+e).setAlign(_().ALIGN_RIGHT).setCheck(s).appendField("float point  divide by","TYPE"+e).appendField(new(_().FieldDropdown)(_().DROPDOWN_MULTIPLIER),"DIV"+e),this.setFieldValue(n[e],"DIV"+e))}"console_print_multiple"===this.type?this.appendDummyInput("NEWLINE").appendField("then a new line").appendField(new(_().FieldCheckbox)("FALSE"),"ck_nl"):"xbee_print_multiple"===this.type?this.appendDummyInput("NEWLINE").appendField("then a carriage return").appendField(new(_().FieldCheckbox)("TRUE"),"ck_nl"):"string_sprint_multiple"===this.type&&this.appendDummyInput("NEWLINE").appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VAR")},decompose:function(e){let t=e.newBlock("console_print_container"),n="console_print_";"console_print_multiple"===this.type||"oled_print_multiple"===this.type||"epaper_print_multiple"===this.type||"debug_lcd_print_multiple"===this.type||"parallel_lcd_print_multiple"===this.type||"heb_print_multiple"===this.type?(t.initSvg(),t.setFieldValue(this.specDigits_?"TRUE":"FALSE","PLACES")):"string_sprint_multiple"===this.type?(t=e.newBlock("string_sprint_container"),t.initSvg(),t.setFieldValue(this.specDigits_?"TRUE":"FALSE","PLACES"),n="string_scan_"):(t=e.newBlock("serial_print_container"),t.initSvg());let i=t.getInput("STACK").connection;for(let t=0;t<this.optionList_.length;t++){const o=e.newBlock(n+this.optionList_[t]);o.initSvg(),i.connect(o.previousConnection),i=o.nextConnection}return t},compose:function(e){let t,n=0;const i=[],o=[],s=[];for(;this.getInput("PRINT"+n);)i[n]=this.getFieldValue("DIGIT"+n),o[n]=this.getFieldValue("PLACE"+n),s[n]=this.getFieldValue("DIV"+n),this.removeInput("PRINT"+n),n++;const l=this.getFieldValue("ck_nl");this.getInput("NEWLINE")&&this.removeInput("NEWLINE"),n=0,this.optionList_.length=0;let r=e.getInputTargetBlock("STACK");this.specDigits_="TRUE"===e.getFieldValue("PLACES");let a="",p="";for(;r;){p="Number";const e=r.type.split("_");"dec"===e[2]?(this.optionList_.push("dec"),a="decimal number"):"hex"===e[2]?(this.optionList_.push("hex"),a="hexadecimal number"):"bin"===e[2]?(this.optionList_.push("bin"),a="binary number"):"char"===e[2]?(this.optionList_.push("char"),a="ASCII character"):"str"===e[2]&&(this.optionList_.push("str"),p="String",a="text"),"float"!==e[2]||this.specDigits_?"float"===e[2]&&this.specDigits_?(this.optionList_.push("float"),t=this.appendValueInput("PRINT"+n).setAlign(_().ALIGN_RIGHT).setCheck(p).appendField("float point  divide by","TYPE"+n).appendField(new(_().FieldDropdown)(_().DROPDOWN_MULTIPLIER),"DIV"+n).appendField("digits").appendField(new(_().FieldTextInput)("",(function(e){return(e=e.replace(/O/gi,"0").replace(/[^0-9]*/g,""))||""})),"DIGIT"+n).appendField("places").appendField(new(_().FieldTextInput)("",(function(e){return(e=e.replace(/O/gi,"0").replace(/[^0-9]*/g,""))||""})),"PLACE"+n),this.setFieldValue(s[n]||"100","DIV"+n),this.setFieldValue(o[n]||"","PLACE"+n),this.setFieldValue(i[n]||"","DIGIT"+n)):!this.specDigits_||"hex"!==this.optionList_[n]&&"dec"!==this.optionList_[n]&&"bin"!==this.optionList_[n]?t=this.appendValueInput("PRINT"+n).setAlign(_().ALIGN_RIGHT).setCheck(p).appendField(a,"TYPE"+n):(t=this.appendValueInput("PRINT"+n).setAlign(_().ALIGN_RIGHT).setCheck(p).appendField(a,"TYPE"+n).appendField("digits").appendField(new(_().FieldTextInput)("",(function(e){return(e=e.replace(/O/gi,"0").replace(/[^0-9]*/g,""))||""})),"DIGIT"+n),this.setFieldValue(i[n]||"","DIGIT"+n)):(this.optionList_.push("float"),t=this.appendValueInput("PRINT"+n).setAlign(_().ALIGN_RIGHT).setCheck(p).appendField("float point  divide by","TYPE"+n).appendField(new(_().FieldDropdown)(_().DROPDOWN_MULTIPLIER),"DIV"+n),this.setFieldValue(s[n]||"100","DIV"+n)),r.valueConnection_&&t.connection.connect(r.valueConnection_),n++,r=r.nextConnection&&r.nextConnection.targetBlock()}"console_print_multiple"===this.type?this.appendDummyInput("NEWLINE").appendField("then a new line").appendField(new(_().FieldCheckbox)(l||"FALSE"),"ck_nl"):"xbee_print_multiple"===this.type?this.appendDummyInput("NEWLINE").appendField("then a carriage return").appendField(new(_().FieldCheckbox)(l||"TRUE"),"ck_nl"):"string_sprint_multiple"===this.type&&this.appendDummyInput("NEWLINE").appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VAR")},saveConnections:function(e){let t=e.getInputTargetBlock("STACK"),n=0;for(;t;){const e=this.getInput("PRINT"+n);t.valueConnection_=e&&e.connection.targetConnection,t=t.nextConnection&&t.nextConnection.targetBlock(),n++}},onchange:function(){let e=null;this.workspace&&this.optionList_.length<1&&(e="Terminal print multiple must have at least one term."),this.setWarningText(e)}},_().Blocks.console_print_container={init:function(){this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("send"),this.appendStatementInput("STACK"),this.appendDummyInput().appendField("specify digits").appendField(new(_().FieldCheckbox)("FALSE"),"PLACES"),this.contextMenu=!1}},_().Blocks.serial_print_container={init:function(){this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("send"),this.appendStatementInput("STACK"),this.contextMenu=!1}},_().Blocks.string_sprint_container={init:function(){this.setColour(X.getColor("math")),this.appendDummyInput().appendField("string"),this.appendStatementInput("STACK"),this.appendDummyInput().appendField("specify digits").appendField(new(_().FieldCheckbox)("FALSE"),"PLACES"),this.contextMenu=!1}},_().Blocks.console_print_dec={init:function(){let e="protocols";"string_scan_dec"===this.type&&(e="math"),this.setColour(X.getColor(e)),this.appendDummyInput().appendField("decimal number"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.contextMenu=!1}},_().Blocks.string_scan_dec=_().Blocks.console_print_dec,_().Blocks.console_print_hex={init:function(){let e="protocols";"string_scan_hex"===this.type&&(e="math"),this.setColour(X.getColor(e)),this.appendDummyInput().appendField("hexadecimal number"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.contextMenu=!1}},_().Blocks.string_scan_hex=_().Blocks.console_print_hex,_().Blocks.console_print_bin={init:function(){let e="protocols";"string_scan_bin"===this.type&&(e="math"),this.setColour(X.getColor(e)),this.appendDummyInput().appendField("binary number"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.contextMenu=!1}},_().Blocks.string_scan_bin=_().Blocks.console_print_bin,_().Blocks.console_print_str={init:function(){let e="protocols";"string_scan_str"===this.type&&(e="math"),this.setColour(X.getColor(e)),this.appendDummyInput().appendField("text"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.contextMenu=!1}},_().Blocks.string_scan_str=_().Blocks.console_print_str,_().Blocks.console_print_char={init:function(){let e="protocols";"string_scan_char"===this.type&&(e="math"),this.setColour(X.getColor(e)),this.appendDummyInput().appendField("ASCII character"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.contextMenu=!1}},_().Blocks.string_scan_char=_().Blocks.console_print_char,_().Blocks.console_print_float={init:function(){let e="protocols";"string_scan_float"===this.type&&(e="math"),this.setColour(X.getColor(e)),this.appendDummyInput().appendField("floating point number"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.contextMenu=!1}},_().Blocks.string_scan_float=_().Blocks.console_print_float,_().propc.console_print_multiple=function(){let e,t,n="",i=null,o="",s="";switch(this.type){case"console_print_multiple":n+='print("';break;case"serial_print_multiple":i="Serial initialize",o="// ERROR: Serial is not initialized!\n",s="",this.ser_pins.length>0&&"string"==typeof this.ser_pins[0]&&(s=this.ser_pins[0].replace(",","_").replace(/None/g,"N")),this.getInput("SERPIN")&&(s=this.getFieldValue("SER_PIN").replace(",","_").replace(/None/g,"N")),n+="dprint(fdser"+s+', "';break;case"debug_lcd_print_multiple":i="Serial LCD initialize",o="// ERROR: LCD is not initialized!\n",n+='dprint(serial_lcd, "';break;case"parallel_lcd_print_multiple":i="Parallel LCD initialize",o="// ERROR: LCD is not initialized!\n",n+='dprint(parallel_lcd, "';break;case"oled_print_multiple":i="OLED initialize",o="// ERROR: OLED is not initialized!\n",n+='drawPrint(oledc, "';break;case"epaper_print_multiple":i="ePaper initialize",o="// ERROR: ePaper is not initialized!\n",n+='drawPrint(ePaper, "';break;case"xbee_print_multiple":i="XBee initialize",o="// ERROR: XBEE is not initialized!\n",n+='dprint(xbee, "';break;case"heb_print_multiple":n+='oledprint("';break;case"string_sprint_multiple":s=_().propc.variableDB_.getName(this.getFieldValue("VAR"),_().VARIABLE_CATEGORY_NAME),_().propc.vartype_[s]="char *",n+="sprint("+s+', "';break;case"wx_print_multiple":i="WX initialize",o="// ERROR: WX is not initialized!\n","heb-wx"===G().boardType.name&&(i=null),e=_().propc.variableDB_.getName(this.getFieldValue("HANDLE"),_().VARIABLE_CATEGORY_NAME),t=this.getFieldValue("CONNECTION"),n+="wifi_print("+t+", "+e+', "'}let l="",r="",a=0;for(;this.getInput("PRINT"+a);){let e=this.getFieldValue("DIGIT"+a)||"";this.getFieldValue("PLACE"+a)&&""!==this.getFieldValue("PLACE"+a)&&(e+="."+this.getFieldValue("PLACE"+a)),""!==e&&(e="0"+e),this.getFieldValue("TYPE"+a).includes("hexadecimal number")?(n+="%"+e+"x",r="0x0"):this.getFieldValue("TYPE"+a).includes("decimal number")?(n+="%"+e+"d",r="0"):this.getFieldValue("TYPE"+a).includes("binary number")?(n+="%"+e+"b",r="0b0"):this.getFieldValue("TYPE"+a).includes("text")?(n+="%s",r='" "'):this.getFieldValue("TYPE"+a).includes("ASCII character")?(n+="%c",r="32"):this.getFieldValue("TYPE"+a).includes("float point  divide by")&&(n+="%"+e+"f",r="0");const t=_().propc.valueToCode(this,"PRINT"+a,_().propc.ORDER_NONE)||r;this.getFieldValue("TYPE"+a).includes("float point  divide by")?l+=", ((float) "+t+") / "+this.getFieldValue("DIV"+a)+".0":l+=", "+t,a++}"TRUE"===this.getFieldValue("ck_nl")&&(n+="\\r"),n+='"'+l+");\n";const p=_().getMainWorkspace().getAllBlocks(!1).toString();return i&&-1===p.indexOf(i)&&(n=o),"wx_print_multiple"===this.type&&p.indexOf("Simple WX")>-1&&(n="// ERROR: You cannot use Advanced WX blocks with Simple WX blocks!"),"heb-wx"===G().boardType.name&&"wx_print_multiple"===this.type&&(_().propc.definitions_.wx_def='#include "wifi.h"',_().propc.setups_.wx_init="wifi_start(31, 30, 115200, WX_ALL_COM);"),n},_().propc.string_sprint_multiple=_().propc.console_print_multiple,_().Blocks.console_scan_text={helpUrl:_().MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(_().MSG_CONSOLE_SCAN_TEXT_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Terminal receive text store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.console_scan_text=function(){const e=_().propc.variableDB_.getName(this.getFieldValue("VALUE"),_().VARIABLE_CATEGORY_NAME);return _().propc.vartype_[e]="char *",""!==e?"getStr("+e+", 128);\n":""},_().Blocks.console_scan_number={helpUrl:_().MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(_().MSG_CONSOLE_SCAN_NUMBER_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Terminal receive").appendField(new(_().FieldDropdown)([["number (32-bit integer)","NUMBER"],["byte (ASCII character)","BYTE"]]),"TYPE").appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.console_scan_number=function(){const e=this.getFieldValue("TYPE"),t=_().propc.variableDB_.getName(this.getFieldValue("VALUE"),_().VARIABLE_CATEGORY_NAME);let n="";return""!==t?(n+="NUMBER"===e?'scan("%d", &'+t+");\n":t+" = getChar();\n",n):""},_().Blocks.console_newline={helpUrl:_().MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(_().MSG_CONSOLE_NEWLINE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Terminal new line"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.console_newline=function(){return"term_cmd(CR);\n"},_().Blocks.console_close={helpUrl:_().MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(_().MSG_CONSOLE_CLOSE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Terminal close"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.console_close=function(){return this.disabled||(_().propc.setups_.terminal_close="simpleterm_close();\n"),""},_().Blocks.console_clear={helpUrl:_().MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(_().MSG_CONSOLE_CLEAR_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Terminal clear screen"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.console_clear=function(){return"term_cmd(CLS);\n"},_().Blocks.console_move_to_position={helpUrl:_().MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(_().MSG_CONSOLE_MOVE_TO_POSITION_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Terminal set cursor to row"),this.appendValueInput("ROW").setCheck("Number"),this.appendDummyInput().appendField("column"),this.appendValueInput("COLUMN").setCheck("Number"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.console_move_to_position=function(){let e=_().propc.valueToCode(this,"ROW",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"COLUMN",_().propc.ORDER_NONE);return Number(e)<0?e=0:Number(e)>255&&(e=255),Number(t)<0?t=0:Number(t)>255&&(t=255),"term_cmd(CRSRXY, "+t+", "+e+");\n"},_().Blocks.serial_open={helpUrl:_().MSG_PROTOCOLS_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_SERIAL_OPEN_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput("PIN_SETUP").appendField("Serial initialize RX").appendField(new(_().FieldDropdown)(e.digital.concat([["31","31"],["None","None"]])),"RXPIN").appendField("TX").appendField(new(_().FieldDropdown)(e.digital.concat([["30","30"],["None","None"]])),"TXPIN"),this.appendDummyInput("BAUD_RATE").appendField("baud").appendField(new(_().FieldDropdown)([["2400","2400"],["4800","4800"],["9600","9600"],["19200","19200"],["38400","38400"],["57600","57600"],["115200","115200"],["other","other"]],(function(e){"other"===e&&(this.otherBaud=!0),this.getSourceBlock().setToOther(e)})),"BAUD"),this.appendDummyInput("MODE").appendField("mode").appendField(new(_().FieldDropdown)([["standard","standard"],["other","other"]],(function(e){this.getSourceBlock().setToMode(e)})),"TYPE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.otherBaud=!1,this.otherMode=!1},setToOther:function(e){"other"!==e&&!0!==this.otherBaud||(e&&"other"!==e||(e="1200"),this.otherBaud=!0,this.getInput("BAUD_RATE")&&this.removeInput("BAUD_RATE"),this.appendDummyInput("BAUD_RATE").appendField("baud").appendField(new(_().FieldNumber)(e,null,null,1),"BAUD"),this.moveInputBefore("BAUD_RATE","MODE"))},setToMode:function(e){"other"===e&&(e=["FALSE","FALSE","FALSE","FALSE"]),"standard"!==e&&(this.getInput("MODE")&&this.removeInput("MODE"),this.appendDummyInput("MODE").appendField("invert RX").appendField(new(_().FieldCheckbox)(e[0]),"ck_bit0").appendField("invert TX").appendField(new(_().FieldCheckbox)(e[1]),"ck_bit1").appendField("open-drain").appendField(new(_().FieldCheckbox)(e[2]),"ck_bit2").appendField("remove TX echo").appendField(new(_().FieldCheckbox)(e[3]),"ck_bit3"),this.otherMode=!0)},mutationToDom:function(){let e;if((this.otherBaud||this.otherMode)&&(e=document.createElement("mutation")),this.otherBaud&&e.setAttribute("baud",this.getFieldValue("BAUD")||"1200"),this.otherMode)for(let t=0;t<4;t++)e.setAttribute("ck_bit"+t.toString(10),this.getFieldValue("ck_bit"+t.toString(10))||"FALSE");return e},domToMutation:function(e){const t=e.getAttribute("baud");void 0!==t&&(this.otherBaud=!0,this.setToOther(t));const n=["FALSE","FALSE","FALSE","FALSE"];let i=!1;for(let t=0;t<4;t++){const o=e.getAttribute("ck_bit"+t.toString(10));o&&(i=!0,n[t]=o)}i&&this.setToMode(n)},onchange:function(e){if(e&&("RXPIN"===e.name||"TXPIN"===e.name||e.type===_().Events.BLOCK_CREATE||e.blockId===this.id)){const e=[],t=this.getFieldValue("RXPIN"),n=this.getFieldValue("TXPIN");("31"===t||"30"===n)&&_().getMainWorkspace().getBlocksByType("console_close",!1).length>0&&e.push("WARNING: DO NOT use pins 30 or 31 without using the Terminal close block!"),t===n&&e.push("WARNING: RX and TX should use different pins!");const i=_().getMainWorkspace().getBlocksByType("serial_open",!1),o="WARNING: Serial RX/TX pins should not be shared!";for(let s=0;s<i.length;s++)if(this.id!==i[s].id){const l=i[s].getFieldValue("RXPIN"),r=i[s].getFieldValue("TXPIN");"None"===l||l!==t&&l!==n||e.push(o),"None"===r||r!==t&&r!==n||e.push(o)}this.setWarningText(0===e.length?null:e.sortedUnique().join("\n"))}}},_().propc.serial_open=function(){const e=this.getFieldValue("RXPIN").replace("None","-1"),t=this.getFieldValue("TXPIN").replace("None","-1"),n=this.getFieldValue("RXPIN").replace("None","N"),i=this.getFieldValue("TXPIN").replace("None","N");let o="0b";for(let e=3;e>-1;e--)o+="TRUE"===(this.getFieldValue("ck_bit"+e.toString(10))||"FALSE")?"1":"0";const s=this.getFieldValue("BAUD");return this.disabled||(_().propc.definitions_["include fdserial"]='#include "fdserial.h"',_().propc.definitions_["var fdserial"+n+"_"+i]="fdserial *fdser"+n+"_"+i+";",_().propc.setups_["setup_fdserial"+n+"_"+i]="fdser"+n+"_"+i+" = fdserial_open("+e+", "+t+", "+o+", "+s+");"),""},_().Blocks.serial_send_text={helpUrl:_().MSG_PROTOCOLS_HELPURL,init:function(){this.setTooltip(_().MSG_SERIAL_SEND_TEXT_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Serial transmit").appendField(new(_().FieldDropdown)([["text","TEXT"],["decimal number","INT"],["hexadecimal number","HEX"],["binary number","BIN"],["ASCII character","BYTE"]]),"TYPE"),this.appendValueInput("VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null),this.ser_pins=[]},mutationToDom:function(){const e=document.createElement("mutation");return this.getInput("SERPIN")&&e.setAttribute("serpin",this.getFieldValue("SER_PIN")),e.setAttribute("pinmenu",JSON.stringify(this.ser_pins)),e.setAttribute("type",this.getFieldValue("TYPE")),e},domToMutation:function(e){e.getAttribute("serpin")&&(this.ser_pins=JSON.parse(e.getAttribute("pinmenu")),this.updateSerPin())},updateSerPin:function(e){this.getInput("SERPIN")&&this.removeInput("SERPIN");const t=e||this.ser_pins;t.length>1&&!this.isInFlyout&&(this.appendDummyInput("SERPIN").setAlign(_().ALIGN_RIGHT).appendField("RXTX").appendField(new(_().FieldDropdown)(t.map((function(e){return[e,e]}))),"SER_PIN"),this.getInput("PRINT0")?this.moveInputBefore("SERPIN","PRINT0"):this.getInput("OPTION0")&&this.moveInputBefore("SERPIN","OPTION0"))},onchange:function(e){if(e&&(e.type===_().Events.BLOCK_CREATE||e.type===_().Events.BLOCK_DELETE||"RXPIN"===e.name||"TXPIN"===e.name||e.blockId===this.id&&"serial_print_multiple"===this.type)){let e=[];const t=_().getMainWorkspace().getBlocksByType("serial_open",!1);this.setWarningText(null);for(let n=0;n<t.length;n++)e.push(t[n].getFieldValue("RXPIN")+","+t[n].getFieldValue("TXPIN"));e=e.sortedUnique();const n=this.ser_pins.filter((t=>!e.includes(t))),i=e.filter((e=>!this.ser_pins.includes(e))),o=this.getField("SER_PIN")?this.getFieldValue("SER_PIN"):null;(n.length>0||i.length>0)&&this.updateSerPin(e),1===n.length&&o&&n[0]===o&&1===i.length&&i[0]&&this.getField("SER_PIN").textContent_&&this.setFieldValue(i[0],"SER_PIN"),this.ser_pins=e,"serial_print_multiple"===this.type&&this.workspace&&this.optionList_.length<1&&this.setWarningText("Serial transmit multiple must have at least one term.")}}},_().propc.serial_send_text=function(){let e="";this.ser_pins.length>0&&(e=this.ser_pins[0].replace(",","_").replace(/None/g,"N")),this.getInput("SERPIN")&&(e=this.getFieldValue("SER_PIN").replace(",","_").replace(/None/g,"N"));if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("Serial initialize"))return"// ERROR: Serial is not initialized!\n";{const t=this.getFieldValue("TYPE");let n=_().propc.valueToCode(this,"VALUE",_().propc.ORDER_ATOMIC)||"0";if("BYTE"===t)return 3===n.length&&"'"===n[0]&&"'"===n[2]||(n!==n.replace(/[^0-9]+/g,"")?n="("+n+" & 0xFF)":0<parseInt(n)&&parseInt(n)<256||(n="("+n+" & 0xFF)")),"fdserial_txChar(fdser"+e+", "+n+");\n";if("INT"===t)return"dprint(fdser"+e+', "%d\\r", '+n+");\n";if("HEX"===t)return"dprint(fdser"+e+', "%x\\r", '+n+");\n";if("BIN"===t)return"dprint(fdser"+e+', "%b\\r", '+n+");\n";{let t="dprint(fdser"+e+', "%s\\r", '+n.replace(/%/g,"%%")+");\n";return t+="while(!fdserial_txEmpty(fdser"+e+"));\n",t+="pause(5);\n",t}}},_().Blocks.serial_receive_text={helpUrl:_().MSG_PROTOCOLS_HELPURL,init:function(){this.setTooltip(_().MSG_SERIAL_RECEIVE_TEXT_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Serial receive").appendField(new(_().FieldDropdown)([["text","TEXT"],["decimal number","INT"],["hexadecimal number","HEX"],["binary number","BIN"],["ASCII character","BYTE"]]),"TYPE").appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null),this.ser_pins=[]},mutationToDom:_().Blocks.serial_send_text.mutationToDom,domToMutation:_().Blocks.serial_send_text.domToMutation,updateSerPin:_().Blocks.serial_send_text.updateSerPin,onchange:_().Blocks.serial_send_text.onchange},_().propc.serial_receive_text=function(){let e="";if(this.ser_pins.length>0&&(e=this.ser_pins[0].replace(",","_").replace(/None/g,"N")),this.getInput("SERPIN")&&(e=this.getFieldValue("SER_PIN").replace(",","_").replace(/None/g,"N")),_().getMainWorkspace().getBlocksByType("Serial initialize",!1)){const t=_().propc.variableDB_.getName(this.getFieldValue("VALUE"),_().VARIABLE_CATEGORY_NAME);switch(this.getFieldValue("TYPE")){case"BYTE":return t+" = fdserial_rxChar(fdser"+e+");\n";case"INT":return"dscan(fdser"+e+', "%d", &'+t+");\n";case"BIN":return"dscan(fdser"+e+', "%b", &'+t+");\n";case"HEX":return"dscan(fdser"+e+', "%x", &'+t+");\n";case"TEXT":default:_().propc.vartype_[t]="char *"}return"dscan(fdser"+e+', "%s", '+t+");\n"}return"// ERROR: Serial is not initialized!\n"},_().Blocks.serial_status={helpUrl:_().MSG_PROTOCOLS_HELPURL,init:function(){this.setTooltip(_().MSG_SERIAL_STATUS_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Serial").appendField(new(_().FieldDropdown)([["characters are recieved","rxReady"],["recieved character count","rxCount"],["peek at first recieved character","rxPeek"],["transmit buffer empty","txEmpty"]]),"TYPE"),this.setInputsInline(!0),this.setOutput(!0,"Number"),this.setWarningText(null),this.ser_pins=[]},mutationToDom:_().Blocks.serial_send_text.mutationToDom,domToMutation:_().Blocks.serial_send_text.domToMutation,updateSerPin:_().Blocks.serial_send_text.updateSerPin,onchange:_().Blocks.serial_send_text.onchange},_().propc.serial_status=function(){let e="";this.ser_pins.length>0&&(e=this.ser_pins[0].replace(",","_").replace(/None/g,"N")),this.getInput("SERPIN")&&(e=this.getFieldValue("SER_PIN").replace(",","_").replace(/None/g,"N"));if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("Serial initialize"))return"// ERROR: Serial is not initialized!\n";return["fdserial_"+this.getFieldValue("TYPE")+"(fdser"+e+")",_().propc.ORDER_NONE]},_().Blocks.serial_print_multiple={helpUrl:_().MSG_PROTOCOLS_HELPURL,init:function(){this.setTooltip(_().MSG_SERIAL_PRINT_MULTIPLE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Serial transmit"),this.appendValueInput("PRINT0").setAlign(_().ALIGN_RIGHT).setCheck("String").appendField("text"),this.appendValueInput("PRINT1").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("decimal number"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!1),this.setMutator(new(_().Mutator)(["console_print_str","console_print_dec","console_print_hex","console_print_bin","console_print_float","console_print_char"])),this.optionList_=["str","dec"],this.setWarningText(null),this.ser_pins=[]},mutationToDom:function(){const e=document.createElement("mutation"),t=[];e.setAttribute("pinmenu",JSON.stringify(this.ser_pins)),e.setAttribute("options",JSON.stringify(this.optionList_));for(let e=0;e<this.optionList_.length;e++)t.push(this.getFieldValue("DIV"+e)||"0");return e.setAttribute("divisors",JSON.stringify(t)),this.getInput("SERPIN")&&e.setAttribute("serpin",this.getFieldValue("SER_PIN")),e},domToMutation:function(e){e.getAttribute("serpin")&&(this.ser_pins=JSON.parse(e.getAttribute("pinmenu")),this.updateSerPin()),this.getInput("PRINT0")&&this.removeInput("PRINT0"),this.getInput("PRINT1")&&this.removeInput("PRINT1"),this.getInput("NEWLINE")&&this.removeInput("NEWLINE");const t=JSON.parse(e.getAttribute("options")),n=JSON.parse(e.getAttribute("divisors"));this.optionList_=t;for(let e=0;e<this.optionList_.length;e++){let t="decimal number",i="Number";"str"===this.optionList_[e]?(t="text",i="String"):"char"===this.optionList_[e]?t="ASCII character":"hex"===this.optionList_[e]?t="hexadecimal number":"bin"===this.optionList_[e]&&(t="binary number"),"float"===this.optionList_[e]?(this.appendValueInput("PRINT"+e).setAlign(_().ALIGN_RIGHT).setCheck(i).appendField("float point  divide by","TYPE"+e).appendField(new(_().FieldDropdown)(_().DROPDOWN_MULTIPLIER),"DIV"+e),this.setFieldValue(n[e],"DIV"+e)):this.appendValueInput("PRINT"+e).setAlign(_().ALIGN_RIGHT).setCheck(i).appendField(t,"TYPE"+e)}},decompose:_().Blocks.console_print_multiple.decompose,compose:function(e){let t,n=0;for(;this.getInput("PRINT"+n);)this.removeInput("PRINT"+n),n++;n=0,this.optionList_.length=0;let i=e.getInputTargetBlock("STACK"),o="",s="";for(;i;)s="Number","console_print_dec"===i.type?(this.optionList_.push("dec"),o="decimal number"):"console_print_hex"===i.type?(this.optionList_.push("hex"),o="hexadecimal number"):"console_print_bin"===i.type?(this.optionList_.push("bin"),o="binary number"):"console_print_char"===i.type?(this.optionList_.push("char"),o="ASCII character"):"console_print_str"===i.type&&(this.optionList_.push("str"),s="String",o="text"),"console_print_float"===i.type?(this.optionList_.push("float"),t=this.appendValueInput("PRINT"+n).setAlign(_().ALIGN_RIGHT).setCheck(s).appendField("float point  divide by","TYPE"+n).appendField(new(_().FieldNumber)("100",null,null,1),"DIV"+n)):t=this.appendValueInput("PRINT"+n).setAlign(_().ALIGN_RIGHT).setCheck(s).appendField(o,"TYPE"+n),i.valueConnection_&&t.connection.connect(i.valueConnection_),n++,i=i.nextConnection&&i.nextConnection.targetBlock()},updateSerPin:_().Blocks.serial_send_text.updateSerPin,saveConnections:_().Blocks.console_print_multiple.saveConnections,onchange:_().Blocks.serial_send_text.onchange},_().propc.serial_print_multiple=_().propc.console_print_multiple,_().Blocks.serial_scan_multiple={helpUrl:_().MSG_PROTOCOLS_HELPURL,init:function(){this.setTooltip(_().MSG_SERIAL_SCAN_MULTIPLE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Serial receive"),this.optionList_=["dec","char"],this.updateShape_(),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setMutator(new(_().Mutator)(["console_print_dec","console_print_hex","console_print_bin","console_print_float","console_print_char"])),this.setWarningText(null),this.ser_pins=[],this.scanAfter=""},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("pinmenu",JSON.stringify(this.ser_pins)),e.setAttribute("options",JSON.stringify(this.optionList_)),e.setAttribute("scanafter",this.scanAfter),e.setAttribute("prefix",this.setPrefix_?this.getFieldValue("CONNECTION"):""),this.getInput("SERPIN")&&e.setAttribute("serpin",this.getFieldValue("SER_PIN")),e},domToMutation:function(e){e.getAttribute("serpin")&&(this.ser_pins=JSON.parse(e.getAttribute("pinmenu")),this.updateSerPin()),this.scanAfter=e.getAttribute("scanafter")||"",this.optionList_=JSON.parse(e.getAttribute("options")),this.setPrefix_&&this.setPrefix_(e.getAttribute("prefix")||""),this.updateShape_()},decompose:function(e){let t="serial_scan_container",n="console_print_";"string_scan_multiple"!==this.type&&"string_sprint_multiple"!==this.type||(t="string_scan_container",n="string_scan_");const i=e.newBlock(t);i.initSvg();let o=i.getInput("STACK").connection;for(let t=0;t<this.optionList_.length;t++){const i=e.newBlock(n+this.optionList_[t]);i.initSvg(),o.connect(i.previousConnection),o=i.nextConnection}return"string_scan_multiple"===this.type&&this.scanAfter&&this.scanAfter.indexOf("After")>-1&&i.setFieldValue(this.scanAfter,"SCAN_START"),i},compose:function(e){this.scanAfter=e.getFieldValue("SCAN_START");let t=e.getInputTargetBlock("STACK");this.optionList_.length=0;const n=[];for(;t;){const e=t.type.split("_"),i=e.length-1;this.optionList_.push(e[i]),n.push([t.varName_,t.floatMult_]),t=t.nextConnection&&t.nextConnection.targetBlock()}this.updateShape_();for(let e=0;e<n.length;e++)n[e][0]&&this.setFieldValue(n[e][0],"CPU"+e),n[e][1]&&this.setFieldValue(n[e][1],"MULT"+e)},saveConnections:function(e){let t=e.getInputTargetBlock("STACK"),n=0;for(;t;)t.varName_=this.getFieldValue("CPU"+n),t.floatMult_=this.getFieldValue("MULT"+n),n++,t=t.nextConnection&&t.nextConnection.targetBlock()},updateSerPin:_().Blocks.serial_send_text.updateSerPin,updateShape_:function(){let e=0;for(;this.getInput("OPTION"+e);)this.removeInput("OPTION"+e),e++;let t=null;for(this.getInput("SCAN_AFTER")&&(t=this.getInput("SCAN_AFTER").connection.targetBlock(),t&&t.outputConnection.disconnect(),this.removeInput("SCAN_AFTER")),e=0;e<this.optionList_.length;e++){const t=this.optionList_[e];let n="store ASCII character in";"dec"===t?n="store decimal number in":"hex"===t?n="store hexadecimal number in":"bin"===t&&(n="store binary number in"),"float"===t?(this.appendDummyInput("OPTION"+e).appendField("store float point ✕").appendField(new(_().FieldDropdown)(_().DROPDOWN_MULTIPLIER),"MULT"+e).appendField("in","TYPE"+e),this.setFieldValue("100","MULT"+e)):this.appendDummyInput("OPTION"+e).appendField(n,"TYPE"+e),this.getInput("OPTION"+e).appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"CPU"+e)}"AfterStr"===this.scanAfter?this.appendValueInput("SCAN_AFTER").appendField("start after text"):"AfterPos"===this.scanAfter&&this.appendValueInput("SCAN_AFTER").appendField("start from position"),t&&this.getInput("SCAN_AFTER")&&t.outputConnection.connect(this.getInput("SCAN_AFTER").connection)},onchange:_().Blocks.serial_send_text.onchange},_().Blocks.serial_scan_container={init:function(){this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("receive"),this.appendStatementInput("STACK"),this.contextMenu=!1}},_().propc.serial_scan_multiple=function(){let e="";this.ser_pins.length>0&&(e=this.ser_pins[0].replace(",","_").replace(/None/g,"N")),this.getInput("SERPIN")&&(e=this.getFieldValue("SER_PIN").replace(",","_").replace(/None/g,"N"));if(_().getMainWorkspace().getAllBlocks().toString().indexOf("Serial initialize")>-1){let t="dscan(fdser"+e+', "',n="",i="",o=0;for(;this.getFieldValue("CPU"+o);)this.getFieldValue("TYPE"+o).includes("store decimal number")?t+="%d":this.getFieldValue("TYPE"+o).includes("store ASCII character")?t+="%c":this.getFieldValue("TYPE"+o).includes("store hexadecimal number")?t+="%x":this.getFieldValue("TYPE"+o).includes("store binary number")?t+="%b":"in"===this.getFieldValue("TYPE"+o)&&(t+="%f"),"in"===this.getFieldValue("TYPE"+o)?(n+=", &__fpBuf"+o,i+=_().propc.variableDB_.getName(this.getFieldValue("CPU"+o),_().VARIABLE_CATEGORY_NAME),i+=" = (int) (__fpBuf"+o+" * "+this.getFieldValue("MULT"+o)+");\n",this.disabled||(_().propc.global_vars_["floatPointScanBuffer"+o]="float __fpBuf"+o+";")):n+=", &"+_().propc.variableDB_.getName(this.getFieldValue("CPU"+o),_().VARIABLE_CATEGORY_NAME),o++;return t+='"'+n+");\n"+i,t}return"// ERROR: Serial is not initialized!\n"},_().Blocks.serial_tx={helpUrl:_().MSG_PROTOCOLS_HELPURL,init:function(){this.setTooltip(_().MSG_SERIAL_TX_TOOLTIP),this.setColour("#FF8800"),this.appendDummyInput().appendField("Serial transmit").appendField(new(_().FieldDropdown)([["number (32-bit integer)","INT"],["byte (ASCII character)","BYTE"]]),"TYPE"),this.appendValueInput("VALUE").setCheck(null),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText("WARNING: This block has been deprecated\nand may not work correctly!\nPlease use one of the blocks\navailable in the menu.")}},_().propc.serial_tx=function(){return"// ERROR: This block has been deprecated, please use a different serial transmit block!\n"},_().Blocks.serial_rx={helpUrl:_().MSG_PROTOCOLS_HELPURL,init:function(){this.setTooltip(_().MSG_SERIAL_RX_TOOLTIP),this.setColour("#FF8800"),this.appendDummyInput().appendField("Serial receive").appendField(new(_().FieldDropdown)([["number (32-bit integer)","INT"],["byte (ASCII character)","BYTE"]]),"TYPE").appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText("WARNING: This block has been deprecated\nand may not work correctly!\nPlease use one of the blocks\navailable in the menu.")}},_().propc.serial_rx=function(){return"// ERROR: This block has been deprecated, please use a different serial receive block!\n"},_().Blocks.shift_in={helpUrl:_().MSG_PROTOCOLS_HELPURL,meta:{supportedBoardTypes:["activity-board","flip","heb","hebwx","other","propcfile","s3"]},init:function(){const e=[];for(let t=2;t<33;t++)e.push([t.toString(10),t.toString(10)]);this.setTooltip(_().MSG_SHIFT_IN_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("shift in").appendField(new(_().FieldDropdown)(e),"BITS").appendField("bits").appendField(new(_().FieldDropdown)([["MSB first","MSB"],["LSB first","LSB"]]),"MODE").appendField(new(_().FieldDropdown)([["before clock","PRE"],["after clock","POST"]]),"ORDER"),this.appendDummyInput("PINS"),this.setInputsInline(!0),this.setOutput(!0,"Number"),this.updateConstMenu()},updateConstMenu:function(e,t){this.userDefinedConstantsList_=[];const n=_().getMainWorkspace().getAllBlocks(!1);for(let i=0;i<n.length;i++)if("constant_define"===n[i].type){let o=n[i].getFieldValue("CONSTANT_NAME");o===e&&t&&(o=t),o&&this.userDefinedConstantsList_.push(o)}this.userDefinedConstantsList_=this.userDefinedConstantsList_.sortedUnique(),this.setPinMenus(e,t)},setPinMenus:function(e,t){const n=x(),i=this.getFieldValue("DATA"),o=this.getFieldValue("CLK");this.getInput("PINS")&&this.removeInput("PINS"),this.appendDummyInput("PINS").appendField("DATA").appendField(new(_().FieldDropdown)(n.digital.concat(this.userDefinedConstantsList_.map((function(e){return[e,e]})))),"DATA").appendField("CLK").appendField(new(_().FieldDropdown)(n.digital.concat(this.userDefinedConstantsList_.map((function(e){return[e,e]})))),"CLK"),i&&i===e&&t?this.setFieldValue(t,"DATA"):i&&this.setFieldValue(i,"DATA"),o&&o===e&&t?this.setFieldValue(t,"CLK"):o&&this.setFieldValue(o,"CLK")}},_().propc.shift_in=function(){const e=x();let t=this.getFieldValue("DATA"),n=this.getFieldValue("CLK");const i=this.getFieldValue("BITS"),o=this.getFieldValue("MODE"),s=this.getFieldValue("ORDER");return-1===e.digital.toString().indexOf(t+","+t)&&(t="MY_"+t),-1===e.digital.toString().indexOf(n+","+n)&&(n="MY_"+n),["shift_in("+t+", "+n+", "+o+s+", "+i+")",_().propc.ORDER_NONE]},_().Blocks.shift_out={helpUrl:_().MSG_PROTOCOLS_HELPURL,init:function(){const e=[];for(let t=2;t<33;t++)e.push([t.toString(10),t.toString(10)]);this.setTooltip(_().MSG_SHIFT_OUT_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendValueInput("VALUE").setCheck("Number").appendField("shift out the").appendField(new(_().FieldDropdown)(e),"BITS").appendField("lowest bits of"),this.appendDummyInput().appendField(new(_().FieldDropdown)([["MSB first","MSBFIRST"],["LSB first","LSBFIRST"]]),"MODE"),this.appendDummyInput("PINS"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.updateConstMenu()},updateConstMenu:_().Blocks.shift_in.updateConstMenu,setPinMenus:_().Blocks.shift_in.setPinMenus},_().propc.shift_out=function(){const e=x(),t=this.getFieldValue("BITS"),n=this.getFieldValue("MODE");let i=this.getFieldValue("DATA"),o=this.getFieldValue("CLK");const s=_().propc.valueToCode(this,"VALUE",_().propc.ORDER_NONE)||"0";return-1===e.digital.toString().indexOf(i+","+i)&&(i="MY_"+i),-1===e.digital.toString().indexOf(o+","+o)&&(o="MY_"+o),"shift_out("+i+", "+o+", "+n+", "+t+", "+s+");\n"},_().Blocks.debug_lcd_init={helpUrl:_().MSG_SERIAL_LCD_HELPURL,init:function(){this.setTooltip(_().MSG_DEBUG_LCD_INIT_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput("PINS"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.updateConstMenu()},updateConstMenu:_().Blocks.shift_in.updateConstMenu,setPinMenus:function(e,t){const n=x(),i=this.getFieldValue("PIN"),o=this.getFieldValue("BAUD");this.getInput("PINS")&&this.removeInput("PINS"),this.appendDummyInput("PINS").appendField("Serial LCD initialize PIN").appendField(new(_().FieldDropdown)(n.digital.concat(this.userDefinedConstantsList_.map((function(e){return[e,e]})))),"PIN").appendField("baud").appendField(new(_().FieldDropdown)([["2400","2400"],["9600","9600"],["19200","19200"]]),"BAUD"),this.setFieldValue(o,"BAUD"),i&&i===e&&t?this.setFieldValue(t,"PIN"):i&&this.setFieldValue(i,"PIN")}},_().propc.debug_lcd_init=function(){if(!this.disabled){const e=x();let t=this.getFieldValue("PIN");-1===e.digital.toString().indexOf(t+","+t)&&(t="MY_"+t);const n=this.getFieldValue("BAUD");_().propc.global_vars_.setup_debug_lcd="serial *serial_lcd;",_().propc.setups_.setup_debug_lcd="serial_lcd  = serial_open("+t+", "+t+", 0, "+n+");"}return-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("Serial LCD initialize")?"// ERROR: LCD is not initialized!\n":"writeChar(serial_lcd, 22);\npause(5);\n"},_().Blocks.debug_lcd_music_note={helpUrl:_().MSG_SERIAL_LCD_HELPURL,init:function(){this.setTooltip(_().MSG_DEBUG_LCD_MUSIC_NOTE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Serial LCD play note").appendField(new(_().FieldDropdown)([["C","223"],["C#","224"],["D","225"],["D#","226"],["E","227"],["F","228"],["F#","229"],["G","230"],["G#","231"],["A","220"],["A#","221"],["B","222"],["no note (rest)","232"]]),"NOTE").appendField("octave").appendField(new(_().FieldDropdown)([["3rd","215"],["4th","216"],["5th","217"],["6th","218"],["7th","219"]]),"OCTAVE").appendField("length").appendField(new(_().FieldDropdown)([["whole (2 s)","214"],["half (1 s)","213"],["quarter (500 ms)","212"],["eigth (250 ms)","211"],["sixteenth (125 ms)","210"],["thirty-second (63 ms)","209"],["sixty-fourth (31 ms)","208"]]),"LENGTH"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null)},onchange:function(){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("LCD initialize")?this.setWarningText("WARNING: You must use an LCD\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.debug_lcd_music_note=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("Serial LCD initialize"))return"// ERROR: LCD is not initialized!\n";{const e=this.getFieldValue("NOTE"),t=this.getFieldValue("OCTAVE"),n=this.getFieldValue("LENGTH");let i="";return i+="writeChar(serial_lcd, "+t+");\n",i+="writeChar(serial_lcd, "+n+");\n",i+="writeChar(serial_lcd, "+e+");\n",i}},_().Blocks.debug_lcd_print={init:function(){this.setHelpUrl(_().MSG_SERIAL_LCD_HELPURL),this.setTooltip(_().MSG_DEBUG_LCD_PRINT_TOOLTIP),this.setColour(X.getColor("protocols"));let e="Serial";this.type.indexOf("parallel")>-1&&(e="Parallel",this.setHelpUrl(_().MSG_PARALLEL_LCD_HELPURL)),this.appendValueInput("MESSAGE").setCheck("String").appendField(e+" LCD print text "),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null)},onchange:function(){const e=_().getMainWorkspace().getAllBlocks().toString();-1===e.indexOf("Serial LCD initialize")&&"debug_lcd_print"===this.type||-1===e.indexOf("Parallel LCD initialize")&&"parallel_lcd_print"===this.type?this.setWarningText("WARNING: You must use an LCD\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.debug_lcd_print=function(){const e=_().getMainWorkspace().getAllBlocks().toString();let t="serial";if("parallel_lcd_print"===this.type&&(t="parallel"),-1===e.indexOf("Serial LCD initialize")&&"serial"===t||-1===e.indexOf("Parallel LCD initialize")&&"parallel"===t)return"// ERROR: LCD is not initialized!\n";return"dprint("+t+"_lcd, "+_().propc.valueToCode(this,"MESSAGE",_().propc.ORDER_NONE).replace(/%/g,"%%")+");\n"},_().Blocks.debug_lcd_number={init:function(){this.setHelpUrl(_().MSG_SERIAL_LCD_HELPURL),this.setTooltip(_().MSG_DEBUG_LCD_NUMBER_TOOLTIP),this.setColour(X.getColor("protocols"));let e="Serial";this.type.indexOf("parallel")>-1&&(e="Parallel",this.setHelpUrl(_().MSG_PARALLEL_LCD_HELPURL)),this.appendValueInput("VALUE").setCheck("Number").appendField(e+" LCD print number"),this.appendDummyInput().appendField("as").appendField(new(_().FieldDropdown)([["Decimal","DEC"],["Hexadecimal","HEX"],["Binary","BIN"]]),"FORMAT"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null)},onchange:function(){const e=_().getMainWorkspace().getAllBlocks().toString();-1===e.indexOf("Serial LCD initialize")&&"debug_lcd_number"===this.type||-1===e.indexOf("Parallel LCD initialize")&&"parallel_lcd_number"===this.type?this.setWarningText("WARNING: You must use an LCD\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.debug_lcd_number=function(){let e="",t="serial";if("parallel_lcd_print"===this.type&&(t="parallel"),0===_().getMainWorkspace().getBlocksByType("debug_lcd_init",!1).length&&"serial"===t||0===_().getMainWorkspace().getBlocksByType("parallel_lcd_init",!1).length&&"parallel"===t)e+="// ERROR: LCD is not initialized!\n";else{const n=_().propc.valueToCode(this,"VALUE",_().propc.ORDER_ATOMIC),i=this.getFieldValue("FORMAT");e+="dprint("+t+"_lcd, ",e+="BIN"===i?'"%b"':"HEX"===i?'"%x"':'"%d"',e+=", "+n+");"}return e},_().Blocks.debug_lcd_action={helpUrl:_().MSG_SERIAL_LCD_HELPURL,init:function(){this.setTooltip(_().MSG_DEBUG_LCD_ACTION_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Serial LCD command").appendField(new(_().FieldDropdown)([["clear screen","12"],["move cursor right","9"],["move cursor left","8"],["move cursor down","10"],["carriage return","13"],["backlight on","17"],["backlight off","18"],["display off","21"],["display on, cursor off","22"],["display on, cursor off, blink","23"],["display on, cursor on","24"],["display on, cursor on, blink","25"]]),"ACTION"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null)},onchange:function(){0===_().getMainWorkspace().getBlocksByType("debug_lcd_init",!1).length?this.setWarningText("WARNING: You must use an LCD\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.debug_lcd_action=function(){if(0===_().getMainWorkspace().getBlocksByType("debug_lcd_init",!1).length)return"// ERROR: LCD is not initialized!\n";{let e="";return e+="writeChar(serial_lcd, "+this.getFieldValue("ACTION")+");\n",e+="pause(5);\n",e}},_().Blocks.debug_lcd_set_cursor={init:function(){this.setHelpUrl(_().MSG_SERIAL_LCD_HELPURL),this.setTooltip(_().MSG_DEBUG_LCD_SET_CURSOR_TOOLTIP),this.setColour(X.getColor("protocols"));let e="Serial";this.type.indexOf("parallel")>-1&&(e="Parallel",this.setHelpUrl(_().MSG_PARALLEL_LCD_HELPURL)),this.appendValueInput("ROW").appendField(e+" LCD set cursor row").setCheck("Number"),this.appendValueInput("COLUMN").appendField("column").setCheck("Number"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null)},onchange:function(){const e=_().getMainWorkspace().getAllBlocks().toString();-1===e.indexOf("Serial LCD initialize")&&"debug_lcd_set_cursor"===this.type||-1===e.indexOf("Parallel LCD initialize")&&"parallel_lcd_set_cursor"===this.type?this.setWarningText("WARNING: You must use an LCD\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.debug_lcd_set_cursor=function(){if(0===_().getMainWorkspace().getBlocksByType("debug_lcd_init",!1).length&&"debug_lcd_set_cursor"===this.type||0===_().getMainWorkspace().getBlocksByType("parallel_lcd_init",!1).length&&"parallel_lcd_set_cursor"===this.type)return"// LCD is not initialized!\n";{const e=_().propc.valueToCode(this,"ROW",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"COLUMN",_().propc.ORDER_NONE);return"debug_lcd_set_cursor"===this.type?"writeChar(serial_lcd, (128 + (constrainInt("+e+", 0, 3) * 20) + constrainInt("+t+", 0, 19)));\n":"lcdParallel_setCursor(parallel_lcd, "+t+", char "+e+");"}},_().Blocks.debug_lcd_print_multiple={init:function(){this.setHelpUrl(_().MSG_SERIAL_LCD_HELPURL),this.setTooltip(_().MSG_DEBUG_LCD_PRINT_MULTIPLE_TOOLTIP),this.setColour(X.getColor("protocols"));let e="Serial";this.type.indexOf("parallel")>-1&&(e="Parallel",this.setHelpUrl(_().MSG_PARALLEL_LCD_HELPURL)),this.appendDummyInput().appendField(e+" LCD print"),this.appendValueInput("PRINT0").setAlign(_().ALIGN_RIGHT).setCheck("String").appendField("text"),this.appendValueInput("PRINT1").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("decimal number"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!1),this.setMutator(new(_().Mutator)(["console_print_str","console_print_dec","console_print_hex","console_print_bin","console_print_float","console_print_char"])),this.optionList_=["str","dec"],this.specDigits_=!1,this.setWarningText(null)},mutationToDom:_().Blocks.console_print_multiple.mutationToDom,domToMutation:_().Blocks.console_print_multiple.domToMutation,decompose:_().Blocks.console_print_multiple.decompose,compose:_().Blocks.console_print_multiple.compose,saveConnections:_().Blocks.console_print_multiple.saveConnections,onchange:function(){let e=null;this.workspace&&this.optionList_.length<1&&(e="LCD print multiple must have at least one term."),(0===_().getMainWorkspace().getBlocksByType("debug_lcd_init",!1).length&&"debug_lcd_print_multiple"===this.type||0===_().getMainWorkspace().getBlocksByType("parallel_lcd_init",!1).length&&"parallel_lcd_print_multiple"===this.type)&&(e="WARNING: You must use an LCD\ninitialize block at the beginning of your program!"),this.setWarningText(e)}},_().propc.debug_lcd_print_multiple=_().propc.console_print_multiple,_().Blocks.xbee_setup={helpUrl:_().MSG_XBEE_HELPURL,init:function(){this.setTooltip(_().MSG_XBEE_SETUP_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput("PINS"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.updateConstMenu()},updateConstMenu:_().Blocks.shift_in.updateConstMenu,setPinMenus:function(e,t){const n=x(),i=this.getFieldValue("DO_PIN"),o=this.getFieldValue("DI_PIN"),s=this.getFieldValue("BAUD");this.getInput("PINS")&&this.removeInput("PINS"),this.appendDummyInput("PINS").appendField("XBee initialize DI").appendField(new(_().FieldDropdown)(n.digital.concat(this.userDefinedConstantsList_.map((function(e){return[e,e]})))),"DO_PIN").appendField("DO").appendField(new(_().FieldDropdown)(n.digital.concat(this.userDefinedConstantsList_.map((function(e){return[e,e]})))),"DI_PIN").appendField("baud").appendField(new(_().FieldDropdown)([["9600","9600"],["2400","2400"],["4800","4800"],["19200","19200"],["57600","57600"],["115200","115200"]]),"BAUD"),this.setFieldValue(s,"BAUD"),i&&i===e&&t?this.setFieldValue(t,"DO_PIN"):i&&this.setFieldValue(i,"DO_PIN"),o&&o===e&&t?this.setFieldValue(t,"DI_PIN"):o&&this.setFieldValue(o,"DI_PIN")}},_().propc.xbee_setup=function(){if(!this.disabled){const e=x();let t=this.getFieldValue("DI_PIN"),n=this.getFieldValue("DO_PIN");-1===e.digital.toString().indexOf(t+","+t)&&(t="MY_"+t),-1===e.digital.toString().indexOf(n+","+n)&&(n="MY_"+n);const i=[t,n,"0",this.getFieldValue("BAUD")];_().propc.definitions_["include fdserial"]='#include "fdserial.h"',_().propc.global_vars_.xbee="fdserial *xbee;",_().propc.setups_.xbee="xbee = fdserial_open("+i.join(",")+");"}return""},_().Blocks.xbee_transmit={helpUrl:_().MSG_XBEE_HELPURL,init:function(){this.setTooltip(_().MSG_XBEE_TRANSMIT_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("XBee transmit").appendField(new(_().FieldDropdown)([["text","TEXT"],["decimal number","INT"],["hexadecimal number","HEX"],["binary number","BIN"],["ASCII character","BYTE"]]),"TYPE"),this.appendValueInput("VALUE").setCheck(null),this.appendDummyInput("NEWLINE").appendField("then a carriage return").appendField(new(_().FieldCheckbox)("TRUE"),"ck_nl"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:function(){-1===_().getMainWorkspace().getAllBlocks(!1).toString().indexOf("XBee initialize")?this.setWarningText("WARNING: You must use an XBee\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.xbee_transmit=function(){if(-1===_().getMainWorkspace().getAllBlocks(!1).toString().indexOf("XBee initialize"))return"// ERROR: XBee is not initialized!\n";{const e=this.getFieldValue("TYPE");let t=_().propc.valueToCode(this,"VALUE",_().propc.ORDER_ATOMIC)||"0",n=this.getFieldValue("ck_nl");if(n="TRUE"===n?"\\r":"","BYTE"===e)return 3===t.length&&"'"===t[0]&&"'"===t[2]||(t!==t.replace(/[^0-9]+/g,"")?t="("+t+" & 0xFF)":0<parseInt(t)&&parseInt(t)<256||(t="("+t+" & 0xFF)")),"fdserial_txChar(xbee, "+t+");\n";if("INT"===e)return'dprint(xbee, "%d'+n+'", '+t+");\n";if("HEX"===e)return'dprint(xbee, "%x'+n+'", '+t+");\n";if("BIN"===e)return'dprint(xbee, "%b'+n+'", '+t+");\n";{let e='dprint(xbee, "%s'+n+'", '+t.replace(/%/g,"%%")+");\n";return e+="while(!fdserial_txEmpty(xbee));\n",e+="pause(5);\n",e}}},_().Blocks.xbee_receive={helpUrl:_().MSG_XBEE_HELPURL,init:function(){this.setTooltip(_().MSG_XBEE_RECEIVE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("XBee receive").appendField(new(_().FieldDropdown)([["text","TEXT"],["decimal number","INT"],["hexadecimal number","HEX"],["binary number","BIN"],["ASCII character","BYTE"]]),"TYPE").appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null)},onchange:function(){-1===_().getMainWorkspace().getAllBlocks(!1).toString().indexOf("XBee initialize")?this.setWarningText("WARNING: You must use an XBee\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.xbee_receive=function(){if(-1===_().getMainWorkspace().getAllBlocks(!1).toString().indexOf("XBee initialize"))return"// ERROR: XBee is not initialized!\n";{const e=_().propc.variableDB_.getName(this.getFieldValue("VALUE"),_().VARIABLE_CATEGORY_NAME),t=this.getFieldValue("TYPE");return"BYTE"===t?e+" = fdserial_rxChar(xbee);\n":"INT"===t?'dscan(xbee, "%d", &'+e+");\n":"BIN"===t?'dscan(xbee, "%b", &'+e+");\n":"HEX"===t?'dscan(xbee, "%x", &'+e+");\n":(_().propc.vartype_[e]="char *",'dscan(xbee, "%s", '+e+");\n")}},_().Blocks.xbee_print_multiple={helpUrl:_().MSG_XBEE_HELPURL,init:function(){this.setTooltip(_().MSG_XBEE_PRINT_MULTIPLE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("XBee transmit"),this.appendValueInput("PRINT0").setAlign(_().ALIGN_RIGHT).setCheck("String").appendField("text"),this.appendValueInput("PRINT1").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("decimal number"),this.appendDummyInput("NEWLINE").appendField("then a carriage return").appendField(new(_().FieldCheckbox)("TRUE"),"ck_nl"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!1),this.setMutator(new(_().Mutator)(["console_print_str","console_print_dec","console_print_hex","console_print_bin","console_print_float","console_print_char"])),this.optionList_=["str","dec"],this.setWarningText(null)},mutationToDom:_().Blocks.console_print_multiple.mutationToDom,domToMutation:_().Blocks.console_print_multiple.domToMutation,decompose:_().Blocks.console_print_multiple.decompose,compose:_().Blocks.console_print_multiple.compose,saveConnections:_().Blocks.console_print_multiple.saveConnections,onchange:function(){if(-1===_().getMainWorkspace().getAllBlocks(!1).toString().indexOf("XBee initialize"))this.setWarningText("WARNING: You must use a XBee\ninitialize block at the beginning of your program!");else{let e=null;this.workspace&&this.optionList_.length<1&&(e="XBee transmit multiple must have at least one term."),this.setWarningText(e)}}},_().propc.xbee_print_multiple=_().propc.console_print_multiple,_().Blocks.xbee_scan_multiple={helpUrl:_().MSG_XBEE_HELPURL,init:function(){this.setTooltip(_().MSG_XBEE_SCAN_MULTIPLE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("XBee receive"),this.optionList_=["dec","char"],this.updateShape_(),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setMutator(new(_().Mutator)(["console_print_dec","console_print_hex","console_print_bin","console_print_float","console_print_char"])),this.setWarningText(null),this.ser_pins=[]},mutationToDom:_().Blocks.serial_scan_multiple.mutationToDom,domToMutation:_().Blocks.serial_scan_multiple.domToMutation,decompose:_().Blocks.serial_scan_multiple.decompose,compose:_().Blocks.serial_scan_multiple.compose,saveConnections:_().Blocks.serial_scan_multiple.saveConnections,updateShape_:_().Blocks.serial_scan_multiple.updateShape_,updateSerPin:function(){},onchange:function(){let e=null;-1===_().getMainWorkspace().getAllBlocks(!1).toString().indexOf("XBee initialize")&&(e="WARNING: You must use an XBee\ninitialize block at the beginning of your program!"),this.workspace&&this.optionList_.length<1&&(e="XBee receive must have at least one search term."),this.setWarningText(e)}},_().propc.xbee_scan_multiple=function(){if(_().getMainWorkspace().getAllBlocks().toString().indexOf("XBee initialize")>-1){let e='dscan(xbee, "',t="",n="",i=0;for(;this.getFieldValue("CPU"+i);)this.getFieldValue("TYPE"+i).includes("store decimal number")?e+="%d":this.getFieldValue("TYPE"+i).includes("store ASCII character")?e+="%c":this.getFieldValue("TYPE"+i).includes("store hexadecimal number")?e+="%x":this.getFieldValue("TYPE"+i).includes("store binary number")?e+="%b":"in"===this.getFieldValue("TYPE"+i)&&(e+="%f"),"in"===this.getFieldValue("TYPE"+i)?(t+=", &__fpBuf"+i,n+=_().propc.variableDB_.getName(this.getFieldValue("CPU"+i),_().VARIABLE_CATEGORY_NAME),n+=" = (int) (__fpBuf"+i+" * "+this.getFieldValue("MULT"+i)+");\n",this.disabled||(_().propc.global_vars_["floatPointScanBuffer"+i]="float __fpBuf"+i+";")):t+=", &"+_().propc.variableDB_.getName(this.getFieldValue("CPU"+i),_().VARIABLE_CATEGORY_NAME),i++;return e+='"'+t+");\n"+n,e}return"// ERROR: XBee is not initialized!\n"},_().Blocks.ws2812b_init={init:function(){const e=x();let t=_().MSG_WS2812B_INIT_TOOLTIP,n=_().MSG_WS2812B_HELPURL;"heb-wx"===G().boardType.name&&(t=_().MSG_BADGE_RGB_INIT_TOOLTIP,n=_().MSG_WS2812B_HELPURL),this.setTooltip(t),this.setHelpUrl(n),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("protocols")),"heb-wx"===G().boardType.name?this.appendDummyInput().appendField("RGB-LED set number of LEDs").appendField(new(_().FieldNumber)("4",null,null,1),"LEDNUM"):(this.appendDummyInput().appendField("RGB-LED initialize PIN").appendField(new(_().FieldDropdown)(e.digital,(function(e){this.getSourceBlock().onPinSet(e)})),"PIN").appendField("number of LEDs").appendField(new(_().FieldNumber)("4",null,null,1),"LEDNUM").appendField("type").appendField(new(_().FieldDropdown)([["WS2812","WS2812"]]),"TYPE"),this.rgbPin=this.getFieldValue("PIN"),this.onPinSet())},onchange:function(e){this.rgbPin=this.getFieldValue("PIN"),e&&(e.oldXml||e.xml)&&this.onPinSet(null)},onPinSet:function(e){const t=this.rgbPin;this.rgbPin=e;const n=_().getMainWorkspace().getAllBlocks();for(let i=0;i<n.length;i++){const o=n[i].rgbPins,s=n[i].onchange;o&&e?(o.call(n[i],t,e),s&&s.call(n[i],{xml:!0})):o&&o.call(n[i])}}},_().propc.ws2812b_init=function(){if(!this.disabled){let e="";"heb-wx"!==G().boardType.name&&(e=this.getFieldValue("PIN"));let t=window.parseInt(this.getFieldValue("LEDNUM"))||"4";t<1&&(t=1),t>1500&&(t=1500),_().propc.definitions_.ws2812b_def='#include "ws2812.h"',_().propc.definitions_["ws2812b_sets"+e]="";const n=x();n&&"heb-wx"!==n.name&&(_().propc.definitions_["ws2812b_sets"+e]+="#define RGB_PIN"+e+"   "+e),_().propc.definitions_["ws2812b_sets"+e]+="\n#define RGB_COUNT"+e+"   "+t,_().propc.global_vars_["ws2812b_array"+e]="ws2812 *ws2812b"+e+";\nint RGBleds"+e+"["+t+"];\n",_().propc.setups_["ws2812b_init"+e]="ws2812b"+e+" = ws2812b_open();"}return""},_().Blocks.ws2812b_set={init:function(){let e=_().MSG_WS2812B_HELPURL;"heb-wx"===G().boardType.name&&(e=_().MSG_BADGE_LEDS_HELPURL),this.setHelpUrl(e),this.setTooltip(_().MSG_WS2812B_SET_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendValueInput("LED").setCheck("Number").appendField("RGB-LED set LED number"),this.appendValueInput("COLOR").setCheck("Number").appendField("to color"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null),this.rgb_pins=[],this.warnFlag=0,"heb-wx"!==G().boardType.name&&this.rgbPins()},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("pinmenu",JSON.stringify(this.rgb_pins)),this.getInput("RGBPIN")&&e.setAttribute("rgbpin",this.getFieldValue("RGB_PIN")),e},domToMutation:function(e){let t=e.getAttribute("rgbpin");this.rgb_pins=JSON.parse(e.getAttribute("pinmenu")),Array.isArray(this.rgb_pins)&&(this.rgb_pins=this.rgb_pins.map((function(e){return e[0]}))),"null"===t&&(t=null),this.getInput("RGBPIN")&&this.removeInput("RGBPIN"),t&&(this.appendDummyInput("RGBPIN").appendField("PIN").appendField(new(_().FieldDropdown)(this.rgb_pins.map((function(e){return[e,e]}))),"RGB_PIN"),this.setFieldValue(t,"RGB_PIN"))},rgbPins:function(e,t){let n="-1";this.rgb_pins.length>0&&(n=this.rgb_pins[0]),this.rgb_pins.length=0,this.getInput("RGBPIN")&&(n=this.getFieldValue("RGB_PIN")),this.updateRGBpin(),this.getInput("RGBPIN")&&this.removeInput("RGBPIN"),this.rgb_pins.length>1&&(this.appendDummyInput("RGBPIN").appendField("PIN").appendField(new(_().FieldDropdown)(this.rgb_pins.map((function(e){return[e,e]}))),"RGB_PIN"),n===e||null===e?this.setFieldValue(t,"RGB_PIN"):this.getInput("RGBPIN")&&"-1"!==n&&this.setFieldValue(n,"RGB_PIN"))},updateRGBpin:function(){const e=_().getMainWorkspace().getAllBlocks();this.rgb_pins.length=0;for(let t=0;t<e.length;t++)if("ws2812b_init"===e[t].type){const n=e[t].rgbPin||e[t].getFieldValue("PIN");n&&this.rgb_pins.push(n)}this.rgb_pins=this.rgb_pins.sortedUnique()},onchange:function(e){if(e&&"heb-wx"!==G().boardType.name&&(e.type==_().Events.BLOCK_CREATE||e.type==_().Events.BLOCK_DELETE||"RGB_PIN"===e.name&&e.blockId===this.id||this.warnFlag>0)){const e=_().getMainWorkspace().getAllBlocks();if(-1===e.toString().indexOf("RGB-LED initialize"))this.setWarningText("WARNING: You must use an RGB-LED\ninitialize block at the beginning of your program!");else if(this.setWarningText(null),this.warnFlag--,this.getInput("RGBPIN")){let t="";for(let n=0;n<e.length;n++)"ws2812b_init"===e[n].type&&(t+=(e[n].rgbPin||e[n].getFieldValue("PIN"))+",");-1===t.indexOf(this.getFieldValue("RGB_PIN"))&&(this.setWarningText("WARNING: You must use choose a new PIN for this block!"),this.warnFlag=3*e.length)}}}},_().propc.ws2812b_set=function(){const e=_().getMainWorkspace().getAllBlocks();if(this.updateRGBpin(),-1===e.toString().indexOf("RGB-LED initialize")&&-1===e.toString().indexOf("RGB-LED set number")&&"heb-wx"!==G().boardType.name)return"// ERROR: RGB-LED is not initialized!\n";const t=_().propc.valueToCode(this,"LED",_().propc.ORDER_NONE),n=_().propc.valueToCode(this,"COLOR",_().propc.ORDER_NONE)||"0x555555";let i="0";"heb-wx"===G().boardType.name?i="":(this.rgb_pins.length>0&&(i=this.rgb_pins[0]),this.getInput("RGBPIN")&&(i=this.getFieldValue("RGB_PIN")));return"RGBleds"+i+"[constrainInt("+t+", 1, RGB_COUNT"+i+") - 1] = "+n+";\n"},_().Blocks.ws2812b_set_multiple={init:function(){let e=_().MSG_WS2812B_HELPURL;"heb-wx"===G().boardType.name&&(e=_().MSG_BADGE_LEDS_HELPURL),this.setHelpUrl(e),this.setTooltip(_().MSG_WS2812B_MULTIPLE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendValueInput("START").setCheck("Number").appendField("RGB-LED set LEDs from"),this.appendValueInput("END").setCheck("Number").appendField("to"),this.appendValueInput("COLOR").setCheck("Number").appendField("to color"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null),this.rgb_pins=[],"heb-wx"!==G().boardType.name&&this.rgbPins()},mutationToDom:_().Blocks.ws2812b_set.mutationToDom,domToMutation:_().Blocks.ws2812b_set.domToMutation,rgbPins:_().Blocks.ws2812b_set.rgbPins,updateRGBpin:_().Blocks.ws2812b_set.updateRGBpin,onchange:_().Blocks.ws2812b_set.onchange},_().propc.ws2812b_set_multiple=function(){this.updateRGBpin();const e=_().getMainWorkspace().getAllBlocks().toString();if(-1===e.indexOf("RGB-LED initialize")&&e.toString().indexOf("RGB-LED set number")&&"heb-wx"!==G().boardType.name)return"// ERROR: RGB-LED is not initialized!\n";const t=_().propc.valueToCode(this,"START",_().propc.ORDER_NONE),n=_().propc.valueToCode(this,"END",_().propc.ORDER_NONE),i=_().propc.valueToCode(this,"COLOR",_().propc.ORDER_NONE)||"0x555555";let o="0";"heb-wx"===G().boardType.name?o="":(this.rgb_pins.length>0&&(o=this.rgb_pins[0]),this.getInput("RGBPIN")&&(o=this.getFieldValue("RGB_PIN")));let s="";return s+="for(int __ldx = "+t+"; __ldx <= "+n+"; __ldx++) {",s+="RGBleds"+o+"[constrainInt(__ldx, 1, RGB_COUNT"+o+") - 1] = "+i+";}",s},_().Blocks.ws2812b_update={init:function(){let e=_().MSG_WS2812B_HELPURL;"heb-wx"===G().boardType.name&&(e=_().MSG_BADGE_LEDS_HELPURL),this.setHelpUrl(e),this.setTooltip(_().MSG_WS2812B_UPDATE_TOOLTIP),this.appendDummyInput().appendField("RGB-LED update LEDs"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null),this.rgb_pins=[],this.setColour(X.getColor("protocols")),"heb-wx"!==G().boardType.name&&this.rgbPins()},mutationToDom:_().Blocks.ws2812b_set.mutationToDom,domToMutation:_().Blocks.ws2812b_set.domToMutation,rgbPins:_().Blocks.ws2812b_set.rgbPins,updateRGBpin:_().Blocks.ws2812b_set.updateRGBpin,onchange:_().Blocks.ws2812b_set.onchange},_().propc.ws2812b_update=function(){this.updateRGBpin();const e=_().getMainWorkspace().getAllBlocks().toString();if(-1===e.indexOf("RGB-LED initialize")&&e.toString().indexOf("RGB-LED set number")){if("heb-wx"!==G().boardType.name)return"// ERROR: RGB-LED is not initialized!\n";this.disabled||(_().propc.definitions_.ws2812b_def='#include "ws2812.h"',_().propc.definitions_.ws2812b_sets="#define RGB_COUNT   4",_().propc.global_vars_.ws2812b_array="ws2812 *ws2812b;\nint RGBleds[4];\n",_().propc.setups_.ws2812b_init="ws2812b = ws2812b_open();")}let t="";return"heb-wx"!==G().boardType.name&&(this.rgb_pins.length>0&&(t=this.rgb_pins[0]),this.getInput("RGBPIN")&&(t=this.getFieldValue("RGB_PIN"))),"ws2812_set(ws2812b"+t+", RGB_PIN"+t+", RGBleds"+t+", RGB_COUNT"+t+");\n"},_().Blocks.wx_init_adv={helpUrl:_().MSG_AWX_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_AWX_INIT_ADV_TOOLTIP);new(_().FieldColour)("#FFFFFF").setColours(["#FFFFFF","#000000"]).setColumns(2),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("WX initialize  mode").appendField(new(_().FieldDropdown)([["Terminal on USB","USB_PGM_TERM"],["Terminal on WX","USB_PGM"],["Term & Programming on WX","WX_ALL_COM"]],(function(e){"WX_ALL_COM"===e&&this.getSourceBlock().setFieldValue("30","DI")})),"MODE").appendField(" DI").appendField(new(_().FieldDropdown)([["WX Socket","30"]].concat(e.digital),(function(e){this.getSourceBlock().updateShape_(e)})),"DI"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},mutationToDom:function(){const e=document.createElement("mutation"),t=this.getFieldValue("DI");return e.setAttribute("pin",t),e},domToMutation:function(e){const t=e.getAttribute("pin");this.updateShape_(t)},updateShape_:function(e){const t=x();"30"===e&&this.getInput("DOPIN")?this.removeInput("DOPIN"):this.getInput("DOPIN")||this.appendDummyInput("DOPIN").appendField("DO").appendField(new(_().FieldDropdown)(t.digital),"DO")},onchange:function(){const e=_().getMainWorkspace().getAllBlocks();let t=null;for(let n=0;n<e.length;n++)0===e[n].toString().indexOf("Simple WX")&&(t="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");this.setWarningText(t)}},_().propc.wx_init_adv=function(){if(!this.disabled){const e=this.getFieldValue("DI")||"30";let t=this.getFieldValue("DO")||"31";"30"===e&&(t="31");const n=this.getFieldValue("MODE")||"WX_ALL_COM";_().propc.definitions_.wx_def='#include "wifi.h"',_().propc.setups_.wx_init="wifi_start("+t+", "+e+", 115200, "+n+");"}return""},_().Blocks.wx_scan_multiple={helpUrl:_().MSG_AWX_HELPURL,init:function(){this.setTooltip(_().MSG_AWX_SCAN_MULTIPLE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("WX scan").appendField(new(_().FieldDropdown)([["POST","POST"],["TCP","TCP"],["Websocket","WS"],["Command","CMD"]],(function(e){this.getSourceBlock().setPrefix_(e)})),"CONNECTION").appendField("from handle").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"HANDLE"),this.appendDummyInput("PREFIX").appendField("string starts with").appendField(new(_().FieldTextInput)("txt"),"START"),this.optionList_=["dec","char"],this.updateShape_(),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setMutator(new(_().Mutator)(["console_print_dec","console_print_hex","console_print_bin","console_print_float","console_print_char"])),this.setWarningText(null),this.ser_pins=[]},setPrefix_:function(e){const t=this.getFieldValue("START");this.getInput("PREFIX")&&this.removeInput("PREFIX"),"POST"===e&&(this.appendDummyInput("PREFIX").appendField("string starts with").appendField(new(_().FieldTextInput)("txt"),"START"),this.setFieldValue(t||"","START"))},mutationToDom:_().Blocks.serial_scan_multiple.mutationToDom,domToMutation:_().Blocks.serial_scan_multiple.domToMutation,decompose:_().Blocks.serial_scan_multiple.decompose,compose:_().Blocks.serial_scan_multiple.compose,saveConnections:_().Blocks.serial_scan_multiple.saveConnections,updateShape_:_().Blocks.serial_scan_multiple.updateShape_,updateSerPin:function(){},onchange:function(){const e=_().getMainWorkspace().getAllBlocks();if(-1===e.toString().indexOf("WX initialize")&&"heb-wx"!==G().boardType.name)this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");else{let t=null;for(let n=0;n<e.length;n++)0===e[n].toString().indexOf("Simple WX")&&(t="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");this.optionList_&&this.workspace&&this.optionList_.length<1&&(t="WX scan must have at least one search term."),this.setWarningText(t)}}},_().propc.wx_scan_multiple=function(){const e=_().getMainWorkspace().getAllBlocks();if("heb-wx"===G().boardType.name&&(_().propc.definitions_.wx_def='#include "wifi.h"',_().propc.setups_.wx_init="wifi_start(31, 30, 115200, WX_ALL_COM);"),e.toString().indexOf("WX initialize")>-1||"heb-wx"===G().boardType.name){const e=_().propc.variableDB_.getName(this.getFieldValue("HANDLE"),_().VARIABLE_CATEGORY_NAME),t=this.getFieldValue("CONNECTION");let n=this.getFieldValue("START").replace(/'/g,"\\'").replace(/"/g,'\\"');"POST"!==t&&(n="");let i="wifi_scan("+t+", "+e+', "'+n,o="",s="",l=0;for(;this.getFieldValue("CPU"+l);)this.getFieldValue("TYPE"+l).includes("store decimal number")?i+="%d":this.getFieldValue("TYPE"+l).includes("store ASCII character")?i+="%c":this.getFieldValue("TYPE"+l).includes("store hexadecimal number")?i+="%x":this.getFieldValue("TYPE"+l).includes("store binary number")?i+="%b":"in"===this.getFieldValue("TYPE"+l)&&(i+="%f"),"in"===this.getFieldValue("TYPE"+l)?(o+=", &__fpBuf"+l,s+=_().propc.variableDB_.getName(this.getFieldValue("CPU"+l),_().VARIABLE_CATEGORY_NAME),s+=" = (int) (__fpBuf"+l+" * "+this.getFieldValue("MULT"+l)+");\n",this.disabled||(_().propc.global_vars_["floatPointScanBuffer"+l]="float __fpBuf"+l+";")):o+=", &"+_().propc.variableDB_.getName(this.getFieldValue("CPU"+l),_().VARIABLE_CATEGORY_NAME),l++;return i+='"'+o+");\n"+s,i}return"// ERROR: WX is not initialized!\n"},_().Blocks.wx_print_multiple={helpUrl:_().MSG_AWX_HELPURL,init:function(){this.setTooltip(_().MSG_AWX_PRINT_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("WX print to").appendField(new(_().FieldDropdown)([["GET","GET"],["TCP","TCP"],["Websocket","WS"],["Command","CMD"]]),"CONNECTION").appendField("handle").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"HANDLE"),this.appendValueInput("PRINT0").setAlign(_().ALIGN_RIGHT).setCheck("String").appendField("string"),this.appendValueInput("PRINT1").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("integer"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setMutator(new(_().Mutator)(["console_print_str","console_print_dec","console_print_hex","console_print_bin","console_print_float","console_print_char"])),this.optionList_=["str","dec"],this.setWarningText(null)},mutationToDom:_().Blocks.console_print_multiple.mutationToDom,domToMutation:_().Blocks.serial_print_multiple.domToMutation,decompose:_().Blocks.console_print_multiple.decompose,compose:_().Blocks.serial_print_multiple.compose,saveConnections:_().Blocks.console_print_multiple.saveConnections,onchange:_().Blocks.wx_scan_multiple.onchange},_().propc.wx_print_multiple=_().propc.console_print_multiple,_().Blocks.wx_scan_string={helpUrl:_().MSG_AWX_HELPURL,init:function(){this.setTooltip(_().MSG_AWX_SCAN_STRING_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("WX scan").appendField(new(_().FieldDropdown)([["POST","POST"],["Websocket","WS"],["TCP","TCP"],["Command","CMD"]],(function(e){this.getSourceBlock().setPrefix_(e)})),"CONNECTION").appendField("from handle").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"HANDLE"),this.appendDummyInput("PREFIX").appendField("string starts with").appendField(new(_().FieldTextInput)("txt"),"START"),this.appendDummyInput("STORE").appendField("store string in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VARNAME"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0)},setPrefix_:_().Blocks.wx_scan_multiple.setPrefix_,mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("prefix",this.getFieldValue("CONNECTION")||""),e},domToMutation:function(e){this.setPrefix_(e.getAttribute("prefix")||"")},onchange:function(){const e=_().getMainWorkspace().getAllBlocks();if(-1===e.toString().indexOf("WX initialize")&&"heb-wx"!==G().boardType.name)this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");else{let t=null;const n=Number(this.getRelativeToSurfaceXY().y);"TCP"===this.getFieldValue("CONNECTION")&&(t="You must use a WX buffer block before this\nblock and you must store the string in the buffer\nvariable when scanning a string from a TCP connection!");for(let i=0;i<e.length;i++)if(0===e[i].toString().indexOf("Simple WX"))t="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!";else if("wx_buffer"===e[i].type){const o=Number(e[i].getRelativeToSurfaceXY().y);e[i].getFieldValue("BUFFER")===this.getFieldValue("VARNAME")&&n>o&&(t=null)}this.optionList_&&this.workspace&&this.optionList_.length<1&&(t="WX scan must have at least one search term."),this.setWarningText(t)}}},_().propc.wx_scan_string=function(){const e=_().getMainWorkspace().getAllBlocks().toString();if("heb-wx"===G().boardType.name&&(_().propc.definitions_.wx_def='#include "wifi.h"',_().propc.setups_.wx_init="wifi_start(31, 30, 115200, WX_ALL_COM);"),-1===e.indexOf("Simple WX initialize")&&(e.indexOf("WX initialize")>-1||"heb-wx"===G().boardType.name)){const e=_().propc.variableDB_.getName(this.getFieldValue("HANDLE"),_().VARIABLE_CATEGORY_NAME),t=this.getFieldValue("CONNECTION");let n=this.getFieldValue("START").replace(/'/g,"\\'").replace(/"/g,'\\"');const i=_().propc.variableDB_.getName(this.getFieldValue("VARNAME"),_().VARIABLE_CATEGORY_NAME);return _().propc.vartype_[i]="char *","POST"!==t&&(n=""),"wifi_scan("+t+", "+e+', "'+n+'%s", &'+i+");\n"}return"// ERROR: WX is not initialized!\n"},_().Blocks.wx_send_string={helpUrl:_().MSG_AWX_HELPURL,init:function(){this.setTooltip(_().MSG_AWX_SEND_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendValueInput("DATA").setAlign(_().ALIGN_RIGHT).appendField("WX send string").setCheck("String"),this.appendDummyInput().appendField("handle").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"HANDLE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:_().Blocks.wx_scan_multiple.onchange},_().propc.wx_send_string=function(){const e=_().getMainWorkspace().getAllBlocks().toString();if("heb-wx"===G().boardType.name&&(_().propc.definitions_.wx_def='#include "wifi.h"',_().propc.setups_.wx_init="wifi_start(31, 30, 115200, WX_ALL_COM);"),-1===e.indexOf("Simple WX initialize")&&(e.indexOf("WX initialize")>-1||"heb-wx"===G().boardType.name)){const e=_().propc.valueToCode(this,"DATA",_().propc.ORDER_NONE);return"wifi_send("+_().propc.variableDB_.getName(this.getFieldValue("HANDLE"),_().VARIABLE_CATEGORY_NAME)+", "+e+", sizeof("+e+"));\n"}return"// ERROR: WX is not initialized!\n"},_().Blocks.wx_receive_string={helpUrl:_().MSG_AWX_HELPURL,init:function(){this.setTooltip(_().MSG_AWX_RECEIVE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("WX receive store string in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"DATA").appendField("byte count in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"BYTES"),this.appendValueInput("MAX").appendField("handle").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"HANDLE").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("max bytes"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setInputsInline(!1)},onchange:_().Blocks.wx_scan_multiple.onchange},_().propc.wx_receive_string=function(){const e=_().getMainWorkspace().getAllBlocks().toString();if("heb-wx"===G().boardType.name&&(_().propc.definitions_.wx_def='#include "wifi.h"',_().propc.setups_.wx_init="wifi_start(31, 30, 115200, WX_ALL_COM);"),-1===e.indexOf("Simple WX initialize")&&(e.indexOf("WX initialize")>-1||"heb-wx"===G().boardType.name)){const e=_().propc.variableDB_.getName(this.getFieldValue("DATA"),_().VARIABLE_CATEGORY_NAME),t=_().propc.variableDB_.getName(this.getFieldValue("HANDLE"),_().VARIABLE_CATEGORY_NAME),n=_().propc.valueToCode(this,"MAX",_().propc.ORDER_NONE)||"64",i=_().propc.variableDB_.getName(this.getFieldValue("BYTES"),_().VARIABLE_CATEGORY_NAME);return _().propc.vartype_[e]="char *",i+" = wifi_recv("+t+", "+e+", "+n+");\n"}return"// ERROR: WX is not initialized!\n"},_().Blocks.wx_poll={helpUrl:_().MSG_AWX_HELPURL,init:function(){this.setTooltip(_().MSG_AWX_POLL_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("WX poll store event in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"EVENT").appendField("ID in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"ID").appendField("handle in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"HANDLE"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:_().Blocks.wx_scan_multiple.onchange},_().propc.wx_poll=function(){const e=_().getMainWorkspace().getAllBlocks().toString();if("heb-wx"===G().boardType.name&&(_().propc.definitions_.wx_def='#include "wifi.h"',_().propc.setups_.wx_init="wifi_start(31, 30, 115200, WX_ALL_COM);"),-1===e.indexOf("Simple WX initialize")&&(e.indexOf("WX initialize")>-1||"heb-wx"===G().boardType.name)){const e=_().propc.variableDB_.getName(this.getFieldValue("ID"),_().VARIABLE_CATEGORY_NAME);return"wifi_poll(&"+_().propc.variableDB_.getName(this.getFieldValue("EVENT"),_().VARIABLE_CATEGORY_NAME)+", &"+e+", &"+_().propc.variableDB_.getName(this.getFieldValue("HANDLE"),_().VARIABLE_CATEGORY_NAME)+");\n"}return"// ERROR: WX is not initialized!\n"},_().Blocks.wx_listen={helpUrl:_().MSG_AWX_HELPURL,init:function(){this.setTooltip(_().MSG_AWX_LISTEN_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendValueInput("PATH").setAlign(_().ALIGN_RIGHT).appendField("WX connect").appendField(new(_().FieldDropdown)([["HTTP","HTTP"],["Websocket","WS"],["TCP","TCP"]],(function(e){this.getSourceBlock().setPrefix_(e)})),"PROTOCOL").appendField("store ID in","TEXT").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"ID").appendField("path","LABEL").setCheck("String"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("action",this.getFieldValue("PROTOCOL")||""),e},domToMutation:function(e){const t=e.getAttribute("action");this.setPrefix_(t)},setPrefix_:function(e){setTimeout((function(){["wxHandle","wxConnId1"].forEach((function(e){_().getMainWorkspace().getVariable(e)||_().getMainWorkspace().createVariable(e)}));["wxConnId2","wxConnId3","wxConnId4"].forEach((function(e){_().getMainWorkspace().getVariable(e)||_().getMainWorkspace().createVariable(e)}))}),75);let t="wxHandle";"TCP"===e?(this.getInput("PORT")||this.appendValueInput("PORT").appendField("port").setCheck("Number"),this.setFieldValue("URL","LABEL"),this.setFieldValue("store handle in","TEXT")):(t="wxConnId1",this.getInput("PORT")&&this.removeInput("PORT"),this.setFieldValue("path","LABEL"),this.setFieldValue("store ID in","TEXT"));const n=_().getMainWorkspace().getVariableById(this.getFieldValue("ID"));n&&n.name===("wxHandle"===t?"wxConnId1":"wxHandle")&&setTimeout((function(e){e.setFieldValue(_().getMainWorkspace().getVariable(t).getId(),"ID")}),125,this)},onchange:_().Blocks.wx_scan_multiple.onchange},_().propc.wx_listen=function(){const e=_().getMainWorkspace().getAllBlocks().toString();if("heb-wx"===G().boardType.name&&(_().propc.definitions_.wx_def='#include "wifi.h"',_().propc.setups_.wx_init="wifi_start(31, 30, 115200, WX_ALL_COM);"),-1===e.indexOf("Simple WX initialize")&&(e.indexOf("WX initialize")>-1||"heb-wx"===G().boardType.name)){const e=_().propc.valueToCode(this,"PATH",_().propc.ORDER_NONE),t=this.getFieldValue("PROTOCOL"),n=_().propc.variableDB_.getName(this.getFieldValue("ID"),_().VARIABLE_CATEGORY_NAME),i=_().propc.valueToCode(this,"PORT",_().propc.ORDER_NONE)||"80";let o="";return o+="TCP"===t?n+" = wifi_connect("+e+", "+i+");\n":n+" = wifi_listen("+t+", "+e+");\n",o}return"// ERROR: WX is not initialized!\n"},_().Blocks.wx_join={helpUrl:_().MSG_AWX_HELPURL,init:function(){this.setTooltip(_().MSG_AWX_JOIN_NETWORK_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("WX join network SSID").appendField(new(_().FieldTextInput)("myNetwork"),"SSID").appendField("passphrase").appendField(new(_().FieldTextInput)("passphrase"),"PASS"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:function(){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("WX initialize")&&"heb-wx"!==G().boardType.name?this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.wx_join=function(){const e=_().getMainWorkspace().getAllBlocks().toString();if("heb-wx"===G().boardType.name&&(_().propc.definitions_.wx_def='#include "wifi.h"',_().propc.setups_.wx_init="wifi_start(31, 30, 115200, WX_ALL_COM);"),e.indexOf("WX initialize")>-1||"heb-wx"===G().boardType.name){return'wifi_join("'+(this.getFieldValue("SSID")||"")+'", "'+(this.getFieldValue("PASS")||"")+'");\n'}return"// ERROR: WX is not initialized!\n"},_().Blocks.wx_code={helpUrl:_().MSG_AWX_HELPURL,init:function(){this.setTooltip(_().MSG_AWX_CODE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("WX code").appendField(new(_().FieldDropdown)([["ARG","0xE6"],["Connect","0xE4"],["Close","0xE8"],["Check","0xEE"],["Join","0xEF"],["Listen","0xE7"],["Path","0xEB"],["Poll","0xEC"],["Receive","0xE9"],["Reply","0xE5"],["Send","0xEA"],["Set","0xED"],["AP Mode","0xF3"],["CMD","0xFE"],["GET","71"],["HTTP","0xF7"],["POST","80"],["Station Mode","0xF4"],["Station+AP Mode","0xF2"],["TCP","0xF5"],["Websocket","0xF6"],["GPIO_DI","1"],["GPIO_DO","3"],["GPIO_RTS","15"],["GPIO_CTS","13"],["GPIO_ASC","5"],["GPIO_DBG","2"],["GPIO_PGM","0"],["Invalid Request","1"],["Invalid Argument","2"],["Wrong Argument","3"],["No free listeners","4"],["No free connection","5"],["Lookup failed","6"],["Connection failed","7"],["Send failed","8"],["Invalid state","9"],["Invalid size","10"],["Disconnected","11"],["Not implemented","12"],["Busy","13"],["Internal error","14"],["No error","0"],["Out of memory","-1"],["Undefined (NEG2)","-2"],["Timeout","-3"],["Routing problem","-4"],["Operation in progress","-5"],["Undefined (NEG6)","-6"],["Number too large","-7"],["Connection aborted","-8"],["Connection reset","-9"],["Connection closed","-10"],["Not connected","-11"],["Illegal argument","-12"],["Undefined (NEG13)","-13"],["UDP send error","-14"],["Already connected","-15"],["SSL handshake failed","-28"],["SSL application invalid","-61"]]),"CODE"),this.setOutput(!0,"Number")}},_().propc.wx_code=function(){return[this.getFieldValue("CODE"),_().propc.ORDER_NONE]},_().Blocks.wx_mode={helpUrl:_().MSG_AWX_HELPURL,init:function(){this.setTooltip(_().MSG_AWX_MODE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("WX ").appendField(new(_().FieldDropdown)([["Set","SET"],["Leave and set","LEAVE"],["Check","CHECK"]],(function(e){this.getSourceBlock().setPrefix_(e)})),"ACTION").appendField("mode","BLOCKTEXT"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setInputsInline(!0)},mutationToDom:function(){const e=document.createElement("mutation"),t=this.getFieldValue("ACTION");return e.setAttribute("action",t),e},domToMutation:function(e){const t=e.getAttribute("action");this.setPrefix_(t)},setPrefix_:function(e){this.getInput("CHECK")&&this.removeInput("CHECK"),"LEAVE"===e?this.appendDummyInput("CHECK").appendField(new(_().FieldDropdown)([["AP","AP"],["Station + AP","STA_AP"]]),"MODE"):"CHECK"!==e&&this.appendDummyInput("CHECK").appendField(new(_().FieldDropdown)([["AP","AP"],["Station","STA"],["Station + AP","STA_AP"]]),"MODE"),"CHECK"===e?(this.setFieldValue("mode","BLOCKTEXT"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number")):(this.setFieldValue("mode to","BLOCKTEXT"),this.setOutput(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null))},onchange:function(){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("WX initialize")&&"heb-wx"!==G().boardType.name&&this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!")}},_().propc.wx_mode=function(){const e=_().getMainWorkspace().getAllBlocks().toString();if("heb-wx"===G().boardType.name&&(_().propc.definitions_.wx_def='#include "wifi.h"',_().propc.setups_.wx_init="wifi_start(31, 30, 115200, WX_ALL_COM);"),e.indexOf("WX initialize")>-1||"heb-wx"===G().boardType.name){const e=this.getFieldValue("MODE"),t=this.getFieldValue("ACTION");let n;return n="CHECK"===t?["wifi_mode(CHECK)",_().propc.ORDER_NONE]:"LEAVE"===t?"wifi_leave("+e+");\n":"wifi_mode("+e+");\n",n}return"// ERROR: WX is not initialized!\n"},_().Blocks.wx_buffer={helpUrl:_().MSG_AWX_HELPURL,init:function(){this.setTooltip(_().MSG_AWX_BUFFER_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("WX buffer use variable").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_SET_ITEM),"BUFFER").appendField("set size to").appendField(new(_().FieldNumber)("64",null,null,1),"SIZE").appendField("characters"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:_().Blocks.wx_scan_multiple.onchange},_().propc.wx_buffer=function(){const e=_().getMainWorkspace().getAllBlocks().toString();if("heb-wx"===G().boardType.name&&(_().propc.definitions_.wx_def='#include "wifi.h"',_().propc.setups_.wx_init="wifi_start(31, 30, 115200, WX_ALL_COM);"),-1===e.indexOf("Simple WX initialize")&&(e.indexOf("WX initialize")>-1||"heb-wx"===G().boardType.name)){const e=this.getFieldValue("SIZE")||"64";let t="";const n=_().propc.variableDB_.getName(this.getFieldValue("BUFFER"),_().VARIABLE_CATEGORY_NAME);return t+="wifi_setBuffer("+n+", ("+e+" + 1));\n",_().propc.vartype_[n]="char",_().propc.varlength_[n]=e+" + 1",t}return"// ERROR: WX is not initialized!\n"},_().Blocks.wx_disconnect={helpUrl:_().MSG_AWX_HELPURL,init:function(){this.setTooltip(_().MSG_AWX_DISCONNECT_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("WX disconnect").appendField(new(_().FieldDropdown)([["HTTP","HTTP"],["Websocket","WS"],["TCP","TCP"]],(function(e){this.getSourceBlock().setPrefix_({ACTION:e})})),"PROTOCOL").appendField("ID","TEXT").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_SET_ITEM),"ID"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},mutationToDom:function(){const e=document.createElement("mutation"),t=this.getFieldValue("PROTOCOL");return e.setAttribute("action",t),e},domToMutation:function(e){const t=e.getAttribute("action");this.setPrefix_({ACTION:t})},setPrefix_:function(e){setTimeout((function(){_().getMainWorkspace().getVariable("wxHandle")||_().getMainWorkspace().createVariable("wxHandle"),_().getMainWorkspace().getVariable("wxId")||_().getMainWorkspace().createVariable("wxId")}),75);let t="wxHandle";"TCP"===e.ACTION?this.setFieldValue("handle","TEXT"):(t="wxId",this.setFieldValue("ID","TEXT")),setTimeout((function(e){e.setFieldValue(_().getMainWorkspace().getVariable(t).getId(),"ID")}),125,this)},onchange:_().Blocks.wx_scan_multiple.onchange},_().propc.wx_disconnect=function(){const e=_().getMainWorkspace().getAllBlocks().toString(),t=G().boardType.name;return"heb-wx"===t&&(_().propc.definitions_.wx_def='#include "wifi.h"',_().propc.setups_.wx_init="wifi_start(31, 30, 115200, WX_ALL_COM);"),-1===e.indexOf("Simple WX initialize")&&(e.indexOf("WX initialize")>-1||"heb-wx"===t)?"wifi_disconnect("+_().propc.variableDB_.getName(this.getFieldValue("ID"),_().VARIABLE_CATEGORY_NAME)+");\n":"// ERROR: WX is not initialized!\n"},_().Blocks.wx_ip={helpUrl:_().MSG_AWX_HELPURL,init:function(){this.setTooltip(_().MSG_AWX_GET_IP_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("WX").appendField(new(_().FieldDropdown)([["Station","STA"],["AP","AP"]]),"MODE").appendField("IP address"),this.setInputsInline(!0),this.setOutput(!0,"String")},onchange:function(){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("WX initialize")&&"heb-wx"!==G().boardType.name&&this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!")}},_().propc.wx_ip=function(){const e=_().getMainWorkspace().getAllBlocks().toString();if("heb-wx"===G().boardType.name&&(e.indexOf("Simple WX initialize")>-1?_().propc.wx_init.call():(_().propc.definitions_.wx_def='#include "wifi.h"',_().propc.setups_.wx_init="wifi_start(31, 30, 115200, WX_ALL_COM);")),e.indexOf("WX initialize")>-1||"heb-wx"===G().boardType.name){const e=this.getFieldValue("MODE");if(!this.disabled){_().propc.global_vars_.wx_ip_temp_str="char __ipStr[16];";let e="char *wifi_ip_string(int __mode) {int __ip[4]; char __result = ";e+="wifi_ip(__mode, __ip); if(__result == 'E') ",e+='{strcpy(__ipStr, "Error          ");} else {sprint(__ipStr, "%d.%d',e+='.%d.%d", __ip[0], __ip[1], __ip[2], __ip[3]);} return __ipStr;}',_().propc.methods_.ip_address_func=e,_().propc.method_declarations_.ip_address_func="char *wifi_ip_string(int __mode);\n"}return["wifi_ip_string("+e+")",_().propc.ORDER_NONE]}return"// ERROR: WX is not initialized!\n"},_().Blocks.graph_output={helpUrl:_().MSG_GRAPHING_HELPURL,init:function(){this.setTooltip(_().MSG_GRAPH_OUTPUT_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Graph"),this.appendValueInput("PRINT0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField(new(_().FieldTextInput)("label"),"GRAPH_LABEL0").appendField("value","VALUE_LABEL0"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setMutator(new(_().Mutator)(["graph_dec"])),this.optionList_=["dec"],this.graph_labels_=[]},mutationToDom:function(){const e=document.createElement("mutation");e.setAttribute("options",JSON.stringify(this.optionList_));let t="S";return"value (X1)"===this.getFieldValue("VALUE_LABEL0")&&(t="X"),e.setAttribute("mode",t),e},domToMutation:function(e){const t=JSON.parse(e.getAttribute("options")),n=e.getAttribute("mode"),i=[" (X1)"," (Y1)"," (X2)"," (Y2)"," (X3)"," (Y3)"," (X4)"," (Y4)"," (X5)"," (Y5)"];let o="";this.optionList_=t;for(let e=0;e<this.optionList_.length;e++)this.getInput("PRINT"+e)&&this.removeInput("PRINT"+e),"X"===n&&(o=i[e]),this.appendValueInput("PRINT"+e).setAlign(_().ALIGN_RIGHT).appendField(new(_().FieldTextInput)("label"),"GRAPH_LABEL"+e).appendField("value"+o,"VALUE_LABEL"+e)},setFieldLabels:function(e){let t=0;const n=[" (X1)"," (Y1)"," (X2)"," (Y2)"," (X3)"," (Y3)"," (X4)"," (Y4)"," (X5)"," (Y5)"];for(;this.getFieldValue("VALUE_LABEL"+t);)"X"===e?this.setFieldValue("value"+n[t],"VALUE_LABEL"+t):this.setFieldValue("value","VALUE_LABEL"+t),t++},decompose:function(e){const t=e.newBlock("graphing_container");t.initSvg();let n=t.getInput("STACK").connection;for(let t=0;t<this.optionList_.length;t++){const t=e.newBlock("graph_dec");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}let i=0;for(this.graph_labels_=null,this.graph_labels_=[];this.getFieldValue("GRAPH_LABEL"+i);)this.graph_labels_.push(this.getFieldValue("GRAPH_LABEL"+i)),i++;return t},compose:function(e){let t=0,n=["","","","","","","","","",""];for("value (X1)"===this.getFieldValue("VALUE_LABEL0")&&(n=[" (X1)"," (Y1)"," (X2)"," (Y2)"," (X3)"," (Y3)"," (X4)"," (Y4)"," (X5)"," (Y5)"]);this.getInput("PRINT"+t);)this.removeInput("PRINT"+t),t++;t=0,this.optionList_.length=0;let i=e.getInputTargetBlock("STACK");for(;i;){this.optionList_.push("dec");const e=this.appendValueInput("PRINT"+t).setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField(new(_().FieldTextInput)("label"),"GRAPH_LABEL"+t).appendField("value"+n[t],"VALUE_LABEL"+t);i.valueConnection_&&e.connection.connect(i.valueConnection_),t++,i=i.nextConnection&&i.nextConnection.targetBlock()}for(t=this.graph_labels_.length,t=0;t<this.graph_labels_.length;t++)this.getFieldValue("GRAPH_LABEL"+t)&&this.setFieldValue(this.graph_labels_[t],"GRAPH_LABEL"+t)},saveConnections:function(e){let t=e.getInputTargetBlock("STACK"),n=0;for(;t;){const e=this.getInput("PRINT"+n);t.valueConnection_=e&&e.connection.targetConnection,t=t.nextConnection&&t.nextConnection.targetBlock(),n++}for(n=0,this.graph_labels_=null,this.graph_labels_=[];this.getFieldValue("GRAPH_LABEL"+n);)this.graph_labels_.push(this.getFieldValue("GRAPH_LABEL"+n)),n++},onchange:function(){const e=_().getMainWorkspace().getBlocksByType("graph_settings",!1);let t=null;if(e.length>0&&(t=e[0]),t){this.workspace&&this.optionList_.length<1?this.setWarningText("Graphing output must have at least one value."):this.optionList_.length>10?this.setWarningText("Graphing output only supports up to 10 values."):this.setWarningText(null);let e=0;for(;this.getFieldValue("VALUE_LABEL"+e);)e++;e%2==1&&t.getFieldValue("YSETTING").indexOf("XY")>-1&&this.setWarningText("Number of values must be EVEN when graphing an x/y series!")}else this.setWarningText("WARNING: You must use a Graph\ninitialize block at the beginning of your program!")}},_().Blocks.graphing_container={init:function(){this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("send"),this.appendStatementInput("STACK"),this.contextMenu=!1}},_().Blocks.graph_dec={init:function(){this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("value"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.contextMenu=!1}},_().propc.graph_output=function(){if(_().getMainWorkspace().getAllBlocks().toString().indexOf("Graph initialize")>-1){let e='print("%u',t="",n=0;for(;_().propc.valueToCode(this,"PRINT"+n,_().propc.ORDER_NONE)&&(e+=",%d",t+=", "+_().propc.valueToCode(this,"PRINT"+n,_().propc.ORDER_NONE||"0"),n++,!(n>10)););return e+='\\r", (CNT >> 16)'+t+");\n",e}return"// ERROR: Graphing is not initialized!"},_().Blocks.graph_settings={helpUrl:_().MSG_GRAPHING_HELPURL,init:function(){this.setTooltip(_().MSG_GRAPH_SETTINGS_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Graph initialize  keep").appendField(new(_().FieldNumber)("40",null,null,1),"XAXIS").appendField("seconds of data").appendField(new(_().FieldDropdown)([["time series- autoscale","AUTO"],["time series- ranged","FIXED"],["x/y series- autoscale","AUTOXY"],["x/y series- ranged","FIXEDXY"]],(function(e){this.getSourceBlock().setGraphMode(e)})),"YSETTING"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},setGraphMode:function(e){let t="S";e.indexOf("XY")>-1&&(t="X"),this.getInput("RANGES")&&this.removeInput("RANGES"),e.indexOf("FIXED")>-1&&this.addRanges(e);const n=_().getMainWorkspace().getAllBlocks();for(let e=0;e<n.length;e++)if("graph_output"===n[e].type){n[e].setFieldLabels.call(n[e],t)}},addRanges:function(e){"FIXED"===e?this.appendDummyInput("RANGES").appendField("y-axis minimum","LABELMIN").appendField(new(_().FieldNumber)("0",null,null,1),"YMIN").appendField(" maximum","LABELMAX").appendField(new(_().FieldNumber)("100",null,null,1),"YMAX"):this.appendDummyInput("RANGES").appendField("x-axis min").appendField(new(_().FieldNumber)("0",null,null,1),"XMIN").appendField(" max").appendField(new(_().FieldNumber)("100",null,null,1),"XMAX").appendField(" y-axis min").appendField(new(_().FieldNumber)("0",null,null,1),"YMIN").appendField(" max").appendField(new(_().FieldNumber)("100",null,null,1),"YMAX")},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("scaling",this.getFieldValue("YSETTING")),e},domToMutation:function(e){"FIXED"===e.getAttribute("scaling")&&this.addRanges()}},_().propc.graph_settings=function(){return""},_().Blocks.string_scan_multiple={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_STRING_SCAN_MULTIPLE_TOOLTIP),this.setColour(X.getColor("math")),this.appendDummyInput().appendField("scan string").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"HANDLE"),this.setMutator(new(_().Mutator)(["string_scan_dec","string_scan_hex","string_scan_bin","string_scan_float","string_scan_char"])),this.optionList_=["dec","char"],this.updateShape_(),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setWarningText(null),this.ser_pins=[]},mutationToDom:_().Blocks.serial_scan_multiple.mutationToDom,domToMutation:_().Blocks.serial_scan_multiple.domToMutation,decompose:_().Blocks.serial_scan_multiple.decompose,compose:_().Blocks.serial_scan_multiple.compose,saveConnections:_().Blocks.serial_scan_multiple.saveConnections,updateShape_:_().Blocks.serial_scan_multiple.updateShape_,updateSerPin:function(){}},_().Blocks.string_scan_container={init:function(){this.setColour(X.getColor("math")),this.appendDummyInput().appendField("scan string for"),this.appendStatementInput("STACK"),this.appendDummyInput().appendField(new(_().FieldDropdown)([["from beginning"," "],["after text","AfterStr"]]),"SCAN_START"),this.contextMenu=!1}},_().propc.string_scan_multiple=function(){let e=_().propc.valueToCode(this,"SCAN_AFTER",_().propc.ORDER_NONE).trim()||"";this.scanAfter&&this.scanAfter.length>3&&e&&(e+=", ");let t="sscan"+(""!==e?this.scanAfter:"");t+="("+_().propc.variableDB_.getName(this.getFieldValue("HANDLE"),_().VARIABLE_CATEGORY_NAME)+", "+e+'"';let n="",i="",o=0;for(;this.getFieldValue("CPU"+o);)this.getFieldValue("TYPE"+o).includes("store decimal number")?t+="%d":this.getFieldValue("TYPE"+o).includes("store ASCII character")?t+="%c":this.getFieldValue("TYPE"+o).includes("store hexadecimal number")?t+="%x":this.getFieldValue("TYPE"+o).includes("store binary number")?t+="%b":"in"===this.getFieldValue("TYPE"+o)&&(t+="%f"),"in"===this.getFieldValue("TYPE"+o)?(n+=", &__fpBuf"+o,i+=_().propc.variableDB_.getName(this.getFieldValue("CPU"+o),_().VARIABLE_CATEGORY_NAME),i+=" = (int) (__fpBuf"+o+" * "+this.getFieldValue("MULT"+o)+");\n",this.disabled||(_().propc.global_vars_["floatPointScanBuffer"+o]="float __fpBuf"+o+";")):n+=", &"+_().propc.variableDB_.getName(this.getFieldValue("CPU"+o),_().VARIABLE_CATEGORY_NAME),o++;return t+='"'+n+");\n"+i,t},_().Blocks.string_sprint_multiple={helpUrl:_().MSG_STRINGS_HELPURL,init:function(){this.setTooltip(_().MSG_STRING_SPRINT_MULTIPLE_TOOLTIP),this.setColour(X.getColor("math")),this.appendDummyInput().appendField("create string from"),this.appendValueInput("PRINT0").setAlign(_().ALIGN_RIGHT).setCheck("String").appendField("text"),this.appendValueInput("PRINT1").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("decimal number"),this.appendDummyInput("NEWLINE").appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VAR"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!1),this.setMutator(new(_().Mutator)(["string_scan_str","string_scan_dec","string_scan_hex","string_scan_bin","string_scan_float","string_scan_char"])),this.optionList_=["str","dec"],this.specDigits_=!1,this.setWarningText(null)},mutationToDom:_().Blocks.console_print_multiple.mutationToDom,domToMutation:_().Blocks.console_print_multiple.domToMutation,decompose:_().Blocks.console_print_multiple.decompose,compose:_().Blocks.console_print_multiple.compose,saveConnections:_().Blocks.console_print_multiple.saveConnections},_().Blocks.controls_repeat={init:function(){let e="repeat";"Scribbler Robot"===x().description?(this.setHelpUrl(_().MSG_S3_CONTROL_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_LOOP_TOOLTIP),e="loop"):(this.setHelpUrl(_().MSG_CONTROL_HELPURL),this.setTooltip(_().MSG_CONTROLS_REPEAT_TOOLTIP)),this.setColour(X.getColor("programming"));const t=new(_().FieldDropdown)([["forever","FOREVER"],["x times","TIMES"],["until","UNTIL"],["while","WHILE"]],(function(e){this.getSourceBlock().updateShape_(e)}));this.appendDummyInput().appendField(e),this.appendDummyInput("REPEAT").appendField(t,"TYPE"),this.appendStatementInput("DO").appendField(_().LANG_CONTROLS_REPEAT_INPUT_DO),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!0)},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("type",this.getFieldValue("TYPE")),e},domToMutation:function(e){this.updateShape_(e.getAttribute("type"))},updateShape_:function(e){const t=this.getInput("TIMES");"TIMES"===e?t||(this.appendValueInput("TIMES").setCheck("Number"),this.moveInputBefore("TIMES","REPEAT")):t&&this.removeInput("TIMES");const n=this.getInput("REPEAT_CONDITION");"WHILE"===e||"UNTIL"===e?n||(this.appendValueInput("REPEAT_CONDITION").setCheck("Number"),this.moveInputBefore("REPEAT_CONDITION","DO")):n&&this.removeInput("REPEAT_CONDITION")}},_().propc.controls_repeat=function(){const e=this.getFieldValue("TYPE");let t=_().propc.statementToCode(this,"DO");_().propc.INFINITE_LOOP_TRAP&&(t=_().propc.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+t);const n=_().propc.ORDER_UNARY_PREFIX;let i="",o="",s="";switch(e){case"FOREVER":i="while(1) {\n"+t+"}\n";break;case"TIMES":s=_().propc.valueToCode(this,"TIMES",n)||"0",i="for (int __n = 0; __n < "+s+"; __n++) {\n"+t+"}\n";break;case"WHILE":o=_().propc.valueToCode(this,"REPEAT_CONDITION",n)||"0",i="while ("+o+") {\n"+t+"}\n";break;case"UNTIL":o=_().propc.valueToCode(this,"REPEAT_CONDITION",n)||"0",i="while (!("+o+")) {\n"+t+"}\n"}return i},_().Blocks.controls_if={category:_().LANG_CATEGORY_CONTROLS,init:function(){"Scribbler Robot"===x().description?this.setHelpUrl(_().MSG_S3_CONTROL_HELPURL):this.setHelpUrl(_().MSG_CONTROL_HELPURL),this.setTooltip(_().MSG_CONTROLS_IF_TOOLTIP),this.setColour(X.getColor("programming")),this.appendValueInput("IF0").setCheck("Number").appendField(_().LANG_CONTROLS_IF_MSG_IF),this.appendStatementInput("DO0").appendField(_().LANG_CONTROLS_IF_MSG_THEN),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setMutator(new(_().Mutator)(["controls_if_elseif","controls_if_else"])),this.elseifCount_=0,this.elseCount_=0},mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const e=document.createElement("mutation");return this.elseifCount_&&e.setAttribute("elseif",this.elseifCount_),this.elseCount_&&e.setAttribute("else","1"),e},domToMutation:function(e){this.elseifCount_=window.parseInt(e.getAttribute("elseif"),10),this.elseCount_=window.parseInt(e.getAttribute("else"),10);for(let e=1;e<=this.elseifCount_;e++)this.appendValueInput("IF"+e).setCheck("Number").appendField(_().LANG_CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+e).appendField(_().LANG_CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(_().LANG_CONTROLS_IF_MSG_ELSE)},decompose:function(e){const t=e.newBlock("controls_if_if");t.initSvg();let n=t.getInput("STACK").connection;for(let t=1;t<=this.elseifCount_;t++){const t=e.newBlock("controls_if_elseif");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}if(this.elseCount_){const t=e.newBlock("controls_if_else");t.initSvg(),n.connect(t.previousConnection)}return t},compose:function(e){this.elseCount_&&this.getInput("ELSE")&&this.removeInput("ELSE"),this.elseCount_=0;for(let e=this.elseifCount_;e>0;e--)this.removeInput("IF"+e),this.removeInput("DO"+e);this.elseifCount_=0;let t,n,i,o=e.getInputTargetBlock("STACK");for(;o;){switch(o.type){case"controls_if_elseif":this.elseifCount_++,t=this.appendValueInput("IF"+this.elseifCount_).setCheck("Number").appendField(_().LANG_CONTROLS_IF_MSG_ELSEIF),n=this.appendStatementInput("DO"+this.elseifCount_),n.appendField(_().LANG_CONTROLS_IF_MSG_THEN),o.valueConnection_&&t.connection.connect(o.valueConnection_),o.statementConnection_&&n.connection.connect(o.statementConnection_);break;case"controls_if_else":this.elseCount_++,i=this.appendStatementInput("ELSE"),i.appendField(_().LANG_CONTROLS_IF_MSG_ELSE),o.statementConnection_&&i.connection.connect(o.statementConnection_);break;default:throw Error("Unknown block type.")}o=o.nextConnection&&o.nextConnection.targetBlock()}},saveConnections:function(e){let t,n,i=e.getInputTargetBlock("STACK"),o=1;for(;i;){switch(i.type){case"controls_if_elseif":t=this.getInput("IF"+o),n=this.getInput("DO"+o),i.valueConnection_=t&&t.connection.targetConnection,i.statementConnection_=n&&n.connection.targetConnection,o++;break;case"controls_if_else":n=this.getInput("ELSE"),i.statementConnection_=n&&n.connection.targetConnection;break;default:throw Error("Unknown block type.")}i=i.nextConnection&&i.nextConnection.targetBlock()}}},_().Blocks.controls_if_if={init:function(){this.setColour(X.getColor("programming")),this.appendDummyInput().appendField(_().LANG_CONTROLS_IF_IF_TITLE_IF),this.appendStatementInput("STACK"),this.setTooltip(_().LANG_CONTROLS_IF_IF_TOOLTIP),this.contextMenu=!1}},_().Blocks.controls_if_elseif={init:function(){this.setColour(X.getColor("programming")),this.appendDummyInput().appendField(_().LANG_CONTROLS_IF_ELSEIF_TITLE_ELSEIF),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setTooltip(_().LANG_CONTROLS_IF_ELSEIF_TOOLTIP),this.contextMenu=!1}},_().Blocks.controls_if_else={init:function(){this.setColour(X.getColor("programming")),this.appendDummyInput().appendField(_().LANG_CONTROLS_IF_ELSE_TITLE_ELSE),this.setPreviousStatement(!0,"Block"),this.setTooltip(_().LANG_CONTROLS_IF_ELSE_TOOLTIP),this.contextMenu=!1}},_().propc.controls_if=function(){let e=0,t=_().propc.valueToCode(this,"IF"+e,_().propc.ORDER_NONE)||"0",n=_().propc.statementToCode(this,"DO"+e),i="if ("+t+") {\n"+n+"}\n";for(e=1;e<=this.elseifCount_;e++)t=_().propc.valueToCode(this,"IF"+e,_().propc.ORDER_NONE)||"0",n=_().propc.statementToCode(this,"DO"+e),i+="else if ("+t+") {\n"+n+"}";return this.elseCount_&&(n=_().propc.statementToCode(this,"ELSE"),i+="else {\n"+n+"}\n"),i+"\n"},_().Blocks.control_repeat_for_loop={init:function(){let e="repeat";"Scribbler Robot"===x().description?(this.setHelpUrl(_().MSG_S3_CONTROL_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_LIMITED_LOOP_TOOLTIP),e="loop"):(this.setHelpUrl(_().MSG_CONTROL_HELPURL),this.setTooltip(_().MSG_CONTROL_REPEAT_FOR_LOOP_TOOLTIP)),this.setColour(X.getColor("programming")),this.appendDummyInput().appendField(e).appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VAR"),this.appendValueInput("START").setCheck("Number").appendField("from"),this.appendValueInput("END").setCheck("Number").appendField(new(_().FieldDropdown)([["thru","= "],["to"," "]]),"EQ"),this.appendValueInput("STEP").setCheck("Number").appendField("by"),this.appendStatementInput("DO").appendField("do"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setInputsInline(!0)},onchange:function(e){if(e&&e.type===_().Events.CHANGE){let e=null;const t=this.getInput("START").connection.targetBlock(),n=this.getInput("END").connection.targetBlock(),i=this.getInput("STEP").connection.targetBlock();t&&n&&i&&"math_number"===t.type&&"math_number"===n.type&&"math_number"===i.type&&(parseInt(t.getFieldValue("NUM"))<parseInt(n.getFieldValue("NUM"))&&parseInt(i.getFieldValue("NUM"))<0?e='WARNING: If the "step" value is negative, the "start" value should be greater than the "end" value!':parseInt(t.getFieldValue("NUM"))>parseInt(n.getFieldValue("NUM"))&&parseInt(i.getFieldValue("NUM"))>0?e='WARNING: If the "step" value is positive, the "start" value should be less than the "end" value!':0===parseInt(i.getFieldValue("NUM"))&&(e='WARNING: The "step" value cannot be zero!')),this.setWarningText(e)}}},_().propc.control_repeat_for_loop=function(){const e=_().propc.valueToCode(this,"START",_().propc.ORDER_NONE)||"1";let t=this.getFieldValue("EQ")+_().propc.valueToCode(this,"END",_().propc.ORDER_NONE)||"10";const n=_().propc.valueToCode(this,"STEP",_().propc.ORDER_NONE)||"1";let i=_().propc.statementToCode(this,"DO");const o=_().propc.variableDB_.getName(this.getFieldValue("VAR"),_().VARIABLE_CATEGORY_NAME);i=n+")) {\n"+i+"\n}",t+="; "+o;let s="for ("+o+" = "+e+"; "+o;return isNaN(parseFloat(e))||!isFinite(e)||isNaN(parseFloat(t))||!isFinite(t)?isNaN(parseFloat(n))||!isFinite(n)?s+=" <"+t+" += abs("+i:Number(n)<0?s+=" >"+t+" += ("+i:Number(n)>0?s+=" <"+t+" += ("+i:0===Number(n)&&(s='// ERROR: Your "step" size cannot be 0 (zero)!\n'):isNaN(parseFloat(n))||!isFinite(n)?Number(e)<Number(t)?s+=" <"+t+" += abs("+i:s+=" >"+t+" -= abs("+i:Number(e)<Number(t)?s+=" <"+t+" += ("+i:s+=" >"+t+" += ("+i,s=s.replace(/ \+= \(-1\)/g,"--").replace(/ \+= \(1\)/g,"++"),s},_().Blocks.controls_return={helpUrl:_().MSG_CONTROL_HELPURL,init:function(){this.setTooltip(_().MSG_CONTROLS_RETURN_TOOLTIP),this.appendDummyInput().appendField("return"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setColour(X.getColor("programming"))}},_().propc.controls_return=function(){return"return;\n"},_().Blocks.controls_break={helpUrl:_().MSG_CONTROL_HELPURL,init:function(){this.setTooltip(_().MSG_CONTROLS_BREAK_TOOLTIP),this.appendDummyInput().appendField("break"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setColour(X.getColor("programming"))}},_().propc.controls_break=function(){return"break;"},_().Blocks.controls_select={category:_().LANG_CATEGORY_CONTROLS,init:function(){"Scribbler Robot"===x().description?this.setHelpUrl(_().MSG_S3_CONTROL_HELPURL):this.setHelpUrl(_().MSG_CONTROL_HELPURL),this.setTooltip(_().MSG_CONTROLS_SELECT_TOOLTIP),this.setColour(X.getColor("programming")),this.appendValueInput("SWITCH").appendField("switch"),this.appendValueInput("SEL1").setCheck("Number").appendField("case"),this.appendStatementInput("CASE1").appendField("do (then break").appendField(new(_().FieldCheckbox)("TRUE"),"BREAK1").appendField(")"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setMutator(new(_().Mutator)(["controls_select_case","controls_select_default"])),this.elseifCount_=1,this.elseCount_=0},mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const e=document.createElement("mutation");return this.elseifCount_&&e.setAttribute("case",this.elseifCount_),this.elseCount_&&e.setAttribute("default","1"),e},domToMutation:function(e){this.elseifCount_=window.parseInt(e.getAttribute("case"),10),this.elseCount_=window.parseInt(e.getAttribute("default"),10);for(let e=1;e<=this.elseifCount_;e++){this.getInput("SEL"+e)||(this.appendValueInput("SEL"+e).setCheck("Number").appendField("case"),this.appendStatementInput("CASE"+e).appendField("do (then break").appendField(new(_().FieldCheckbox)("TRUE"),"BREAK"+e).appendField(")"))}this.elseCount_&&this.appendStatementInput("DEFAULT").appendField("default")},decompose:function(e){const t=e.newBlock("controls_select_select");t.initSvg();let n=t.getInput("STACK").connection;for(let t=1;t<=this.elseifCount_;t++){const t=e.newBlock("controls_select_case");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}if(this.elseCount_){const t=e.newBlock("controls_select_default");t.initSvg(),n.connect(t.previousConnection)}return t},compose:function(e){this.elseCount_&&this.removeInput("DEFAULT"),this.elseCount_=0;for(let e=this.elseifCount_;e>0;e--)this.getInput("SEL"+e)&&this.removeInput("SEL"+e),this.getInput("CASE"+e)&&this.removeInput("CASE"+e);this.elseifCount_=0;let t,n,i,o=e.getInputTargetBlock("STACK");for(;o;){switch(o.type){case"controls_select_case":this.elseifCount_++,t=this.appendValueInput("SEL"+this.elseifCount_).setCheck("Number").appendField("case"),n=this.appendStatementInput("CASE"+this.elseifCount_),n.appendField("do (then break").appendField(new(_().FieldCheckbox)("TRUE"),"BREAK"+this.elseifCount_).appendField(")"),o.valueConnection_&&t.connection.connect(o.valueConnection_),o.statementConnection_&&n.connection.connect(o.statementConnection_);break;case"controls_select_default":this.elseCount_++,i=this.appendStatementInput("DEFAULT"),i.appendField("default"),o.statementConnection_&&i.connection.connect(o.statementConnection_);break;default:throw Error("Unknown block type.")}o=o.nextConnection&&o.nextConnection.targetBlock()}},saveConnections:function(e){let t,n,i=e.getInputTargetBlock("STACK"),o=1;for(;i;){switch(i.type){case"controls_select_case":t=this.getInput("SEL"+o),n=this.getInput("CASE"+o),i.valueConnection_=t&&t.connection.targetConnection,i.statementConnection_=n&&n.connection.targetConnection,o++;break;case"controls_select_default":n=this.getInput("DEFAULT"),i.statementConnection_=n&&n.connection.targetConnection;break;default:throw Error("Unknown block type.")}i=i.nextConnection&&i.nextConnection.targetBlock()}}},_().Blocks.controls_select_select={init:function(){this.setColour(X.getColor("programming")),this.appendDummyInput().appendField("switch"),this.appendStatementInput("STACK"),this.setInputsInline(!1),this.contextMenu=!1}},_().Blocks.controls_select_case={init:function(){this.setColour(X.getColor("programming")),this.appendDummyInput().appendField("case"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.contextMenu=!1}},_().Blocks.controls_select_default={init:function(){this.setColour(X.getColor("programming")),this.appendDummyInput().appendField("default"),this.setPreviousStatement(!0,"Block"),this.contextMenu=!1}},_().propc.controls_select=function(){let e;let t="",n="",i="switch("+(_().propc.valueToCode(this,"SWITCH",_().propc.ORDER_NONE)||"0")+") {\n";for(!0!==t&&"TRUE"!==t&&"true"!==t||(i+="break;\n"),e=1;e<=this.elseifCount_;e++){const o=_().propc.valueToCode(this,"SEL"+e,_().propc.ORDER_NONE)||"0";n=_().propc.statementToCode(this,"CASE"+e),i+="case "+o+":\n"+n,t=this.getFieldValue("BREAK"+e),!0!==t&&"TRUE"!==t&&"true"!==t||(i+="break;\n")}return this.elseCount_&&(n=_().propc.statementToCode(this,"DEFAULT"),i+="default: \n"+n+"\n"),i+"}\n"},_().Blocks.cog_new={helpUrl:_().MSG_CONTROL_HELPURL,init:function(){this.setTooltip(_().MSG_COG_NEW_TOOLTIP),this.setColour(X.getColor("programming")),this.appendDummyInput().appendField("new processor"),this.appendStatementInput("METHOD").setCheck("Function").appendField("function"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:function(e){if(e&&(e.type===_().Events.CHANGE||e.type===_().Events.MOVE)){let e=null;const t=this.getRootBlock();t&&t.type.indexOf("repeat")>-1&&(e="Warning: This block can only start up to 7 additional cores - using this block in a repeat loop may cause unexpected errors!"),this.setWarningText(e)}}},_().propc.cog_new=function(){const e=_().propc.statementToCode(this,"METHOD"),t=e.replace("  ","").replace("\n","").replace("()","").replace(";","");let n="";return e.length>2&&(_().propc.cog_methods_[t]=e,n="cog_run("+t+", 128);\n"),n},_().Blocks.custom_code_multiple={helpUrl:_().MSG_SYSTEM_HELPURL,init:function(){this.setTooltip(_().MSG_CUSTOM_CODE_MULTIPLE_TOOLTIP),this.setColour(X.getColor("system")),this.appendDummyInput("BLOCK_LABEL").appendField(new(_().FieldCheckbox)("FALSE",(function(e){this.getSourceBlock().updateShape_(e,!0)})),"EDIT").appendField("  User defined code","LABEL"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.fieldValueTemp_={ARG_COUNT:"0",COLOR:X.getColor("system")},this.blockConnections_=[]},updateShape_:function(e,t){this.fieldValueTemp_.EDIT=e,!0===e||"true"===e||"TRUE"===e?(this.buildFields(),this.setupInputs(),t&&this.populateFields()):(this.setupInputs(),this.destroyFields())},buildFields:function(){if(this.getInput("SET_LABEL"))return;this.appendDummyInput("SET_LABEL").appendField("label").appendField(new(_().FieldTextInput)("User defined code",(function(e){this.getSourceBlock().fieldValueTemp_.LABEL_SET=e,this.getSourceBlock().setFieldValue("  "+e,"LABEL")})),"LABEL_SET"),this.appendDummyInput("SET_COLOR").appendField("block color").appendField(new(_().FieldColour)("#992673",(function(e){this.getSourceBlock().fieldValueTemp_.COLOR=e})).setColours(["#26994D","#268F99","#266999","#264399","#392699","#692699","#8F2699","#992673","#99264C"]).setColumns(3),"COLOR");const e=this;[["INCL","includes"],["GLOB","globals"],["SETS","setups"],["MAIN","main"],["FUNC","functions"]].forEach((function(t){e.appendDummyInput(t[0]).appendField(t[1].toLowerCase()).appendField(new(_().FieldTextInput)(""),t[1].toUpperCase())})),this.appendDummyInput("OUTS").appendField("main code is").appendField(new(_().FieldDropdown)([["inline","INL"],["a numeric value","NUM"],["a string value","STR"]],(function(e){this.getSourceBlock().fieldValueTemp_.TYPE=e,this.getSourceBlock().setOutputType(e)})),"TYPE"),this.moveInputBefore("OUTS","FUNC"),this.appendDummyInput("ARGS").appendField(new(_().FieldDropdown)((function(){const e=[["no inputs","0"]];for(let t=1;t<10;t++)e.push(["add "+t.toString(10)+" input"+(t>1?"s":""),t.toString(10)]);return e}),(function(e){this.getSourceBlock().fieldValueTemp_.ARG_COUNT=e,this.getSourceBlock().setupInputs()})),"ARG_COUNT"),this.setColour("#909090")},destroyFields:function(){const e=this;["SET_LABEL","SET_COLOR","INCL","GLOB","SETS","MAIN","FUNC","OUTS","ARGS"].forEach((function(t){e.getInput(t)&&e.removeInput(t)})),this.setColour(this.fieldValueTemp_.COLOR||"#ff8800")},populateFields:function(){const e=Object.keys(this.fieldValueTemp_),t=this;e.forEach((function(e){t.getField(e)&&"EDIT"!==e&&t.setFieldValue(t.fieldValueTemp_[e],e)}))},getConnectedBlocks:function(){for(let e=0;e<10;e++)this.getInput("ARG"+e.toString(10))&&(this.blockConnections_[e]=this.getInputTargetBlock("ARG"+e.toString(10)))},restoreConnectedBlocks:function(){for(let e=0;e<10;e++)this.getInput("ARG"+e.toString(10))&&(this.blockConnections_[e]&&this.getInput("ARG"+e.toString(10))&&this.blockConnections_[e].workspace===this.workspace?this.blockConnections_[e].outputConnection.connect(this.getInput("ARG"+e.toString(10)).connection):this.blockConnections_[e]=null)},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("field_values",JSON.stringify(this.fieldValueTemp_)),e},domToMutation:function(e){const t=e.getAttribute("field_values");if(t)this.fieldValueTemp_=JSON.parse(t);else{const t=e.parentElement.children;for(let e=0;e<t.length;e++)if("field"===t[e].tagName){const n=t[e].getAttribute("name");this.fieldValueTemp_[n]=t[e].textContent}this.fieldValueTemp_.ARG_COUNT=e.getAttribute("args"),this.fieldValueTemp_.COLOR=e.getAttribute("color"),this.fieldValueTemp_.TYPE=e.getAttribute("type"),this.fieldValueTemp_.LABEL_SET=this.getFieldValue("LABEL_SET")}this.updateShape_(this.fieldValueTemp_.EDIT,!1),this.setFieldValue(this.fieldValueTemp_.LABEL_SET,"LABEL"),this.setOutputType(this.fieldValueTemp_.TYPE||"INL")},setOutputType:function(e){"INL"===e?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0,"STR"===e?"String":"Number"))},setupInputs:function(){const e=this.fieldValueTemp_.ARG_COUNT,t=!0===this.fieldValueTemp_.EDIT||"true"===this.fieldValueTemp_.EDIT||"TRUE"===this.fieldValueTemp_.EDIT;this.getConnectedBlocks();for(let e=1;e<10;e++)this.getInput("ARG"+e.toString(10))&&this.removeInput("ARG"+e.toString(10));for(let n=1;n<=Number(e);n++)this.getInput("ARG"+n.toString(10))||(t?this.appendValueInput("ARG"+n.toString(10)).setAlign(_().ALIGN_RIGHT).appendField('input "@'+n.toString(10)+'" label',"EDIT_ARG"+n.toString(10)).appendField(new(_().FieldTextInput)(this.fieldValueTemp_["LABEL_ARG"+n.toString(10)]||"",(function(e){this.getSourceBlock().fieldValueTemp_[this.name]=e})),"LABEL_ARG"+n.toString(10)):this.appendValueInput("ARG"+n.toString(10)).setAlign(_().ALIGN_RIGHT).appendField("","EDIT_ARG"+n.toString(10)).appendField(this.fieldValueTemp_["LABEL_ARG"+n.toString(10)]||"","LABEL_ARG"+n.toString(10)));this.restoreConnectedBlocks()}},_().propc.custom_code_multiple=function(){const e=[];for(let t=1;t<10;t++)e.push(_().propc.valueToCode(this,"ARG"+t.toString(10),_().propc.ORDER_ATOMIC)||"");let t=this.getFieldValue("LABEL");t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),(-1!=="0123456789".indexOf(t[0])||"_"===t[0]&&"_"===t[1])&&(t="my_"+t);const n=(this.getFieldValue("INCLUDES")||this.fieldValueTemp_.INCLUDES||"").replace(/@([0-9])/g,(function(t,n){return e[parseInt(n)-1]})),i=(this.getFieldValue("GLOBALS")||this.fieldValueTemp_.GLOBALS||"").replace(/@([0-9])/g,(function(t,n){return e[parseInt(n)-1]})),o=(this.getFieldValue("SETUPS")||this.fieldValueTemp_.SETUPS||"").replace(/@([0-9])/g,(function(t,n){return e[parseInt(n)-1]})),s=(this.getFieldValue("MAIN")||this.fieldValueTemp_.MAIN||"").replace(/@([0-9])/g,(function(t,n){return e[parseInt(n)-1]})),l=(this.getFieldValue("FUNCTIONS")||this.fieldValueTemp_.FUNCTIONS||"").replace(/@([0-9])/g,(function(t,n){return e[parseInt(n)-1]}));let r="";return""!==n&&(_().propc.definitions_["cCode"+t]=n+"\n"),""!==i&&(_().propc.global_vars_["cCode"+t]=i+"\n"),""!==o&&(_().propc.setups_["cCode"+t]=o+"\n"),""!==s&&(r+=s),"INL"===(this.getFieldValue("TYPE")||this.fieldValueTemp_.TYPE)&&(r+="\n"),""!==l&&(_().propc.methods_["cCode"+t]=l+"\n"),["NUM","STR"].indexOf(this.getFieldValue("TYPE")||this.fieldValueTemp_.TYPE||"")>-1?[r,_().propc.ORDER_ATOMIC]:r};var Y=n(666);_().Blocks.make_pin={init:function(){const e=x();"Scribbler Robot"===e.description?this.setHelpUrl(_().MSG_S3_IO_HELPURL):this.setHelpUrl(_().MSG_PINS_HELPURL),this.setTooltip(_().MSG_MAKE_PIN_TOOLTIP),this.setColour(X.getColor("io")),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.appendDummyInput().appendField("make PIN").appendField(new(_().FieldDropdown)(e.digital),"PIN").appendField(new(_().FieldDropdown)([["high","HIGH"],["low","LOW"],["toggle","TOGGLE"],["input","INPUT"],["reverse","REVERSE"]]),"ACTION")}},_().propc.make_pin=function(){const e=this.getFieldValue("PIN");switch(this.getFieldValue("ACTION")){case"HIGH":return"high("+e+");\n";case"LOW":return"low("+e+");\n";case"TOGGLE":return"toggle("+e+");\n\tset_direction("+e+", 1);\n";case"INPUT":return"set_direction("+e+", 0);\n";case"REVERSE":return"reverse("+e+");\n"}},_().Blocks.make_pin_input={helpUrl:_().MSG_PINS_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_MAKE_PIN_INPUT_TOOLTIP),this.setColour(X.getColor("io")),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.appendDummyInput("").appendField("make PIN"),this.appendValueInput("PIN").setCheck("Number").appendRange("A,"+e.digital.toString()),this.appendDummyInput("ACTION").appendField(new(_().FieldDropdown)([["high","HIGH"],["low","LOW"],["toggle","TOGGLE"],["input","INPUT"],["reverse","REVERSE"]]),"ACTION")}},_().propc.make_pin_input=function(){const e=_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC)||0;switch(this.getFieldValue("ACTION")){case"HIGH":return"high("+e+");\n";case"LOW":return"low("+e+");\n";case"TOGGLE":return"toggle("+e+");\n\tset_direction("+e+", 1);\n";case"INPUT":return"set_direction("+e+", 0);\n";case"REVERSE":return"reverse("+e+");\n"}},_().Blocks.check_pin={init:function(){const e=x();"Scribbler Robot"===e.description?this.setHelpUrl(_().MSG_S3_IO_HELPURL):this.setHelpUrl(_().MSG_PINS_HELPURL),this.setTooltip(_().MSG_CHECK_PIN_TOOLTIP),this.setColour(X.getColor("io")),this.appendDummyInput("").appendField("check PIN").appendField(new(_().FieldDropdown)(e.digital),"PIN"),this.setOutput(!0,"Number")}},_().propc.check_pin=function(){return["input("+this.getFieldValue("PIN")+")",_().propc.ORDER_ATOMIC]},_().Blocks.check_pin_input={helpUrl:_().MSG_PINS_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_CHECK_PIN_INPUT_TOOLTIP),this.setColour(X.getColor("io")),this.appendValueInput("PIN").appendField("check PIN").setCheck("Number").appendRange("A,"+e.digital.toString()),this.setOutput(!0,"Number"),this.setInputsInline(!0)}},_().propc.check_pin_input=function(){return["input("+(_().propc.valueToCode(this,"PIN",_().propc.ORDER_UNARY_PREFIX)||"0")+")",_().propc.ORDER_ATOMIC]},_().Blocks.set_pins={helpUrl:_().MSG_PINS_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_SET_PINS_TOOLTIP),this.setColour(X.getColor("io")),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null);const t=[];for(let n=e.contiguous_pins_start;n<=e.contiguous_pins_end;n++)t.push([n.toString(),n.toString()]);const n=[];for(let t=e.contiguous_pins_start;t<=e.contiguous_pins_end;t++)n.push([t.toString(),t.toString()]);this.appendDummyInput("").appendField("set the").appendField(new(_().FieldDropdown)([["states","STATE"],["directions","DIRECTION"]],(function(e){this.getSourceBlock().updateShape_({ACTION:e})})),"ACTION").appendField("from lowest PIN").appendField(new(_().FieldDropdown)(n,(function(e){this.getSourceBlock().updateShape_({START_PIN:e})})),"START_PIN").appendField("to highest PIN").appendField(new(_().FieldDropdown)(t,(function(e){this.getSourceBlock().updateShape_({PIN_COUNT:e})})),"PIN_COUNT"),this.appendDummyInput("PINS").appendField("values:").appendField("P0:").appendField(new(_().FieldDropdown)([["HIGH","1"],["LOW","0"]]),"P0")},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("action",this.getFieldValue("ACTION")),e.setAttribute("pin_count",this.getFieldValue("PIN_COUNT")),e.setAttribute("start_pin",this.getFieldValue("START_PIN")),e},domToMutation:function(e){this.updateShape_({ACTION:e.getAttribute("action"),PIN_COUNT:e.getAttribute("pin_count"),START_PIN:e.getAttribute("start_pin")})},updateShape_:function(e){const t=[];for(let e=0;e<32;e++)t.push(this.getFieldValue("P"+e));let n=e.ACTION;void 0===e.ACTION&&(n=this.getFieldValue("ACTION"));let i=e.PIN_COUNT;void 0===e.PIN_COUNT&&(i=this.getFieldValue("PIN_COUNT"));let o=e.START_PIN;void 0===e.START_PIN&&(o=this.getFieldValue("START_PIN")),i=Number(i),o=Number(o),this.getInput("PINS")&&this.removeInput("PINS"),this.appendDummyInput("PINS").appendField("Values:");const s=this.getInput("PINS");for(let e=0;e<i-o+1;e++){const t=o+e;"STATE"===n?s.appendField("P"+t+":").appendField(new(_().FieldDropdown)([["HIGH","1"],["LOW","0"]]),"P"+t):"DIRECTION"===n&&s.appendField("P"+t+":").appendField(new(_().FieldDropdown)([["OUT","1"],["IN","0"]]),"P"+t)}for(let e=0;e<32;e++)this.getField("P"+e)&&null!==t[e]&&this.setFieldValue(t[e],"P"+e)}},_().propc.set_pins=function(){let e="";const t=this.getFieldValue("ACTION"),n=Number(this.getFieldValue("PIN_COUNT")),i=Number(this.getFieldValue("START_PIN"));"STATE"===t?e="set_outputs(":"DIRECTION"===t&&(e="set_directions("),e+=n,e+=", ",e+=i,e+=", 0b";for(let t=n;t>=i;t--)e+=this.getFieldValue("P"+t);return e+");\n"},_().Blocks.get_pins={helpUrl:_().MSG_PINS_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_GET_PINS_TOOLTIP),this.setColour(X.getColor("io")),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number");const t=[];for(let n=e.contiguous_pins_start;n<=e.contiguous_pins_end;n++)t.push([n.toString(),n.toString()]);const n=[];for(let t=e.contiguous_pins_start;t<=e.contiguous_pins_end;t++)n.push([t.toString(),t.toString()]);this.appendDummyInput("").appendField("get the").appendField(new(_().FieldDropdown)([["states","STATE"],["directions","DIRECTION"]]),"ACTION").appendField("from lowest PIN").appendField(new(_().FieldDropdown)(n),"START_PIN").appendField("to highest PIN").appendField(new(_().FieldDropdown)(t),"PIN_COUNT")}},_().propc.get_pins=function(){const e=this.getFieldValue("ACTION");let t="";return"STATE"===e?t="get_states(":"DIRECTION"===e&&(t="get_outputs("),t+=Number(this.getFieldValue("PIN_COUNT"))+", "+Number(this.getFieldValue("START_PIN"))+")",[t,_().propc.ORDER_NONE]},_().Blocks.set_pins_binary={helpUrl:_().MSG_PINS_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_SET_PINS_BINARY_TOOLTIP),this.setColour(X.getColor("io")),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null);const t=[];for(let n=e.contiguous_pins_start;n<=e.contiguous_pins_end;n++)t.push([n.toString(),n.toString()]);const n=[];for(let t=e.contiguous_pins_start;t<=e.contiguous_pins_end;t++)n.push([t.toString(),t.toString()]);this.appendValueInput("VALUE").appendField("set the").appendField(new(_().FieldDropdown)([["states","STATE"],["directions","DIRECTION"]]),"ACTION").appendField("from lowest PIN").appendField(new(_().FieldDropdown)(n),"START_PIN").appendField("to highest PIN").appendField(new(_().FieldDropdown)(t),"PIN_COUNT").appendField("using bits from").setCheck("Number")}},_().propc.set_pins_binary=function(){const e=_().propc.valueToCode(this,"VALUE",_().propc.ORDER_NONE)||"0b0000",t=this.getFieldValue("ACTION");let n="";return"STATE"===t?n="set_outputs(":"DIRECTION"===t&&(n="set_directions("),n+=Number(this.getFieldValue("PIN_COUNT"))+", "+Number(this.getFieldValue("START_PIN"))+", "+e+");\n",n},_().Blocks.base_freqout={helpUrl:_().MSG_AUDIO_HELPURL,init:function(){this.setTooltip(_().MSG_BASE_FREQOUT_TOOLTIP),this.setColour(X.getColor("io")),this.addPinMenu("frequency PIN","DURATION"),this.appendValueInput("DURATION").appendField("duration (ms)").setCheck("Number"),this.appendValueInput("FREQUENCY").appendRange("R,0,40000000,0").appendField("frequency (Hz)").setCheck("Number"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},addPinMenu:function(e,t){const n=x();this.appendDummyInput("SET_PIN").appendField(e,"LABEL").appendField(new(_().FieldDropdown)(n.digital.concat([["other","other"]]),(function(e){this.getSourceBlock().setToOther(e,t)})),"PIN"),this.moveBefore=t,this.otherPin=!1},setToOther:function(e,t){const n=x();if("other"===e){this.otherPin=!0;const e=this.getFieldValue("LABEL");if(this.getInput("SET_PIN")&&this.removeInput("SET_PIN"),this.appendValueInput("PIN").appendField(e).setCheck("Number").appendRange("A,"+n.digital.toString()),t)this.moveInputBefore("PIN",t);else{const e=this;setTimeout((function(){e.render()}),200)}}},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("otherpin",this.otherPin),e},domToMutation:function(e){"true"===e.getAttribute("otherpin")&&this.setToOther("other",this.moveBefore)}},_().propc.base_freqout=function(){let e;e=this.otherPin?_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");return"freqout("+e+", "+(_().propc.valueToCode(this,"DURATION",_().propc.ORDER_ATOMIC)||1e3)+", "+(_().propc.valueToCode(this,"FREQUENCY",_().propc.ORDER_ATOMIC)||3e3)+");\n"},_().Blocks.base_count={helpUrl:_().MSG_ANALOG_PULSE_IN_OUT_HELPURL,init:function(){this.setTooltip(_().MSG_BASE_COUNT_TOOLTIP),this.setColour(X.getColor("io")),this.addPinMenu("count pulses PIN","DURATION"),this.appendValueInput("DURATION").appendField("duration (ms)").setCheck("Number"),this.setInputsInline(!0),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number")},mutationToDom:_().Blocks.base_freqout.mutationToDom,domToMutation:_().Blocks.base_freqout.domToMutation,addPinMenu:_().Blocks.base_freqout.addPinMenu,setToOther:_().Blocks.base_freqout.setToOther},_().propc.base_count=function(){let e;e=this.otherPin?_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");return["count("+e+", "+(_().propc.valueToCode(this,"DURATION",_().propc.ORDER_ATOMIC)||"1")+")",_().propc.ORDER_NONE]},_().Blocks.pulse_in={helpUrl:_().MSG_ANALOG_PULSE_IN_OUT_HELPURL,init:function(){this.setTooltip(_().MSG_PULSE_IN_TOOLTIP),this.setColour(X.getColor("io")),this.addPinMenu("pulse-in PIN","READ"),this.appendDummyInput("READ").appendField("read").appendField(new(_().FieldDropdown)([["negative/low pulses","0"],["positive/high pulses","1"]]),"STATE"),this.setInputsInline(!0),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number")},mutationToDom:_().Blocks.base_freqout.mutationToDom,domToMutation:_().Blocks.base_freqout.domToMutation,addPinMenu:_().Blocks.base_freqout.addPinMenu,setToOther:_().Blocks.base_freqout.setToOther},_().propc.pulse_in=function(){let e;e=this.otherPin?_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");return["pulse_in("+e+", "+this.getFieldValue("STATE")+")",_().propc.ORDER_NONE]},_().Blocks.pulse_out={helpUrl:_().MSG_ANALOG_PULSE_IN_OUT_HELPURL,init:function(){this.setTooltip(_().MSG_PULSE_OUT_TOOLTIP),this.setColour(X.getColor("io")),this.addPinMenu("pulse-out PIN","PULSE_LENGTH"),this.appendValueInput("PULSE_LENGTH").appendField("pulse length (µs)").setCheck("Number"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},mutationToDom:_().Blocks.base_freqout.mutationToDom,domToMutation:_().Blocks.base_freqout.domToMutation,addPinMenu:_().Blocks.base_freqout.addPinMenu,setToOther:_().Blocks.base_freqout.setToOther},_().propc.pulse_out=function(){let e;e=this.otherPin?_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");return"pulse_out("+e+", "+_().propc.valueToCode(this,"PULSE_LENGTH",_().propc.ORDER_ATOMIC)+");\n"},_().Blocks.rc_charge_discharge={helpUrl:_().MSG_ANALOG_RC_TIME_HELPURL,init:function(){this.setTooltip(_().MSG_RC_CHARGE_DISCHARGE_TOOLTIP),this.setColour(X.getColor("io")),this.addPinMenu("RC time PIN","MODE"),this.appendDummyInput("MODE").appendField(" ").appendField(new(_().FieldDropdown)([["charge","0"],["discharge","1"]]),"STATE"),this.setInputsInline(!0),this.setPreviousStatement(!1,"Block"),this.setNextStatement(!1,null),this.setOutput(!0,"Number")},mutationToDom:_().Blocks.base_freqout.mutationToDom,domToMutation:_().Blocks.base_freqout.domToMutation,addPinMenu:_().Blocks.base_freqout.addPinMenu,setToOther:_().Blocks.base_freqout.setToOther},_().propc.rc_charge_discharge=function(){let e;e=this.otherPin?_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");return["rc_time("+e+", "+this.getFieldValue("STATE")+")",_().propc.ORDER_NONE]},_().Blocks.eeprom_write={helpUrl:_().MSG_EEPROM_HELPURL,init:function(){this.setTooltip(_().MSG_EEPROM_WRITE_TOOLTIP),this.setColour(X.getColor("output")),this.appendValueInput("DATA").setCheck(null).appendField("EEPROM write").appendField(new(_().FieldDropdown)([["number","NUMBER"],["text","TEXT"],["byte","BYTE"]],(function(e){this.getSourceBlock().setOutputType_(e)})),"TYPE"),this.appendValueInput("ADDRESS").appendRange("R,0,7675,0").setCheck("Number").appendField("to address"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setOutputType_(this.getFieldValue("DATA"))},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("type",this.getFieldValue("TYPE")),e},domToMutation:function(e){let t=e.getAttribute("type");t||(t=null),this.setOutputType_(t||null)},setOutputType_:function(e){let t="Number";"TEXT"===e&&(t="String"),null!==e&&"null"!==e||(t=null),this.getInput("DATA").setCheck(t)}},_().propc.eeprom_write=function(){const e=this.getFieldValue("TYPE"),t=_().propc.valueToCode(this,"ADDRESS",_().propc.ORDER_ATOMIC);let n=_().propc.valueToCode(this,"DATA",_().propc.ORDER_ATOMIC)||"",i="";return""!==n&&("BYTE"===e?(3===n.length&&"'"===n[0]&&"'"===n[2]||(n!==n.replace(/[^0-9]+/g,"")?n="("+n+" & 0xFF)":0<parseInt(n)&&parseInt(n)<256||(n="("+n+" & 0xFF)")),i+="ee_putByte("+n+", (32768 + constrainInt("+t+", 0, 7675)) );\n"):i+="NUMBER"===e?"ee_putInt("+n+", (32768 + constrainInt("+t+", 0, 7675)) );\n":"ee_putStr("+n+", ((int) strlen("+n+") + 1), (32768 + constrainInt("+t+", 0, 7675)) );\n"),i},_().Blocks.eeprom_read={helpUrl:_().MSG_EEPROM_HELPURL,init:function(){this.setTooltip(_().MSG_EEPROM_READ_TOOLTIP),this.setColour(X.getColor("output")),this.appendValueInput("ADDRESS").setCheck("Number").appendField("EEPROM read").appendField(new(_().FieldDropdown)([["number","NUMBER"],["text","TEXT"],["byte","BYTE"]]),"TYPE").appendRange("R,0,7675,0").appendField("from address"),this.appendDummyInput().appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.eeprom_read=function(){const e=this.getFieldValue("TYPE"),t=_().propc.valueToCode(this,"ADDRESS",_().propc.ORDER_ATOMIC)||"0",n=_().propc.variableDB_.getName(this.getFieldValue("VALUE"),_().VARIABLE_CATEGORY_NAME);let i="";return""!==n&&("BYTE"===e?i+=n+" = ee_getByte( 32768 + constrainInt("+t+", 0, 7675));\n":"NUMBER"===e?i+=n+" = ee_getInt( 32768 + constrainInt("+t+", 0, 7675));\n":(this.disabled||(_().propc.global_vars_.i2c_eeBffr="char __eeBffr[1];",_().propc.global_vars_.i2c_eeIdx="int __eeIdx = 0;",_().propc.vartype_[n]="char *"),i+="// Get the string from EEPROM one character at a time until it finds the end of the string.\n__eeIdx = 0;\n",i+="while(__eeIdx < 128) {\n  ee_getStr(__eeBffr, 1, (32768 + constrainInt("+t+", 0, 7675)) + __eeIdx);\n",i+=n+"[__eeIdx] = __eeBffr[0];\nif("+n+"[__eeIdx] == 0) break;\n  __eeIdx++;\n}\n",i+="if(__eeIdx >= 128) "+n+"[127] = 0;\n")),i},_().Blocks.servo_move={init:function(){"Scribbler Robot"===x().description?(this.setHelpUrl(_().MSG_S3_SERVO_HELPURL),this.setColour(X.getColor("robot"))):(this.setHelpUrl(_().MSG_SERVO_HELPURL),this.setColour(X.getColor("output"))),this.setTooltip(_().MSG_SERVO_MOVE_TOOLTIP),this.addPinMenu("Servo PIN","ANGLE"),this.appendValueInput("ANGLE").appendField("set angle").setCheck("Number").appendRange("R,0,180,0"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},mutationToDom:_().Blocks.base_freqout.mutationToDom,domToMutation:_().Blocks.base_freqout.domToMutation,addPinMenu:_().Blocks.base_freqout.addPinMenu,setToOther:_().Blocks.base_freqout.setToOther},_().propc.servo_move=function(){let e;e=this.otherPin?_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");const t=_().propc.valueToCode(this,"ANGLE",_().propc.ORDER_NONE);return this.disabled||(_().propc.definitions_["include servo"]='#include "servo.h"'),"servo_angle("+e+", "+t+" * 10);\n"},_().Blocks.servo_speed={init:function(){"Scribbler Robot"===x().description?(this.setHelpUrl(_().MSG_S3_SERVO_HELPURL),this.setColour(X.getColor("robot"))):(this.setHelpUrl(_().MSG_SERVO_HELPURL),this.setColour(X.getColor("output"))),this.setTooltip(_().MSG_SERVO_SPEED_TOOLTIP),this.addPinMenu("CR servo PIN","SPEED"),this.appendValueInput("SPEED").appendField("speed").setCheck("Number"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},mutationToDom:_().Blocks.base_freqout.mutationToDom,domToMutation:_().Blocks.base_freqout.domToMutation,addPinMenu:_().Blocks.base_freqout.addPinMenu,setToOther:_().Blocks.base_freqout.setToOther},_().propc.servo_speed=function(){let e;e=this.otherPin?_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");const t=_().propc.valueToCode(this,"SPEED",_().propc.ORDER_NONE);return this.disabled||(_().propc.definitions_["include servo"]='#include "servo.h"'),"servo_speed("+e+", "+t+");\n"},_().Blocks.servo_set_ramp={helpUrl:_().MSG_SERVO_HELPURL,init:function(){this.setTooltip(_().MSG_SERVO_SET_RAMP_TOOLTIP),this.setColour(X.getColor("output")),this.addPinMenu("CR servo PIN","RAMPSTEP"),this.appendValueInput("RAMPSTEP").appendField("set ramp step").setCheck("Number").appendRange("R,0,100,0"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},mutationToDom:_().Blocks.base_freqout.mutationToDom,domToMutation:_().Blocks.base_freqout.domToMutation,addPinMenu:_().Blocks.base_freqout.addPinMenu,setToOther:_().Blocks.base_freqout.setToOther},_().propc.servo_set_ramp=function(){let e;e=this.otherPin?_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");let t=_().propc.valueToCode(this,"RAMPSTEP",_().propc.ORDER_NONE);return Number(t)<0?t="0":Number(t)>100&&(t="100"),this.disabled||(_().propc.definitions_["include servo"]='#include "servo.h"'),"servo_setramp("+e+", "+t+");\n"},_().Blocks.fb360_init={init:function(){const e=x();this.setTooltip(_().MSG_FB360_INIT_TOOLTIP),"Scribbler Robot"===e.description?(this.setHelpUrl(_().MSG_S3_SERVO_HELPURL),this.setColour(X.getColor("robot"))):(this.setHelpUrl(_().MSG_SERVO_HELPURL),this.setColour(X.getColor("output"))),this.appendDummyInput().appendField("Feedback 360° servo initialize PIN").appendField(new(_().FieldDropdown)(e.digital),"PIN").appendField("FB").appendField(new(_().FieldDropdown)(e.digital),"FB"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.fb360_init=function(){const e=this.getFieldValue("PIN"),t=this.getFieldValue("FB");return this.disabled||(_().propc.definitions_["include servo360"]='#include "servo360.h"',_().propc.setups_["servo360_"+e]="servo360_connect("+e+","+t+");"),""},_().Blocks.fb360_setup={init:function(){const e=x();this.setTooltip(_().MSG_FB360_SETUP_TOOLTIP),"Scribbler Robot"===e.description?(this.setHelpUrl(_().MSG_S3_SERVO_HELPURL),this.setColour(X.getColor("robot"))):(this.setHelpUrl(_().MSG_SERVO_HELPURL),this.setColour(X.getColor("output"))),this._menuOptions=[["acceleration (°/s²) to","setAcceleration"],["max speed (°/s) to","setMaxSpeed"],["turn count (+/- revolutions) to","setTurns"],["home to position (+/- °)","setAngleOffset"],["kP for speed to","setControlSys,S360_SETTING_KPV"],["kI for speed to","setControlSys,S360_SETTING_KIV"],["kD for speed to","setControlSys,S360_SETTING_KDV"],["I for speed max to","setControlSys,S360_SETTING_IV_MAX"],["kP for position to","setControlSys,S360_SETTING_KPA"],["kI for position to","setControlSys,S360_SETTING_KIA"],["kD for position to","setControlSys,S360_SETTING_KDA"],["I for position max to","setControlSys,S360_SETTING_IA_MAX"]],this.addPinMenu("Feedback 360° servo PIN","VALUE"),this.appendValueInput("VALUE").appendField("configure").appendField(new(_().FieldDropdown)(this._menuOptions,(function(e){this.getSourceBlock().updateShape_(e)})),"PARAM").appendRange("R,36,3600,0"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},addPinMenu:_().Blocks.base_freqout.addPinMenu,setToOther:_().Blocks.base_freqout.setToOther,updateShape_:function(e){"setAcceleration"===e?this.getInput("VALUE").appendRange("R,36,3600,1800"):"setMaxSpeed"===e?this.getInput("VALUE").appendRange("R,10,1080,540"):this.getInput("VALUE").appendRange("R,-2147483648,2147483647,0")},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("param",this.getFieldValue("PARAM")),e.setAttribute("otherpin",this.otherPin),e},domToMutation:function(e){"true"===e.getAttribute("otherpin")&&this.setToOther("other",this.moveBefore);const t=e.getAttribute("param");this.updateShape_(t)},onchange:function(){let e="WARNING: You need a Feedback 360° servo initialize block set to match the PIN on this block!";const t=_().getMainWorkspace().getAllBlocks();for(let n=0;n<t.length;n++){const i=t[n].type;let o=this.getFieldValue("PIN");"fb360_init"!==i||t[n].getFieldValue("PIN")!==o&&t[n].getFieldValue("FB")!==o||(e=null),"fb360_init"===i&&this.getInput("SET_PIN"),this.otherPin&&(o=_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC),!isNaN(parseFloat(o))&&isFinite(o)&&t[n].getFieldValue("PIN")!==o&&t[n].getFieldValue("FB")!==o||(e=null)),this.setWarningText(e)}}},_().propc.fb360_setup=function(){const e=this.getFieldValue("PARAM"),t=_().propc.valueToCode(this,"VALUE",_().propc.ORDER_NONE)||"0";let n;n=this.otherPin?_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");if(_().getMainWorkspace().getAllBlocks().toString().indexOf("Feedback 360° servo initialize")>-1){if(e.indexOf(",")>-1){const i=e.split(",");return"servo360_"+i[0]+"("+n+", "+i[1]+", "+t+");\n"}return"servo360_"+e+"("+n+", "+t+");\n"}return"// WARNING: You need a Feedback 360° servo initialize block set to match the PIN on this block!"},_().Blocks.fb360_set={init:function(){const e=x();this.setTooltip(_().MSG_FB360_SET_TOOLTIP),"Scribbler Robot"===e.description?(this.setHelpUrl(_().MSG_S3_SERVO_HELPURL),this.setColour(X.getColor("robot"))):(this.setHelpUrl(_().MSG_SERVO_HELPURL),this.setColour(X.getColor("output"))),this._menuOptions=[["set speed to (+/- °/s)","speed"],["set position to (+/- °)","angle"],["change position by (+/- °)","goto"]],this.addPinMenu("Feedback 360° servo PIN","VALUE"),this.appendValueInput("VALUE").setCheck("Number").appendField(" ").appendField(new(_().FieldDropdown)(this._menuOptions,(function(e){this.getSourceBlock().updateShape_(e)})),"PARAM").appendRange("R,-720,720,0"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},updateShape_:function(e){"speed"===e?this.getInput("VALUE").appendRange("R,-720,720,0"):"angle"===e?this.getInput("VALUE").appendRange("R,-1456,1456,0"):this.getInput("VALUE").appendRange("R,-2147483648,2147483647,0")},onchange:_().Blocks.fb360_setup.onchange,addPinMenu:_().Blocks.base_freqout.addPinMenu,setToOther:_().Blocks.base_freqout.setToOther,mutationToDom:_().Blocks.fb360_setup.mutationToDom,domToMutation:_().Blocks.fb360_setup.domToMutation},_().propc.fb360_set=_().propc.fb360_setup,_().Blocks.fb360_get={init:function(){const e=x();this.setTooltip(_().MSG_FB360_GET_TOOLTIP),"Scribbler Robot"===e.description?(this.setHelpUrl(_().MSG_S3_SERVO_HELPURL),this.setColour(X.getColor("robot"))):(this.setHelpUrl(_().MSG_SERVO_HELPURL),this.setColour(X.getColor("output"))),this.addPinMenu("Feedback 360° servo PIN","VALUE"),this.appendDummyInput("VALUE").appendField("position (°)"),this.setOutput(!0,"Number"),this.setInputsInline(!0)},onchange:_().Blocks.fb360_setup.onchange,addPinMenu:_().Blocks.base_freqout.addPinMenu,setToOther:_().Blocks.base_freqout.setToOther,mutationToDom:_().Blocks.base_freqout.mutationToDom,domToMutation:_().Blocks.base_freqout.domToMutation},_().propc.fb360_get=function(){let e;e=this.otherPin?_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");return _().getMainWorkspace().getAllBlocks().toString().indexOf("Feedback 360° servo initialize")>-1?["servo360_getAngle("+e+")",_().propc.ORDER_NONE]:["0",_().propc.ORDER_NONE]},_().Blocks.fb360_status={init:function(){const e=x();this.setTooltip(_().MSG_FB360_STATUS_TOOLTIP),"Scribbler Robot"===e.description?(this.setHelpUrl(_().MSG_S3_SERVO_HELPURL),this.setColour(X.getColor("robot"))):(this.setHelpUrl(_().MSG_SERVO_HELPURL),this.setColour(X.getColor("output"))),this.addPinMenu("Feedback 360° servo PIN","VALUE"),this.appendDummyInput("VALUE").appendField(new(_().FieldDropdown)([["is turning a speed","S360_SPEED"],["is moving to a position","S360_GOTO"],["is holding at a position","S360_POSITION"]]),"STATUS"),this.setOutput(!0,"Number"),this.setInputsInline(!0)},onchange:_().Blocks.fb360_setup.onchange,addPinMenu:_().Blocks.base_freqout.addPinMenu,setToOther:_().Blocks.base_freqout.setToOther,mutationToDom:_().Blocks.base_freqout.mutationToDom,domToMutation:_().Blocks.base_freqout.domToMutation},_().propc.fb360_status=function(){let e;e=this.otherPin?_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");return _().getMainWorkspace().getAllBlocks().toString().indexOf("Feedback 360° servo initialize")>-1?["(servo360_getCsop("+e+") == "+this.getFieldValue("STATUS")+")",_().propc.ORDER_NONE]:["0",_().propc.ORDER_NONE]},_().Blocks.ab_volt_in={helpUrl:_().MSG_ANALOG_PULSES_HELPURL,init:function(){let e=x();if(0===e.analog.length){const t=`ABVoltsIn: Empty profile analog list detected for board type '${G().boardType.name}'.`;Y.uT(t),console.log(t),e=["A0","0"]}this.setTooltip(_().MSG_AB_VOLT_IN_TOOLTIP),this.setColour(X.getColor("io")),this.appendDummyInput().appendField("A/D channel").appendField(new(_().FieldDropdown)(e.analog),"CHANNEL").appendField("read (0-5V) in volt-100ths"),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.ab_volt_in=function(){const e=this.getFieldValue("CHANNEL");this.disabled||(_().propc.definitions_["include abvolts"]='#include "abvolts.h"',_().propc.setups_.setup_abvolts="ad_init(21, 20, 19, 18);");return["(ad_in("+e+") * 500 / 4096)",_().propc.ORDER_NONE]},_().Blocks.ab_volt_out={helpUrl:_().MSG_ANALOG_PULSES_HELPURL,init:function(){this.setTooltip(_().MSG_AB_VOLT_OUT_TOOLTIP),this.setColour(X.getColor("io")),this.appendDummyInput().appendField("D/A channel").appendField(new(_().FieldDropdown)([["0","0"],["1","1"]]),"CHANNEL").appendField("output (0-3.3V)"),this.appendValueInput("VALUE").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendRange("R,0,330,0").appendField("volt-100ths"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.ab_volt_out=function(){const e=this.getFieldValue("CHANNEL"),t=_().propc.valueToCode(this,"VALUE",_().propc.ORDER_NONE)||"0";return this.disabled||(_().propc.definitions_["include abvolts"]='#include "abvolts.h"',_().propc.setups_.setup_abvolt_out="da_init(26, 27);"),"da_out("+e+", ("+t+"* 256 / 330));\n"},_().Blocks.pwm_start={helpUrl:_().MSG_ANALOG_PWM_HELPURL,init:function(){this.setTooltip(_().MSG_PWM_START_TOOLTIP),this.setColour("#FF8800"),this.appendDummyInput().appendField("PWM initialize"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText("NOTE: The PWM initialize block is no longer\nneeded. It can be safely deleted.")}},_().propc.pwm_start=function(){return"// NOTE: The PWM initialize block is no longer needed. It can be safely deleted.\n"},_().Blocks.pwm_set={helpUrl:_().MSG_ANALOG_PWM_HELPURL,init:function(){this.setTooltip(_().MSG_PWM_SET_TOOLTIP),this.setColour(X.getColor("io")),this.addPinMenu("PWM set PIN","CHANNEL"),this.appendDummyInput("CHANNEL").appendField("channel").appendField(new(_().FieldDropdown)([["A","0"],["B","1"]]),"CHANNEL"),this.appendValueInput("DUTY_CYCLE",Number).appendRange("R,0,100,0").setCheck("Number").appendField("duty cycle (%)"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},addPinMenu:_().Blocks.base_freqout.addPinMenu,setToOther:_().Blocks.base_freqout.setToOther,mutationToDom:_().Blocks.base_freqout.mutationToDom,domToMutation:_().Blocks.base_freqout.domToMutation},_().propc.pwm_set=function(){let e;e=this.otherPin?_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");const t=this.getFieldValue("CHANNEL");let n=_().propc.valueToCode(this,"DUTY_CYCLE",_().propc.ORDER_NONE);return Number(n)<0?n="0":Number(n)>100&&(n="100"),this.disabled||(_().propc.setups_.pwm_start="pwm_start(100);"),"pwm_set("+e+", "+t+", "+n+");\n"},_().Blocks.pwm_stop={helpUrl:_().MSG_ANALOG_PWM_HELPURL,init:function(){this.setTooltip(_().MSG_PWM_STOP_TOOLTIP),this.setColour(X.getColor("io")),this.appendDummyInput().appendField(new(_().FieldDropdown)([["PWM Stop","stop()"],["PWM Start","start(100)"]]),"ACTION"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:function(e){if(e.type==_().Events.BLOCK_CREATE||e.type==_().Events.BLOCK_DELETE||e.type==_().Events.BLOCK_CHANGE){let e=null;-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("PWM Stop")&&"start(100)"===this.getFieldValue("ACTION")&&(e='WARNING: The "PWM Start" block should only be used to restart PWM\nafter a "PWM Stop" has already been used!'),this.setWarningText(e)}}},_().propc.pwm_stop=function(){return"pwm_"+(this.getFieldValue("ACTION")||"stop()")+";\n"},_().Blocks.sound_init={helpUrl:_().MSG_AUDIO_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_SOUND_INIT_TOOLTIP),this.setColour(X.getColor("io")),this.appendDummyInput().appendField("sound initialize left (+) PIN").appendField(new(_().FieldDropdown)(e.digital.concat([["None","-1"]])),"PINL").appendField("right (−) PIN").appendField(new(_().FieldDropdown)(e.digital.concat([["None","-1"]])),"PINR"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.sound_init=function(){if(!this.disabled){const e=this.getFieldValue("PINL"),t=this.getFieldValue("PINR");_().propc.setups_.sound_start="audio0 = sound_run("+e+", "+t+");",_().propc.definitions_.include_soundplayer='#include "sound.h"',_().propc.definitions_.sound_define_0="sound* audio0;"}return""},_().Blocks.sound_play={helpUrl:_().MSG_AUDIO_HELPURL,init:function(){this.setTooltip(_().MSG_SOUND_PLAY_TOOLTIP),this.setColour(X.getColor("io")),this.appendDummyInput("SET_CHANNEL").appendField("sound channel").appendField(new(_().FieldDropdown)([["A","0"],["B","1"],["C","2"],["D","3"],["other","other"]],(function(e){this.getSourceBlock().setToOther(e,"VALUE")})),"CHANNEL"),this.otherChannel=!1,this.setSoundAction("freq"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},setSoundAction:function(e){let t=null;if(e!==this.getFieldValue("ACTION")){const n=this.getInput("VALUE");n&&(n.connection&&(t=n.connection.targetBlock()),this.removeInput("VALUE")),"wave"===e?(this.appendDummyInput("VALUE").appendField(" ").appendField(new(_().FieldDropdown)([["set waveform","wave"],["set frequency","freq"],["set volume","volume"],["stop","stop"]],(function(e){this.getSourceBlock().setSoundAction(e)})),"ACTION").appendField(new(_().FieldDropdown)([["sine","SINE"],["square","SQUARE"],["triangle","TRIANGLE"],["sawtooth","SAW"],["noise","NOISE"]]),"WAVE"),this.waveInput=!0):"stop"===e?(this.appendDummyInput("VALUE").appendField(" ").appendField(new(_().FieldDropdown)([["stop","stop"],["set frequency","freq"],["set volume","volume"],["set waveform","wave"]],(function(e){this.getSourceBlock().setSoundAction(e)})),"ACTION"),this.waveInput=!0):"volume"===e?(this.appendValueInput("VALUE").setCheck(null).appendRange("R,0,127,64").appendField(" ").appendField(new(_().FieldDropdown)([["set volume","volume"],["set frequency","freq"],["set waveform","wave"],["stop","stop"]],(function(e){this.getSourceBlock().setSoundAction(e)})),"ACTION"),this.waveInput=!1):(this.appendValueInput("VALUE").setCheck(null).appendRange("R,0,40000000,440").appendField(" ").appendField(new(_().FieldDropdown)([["set frequency","freq"],["set volume","volume"],["set waveform","wave"],["stop","stop"]],(function(e){this.getSourceBlock().setSoundAction(e)})),"ACTION"),this.waveInput=!1),t&&t.outputConnection.connect(this.getInput("VALUE").connection)}},setToOther:function(e){"other"===e&&(this.otherChannel=!0,this.getInput("SET_CHANNEL")&&this.removeInput("SET_CHANNEL"),this.appendValueInput("CHANNEL").appendField("sound channel").setCheck("Number").appendRange("R,0,3,0"),this.moveInputBefore("CHANNEL","VALUE"))},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("otherchannel",this.otherChannel),e.setAttribute("action",this.getFieldValue("ACTION")),e},domToMutation:function(e){const t=e.getAttribute("otherchannel"),n=e.getAttribute("action");"true"===t&&this.setToOther("other","VALUE"),this.setSoundAction(n)},onchange:function(e){const t=G();if("heb"!==t.boardType.name&&"heb-wx"!==t.boardType.name&&(e.type==_().Events.BLOCK_CREATE||e.type==_().Events.BLOCK_DELETE)){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("sound initialize")?this.setWarningText("WARNING: You must use a sound initialize\nblock at the beginning of your program!"):this.setWarningText(null)}}},_().propc.sound_play=function(){let e,t,n=this.getFieldValue("ACTION");e=this.otherChannel?_().propc.valueToCode(this,"CHANNEL",_().propc.ORDER_ATOMIC):this.getFieldValue("CHANNEL"),t=this.waveInput?this.getFieldValue("WAVE"):_().propc.valueToCode(this,"VALUE",_().propc.ORDER_ATOMIC)||"0","stop"===n&&(n="freq",t="0");let i="sound_"+n+"(audio0, "+e+", "+t+");";const o=_().getMainWorkspace().getAllBlocks().toString(),s=x(),l=G();return-1!==o.indexOf("sound initialize")||"heb"===l.boardType.name&&"heb-wx"!==l.boardType.name||(i="// WARNING: You must use a sound initialize block at the beginning of your program!\n"),this.disabled||("heb"!==l.boardType.name&&"heb-wx"!==l.boardType.name||(_().propc.setups_.sound_start="audio0 = sound_run("+s.earphone_jack_inverted+");"),_().propc.definitions_.include_soundplayer='#include "sound.h"',_().propc.definitions_.sound_define_0="sound* audio0;"),i},_().Blocks.wav_play={helpUrl:_().MSG_AUDIO_HELPURL,init:function(){this.setTooltip(_().MSG_WAV_PLAY_TOOLTIP),this.setColour(X.getColor("io")),this.appendDummyInput().appendField("WAV play file").appendField(new(_().FieldTextInput)("filename",(function(e){return(e=e.replace(/[^A-Z0-9a-z_]/g,"").toLowerCase()).length>8&&(e=e.substring(0,7)),e})),"FILENAME"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:function(e){if(e.type==_().Events.BLOCK_CREATE||e.type==_().Events.BLOCK_DELETE){let e=null;const t=_().getMainWorkspace().getAllBlocks().toString();-1===t.indexOf("repeat")&&-1===t.indexOf("pause")&&(e="This block MUST be used with other types of blocks, see Help."),this.setWarningText(e)}}},_().propc.wav_play=function(){const e=G(),t=this.getFieldValue("FILENAME");if(!this.disabled){const t=x();_().propc.definitions_["include wavplayer"]='#include "wavplayer.h"';let n=!1,i=!1;const o=_().getMainWorkspace().getAllBlocks();for(let e=0;e<o.length;e++)"sd_init"===o[e].type&&(n=!0),"wav_set_pins"===o[e].type&&(i=!0);n||(_().propc.setups_.sd_card="sd_mount("+t.sd_card+");"),"heb-wx"!==e.boardType.name||i||(_().propc.setups_.wavplayer_pin="wav_set_pins("+t.earphone_jack+");")}return'wav_play("'+t+'.wav");\n'},_().Blocks.wav_status={helpUrl:_().MSG_AUDIO_HELPURL,init:function(){this.setTooltip(_().MSG_WAV_STATUS_TOOLTIP),this.setColour(X.getColor("io")),this.appendDummyInput().appendField("WAV status"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number")}},_().propc.wav_status=function(){this.disabled||(_().propc.definitions_["include wavplayer"]='#include "wavplayer.h"');return["wav_playing()",_().propc.ORDER_NONE]},_().Blocks.wav_volume={helpUrl:_().MSG_AUDIO_HELPURL,init:function(){this.setTooltip(_().MSG_WAV_VOLUME_TOOLTIP),this.setColour(X.getColor("io")),this.appendValueInput("VOLUME").appendField("WAV volume").appendRange("R,0,10,0"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.wav_volume=function(){const e=_().propc.valueToCode(this,"VOLUME",_().propc.ORDER_NONE)||"0";return this.disabled||(_().propc.definitions_["include wavplayer"]='#include "wavplayer.h"'),"wav_volume("+e+");\n"},_().Blocks.wav_set_pins={helpUrl:_().MSG_AUDIO_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_WAV_SET_PINS_TOOLTIP),this.setColour(X.getColor("io")),this.appendDummyInput("LEFTPIN").appendField("WAV set output left PIN").appendField(new(_().FieldDropdown)(e.digital.concat([["None","-1"]])),"PINL").appendField("right PIN").appendField(new(_().FieldDropdown)(e.digital.concat([["None","-1"]])),"PINR"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.wav_set_pins=function(){const e=this.getFieldValue("PINL");let t=this.getFieldValue("PINR");return t===e&&(t="-1"),this.disabled||(_().propc.setups_.wavplayer_pin="wav_set_pins("+e+", "+t+");"),""},_().Blocks.wav_stop={helpUrl:_().MSG_AUDIO_HELPURL,init:function(){this.setTooltip(_().MSG_WAV_STOP_TOOLTIP),this.setColour(X.getColor("io")),this.appendDummyInput().appendField("WAV stop"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.wav_stop=function(){return this.disabled||(_().propc.definitions_["include wavplayer"]='#include "wavplayer.h"'),"wav_stop();\n"},_().Blocks.ab_drive_init={helpUrl:_().MSG_ROBOT_HELPURL,init:function(){const e=G();let t=[["ActivityBot 360°","abdrive360.h"],["ActivityBot","abdrive.h"],["Arlo","arlodrive.h"],["Servo Differential Drive","servodiffdrive.h"]];"activity-board"!==e.boardType.name&&(t=[["Servo Differential Drive","servodiffdrive.h"]]),this.setTooltip(_().MSG_ROBOT_DRIVE_INIT_TOOLTIP),this.setColour(X.getColor("robot")),this.appendDummyInput().appendField("Robot").appendField(new(_().FieldDropdown)(t,(function(e){this.getSourceBlock().updateShape_({BOT:e})})),"BOT").appendField("initialize"),this.appendDummyInput("PINS"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),"activity-board"!==e.boardType.name&&this.updateShape_({BOT:"servodiffdrive.h",LEFT:"12",RIGHT:"13"})},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("bot",this.getFieldValue("BOT")),e.setAttribute("lpin",this.getFieldValue("LEFT")||""),e.setAttribute("rpin",this.getFieldValue("RIGHT")||""),e},domToMutation:function(e){this.updateShape_({BOT:e.getAttribute("bot"),LEFT:e.getAttribute("lpin")||"0",RIGHT:e.getAttribute("rpin")||"0"})},updateShape_:function(e){const t=x();let n=e.BOT;void 0===e.BOT&&(n=this.getFieldValue("BOT")),this.getInput("PINS")&&this.removeInput("PINS"),this.appendDummyInput("PINS");const i=this.getInput("PINS");"servodiffdrive.h"===n&&(i.appendField(" left PIN").appendField(new(_().FieldDropdown)(t.digital),"LEFT").appendField("right PIN").appendField(new(_().FieldDropdown)(t.digital),"RIGHT"),e.LEFT&&this.setFieldValue(e.LEFT,"LEFT"),e.RIGHT&&this.setFieldValue(e.RIGHT,"RIGHT"));const o=_().getMainWorkspace().getAllBlocks();for(let e=0;e<o.length;e++){const t=o[e].newRobot;t&&t.call(o[e],n)}}},_().propc.ab_drive_init=function(){const e=this.getFieldValue("BOT");if(!this.disabled&&(_().propc.definitions_["include abdrive"]='#include "'+e+'"',"servodiffdrive.h"===e)){const e=Number(this.getFieldValue("LEFT")),t=Number(this.getFieldValue("RIGHT"));_().propc.setups_.servodiffdrive="drive_pins("+e+","+t+");"}return""},_().Blocks.ab_drive_ramping={helpUrl:_().MSG_ROBOT_HELPURL,init:function(){const e=G();this.setTooltip(_().MSG_ROBOT_RAMPING_TOOLTIP),this.setColour(X.getColor("robot")),this.appendDummyInput("ACCEL").appendField("Robot set acceleration for").appendField(new(_().FieldDropdown)([["speed blocks to","FOR_SPEED"],["distance blocks to","FOR_GOTO"]]),"OPS").appendField(new(_().FieldDropdown)([["2000 ticks/s²","2000"],["1600 ticks/s² (jerky)","1600"],["1200 ticks/s²","1200"],["800 ticks/s² (peppy)","800"],["600 ticks/s²","600"],["400 ticks/s² (smooth)","400"],["200 ticks/s²","200"],["100 ticks/s² (sluggish)","100"]]),"RAMPING"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.isBot="","activity-board"!==e.boardType.name&&this.newRobot("servodiffdrive.h")},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("bot",this.isBot),e.setAttribute("ramp",this.getFieldValue("RAMPING")||"600"),e.setAttribute("type",this.getFieldValue("OPS")||"FOR_SPEED"),e},domToMutation:function(e){const t=e.getAttribute("bot"),n=e.getAttribute("type")||this.getFieldValue("OPS"),i=e.getAttribute("ramp")||this.getFieldValue("RAMPING");t?this.newRobot(t,n,i):this.whichBot()},whichBot:function(){let e="";const t=_().getMainWorkspace().getAllBlocks().toString();if(t.indexOf("Robot ActivityBot initialize")>-1?e="abdrive.h":t.indexOf("Robot ActivityBot 360° initialize")>-1?e="abdrive360.h":t.indexOf("Robot Arlo initialize")>-1?e="arlodrive.h":t.indexOf("Robot Servo Differential Drive initialize")>-1&&(e="servodiffdrive.h"),"ab_drive_ramping"===this.type){const t=this.getFieldValue("RAMPING")||("abdrive.h"===e?"600":"300"),n=this.getFieldValue("OPS")||"FOR_SPEED";this.isBot=e,this.newRobot(e,n,t)}else this.newRobot(e)},newRobot:function(e,t,n){this.setWarningText(null);let i=[];i="abdrive360.h"===e?[["Not limited","1200"],["600 ticks/s² (peppy)","600"],["500 ticks/s²","450"],["400 ticks/s²","300"],["300 ticks/s²","225"],["200 ticks/s²","150"],["100 ticks/s²","75"],["50 ticks/s² (sluggish)","50"]]:[["not limited","2400"],["1200 ticks/s²","1200"],["800 ticks/s² (peppy)","800"],["600 ticks/s²","600"],["400 ticks/s² (smooth)","400"],["200 ticks/s²","200"],["100 ticks/s² (sluggish)","100"]],this.getInput("ACCEL")&&this.removeInput("ACCEL"),"abdrive.h"===e||"arlodrive.h"===e||"abdrive360.h"===e?(this.appendDummyInput("ACCEL").appendField("Robot set acceleration for").appendField(new(_().FieldDropdown)([["speed blocks to","FOR_SPEED"],["distance blocks to","FOR_GOTO"]]),"OPS").appendField(new(_().FieldDropdown)(i),"RAMPING"),this.setFieldValue(t||"FOR_SPEED","OPS"),this.setFieldValue(n||("abdrive360.h"===e?"300":"600"),"RAMPING"),"arlodrive.h"===e&&this.setWarningText("WARNING: This block does not currently work for the Arlo robot.")):""===e?(this.setWarningText("WARNING: You must use a Robot initialize\nblock at the beginning of your program!"),this.appendDummyInput("ACCEL").appendField("Robot set acceleration")):(this.appendDummyInput("ACCEL").appendField("Robot set acceleration to").appendField(new(_().FieldDropdown)(i),"RAMPING"),this.setFieldValue(n||"600","RAMPING"))}},_().propc.ab_drive_ramping=function(){const e=Number(this.getFieldValue("RAMPING")),t=this.getFieldValue("OPS"),n=_().getMainWorkspace().getAllBlocks().toString();return n.indexOf("Robot ActivityBot initialize")>-1||n.indexOf("Robot Arlo initialize")>-1||n.indexOf("Robot ActivityBot 360° initialize")>-1?"drive_setAcceleration("+t+", "+e.toString(10)+");\n":n.indexOf("Robot Servo Differential Drive initialize")>-1?"drive_setramp("+(e/50).toString(10)+","+(e/50).toString(10)+");\n":"// Robot drive system is not initialized!\n"},_().Blocks.ab_drive_get_ticks={helpUrl:_().MSG_ROBOT_HELPURL,init:function(){this.setTooltip(_().MSG_ROBOT_GET_TICKS_TOOLTIP),this.setColour(X.getColor("robot")),this.appendDummyInput("ACCEL").appendField("Robot encoders store left count in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"LEFT").appendField("right count in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"RIGHT"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.whichBot()},whichBot:_().Blocks.ab_drive_ramping.whichBot,newRobot:function(e){"abdrive.h"===e||"abdrive360.h"===e||"arlodrive.h"===e?this.setWarningText(null):""===e?this.setWarningText("WARNING: You must use a Robot initialize\nblock at the beginning of your program!"):this.setWarningText("WARNING: This block is not compatible with Servo Differential Drive")}},_().propc.ab_drive_get_ticks=function(){const e=_().propc.variableDB_.getName(this.getFieldValue("LEFT"),_().VARIABLE_CATEGORY_NAME),t=_().propc.variableDB_.getName(this.getFieldValue("RIGHT"),_().VARIABLE_CATEGORY_NAME),n=_().getMainWorkspace().getAllBlocks().toString();return n.indexOf("Robot ActivityBot initialize")>-1||n.indexOf("Robot ActivityBot 360° initialize")>-1||n.indexOf("Robot Arlo initialize")>-1?"drive_getTicks(&"+e+", &"+t+");\n":"// Robot drive system is not initialized or non-ActivityBot Robot selected!\n"},_().Blocks.ab_drive_goto={helpUrl:_().MSG_ROBOT_HELPURL,init:function(){this.setTooltip(_().MSG_ROBOT_DRIVE_DISTANCE_TOOLTIP),this.setColour(X.getColor("robot")),this.appendDummyInput().appendField("Robot drive distance in").appendField(new(_().FieldDropdown)([["ticks","TICK"],["centimeters","CM"],["inches","INCH"]]),"UNITS"),this.appendValueInput("LEFT").appendRange("R,-4227330,4227330,0").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("left"),this.appendValueInput("RIGHT").appendRange("R,-4227330,4227330,0").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("right"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.whichBot()},whichBot:_().Blocks.ab_drive_ramping.whichBot,newRobot:function(e){"servodiffdrive.h"===e?this.setWarningText('WARNING: Servo Differential Drive\ndoes not support "Robot drive distance"!'):""===e?this.setWarningText("WARNING: You must use a Robot initialize\nblock at the beginning of your program!"):this.setWarningText(null)}},_().propc.ab_drive_goto=function(){const e=_().propc.valueToCode(this,"LEFT",_().propc.ORDER_NONE)||"0",t=_().propc.valueToCode(this,"RIGHT",_().propc.ORDER_NONE)||"0",n=this.getFieldValue("UNITS");let i="";const o=_().getMainWorkspace().getAllBlocks().toString();return o.indexOf("Robot ActivityBot initialize")>-1||o.indexOf("Robot ActivityBot 360° initialize")>-1?i+="TICK"===n?"drive_goto("+e+", "+t+");\n":"CM"===n?"drive_goto(("+e+" * 40)/13, ("+t+" * 40)/13);\n":"drive_goto(("+e+" * 508)/65, ("+t+" * 508)/65);\n":o.indexOf("Robot Arlo initialize")>-1?i+="TICK"===n?"drive_goto("+e+", "+t+");\n":"CM"===n?"drive_goto(("+e+" * 253)/90, ("+t+" * 253)/90);\n":"drive_goto(("+e+" * 50)/7, ("+t+" * 50)/7);\n":o.indexOf("Robot Servo Differential Drive initialize")>-1?i+='// Servo Differential Drive does not support "Drive Distance"\n':i+="// Robot drive system is not initialized!\n",i},_().Blocks.ab_drive_goto_max_speed={helpUrl:_().MSG_ROBOT_HELPURL,init:function(){this.setTooltip(_().MSG_ROBOT_DISTANCE_MAX_SPEED_TOOLTIP),this.setColour(X.getColor("robot")),this.appendValueInput("SPEED").appendField("Robot set max speed (+/-) for","TITLE").appendField(new(_().FieldDropdown)([["speed blocks","FOR_SPEED"],["distance blocks","FOR_GOTO"]],(function(e){this.getSourceBlock().applyTo(e)})),"OPS").appendRange("R,0,128,0").setCheck("Number"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.whichBot()},whichBot:_().Blocks.ab_drive_ramping.whichBot,newRobot:function(e){"servodiffdrive.h"===e?this.setWarningText("WARNING: Servo Differential Drive\ndoes not support this block"):"arlodrive.h"===e?this.setWarningText("WARNING: This block does not currently work for the Arlo robot."):""===e?this.setWarningText("WARNING: You must use a Robot initialize\nblock at the beginning of your program!"):this.setWarningText(null)},applyTo:function(e){"FOR_SPEED"===e?this.setFieldValue("Robot set max speed (+/-) for","TITLE"):"FOR_GOTO"===e&&this.setFieldValue("Robot set speed (+/-) for","TITLE")}},_().propc.ab_drive_goto_max_speed=function(){const e=_().propc.valueToCode(this,"SPEED",_().propc.ORDER_NONE)||"128",t=this.getFieldValue("OPS"),n=_().getMainWorkspace().getAllBlocks().toString();return n.indexOf("Robot ActivityBot initialize")>-1||n.indexOf("Robot ActivityBot 360° initialize")>-1?"drive_setMaxVelocity("+t+", "+e+");\n":n.indexOf("Robot Arlo initialize")>-1?"// Set max speed is not supported for this robot\n":n.indexOf("Robot Servo Differential Drive initialize")>-1?"// Servo Differential Drive does not support this block\n":"// Robot drive system is not initialized!\n"},_().Blocks.ab_drive_speed={helpUrl:_().MSG_ROBOT_HELPURL,init:function(){this.setTooltip(_().MSG_ROBOT_DRIVE_SPEED_TOOLTIP),this.setColour(X.getColor("robot")),this.appendDummyInput().appendField("Robot drive speed","TITLE"),this.appendValueInput("LEFT").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendRange("R,-128,128,0").appendField("left"),this.appendValueInput("RIGHT").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendRange("R,-128,128,0").appendField("right"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.whichBot()},whichBot:_().Blocks.ab_drive_ramping.whichBot,newRobot:function(e){const t=this.getInput("RIGHT").connection,n=this.getInput("LEFT").connection.targetBlock(),i=t.targetBlock();let o=null,s="R,-128,128,0";n&&n.outputConnection.disconnect(),i&&i.outputConnection.disconnect(),this.getInput("LEFT")&&this.removeInput("LEFT"),this.getInput("RIGHT")&&this.removeInput("RIGHT"),"servodiffdrive.h"===e||"arlodrive.h"===e?s="R,-500,500,0":""===e&&(o="WARNING: You must use a Robot initialize\nblock at the beginning of your program!",s="N,0,0,0"),this.appendValueInput("LEFT").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendRange(s).appendField("left"),this.appendValueInput("RIGHT").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendRange(s).appendField("right"),this.setWarningText(o),n&&n.outputConnection.connect(this.getInput("LEFT").connection),i&&i.outputConnection.connect(this.getInput("RIGHT").connection),n&&n.onchange&&n.onchange.call(n),i&&i.onchange&&i.onchange.call(i)}},_().propc.ab_drive_speed=function(){const e=_().propc.valueToCode(this,"LEFT",_().propc.ORDER_NONE)||"0",t=_().propc.valueToCode(this,"RIGHT",_().propc.ORDER_NONE)||"0",n=_().getMainWorkspace().getAllBlocks().toString();return n.indexOf("Robot ActivityBot initialize")>-1||n.indexOf("Robot Arlo initialize")>-1||n.indexOf("Robot ActivityBot 360° initialize")>-1?"drive_speed("+e+", "+t+");\n":n.indexOf("Robot Servo Differential Drive initialize")>-1?"drive_speeds("+e+", "+t+");\n":"// Robot drive system is not initialized!\n"},_().Blocks.ab_drive_stop={helpUrl:_().MSG_ROBOT_HELPURL,init:function(){this.setTooltip(_().MSG_ROBOT_DRIVE_STOP_TOOLTIP),this.setColour(X.getColor("robot")),this.appendDummyInput().appendField("Robot drive stop"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.ab_drive_stop=function(){const e=_().getMainWorkspace().getAllBlocks().toString();return e.indexOf("Robot ActivityBot initialize")>-1||e.indexOf("Robot Arlo initialize")>-1||e.indexOf("Robot ActivityBot 360° initialize")>-1?"drive_speed(0, 0);\n":e.indexOf("Robot Servo Differential Drive initialize")>-1?"drive_speeds(0, 0);\n":"// Robot drive system is not initialized!\n"},_().Blocks.activitybot_calibrate={helpUrl:_().MSG_ROBOT_HELPURL,init:function(){this.setTooltip(_().MSG_ROBOT_ACTIVITYBOT_CALIBRATE_TOOLTIP),this.setColour(X.getColor("robot")),this.appendDummyInput().appendField(new(_().FieldDropdown)([["ActivityBot 360°","abcalibrate360.h"],["ActivityBot","abcalibrate.h"],["ActivityBot 360° (Parallaxy)","Parallaxy"]]),"BOT").appendField("calibrate")},onchange:function(){const e=_().getMainWorkspace().getAllBlocks();let t=null;for(let n=0;n<e.length;n++)e[n]===this||e[n].disabled||(t="WARNING! Do NOT use any other blocks with this block!");this.setWarningText(t)}},_().propc.activitybot_calibrate=function(){let e=this.getFieldValue("BOT")||"abcalibrate360.h";let t="high(26);\nhigh(27);\ncal_activityBot();\nlow(26);\nlow(27);\n";return"Parallaxy"===e&&(t="cal_supply5V(1);\n"+t,e="abcalibrate360.h"),_().propc.definitions_.activitybot_calibrate='#include "'+e+'"',_().propc.setups_.activitybot_calibrate="cal_servoPins(12, 13);\n\tcal_encoderPins(14, 15);",t},_().Blocks.activitybot_display_calibration={helpUrl:_().MSG_ROBOT_HELPURL,init:function(){this.setTooltip(_().MSG_ROBOT_ACTIVITYBOT_DISPLAY_CALIBRATION_TOOLTIP),this.setColour(X.getColor("robot")),this.appendDummyInput().appendField(new(_().FieldDropdown)([["ActivityBot 360°",'"abcalibrate360.h"'],["ActivityBot",'"abcalibrate.h"'],["ActivityBot 360° (Parallaxy)",'"abcalibrate360.h" // Parallaxy']]),"BOT").appendField("display calibration").appendField(new(_().FieldDropdown)([["results","result"],["data","table"]]),"TYPE")},onchange:_().Blocks.activitybot_calibrate.onchange},_().propc.activitybot_display_calibration=function(){const e=this.getFieldValue("BOT")||"abdrive.h";return _().propc.definitions_.activitybot_calibrate="#include "+e,"abdrive.h"===e?"table"===this.getFieldValue("TYPE")?"drive_displayInterpolation();\n":"drive_calibrationResults();\n":"table"===this.getFieldValue("TYPE")?"cal_displayData();\n":"cal_displayResults();\n"},_().Blocks.activitybot_parallaxy_load={helpUrl:_().MSG_ROBOT_HELPURL,init:function(){this.setTooltip(_().MSG_ROBOT_PARALLAXY_LOAD_TOOLTIP),this.setColour(X.getColor("robot")),this.appendDummyInput().appendField(new(_().FieldDropdown)([["ActivityBot 360° (Parallaxy)","Parallaxy"]]),"BOT").appendField("load firmware")},onchange:_().Blocks.activitybot_calibrate.onchange},_().propc.activitybot_parallaxy_load=function(){return this.disabled||(_().propc.definitions_.pure_code="/* PURE CODE ONLY */\n",_().propc.methods_.pure_code='/*\nFile: ActivityBot 360 Robot Control for Parallaxy.side\n\nAuthors: Based on https://letsrobot.tv driver for Telly robot obtained from\nhttps://github.com/runmyrobot/ParallaxBot/tree/rl-feedback360/parallaxScripts\nModified by Parallax Inc for use with Parallaxy robot and updated ActivityBot\nand Servo360 libraries.\n\nVersion 1.0\n\nCopyright (C) Parallax Inc. 2018. All Rights MIT Licensed.  See end of file.\n*/\n\n#include "simpletools.h"\n#include "fdserial.h"\n#include "abdrive360.h"\n#include "ws2812.h"\n\n#define LED_PIN 8\n#define LED_COUNT 18\n\nvoid motor_controller();\nvoid neopixel_controller();\nvoid set_motor_controller(int leftSpeed, int rightSpeed);\n\nvoid eyes_blink();\nvoid refresh_eyes();\nvoid change_brightness(int change_amount);\n\nint ledColors[LED_COUNT];\nint dim_array[LED_COUNT];\n\nws2812 *driver;\n\nint brightness = 10;\nint eye_color = 0xFFFFFF;\n\n// enables full-duplex serilization of the terminal\n// (In otherwise, 2 way signals between this computer and the robot)\nfdserial *term;\n\nvolatile int current_leftspd = 0;\nvolatile int current_rightspd = 0;\nvolatile int motor_flag = 0;\n\nint defaultStraightSpeed = 60;\nint defaultTurnSpeed = 15;\n\nint main() {\ndrive_setAcceleration(FOR_SPEED, 150);\nservo360_couple(12, 13);\nservo360_setCoupleScale(12, 13, 2000);\n\nservo360_setControlSys(12, S360_SETTING_KPV, 2000); // KPV\nservo360_setControlSys(13, S360_SETTING_KPV, 2000); // KPV\n\n//close the SimpleIDE terminal\nsimpleterm_close();\n\n//set full-duplex serialization for the terminal\nterm = fdserial_open(31, 30, 0, 9600);\n\ncog_run(motor_controller, 128);\n\n// load the LED driver\ndriver = ws2812b_open();\n\npause(500);\neyes_blink();\n\nint inputStringLength = 20;\nchar inputString[inputStringLength];\n\nint sPos = 0;\n\nwhile (1) {\nif (fdserial_rxReady(term) != 0) {\n\n// Get the character entered from the terminal\nchar c = fdserial_rxChar(term);\n\nif (c != -1) {\ndprint(term, "%d", (int) c);\nif (c == 13 || c == 10) {\ndprint(term, "received line:");\ndprint(term, inputString);\ndprint(term, "\\n");\nif (strcmp(inputString, "l") == 0) {\ndprint(term, "left");\nset_motor_controller(-defaultTurnSpeed, defaultTurnSpeed);\n}\nif (strcmp(inputString, "r") == 0) {\ndprint(term, "right");\nset_motor_controller(defaultTurnSpeed, -defaultTurnSpeed);\n}\nif (strcmp(inputString, "f") == 0) {\ndprint(term, "forward");\nset_motor_controller(defaultStraightSpeed, defaultStraightSpeed);\n}\nif (strcmp(inputString, "b") == 0) {\ndprint(term, "back");\nset_motor_controller(-defaultStraightSpeed, -defaultStraightSpeed);\n}\nif (strcmp(inputString, "l_up") == 0) {\ndprint(term, "left_stop");\ndrive_speed(0, 0);\n}\nif (strcmp(inputString, "r_up") == 0) {\ndprint(term, "right_stop");\ndrive_speed(0, 0);\n}\nif (strcmp(inputString, "f_up") == 0) {\ndprint(term, "forward_stop");\ndrive_speed(0, 0);\n}\nif (strcmp(inputString, "b_up") == 0) {\ndprint(term, "back_stop");\ndrive_speed(0, 0);\n}\nif (strcmp(inputString, "brightness_up") == 0) {\nchange_brightness(10);\ndprint(term, "brightness increased");\n}\nif (strcmp(inputString, "brightness_down") == 0) {\nchange_brightness(-10);\ndprint(term, "brightness decreased");\n}\nif (strncmp(inputString, "led", 3) == 0) {\nint pixel;\nint color;\nsscanAfterStr(inputString, "led", "%d%x", &pixel, &color);\ndprint(term, "%d\\n", color);\nif (pixel < LED_COUNT) {\nledColors[pixel] = color;\nrefresh_eyes();\n}\n}\nif (strncmp(inputString, "leds", 4) == 0) {\nint color;\nsscanAfterStr(inputString, "leds", "%x", &color);\ndprint(term, "%d\\n", color);\nfor (int i = 0; i < LED_COUNT; ++i) {\nledColors[i] = color;\n}\nrefresh_eyes();\n}\nsPos = 0;\ninputString[0] = 0; // clear string\n}\nelse if (sPos < inputStringLength - 1) {\n// record next character\ninputString[sPos] = c;\nsPos += 1;\ninputString[sPos] = 0; // make sure last element of string is 0\ndprint(term, inputString);\ndprint(term, " ok \\n");\n}\n}\n}\n}\n}\n\nvoid set_motor_controller(int leftSpeed, int rightSpeed) {\ncurrent_leftspd = leftSpeed;\ncurrent_rightspd = rightSpeed;\nmotor_flag = 1;\n}\n\nvoid motor_controller() {\nwhile (1) {\nif (motor_flag == 1) {\ndrive_speed(current_leftspd, current_rightspd);\nmotor_flag = 0;\npause(500);\n} else {\ndrive_speed(0, 0);\n}\npause(10);\n}\n}\n\nvoid refresh_eyes() {\nfor (int j = 0; j < LED_COUNT; ++j) {\nint red = (ledColors[j] >> 16) & 0xFF;\nred = red * brightness / 255;\n\nint green = (ledColors[j] >> 8) & 0xFF;\ngreen = green * brightness / 255;\n\nint blue = (ledColors[j]) & 0xFF;\nblue = blue * brightness / 255;\n\ndim_array[j] = (red << 16) + (green << 8) + (blue);\n}\nws2812_set(driver, LED_PIN, dim_array, LED_COUNT);\n}\n\nvoid change_brightness(int change_amount) {\nbrightness = constrainInt(brightness + change_amount, 2, 255);\nrefresh_eyes();\n}\n\nvoid eyes_blink() {\nint doot = 0;\n\nwhile (doot < LED_COUNT) {\nif (doot == 4 || doot == 13)\nledColors[doot] = 0x000000;\nelse\nledColors[doot] = eye_color;\ndoot++;\n}\nrefresh_eyes();\n\ndoot = 0;\npause(400);\n\nwhile (doot < LED_COUNT) {\nif ((doot >= 3 && doot <= 5) || (doot >= 12 && doot <= 14))\nledColors[doot] = eye_color;\nelse\nledColors[doot] = 0x000000;\ndoot++;\n}\nrefresh_eyes();\n\ndoot = 0;\npause(400);\n\nwhile (doot < LED_COUNT) {\nif (doot == 4 || doot == 13)\nledColors[doot] = 0x000000;\nelse\nledColors[doot] = eye_color;\ndoot++;\n}\nrefresh_eyes();\n}\n\n/**\nTERMS OF USE: MIT License\n\nPermission is hereby granted, free of charge, to any person obtaining a\ncopy of this software and associated documentation files (the "Software"),\nto deal in the Software without restriction, including without limitation\nthe rights to use, copy, modify, merge, publish, distribute, sublicense,\nand/or sell copies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\nTHE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\nDEALINGS IN THE SOFTWARE.\n*/'),""},_().Blocks.mcp320x_read={helpUrl:_().MSG_ANALOG_PULSES_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_MCP320X_READ_TOOLTIP),this.setColour(X.getColor("io")),this.appendDummyInput("SELECTS").appendField("A/D chip read ").appendField(new(_().FieldDropdown)([["MCP3002","02"],["MCP3004","04"],["MCP3008","08"],["MCP3202","22"],["MCP3204","24"],["MCP3208","28"],["ADC0831","81"]],(function(e){this.getSourceBlock().updateShape_({CH_C:e})})),"CHIP").appendField("in volt-100ths"),this.appendDummyInput("CHANNELS").appendField("CLK").appendField(new(_().FieldDropdown)(e.digital),"CLK_PIN").appendField("DO").appendField(new(_().FieldDropdown)(e.digital),"DO_PIN").appendField("DI").appendField(new(_().FieldDropdown)(e.digital),"DI_PIN").appendField("CS").appendField(new(_().FieldDropdown)(e.digital),"CS_PIN").appendField("channel").appendField(new(_().FieldDropdown)([["0","0"],["1","1"]]),"CHAN").setAlign(_().ALIGN_RIGHT),this.setInputsInline(!1),this.setOutput(!0,null)},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("chip",this.getFieldValue("CHIP")),e.setAttribute("cs_pin",this.getFieldValue("CS_PIN")),e.setAttribute("ck_pin",this.getFieldValue("CLK_PIN")),e.setAttribute("do_pin",this.getFieldValue("DO_PIN")),e.setAttribute("di_pin",this.getFieldValue("DI_PIN")),e},domToMutation:function(e){this.updateShape_({CH_C:e.getAttribute("chip"),CK:e.getAttribute("ck_pin"),CS:e.getAttribute("cs_pin"),DO:e.getAttribute("do_pin"),DI:e.getAttribute("di_pin")})},updateShape_:function(e){const t=x(),n=e.CH_C||this.getFieldValue("CH_C"),i=e.CK||this.getFieldValue("CLK_PIN"),o=e.CS||this.getFieldValue("CS_PIN"),s=e.DO||this.getFieldValue("DO_PIN"),l=e.DI||this.getFieldValue("DI_PIN")||t.digital[0][1],r=[];for(let e=0;e<parseInt(n[1]);e++)r.push([e.toString(),e.toString()]);this.getInput("CHANNELS")&&this.removeInput("CHANNELS"),this.appendDummyInput("CHANNELS").setAlign(_().ALIGN_RIGHT).appendField("CLK").appendField(new(_().FieldDropdown)(t.digital),"CLK_PIN").appendField("DO").appendField(new(_().FieldDropdown)(t.digital),"DO_PIN"),"1"===n[1]?this.getInput("CHANNELS").appendField("CS").appendField(new(_().FieldDropdown)(t.digital),"CS_PIN"):(this.getInput("CHANNELS").appendField("DI").appendField(new(_().FieldDropdown)(t.digital),"DI_PIN").appendField("CS").appendField(new(_().FieldDropdown)(t.digital),"CS_PIN").appendField("channel").appendField(new(_().FieldDropdown)(r),"CHAN"),this.setFieldValue(l,"DI_PIN")),this.setFieldValue(i,"CLK_PIN"),this.setFieldValue(o,"CS_PIN"),this.setFieldValue(s,"DO_PIN")}},_().propc.mcp320x_read=function(){const e=parseInt(this.getFieldValue("CHIP")[1]),t="1"+this.getFieldValue("CHIP")[0],n=this.getFieldValue("CS_PIN"),i=this.getFieldValue("CLK_PIN"),o=this.getFieldValue("DO_PIN"),s=this.getFieldValue("DI_PIN");let l="000"+parseInt(this.getFieldValue("CHAN")).toString(2),r="";if(l=e<4?"11"+l.substr(l.length-1,l.length)+"1":"11"+l.substr(l.length-3,l.length)+"0",!this.disabled){_().propc.global_vars_.adc_set_vref="int __Mvref = 330;";let a="";"18"===t&1===e?(a+="int read_adc0831(int __McsPin, int __MclkPin, int __MdoPin, int __MVr)",a+="{low(__MclkPin);\nlow(__McsPin);\npulse_out(__MclkPin, 250);\n",a+="int __Mvolts = shift_in(__MdoPin, __MclkPin, MSBPOST, 8);\nhigh(__McsPin);\n",a+="return ((__Mvolts * __MVr) / 256);}",_().propc.methods_.adc0831_read=a,_().propc.method_declarations_.adc0831_read="int read_adc0831(int __McsPin, int __MclkPin, int __MdoPin, int __MVr);\n",r+="read_adc0831("+n+", "+i+", "+o+", __Mvref)"):(a+="int read_mcp320x(int __McsPin, int __MclkPin, int __MdoPin, int __MdiPin, int __Mbits, int __Mdata, int __MVr, int __Mres) {\n",a+="  high(__McsPin);  low(__MclkPin);  low(__McsPin);\n",a+="  shift_out(__MdiPin, __MclkPin, MSBFIRST, __Mbits, __Mdata);\n",a+="  int __Mvolts = shift_in(__MdoPin, __MclkPin, MSBPOST, __Mres);\n",a+="  high(__McsPin);  high(__MclkPin);\n  return ((__Mvolts * __MVr) / pow(2,__Mres));}",_().propc.methods_.mcp320x_read=a,_().propc.method_declarations_.mcp320x_read="int read_mcp320x(int __McsPin, int __MclkPin, int __MdoPin, int __MdiPin, int __Mbits, int __Mdata, int __MVr, int __Mres);\n",r+="read_mcp320x("+n+", "+i+", "+o,r+=", "+s+", "+l.length+", 0b"+l+", __Mvref, "+t+")")}return[r,_().propc.ORDER_ATOMIC]},_().Blocks.mcp320x_set_vref={helpUrl:_().MSG_ANALOG_PULSES_HELPURL,init:function(){this.setTooltip(_().MSG_MCP320X_SET_VREF_TOOLTIP),this.setColour(X.getColor("io")),this.appendDummyInput().appendField("A/D set Vref to").appendField(new(_().FieldNumber)("330",null,null,1),"VREF").appendField("volt 100ths"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.mcp320x_set_vref=function(){if(_().getMainWorkspace().getAllBlocks().toString().indexOf("A/D chip read")>-1){return"__Mvref = "+parseInt(this.getFieldValue("VREF"))+";\n"}return""},_().Blocks.oled_initialize={init:function(){this.resetPinLabel="RES","oled_initialize"===this.type?(this.myType="oledc",this.displayKind="OLED",this.setHelpUrl(_().MSG_OLED_HELPURL)):"epaper_initialize"===this.type&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper",this.resetPinLabel="RST"),this.setTooltip(_().MSG_OLED_INITIALIZE_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.setColour(X.getColor("protocols")),this.appendDummyInput("PINS"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.updateConstMenu()},updateConstMenu:_().Blocks.shift_in.updateConstMenu,setPinMenus:function(e,t){const n=x(),i=["DIN","CLK","CS","DC","RES"],o=[this.getFieldValue("DIN"),this.getFieldValue("CLK"),this.getFieldValue("CS"),this.getFieldValue("DC"),this.getFieldValue("RES")];this.getInput("PINS")&&this.removeInput("PINS");const s=this.userDefinedConstantsList_.map((function(e){return[e,e]}));this.appendDummyInput("PINS").appendField(this.displayKind+" initialize").appendField("DIN").appendField(new(_().FieldDropdown)(n.digital.concat(s)),"DIN").appendField("CLK").appendField(new(_().FieldDropdown)(n.digital.concat(s)),"CLK").appendField("CS").appendField(new(_().FieldDropdown)(n.digital.concat(s)),"CS").appendField("D/C").appendField(new(_().FieldDropdown)(n.digital.concat(s)),"DC").appendField(this.resetPinLabel).appendField(new(_().FieldDropdown)(n.digital.concat(s)),"RES"),"ePaper"===this.myType&&this.getInput("PINS").appendField("BUSY").appendField(new(_().FieldDropdown)(n.digital.concat(s)),"BUSY");for(let n=0;n<5;n++)o[n]&&o[n]===e&&t?this.setFieldValue(t,i[n]):o[n]&&this.setFieldValue(o[n],i[n])}},_().propc.oled_initialize=function(){if(!this.disabled){const e=x(),t=[this.getFieldValue("DIN"),this.getFieldValue("CLK"),this.getFieldValue("CS"),this.getFieldValue("DC"),this.getFieldValue("RES")];let n="ssd1331",i=", 96, 64";"ePaper"===this.myType&&(n="il3820",i=", 128, 296",t.push(this.getFieldValue("BUSY")));for(let n=0;n<t.length;n++)-1===e.digital.toString().indexOf(t[n]+","+t[n])&&(t[n]="MY_"+t[n]);this.disabled||(_().propc.global_vars_[this.myType+"global"]="screen *"+this.myType+";",_().propc.definitions_[this.myType+"tools"]='#include "'+n+'.h"'),_().propc.setups_[this.myType]=this.myType+" = "+n+"_init("+t.join(", ")+i+");\n"}return""},_().Blocks.oled_font_loader={helpUrl:_().MSG_OLED_HELPURL,init:function(){this.setTooltip(_().MSG_OLED_FONT_LOADER_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Display font loader (EEPROM only)")}},_().propc.oled_font_loader=function(){return _().propc.definitions_.oledfonts='#include "oledc_fontLoader.h"',"oledc_fontLoader();"},_().Blocks.oled_clear_screen={init:function(){"oled_clear_screen"===this.type?(this.myType="oledc",this.displayKind="OLED",this.setHelpUrl(_().MSG_OLED_HELPURL)):"epaper_clear_screen"===this.type&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper"),this.setTooltip(_().MSG_OLED_CLEAR_SCREEN_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField(this.displayKind+" command").appendField(new(_().FieldDropdown)([["clear screen","CLS"],["sleep","SLEEP"],["wake","WAKE"],["invert colors","INV"],["normal colors","NORMAL"],["orient pins up","O-UP"],["orient pins down","O-DOWN"],["orient pins left","O-LEFT"],["orient pins right","O-RIGHT"]]),"CMD"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null)},onchange:function(){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf(this.displayKind+" initialize")?this.setWarningText("WARNING: You must use an "+this.displayKind+"\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.oled_clear_screen=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf(this.displayKind+" initialize"))return"// ERROR: "+this.displayKind+" is not initialized!\n";{const e=this.getFieldValue("CMD");let t="";return"CLS"===e?t+="clearDisplay("+this.myType+");\n":"WAKE"===e?t+="sleepWakeDisplay("+this.myType+", 0);\n":"SLEEP"===e?t+="sleepWakeDisplay("+this.myType+", 1);\n":"INV"===e?t+="invertDisplay("+this.myType+", 1);\n":"NORMAL"===e?t+="invertDisplay("+this.myType+", 0);\n":"O-UP"===e?t+="setDisplayRotation("+this.myType+", 0);\n":"O-DOWN"===e?t+="setDisplayRotation("+this.myType+", 2);\n":"O-LEFT"===e?t+="setDisplayRotation("+this.myType+", 1);\n":"O-RIGHT"===e&&(t+="setDisplayRotation("+this.myType+", 3);\n"),t}},_().Blocks.oled_draw_circle={init:function(){"oled_draw_circle"===this.type?(this.myType="oledc",this.displayKind="OLED",this.setHelpUrl(_().MSG_OLED_HELPURL)):"epaper_draw_circle"===this.type&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper"),this.setTooltip(_().MSG_OLED_DRAW_CIRCLE_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.appendValueInput("POINT_X").setCheck("Number").appendField(this.displayKind+" draw circle at (x)"),this.appendValueInput("POINT_Y").setCheck(null).setAlign(_().ALIGN_RIGHT).appendField("(y)"),this.appendValueInput("RADIUS").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("radius"),"OLED"===this.displayKind?this.appendValueInput("COLOR").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("color"):"ePaper"===this.displayKind&&this.appendDummyInput("COLOR").appendField("color").setAlign(_().ALIGN_RIGHT).appendField(new(_().FieldDropdown)([["black","0"],["white","1"],["invert","2"]]),"COLOR_VALUE"),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("fill").appendField(new(_().FieldCheckbox)("TRUE"),"ck_fill"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("protocols")),this.setWarningText(null)},onchange:_().Blocks.oled_clear_screen.onchange},_().propc.oled_draw_circle=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf(this.displayKind+" initialize"))return"// ERROR: "+this.displayKind+" is not initialized!\n";{const e=_().propc.valueToCode(this,"POINT_X",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"POINT_Y",_().propc.ORDER_NONE),n=_().propc.valueToCode(this,"RADIUS",_().propc.ORDER_NONE);let i=0;if("OLED"===this.displayKind){this.disabled||(_().propc.definitions_.colormath='#include "colormath.h"');const e=_().propc.valueToCode(this,"COLOR",_().propc.ORDER_NONE)||"0xFFFFFF";let t="";"0x"===e.substr(0,2)&&/0x[0-9A-Fa-f]{4}/.test(e)?(t=e.substr(2,6),i="remapColor(0x"+parseInt(t,16).toString(16)+', "8R8G8B", "5R6G5B")'):i=`remapColor(${e},"8R8G8B", "5R6G5B")`}else"ePaper"===this.displayKind&&(i=this.getFieldValue("COLOR_VALUE"));let o="drawCircle("+this.myType+", ";return"TRUE"===this.getFieldValue("ck_fill")&&(o="fillCircle("+this.myType+", "),o+=e+", "+t+", "+n+", "+i+");\n",o}},_().Blocks.oled_draw_line={init:function(){"oled_draw_line"===this.type?(this.myType="oledc",this.displayKind="OLED",this.setHelpUrl(_().MSG_OLED_HELPURL)):"epaper_draw_line"===this.type&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper"),this.setTooltip(_().MSG_OLED_DRAW_LINE_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.setColour(X.getColor("protocols")),this.appendValueInput("X_ONE").setCheck("Number").appendField(this.displayKind+" draw line from 1 (x)"),this.appendValueInput("Y_ONE").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("(y)"),this.appendValueInput("X_TWO").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("to 2 (x)"),this.appendValueInput("Y_TWO").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("(y)"),"OLED"===this.displayKind?this.appendValueInput("COLOR").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("color"):"ePaper"===this.displayKind&&this.appendDummyInput("COLOR").appendField("color").setAlign(_().ALIGN_RIGHT).appendField(new(_().FieldDropdown)([["black","0"],["white","1"],["invert","2"]]),"COLOR_VALUE"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null)},onchange:_().Blocks.oled_clear_screen.onchange},_().propc.oled_draw_line=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf(this.displayKind+" initialize"))return"// ERROR: "+this.displayKind+" is not initialized!\n";{const e=_().propc.valueToCode(this,"X_ONE",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"Y_ONE",_().propc.ORDER_NONE),n=_().propc.valueToCode(this,"X_TWO",_().propc.ORDER_NONE),i=_().propc.valueToCode(this,"Y_TWO",_().propc.ORDER_NONE);let o=0;if("OLED"===this.displayKind){this.disabled||(_().propc.definitions_.colormath='#include "colormath.h"');const e=_().propc.valueToCode(this,"COLOR",_().propc.ORDER_NONE)||"0xFFFFFF";let t="";"0x"===e.substr(0,2)&&/0x[0-9A-Fa-f]{4}/.test(e)?(t=e.substr(2,6),o="remapColor(0x"+parseInt(t,16).toString(16)+', "8R8G8B", "5R6G5B")'):o=`remapColor(${e},"8R8G8B", "5R6G5B")`}else"ePaper"===this.displayKind&&(o=this.getFieldValue("COLOR_VALUE"));let s="";return s+="drawLine("+this.myType+", "+e+", "+t+", "+n+", "+i+", "+o+");\n",s}},_().Blocks.oled_draw_pixel={init:function(){"oled_draw_pixel"===this.type?(this.myType="oledc",this.displayKind="OLED",this.setHelpUrl(_().MSG_OLED_HELPURL)):"epaper_draw_pixel"===this.type&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper"),this.setTooltip(_().MSG_OLED_DRAW_PIXEL_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.setColour(X.getColor("protocols")),this.appendValueInput("X_AXIS").setCheck("Number").appendField(this.displayKind+" draw pixel at"),this.appendValueInput("Y_AXIS").setCheck("Number").appendField(","),"OLED"===this.displayKind?this.appendValueInput("COLOR").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("color"):"ePaper"===this.displayKind&&this.appendDummyInput("COLOR").appendField("color").setAlign(_().ALIGN_RIGHT).appendField(new(_().FieldDropdown)([["black","0"],["white","1"],["invert","2"]]),"COLOR_VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null)},onchange:_().Blocks.oled_clear_screen.onchange},_().propc.oled_draw_pixel=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf(this.displayKind+" initialize"))return"// ERROR: "+this.displayKind+" is not initialized!\n";{const e=_().propc.valueToCode(this,"X_AXIS",_().propc.ORDER_ATOMIC),t=_().propc.valueToCode(this,"Y_AXIS",_().propc.ORDER_ATOMIC);let n=0;if("OLED"===this.displayKind){this.disabled||(_().propc.definitions_.colormath='#include "colormath.h"');const e=_().propc.valueToCode(this,"COLOR",_().propc.ORDER_NONE)||"0xFFFFFF";let t="";"0x"===e.substr(0,2)&&/0x[0-9A-Fa-f]{4}/.test(e)?(t=e.substr(2,6),n="remapColor(0x"+parseInt(t,16).toString(16)+', "8R8G8B", "5R6G5B")'):n=`remapColor(${e},"8R8G8B", "5R6G5B")`}else"ePaper"===this.displayKind&&(n=this.getFieldValue("COLOR_VALUE"));return"drawPixel("+this.myType+", "+e+", "+t+", "+n+");\n"}},_().Blocks.oled_draw_triangle={init:function(){"oled_draw_triangle"===this.type?(this.myType="oledc",this.displayKind="OLED",this.setHelpUrl(_().MSG_OLED_HELPURL)):"epaper_draw_triangle"===this.type&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper"),this.setTooltip(_().MSG_OLED_DRAW_TRIANGLE_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.setColour(X.getColor("protocols")),this.appendValueInput("POINT_X0").setCheck("Number").appendField(this.displayKind+" draw triangle at 1 (x)"),this.appendValueInput("POINT_Y0").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("(y)"),this.appendValueInput("POINT_X1").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("2 (x)"),this.appendValueInput("POINT_Y1").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("(y)"),this.appendValueInput("POINT_X2").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("3 (x)"),this.appendValueInput("POINT_Y2").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("(y)"),"OLED"===this.displayKind?this.appendValueInput("COLOR").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("color"):"ePaper"===this.displayKind&&this.appendDummyInput("COLOR").appendField("color").setAlign(_().ALIGN_RIGHT).appendField(new(_().FieldDropdown)([["black","0"],["white","1"],["invert","2"]]),"COLOR_VALUE"),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("fill").appendField(new(_().FieldCheckbox)("TRUE"),"ck_fill"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null)},onchange:_().Blocks.oled_clear_screen.onchange},_().propc.oled_draw_triangle=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf(this.displayKind+" initialize"))return"// ERROR: "+this.displayKind+" is not initialized!\n";{const e=_().propc.valueToCode(this,"POINT_X0",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"POINT_Y0",_().propc.ORDER_NONE),n=_().propc.valueToCode(this,"POINT_X1",_().propc.ORDER_NONE),i=_().propc.valueToCode(this,"POINT_Y1",_().propc.ORDER_NONE),o=_().propc.valueToCode(this,"POINT_X2",_().propc.ORDER_NONE),s=_().propc.valueToCode(this,"POINT_Y2",_().propc.ORDER_NONE);let l=0;if("OLED"===this.displayKind){this.disabled||(_().propc.definitions_.colormath='#include "colormath.h"');const e=_().propc.valueToCode(this,"COLOR",_().propc.ORDER_NONE)||"0xFFFFFF";let t="";"0x"===e.substr(0,2)&&/0x[0-9A-Fa-f]{4}/.test(e)?(t=e.substr(2,6),l="remapColor(0x"+parseInt(t,16).toString(16)+', "8R8G8B", "5R6G5B")'):l=`remapColor(${e},"8R8G8B", "5R6G5B")`}else"ePaper"===this.displayKind&&(l=this.getFieldValue("COLOR_VALUE"));let r="drawTriangle(";return"TRUE"===this.getFieldValue("ck_fill")&&(r="fillTriangle("),r+=this.myType+", ",r+=e+", "+t+", ",r+=n+", "+i+", ",r+=o+", "+s+", ",r+=l+");\n",r}},_().Blocks.oled_draw_rectangle={init:function(){"oled_draw_rectangle"===this.type?(this.myType="oledc",this.displayKind="OLED",this.setHelpUrl(_().MSG_OLED_HELPURL)):"epaper_draw_rectangle"===this.type&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper"),this.setTooltip(_().MSG_OLED_DRAW_RECTANGLE_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.appendValueInput("POINT_X").setCheck("Number").appendField(this.displayKind+" draw rectangle at (x)"),this.appendValueInput("POINT_Y").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("(y)"),this.appendValueInput("RECT_WIDTH").setCheck(null).setAlign(_().ALIGN_RIGHT).appendField("width"),this.appendValueInput("RECT_HEIGHT").setCheck(null).setAlign(_().ALIGN_RIGHT).appendField("height"),this.appendValueInput("RECT_ROUND").setCheck(null).setAlign(_().ALIGN_RIGHT).appendField("roundness"),"OLED"===this.displayKind?this.appendValueInput("COLOR").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("color"):"ePaper"===this.displayKind&&this.appendDummyInput("COLOR").appendField("color").setAlign(_().ALIGN_RIGHT).appendField(new(_().FieldDropdown)([["black","0"],["white","1"],["invert","2"]]),"COLOR_VALUE"),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("fill").appendField(new(_().FieldCheckbox)("TRUE"),"ck_fill"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("protocols")),this.setWarningText(null)},onchange:_().Blocks.oled_clear_screen.onchange},_().propc.oled_draw_rectangle=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf(this.displayKind+" initialize"))return"// ERROR: "+this.displayKind+" is not initialized!\n";{const e=_().propc.valueToCode(this,"POINT_X",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"POINT_Y",_().propc.ORDER_NONE),n=_().propc.valueToCode(this,"RECT_WIDTH",_().propc.ORDER_NONE),i=_().propc.valueToCode(this,"RECT_HEIGHT",_().propc.ORDER_NONE),o=_().propc.valueToCode(this,"RECT_ROUND",_().propc.ORDER_NONE);let s=0;if("OLED"===this.displayKind){this.disabled||(_().propc.definitions_.colormath='#include "colormath.h"');const e=_().propc.valueToCode(this,"COLOR",_().propc.ORDER_NONE)||"0xFFFFFF";let t="";"0x"===e.substr(0,2)&&/0x[0-9A-Fa-f]{4}/.test(e)?(t=e.substr(2,6),s="remapColor(0x"+parseInt(t,16).toString(16)+', "8R8G8B", "5R6G5B")'):s=`remapColor(${e},"8R8G8B", "5R6G5B")`}else"ePaper"===this.displayKind&&(s=this.getFieldValue("COLOR_VALUE"));let l="drawRoundRect(";return"TRUE"===this.getFieldValue("ck_fill")&&(l="fillRoundRect("),l+=this.myType+", "+e+", "+t+", "+n+", "+i+", ","0"===o?l=l.replace(/RoundRect\(/g,"Rect("):l+=o+", ",l+s+");\n"}},_().Blocks.oled_text_size={init:function(){"oled_text_size"===this.type?(this.myType="oledc",this.displayKind="OLED",this.setHelpUrl(_().MSG_OLED_HELPURL)):"epaper_text_size"===this.type&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper"),this.setTooltip(_().MSG_OLED_TEXT_SIZE_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField(this.displayKind+" text size").appendField(new(_().FieldDropdown)([["small","SMALL"],["medium","MEDIUM"],["large","LARGE"]]),"size_select").appendField("font").appendField(new(_().FieldDropdown)([["sans","FONT_SANS"],["serif","FONT_SERIF"],["script","FONT_SCRIPT"],["bubble","FONT_BUBBLE"]]),"font_select"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null)},onchange:_().Blocks.oled_clear_screen.onchange},_().propc.oled_text_size=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf(this.displayKind+" initialize"))return"// ERROR: "+this.displayKind+" is not initialized!\n";{const e=this.getFieldValue("size_select"),t=this.getFieldValue("font_select");let n="";return n+="setTextSize("+this.myType+", "+e+");\n",n+="setTextFont("+this.myType+", "+t+");\n",n}},_().Blocks.oled_text_color={init:function(){"oled_text_color"===this.type?(this.myType="oledc",this.displayKind="OLED",this.setHelpUrl(_().MSG_OLED_HELPURL)):"epaper_text_color"===this.type&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper"),this.setTooltip(_().MSG_OLED_TEXT_COLOR_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.setColour(X.getColor("protocols")),"OLED"===this.displayKind?(this.appendValueInput("FONT_COLOR").setCheck("Number").appendField("OLED font color"),this.appendValueInput("BACKGROUND_COLOR").setCheck("Number").appendField("font background color")):"ePaper"===this.displayKind&&(this.appendDummyInput("FONT_COLOR").appendField("ePaper font color        ").setAlign(_().ALIGN_RIGHT).appendField(new(_().FieldDropdown)([["black","0"],["white","1"],["invert","2"]]),"FONT_COLOR_VALUE"),this.appendDummyInput("BACKGROUND_COLOR").appendField("font background color").setAlign(_().ALIGN_RIGHT).appendField(new(_().FieldDropdown)([["black","0"],["white","1"],["invert","2"]]),"BACKGROUND_COLOR_VALUE")),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null)},onchange:_().Blocks.oled_clear_screen.onchange},_().propc.oled_text_color=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf(this.displayKind+" initialize"))return"// ERROR: "+this.displayKind+" is not initialized!\n";{let e=0,t=0;"OLED"===this.displayKind?(this.disabled||(_().propc.definitions_.colormath='#include "colormath.h"'),e=_().propc.valueToCode(this,"FONT_COLOR",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"BACKGROUND_COLOR",_().propc.ORDER_NONE),/0x[0-9A-Fa-f]{4}/.test(e)&&(e=e.substr(2,6)),e="remapColor(0x"+parseInt(e,16).toString(16)+', "8R8G8B", "5R6G5B")',/0x[0-9A-Fa-f]{4}/.test(t)&&(t=t.substr(2,6)),t="remapColor(0x"+parseInt(t,16).toString(16)+', "8R8G8B", "5R6G5B")'):"ePaper"===this.displayKind&&(e=this.getFieldValue("FONT_COLOR_VALUE"),t=this.getFieldValue("BACKGROUND_COLOR_VALUE"));let n="";return n+="setTextColor("+this.myType+", "+e+");\n",n+="setBgColor("+this.myType+", "+t+");\n",n}},_().Blocks.oled_get_max_height={init:function(){"oled"===this.type.split("_")[0]?(this.myType="oledc",this.displayKind="OLED",this.setHelpUrl(_().MSG_OLED_HELPURL)):"epaper"===this.type.split("_")[0]&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper"),"height"===this.type.split("_")[3]?(this.setTooltip(_().MSG_OLED_GET_MAX_HEIGHT_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.appendDummyInput().appendField(this.displayKind+" max height")):(this.setTooltip(_().MSG_OLED_GET_MAX_WIDTH_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.appendDummyInput().appendField(this.displayKind+" max width")),this.setColour(X.getColor("protocols")),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number")}},_().Blocks.oled_get_max_width=_().Blocks.oled_get_max_height,_().propc.oled_get_max_height=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf(this.displayKind+" initialize"))return["0",_().propc.ORDER_NONE];{let e="getDisplayWidth(";return"height"===this.type.split("_")[3]&&(e="getDisplayHeight("),[e+this.myType+")",_().propc.ORDER_NONE]}},_().propc.oled_get_max_width=_().propc.oled_get_max_height,_().Blocks.oled_set_cursor={init:function(){"oled_set_cursor"===this.type?(this.myType="oledc",this.displayKind="OLED",this.setHelpUrl(_().MSG_OLED_HELPURL)):"epaper_set_cursor"===this.type&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper"),this.setTooltip(_().MSG_OLED_SET_CURSOR_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.appendValueInput("X_POS").setCheck("Number").appendField(this.displayKind+" set cursor to (x)"),this.appendValueInput("Y_POS").setCheck("Number").appendField("(y)"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("protocols")),this.setWarningText(null)},onchange:_().Blocks.oled_clear_screen.onchange},_().propc.oled_set_cursor=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf(this.displayKind+" initialize"))return"// ERROR: "+this.displayKind+" is not initialized!\n";{const e=_().propc.valueToCode(this,"X_POS",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"Y_POS",_().propc.ORDER_NONE);return"setCursor("+this.myType+", "+e+", "+t+",0);\n"}},_().Blocks.oled_print_text={init:function(){"oled_print_text"===this.type?(this.myType="oledc",this.displayKind="OLED",this.setHelpUrl(_().MSG_OLED_HELPURL)):"epaper_print_text"===this.type&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper"),this.setTooltip(_().MSG_OLED_PRINT_TEXT_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.appendValueInput("MESSAGE").setCheck("String").appendField(this.displayKind+" print text "),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("protocols")),this.setWarningText(null)},onchange:_().Blocks.oled_clear_screen.onchange},_().propc.oled_print_text=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf(this.displayKind+" initialize"))return"// ERROR: "+this.displayKind+" is not initialized!\n";{const e=_().propc.valueToCode(this,"MESSAGE",_().propc.ORDER_NONE);return"drawText("+this.myType+", "+e+");\n"}},_().Blocks.oled_print_number={init:function(){"oled_print_number"===this.type?(this.myType="oledc",this.displayKind="OLED",this.setHelpUrl(_().MSG_OLED_HELPURL)):"epaper_print_number"===this.type&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper"),this.setTooltip(_().MSG_OLED_PRINT_NUMBER_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.appendValueInput("NUMIN").setCheck("Number").appendField(this.displayKind+" print number "),this.appendDummyInput().appendField(new(_().FieldDropdown)([["Decimal","DEC"],["Hexadecimal","HEX"],["Binary","BIN"]]),"type"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("protocols")),this.setWarningText(null)},onchange:_().Blocks.oled_clear_screen.onchange},_().propc.oled_print_number=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf(this.displayKind+" initialize"))return"// ERROR: "+this.displayKind+" is not initialized!\n";{const e=_().propc.valueToCode(this,"NUMIN",_().propc.ORDER_NONE),t=this.getFieldValue("type");return"drawNumber("+this.myType+", "+e+", "+t+");\n"}},_().Blocks.oled_print_multiple={init:function(){let e=_().MSG_OLED_PRINT_MULTIPLE_TOOLTIP,t=_().MSG_OLED_HELPURL;this.myDevice="OLED","heb_print_multiple"===this.type?(e=_().MSG_HEB_PRINT_MULTIPLE_TOOLTIP,t=_().MSG_BADGE_DISPLAY_HELPURL,this.myDevice="Display"):"epaper_print_multiple"===this.type&&(t=_().MSG_EPAPER_HELPURL,this.myDevice="ePaper"),this.setTooltip(e.replace(/Display /,this.myDevice+" ")),this.setHelpUrl(t),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField(this.myDevice+" print"),this.appendValueInput("PRINT0").setAlign(_().ALIGN_RIGHT).setCheck("String").appendField("text"),this.appendValueInput("PRINT1").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("decimal number"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!1),this.setMutator(new(_().Mutator)(["console_print_str","console_print_dec","console_print_hex","console_print_bin","console_print_float","console_print_char"])),this.optionList_=["str","dec"],this.specDigits_=!1,this.setWarningText(null)},mutationToDom:_().Blocks.console_print_multiple.mutationToDom,domToMutation:_().Blocks.console_print_multiple.domToMutation,decompose:_().Blocks.console_print_multiple.decompose,compose:_().Blocks.console_print_multiple.compose,saveConnections:_().Blocks.console_print_multiple.saveConnections,onchange:function(){let e=null;this.workspace&&this.optionList_.length<1&&(e=this.myDevice+" print multiple must have at least one term.");-1===_().getMainWorkspace().getAllBlocks().toString().indexOf(this.myDevice+" initialize")&&"heb_print_multiple"!==this.type&&(e="WARNING: You must use an "+this.myDevice+"\ninitialize block at the beginning of your program!"),this.setWarningText(e)}},_().propc.oled_print_multiple=_().propc.console_print_multiple,_().Blocks.oled_bitmap={init:function(){"oled_bitmap"===this.type?(this.myType="oledc",this.displayKind="OLED",this.setHelpUrl(_().MSG_OLED_HELPURL)):"epaper_bitmap"===this.type&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper"),this.setTooltip(_().MSG_OLED_BITMAP_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField(this.displayKind+" draw BMP image").appendField(new(_().FieldTextInput)("filename",(function(e){return(e=e.replace(/[^A-Z0-9a-z_]/g,"").toLowerCase()).length>8&&(e=e.substring(0,7)),e})),"FILENAME"),this.appendValueInput("POS_X").appendField("at (x)"),this.appendValueInput("POS_Y").appendField("(y)"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:_().Blocks.oled_clear_screen.onchange},_().propc.oled_bitmap=function(){if(!this.disabled){const e=x();let t=!1;const n=_().getMainWorkspace().getAllBlocks();if(-1===n.toString().indexOf(this.displayKind+" initialize"))return"// ERROR: "+this.displayKind+" is not initialized!\n";for(let e=0;e<n.length;e++)"sd_init"===n[e].type&&(t=!0);t||(_().propc.setups_.sd_card="sd_mount("+e.sd_card+");\n")}const e=this.getFieldValue("FILENAME"),t=_().propc.valueToCode(this,"POS_X",_().propc.ORDER_NONE)||"0",n=_().propc.valueToCode(this,"POS_Y",_().propc.ORDER_NONE)||"0";return"drawBitmap("+this.myType+', "'+e+'.bmp", '+t+", "+n+");\n"},_().Blocks.epaper_update={init:function(){"epaper_update"===this.type&&(this.setHelpUrl(_().MSG_EPAPER_HELPURL),this.myType="ePaper",this.displayKind="ePaper"),this.setTooltip(_().MSG_OLED_UPDATE_TOOLTIP.replace(/Display /,this.displayKind+" ")),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField(this.displayKind+" update"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setWarningText(null)},onchange:_().Blocks.oled_clear_screen.onchange},_().propc.epaper_update=function(){return-1===_().getMainWorkspace().getAllBlocks(!1).toString().indexOf(this.displayKind+" initialize")?"// ERROR: "+this.displayKind+" is not initialized!\n":"updateDisplay("+this.myType+");\n"},_().Blocks.epaper_initialize=_().Blocks.oled_initialize,_().propc.epaper_initialize=_().propc.oled_initialize,_().Blocks.epaper_clear_screen=_().Blocks.oled_clear_screen,_().propc.epaper_clear_screen=_().propc.oled_clear_screen,_().Blocks.epaper_draw_circle=_().Blocks.oled_draw_circle,_().propc.epaper_draw_circle=_().propc.oled_draw_circle,_().Blocks.epaper_draw_line=_().Blocks.oled_draw_line,_().propc.epaper_draw_line=_().propc.oled_draw_line,_().Blocks.epaper_draw_pixel=_().Blocks.oled_draw_pixel,_().propc.epaper_draw_pixel=_().propc.oled_draw_pixel,_().Blocks.epaper_draw_triangle=_().Blocks.oled_draw_triangle,_().propc.epaper_draw_triangle=_().propc.oled_draw_triangle,_().Blocks.epaper_draw_rectangle=_().Blocks.oled_draw_rectangle,_().propc.epaper_draw_rectangle=_().propc.oled_draw_rectangle,_().Blocks.epaper_text_size=_().Blocks.oled_text_size,_().propc.epaper_text_size=_().propc.oled_text_size,_().Blocks.epaper_text_color=_().Blocks.oled_text_color,_().propc.epaper_text_color=_().propc.oled_text_color,_().Blocks.epaper_get_max_height=_().Blocks.oled_get_max_height,_().propc.epaper_get_max_height=_().propc.oled_get_max_height,_().Blocks.epaper_get_max_width=_().Blocks.oled_get_max_height,_().propc.epaper_get_max_width=_().propc.oled_get_max_height,_().Blocks.epaper_set_cursor=_().Blocks.oled_set_cursor,_().propc.epaper_set_cursor=_().propc.oled_set_cursor,_().Blocks.epaper_print_text=_().Blocks.oled_print_text,_().propc.epaper_print_text=_().propc.oled_print_text,_().Blocks.epaper_print_number=_().Blocks.oled_print_number,_().propc.epaper_print_number=_().propc.oled_print_number,_().Blocks.epaper_print_multiple=_().Blocks.oled_print_multiple,_().propc.epaper_print_multiple=_().propc.console_print_multiple,_().Blocks.epaper_bitmap=_().Blocks.oled_bitmap,_().propc.epaper_bitmap=_().propc.oled_bitmap,_().Blocks.heb_wx_lock={init:function(){this.setHelpUrl(_().MSG_BADGE_WX_LOCK),this.setTooltip(_().MSG_HEB_WX_LOCK_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Badge WX programming").appendField(new(_().FieldDropdown)([["unlock","Allow the Badge WX to be programmed over WiFi,high"],["lock","Prevent the Badge WX from being programmed over WiFi,input"]]),"STATE"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_wx_lock=function(){const e=this.getFieldValue("STATE").split(",");let t="// "+e[0]+"\n";return"reset"===e[1]&&(t+="pulse_out(17, 100);\n",e[1]="input"),t+=e[1]+"(17);\n",t},_().Blocks.heb_toggle_led={init:function(){this.setHelpUrl(_().MSG_BADGE_LEDS_HELPURL),this.setTooltip(_().MSG_HEB_TOGGLE_LED_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("LED set state of").appendField(new(_().FieldDropdown)([["0 - P27","0"],["1 - P26","1"],["2 - P25","2"],["3 - P15","3"],["4 - P16","4"],["5 - P17","5"]]),"LED_#").appendField("state").appendField(new(_().FieldDropdown)([["on/high","1"],["off/low","0"]]),"STATE"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_toggle_led=function(){return"led("+this.getFieldValue("LED_#")+", "+this.getFieldValue("STATE")+");\n"},_().Blocks.heb_pwm_led={init:function(){this.setHelpUrl(_().MSG_BADGE_LEDS_HELPURL),this.setTooltip(_().MSG_HEB_PWM_LED_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendValueInput("BRIGHTNESS").setCheck("Number").appendField("LED").appendField(new(_().FieldDropdown)([["0 (left)","0"],["1 (right)","1"]]),"LED").appendField("brightness").appendRange("R,0,15,0"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_pwm_led=function(){return"led_pwm_set("+this.getFieldValue("LED")+", "+_().propc.valueToCode(this,"BRIGHTNESS",_().propc.ORDER_NONE)+");\n"},_().Blocks.heb_toggle_led_open={init:function(){this.setHelpUrl(_().MSG_BADGE_LEDS_HELPURL),this.setTooltip(_().MSG_HEB_TOGGLE_LED_OPEN_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("LED set state of"),this.appendValueInput("LED_NUM").setCheck("Number"),this.appendValueInput("LED_STATE").appendField("state").setCheck("Number"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_toggle_led_open=function(){return"led("+_().propc.valueToCode(this,"LED_NUM",_().propc.ORDER_NONE)+", "+_().propc.valueToCode(this,"LED_STATE",_().propc.ORDER_NONE)+");\n"},_().Blocks.heb_color_val={init:function(){this.setHelpUrl(_().MSG_VALUES_HELPURL),this.setTooltip(_().MSG_HEB_COLOR_VAL_TOOLTIP),this.setColour(X.getColor("programming"));const e=new(_().FieldColour)("#FFFFFF");e.setColours(["#FFFFFF","#FFFF00","#00FFFF","#FF00FF","#000000","#00FF00","#0000FF","#FF0000"]).setColumns(4),this.appendDummyInput().appendField("color (Badge)").appendField(e,"RGB"),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.heb_color_val=function(){const e=this.getFieldValue("RGB").replace(/F/g,"1").replace(/f/g,"1").replace("#","");return["0b"+e[0]+e[2]+e[4],_().propc.ORDER_NONE]},_().Blocks.heb_set_led_rgb={init:function(){this.setHelpUrl(_().MSG_BADGE_LEDS_HELPURL),this.setTooltip(_().MSG_HEB_SET_LED_RGB_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendValueInput("RGB").setCheck("Number").appendField("RGB LED set state of").appendField(new(_().FieldDropdown)([["left LED","L"],["right LED","R"],["both LEDs","B"]]),"SIDE").appendField("to"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_set_led_rgb=function(){let e=this.getFieldValue("SIDE");const t=_().propc.valueToCode(this,"RGB",_().propc.ORDER_NONE);let n="";return"B"===e&&(e=t,n="s"),"rgb"+n+"("+e+", "+t+");\n"},_().Blocks.heb_print_numeric_var={init:function(){this.setHelpUrl(_().MSG_BADGE_DISPLAY_HELPURL),this.setTooltip(_().MSG_HEB_PRINT_NUMERIC_VAR_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendValueInput("VALUE").setCheck("Number").appendField("Display print number"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_print_numeric_var=function(){const e=_().propc.valueToCode(this,"VALUE",_().propc.ORDER_NONE);return e.startsWith('"')&&e.endsWith('"')?"oledprint("+e+");\n":'oledprint("%d", '+e+");\n"},_().Blocks.heb_print_string_var={init:function(){this.setHelpUrl(_().MSG_BADGE_DISPLAY_HELPURL),this.setTooltip(_().MSG_HEB_PRINT_STRING_VAR_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendValueInput("VALUE").setCheck("String").appendField("Display print text"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_print_string_var=function(){return"oledprint("+_().propc.valueToCode(this,"VALUE",_().propc.ORDER_NONE)+");\n"},_().Blocks.heb_cursor_position_large={init:function(){this.setHelpUrl(_().MSG_BADGE_HELPURL),this.setTooltip(_().MSG_HEB_SET_FONT_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Display set font size").appendField(new(_().FieldDropdown)([["Large","LARGE"],["Small","SMALL"]]),"SIZE"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_cursor_position_large=function(){return"text_size("+this.getFieldValue("SIZE")+");\n"},_().Blocks.heb_cursor_position_small={init:function(){this.setHelpUrl(_().MSG_BADGE_DISPLAY_HELPURL),this.setTooltip(_().MSG_HEB_CURSOR_POSITION_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendValueInput("COLS").setCheck("Number").appendField("Display set cursor column"),this.appendValueInput("ROWS").setCheck("Number").appendField("row"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_cursor_position_small=function(){return"cursor("+_().propc.valueToCode(this,"COLS",_().propc.ORDER_NONE)+", "+_().propc.valueToCode(this,"ROWS",_().propc.ORDER_NONE)+");\n"},_().Blocks.heb_oled_point={init:function(){this.setHelpUrl(_().MSG_BADGE_DISPLAY_HELPURL),this.setTooltip(_().MSG_HEB_OLED_POINT_TOOLTIP);const e=new(_().FieldColour)("#FFFFFF");e.setColours(["#FFFFFF","#000000"]).setColumns(2),this.setColour(X.getColor("protocols")),this.appendValueInput("X0").setCheck("Number").appendField("Display draw pixel at (x)"),this.appendValueInput("Y0").setCheck("Number").appendField("(y)"),this.appendDummyInput().appendField("color").appendField(e,"COLOR"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_oled_point=function(){const e=_().propc.valueToCode(this,"X0",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"Y0",_().propc.ORDER_NONE);let n=this.getFieldValue("COLOR");return n="#000000"===n?"0":"1","point("+e+", "+t+", "+n+");\n"},_().Blocks.heb_oled_line={init:function(){this.setHelpUrl(_().MSG_BADGE_DISPLAY_HELPURL),this.setTooltip(_().MSG_HEB_OLED_LINE_TOOLTIP);const e=new(_().FieldColour)("#FFFFFF");e.setColours(["#FFFFFF","#000000"]).setColumns(2),this.setColour(X.getColor("protocols")),this.appendValueInput("X0").setCheck("Number").appendField("Display draw line from 1 (x)"),this.appendValueInput("Y0").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("(y)"),this.appendValueInput("X1").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("to 2 (x)"),this.appendValueInput("Y1").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("(y)"),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("color").appendField(e,"COLOR"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_oled_line=function(){const e=_().propc.valueToCode(this,"X0",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"Y0",_().propc.ORDER_NONE),n=_().propc.valueToCode(this,"X1",_().propc.ORDER_NONE),i=_().propc.valueToCode(this,"Y1",_().propc.ORDER_NONE);let o=this.getFieldValue("COLOR");return o="#000000"===o?"0":"1","line("+e+", "+t+", "+n+", "+i+", "+o+");\n"},_().Blocks.heb_oled_circle={init:function(){this.setHelpUrl(_().MSG_BADGE_DISPLAY_HELPURL),this.setTooltip(_().MSG_HEB_OLED_CIRCLE_TOOLTIP);const e=new(_().FieldColour)("#FFFFFF");e.setColours(["#FFFFFF","#000000"]).setColumns(2),this.setColour(X.getColor("protocols")),this.appendValueInput("X0").setCheck("Number").appendField("Display draw circle at (x)"),this.appendValueInput("Y0").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("(y)"),this.appendValueInput("R").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("radius"),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("filled").appendField(new(_().FieldCheckbox)("TRUE"),"FILL"),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("color").appendField(e,"COLOR"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_oled_circle=function(){const e=_().propc.valueToCode(this,"X0",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"Y0",_().propc.ORDER_NONE),n=_().propc.valueToCode(this,"R",_().propc.ORDER_NONE);let i=this.getFieldValue("FILL"),o=this.getFieldValue("COLOR");return o="#000000"===o?"0":"1",i="TRUE"===i?"Filled":"","circle"+i+"("+e+", "+t+", "+n+", "+o+");\n"},_().Blocks.heb_oled_box={init:function(){this.setHelpUrl(_().MSG_BADGE_DISPLAY_HELPURL),this.setTooltip(_().MSG_HEB_OLED_BOX_TOOLTIP);const e=new(_().FieldColour)("#FFFFFF");e.setColours(["#FFFFFF","#000000"]).setColumns(2),this.setColour(X.getColor("protocols")),this.appendValueInput("X0").setCheck("Number").appendField("Display draw rectangle at 1 (x)"),this.appendValueInput("Y0").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("(y)"),this.appendValueInput("W").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("width"),this.appendValueInput("H").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("height"),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("filled").appendField(new(_().FieldCheckbox)("TRUE"),"FILL"),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("color").appendField(e,"COLOR"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_oled_box=function(){const e=_().propc.valueToCode(this,"X0",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"Y0",_().propc.ORDER_NONE),n=_().propc.valueToCode(this,"W",_().propc.ORDER_NONE),i=_().propc.valueToCode(this,"H",_().propc.ORDER_NONE);let o=this.getFieldValue("FILL"),s=this.getFieldValue("COLOR");s="#000000"===s?"0":"1",o="TRUE"===o?"Filled":"";let l="box"+o+"("+e+", "+t+", ("+e+"+"+n+"-1),";return l+="("+t+"+"+i+"-1), "+s+");\n",l},_().Blocks.heb_oled_triangle={init:function(){this.setHelpUrl(_().MSG_BADGE_DISPLAY_HELPURL),this.setTooltip(_().MSG_HEB_OLED_TRIANGLE_TOOLTIP);const e=new(_().FieldColour)("#FFFFFF");e.setColours(["#FFFFFF","#000000"]).setColumns(2),this.setColour(X.getColor("protocols")),this.appendValueInput("X0").setCheck("Number").appendField("Display draw triangle from 1 (x)"),this.appendValueInput("Y0").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("(y)"),this.appendValueInput("X1").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("to 2 (x)"),this.appendValueInput("Y1").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("(y)"),this.appendValueInput("X2").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("to 3 (x)"),this.appendValueInput("Y2").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("(y)"),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("filled").appendField(new(_().FieldCheckbox)("TRUE"),"FILL"),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("color").appendField(e,"COLOR"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_oled_triangle=function(){const e=_().propc.valueToCode(this,"X0",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"Y0",_().propc.ORDER_NONE),n=_().propc.valueToCode(this,"X1",_().propc.ORDER_NONE),i=_().propc.valueToCode(this,"Y1",_().propc.ORDER_NONE),o=_().propc.valueToCode(this,"X2",_().propc.ORDER_NONE),s=_().propc.valueToCode(this,"Y2",_().propc.ORDER_NONE);let l=this.getFieldValue("FILL"),r=this.getFieldValue("COLOR");r="#000000"===r?"0":"1",l="TRUE"===l?"Filled":"";let a="triangle"+l+"("+e+", "+t+", "+n+", ";return a+=i+", "+o+", "+s+", "+r+");\n",a},_().Blocks.heb_clear_screen={init:function(){this.setHelpUrl(_().MSG_BADGE_DISPLAY_HELPURL),this.setTooltip(_().MSG_HEB_CLEAR_SCREEN_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Display clear screen"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_clear_screen=function(){return"clear();\n"},_().Blocks.heb_rotate={init:function(){this.setHelpUrl(_().MSG_BADGE_DISPLAY_HELPURL),this.setTooltip(_().MSG_HEB_ROTATE_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("Display rotate 180°"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_rotate=function(){return"rotate180();\n"},_().Blocks.heb_ir_send_signal={init:function(){this.setHelpUrl(_().MSG_BADGE_IR_HELPURL),this.setTooltip(_().MSG_HEB_IR_SEND_SIGNAL_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendValueInput("MESSAGE").setCheck("String").appendField("IR send text"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_ir_send_signal=function(){return"send("+_().propc.valueToCode(this,"MESSAGE",_().propc.ORDER_NONE)+");\n"},_().Blocks.heb_ir_read_signal={init:function(){this.setHelpUrl(_().MSG_BADGE_IR_HELPURL),this.setTooltip(_().MSG_HEB_IR_READ_SIGNAL_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("IR receive store message in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"BUFFER").appendField("length in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"LENGTH"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!0)}},_().propc.heb_ir_read_signal=function(){const e=_().propc.variableDB_.getName(this.getFieldValue("BUFFER"),_().VARIABLE_CATEGORY_NAME),t=_().propc.variableDB_.getName(this.getFieldValue("LENGTH"),_().VARIABLE_CATEGORY_NAME);return _().propc.vartype_[e]="char",_().propc.varlength_[e]=128,t+"= receive("+e+");\n"},_().Blocks.heb_ir_clear_buffer={init:function(){this.setHelpUrl(_().MSG_BADGE_IR_HELPURL),this.setTooltip(_().MSG_HEB_IR_CLEAR_BUFFER_TOOLTIP),this.setColour(X.getColor("protocols")),this.appendDummyInput().appendField("IR clear buffer"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_ir_clear_buffer=function(){return"irclear();\n"},_().Blocks.heb_badge_eeprom_store={init:function(){this.setHelpUrl(_().MSG_EEPROM_HELPURL),this.setTooltip(_().MSG_HEB_BADGE_EEPROM_STORE_TOOLTIP),this.setColour(X.getColor("output")),this.appendValueInput("CONTACT").appendField("Memory store contact"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_badge_eeprom_store=function(){return"store("+_().propc.valueToCode(this,"CONTACT",_().propc.ORDER_NONE)+");\n"},_().Blocks.heb_badge_eeprom_is_stored={init:function(){this.setHelpUrl(_().MSG_EEPROM_HELPURL),this.setTooltip(_().MSG_HEB_BADGE_EEPROM_IS_STORED_TOOLTIP),this.setColour(X.getColor("output")),this.appendValueInput("CONTACT").setCheck("String").appendField("Memory contact"),this.appendDummyInput().appendField("already stored"),this.setOutput(!0,"Number"),this.setInputsInline(!0),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.heb_badge_eeprom_is_stored=function(){return["stored("+_().propc.valueToCode(this,"CONTACT",_().propc.ORDER_NONE)+")",_().propc.ORDER_ATOMIC]},_().Blocks.heb_badge_eeprom_retrieve={init:function(){this.setHelpUrl(_().MSG_EEPROM_HELPURL),this.setTooltip(_().MSG_HEB_BADGE_EEPROM_RETRIEVE_TOOLTIP),this.setColour(X.getColor("output")),this.appendValueInput("INDEX").setCheck("Number").appendField("Memory get contact at index"),this.appendDummyInput().appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_SET_ITEM),"BUFFER"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_badge_eeprom_retrieve=function(){const e=_().propc.valueToCode(this,"INDEX",_().propc.ORDER_NONE),t=_().propc.variableDB_.getName(this.getFieldValue("BUFFER"),_().VARIABLE_CATEGORY_NAME);return _().propc.vartype_[t]="char",_().propc.varlength_[t]=128,"retrieve("+t+", constrainInt("+e+", 0, contacts_count() - 1));\n"},_().Blocks.heb_count_contacts={init:function(){this.setHelpUrl(_().MSG_EEPROM_HELPURL),this.setTooltip(_().MSG_HEB_COUNT_CONTACTS_TOOLTIP),this.setColour(X.getColor("output")),this.appendDummyInput().appendField("Memory count contacts"),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.heb_count_contacts=function(){return["contacts_count()",_().propc.ORDER_NONE]},_().Blocks.heb_erase_all_contacts={init:function(){this.setHelpUrl(_().MSG_EEPROM_HELPURL),this.setTooltip(_().MSG_HEB_ERASE_ALL_CONTACTS_TOOLTIP),this.setColour(X.getColor("output")),this.appendDummyInput().appendField("Memory erase all contacts"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_erase_all_contacts=function(){return"contacts_eraseAll();\n"},_().Blocks.heb_badge_axis_acceleration={init:function(){this.setHelpUrl(_().MSG_BADGE_ACCEL_HELPURL),this.setTooltip(_().MSG_HEB_BADGE_AXIS_ACCELERATION_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Accelerometer get").appendField(new(_().FieldDropdown)([["x-axis","AX"],["y-axis","AY"],["z-axis","AZ"]]),"AXIS"),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.heb_badge_axis_acceleration=function(){return["accel("+this.getFieldValue("AXIS")+")",_().propc.ORDER_NONE]},_().Blocks.heb_badge_was_shaken={init:function(){this.setHelpUrl(_().MSG_BADGE_ACCEL_HELPURL),this.setTooltip(_().MSG_HEB_BADGE_WAS_SHAKEN_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Accelerometer was shaken?"),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.heb_badge_was_shaken=function(){return["accel_shaken()",_().propc.ORDER_NONE]},_().Blocks.heb_touchpad_status={init:function(){const e=G();this.setTooltip(_().MSG_HEB_TOUCHPAD_STATUS_TOOLTIP),this.setHelpUrl(_().MSG_BADGE_BUTTONS_HELPURL),this.setColour(X.getColor("input")),"heb-wx"!==e.boardType.name?this.appendDummyInput().appendField("Touchpad").appendField(new(_().FieldDropdown)([["0 - P27","0"],["1 - P26","1"],["2 - P25","2"],["3 - P15","3"],["4 - P16","4"],["5 - P17","5"],["6 - Center Button","6"],["Any button","-1"]]),"TOUCHPAD"):this.appendDummyInput().appendField("Button ").appendField(new(_().FieldDropdown)([["B","7"],["Left ⇦","6"],["Left ⇩","5"],["Left ⇨","4"],["Right ⇦","3"],["Right ⇩","2"],["Right ⇨","1"],["A","0"],["Any button","-1"]]),"TOUCHPAD"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number")}},_().propc.heb_touchpad_status=function(){const e=this.getFieldValue("TOUCHPAD");return["button"+("-1"===e?"s(":"("+e)+")",_().propc.ORDER_NONE]},_().Blocks.heb_touchpad_sensitivity={init:function(){this.setHelpUrl(_().MSG_BADGE_BUTTONS_HELPURL),this.setTooltip(_().MSG_HEB_TOUCHPAD_SENSITIVITY_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Touchpad sensitivity ").appendField(new(_().FieldDropdown)([["0 (low)","7"],["1","8"],["2","9"],["3","10"],["4","11"],["5 (default)","12"],["6","13"],["7","14"],["8 (high)","15"]]),"LEVEL"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_touchpad_sensitivity=function(){return"touch_sensitivity_set("+this.getFieldValue("LEVEL")+");"},_().Blocks.heb_text_to_speech_say={init:function(){this.setHelpUrl(_().MSG_AUDIO_HELPURL),this.setTooltip(_().MSG_HEB_TEXT_TO_SPEECH_SAY_TOOLTIP),this.setColour(X.getColor("io")),this.appendValueInput("STRING").setCheck("String").appendField("TTS say"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_text_to_speech_say=function(){const e=_().propc.valueToCode(this,"STRING",_().propc.ORDER_NONE);if(!this.disabled){let e=x().earphone_jack_inverted;const t=_().getMainWorkspace().getAllBlocks();for(let n=0;n<t.length;n++)"heb_text_to_speech_pins"===t[n].type&&(e=t[n].getFieldValue("PINL")+","+t[n].getFieldValue("PINR"));_().propc.definitions_.TTS='#include "text2speech.h"',_().propc.global_vars_.TTS="talk *tts_talk;",_().propc.setups_.TTS="tts_talk = talk_run("+e+");\ntalk_set_speaker(tts_talk, 1, 100);"}return"talk_say(tts_talk, "+e+");\n"},_().Blocks.heb_text_to_speech_spell={init:function(){this.setHelpUrl(_().MSG_AUDIO_HELPURL),this.setTooltip(_().MSG_HEB_TEXT_TO_SPEECH_SPELL_TOOLTIP),this.setColour(X.getColor("io")),this.appendValueInput("STRING").setCheck("String").appendField("TTS spell"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_text_to_speech_spell=function(){const e=_().propc.valueToCode(this,"STRING",_().propc.ORDER_NONE);if(!this.disabled){let e=x().earphone_jack_inverted;const t=_().getMainWorkspace().getAllBlocks();for(let n=0;n<t.length;n++)"heb_text_to_speech_pins"===t[n].type&&(e=t[n].getFieldValue("PINL")+","+t[n].getFieldValue("PINR"));_().propc.definitions_.TTS='#include "text2speech.h"',_().propc.global_vars_.TTS="talk *tts_talk;",_().propc.setups_.TTS="tts_talk = talk_run("+e+");\ntalk_set_speaker(tts_talk, 1, 100);"}return"talk_spell(tts_talk, "+e+");\n"},_().Blocks.heb_text_to_speech_pins={helpUrl:_().MSG_AUDIO_HELPURL,init:function(){const e=x(),t=(e.earphone_jack_inverted||"0,1").split(",");t[0]=t[0].trim(),t[1]=t[1].trim(),this.setTooltip(_().MSG_HEB_TEXT_TO_SPEECH_PINS_TOOLTIP),this.setColour(X.getColor("io")),this.appendDummyInput("PINS").appendField("TTS set output left PIN").appendField(new(_().FieldDropdown)(e.digital.concat([["None","-1"]])),"PINL").appendField("right PIN").appendField(new(_().FieldDropdown)(e.digital.concat([["None","-1"]])),"PINR"),this.setFieldValue(t[0],"PINL"),this.setFieldValue(t[1],"PINR"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_text_to_speech_pins=function(){return""},_().Blocks.heb_text_to_speech_volume={helpUrl:_().MSG_AUDIO_HELPURL,init:function(){this.setTooltip(_().MSG_HEB_TEXT_TO_SPEECH_VOLUME_TOOLTIP),this.setColour(X.getColor("io")),this.appendDummyInput("PINS").appendField("TTS set volume").appendField(new(_().FieldDropdown)([["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"]]),"VOL"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.heb_text_to_speech_volume=function(){const e=_().getMainWorkspace().getAllBlocks();for(let t=0;t<e.length;t++)if("heb_text_to_speech_say"===e[t].type||"heb_text_to_speech_spell"===e[t].type)return"talk_setVolume(tts_talk, "+this.getFieldValue("VOL")+");\n";return"// WARNING: You must use a TTS say or TTS spell block to use a TTS set volume block.\n"},_().Blocks.heb_print_multiple=_().Blocks.oled_print_multiple,_().propc.heb_print_multiple=_().propc.console_print_multiple;const z="“";_().Blocks.procedures_defnoreturn={callType_:"procedures_callnoreturn",init:function(){"Scribbler Robot"===x().description?this.setHelpUrl(_().MSG_S3_FUNCTIONS_HELPURL):this.setHelpUrl(_().MSG_FUNCTIONS_HELPURL),this.setTooltip(_().MSG_PROCEDURES_DEFNORETURN_TOOLTIP),this.setColour(X.getColor("functions"));const e=new(_().FieldTextInput)("",_().Procedures.rename);e.setSpellcheck(!1),this.appendDummyInput().appendField(_().Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(e){this.hasStatements_!==e&&(e?(this.appendStatementInput("STACK").appendField(_().Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=e)},updateParams_:function(){let e=!1;const t={};for(let n=0;n<this.arguments_.length;n++){if(t["arg_"+this.arguments_[n].toLowerCase()]){e=!0;break}t["arg_"+this.arguments_[n].toLowerCase()]=!0}e?this.setWarningText(_().Msg.PROCEDURES_DEF_DUPLICATE_WARNING):this.setWarningText(null);let n="";this.arguments_.length&&(n=_().Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),_().Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{_().Events.enable()}},mutationToDom:function(e){const t=document.createElement("mutation");e&&t.setAttribute("name",this.getFieldValue("NAME"));for(let n=0;n<this.argumentVarModels_.length;n++){const i=document.createElement("arg"),o=this.argumentVarModels_[n];i.setAttribute("name",o.name),i.setAttribute("varid",o.getId()),e&&this.paramIds_&&i.setAttribute("paramId",this.paramIds_[n]),t.appendChild(i)}return this.hasStatements_||t.setAttribute("statements","false"),t},domToMutation:function(e){this.arguments_=[],this.argumentVarModels_=[];for(let t,n=0;t=e.childNodes[n];n++)if("arg"===t.nodeName.toLowerCase()){const e=t.getAttribute("name"),n=t.getAttribute("varid")||t.getAttribute("varId");this.arguments_.push(e);const i=_().Variables.getOrCreateVariablePackage(this.workspace,n,e,"");this.argumentVarModels_.push(i)}this.updateParams_(),_().Procedures.mutateCallers(this),this.setStatements_("false"!==e.getAttribute("statements"))},decompose:function(e){const t=e.newBlock("procedures_mutatorcontainer");t.initSvg(),this.getInput("RETURN")?t.setFieldValue(this.hasStatements_?"TRUE":"FALSE","STATEMENTS"):t.getInput("STATEMENT_INPUT").setVisible(!1);let n=t.getInput("STACK").connection;for(let t=0;t<this.arguments_.length;t++){const i=e.newBlock("procedures_mutatorarg");i.initSvg(),i.setFieldValue(this.arguments_[t],"NAME"),i.oldLocation=t,n.connect(i.previousConnection),n=i.nextConnection}return _().Procedures.mutateCallers(this),t},compose:function(e){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let t=e.getInputTargetBlock("STACK");for(;t;){const e=t.getFieldValue("NAME");this.arguments_.push(e);const n=this.workspace.getVariable(e,"");this.argumentVarModels_.push(n),this.paramIds_.push(t.id),t=t.nextConnection&&t.nextConnection.targetBlock()}this.updateParams_(),_().Procedures.mutateCallers(this);let n=e.getFieldValue("STATEMENTS");if(null!==n&&(n="TRUE"===n,this.hasStatements_!==n))if(n)this.setStatements_(!0),_().Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null;else{const e=this.getInput("STACK").connection;if(this.statementConnection_=e.targetConnection,this.statementConnection_){const t=e.targetBlock();t.unplug(),t.bumpNeighbours_()}this.setStatements_(!1)}},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(e,t){const n=this.workspace.getVariableById(e);if(""!==n.type)return;const i=n.name,o=this.workspace.getVariableById(t);let s=!1;for(let t=0;t<this.argumentVarModels_.length;t++)this.argumentVarModels_[t].getId()===e&&(this.arguments_[t]=o.name,this.argumentVarModels_[t]=o,s=!0);s&&this.displayRenamedVar_(i,o.name)},updateVarName:function(e){const t=e.name;let n=!1,i="";for(let o=0;o<this.argumentVarModels_.length;o++)this.argumentVarModels_[o].getId()===e.getId()&&(i=this.arguments_[o],this.arguments_[o]=t,n=!0);n&&this.displayRenamedVar_(i,t)},displayRenamedVar_:function(e,t){if(this.updateParams_(),this.mutator.isVisible()){const n=this.mutator.workspace_.getAllBlocks();for(let i,o=0;i=n[o];o++)"procedures_mutatorarg"===i.type&&_().Names.equals(e,i.getFieldValue("NAME"))&&i.setFieldValue(t,"NAME")}},customContextMenu:function(e){if(this.isInFlyout)return;const t={enabled:!0},n=this.getFieldValue("NAME");t.text=_().Msg.PROCEDURES_CREATE_DO.replace("%1",n);const i=document.createElement("mutation");i.setAttribute("name",n);for(let e=0;e<this.arguments_.length;e++){const t=document.createElement("arg");t.setAttribute("name",this.arguments_[e]),i.appendChild(t)}let o=document.createElement("block");if(o.setAttribute("type",this.callType_),o.appendChild(i),t.callback=_().ContextMenu.callbackFactory(this,o),e.push(t),!this.isCollapsed())for(let n=0;n<this.argumentVarModels_.length;n++){const i=this.argumentVarModels_[n],s=i.name;t.text=_().Msg.VARIABLES_SET_CREATE_GET.replace("%1",s);const l=_().Variables.generateVariableFieldDom(i);o=document.createElement("block"),o.setAttribute("type","variables_get"),o.appendChild(l),t.callback=_().ContextMenu.callbackFactory(this,o),e.push(t)}}},_().Blocks.procedures_callnoreturn={init:function(){const e=x();this.setHelpUrl("s3"===e.name?_().MSG_S3_FUNCTIONS_HELPURL:_().MSG_FUNCTIONS_HELPURL),this.setTooltip(_().MSG_PROCEDURES_CALLNORETURN_TOOLTIP),this.setColour(X.getColor("functions")),this.appendDummyInput("TOPROW").appendField(`run function “${this.id}”`,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousDisabledState_=!1},getProcedureCall:function(){return this.getFieldValue("NAME").split(z)[1].slice(0,-1)},renameProcedure:function(e,t){_().Names.equals(e,this.getProcedureCall())&&this.setFieldValue(`run function “${t}”`,"NAME")},setProcedureParameters_:function(e,t){const n=_().Procedures.getDefinition(this.getProcedureCall(),this.workspace),i=n&&n.mutator&&n.mutator.isVisible();if(i||(this.quarkConnections_={},this.quarkIds_=null),!t)return;if(e.join("\n")===this.arguments_.join("\n"))return void(this.quarkIds_=t);if(t.length!==e.length)throw new RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);const o=this.rendered;this.rendered=!1;for(let e=0;e<this.arguments_.length;e++){const n=this.getInput("ARG"+e);if(n){const o=n.connection.targetConnection;this.quarkConnections_[this.quarkIds_[e]]=o,i&&o&&-1===t.indexOf(this.quarkIds_[e])&&(o.disconnect(),o.getSourceBlock().bumpNeighbours_())}}this.arguments_=[].concat(e),this.argumentVarModels_=[];for(let e=0;e<this.arguments_.length;e++){const t=_().Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[e],"");this.argumentVarModels_.push(t)}if(this.updateShape_(),this.quarkIds_=t,this.quarkIds_)for(let e=0;e<this.arguments_.length;e++){const t=this.quarkIds_[e];if(t in this.quarkConnections_){const n=this.quarkConnections_[t];_().Mutator.reconnect(n,this,"ARG"+e)||delete this.quarkConnections_[t]}}this.rendered=o,this.rendered&&this.render()},updateShape_:function(){let e;for(e=0;e<this.arguments_.length;e++){let t=this.getField("ARGNAME"+e);if(t){_().Events.disable();try{t.setValue(this.arguments_[e])}finally{_().Events.enable()}}else{t=new(_().FieldLabel)(this.arguments_[e]);this.appendValueInput("ARG"+e).setAlign(_().ALIGN_RIGHT).appendField(t,"ARGNAME"+e).init()}}for(;this.getInput("ARG"+e);)this.removeInput("ARG"+e),e++;const t=this.getInput("TOPROW");t&&(this.arguments_.length?this.getField("WITH")||(t.appendField(_().Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),t.init()):this.getField("WITH")&&t.removeField("WITH"))},mutationToDom:function(){const e=document.createElement("mutation");e.setAttribute("name",this.getProcedureCall());for(let t=0;t<this.arguments_.length;t++){const n=document.createElement("arg");n.setAttribute("name",this.arguments_[t]),e.appendChild(n)}return e},domToMutation:function(e){const t=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),t);const n=[],i=[];for(let t,o=0;t=e.childNodes[o];o++)"arg"===t.nodeName.toLowerCase()&&(n.push(t.getAttribute("name")),i.push(t.getAttribute("paramId")));this.setProcedureParameters_(n,i)},getVarModels:function(){return this.argumentVarModels_},onchange:function(e){e.type,_().Events.BLOCK_MOVE;const t=this.previousConnection.targetBlock();try{if(t)if(0===t.toString().indexOf("new processor ")){null!==this.getNextBlock()&&this.nextConnection.disconnect(),this.setNextStatement(!1)}else this.setNextStatement(!0);else this.setNextStatement(!0)}catch(e){this.nextConnection.disconnect(),this.setNextStatement(!1)}if(this.workspace&&!this.workspace.isFlyout&&e.recordUndo)if(e.type===_().Events.BLOCK_CREATE&&-1!==e.ids.indexOf(this.id)){const t=this.getProcedureCall();let n=_().Procedures.getDefinition(t,this.workspace);if(!n||n.type===this.defType_&&JSON.stringify(n.arguments_)===JSON.stringify(this.arguments_)||(n=null),!n){_().Events.setGroup(e.group);const t=document.createElement("xml"),n=document.createElement("block");n.setAttribute("type",this.defType_);const i=this.getRelativeToSurfaceXY(),o=i.x+_().SNAP_RADIUS*(this.RTL?-1:1),s=i.y+2*_().SNAP_RADIUS;n.setAttribute("x",o),n.setAttribute("y",s);const l=this.mutationToDom();n.appendChild(l);const r=document.createElement("field");r.setAttribute("name","NAME"),r.appendChild(document.createTextNode(this.getProcedureCall())),n.appendChild(r),t.appendChild(n),_().Xml.domToWorkspace(t,this.workspace),_().Events.setGroup(!1)}}else if(e.type===_().Events.BLOCK_DELETE){const t=this.getProcedureCall();_().Procedures.getDefinition(t,this.workspace)||(_().Events.setGroup(e.group),this.dispose(!0,!1),_().Events.setGroup(!1))}else if(e.type===_().Events.CHANGE&&"disabled"===e.element){const t=this.getProcedureCall(),n=_().Procedures.getDefinition(t,this.workspace);if(n&&n.id===e.blockId){const t=_().Events.getGroup();t&&console.log("Saw an existing group while responding to a definition change"),_().Events.setGroup(e.group),e.newValue?(this.previousDisabledState_=this.disabled,this.setDisabled(!0)):this.setDisabled(this.previousDisabledState_),_().Events.setGroup(t)}}},customContextMenu:function(e){const t={enabled:!0};t.text=_().Msg.PROCEDURES_HIGHLIGHT_DEF;const n=this.getProcedureCall(),i=this.workspace;t.callback=function(){const e=_().Procedures.getDefinition(n,i);e&&(i.centerOnBlock(e.id),e.select())},e.push(t)},defType_:"procedures_defnoreturn"},_().propc.procedures_defreturn=function(){const e=_().propc.variableDB_.getName(this.getFieldValue("NAME"),_().Procedures.NAME_TYPE);let t=_().propc.statementToCode(this,"STACK");_().propc.INFINITE_LOOP_TRAP&&(t=_().propc.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+t);let n=_().propc.valueToCode(this,"RETURN",_().propc.ORDER_NONE)||"";n&&(n="  return "+n+";\n");const i=n?"int":"void",o=[];for(let e=0;e<this.arguments_.length;e++){const t=_().propc.variableDB_.getName(this.arguments_[e],_().VARIABLE_CATEGORY_NAME);o.push("int "+t),void 0===_().propc.vartype_[t]&&(_().propc.vartype_[t]="LOCAL")}let s=i+" "+e+"("+o.join(", ")+") {\n"+t+n+"}\n";return _().propc.method_declarations_[e]=i+" "+e+"("+o.join(", ")+");\n",s=_().propc.scrub_(this,s),_().propc.methods_[e]=s,null},_().propc.procedures_defnoreturn=_().propc.procedures_defreturn,_().propc.procedures_callreturn=function(){const e=_().propc.variableDB_.getName(this.getFieldValue("NAME").split(z)[1].slice(0,-1),_().PROCEDURE_CATEGORY_NAME),t=[];for(let e=0;e<this.arguments_.length;e++)t[e]=_().propc.valueToCode(this,"ARG"+e,_().propc.ORDER_NONE)||"null";const n=e+"("+t.join(", ")+")";return"procedures_callnoreturn"===this.type?n+";\n":[n,_().propc.ORDER_UNARY_POSTFIX]},_().propc.procedures_callnoreturn=_().propc.procedures_callreturn,_().propc.procedures_ifreturn=function(){let e="if ("+(_().propc.valueToCode(this,"CONDITION",_().propc.ORDER_NONE)||"false")+") {\n";if(this.hasReturnValue_){e+="  return "+(_().propc.valueToCode(this,"VALUE",_().propc.ORDER_NONE)||"null")+";\n"}else e+="  return;\n";return e+="}\n",e},_().Blocks.scribbler_loop={init:function(){this.appendDummyInput().appendField("loop"),this.appendStatementInput("LOOP"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!0),this.setColour(X.getColor("programming")),this.setHelpUrl(_().MSG_S3_SIMPLE_CONTROL_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_LOOP_TOOLTIP)}},_().propc.scribbler_loop=function(){let e=_().propc.statementToCode(this,"LOOP");return _().propc.INFINITE_LOOP_TRAP&&(e=_().propc.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+e),"while(1) {\n"+e+"}\n"},_().Blocks.scribbler_limited_loop={init:function(){this.appendDummyInput().appendField("loop").appendField(new(_().FieldNumber)("10",null,null,1),"LOOP_COUNT").appendField("times"),this.appendStatementInput("LOOP"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!0),this.setColour(X.getColor("programming")),this.setHelpUrl(_().MSG_S3_SIMPLE_CONTROL_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_LIMITED_LOOP_TOOLTIP)}},_().propc.scribbler_limited_loop=function(){let e=_().propc.statementToCode(this,"LOOP");_().propc.INFINITE_LOOP_TRAP&&(e=_().propc.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+e);return"for (int __n = 0; __n < "+(this.getFieldValue("LOOP_COUNT")||"0")+"; __n++) {\n"+e+"}\n"},_().Blocks.scribbler_exit_loop={init:function(){this.appendDummyInput().appendField("exit loop"),this.setPreviousStatement(!0,"Block"),this.setColour(X.getColor("programming")),this.setHelpUrl(_().MSG_S3_SIMPLE_CONTROL_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_EXIT_LOOP_TOOLTIP)}},_().propc.scribbler_exit_loop=function(){return"break;\n"},_().Blocks.scribbler_simple_wait={init:function(){"scribbler_simple_wait"===this.type?this.appendDummyInput().appendField("wait").appendField(new(_().FieldNumber)("5",null,null,1),"WAITTIME"):this.appendValueInput("WAITTIME","Number").appendRange("R,1,2147483647,1").appendField("wait").setCheck("Number"),this.appendDummyInput().appendField(new(_().FieldDropdown)([["seconds","1000"],["tenths of a second","100"],["milliseconds","1"]],(function(e){"scribbler_simple_wait"!==this.type&&this.getSourceBlock().getInput("WAITTIME").appendRange("R,0,"+(2147483647/parseInt(e)).toFixed(0)+",1")})),"TIMESCALE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("programming")),this.setHelpUrl(_().MSG_S3_CONTROL_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_WAIT_TOOLTIP)}},_().Blocks.scribbler_wait=_().Blocks.scribbler_simple_wait,_().propc.scribbler_simple_wait=function(){let e=" * ";this.getFieldValue("TIMESCALE")&&"1"!==this.getFieldValue("TIMESCALE")?e+=this.getFieldValue("TIMESCALE"):e="";let t="";return t="scribbler_simple_wait"===this.type?this.getFieldValue("WAITTIME")||"1":_().propc.valueToCode(this,"WAITTIME",_().propc.ORDER_NONE)||"1","0"!==t?"pause("+t+e+");\n":""},_().propc.scribbler_wait=_().propc.scribbler_simple_wait,_().Blocks.scribbler_if_line={init:function(){this.appendDummyInput().appendField("if the Scribbler").appendField(new(_().FieldDropdown)([["is","IS"],["is not","IS_NOT"]],(function(e){this.getSourceBlock().checkForWas(e)})),"LINE_CONDITION").appendField("over").appendField(new(_().FieldDropdown)([["the center","CENTER"],["the left edge","LEFT"],["the right edge","RIGHT"],["any part","DETECTED"]]),"LINE_POSITION").appendField("of a").appendField(new(_().FieldDropdown)([["black","BLACK"],["white","WHITE"]]),"LINE_COLOR").appendField("line"),this.appendStatementInput("IF_LINE").appendField(),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!0),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_SIMPLE_SENSORS_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_IF_LINE_TOOLTIP)},checkForWas:function(e){"WAS"===e||"WAS_NOT"===e?(this.setColour("#FF8800"),this.setWarningText(_().MSG_S3_ERROR_NO_WAS_CONDITION)):(this.setColour(X.getColor("input")),this.setWarningText(null))},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("state",this.getFieldValue("LINE_CONDITION")),e},domToMutation:function(e){const t=e.getAttribute("state");this.checkForWas(t)}},_().propc.scribbler_if_line=function(){return"if(s3_simpleLine(S3_"+this.getFieldValue("LINE_CONDITION")+", S3_"+this.getFieldValue("LINE_POSITION")+", S3_"+this.getFieldValue("LINE_COLOR")+")) {\n"+_().propc.statementToCode(this,"IF_LINE")+"\n}"},_().Blocks.scribbler_simple_line={init:function(){this.appendDummyInput().appendField("line sensor").appendField(new(_().FieldDropdown)([["is","IS"],["is not","IS_NOT"]],(function(e){this.getSourceBlock().checkForWas(e)})),"LINE_CONDITION").appendField("over").appendField(new(_().FieldDropdown)([["the center","CENTER"],["the left edge","LEFT"],["the right edge","RIGHT"],["any part","DETECTED"]]),"LINE_POSITION").appendField("of a").appendField(new(_().FieldDropdown)([["black","BLACK"],["white","WHITE"]]),"LINE_COLOR").appendField("line"),this.setOutput(!0,"Number"),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_LINE_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_IF_LINE_TOOLTIP)},checkForWas:function(e){"WAS"===e||"WAS_NOT"===e?(this.setColour("#FF8800"),this.setWarningText(_().MSG_S3_ERROR_NO_WAS_CONDITION)):(this.setColour(X.getColor("input")),this.setWarningText(null))},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("state",this.getFieldValue("LINE_CONDITION")),e},domToMutation:function(e){const t=e.getAttribute("state");this.checkForWas(t)}},_().propc.scribbler_simple_line=function(){return["s3_simpleLine(S3_"+this.getFieldValue("LINE_CONDITION")+", S3_"+this.getFieldValue("LINE_POSITION")+", S3_"+this.getFieldValue("LINE_COLOR")+")",_().propc.ORDER_ATOMIC]},_().Blocks.scribbler_if_obstacle={init:function(){this.appendDummyInput().appendField("if an obstacle").appendField(new(_().FieldDropdown)([["is","IS"],["is not","IS_NOT"]],(function(e){this.getSourceBlock().checkForWas(e)})),"OBSTACLE_CONDITION").appendField(new(_().FieldDropdown)([["in front of","CENTER"],["to the left of","LEFT"],["to the right of","RIGHT"],["detected by","DETECTED"]]),"OBSTACLE_POSITION").appendField("the Scribbler"),this.appendStatementInput("IF_OBSTACLE").appendField(),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!0),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_SIMPLE_SENSORS_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_IF_OBSTACLE_TOOLTIP)},checkForWas:function(e){void 0===e&&(e=this.getFieldValue("OBSTACLE_CONDITION")),"WAS"===e||"WAS_NOT"===e?(this.setColour("#FF8800"),this.setWarningText(_().MSG_S3_ERROR_NO_WAS_CONDITION)):(this.setColour(X.getColor("input")),this.setWarningText(null))},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("state",this.getFieldValue("OBSTACLE_CONDITION")),e},domToMutation:function(e){const t=e.getAttribute("state");this.checkForWas(t)}},_().propc.scribbler_if_obstacle=function(){return"if(s3_simpleObstacle(S3_"+this.getFieldValue("OBSTACLE_CONDITION")+", S3_"+this.getFieldValue("OBSTACLE_POSITION")+")) {\n"+_().propc.statementToCode(this,"IF_OBSTACLE")+"\n}"},_().Blocks.scribbler_simple_obstacle={init:function(){this.appendDummyInput().appendField("obstacle").appendField(new(_().FieldDropdown)([["is","IS"],["is not","IS_NOT"]],(function(e){this.getSourceBlock().checkForWas(e)})),"OBSTACLE_CONDITION").appendField("detected").appendField(new(_().FieldDropdown)([["in front","CENTER"],["to the left","LEFT"],["to the right","RIGHT"],["on either side","DETECTED"]]),"OBSTACLE_POSITION"),this.setOutput(!0,"Number"),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_SIMPLE_SENSORS_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_IF_OBSTACLE_TOOLTIP)},checkForWas:function(e){"WAS"===e||"WAS_NOT"===e?(this.setColour("#FF8800"),this.setWarningText(_().MSG_S3_ERROR_NO_WAS_CONDITION)):(this.setColour(X.getColor("input")),this.setWarningText(null))},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("state",this.getFieldValue("OBSTACLE_CONDITION")),e},domToMutation:function(e){const t=e.getAttribute("state");this.checkForWas(t)}},_().propc.scribbler_simple_obstacle=function(){return["s3_simpleObstacle(S3_"+this.getFieldValue("OBSTACLE_CONDITION")+", S3_"+this.getFieldValue("OBSTACLE_POSITION")+")",_().propc.ORDER_ATOMIC]},_().Blocks.scribbler_if_light={init:function(){this.appendDummyInput().appendField("if the most light").appendField(new(_().FieldDropdown)([["is","IS"],["is not","IS_NOT"]],(function(e){this.getSourceBlock().checkForWas(e)})),"LIGHT_CONDITION").appendField(new(_().FieldDropdown)([["in front","CENTER"],["to the left","LEFT"],["to the right","RIGHT"],["on all sides","DETECTED"]]),"LIGHT_POSITION").appendField("of the Scribbler"),this.appendStatementInput("IF_LIGHT").appendField(),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!0),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_SIMPLE_SENSORS_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_IF_LIGHT_TOOLTIP)},checkForWas:function(e){"WAS"===e||"WAS_NOT"===e?(this.setColour("#FF8800"),this.setWarningText(_().MSG_S3_ERROR_NO_WAS_CONDITION)):(this.setColour(X.getColor("input")),this.setWarningText(null))},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("state",this.getFieldValue("LIGHT_CONDITION")),e},domToMutation:function(e){const t=e.getAttribute("state");this.checkForWas(t)}},_().propc.scribbler_if_light=function(){return"if(s3_simpleLight(S3_"+this.getFieldValue("LIGHT_CONDITION")+", S3_"+this.getFieldValue("LIGHT_POSITION")+")) {\n"+_().propc.statementToCode(this,"IF_LIGHT")+"\n}"},_().Blocks.scribbler_simple_light={init:function(){this.appendDummyInput().appendField("light sensed is").appendField(new(_().FieldDropdown)([["brightest","IS"],["darkest","IS_NOT"]],(function(e){this.getSourceBlock().checkForWas(e)})),"LIGHT_CONDITION").appendField(" ").appendField(new(_().FieldDropdown)([["in front","CENTER"],["to the left","LEFT"],["to the right","RIGHT"]]),"LIGHT_POSITION"),this.setOutput(!0,"Number"),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_LIGHT_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_IF_LIGHT_TOOLTIP)},checkForWas:function(e){"WAS"===e||"WAS_NOT"===e?(this.setColour("#FF8800"),this.setWarningText(_().MSG_S3_ERROR_NO_WAS_CONDITION)):(this.setColour(X.getColor("input")),this.setWarningText(null))},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("state",this.getFieldValue("LIGHT_CONDITION")),e},domToMutation:function(e){const t=e.getAttribute("state");this.checkForWas(t)}},_().propc.scribbler_simple_light=function(){return["s3_simpleLight(S3_"+this.getFieldValue("LIGHT_CONDITION")+", S3_"+this.getFieldValue("LIGHT_POSITION")+")",_().propc.ORDER_ATOMIC]},_().Blocks.scribbler_if_stalled={init:function(){this.appendDummyInput().appendField("if the Scribbler").appendField(new(_().FieldDropdown)([["is","IS"],["is not","IS_NOT"]],(function(e){this.getSourceBlock().checkForWas(e)})),"STALLED_CONDITION").appendField("stuck"),this.appendStatementInput("IF_STALLED").appendField(),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!0),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_SIMPLE_SENSORS_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_IF_STALLED_TOOLTIP)},checkForWas:function(e){"WAS"===e||"WAS_NOT"===e?(this.setColour("#FF8800"),this.setWarningText(_().MSG_S3_ERROR_NO_WAS_CONDITION)):(this.setColour(X.getColor("input")),this.setWarningText(null))},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("state",this.getFieldValue("STALLED_CONDITION")),e},domToMutation:function(e){const t=e.getAttribute("state");this.checkForWas(t)}},_().propc.scribbler_if_stalled=function(){return"if(s3_simpleStalled(S3_"+this.getFieldValue("STALLED_CONDITION")+")) {\n"+_().propc.statementToCode(this,"IF_STALLED")+"\n}"},_().Blocks.scribbler_if_button={init:function(){this.appendDummyInput().appendField("if the red button").appendField(new(_().FieldDropdown)([["is","IS"],["is not","IS_NOT"]],(function(e){this.getSourceBlock().checkForWas(e)})),"BUTTON_CONDITION").appendField("pressed"),this.appendStatementInput("IF_BUTTON"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!0),this.setColour(X.getColor("input"))},checkForWas:function(e){"WAS"===e||"WAS_NOT"===e?(this.setColour("#FF8800"),this.setWarningText(_().MSG_S3_ERROR_NO_WAS_CONDITION)):(this.setColour(X.getColor("input")),this.setWarningText(null))},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("state",this.getFieldValue("BUTTON_CONDITION")),e},domToMutation:function(e){const t=e.getAttribute("state");this.checkForWas(t)}},_().propc.scribbler_if_button=function(){return"if(s3_simpleButton(S3_"+this.getFieldValue("BUTTON_CONDITION")+")) {\n"+_().propc.statementToCode(this,"IF_BUTTON")+"\n}"},_().Blocks.scribbler_if_random={init:function(){this.appendDummyInput().appendField("if a virtual coin flip is").appendField(new(_().FieldDropdown)([["heads",""],["tails","_NOT"]]),"RANDOM_INVERT"),this.appendStatementInput("IF_RANDOM"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setInputsInline(!0),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_SIMPLE_SENSORS_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_IF_RANDOM_TOOLTIP)}},_().propc.scribbler_if_random=function(){return"if(s3_simpleRandom(S3_IS"+this.getFieldValue("RANDOM_INVERT")+")) {\n"+_().propc.statementToCode(this,"IF_RANDOM")+"\n}"},_().Blocks.scribbler_drive={init:function(){this.appendDummyInput().appendField("drive").appendField(new(_().FieldDropdown)([["forward"," "],["backward","-"]]),"DRIVE_DIRECTION").appendField("and").appendField(new(_().FieldDropdown)([["sharply to the left","SHARP_LEFT"],["gently to the left","GENTLE_LEFT"],["slightly to the left","SLIGHT_LEFT"],["straight","STRAIGHT"],["slightly to the right","SLIGHT_RIGHT"],["gently to the right","GENTLE_RIGHT"],["sharply to the right","SHARP_RIGHT"]]),"DRIVE_ANGLE").appendField("at").appendField(new(_().FieldDropdown)([["full","255"],["a quick","191"],["a gentle","127"],["a slow","63"]]),"DRIVE_SPEED").appendField("speed"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("io")),this.setHelpUrl(_().MSG_S3_SIMPLE_ACTIONS_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_DRIVE_TOOLTIP),this.getFieldValue("DRIVE_DIRECTION")&&this.getFieldValue("DRIVE_DIRECTION").length<1&&this.setFieldValue(" ","DRIVE_DIRECTION")}},_().propc.scribbler_drive=function(){const e=this.getFieldValue("DRIVE_DIRECTION");return`s3_simpleDrive(S3_${this.getFieldValue("DRIVE_ANGLE").trim()},${e}${this.getFieldValue("DRIVE_SPEED")});\n`},_().Blocks.scribbler_spin={init:function(){this.appendDummyInput().appendField("rotate").appendField(new(_().FieldDropdown)([["↻"," "],["↺","-"]]),"SPIN_DIRECTION").appendField("for").appendField(new(_().FieldAngle)(90),"SPIN_ANGLE").appendField("at").appendField(new(_().FieldDropdown)([["full","15"],["a quick","7"],["a gentle","3"],["a slow","1"]]),"SPIN_SPEED").appendField("speed"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("io")),this.setHelpUrl(_().MSG_S3_SIMPLE_ACTIONS_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_SPIN_TOOLTIP),this.getFieldValue("SPIN_DIRECTION")&&this.getFieldValue("SPIN_DIRECTION").length<1&&this.setFieldValue(" ","SPIN_DIRECTION")}},_().propc.scribbler_spin=function(){return"s3_simpleSpin("+this.getFieldValue("SPIN_DIRECTION").trim()+this.getFieldValue("SPIN_ANGLE")+", "+this.getFieldValue("SPIN_SPEED")+", 0);\n"},_().Blocks.scribbler_stop={init:function(){this.appendDummyInput().appendField("stop driving"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("io")),this.setHelpUrl(_().MSG_S3_SIMPLE_ACTIONS_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_STOP_TOOLTIP)}},_().propc.scribbler_stop=function(){return"s3_simpleStop();\n"},_().Blocks.scribbler_LED={init:function(){this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("change these LEDs:   ").appendField(new(_().FieldCheckbox)("TRUE"),"LEFT_LED").appendField("  ").appendField(new(_().FieldCheckbox)("TRUE"),"CENTER_LED").appendField("  ").appendField(new(_().FieldCheckbox)("TRUE"),"RIGHT_LED").appendField("  ");const e=new(_().FieldColour)("#000000"),t=new(_().FieldColour)("#000000"),n=new(_().FieldColour)("#000000");e.setColours(["#FF0000","#00FF00","#FF7F00","#000000"]).setColumns(2),t.setColours(["#FF0000","#00FF00","#FF7F00","#000000"]).setColumns(2),n.setColours(["#FF0000","#00FF00","#FF7F00","#000000"]).setColumns(2),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("to these colors:  ").appendField(e,"LEFT_COLOR").appendField(t,"CENTER_COLOR").appendField(n,"RIGHT_COLOR").appendField(" "),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("io")),this.setHelpUrl(_().MSG_S3_LEDS_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_LED_TOOLTIP)}},_().propc.scribbler_LED=function(){const e=this.getFieldValue("LEFT_COLOR"),t=this.getFieldValue("CENTER_COLOR"),n=this.getFieldValue("RIGHT_COLOR");let i="";return"TRUE"===this.getFieldValue("LEFT_LED")&&(i+="s3_setLED(S3_LEFT, S3_COLOR_"+e.substr(1,6).toUpperCase()+");\n"),"TRUE"===this.getFieldValue("CENTER_LED")&&(i+="s3_setLED(S3_CENTER, S3_COLOR_"+t.substr(1,6).toUpperCase()+");\n"),"TRUE"===this.getFieldValue("RIGHT_LED")&&(i+="s3_setLED(S3_RIGHT, S3_COLOR_"+n.substr(1,6).toUpperCase()+");\n"),i},_().Blocks.scribbler_play={init:function(){this.appendDummyInput().appendField("play a").appendField(new(_().FieldDropdown)([["soprano","4"],["tenor","8"],["middle","16"],["low","32"],["deep","64"]]),"NOTE_OCTAVE").appendField(new(_().FieldDropdown)([["A♭","3322"],["A","3520"],["A♯/B♭","3729"],["B","3951"],["C","4186"],["C♯/D♭","4435"],["D","4699"],["D♯/E♭","4978"],["E","5274"],["F","5588"],["F♯/G♭","5920"],["G","6272"],["G♯","6645"]]),"NOTE_FREQUENCY").appendField("for a").appendField(new(_().FieldDropdown)([["sixteenth","63"],["dotted sixteenth","94"],["eighth","125"],["dotted eighth","188"],["quarter","250"],["dotted quarter","375"],["half","500"],["dotted half","750"],["whole","1000"],["dotted whole","1500"]]),"NOTE_DURATION").appendField("note at a").appendField(new(_().FieldDropdown)([["loud","50"],["medium","30"],["quiet","15"]]),"NOTE_VOLUME").appendField("volume"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("io")),this.setHelpUrl(_().MSG_S3_SOUND_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_PLAY_TOOLTIP)}},_().propc.scribbler_play=function(){return"s3_simplePlay(("+this.getFieldValue("NOTE_FREQUENCY")+" / "+this.getFieldValue("NOTE_OCTAVE")+"), "+this.getFieldValue("NOTE_DURATION")+", "+this.getFieldValue("NOTE_VOLUME")+");\n"},_().Blocks.move_motors={init:function(){this.appendDummyInput().appendField("drive at speeds of (%)"),this.appendValueInput("LEFT_MOTOR_SPEED").appendRange("R,-100,100,0").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("left motor"),this.appendValueInput("RIGHT_MOTOR_SPEED").appendRange("R,-100,100,0").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("right motor"),this.appendValueInput("MOTOR_DURATION").appendRange("R,0,15000,0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("for (milliseconds, 0 is continuous)","OPS"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("io")),this.setHelpUrl(_().MSG_S3_MOTORS_HELPURL),this.setTooltip(_().MSG_S3_MOVE_MOTORS_TOOLTIP)}},_().propc.move_motors=function(){return"s3_motorSet("+(_().propc.valueToCode(this,"LEFT_MOTOR_SPEED",_().propc.ORDER_ATOMIC)||"0")+", "+(_().propc.valueToCode(this,"RIGHT_MOTOR_SPEED",_().propc.ORDER_ATOMIC)||"0")+", "+(_().propc.valueToCode(this,"MOTOR_DURATION",_().propc.ORDER_ATOMIC)||"0")+");\n"},_().Blocks.move_motors_distance={init:function(){this.appendDummyInput().appendField("drive distances in ").appendField(new(_().FieldDropdown)([["inches"," * 100000 / 1933"],["tenths of an inch"," * 10000 / 1933"],["centimeters"," * 10000 / 491"],["millimeters"," * 1000 / 491"],["encoder counts"," "]],(function(e){this.getSourceBlock().newUnit(e)})),"MULTIPLIER"),this.appendValueInput("LEFT_MOTOR_DISTANCE").appendRange("R,-633,633,0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("left motor distance"),this.appendValueInput("RIGHT_MOTOR_DISTANCE").appendRange("R,-633,633,0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("right motor distance"),this.appendValueInput("MOTOR_SPEED").appendRange("R,-100,100,0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("at speed (%)"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("io")),this.setHelpUrl(_().MSG_S3_MOTORS_HELPURL),this.setTooltip(_().MSG_S3_MOVE_MOTORS_DISTANCE_TOOLTIP),this.getFieldValue("MULTIPLIER")&&this.getFieldValue("MULTIPLIER").length<1&&this.setFieldValue(" ","MULTIPLIER"),this.newUnit(this.getFieldValue("MULTIPLIER"))},newUnit:function(e){const t=this.getInput("RIGHT_MOTOR_DISTANCE").connection,n=this.getInput("LEFT_MOTOR_DISTANCE").connection.targetBlock(),i=t.targetBlock();let o="R,-633,633,0";" * 10000 / 1933"===e?o="R,-6333,6333,0":" * 10000 / 491"===e?o="R,-1608,1608,0":" * 1000 / 491"===e?o="R,-16088,16088,0":" "===e&&(o="R,-32767,32767,0"),this.getInput("RIGHT_MOTOR_DISTANCE").appendRange(o),this.getInput("LEFT_MOTOR_DISTANCE").appendRange(o),n&&n.onchange&&n.onchange.call(n),i&&i.onchange&&i.onchange.call(i)}},_().propc.move_motors_distance=function(){const e=this.getFieldValue("MULTIPLIER").trim();return"s3_motorSetDistance("+(_().propc.valueToCode(this,"LEFT_MOTOR_DISTANCE",_().propc.ORDER_ATOMIC)||"0")+e+", "+(_().propc.valueToCode(this,"RIGHT_MOTOR_DISTANCE",_().propc.ORDER_ATOMIC)||"0")+e+", "+(_().propc.valueToCode(this,"MOTOR_SPEED",_().propc.ORDER_ATOMIC)||"0")+");\n"},_().Blocks.move_motors_xy={init:function(){this.appendDummyInput().appendField("drive to a location"),this.appendValueInput("X_DISTANCE").appendRange("R,-20755429,20755429,0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("change (+/−) in X"),this.appendValueInput("Y_DISTANCE").appendRange("R,-20755429,20755429,0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("change (+/−) in Y"),this.appendValueInput("MOTOR_SPEED").appendRange("R,-100,100,0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("at speed (%)"),this.appendDummyInput().setAlign(_().ALIGN_RIGHT).appendField("in").appendField(new(_().FieldDropdown)([["inches"," * 100000 / 1933"],["tenths of an inch"," * 10000 / 1933"],["centimeters"," * 10000 / 491"],["millimeters"," * 1000 / 491"],["encoder counts"," "]],(function(e){this.getSourceBlock().newUnit(e)})),"MULTIPLIER"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("io")),this.setHelpUrl(_().MSG_S3_MOTORS_HELPURL),this.getFieldValue("MULTIPLIER")&&this.getFieldValue("MULTIPLIER").length<1&&this.setFieldValue(" ","MULTIPLIER"),this.setTooltip(_().MSG_S3_MOVE_MOTORS_XY_TOOLTIP)},newUnit:function(e){const t=this.getInput("X_DISTANCE").connection,n=this.getInput("Y_DISTANCE").connection.targetBlock(),i=t.targetBlock();let o="R,-633,633,0";" * 10000 / 1933"===e?o="R,-6334,6334,0":" * 10000 / 491"===e?o="R,-1608,1608,0":" * 1000 / 491"===e?o="R,-16089,16089,0":" "===e&&(o="R,-32768,32767,0"),this.getInput("X_DISTANCE").appendRange(o),this.getInput("Y_DISTANCE").appendRange(o),n&&n.onchange&&n.onchange.call(n),i&&i.onchange&&i.onchange.call(i)}},_().propc.move_motors_xy=function(){const e=this.getFieldValue("MULTIPLIER").trim();return"s3_motorGotoXY("+(_().propc.valueToCode(this,"X_DISTANCE",_().propc.ORDER_ATOMIC)||"0")+e+", "+(_().propc.valueToCode(this,"Y_DISTANCE",_().propc.ORDER_ATOMIC)||"0")+e+", "+(_().propc.valueToCode(this,"MOTOR_SPEED",_().propc.ORDER_ATOMIC)||"0")+");\n"},_().Blocks.move_motors_angle={init:function(){this.appendDummyInput().appendField("drive a turn"),this.appendValueInput("ROTATE_ANGLE").appendRange("R,-1080,1080,0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("that is (+/− degrees)"),this.appendValueInput("ROTATE_RADIUS").appendRange("R,-85,85,0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("around a radius in (+/−)").appendField(new(_().FieldDropdown)([["inches of"," * 100000 / 1933"],["tenths of an inch of"," * 10000 / 1933"],["centimeters of"," * 10000 / 491"],["millimeters of"," * 1000 / 491"],["encoder counts of"," "]],(function(e){this.getSourceBlock().newUnit(e)})),"RADIUS_MULTIPLIER"),this.appendValueInput("ROTATE_SPEED").appendRange("R,-100,100,0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("at speed (%)"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("io")),this.setHelpUrl(_().MSG_S3_MOTORS_HELPURL),this.setTooltip(_().MSG_S3_MOVE_MOTORS_ANGLE_TOOLTIP),this.getFieldValue("RADIUS_MULTIPLIER")&&this.getFieldValue("RADIUS_MULTIPLIER").length<1&&this.setFieldValue(" ","RADIUS_MULTIPLIER")},newUnit:function(e){const t=this.getInput("ROTATE_RADIUS").connection.targetBlock();let n="R,-85,85,0";" * 10000 / 1933"===e?n="R,-850,850,0":" * 10000 / 491"===e?n="R,-216,216,0":" * 1000 / 491"===e?n="R,-2160,2160,0":" "===e&&(n="R,-4400,4400,0"),this.getInput("ROTATE_RADIUS").appendRange(n),t&&t.onchange&&t.onchange.call(t)}},_().propc.move_motors_angle=function(){const e=this.getFieldValue("RADIUS_MULTIPLIER").trim(),t=_().propc.valueToCode(this,"ROTATE_ANGLE",_().propc.ORDER_ATOMIC),n=_().propc.valueToCode(this,"ROTATE_RADIUS",_().propc.ORDER_ATOMIC),i=_().propc.valueToCode(this,"ROTATE_SPEED",_().propc.ORDER_ATOMIC);return"s3_motorSetRotate("+t+", "+n.trim()+e+", "+i+");\n"},_().Blocks.play_polyphony={init:function(){this.appendDummyInput().appendField("play tones"),this.appendValueInput("FREQUENCY_1").appendRange("R,0,2000,0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("tone 1 (Hz)"),this.appendValueInput("FREQUENCY_2").appendRange("R,0,2000,0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("tone 2 (Hz)"),this.appendValueInput("POLYPHONY_DURATION").appendRange("R,0,15000,0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("for (milliseconds)"),this.appendValueInput("POLYPHONY_VOLUME").appendRange("R,0,100,0").setAlign(_().ALIGN_RIGHT).setCheck("Number").appendField("at volume (%)"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("io")),this.setHelpUrl(_().MSG_S3_SOUND_HELPURL),this.setTooltip(_().MSG_S3_PLAY_POLYPHONY_TOOLTIP)}},_().propc.play_polyphony=function(){const e=_().propc.valueToCode(this,"FREQUENCY_1",_().propc.ORDER_ATOMIC)||"522",t=_().propc.valueToCode(this,"FREQUENCY_2",_().propc.ORDER_ATOMIC)||"784",n=_().propc.valueToCode(this,"POLYPHONY_DURATION",_().propc.ORDER_ATOMIC)||"250";return"s3_setVolume(("+(_().propc.valueToCode(this,"POLYPHONY_VOLUME",_().propc.ORDER_ATOMIC)||"50")+" / 2));\ns3_playNote("+e+", "+t+", "+n+");\n"},_().Blocks.line_sensor={init:function(){this.appendDummyInput("").appendField("line sensor").appendField(new(_().FieldDropdown)([["left reflectivity","LEFT"],["right reflectivity","RIGHT"]]),"LINE_SENSOR_CHOICE"),this.setInputsInline(!1),this.setOutput(!0,"Number"),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_LINE_HELPURL),this.setTooltip(_().MSG_S3_LINE_SENSOR_TOOLTIP)}},_().propc.line_sensor=function(){return["s3_lineSensor(S3_"+this.getFieldValue("LINE_SENSOR_CHOICE")+")",_().propc.ORDER_ATOMIC]},_().Blocks.obstacle_sensor={init:function(){this.appendDummyInput("").appendField("obstacle detected").appendField(new(_().FieldDropdown)([["on the left","LEFT"],["on the right","RIGHT"],["in front","&&"],["by either sensor","||"]]),"OBSTACLE_SENSOR_CHOICE"),this.setOutput(!0,"Number"),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_OBSTACLE_HELPURL),this.setTooltip(_().MSG_S3_OBSTACLE_SENSOR_TOOLTIP)}},_().propc.obstacle_sensor=function(){const e=this.getFieldValue("OBSTACLE_SENSOR_CHOICE");return"LEFT"===e||"RIGHT"===e?["s3_readObstacle(S3_"+e+")",_().propc.ORDER_ATOMIC]:["(s3_readObstacle(S3_LEFT) "+e+" s3_readObstacle(S3_RIGHT))",_().propc.ORDER_ATOMIC]},_().Blocks.stall_sensor={init:function(){this.appendDummyInput("").appendField("stall sensor").appendField(new(_().FieldDropdown)([["tail wheel is not spinning","!s3_tailWheelMoving()"],["tail wheel is spinning","s3_tailWheelMoving()"],["drive wheels are stopped","!s3_motorsMoving()"],["drive wheels are turning","s3_motorsMoving()"],["Scribbler is stuck","s3_simpleStalled(S3_IS)"],["Scribbler is not stuck","s3_simpleStalled(S3_IS_NOT)"]]),"STALL_SENSOR_CHOICE"),this.setOutput(!0,"Number"),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_STALL_HELPURL),this.setTooltip(_().MSG_S3_STALL_SENSOR_TOOLTIP)}},_().propc.stall_sensor=function(){return[this.getFieldValue("STALL_SENSOR_CHOICE"),_().propc.ORDER_ATOMIC]},_().Blocks.button_pressed={init:function(){this.appendDummyInput("").appendField("the red button is currently pressed"),this.appendDummyInput("").appendField("(true or false)"),this.setOutput(!0,"Number"),this.setColour(X.getColor("input"))}},_().Blocks.spinning_sensor={init:function(){this.appendDummyInput("").appendField("drive wheels stalled"),this.setOutput(!0,"Number"),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_STALL_HELPURL),this.setTooltip(_().MSG_S3_SPINNING_SENSOR_TOOLTIP)}},_().propc.spinning_sensor=function(){return["!s3_motorsMoving()",_().propc.ORDER_ATOMIC]},_().Blocks.light_sensor={init:function(){this.appendDummyInput("").appendField("light sensor").appendField(new(_().FieldDropdown)([["left reading","LEFT"],["center reading","CENTER"],["right reading","RIGHT"]]),"LGHT_SENSOR_CHOICE"),this.setOutput(!0,"Number"),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_LIGHT_HELPURL),this.setTooltip(_().MSG_S3_LIGHT_SENSOR_TOOLTIP)}},_().propc.light_sensor=function(){return["s3_lightSensor(S3_"+this.getFieldValue("LGHT_SENSOR_CHOICE")+")",_().propc.ORDER_ATOMIC]},_().Blocks.reset_button_presses={init:function(){this.appendDummyInput("").appendField("reset button presses on last reset"),this.setOutput(!0,"Number"),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_RESET_BUTTON_HELPURL),this.setTooltip(_().MSG_S3_RESET_BUTTON_PRESSES_TOOLTIP)}},_().propc.reset_button_presses=function(){return["s3_resetButtonCount()",_().propc.ORDER_ATOMIC]},_().Blocks.scribbler_stop_servo={init:function(){const e=x();"Scribbler Robot"===e.description?(this.setHelpUrl(_().MSG_S3_SERVO_HELPURL),this.setColour(X.getColor("robot")),this.pinSet=e.digital):(this.setHelpUrl(_().MSG_SERVO_HELPURL),this.setColour(X.getColor("output")),this.pinSet=e.digital.concat([["other","other"]])),this.setTooltip(_().MSG_S3_SCRIBBLER_STOP_SERVO_TOOLTIP),this.addPinMenu("servo PIN","VALUE"),this.appendDummyInput("VALUE").appendField("disable"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},addPinMenu:function(e,t){this.appendDummyInput("SET_PIN").appendField(e,"LABEL").appendField(new(_().FieldDropdown)(this.pinSet,(function(e){this.getSourceBlock().setToOther(e,t)})),"SERVO_PIN"),this.moveBefore=t,this.otherPin=!1},setToOther:function(e,t){const n=x();if("other"===e){this.otherPin=!0;const e=this.getFieldValue("LABEL");this.getInput("SET_PIN")&&this.removeInput("SET_PIN"),this.appendValueInput("SERVO_PIN").appendField(e).setCheck("Number").appendRange("A,"+n.digital.toString()),t&&this.moveInputBefore("SERVO_PIN",t)}},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("otherpin",this.otherPin),e},domToMutation:function(e){"true"===e.getAttribute("otherpin")&&this.setToOther("other",this.moveBefore)}},_().propc.scribbler_stop_servo=function(){let e="0";e=this.otherPin?_().propc.valueToCode(this,"SERVO_PIN",_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("SERVO_PIN");let t="";const n=_().getMainWorkspace().getAllBlocks();for(let i=0;i<n.length;i++){"fb360_init"!==n[i].type||n[i].getFieldValue("PIN")!==e&&n[i].getFieldValue("FB")!==e||(t="360")}return""===t?(_().propc.definitions_["include servo"]='#include "servo.h"',"servo_disable("+e+");\n"):"servo360_enable("+e+", 0);\n"},_().Blocks.scribbler_ping={init:function(){const e=x();this.appendDummyInput("").appendField("Ping))) sensor on").appendField(new(_().FieldDropdown)(e.digital),"PIN").appendField("distance in").appendField(new(_().FieldDropdown)([["inches","_inches"],["centimeters","_cm"]]),"SCALE"),this.setOutput(!0,"Number"),this.setColour(X.getColor("input")),this.setHelpUrl(_().MSG_S3_PING_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_PING_TOOLTIP)}},_().propc.scribbler_ping=function(){const e=this.getFieldValue("PIN"),t=this.getFieldValue("SCALE");_().propc.definitions_["include ping"]='#include "ping.h"';return["ping"+t+"("+e+")",_().propc.ORDER_ATOMIC]},_().Blocks.analog_input={init:function(){const e=x();this.appendDummyInput("").appendField("check analog PIN").appendField(new(_().FieldDropdown)(e.analog),"ANALOG_PIN"),this.setOutput(!0,"Number"),this.setColour(X.getColor("io")),this.setHelpUrl(_().MSG_S3_IO_HELPURL),this.setTooltip(_().MSG_S3_ANALOG_INPUT_TOOLTIP)}},_().propc.analog_input=function(){return["s3_readADC(S3_ADC_A"+(this.getFieldValue("ANALOG_PIN")||"0")+")",_().propc.ORDER_ATOMIC]},_().Blocks.scribbler_boolean={init:function(){this.appendDummyInput("").appendField(new(_().FieldDropdown)([["true","1"],["false","0"]]),"BOOL"),this.setOutput(!0,"Number"),this.setColour(X.getColor("math")),this.setHelpUrl(_().MSG_S3_MATH_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_BOOLEAN_TOOLTIP)}},_().propc.scribbler_boolean=function(){return[this.getFieldValue("BOOL"),_().propc.ORDER_ATOMIC]},_().Blocks.scribbler_random_boolean={init:function(){this.appendDummyInput("").appendField("random true/false"),this.setOutput(!0,"Number"),this.setColour(X.getColor("math")),this.setHelpUrl(_().MSG_S3_MATH_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_RANDOM_BOOLEAN_TOOLTIP)}},_().propc.scribbler_random_boolean=function(){return _().propc.setups_.random_seed="srand(INA + CNT);",["(rand() % 2)",_().propc.ORDER_ATOMIC]},_().Blocks.scribbler_random_number={init:function(){this.appendValueInput("A").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("random number from"),this.appendValueInput("B").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("to"),this.setInputsInline(!0),this.setOutput(!0,"Number"),this.setColour(X.getColor("math")),this.setHelpUrl(_().MSG_S3_MATH_HELPURL),this.setTooltip(_().MSG_S3_SCRIBBLER_RANDOM_NUMBER_TOOLTIP)}},_().Blocks.factory_reset={init:function(){this.appendDummyInput().appendField("restore s3 demo"),this.setColour(X.getColor("programming")),this.setHelpUrl(_().MSG_S3_FACTORY_RESET_HELPURL),this.setTooltip(_().MSG_S3_FACTORY_RESET_TOOLTIP)}},_().propc.factory_reset=function(){return _().propc.definitions_.s3_factory_reset="#pragma load_default_scribbler_binary",""},_().Blocks.scribbler_serial_send_text={init:function(){this.setColour(X.getColor("protocols")),this.appendDummyInput("").appendField(new(_().FieldDropdown)([["Terminal","T"],["WX module","W"],["XBee","X"]]),"OUTPUT").appendField("send text").appendField("“").appendField(new(_().FieldTextInput)(""),"MESSAGE_TEXT").appendField("”"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setHelpUrl(_().MSG_S3_COMMUNICATE_HELPURL),this.setTooltip(_().MSG_S3_SERIAL_SEND_TEXT_TOOLTIP)}},_().propc.scribbler_serial_send_text=function(){_().propc.setups_.s3_serial_baud="simpleterm_reopen(31,30,0,9600);";return'print("'+this.getFieldValue("MESSAGE_TEXT").replace(/"/g,'\\"').replace(/%/g,"%%")+'");\n'},_().Blocks.scribbler_serial_send_char={init:function(){this.appendValueInput("CHAR_VALUE").appendField(new(_().FieldDropdown)([["Terminal","T"],["WX module","W"],["XBee","X"]]),"OUTPUT").appendField("send character").setCheck("Number"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("protocols")),this.setHelpUrl(_().MSG_S3_COMMUNICATE_HELPURL),this.setTooltip(_().MSG_S3_SERIAL_SEND_CHAR_TOOLTIP)}},_().propc.scribbler_serial_send_char=function(){_().propc.setups_.s3_serial_baud="simpleterm_reopen(31,30,0,9600);";return'print("%c", '+_().propc.valueToCode(this,"CHAR_VALUE",_().propc.ORDER_ATOMIC)+");\n"},_().Blocks.scribbler_serial_send_decimal={init:function(){this.appendValueInput("DECIMAL_VALUE").setCheck("Number").appendField(new(_().FieldDropdown)([["Terminal","T"],["WX module","W"],["XBee","X"]]),"OUTPUT").appendField("send number"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("protocols")),this.setHelpUrl(_().MSG_S3_COMMUNICATE_HELPURL),this.setTooltip(_().MSG_S3_SERIAL_SEND_DECIMAL_TOOLTIP)}},_().propc.scribbler_serial_send_decimal=function(){_().propc.setups_.s3_serial_baud="simpleterm_reopen(31,30,0,9600);";return'print("%d", '+(_().propc.valueToCode(this,"DECIMAL_VALUE",_().propc.ORDER_ATOMIC)||0)+");\n"},_().Blocks.scribbler_serial_send_ctrl={init:function(){this.appendDummyInput().appendField(new(_().FieldDropdown)([["Terminal","T"],["WX module","W"],["XBee","X"]]),"OUTPUT").appendField("send command").appendField(new(_().FieldDropdown)([["carriage return","13"],["new line","10"],["backspace","127"],["clear screen","256"]]),"SERIAL_CHAR"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(X.getColor("protocols")),this.setHelpUrl(_().MSG_S3_COMMUNICATE_HELPURL),this.setTooltip(_().MSG_S3_SERIAL_SEND_CTRL_TOOLTIP)}},_().propc.scribbler_serial_send_ctrl=function(){_().propc.setups_.s3_serial_baud="simpleterm_reopen(31,30,0,9600);";const e=this.getFieldValue("SERIAL_CHAR");return"256"===e?"term_cmd(CLS);\n":'print("%c", '+e+");\n"},_().Blocks.scribbler_serial_rx_byte={init:function(){this.setColour(X.getColor("protocols")),this.appendDummyInput("").appendField(new(_().FieldDropdown)([["Terminal","T"],["WX module","W"],["XBee","X"]]),"OUTPUT").appendField("receive character"),this.setOutput(!0,"Number"),this.setHelpUrl(_().MSG_S3_COMMUNICATE_HELPURL),this.setTooltip(_().MSG_S3_SERIAL_RX_BYTE_TOOLTIP)}},_().propc.scribbler_serial_rx_byte=function(){return _().propc.setups_.s3_serial_baud="simpleterm_reopen(31,30,0,9600);",["getChar()",_().propc.ORDER_ATOMIC]},_().Blocks.scribbler_serial_cursor_xy={init:function(){this.setColour(X.getColor("protocols")),this.appendValueInput("Y").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("Terminal set cursor position to row"),this.appendValueInput("X").setCheck("Number").setAlign(_().ALIGN_RIGHT).appendField("column"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setHelpUrl(_().MSG_S3_COMMUNICATE_HELPURL),this.setTooltip(_().MSG_S3_SERIAL_CURSOR_XY_TOOLTIP)}},_().propc.scribbler_serial_cursor_xy=function(){_().propc.setups_.s3_serial_baud="simpleterm_reopen(31,30,0,9600);";let e=_().propc.valueToCode(this,"Y",_().propc.ORDER_NONE),t=_().propc.valueToCode(this,"X",_().propc.ORDER_NONE);return Number(e)<0?e=0:Number(e)>255&&(e=255),Number(t)<0?t=0:Number(t)>255&&(t=255),"term_cmd(CRSRXY, "+t+", "+e+");\n"},_().Blocks.sirc_s3_get={helpUrl:_().MSG_S3_SIRC_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_S3_SCRIBBLER_SIRC_TOOLTIP);const t=[["Onboard IR sensor","SCRIBBLER_OBS_RX"]].concat(e.digital);this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Sony Remote value").appendField(new(_().FieldDropdown)(t),"PIN"),this.setInputsInline(!0),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number")}},_().propc.sirc_s3_get=function(){const e=this.getFieldValue("PIN");_().propc.definitions_.sirc='#include "sirc.h"',_().propc.setups_.sirc="sirc_setTimeout(70);";return["sirc_button("+e+")",_().propc.ORDER_ATOMIC]},_().Blocks.mic_s3_get={helpUrl:_().MSG_S3_MIC_HELPURL,init:function(){this.setTooltip(_().MSG_S3_SCRIBBLER_MIC_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("microphone volume detected"),this.setInputsInline(!0),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number")}},_().propc.mic_s3_get=function(){_().propc.setups_.s3_mic="s3_enableMic();";return["s3_readMic()",_().propc.ORDER_ATOMIC]},_().Blocks.s3_eeprom_read={helpUrl:_().MSG_S3_MEMORY_HELPURL,init:function(){this.setTooltip(_().MSG_S3_SCRIBBLER_MEMORY_READ_TOOLTIP),this.appendValueInput("ADDR").setCheck("Number").appendRange("R,0,7936,0").appendField("memory read from address"),this.setInputsInline(!0),this.setOutput(!0,"Number"),this.setColour(X.getColor("output"))}},_().propc.s3_eeprom_read=function(){return["s3_memoryRead("+_().propc.valueToCode(this,"ADDR",_().propc.ORDER_NONE)+")",_().propc.ORDER_ATOMIC]},_().Blocks.s3_eeprom_write={helpUrl:_().MSG_S3_MEMORY_HELPURL,init:function(){this.setTooltip(_().MSG_S3_SCRIBBLER_MEMORY_WRITE_TOOLTIP),this.appendValueInput("VALUE").setCheck("Number").appendField("memory write"),this.appendValueInput("ADDR").setCheck("Number").appendRange("R,0,7936,0").appendField("to address"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setInputsInline(!0),this.setColour(X.getColor("output"))}},_().propc.s3_eeprom_write=function(){const e=_().propc.valueToCode(this,"VALUE",_().propc.ORDER_NONE);return"s3_memoryWrite("+_().propc.valueToCode(this,"ADDR",_().propc.ORDER_NONE)+", "+e+");\n"},_().Blocks.calibrate_line_sensor={init:function(){this.setColour(X.getColor("input")),this.appendDummyInput().appendField("line sensor calibrate"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setHelpUrl(_().MSG_S3_LINE_HELPURL),this.setTooltip(_().MSG_S3_LINE_CALIBRATE_TOOLTIP)}},_().propc.calibrate_line_sensor=function(){let e="void s3_calibrate_line_sensor(void) {int __lineSenCal[4];\n__lineSenCal[0] = ";return e+="s3_lineSensor(S3_LEFT);\n__lineSenCal[1] = s3_lineSensor(S3_RIGHT);\n__lineSenCal[2] = ",e+="s3_lineSensor(S3_LEFT);\n__lineSenCal[3] = s3_lineSensor(S3_RIGHT);\n",e+="int __calibrate_timer = CNT + (CLKFREQ/1000) * 3672;\ns3_motorSet(75, -75, 0);",e+="\nwhile(CNT < __calibrate_timer) {int __tempLineSen = s3_lineSensor(S3_LEFT);\n",e+="if (__tempLineSen < __lineSenCal[0]) __lineSenCal[0] = __tempLineSen;\n",e+="if (__tempLineSen > __lineSenCal[2]) __lineSenCal[2] = __tempLineSen;\n",e+="__tempLineSen = s3_lineSensor(S3_RIGHT);\nif (__tempLineSen < __lineSenCal[1]) ",e+="__lineSenCal[1] = __tempLineSen;\nif (__tempLineSen > __lineSenCal[3]) ",e+="__lineSenCal[3] = __tempLineSen;}s3_motorSet(0, 0, 0);\n",e+="if (__lineSenCal[2] > __lineSenCal[0]) __lineSenCal[0] = __lineSenCal[2];\n",e+="if (__lineSenCal[3] < __lineSenCal[1]) __lineSenCal[1] = __lineSenCal[3];\n",e+="scribbler_set_line_threshold((__lineSenCal[0] + __lineSenCal[1]) / 2);\n",e+="scribbler_write_line_threshold();\n}",_().propc.methods_.s3_calibrate_line_sensor="void s3_calibrate_line_sensor(void) {int __lineSenCal[4];\n__lineSenCal[0] = s3_lineSensor(S3_LEFT);\n__lineSenCal[1] = s3_lineSensor(S3_RIGHT);\n__lineSenCal[2] = s3_lineSensor(S3_LEFT);\n__lineSenCal[3] = s3_lineSensor(S3_RIGHT);\nint __calibrate_timer = CNT + (CLKFREQ/1000) * 3672;\ns3_motorSet(75, -75, 0);\nwhile(CNT < __calibrate_timer) {int __tempLineSen = s3_lineSensor(S3_LEFT);\nif (__tempLineSen < __lineSenCal[0]) __lineSenCal[0] = __tempLineSen;\nif (__tempLineSen > __lineSenCal[2]) __lineSenCal[2] = __tempLineSen;\n__tempLineSen = s3_lineSensor(S3_RIGHT);\nif (__tempLineSen < __lineSenCal[1]) __lineSenCal[1] = __tempLineSen;\nif (__tempLineSen > __lineSenCal[3]) __lineSenCal[3] = __tempLineSen;}s3_motorSet(0, 0, 0);\nif (__lineSenCal[2] > __lineSenCal[0]) __lineSenCal[0] = __lineSenCal[2];\nif (__lineSenCal[3] < __lineSenCal[1]) __lineSenCal[1] = __lineSenCal[3];\nscribbler_set_line_threshold((__lineSenCal[0] + __lineSenCal[1]) / 2);\nscribbler_write_line_threshold();\n}",_().propc.method_declarations_.s3_calibrate_line_sensor="void s3_calibrate_line_sensor(void);","s3_calibrate_line_sensor();"};const j="/** WARNING: You must use a SD initialize block at the beginning of your program! **/\n",K="/** WARNING: You must use a SD file open block before reading, writing, or closing an SD file! **/\n";function q(){const e=x();e.sd_card&&(_().propc.setups_.sd_card="sd_mount("+e.sd_card+");",_().propc.global_vars_.fpglobal="FILE *fp;")}function $(){const e=[],t=_().getMainWorkspace().getBlocksByType("constant_define",!1);for(let n=0;n<t.length;n++)if(t[n].isEnabled()){const i=t[n].getFieldValue("CONSTANT_NAME");i&&e.push(i)}return e.sortedUnique()}function J(e){return _().getMainWorkspace().getBlocksByType(e,!1)}function Z(e){const t=J(e);let n=!1;return t.forEach((e=>{e.isEnabled()&&(n=!0)})),n}function Q(){return x().digital}_().Blocks.sd_init={helpUrl:_().MSG_SD_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_SD_INIT_TOOLTIP),this.setColour(X.getColor("output")),this.appendDummyInput().appendField("SD initialize DO").appendField(new(_().FieldDropdown)(e.digital),"DO").appendField("CLK").appendField(new(_().FieldDropdown)(e.digital),"CLK").appendField("DI").appendField(new(_().FieldDropdown)(e.digital),"DI").appendField("CS").appendField(new(_().FieldDropdown)(e.digital),"CS"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.sd_init=function(){return this.myType="fp",this.disabled||(_().propc.setups_.sd_card="sd_mount("+this.getFieldValue("DO")+", "+this.getFieldValue("CLK")+", "+this.getFieldValue("DI")+", "+this.getFieldValue("CS")+");",_().propc.global_vars_[this.myType+"global"]="FILE *"+this.myType+";"),""},_().Blocks.sd_open={helpUrl:_().MSG_SD_HELPURL,init:function(){this.setTooltip(_().MSG_SD_OPEN_TOOLTIP),this.setColour(X.getColor("output")),this.appendDummyInput("MODE").appendField("SD file open").appendField(new(_().FieldTextInput)("filename.txt",(function(e){if(e.length>0)return e;const t=(e=e.replace(/[^A-Z0-9a-z_.]/g,"").toLowerCase()).split(".");return t[0].length>8&&(t[0].length=8),t[1]?t[1].length>3&&(t[1].length=3):t[1]="TXT",t[0]+"."+t[1]})),"FILENAME").appendField(new(_().FieldDropdown)([["as read-only","r"],["as read-write","w"]]),"MODE"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:function(){const e=G();if("activity-board"!==e.boardType.name&&"heb-wx"!==e.boardType.name){const e=_().getMainWorkspace().getBlocksByType("sd_init",!1);0!==e.length&&e[0].isEnabled()?this.setWarningText(null):this.setWarningText("WARNING: You must use a SD initialize\nblock at the beginning of your program!")}}},_().propc.sd_open=function(){const e=_().getMainWorkspace().getBlocksByType("sd_init",!1);if(0===e.length||!e[0].isEnabled()){const e=G();if("activity-board"!==e.boardType.name&&"heb-wx"!==e.boardType.name)return K;q()}let t=`fp = fopen("${this.getFieldValue("FILENAME")}","${this.getFieldValue("MODE")}");\n`;return t},_().Blocks.sd_read={helpUrl:_().MSG_SD_HELPURL,init:function(){this.setTooltip(_().MSG_SD_READ_TOOLTIP),this.setColour(X.getColor("output")),this.setSdMode("fwrite"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("mode",this.getFieldValue("MODE")),e},domToMutation:function(e){const t=e.getAttribute("mode");t&&this.setFieldValue(t,"MODE"),this.setSdMode(t)},setSdMode:function(e){let t=null;if(this.getInput("SIZE")){const e=this.getInput("SIZE").connection;e&&(t=e.targetBlock()),this.removeInput("SIZE")}this.getInput("VALUE")&&this.removeInput("VALUE"),"fwrite"===e?(this.appendValueInput("SIZE").setCheck("Number").appendField("SD file").appendField(new(_().FieldDropdown)([["write","fwrite"],["read","fread"],["close","fclose"]],(function(e){this.getSourceBlock().setSdMode(e)})),"MODE"),this.appendValueInput("VALUE").setCheck("String").appendField("bytes of")):"fread"===e?(this.appendValueInput("SIZE").setCheck("Number").appendField("SD file").appendField(new(_().FieldDropdown)([["read","fread"],["write","fwrite"],["close","fclose"]],(function(e){this.getSourceBlock().setSdMode(e)})),"MODE"),this.appendDummyInput("VALUE").appendField("bytes  store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_SET_ITEM),"VAR")):this.appendDummyInput("SIZE").appendField("SD file").appendField(new(_().FieldDropdown)([["close","fclose"],["read","fread"],["write","fwrite"]],(function(e){this.getSourceBlock().setSdMode(e)})),"MODE"),t&&t.outputConnection.connect(this.getInput("SIZE").connection)},onchange:function(e){const t=G();if(e.type===_().Events.BLOCK_DELETE||e.type===_().Events.BLOCK_CREATE){let e=null;const n=_().getMainWorkspace().getAllBlocks(!1).toString();-1===n.indexOf("SD file open")?e="WARNING: You must use a SD file open block\nbefore reading, writing, or closing an SD file!":-1===n.indexOf("SD initialize")&&"heb-wx"!==t.boardType.name&&"activity-board"!==t.boardType.name&&(e="WARNING: You must use a SD initialize\nblock at the beginning of your program!"),this.setWarningText(e)}}},_().propc.sd_read=function(){const e=this.getFieldValue("MODE");if("fclose"===e)return`if(fp) {\n  ${e}(fp);\n  fp = 0;\n}\n`;const t=_().getMainWorkspace().getBlocksByType("sd_open",!1);if(0===t.length||!t[0].isEnabled())return K;const n=G();let i=!1;const o=_().getMainWorkspace().getBlocksByType("sd_init",!1);if(o.length>0&&o[0].isEnabled()&&(i=!0),"heb-wx"!==n.boardType.name&&"activity-board"!==n.boardType.name&&!i)return j;this.disabled||i||q();const s=_().propc.valueToCode(this,"SIZE",_().propc.ORDER_NONE)||"1";let l="";if("fread"===e)l=_().propc.variableDB_.getName(this.getFieldValue("VAR"),_().VARIABLE_CATEGORY_NAME),l="&"+l,_().propc.vartype_[l]="char *";else if("fwrite"===e)return l=_().propc.valueToCode(this,"VALUE",_().propc.ORDER_NONE)||"",`${e}(&${l}, 1, ${s}, fp);\n`;return`${e}(${l}, 1, ${s}, fp);\n`},_().Blocks.sd_file_pointer={helpUrl:_().MSG_SD_HELPURL,init:function(){this.setTooltip(_().MSG_SD_FILE_POINTER_TOOLTIP),this.setColour(X.getColor("output")),this.setSdMode("set"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},mutationToDom:_().Blocks.sd_read.mutationToDom,domToMutation:_().Blocks.sd_read.domToMutation,setSdMode:function(e){this.getInput("FP")&&this.removeInput("FP"),"set"===e?(this.appendValueInput("FP").setCheck("Number").appendField("SD file").appendField(new(_().FieldDropdown)([["set","set"],["get","get"]],(function(e){this.getSourceBlock().setSdMode(e)})),"MODE").appendField("pointer = "),this.setOutput(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)):(this.appendDummyInput("FP"),this.getInput("FP").appendField("SD file").appendField(new(_().FieldDropdown)([["get","get"],["set","set"]],(function(e){this.getSourceBlock().setSdMode(e)})),"MODE").appendField("pointer"),this.setPreviousStatement(!1),this.setNextStatement(!1,null),this.setOutput(!0,"Number"))},onchange:_().Blocks.sd_read.onchange},_().propc.sd_file_pointer=function(){const e=G(),t=_().getMainWorkspace().getAllBlocks(!1).toString();let n=null,i=!1;for(let e=0;e<t.length;e++)"sd_init"===t[e].type&&(i=!0);if(this.disabled||i||q(),-1===t.indexOf("SD file open"))return"// WARNING: You must use a SD file open block before using the file pointer!\n";if(-1===t.indexOf("SD initialize")&&"heb-wx"!==e.boardType.name&&"activity-board"!==e.boardType.name)return j;if("set"===this.getFieldValue("MODE")){n=`fseek(fp, ${_().propc.valueToCode(this,"FP",_().propc.ORDER_NONE)||"0"}, SEEK_SET);\n`}else n=["ftell(fp)",_().propc.ORDER_ATOMIC];return n},_().Blocks.sd_close={helpUrl:_().MSG_SD_HELPURL,init:function(){this.appendDummyInput().appendField("SD file close"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setColour(165),this.setTooltip(_().MSG_SD_CLOSE_TOOLTIP)}},_().propc.sd_close=function(){let e=!1;const t=_().getMainWorkspace().getBlocksByType("sd_init",!1);t.length>0&&t[0].isEnabled()&&(e=!0);const n=G();return"heb-wx"===n.boardType.name||"activity-board"===n.boardType.name||e?(this.disabled||e||q(),"if(fp) {\n  fclose(fp);\n  fp = 0;\n}\n"):j},_().Blocks.sd_file_exists={helpUrl:_().MSG_SD_HELPURL,init:function(){this.setTooltip(_().MSG_SD_OPEN_TOOLTIP),this.setColour(X.getColor("output")),this.appendDummyInput("FILE").appendField("SD file exists").appendField(new(_().FieldTextInput)("filename.txt",(function(e){if(e.length>0)return e;const t=(e=e.replace(/[^A-Z0-9a-z_.]/g,"").toLowerCase()).split(".");return t[0].length>8&&(t[0].length=8),t[1]?t[1].length>3&&(t[1].length=3):t[1]="TXT",t[0]+"."+t[1]})),"FILENAME"),this.setInputsInline(!1),this.setOutput(!0,"Number")}},_().propc.sd_file_exists=function(){const e=this.getFieldValue("FILENAME");let t="int file_exists(char *name) {\n\t";t+="FILE *p;\n\t",t+="int result = 0;\n\t",t+='p = fopen(name,"r");\n\t',t+="if (NULL != p) {\n\t\t",t+="result = 1;\n\t\t",t+="fclose(p);\n\t\t",t+="p = 0;\n\t}\n\t",t+="return result;\n",t+="}\n",_().propc.method_declarations_.file_exists="int file_exists();\n",_().propc.methods_.file_exists='int file_exists(char *name) {\n\tFILE *p;\n\tint result = 0;\n\tp = fopen(name,"r");\n\tif (NULL != p) {\n\t\tresult = 1;\n\t\tfclose(p);\n\t\tp = 0;\n\t}\n\treturn result;\n}\n';return[`(int) file_exists("${e}");`,_().propc.ORDER_ATOMIC]},_().Blocks.bme680_init={helpUrl:_().MSG_BME680_HELPURL,init:function(){this.setTooltip(_().MSG_BME680_INIT_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput("PINS"),this.setInputsInline(!1),this.setNextStatement(!0,null),this.setPreviousStatement(!0,"Block"),this.userDefinedConstantsList_=$(),this.setPinMenus()},setPinMenus:function(e="",t=""){const n=x(),i=["PIN_CLK","PIN_SDI","PIN_SDO","PIN_CS"],o=[this.getFieldValue("PIN_CLK"),this.getFieldValue("PIN_SDI"),this.getFieldValue("PIN_SDO"),this.getFieldValue("PIN_CS")];this.getInput("PINS")&&this.removeInput("PINS");const s=this.userDefinedConstantsList_.map((function(e){return[e,e]}));this.appendDummyInput("PINS").appendField("Air Quality initialize SCK").appendField(new(_().FieldDropdown)(n.digital.concat(s)),"PIN_CLK").appendField("SDI").appendField(new(_().FieldDropdown)(n.digital.concat(s)),"PIN_SDI").appendField("SDO").appendField(new(_().FieldDropdown)(n.digital.concat(s)),"PIN_SDO").appendField("CS").appendField(new(_().FieldDropdown)(n.digital.concat(s)),"PIN_CS");for(let n=0;n<4;n++)o[n]&&o[n]===e&&t?this.setFieldValue(t,i[n]):o[n]&&this.setFieldValue(o[n],i[n])}},_().propc.bme680_init=function(){const e=x(),t=[this.getFieldValue("PIN_CLK"),this.getFieldValue("PIN_SDI"),this.getFieldValue("PIN_SDO"),this.getFieldValue("PIN_CS")];for(let n=0;n<3;n++)-1===e.digital.toString().indexOf(t[n]+","+t[n])&&(t[n]="MY_"+t[n]);return this.disabled||(_().propc.definitions_.include_bme680='#include "bme680.h"',_().propc.setups_.init_bme680="gas_sensor = bme680_openSPI("+t.join(", ")+");\n",_().propc.global_vars_.device_bme680="bme680 *gas_sensor;\n"),""},_().Blocks.bme680_read={helpUrl:_().MSG_BME680_HELPURL,init:function(){this.setTooltip(_().MSG_BME680_READ_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Air Quality read"),this.setInputsInline(!1),this.setNextStatement(!0,null),this.setPreviousStatement(!0,"Block")},onchange:function(){Z("bme680_init")?this.setWarningText(null):this.setWarningText("WARNING: You must use an Air Quality\ninitialize block at the beginning of your program!")}},_().propc.bme680_read=function(){let e="";return Z("bme680_init")?e+="bme680_readSensor(gas_sensor);\n":e+="// ERROR: Missing Air Quality initialize block!\n",e},_().Blocks.bme680_heater={helpUrl:_().MSG_BME680_HELPURL,init:function(){this.setTooltip(_().MSG_BME680_HEATER),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Air Quality heater").appendField(new(_().FieldDropdown)([["disable","Disable"],["enable","Enable"]]),"HEAT_STATE"),this.setInputsInline(!1),this.setNextStatement(!0,null),this.setPreviousStatement(!0,"Block")},onchange:function(){Z("bme680_init")?this.setWarningText(null):this.setWarningText("WARNING: You must use an Air Quality\ninitialize block at the beginning of your program!")}},_().propc.bme680_heater=function(){let e="";return Z("bme680_init")?e+=`bme680_heater${this.getFieldValue("HEAT_STATE")}(gas_sensor);\n`:e+="// ERROR: Missing Air Quality initialize block!\n",e},_().Blocks.bme680_get_value={helpUrl:_().MSG_BME680_HELPURL,init:function(){this.measUnits={temperature:[["in °C","CELSIUS"],["in °F","FAHRENHEIT"],["in Kelvin","KELVIN"]],pressure:[["in pascals","PASCALS"],["in mmHg","MMHG"],["in inHg","INHG"],["in PSI","PSI"]],humidity:[["in %"," "]],gasResistance:[["in Ω"," "]],altitude:[["in meters","METERS"],["in feet","FEET"]]},this.setTooltip(_().MSG_BME680_GET_VALUE_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Air Quality").appendField(new(_().FieldDropdown)([["Temperature","temperature"],["Pressure","pressure"],["Altitude Estimate","altitude"],["Gas Sensor Resistance","gasResistance"],["Relative Humidity","humidity"]],(function(e){this.getSourceBlock().setMeasUnit(e)})),"SENSOR"),this.appendDummyInput("UNITS").appendField(new(_().FieldDropdown)(this.measUnits.temperature),"UNIT"),this.appendDummyInput("MULTIPLIER").appendField(new(_().FieldDropdown)([["✕ 1"," "],["✕ 10","*10.0"],["✕ 100","*100.0"],["✕ 1000","*1000.0"],["✕ 10000","*10000.0"]]),"MULT"),this.setInputsInline(!0),this.setNextStatement(!1,null),this.setPreviousStatement(!1,null),this.setOutput(!0,"Number")},setMeasUnit:function(e){this.removeInput("UNITS"),"humidity"===e?this.appendDummyInput("UNITS").appendField("%"):"gasResistance"===e?this.appendDummyInput("UNITS").appendField("Ω"):this.appendDummyInput("UNITS").appendField(new(_().FieldDropdown)(this.measUnits[e]),"UNIT"),this.moveInputBefore("UNITS","MULTIPLIER")},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("sensor",this.getFieldValue("SENSOR")),e},domToMutation:function(e){const t=e.getAttribute("sensor");t&&this.setMeasUnit(t)},onchange:function(){Z("bme680_init")?this.setWarningText(null):this.setWarningText("WARNING: You must use an Air Quality\ninitialize block at the beginning of your program!")}},_().propc.bme680_get_value=function(){let e="";if(Z("bme680_init")){const t=this.getFieldValue("SENSOR"),n=this.getFieldValue("MULT")||"";let i=this.getFieldValue("UNIT")||"";i.length>2&&(i=", "+i),e+=`(int)(bme680_${t}(gas_sensor${i})${n})`}else e+="0;// ERROR: Missing Air Quality initialize block!\n";return[e,_().propc.ORDER_ATOMIC]},_().Blocks.colorpal_enable={helpUrl:_().MSG_COLORPAL_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_COLORPAL_ENABLE_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("ColorPal initialize PIN").appendField(new(_().FieldDropdown)(e.digital,(function(e){this.getSourceBlock().onPinSet(e)})),"IO_PIN"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.colorPalPin=this.getFieldValue("IO_PIN"),this.onPinSet()},onchange:function(e){this.colorPalPin=this.getFieldValue("IO_PIN"),!e||e.type!=_().Events.BLOCK_CREATE&&e.type!=_().Events.BLOCK_DELETE||this.onPinSet(null)},onPinSet:function(e){const t=this.colorPalPin;this.colorPalPin=e;const n=_().getMainWorkspace().getAllBlocks();for(let i=0;i<n.length;i++){const o=n[i].colorpalPins,s=n[i].onchange;o&&e?(o.call(n[i],t,e),s&&s.call(n[i],{xml:!0})):o&&o.call(n[i])}}},_().propc.colorpal_enable=function(){const e=this.getFieldValue("IO_PIN");return this.disabled||(_().propc.definitions_.colorpal='#include "colorpal.h"',_().propc.global_vars_["colorpal"+e]="colorPal *cpal"+e+";",_().propc.setups_["colorpal"+e]="cpal"+e+" = colorPal_open("+e+");"),""},_().Blocks.colorpal_get_colors_raw={helpUrl:_().MSG_COLORPAL_HELPURL,init:function(){this.setTooltip(_().MSG_COLORPAL_GET_COLORS_RAW_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("ColorPal raw colors store R in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"R_STORAGE"),this.appendDummyInput().appendField("G in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"G_STORAGE"),this.appendDummyInput().appendField("B in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"B_STORAGE"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.cp_pins=[],this.warnFlag=0,this.colorpalPins()},mutationToDom:function(){const e=document.createElement("mutation");return this.getInput("CPIN")&&e.setAttribute("cpin",this.getFieldValue("CP_PIN")),e.setAttribute("pinmenu",JSON.stringify(this.cp_pins)),e},domToMutation:function(e){let t=e.getAttribute("cpin");this.cp_pins=JSON.parse(e.getAttribute("pinmenu")),Array.isArray(this.cp_pins)&&(this.cp_pins=this.cp_pins.map((function(e){return e[0]}))),"null"===t&&(t=null),this.getInput("CPIN")&&this.removeInput("CPIN"),t&&(this.appendDummyInput("CPIN").appendField("PIN").appendField(new(_().FieldDropdown)(this.cp_pins.map((function(e){return[e,e]}))),"CP_PIN"),this.setFieldValue(t,"CP_PIN"))},colorpalPins:function(e,t){let n="-1";this.cp_pins.length>0&&(n=this.cp_pins[0]),this.cp_pins.length=0,this.getInput("CPIN")&&(n=this.getFieldValue("CP_PIN")),this.updateCpin(),this.getInput("CPIN")&&this.removeInput("CPIN"),this.cp_pins.length>1&&(this.appendDummyInput("CPIN").appendField("PIN").appendField(new(_().FieldDropdown)(this.cp_pins.map((function(e){return[e,e]}))),"CP_PIN"),n===e||null===e?this.setFieldValue(t,"CP_PIN"):this.getInput("CPIN")&&"-1"!==n&&this.setFieldValue(n,"CP_PIN"))},updateCpin:function(){const e=_().getMainWorkspace().getAllBlocks();this.cp_pins.length=0;for(let t=0;t<e.length;t++)if("colorpal_enable"===e[t].type){const n=e[t].colorPalPin||e[t].getFieldValue("IO_PIN");n&&this.cp_pins.push(n)}this.cp_pins=this.cp_pins.sortedUnique()},onchange:function(e){if(e&&(e.type==_().Events.BLOCK_CREATE||e.type==_().Events.BLOCK_DELETE||"CP_PIN"===e.name&&e.blockId===this.id||this.warnFlag>0)){const e=_().getMainWorkspace().getAllBlocks();if(-1===e.toString().indexOf("ColorPal initialize"))this.setWarningText("WARNING: You must use a ColorPal\ninitialize block at the beginning of your program!");else if(this.setWarningText(null),this.warnFlag--,this.getInput("CPIN")){let t="";for(let n=0;n<e.length;n++)"colorpal_enable"===e[n].type&&(t+=(e[n].colorPalPin||e[n].getFieldValue("IO_PIN"))+",");-1===t.indexOf(this.getFieldValue("CP_PIN"))&&(this.setWarningText("WARNING: You must use choose a new PIN for this block!"),this.warnFlag=3*e.length)}}}},_().propc.colorpal_get_colors_raw=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("ColorPal initialize"))return"// ERROR: Missing colorPal initialize block!";{const e=_().propc.variableDB_.getName(this.getFieldValue("R_STORAGE"),_().VARIABLE_CATEGORY_NAME),t=_().propc.variableDB_.getName(this.getFieldValue("G_STORAGE"),_().VARIABLE_CATEGORY_NAME),n=_().propc.variableDB_.getName(this.getFieldValue("B_STORAGE"),_().VARIABLE_CATEGORY_NAME);let i="0";return this.cp_pins.length>0&&(i=this.cp_pins[0]),this.getInput("CPIN")&&(i=this.getFieldValue("CP_PIN")),"colorPal_getRGB(cpal"+i+", &"+e+", &"+t+", &"+n+");"}},_().Blocks.colorpal_get_colors={helpUrl:_().MSG_COLORPAL_HELPURL,init:function(){this.setTooltip(_().MSG_COLORPAL_GET_COLORS_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("ColorPal store color in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"COLOR"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.cp_pins=[],this.warnFlag=0,this.colorpalPins()},mutationToDom:function(){const e=document.createElement("mutation");return this.getInput("CPIN")&&e.setAttribute("cpin",this.getFieldValue("CP_PIN")),e.setAttribute("pinmenu",JSON.stringify(this.cp_pins)),e},domToMutation:function(e){let t=e.getAttribute("cpin");this.cp_pins=JSON.parse(e.getAttribute("pinmenu")),Array.isArray(this.cp_pins)&&(this.cp_pins=this.cp_pins.map((function(e){return e[0]}))),"null"===t&&(t=null),this.getInput("CPIN")&&this.removeInput("CPIN"),t&&(this.appendDummyInput("CPIN").appendField("PIN").appendField(new(_().FieldDropdown)(this.cp_pins.map((function(e){return[e,e]}))),"CP_PIN"),this.setFieldValue(t,"CP_PIN"))},colorpalPins:function(e,t){let n="-1";this.cp_pins.length>0&&(n=this.cp_pins[0]),this.cp_pins.length=0,this.getInput("CPIN")&&(n=this.getFieldValue("CP_PIN")),this.updateCpin(),this.getInput("CPIN")&&this.removeInput("CPIN"),this.cp_pins.length>1&&(this.appendDummyInput("CPIN").appendField("PIN").appendField(new(_().FieldDropdown)(this.cp_pins.map((function(e){return[e,e]}))),"CP_PIN"),n===e||null===e?this.setFieldValue(t,"CP_PIN"):this.getInput("CPIN")&&"-1"!==n&&this.setFieldValue(n,"CP_PIN"))},updateCpin:function(){const e=_().getMainWorkspace().getAllBlocks();this.cp_pins.length=0;for(let t=0;t<e.length;t++)if("colorpal_enable"===e[t].type){const n=e[t].colorPalPin||e[t].getFieldValue("IO_PIN");n&&this.cp_pins.push(n)}this.cp_pins=this.cp_pins.sortedUnique()},onchange:function(e){if(e&&(e.type==_().Events.BLOCK_CREATE||e.type==_().Events.BLOCK_DELETE||"CP_PIN"===e.name&&e.blockId===this.id||this.warnFlag>0)){const e=_().getMainWorkspace().getAllBlocks();if(-1===e.toString().indexOf("ColorPal initialize"))this.setWarningText("WARNING: You must use a ColorPal\ninitialize block at the beginning of your program!");else if(this.setWarningText(null),this.warnFlag--,this.getInput("CPIN")){let t="";for(let n=0;n<e.length;n++)"colorpal_enable"===e[n].type&&(t+=(e[n].colorPalPin||e[n].getFieldValue("IO_PIN"))+",");-1===t.indexOf(this.getFieldValue("CP_PIN"))&&(this.setWarningText("WARNING: You must use choose a new PIN for this block!"),this.warnFlag=3*e.length)}}}},_().propc.colorpal_get_colors=function(){if(-1===_().getMainWorkspace().getAllBlocks(!1).toString().indexOf("ColorPal initialize"))return"// ERROR: Missing colorPal initialize block!";{const e=_().propc.variableDB_.getName(this.getFieldValue("COLOR"),_().VARIABLE_CATEGORY_NAME);this.disabled||(_().propc.global_vars_.colorpal_rr="int cpRR = 0;",_().propc.global_vars_.colorpal_gg="int cpGG = 0;",_().propc.global_vars_.colorpal_bb="int cpBB = 0;");let t="0";return this.cp_pins.length>0&&(t=this.cp_pins[0]),this.getInput("CPIN")&&(t=this.getFieldValue("CP_PIN")),"colorPal_getRGB(cpal"+t+", &cpRR, &cpGG, &cpBB);\n\t"+e+" = colorPalRRGGBB(cpRR, cpGG, cpBB);"}},_().Blocks.dht22_read={helpUrl:_().MSG_TEMPERATURE_HELPURL,init:function(){this.setTooltip(_().MSG_DHT22_READ_TOOLTIP),this.setColour(X.getColor("input")),this.pinChoices=["PIN"],this.otherPin=[!1],this.addPinMenu("Temp & Humidity read PIN",!1,0),this.setPreviousStatement(!0,"Block"),this.setInputsInline(!0),this.setNextStatement(!0,null)},addPinMenu:function(e,t,n){const i=x();this.appendDummyInput("SET_PIN").appendField(e,"LABEL").appendField(new(_().FieldDropdown)(i.digital.concat([["other","other"]]),(function(e){this.getSourceBlock().setToOther(e,t,n)})),this.pinChoices[n]),this.moveBefore=t,this.otherPin[n]=!1},setToOther:function(e,t,n){if("other"===e){const e=x();this.otherPin[n]=!0;const i=this.getFieldValue("LABEL");if(this.getInput("SET_PIN")&&this.removeInput("SET_PIN"),this.appendValueInput(this.pinChoices[n]).appendField(i).setCheck("Number").appendRange("A,"+e.digital.toString()),t)this.moveInputBefore(this.pinChoices[n],t);else{const e=this;setTimeout((function(){e.render()}),200)}}},mutationToDom:function(){const e=document.createElement("mutation");for(let t=0;t<this.pinChoices.length;t++)e.setAttribute("otherpin"+t,this.otherPin[t].toString());return e},domToMutation:function(e){for(let t=0;t<this.pinChoices.length;t++){"true"===e.getAttribute("otherpin"+t)&&this.setToOther("other",this.moveBefore,t)}}},_().propc.dht22_read=function(){let e;return this.disabled||(_().propc.definitions_.dht22='#include "dht22.h"'),e=this.otherPin[0]?_().propc.valueToCode(this,this.pinChoices[0],_().propc.ORDER_ATOMIC)||"0":this.getFieldValue(this.pinChoices[0]),"dht22_read("+e+");"},_().Blocks.dht22_value={helpUrl:_().MSG_TEMPERATURE_HELPURL,init:function(){this.setTooltip(_().MSG_DHT22_VALUE_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Temp & Humidity").appendField(new(_().FieldDropdown)([["temperature (°F)","Temp,FAHRENHEIT"],["temperature (°C)","Temp,CELSIUS"],["temperature (Kelvin)","Temp,KELVIN"],["relative humidity (%)","Humidity,"]]),"ACTION").appendField("✕ 10"),this.setInputsInline(!1),this.setOutput(!0,"Number")}},_().propc.dht22_value=function(){this.disabled||(_().propc.definitions_.dht22='#include "dht22.h"');const e=this.getFieldValue("ACTION").split(",");return["dht22_get"+e[0]+"("+e[1]+")",_().propc.ORDER_ATOMIC]},_().Blocks.fp_scanner_init={helpUrl:_().MSG_FPS_HELPURL,init:function(){this.setTooltip(_().MSG_FPS_INIT_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput("PINS"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.userDefinedConstantsList_=$(),this.setPinMenus()},onchange:function(e){if("change"===e.type&&"CONSTANT_NAME"===e.name&&this.getFieldValue("PIN")===e.oldValue){const t=this.userDefinedConstantsList_.indexOf(e.oldValue);-1!==t&&(this.userDefinedConstantsList_[t]=e.newValue,this.setPinMenus(e.oldValue,e.newValue))}},setPinMenus:function(e,t){const n=x(),i=this.getFieldValue("RXPIN"),o=this.getFieldValue("TXPIN");this.getInput("PINS")&&this.removeInput("PINS"),this.appendDummyInput().appendField("Fingerprint Scanner initialize RX").appendField(new(_().FieldDropdown)(n.digital.concat(this.userDefinedConstantsList_.map((function(e){return[e,e]})))),"RXPIN").appendField("TX").appendField(new(_().FieldDropdown)(n.digital.concat(this.userDefinedConstantsList_.map((function(e){return[e,e]})))),"TXPIN"),i&&i===e&&t?this.setFieldValue(t,"RXPIN"):i&&this.setFieldValue(i,"RXPIN"),o&&o===e&&t?this.setFieldValue(t,"TXPIN"):o&&this.setFieldValue(o,"TXPIN")}},_().propc.fp_scanner_init=function(){if(this.disabled)return"";const e=x();let t=this.getFieldValue("RXPIN"),n=this.getFieldValue("TXPIN");return-1===e.digital.toString().indexOf(t+","+t)&&(t=`MY_${t}`),-1===e.digital.toString().indexOf(n+","+n)&&(n=`MY_${n}`),_().propc.global_vars_.fpScannerObj="fpScanner *fpScan;",_().propc.definitions_.fpScannerDef='#include "fingerprint.h"',_().propc.setups_.fpScanner=`fpScan = fingerprint_open(${n}, ${t});`,""},_().Blocks.fp_scanner_add={helpUrl:_().MSG_FPS_HELPURL,init:function(){this.setTooltip(_().MSG_FPS_ADD_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Fingerprint Scanner").appendField(new(_().FieldDropdown)([["capture and save to","ADD"],["delete capture for","DEL"],["delete all captures","ALL"]],(function(e){this.getSourceBlock().setAction_({ACTION:e})})),"ACTION"),this.appendValueInput("USER").setCheck("Number").appendField("ID"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},mutationToDom:function(){const e=document.createElement("mutation"),t=this.getFieldValue("ACTION");return e.setAttribute("action",t),e},domToMutation:function(e){const t=e.getAttribute("action");this.setAction_({ACTION:t})},setAction_:function(e){const t=this.getInput("USER");"ALL"!==e.ACTION?t||this.appendValueInput("USER").setCheck("Number").appendField("ID"):t&&this.removeInput("USER")},onchange:function(){Z("fp_scanner_init")?this.setWarningText(null):this.setWarningText("WARNING: You must use a Fingerprint Scanner\ninitialize block at the beginning of your program!")}},_().propc.fp_scanner_add=function(){const e=this.getFieldValue("ACTION");let t="1";return"ALL"!==e&&(t=_().propc.valueToCode(this,"USER",_().propc.ORDER_NONE)||"1"),Z("fp_scanner_init")?"ADD"===e?"fingerprint_add(fpScan, "+t+", 3, 0);\n":"DEL"===e?"fingerprint_deleteUser(fpScan, "+t+");\n":"ALL"===e?"fingerprint_deleteUser(fpScan, 0);\n":"// Finger print scanner add - unknown action.\n ":"// ERROR: Fingerprint Scanner is not initialized!\n"},_().Blocks.fp_scanner_scan={helpUrl:_().MSG_FPS_HELPURL,init:function(){this.setTooltip(_().MSG_FPS_SCAN_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Fingerprint Scanner").appendField(new(_().FieldDropdown)([["scan and identify","SCAN"],["scan and compare","COMP"],["count number of IDs","COUNT"]],(function(e){this.getSourceBlock().setAction_({ACTION:e})})),"ACTION"),this.setInputsInline(!0),this.setOutput(!0,"Number")},mutationToDom:function(){const e=document.createElement("mutation"),t=this.getFieldValue("ACTION");return e.setAttribute("action",t),e},domToMutation:function(e){const t=e.getAttribute("action");this.setAction_({ACTION:t})},setAction_:function(e){const t=this.getInput("USER");"COMP"===e.ACTION?t||this.appendValueInput("USER").setCheck("Number").appendField("to ID"):t&&this.removeInput("USER")},onchange:function(){Z("fp_scanner_init")?this.setWarningText(null):this.setWarningText("WARNING: You must use a Fingerprint Scanner\ninitialize block at the beginning of your program!")}},_().propc.fp_scanner_scan=function(){const e=this.getFieldValue("ACTION");let t="1";"COMP"===e&&(t=_().propc.valueToCode(this,"USER",_().propc.ORDER_NONE)||"1");let n="\n// Scan finger input\nint fingerScanner(int __u) {\n";n+="  int r;\n  fingerprint_scan(fpScan, __u, &r);\n",n+="  return (__u != 0 && r != 0) ? 1 : r;\n}\n";let i="0";return"fpScanner *fpScan;"===_().propc.global_vars_.fpScannerObj&&("SCAN"===e&&(_().propc.global_vars_.fpScannerFunc=n,i="fingerScanner(0)"),"COMP"===e&&(_().propc.global_vars_.fpScannerFunc=n,i="fingerScanner("+t+")"),"COUNT"===e&&(i="fingerprint_countUsers(fpScan)")),Z("fp_scanner_init")?[i,_().propc.ORDER_ATOMIC]:["// ERROR: Fingerprint Scanner is not initialized!\n",_().propc.ORDER_ATOMIC]},_().Blocks.GPS_init={helpUrl:_().MSG_GPS_HELPURL,init:function(){this.setTooltip(_().MSG_GPS_INIT_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput("PINS"),this.setNextStatement(!0,null),this.setPreviousStatement(!0,"Block"),this.userDefinedConstantsList_=$(),this.setPinMenus()},setPinMenus:function(e="",t=""){const n=x(),i=this.getFieldValue("TXPIN"),o=this.getFieldValue("BAUD");this.getInput("PINS")&&this.removeInput("PINS"),this.appendDummyInput("PINS").appendField("GPS module initialize TX").appendField(new(_().FieldDropdown)(n.digital.concat(this.userDefinedConstantsList_.map((function(e){return[e,e]})))),"TXPIN").appendField("baud").appendField(new(_().FieldDropdown)([["9600","9600"],["2400","2400"],["4800","4800"],["19200","19200"]]),"BAUD"),this.setFieldValue(o,"BAUD"),i&&i===e&&t?this.setFieldValue(t,"TXPIN"):i&&this.setFieldValue(i,"TXPIN")}},_().propc.GPS_init=function(){const e=x();let t=this.getFieldValue("TXPIN");-1===e.digital.toString().indexOf(t+","+t)&&(t="MY_"+t);const n=this.getFieldValue("BAUD");return this.disabled||(_().propc.definitions_["include GPS"]='#include "gps.h"'),"gps_open("+t+", 32, "+n+");\npause(100);"},_().Blocks.GPS_hasFix={helpUrl:_().MSG_GPS_HELPURL,init:function(){this.setTooltip(_().MSG_GPS_HASFIX_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("GPS has valid satellite fix"),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)},onchange:function(){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.GPS_hasFix=function(){return-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?"// ERROR: Missing GPS initialize block!":["gps_fixValid()",_().propc.ORDER_ATOMIC]},_().Blocks.GPS_latitude={helpUrl:_().MSG_GPS_HELPURL,init:function(){this.setTooltip(_().MSG_GPS_LAT_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("GPS latitude (µ°)"),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)},onchange:function(){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.GPS_latitude=function(){return-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?"// ERROR: Missing GPS initialize block!":["(int) (gps_latitude() * 1000000)",_().propc.ORDER_ATOMIC]},_().Blocks.GPS_longitude={helpUrl:_().MSG_GPS_HELPURL,init:function(){this.setTooltip(_().MSG_GPS_LONG_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("GPS longitude (µ°)"),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)},onchange:function(){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.GPS_longitude=function(){_().propc.definitions_["include GPS"]='#include "gps.h"';return["(int) (gps_longitude() * 1000000)",_().propc.ORDER_ATOMIC]},_().Blocks.GPS_heading={helpUrl:_().MSG_GPS_HELPURL,init:function(){this.setTooltip(_().MSG_GPS_HEADING_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("GPS heading (°)"),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)},onchange:function(){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.GPS_heading=function(){return-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?"// ERROR: Missing GPS initialize block!":["(int) gps_heading()",_().propc.ORDER_ATOMIC]},_().Blocks.GPS_altitude={helpUrl:_().MSG_GPS_HELPURL,init:function(){this.setTooltip(_().MSG_GPS_ALTITUDE_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("GPS altitude (cm)"),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)},onchange:function(){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.GPS_altitude=function(){return-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?"// ERROR: Missing GPS initialize block!":["(int) (gps_altitude() * 100)",_().propc.ORDER_ATOMIC]},_().Blocks.GPS_satsTracked={helpUrl:_().MSG_GPS_HELPURL,init:function(){this.setTooltip(_().MSG_GPS_SATS_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("GPS number of satellites"),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)},onchange:function(){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.GPS_satsTracked=function(){return-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?"// ERROR: Missing GPS initalize block!":["gps_satsTracked()",_().propc.ORDER_ATOMIC]},_().Blocks.GPS_velocity={helpUrl:_().MSG_GPS_HELPURL,init:function(){this.setTooltip(_().MSG_GPS_VELOCITY_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("GPS speed in").appendField(new(_().FieldDropdown)([["mph","MPH"],["knots","KNOTS"]]),"VELOCITYUNITS"),this.setOutput(!0,"Number"),this.setNextStatement(!1,null),this.setPreviousStatement(!1,null)},onchange:function(){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.GPS_velocity=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize"))return"// ERROR: Missing GPS initalize block!";return["(int) gps_velocity("+this.getFieldValue("VELOCITYUNITS")+")",_().propc.ORDER_ATOMIC]},_().Blocks.GPS_date_time={helpUrl:_().MSG_GPS_HELPURL,init:function(){this.setTooltip(_().MSG_GPS_VELOCITY_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("GPS current ").appendField(new(_().FieldDropdown)([["year","GPS_UNIT_YEAR"],["month","GPS_UNIT_MONTH"],["day","GPS_UNIT_DAY"],["hour","GPS_UNIT_HOUR"],["minute","GPS_UNIT_MINUTE"],["second","GPS_UNIT_SECOND"]],(function(e){this.getSourceBlock().updateShape_(e)})),"TIME_UNIT"),this.setOutput(!0,"Number"),this.setNextStatement(!1,null),this.setPreviousStatement(!1,null),this.setInputsInline(!0)},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("unit",this.getFieldValue("TIME_UNIT")),e},domToMutation:function(e){this.timeZones=[["UTC+0","0"]];for(let e=-1;0!=e;e--)e<-12&&(e=14),this.timeZones.push(["UTC"+(e>-1?"+":"")+e.toString(10),e.toString(10)]);this.updateShape_(e.getAttribute("unit")||"")},updateShape_:function(e){const t=["GPS_UNIT_HOUR","GPS_UNIT_DAY","GPS_UNIT_MONTH","GPS_UNIT_YEAR"].indexOf(e)>=0;t&&!this.getInput("ZONE_FIELDS")?this.appendDummyInput("ZONE_FIELDS").appendField("time zone","ZONE_LABEL").appendField(new(_().FieldDropdown)(this.timeZones),"ZONE_VALUE"):!t&&this.getInput("ZONE_FIELDS")&&this.removeInput("ZONE_FIELDS")},onchange:function(){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.GPS_date_time=function(){if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize"))return"// ERROR: Missing GPS initalize block!";{const e=this.getFieldValue("TIME_UNIT");let t="0";"GPS_UNIT_HOUR"!==e&&"GPS_UNIT_DAY"!==e&&"GPS_UNIT_MONTH"!==e&&"GPS_UNIT_YEAR"!==e||(t=this.getFieldValue("ZONE_VALUE")),_().propc.definitions_["include GPS"]='#include "gps.h"';let n="#define GPS_UNIT_YEAR     1\n";n+="#define GPS_UNIT_DAY      2\n",n+="#define GPS_UNIT_MONTH    3\n",n+="#define GPS_UNIT_HOUR     4\n",n+="#define GPS_UNIT_MINUTE   5\n",n+="#define GPS_UNIT_SECOND   6\n",_().propc.definitions_.GPS_dateTime_units=n;const i="int gps_dateTimeByUnit(char __u, int __z);\n";let o="int gps_dateTimeByUnit(char __u, int __z){";return o+="int __gpsTime = gps_rawTime();int __gpsDate = gps_rawDate();\n",o+="int __monthDays[13] = {31, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};\n",o+="int __gpsDay = __gpsDate / 10000;\n",o+="int __gpsMonth = __gpsDate / 100 - (__gpsDate / 10000) * 100;\n",o+="int __gpsYear = __gpsDate - (__gpsDate / 100) * 100;\n",o+="if (__gpsYear % 4 == 0) __monthDays[2] = 29;\n",o+="int __gpsHour = __gpsTime / 10000 + __z;\n",o+="if (__gpsHour < 0) { __gpsHour += 24; __gpsDay--; }\n",o+="if (__gpsHour > 23) { __gpsHour -= 24; __gpsDay++; }\n",o+="if (__gpsDay > __monthDays[__gpsMonth]) { __gpsDay = 1; __gpsMonth++; }\n",o+="if (__gpsDay < 1) { __gpsMonth--; __gpsDay = __monthDays[__gpsMonth]; }\n",o+="if (__gpsMonth < 1) { __gpsYear--; __gpsMonth = 12; }\n",o+="if (__gpsMonth > 12) { __gpsYear++; __gpsMonth = 1; }\n",o+="switch (__u){case GPS_UNIT_DAY:return __gpsDay;break;\n",o+="case GPS_UNIT_MONTH:\nreturn __gpsMonth;break;\n",o+="case GPS_UNIT_YEAR:\nreturn __gpsYear;break;\n",o+="case GPS_UNIT_HOUR:\nreturn __gpsHour;break;\n",o+="case GPS_UNIT_MINUTE:\nreturn __gpsTime / 100 - (__gpsTime / 10000) * 100;break;\n",o+="case GPS_UNIT_SECOND:\nreturn __gpsTime - (__gpsTime / 100) * 100;break;\n",o+="default:\nreturn -1;break;}}",this.disabled||(_().propc.methods_.gps_time_func=o,_().propc.method_declarations_.gps_time_func=i),["gps_dateTimeByUnit("+e+", "+t+")",_().propc.ORDER_ATOMIC]}},_().Blocks.HMC5883L_init={helpUrl:_().MSG_COMPASS_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_HMC5883L_INIT_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Compass initialize SCL").appendField(new(_().FieldDropdown)(e.digital),"SCL"),this.appendDummyInput().appendField("SDA").appendField(new(_().FieldDropdown)(e.digital),"SDA"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)}},_().propc.HMC5883L_init=function(){const e=this.getFieldValue("SCL"),t=this.getFieldValue("SDA");return this.disabled||(_().propc.definitions_.HMC5883L='#include "compass3d.h"',_().propc.setups_.HMC5883L="i2c *compass_bus = i2c_newbus("+e+", "+t+", 0);\n\tcompass_init(compass_bus);"),""},_().Blocks.HMC5883L_read={helpUrl:_().MSG_COMPASS_HELPURL,init:function(){this.setTooltip(_().MSG_HMC5883L_READ_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Compass heading store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"HEADING"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:function(){Z("HMC5883L_init")?this.setWarningText(null):this.setWarningText("WARNING: You must use a Compass\ninitialize block at the beginning of your program!")}},_().propc.HMC5883L_read=function(){let e="";if(Z("HMC5883L_init")){const t=_().propc.variableDB_.getName(this.getFieldValue("HEADING"),_().VARIABLE_CATEGORY_NAME);this.disabled||(_().propc.global_vars_.compass_vars="int __compX, __compY, __compZ;\nfloat __compH;\n"),e+="compass_read(bus, &__compX, &__compY, &__compZ);\n",e+="__compH = atan2(((float) __compY), (((float) __compX)) * 180.0/PI;\n\n",e+="if(__compH < 0.0) {\n\t__compH = (360.0 + __compH);\n}\n\n",e+=t+" = (int) __compH;"}else e+="// ERROR: Missing Compass initialize block!";return e},_().Blocks.joystick_input_xaxis={helpUrl:_().MSG_JOYSTICK_HELPURL,init:function(){let e=x();if(0===e.analog.length){const t=`JoystickInputYAxis: Empty profile analog list detected for board type '${G().boardType.name}'.`;Y.uT(t),console.log(t),e=["A0","0"]}this.chan="joystick_input_yaxis"===this.type?["y","Y"]:["x","X"],this.setTooltip(_().MSG_JOYSTICK_INPUT_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Joystick "+this.chan[0]+"-axis A/D").appendField(new(_().FieldDropdown)(e.analog),"PIN"+this.chan[1]),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.joystick_input_xaxis=function(){const e=this.getFieldValue("PIN"+this.chan[1]);this.disabled||(_().propc.definitions_["include abvolts"]='#include "abvolts.h"');return["ad_in("+e+") * 100 / 4096",_().propc.ORDER_ATOMIC]},_().Blocks.joystick_input_yaxis={helpUrl:_().MSG_JOYSTICK_HELPURL,init:function(){let e=x();if(0===e.analog.length){const t=`JoystickInputYAxis: Empty profile analog list detected for board type '${G().boardType.name}'.`;Y.uT(t),console.log(t),e=["A0","0"]}this.chan="joystick_input_yaxis"===this.type?["y","Y"]:["x","X"],this.setTooltip(_().MSG_JOYSTICK_INPUT_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Joystick "+this.chan[0]+"-axis A/D").appendField(new(_().FieldDropdown)(e.analog),"PIN"+this.chan[1]),this.setOutput(!0,"Number"),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)}},_().propc.joystick_input_yaxis=function(){const e=this.getFieldValue("PIN"+this.chan[1]);this.disabled||(_().propc.definitions_["include abvolts"]='#include "abvolts.h"');return["ad_in("+e+") * 100 / 4096",_().propc.ORDER_ATOMIC]},_().Blocks.keypad_initialize={helpUrl:_().MSG_KEYPAD_HELPURL,init:function(){this.setTooltip(_().MSG_KEYPAD_INIT_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput("PINS"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.userDefinedConstantsList_=$(),this.setPinMenus()},setPinMenus:function(e="",t=""){const n=x(),i=[];for(let e=0;e<8;e++)i[e]=this.getFieldValue("P"+e.toString(10));this.getInput("PINS")&&this.removeInput("PINS");const o=this.userDefinedConstantsList_.map((function(e){return[e,e]}));this.appendDummyInput("PINS").appendField("4x4 Keypad initialize PINS left").appendField(new(_().FieldDropdown)(n.digital.concat(o)),"P0").appendField(new(_().FieldDropdown)(n.digital.concat(o)),"P1").appendField(new(_().FieldDropdown)(n.digital.concat(o)),"P2").appendField(new(_().FieldDropdown)(n.digital.concat(o)),"P3").appendField("|").appendField(new(_().FieldDropdown)(n.digital.concat(o)),"P4").appendField(new(_().FieldDropdown)(n.digital.concat(o)),"P5").appendField(new(_().FieldDropdown)(n.digital.concat(o)),"P6").appendField(new(_().FieldDropdown)(n.digital.concat(o)),"P7").appendField("right");for(let n=0;n<8;n++)i[n]&&i[n]===e&&t?this.setFieldValue(t,"P"+n.toString(10)):i[n]&&this.setFieldValue(i[n],"P"+n.toString(10))}},_().propc.keypad_initialize=function(){if(!this.disabled){const e=x(),t=[];for(let n=0;n<8;n++)t[n]=this.getFieldValue("P"+n),-1===e.digital.toString().indexOf(t[n]+","+t[n])&&(t[n]="MY_"+t[n]);let n="int __rowPins[] = {"+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+"};\n";n+="int __colPins[] = {"+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+"};\n",n+="int __buttonVals[] = {1, 2, 3, 'A', 4, 5, 6, 'B', 7, 8, 9, 'C', '*', 0, '#', 'D'};\n",_().propc.definitions_.keypad_lib='#include "keypad.h"',_().propc.global_vars_.keypad_pins=n,_().propc.setups_.keypad_init="keypad_setup(4, 4, __rowPins, __colPins, __buttonVals);"}return""},_().Blocks.keypad_read={helpUrl:_().MSG_KEYPAD_HELPURL,init:function(){this.setTooltip(_().MSG_KEYPAD_READ_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("4x4 Keypad"),this.setOutput(!0,null)},onchange:function(){Z("keypad_initialize")?this.setWarningText(null):this.setWarningText("WARNING: You must use a keypad  \ninitialize block at the beginning of your program!")}},_().propc.keypad_read=function(){return Z("keypad_initialize")?["keypad_read()",_().propc.ORDER_ATOMIC]:"// ERROR: Missing Keypad initialize block!"},_().Blocks.lis3dh_init={helpUrl:_().MSG_LIS3DH_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_LIS3DH_INIT_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput("PINS").appendField("LIS3DH initialize SCK").appendField(new(_().FieldDropdown)(e.digital),"SCK_PIN").appendField("SDI").appendField(new(_().FieldDropdown)(e.digital),"SDI_PIN").appendField("CS").appendField(new(_().FieldDropdown)(e.digital),"CS_PIN").appendField("","TEMP").appendField("","UNIT").appendField("","SMOOTHING").appendField("","VSS_VOLTAGE").appendField("","VDD_VOLTAGE"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},buildTempInput:function(e){if(e&&!this.getInput("TEMP_CALIBRATE")){const e=this.getFieldValue("TEMP"),t=this.getFieldValue("UNIT");this.getInput("PINS").removeField("TEMP"),this.getInput("PINS").removeField("UNIT"),this.appendDummyInput("TEMP_CALIBRATE").appendField("Set ambient temperature to").appendField(new(_().FieldNumber)("72",null,null,1),"TEMP").appendField(new(_().FieldDropdown)([["°F","F"],["°C","C"]]),"UNIT"),this.setFieldValue(e||"72","TEMP"),this.setFieldValue(t||"F","UNIT"),this.getInput("TILT_CALIBRATE")&&this.moveInputBefore("TEMP_CALIBRATE","TILT_CALIBRATE")}else!e&&this.getInput("TEMP_CALIBRATE")&&(this.removeInput("TEMP_CALIBRATE"),this.getInput("PINS").appendField("","TEMP").appendField("","UNIT"))},buildSmoothingInput:function(e){if(e&&!this.getInput("TILT_CALIBRATE")){const e=this.getFieldValue("SMOOTHING");this.getField("SMOOTHING")&&this.getInput("PINS").removeField("SMOOTHING"),this.appendDummyInput("TILT_CALIBRATE").appendField("Set tilt smoothing").appendField(new(_().FieldNumber)("0",0,100,1),"SMOOTHING"),this.setFieldValue(e||"0","SMOOTHING"),this.getInput("VOLT_CALIBRATE")&&this.moveInputBefore("TILT_CALIBRATE","VOLT_CALIBRATE")}else!e&&this.getInput("TILT_CALIBRATE")&&(this.removeInput("TILT_CALIBRATE"),this.getField("SMOOTHING")||this.getInput("PINS").appendField("","SMOOTHING"))},buildVoltageInput:function(e){if(e&&!this.getInput("VOLT_CALIBRATE")){const e=this.getInput("VSS_VOLTAGE"),t=this.getInput("VDD_VOLTAGE");this.getInput("PINS").removeField("VSS_VOLTAGE"),this.getInput("PINS").removeField("VDD_VOLTAGE"),this.appendDummyInput("VOLT_CALIBRATE").appendField("Calibrate ADC  GND ").appendField(new(_().FieldNumber)("0",null,null,1),"VSS_VOLTAGE").appendField(" 3.3V ").appendField(new(_().FieldNumber)("0",null,null,1),"VDD_VOLTAGE"),this.setFieldValue(e||"0","VSS_VOLTAGE"),this.setFieldValue(t||"0","VDD_VOLTAGE"),this.moveInputBefore("VOLT_CALIBRATE",null)}else!e&&this.getInput("VOLT_CALIBRATE")&&(this.removeInput("VOLT_CALIBRATE"),this.getField("VOLTAGE")||(this.getInput("PINS").appendField("","VSS_VOLTAGE"),this.getInput("PINS").appendField("","VDD_VOLTAGE")))},onchange:function(e){if(!e||!this.isInFlyout)return;let t=null;const n=_().getMainWorkspace().getBlocksByType(this.type,!1);n&&n.length>1&&(t="WARNING! Only one LIS3DH init block can be used!"),this.setWarningText(t);let i=!1;(_().getMainWorkspace().getBlocksByType("lis3dh_temp",!1)||[]).length>0&&(i=!0),this.buildTempInput(i);const o=_().getMainWorkspace().getBlocksByType("lis3dh_read",!1)||[];let s=!1;for(let e=0;e<o.length;e++)if("tilt"===o[e].getFieldValue("SENSOR")){s=!0;break}this.buildSmoothingInput(s);const l=_().getMainWorkspace().getBlocksByType("lis3dh_read",!1)||[];let r=!1;for(let e=0;e<o.length;e++)if("adc_mV"===l[e].getFieldValue("SENSOR")){r=!0;break}this.buildVoltageInput(r)}},_().propc.lis3dh_init=function(){if(!this.disabled){_().propc.definitions_.lis3dh='#include "lis3dh.h"',_().propc.global_vars_.lis3dh_init="lis3dh *lis3dh_sensor;";let e="lis3dh_sensor = lis3dh_init("+this.getFieldValue("SCK_PIN")+", "+this.getFieldValue("SDI_PIN")+", "+this.getFieldValue("CS_PIN")+");";this.getInput("TEMP_CALIBRATE")&&(e+="lis3dh_tempCal_"+this.getFieldValue("UNIT")+"(lis3dh_sensor, "+this.getFieldValue("TEMP")+");");const t=this.getFieldValue("SMOOTHING")||0;if(this.getInput("TILT_CALIBRATE")&&0!==t&&(e+="lis3dh_tiltConfig(lis3dh_sensor, 100 - "+t+");"),this.getInput("VOLT_CALIBRATE")){const t=this.getFieldValue("VSS_VOLTAGE"),n=this.getFieldValue("VDD_VOLTAGE");void 0!==t&&void 0!==n&&(e+="lis3dh_adcCal_mV(lis3dh_sensor, ",e+=0===t&&0===n?"0, 0, 0, 0 );":"0, 3300, "+t+", "+n+");")}_().propc.setups_.lis3dh_init=e+"\n"}return""},_().Blocks.lis3dh_read={helpUrl:_().MSG_LIS3DH_HELPURL,init:function(){this.setTooltip(_().MSG_LIS3DH_READ_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput("ACTION").appendField("LIS3DH read").appendField(new(_().FieldDropdown)([["acceleration (1000ths of g's)","accel_mg"],["tilt (degrees)","tilt"],["voltage (mV)","adc_mV"]],(function(e){this.getSourceBlock().configureFields(e)})),"SENSOR"),this.appendDummyInput("VARS").appendField("store X in","LABEL_0").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"STORE_1").appendField("Y in","LABEL_1").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"STORE_2").appendField("Z in","LABEL_2").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"STORE_3").appendField("","STORE_4"),this.setInputsInline(!1),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.fieldVals=[]},configureFields:function(e){e||(e="accel_mg");const t={accel_mg:{label:["store X in","Y in","Z in"]},adc_mV:{label:["store AD1 in","AD2 in","AD3 in"]},tilt:{label:["store X in","Y in","Z in"]}};for(let n=0;n<3;n++)this.setFieldValue(t[e].label[n],"LABEL_"+n.toString(10));if(!this.isInFlyout)for(let t=1;t<5;t++)"tilt"!==e&&4===t||(this.fieldVals[t]=this.getFieldValue("STORE_"+t.toString(10)));this.getInput("VARS_2")&&"tilt"!==e&&this.removeInput("VARS_2"),this.getField("STORE_4")&&!this.getField("STORE_4").EDITABLE&&this.getInput("VARS").removeField("STORE_4"),"tilt"!==e||this.getInput("VARS_2")||this.isInFlyout?this.getField("STORE_4")||(this.getInput("VARS").appendField("","STORE_4"),this.fieldVals[4]=""):this.appendDummyInput("VARS_2").appendField("store combined motion in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"STORE_4");for(let e=1;e<4;e++)this.fieldVals[e]&&""!==this.fieldVals[e]&&this.getField("STORE_"+e.toString(10))&&this.setFieldValue(this.fieldVals[e],"STORE_"+e.toString(10));if("tilt"===e&&this.fieldVals[3]&&this.fieldVals[4]&&""!==this.fieldVals[4]){const e=_().getMainWorkspace().getVariable(this.fieldVals[4]);e&&this.setFieldValue(e.getId(),"STORE_4")}this.getField("STORE_4")&&!this.getField("STORE_4").EDITABLE&&this.setFieldValue("","STORE_4")},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("fieldvals",this.getFieldValue("SENSOR")),e},domToMutation:function(e){const t=e.getAttribute("fieldvals");this.configureFields(t)},onchange:function(e){if(e&&(e.type===_().Events.BLOCK_CREATE||e.type===_().Events.BLOCK_DELETE||e.type===_().Events.BLOCK_CHANGE)){let e=null;Z("lis3dh_init")||(e="WARNING! The block requires an LIS3DH init block!"),this.setWarningText(e)}}},_().propc.lis3dh_read=function(){const e=this.getFieldValue("SENSOR"),t=_().propc.variableDB_.getName(this.getFieldValue("STORE_1"),_().VARIABLE_CATEGORY_NAME),n=_().propc.variableDB_.getName(this.getFieldValue("STORE_2"),_().VARIABLE_CATEGORY_NAME),i=_().propc.variableDB_.getName(this.getFieldValue("STORE_3"),_().VARIABLE_CATEGORY_NAME);let o=null;return"tilt"===e&&(o=_().propc.variableDB_.getName(this.getFieldValue("STORE_4"),_().VARIABLE_CATEGORY_NAME)),(_().getMainWorkspace().getBlocksByType("lis3dh_init")||[]).length>0?"lis3dh_"+e+"(lis3dh_sensor, &"+t+", &"+n+", &"+i+(o?", &"+o:"")+");\n":"// WARNING: Missing init block!"},_().Blocks.lis3dh_temp={helpUrl:_().MSG_LIS3DH_HELPURL,init:function(){this.setTooltip(_().MSG_LIS3DH_TEMP_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput("MAIN").appendField("LIS3DH temperature in").appendField(new(_().FieldDropdown)([["°F","F"],["°C","C"]]),"UNIT"),this.setInputsInline(!1),this.setOutput(!0,"Number")},onchange:_().Blocks.lis3dh_read.onchange},_().propc.lis3dh_temp=function(){return(_().getMainWorkspace().getBlocksByType("lis3dh_init")||[]).length>0?["lis3dh_temp_"+this.getFieldValue("UNIT")+"(lis3dh_sensor)",_().propc.ORDER_NONE]:["0 // WARNING: Missing init block!",_().propc.ORDER_NONE]},_().Blocks.lsm9ds1_init={helpUrl:_().MSG_IMU_HELPURL,init:function(){this.setTooltip(_().MSG_LSM9DS1_INIT_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput("PINS"),this.setInputsInline(!1),this.setNextStatement(!0,null),this.setPreviousStatement(!0,"Block"),this.userDefinedConstantsList_=$(),this.setPinMenus()},setPinMenus:function(e="",t=""){const n=x(),i=["PIN_SCL","PIN_SDIO","PIN_CSAG","PIN_CSM"],o=[this.getFieldValue("PIN_SCL"),this.getFieldValue("PIN_SDIO"),this.getFieldValue("PIN_CSAG"),this.getFieldValue("PIN_CSM")];this.getInput("PINS")&&this.removeInput("PINS");const s=this.userDefinedConstantsList_.map((function(e){return[e,e]}));this.appendDummyInput("PINS").appendField("IMU initialize SCL").appendField(new(_().FieldDropdown)(n.digital.concat(s)),"PIN_SCL").appendField("SDIO").appendField(new(_().FieldDropdown)(n.digital.concat(s)),"PIN_SDIO").appendField("CS_AG").appendField(new(_().FieldDropdown)(n.digital.concat(s)),"PIN_CSAG").appendField("CS_M").appendField(new(_().FieldDropdown)(n.digital.concat(s)),"PIN_CSM");for(let n=0;n<4;n++)o[n]&&o[n]===e&&t?this.setFieldValue(t,i[n]):o[n]&&this.setFieldValue(o[n],i[n])}},_().propc.lsm9ds1_init=function(){const e=x(),t=[this.getFieldValue("PIN_SCL"),this.getFieldValue("PIN_SDIO"),this.getFieldValue("PIN_CSAG"),this.getFieldValue("PIN_CSM")];for(let n=0;n<3;n++)-1===e.digital.toString().indexOf(t[n]+","+t[n])&&(t[n]="MY_"+t[n]);return this.disabled||(_().propc.definitions_.include_lsm9ds1='#include "lsm9ds1.h"',_().propc.setups_.lsm9ds1_init="imu_init("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+");",_().propc.global_vars_.lsm9ds1_vars="float __imuX, __imuY, __imuZ, __compI;\n"),""},_().Blocks.lsm9ds1_mag_calibrate={helpUrl:_().MSG_IMU_HELPURL,init:function(){this.setTooltip(_().MSG_LSM9DS1_INIT_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("IMU calibrate magnetometer"),this.setInputsInline(!0),this.setNextStatement(!0,null),this.setPreviousStatement(!0,"Block")},onchange:function(){Z("lsm9ds1_init")?this.setWarningText(null):this.setWarningText("WARNING: You must use an IMU\ninitialize block at the beginning of your program!")}},_().propc.lsm9ds1_mag_calibrate=function(){return Z("lsm9ds1_init")?"high(26);high(27);imu_calibrateMag();low(26);low(27);":"// ERROR: Missing IMU initialize block!\n"},_().Blocks.lsm9ds1_read={helpUrl:_().MSG_IMU_HELPURL,init:function(){this.setTooltip(_().MSG_LSM9DS1_READ_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("IMU read").appendField(new(_().FieldDropdown)([["accelerometer (100ths of g's)","Accel"],["gyroscope (100ths of deg/s)","Gyro"],["magnetometer (100ths of gauss)","Mag"]]),"SENSOR").appendField("store X-axis in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"X_VAR").appendField(" y-axis in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"Y_VAR").appendField(" z-axis in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"Z_VAR"),this.setInputsInline(!1),this.setNextStatement(!0,null),this.setPreviousStatement(!0,"Block")},onchange:function(){Z("lsm9ds1_init")?this.setWarningText(null):this.setWarningText("WARNING: You must use an IMU\ninitialize block at the beginning of your program!")}},_().propc.lsm9ds1_read=function(){let e="";if(Z("lsm9ds1_init")){e+="imu_read"+this.getFieldValue("SENSOR")+"Calculated(&__imuX, &__imuY, &__imuZ);\n",e+=_().propc.variableDB_.getName(this.getFieldValue("X_VAR"),_().VARIABLE_CATEGORY_NAME)+" = (int) (100.0 * __imuX);\n",e+=_().propc.variableDB_.getName(this.getFieldValue("Y_VAR"),_().VARIABLE_CATEGORY_NAME)+" = (int) (100.0 * __imuY);\n",e+=_().propc.variableDB_.getName(this.getFieldValue("Z_VAR"),_().VARIABLE_CATEGORY_NAME)+" = (int) (100.0 * __imuZ);\n"}else e+="// ERROR: Missing IMU initialize block!\n";return e},_().Blocks.lsm9ds1_tilt={helpUrl:_().MSG_IMU_HELPURL,init:function(){this.setTooltip(_().MSG_LSM9DS1_TILT_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("IMU tilt").appendField(new(_().FieldDropdown)([["x-axis","X"],["y-axis","Y"],["z-axis","Z"]],(function(e){this.getSourceBlock().setAxes_({ACTION:e})})),"G_AXIS").appendField("points up/down"),this.appendDummyInput("TILT1").appendField("store y-tilt in","A1").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VAR1"),this.appendDummyInput("TILT2").appendField("z-tilt in","A2").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VAR2"),this.setInputsInline(!0),this.setNextStatement(!0,null),this.setPreviousStatement(!0,"Block")},mutationToDom:function(){const e=document.createElement("mutation"),t=this.getFieldValue("G_AXIS");return e.setAttribute("action",t),e},domToMutation:function(e){const t=e.getAttribute("action");this.setAxes_({ACTION:t})},setAxes_:function(e){"X"===e.ACTION?(this.setFieldValue("store y-tilt in","A1"),this.setFieldValue("z-tilt in","A2")):"Y"===e.ACTION?(this.setFieldValue("store x-tilt in","A1"),this.setFieldValue("z-tilt in","A2")):(this.setFieldValue("store x-tilt in","A1"),this.setFieldValue("y-tilt in","A2"))},onchange:function(){Z("lsm9ds1_init")?this.setWarningText(null):this.setWarningText("WARNING: You must use an IMU\ninitialize block at the beginning of your program!")}},_().propc.lsm9ds1_tilt=function(){let e="";if(Z("lsm9ds1_init")){let t,n,i=this.getFieldValue("A1");i&&(t=`__imu${i.substr(6,1).toUpperCase()}`),i=this.getFieldValue("A2"),i&&(n=`__imu${i.substr(0,1).toUpperCase()}`);const o="__imu"+this.getFieldValue("G_AXIS");e+="imu_readAccelCalculated(&__imuX, &__imuY, &__imuZ);\n",e+=_().propc.variableDB_.getName(this.getFieldValue("VAR1"),_().VARIABLE_CATEGORY_NAME)+" = (int) (atan2("+t+", "+o+") * 180.0 / PI);\n",e+=_().propc.variableDB_.getName(this.getFieldValue("VAR2"),_().VARIABLE_CATEGORY_NAME)+" = (int) (atan2("+n+", "+o+") * 180.0 / PI);\n"}else e+="// ERROR: Missing IMU initialize block!\n";return e},_().Blocks.lsm9ds1_heading={helpUrl:_().MSG_IMU_HELPURL,init:function(){this.setTooltip(_().MSG_LSM9DS1_HEADING_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("IMU heading").appendField(new(_().FieldDropdown)([["z-axis points forward","__imuZ"],["z-axis points backward","(-1.0*__imuZ)"],["y-axis points forward","__imuY"],["y axis points backward","(-1.0*__imuY)"],["x-axis points forward","(-1.0*__imuX)"],["x-axis points backward","__imuX"]],(function(e){this.getSourceBlock().setAxes_({ACTION:e})})),"FB_AXIS").appendField(" "),this.appendDummyInput("MENU2").appendField(new(_().FieldDropdown)([["y-axis points left","__imuY"],["y-axis points right","(-1.0*__imuY)"],["x-axis points left","(-1.0*__imuX)"],["x-axis points right","__imuX"]]),"LR_AXIS"),this.appendDummyInput("IMUVAR").appendField("store in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VAR"),this.setInputsInline(!0),this.setNextStatement(!0,null),this.setPreviousStatement(!0,"Block")},mutationToDom:function(){const e=document.createElement("mutation"),t=this.getFieldValue("FB_AXIS");return e.setAttribute("action",t),e},domToMutation:function(e){const t=e.getAttribute("action");this.setAxes_({ACTION:t})},setAxes_:function(e){this.getInput("MENU2")&&this.removeInput("MENU2");let t=e.ACTION[e.ACTION.length-1];")"===t&&(t=e.ACTION[e.ACTION.length-2]),"X"===t?this.appendDummyInput("MENU2").appendField(new(_().FieldDropdown)([["y-axis points left","__imuY"],["y-axis points right","(-1.0*__imuY)"],["z-axis points left","__imuZ"],["z-axis points right","(-1.0*__imuZ)"]]),"LR_AXIS"):"Y"===t?this.appendDummyInput("MENU2").appendField(new(_().FieldDropdown)([["x-axis points left","(-1.0*__imuX)"],["x-axis points right","__imuX"],["z-axis points left","__imuZ"],["z-axis points right","(-1.0*__imuZ)"]]),"LR_AXIS"):this.appendDummyInput("MENU2").appendField(new(_().FieldDropdown)([["y-axis points left","__imuY"],["y-axis points right","(-1.0*__imuY)"],["x-axis points left","(-1.0*__imuX)"],["x-axis points right","__imuX"]]),"LR_AXIS"),this.moveInputBefore("MENU2","IMUVAR")},onchange:function(){Z("lsm9ds1_init")?this.setWarningText(null):this.setWarningText("WARNING: You must use an IMU\ninitialize block at the beginning of your program!")}},_().propc.lsm9ds1_heading=function(){let e="";if(Z("lsm9ds1_init")){const t=this.getFieldValue("FB_AXIS");e+="imu_readMagCalculated(&__imuX, &__imuY, &__imuZ);\n",e+="__compI = atan2("+this.getFieldValue("LR_AXIS")+", "+t+") * 180.0/PI;\n",e+="\nif(__compI < 0.0) {\n\t__compI = (360.0 + __compI);\n}\n",e+=_().propc.variableDB_.getName(this.getFieldValue("VAR"),_().VARIABLE_CATEGORY_NAME)+" = (int) __compI;\n"}else e+="// ERROR: Missing IMU initialize block!\n";return e},_().Blocks.MMA7455_init={helpUrl:_().MSG_ACCELEROMETER_HELPURL,init:function(){const e=x();this.setTooltip(_().MSG_MMA7455_INIT_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Accelerometer initialize CS").appendField(new(_().FieldDropdown)(e.digital),"PINZ").appendField("DATA").appendField(new(_().FieldDropdown)(e.digital),"PINX").appendField("CLK").appendField(new(_().FieldDropdown)(e.digital),"PINY"),this.setInputsInline(!1),this.setNextStatement(!0,null),this.setPreviousStatement(!0,"Block")}},_().propc.MMA7455_init=function(){const e=this.getFieldValue("PINX"),t=this.getFieldValue("PINY"),n=this.getFieldValue("PINZ");return this.disabled||(_().propc.definitions_.include_mma7455='#include "mma7455.h"',_().propc.global_vars_.mma_7455_tempVars="short int __tmpX, __tmpY, __tmpZ;",_().propc.setups_.mma_7455="MMA7455_init("+e+", "+t+", "+n+");"),""},_().Blocks.MMA7455_acceleration={helpUrl:_().MSG_ACCELEROMETER_HELPURL,init:function(){this.setTooltip(_().MSG_MMA7455_ACCELERATION_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Accelerometer store x-axis in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"X_VAR").appendField(" y-axis in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"Y_VAR").appendField(" z-axis in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"Z_VAR"),this.setInputsInline(!1),this.setNextStatement(!0,null),this.setPreviousStatement(!0,"Block")},onchange:function(){-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("Accelerometer initialize")?this.setWarningText("WARNING: You must use an Accelerometer\ninitialize block at the beginning of your program!"):this.setWarningText(null)}},_().propc.MMA7455_acceleration=function(){let e="";if(-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("Accelerometer initialize"))e+="// ERROR: Missing Accelerometer initialize block!";else{e+="MMA7455_getxyz10(&__tmpX, &__tmpY, &__tmpZ);\n",e+=_().propc.variableDB_.getName(this.getFieldValue("X_VAR"),_().VARIABLE_CATEGORY_NAME)+" = (int) __tmpX;\n"+_().propc.variableDB_.getName(this.getFieldValue("Y_VAR"),_().VARIABLE_CATEGORY_NAME)+" = (int) __tmpY;\n"+_().propc.variableDB_.getName(this.getFieldValue("Z_VAR"),_().VARIABLE_CATEGORY_NAME)+" = (int) __tmpZ;\n"}return e},_().Blocks.MX2125_acceleration_xaxis={helpUrl:_().MSG_MEMSIC_HELPURL,init:function(){this.setTooltip(_().MSG_MX2125_ACCELERATION_XAXIS_TOOLTIP),this.setColour(X.getColor("input")),this.chan=["x","X"],this.pinChoices=["PIN"],this.otherPin=[!1],this.type.indexOf("yaxis")>-1&&(this.chan=["y","Y"]),this.pinChoices=["PIN"+this.chan[1]],this.res=["acceleration","accel"],this.type.indexOf("tilt")>-1&&(this.res=["tilt","tilt"]),this.addPinMenu("Memsic "+this.res[0]+" "+this.chan[0]+"-axis PIN",null,0),this.setInputsInline(!0),this.setNextStatement(!1,null),this.setPreviousStatement(!1,null),this.setOutput(!0,"Number")},addPinMenu:function(e,t,n){const i=x();this.appendDummyInput("SET_PIN").appendField(e,"LABEL").appendField(new(_().FieldDropdown)(i.digital.concat([["other","other"]]),(function(e){this.getSourceBlock().setToOther(e,t,n)})),this.pinChoices[n]),this.moveBefore=t,this.otherPin[n]=!1},setToOther:function(e,t,n){if("other"===e){const e=x();this.otherPin[n]=!0;const i=this.getFieldValue("LABEL");if(this.getInput("SET_PIN")&&this.removeInput("SET_PIN"),this.appendValueInput(this.pinChoices[n]).appendField(i).setCheck("Number").appendRange("A,"+e.digital.toString()),t)this.moveInputBefore(this.pinChoices[n],t);else{const e=this;setTimeout((function(){e.render()}),200)}}},mutationToDom:function(){const e=document.createElement("mutation");for(let t=0;t<this.pinChoices.length;t++)e.setAttribute("otherpin"+t,this.otherPin[t].toString());return e},domToMutation:function(e){for(let t=0;t<this.pinChoices.length;t++){"true"===e.getAttribute("otherpin"+t)&&this.setToOther("other",this.moveBefore,t)}}},_().propc.MX2125_acceleration_xaxis=function(){this.disabled||(_().propc.definitions_.include_mx2125='#include "mx2125.h"');let e="0";return e=this.otherPin[0]?_().propc.valueToCode(this,"PIN"+this.chan[1],_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN"+this.chan[1]),["mx_"+this.res[1]+"("+e+")",_().propc.ORDER_NONE]},_().Blocks.MX2125_acceleration_yaxis=_().Blocks.MX2125_acceleration_xaxis,_().propc.MX2125_acceleration_yaxis=_().propc.MX2125_acceleration_xaxis,_().Blocks.MX2125_tilt_xaxis=_().Blocks.MX2125_acceleration_xaxis,_().propc.MX2125_tilt_xaxis=_().propc.MX2125_acceleration_xaxis,_().Blocks.MX2125_tilt_yaxis=_().Blocks.MX2125_acceleration_xaxis,_().propc.MX2125_tilt_yaxis=_().propc.MX2125_acceleration_xaxis,_().Blocks.MX2125_rotation={helpUrl:_().MSG_MEMSIC_HELPURL,init:function(){this.setTooltip(_().MSG_MX2125_ROTATION_TOOLTIP),this.setColour(X.getColor("input")),this.pinChoices=["PINX","PINY"],this.otherPin=[!1,!1],this.addPinMenu("Memsic rotation x-axis PIN","YAXIS",0),this.addPinMenu("y-axis PIN","XAXIS",1),this.setInputsInline(!0),this.setNextStatement(!1,null),this.setPreviousStatement(!1,null),this.setOutput(!0,"Number")},addPinMenu:function(e,t,n){const i=x();this.appendDummyInput("SET_PIN").appendField(e,"LABEL").appendField(new(_().FieldDropdown)(i.digital.concat([["other","other"]]),(function(e){this.getSourceBlock().setToOther(e,t,n)})),this.pinChoices[n]),this.moveBefore=t,this.otherPin[n]=!1},setToOther:function(e,t,n){if("other"===e){const e=x();this.otherPin[n]=!0;const i=this.getFieldValue("LABEL");if(this.getInput("SET_PIN")&&this.removeInput("SET_PIN"),this.appendValueInput(this.pinChoices[n]).appendField(i).setCheck("Number").appendRange("A,"+e.digital.toString()),t)this.moveInputBefore(this.pinChoices[n],t);else{const e=this;setTimeout((function(){e.render()}),200)}}},mutationToDom:function(){const e=document.createElement("mutation");for(let t=0;t<this.pinChoices.length;t++)e.setAttribute("otherpin"+t,this.otherPin[t].toString());return e},domToMutation:function(e){for(let t=0;t<this.pinChoices.length;t++){"true"===e.getAttribute("otherpin"+t)&&this.setToOther("other",this.moveBefore,t)}}},_().propc.MX2125_rotation=function(){this.disabled||(_().propc.definitions_.include_mx2125='#include "mx2125.h"');const e=["0","0"];for(let t=0;t<this.pinChoices.length;t++)this.otherPin[t]?e[t]=_().propc.valueToCode(this,this.pinChoices[t],_().propc.ORDER_ATOMIC)||"0":e[t]=this.getFieldValue(this.pinChoices[t]);return["mx_rotate("+e[0]+", "+e[1]+")",_().propc.ORDER_NONE]},_().Blocks.sensor_ping={helpUrl:_().MSG_PING_HELPURL,init:function(){this.setTooltip(_().MSG_SENSOR_PING_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Ping))) distance in").appendField(new(_().FieldDropdown)([["inches","_inches"],["cm","_cm"],["µs",""]]),"UNIT"),this.pinChoices=["PIN"],this.otherPin=[!1],this.addPinMenu("PIN",null,0),this.setOutput(!0,"Number"),this.setInputsInline(!0),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null)},addPinMenu:function(e,t,n){const i=x();this.appendDummyInput("SET_PIN").appendField(e,"LABEL").appendField(new(_().FieldDropdown)(i.digital.concat([["other","other"]]),(function(e){this.getSourceBlock().setToOther(e,t,n)})),this.pinChoices[n]),this.moveBefore=t,this.otherPin[n]=!1},setToOther:function(e,t,n){if("other"===e){const e=x();this.otherPin[n]=!0;const i=this.getFieldValue("LABEL");if(this.getInput("SET_PIN")&&this.removeInput("SET_PIN"),this.appendValueInput(this.pinChoices[n]).appendField(i).setCheck("Number").appendRange("A,"+e.digital.toString()),t)this.moveInputBefore(this.pinChoices[n],t);else{const e=this;setTimeout((function(){e.render()}),200)}}},mutationToDom:function(){const e=document.createElement("mutation");for(let t=0;t<this.pinChoices.length;t++)e.setAttribute("otherpin"+t,this.otherPin[t].toString());return e},domToMutation:function(e){for(let t=0;t<this.pinChoices.length;t++){"true"===e.getAttribute("otherpin"+t)&&this.setToOther("other",this.moveBefore,t)}}},_().propc.sensor_ping=function(){let e;e=this.otherPin[0]?_().propc.valueToCode(this,this.pinChoices[0],_().propc.ORDER_ATOMIC)||"0":this.getFieldValue(this.pinChoices[0]);const t=this.getFieldValue("UNIT");this.disabled||(_().propc.definitions_["include ping"]='#include "ping.h"');return["ping"+t+"("+e+")",_().propc.ORDER_ATOMIC]},_().Blocks.PIR_Sensor={helpUrl:_().MSG_PIR_HELPURL,init:function(){this.setTooltip(_().MSG_PIR_SENSOR_TOOLTIP),this.setColour(X.getColor("input")),this.pinChoices=["PIN"],this.otherPin=[!1],this.addPinMenu("PIR sensor PIN",null,0),this.setInputsInline(!0),this.setNextStatement(!1,null),this.setPreviousStatement(!1,null),this.setOutput(!0,"Number")},mutationToDom:function(){const e=document.createElement("mutation");for(let t=0;t<this.pinChoices.length;t++)e.setAttribute("otherpin"+t,this.otherPin[t].toString());return e},domToMutation:function(e){for(let t=0;t<this.pinChoices.length;t++){"true"===e.getAttribute("otherpin"+t)&&this.setToOther("other",this.moveBefore,t)}},addPinMenu:function(e,t,n){const i=x();this.appendDummyInput("SET_PIN").appendField(e,"LABEL").appendField(new(_().FieldDropdown)(i.digital.concat([["other","other"]]),(function(e){this.getSourceBlock().setToOther(e,t,n)})),this.pinChoices[n]),this.moveBefore=t,this.otherPin[n]=!1},setToOther:function(e,t,n){if("other"===e){const e=x();this.otherPin[n]=!0;const i=this.getFieldValue("LABEL");if(this.getInput("SET_PIN")&&this.removeInput("SET_PIN"),this.appendValueInput(this.pinChoices[n]).appendField(i).setCheck("Number").appendRange("A,"+e.digital.toString()),t)this.moveInputBefore(this.pinChoices[n],t);else{const e=this;setTimeout((function(){e.render()}),200)}}}},_().propc.PIR_Sensor=function(){let e="0";return e=this.otherPin[0]?_().propc.valueToCode(this,this.pinChoices[0],_().propc.ORDER_ATOMIC)||"0":this.getFieldValue(this.pinChoices[0]),["input("+e+")",_().propc.ORDER_ATOMIC]},_().Blocks.rfid_enable={helpUrl:_().MSG_RFID_HELPURL,init:function(){this.setTooltip(_().MSG_RFID_ENABLE_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput("PINS"),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.userDefinedConstantsList_=$(),this.setPinMenus()},setPinMenus:function(e="",t=""){const n=x(),i=this.getFieldValue("PIN_IN"),o=this.getFieldValue("PIN_OUT");this.getInput("PINS")&&this.removeInput("PINS"),this.appendDummyInput("PINS").appendField("RFID initialize EN").appendField(new(_().FieldDropdown)(n.digital.concat(this.userDefinedConstantsList_.map((function(e){return[e,e]})))),"PIN_IN").appendField("SOUT").appendField(new(_().FieldDropdown)(n.digital.concat(this.userDefinedConstantsList_.map((function(e){return[e,e]})))),"PIN_OUT"),i&&i===e&&t?this.setFieldValue(t,"PIN_IN"):i&&this.setFieldValue(i,"PIN_IN"),o&&o===e&&t?this.setFieldValue(t,"PIN_OUT"):o&&this.setFieldValue(o,"PIN_OUT")}},_().propc.rfid_enable=function(){if(!this.disabled){const e=x();let t=this.getFieldValue("PIN_IN"),n=this.getFieldValue("PIN_OUT");-1===e.digital.toString().indexOf(t+","+t)&&(t="MY_"+t),-1===e.digital.toString().indexOf(n+","+n)&&(n="MY_"+n),_().propc.definitions_.rfidser='#include "rfidser.h"',_().propc.global_vars_.rfidser="rfidser *rfid;",_().propc.setups_.rfidser_setup="rfid = rfid_open("+n+","+t+");"}return""},_().Blocks.rfid_get={helpUrl:_().MSG_RFID_HELPURL,init:function(){this.setTooltip(_().MSG_RFID_GET_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("RFID store reading in").appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"BUFFER"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:function(){Z("rfid_enable")?this.setWarningText(null):this.setWarningText("WARNING: You must use an RFID\ninitialize block at the beginning of your program!")}},_().propc.rfid_get=function(){if(Z("rfid_enable")){const e=_().propc.variableDB_.getName(this.getFieldValue("BUFFER"),_().VARIABLE_CATEGORY_NAME);return this.disabled||(_().propc.global_vars_.rfid_buffer="char *rfidBfr;",_().propc.definitions_.rfidser='#include "rfidser.h"'),'rfidBfr = rfid_get(rfid, 500);\nsscan(&rfidBfr[2], "%x", &'+e+");\nif("+e+" == 237) "+e+" = 0;"}return"// ERROR: Missing RFID initialize block!"},_().Blocks.rfid_disable={helpUrl:_().MSG_RFID_HELPURL,init:function(){this.setTooltip(_().MSG_RFID_DISABLE_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("RFID").appendField(new(_().FieldDropdown)([["disable","DISABLE"],["enable","ENABLE"]]),"ACTION"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:function(){Z("rfid_enable")?this.setWarningText(null):this.setWarningText("WARNING: You must use an RFID\ninitialize block at the beginning of your program!")}},_().propc.rfid_disable=function(){if(Z("rfid_enable")){const e=this.getFieldValue("ACTION");return this.disabled||(_().propc.definitions_.rfidser='#include "rfidser.h"'),"ENABLE"===e?"rfid_enable(rfid);":"rfid_disable(rfid);"}return"// ERROR: Missing RFID initialize block!"},_().Blocks.rfid_close={helpUrl:_().MSG_RFID_HELPURL,init:function(){this.setTooltip(_().MSG_RFID_CLOSE_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("RFID close"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:function(){Z("rfid_enable")?this.setWarningText(null):this.setWarningText("WARNING: You must use an RFID\ninitialize block at the beginning of your program!")}},_().propc.rfid_close=function(){return Z("rfid_enable")?(this.disabled||(_().propc.definitions_.rfidser='#include "rfidser.h"'),"rfidser_close(rfid);\n"):"// ERROR: Missing RFID initialize block!"},_().Blocks.sirc_get={helpUrl:_().MSG_SONY_REMOTE_HELPURL,init:function(){const e=G();this.setTooltip(_().MSG_SIRC_GET_TOOLTIP),this.setColour(X.getColor("input")),this.pinChoices=["PIN"],this.otherPin=[!1],"heb-wx"===e.boardType.name?this.appendDummyInput().appendField("Sony Remote value received"):this.addPinMenu("Sony Remote value received from PIN",null,0),this.setInputsInline(!0),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number")},addPinMenu:function(e,t,n){const i=x();this.appendDummyInput("SET_PIN").appendField(e,"LABEL").appendField(new(_().FieldDropdown)(i.digital.concat([["other","other"]]),(function(e){this.getSourceBlock().setToOther(e,t,n)})),this.pinChoices[n]),this.moveBefore=t,this.otherPin[n]=!1},setToOther:function(e,t,n){if("other"===e){const e=x();this.otherPin[n]=!0;const i=this.getFieldValue("LABEL");if(this.getInput("SET_PIN")&&this.removeInput("SET_PIN"),this.appendValueInput(this.pinChoices[n]).appendField(i).setCheck("Number").appendRange("A,"+e.digital.toString()),t)this.moveInputBefore(this.pinChoices[n],t);else{const e=this;setTimeout((function(){e.render()}),200)}}},mutationToDom:function(){const e=document.createElement("mutation");for(let t=0;t<this.pinChoices.length;t++)e.setAttribute("otherpin"+t,this.otherPin[t].toString());return e},domToMutation:function(e){for(let t=0;t<this.pinChoices.length;t++){"true"===e.getAttribute("otherpin"+t)&&this.setToOther("other",this.moveBefore,t)}}},_().propc.sirc_get=function(){let e="0";e="heb-wx"===G().boardType.name?"23":this.otherPin[0]?_().propc.valueToCode(this,"PIN",_().propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN"),this.disabled||(_().propc.definitions_.sirc='#include "sirc.h"',_().propc.setups_.sirc="sirc_setTimeout(70);");return["sirc_button("+e+")",_().propc.ORDER_NONE]},_().Blocks.sound_impact_run={helpUrl:_().MSG_SOUND_IMPACT_HELPURL,meta:{supportedBoardTypes:["activity-board","flip","other","propcfile"]},init:function(){this.setTooltip(_().MSG_SOUND_IMPACT_RUN_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput("PINS"),this.setInputsInline(!0),this.setNextStatement(!0,null),this.setPreviousStatement(!0,"Block"),this.userDefinedConstantsList_=$(),this.setPinMenus()},onchange:function(e){const t="CONSTANT_NAME";if(e.type===_().Events.BLOCK_CHANGE&&e.name&&e.name===t){const t=this.userDefinedConstantsList_.indexOf(e.oldValue);if(-1!==t){const n=this.getFieldValue("PIN");this.userDefinedConstantsList_[t]=e.newValue,n===e.oldValue?this.setPinMenus(e.oldValue,e.newValue):this.setPinMenus()}}if("delete"===e.type){let n="";const i=e.oldXml.getElementsByTagName("field");for(let e=0;e<i.length;e++)if(t===i[e].attributes.name.nodeValue){n=i[e].innerHTML;const t=this.userDefinedConstantsList_.indexOf(n);-1!==t&&(this.userDefinedConstantsList_.splice(t,1),this.setPinMenus());break}}if("create"===e.type){const n=e.xml.getElementsByTagName("field");for(let e=0;e<n.length;e++)if(t===n[e].attributes.name.nodeValue){const t=n[e].innerHTML;this.userDefinedConstantsList_.indexOf(t)<0&&(console.log(`Constant block created. Adding ${t} to pin list`),this.userDefinedConstantsList_.push(t),this.setPinMenus())}}},setPinMenus:function(e="",t=""){const n=this.getFieldValue("PIN");if(this.getInput("PINS")&&this.removeInput("PINS"),this.appendDummyInput("PINS").appendField("Sound Impact initialize PIN").appendField(new(_().FieldDropdown)(Q().concat(this.userDefinedConstantsList_.map((function(e){return[e,e]})))),"PIN"),n&&n===e&&t.length>0)this.setFieldValue(t,"PIN");else if(n){const e=this.getField("PIN").getOptions(!1);-1!==e.findIndex((e=>{if(e[0]===n)return!0}),n)?this.setFieldValue(n,"PIN"):(this.setFieldValue(e[0],"PIN"),console.log(`WARNING: Resetting pin selection to "${e[0][0]}"`))}},updateConstMenu:function(e,t){this.userDefinedConstantsList_=[];const n=_().getMainWorkspace().getBlocksByType("constant_define",!1);for(let i=0;i<n.length;i++){let o=n[i].getFieldValue("CONSTANT_NAME");o===e&&t&&(o=t),o&&this.userDefinedConstantsList_.push(o)}this.userDefinedConstantsList_=this.userDefinedConstantsList_.sortedUnique(),this.setPinMenus(e,t)}},_().propc.sound_impact_run=function(){if(!this.disabled){let e=this.getFieldValue("PIN");-1===Q().toString().indexOf(e+","+e)&&(e="MY_"+e),_().propc.definitions_.sound_impact='#include "soundimpact.h"',_().propc.setups_.sound_impact=`int *__soundimpactcog = soundImpact_run(${e});`}return""},_().Blocks.sound_impact_get={helpUrl:_().MSG_SOUND_IMPACT_HELPURL,meta:{supportedBoardTypes:["activity-board","flip","other","propcfile"]},init:function(){this.setTooltip(_().MSG_SOUND_IMPACT_GET_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Sound Impact get count"),this.setNextStatement(!1,null),this.setPreviousStatement(!1,null),this.setOutput(!0,"Number")},onchange:function(){Z("sound_impact_run")?this.setWarningText(null):this.setWarningText("WARNING: You must use a sound impact sensor\ninitialize block at the beginning of your program!")}},_().propc.sound_impact_get=function(){return-1===_().getMainWorkspace().getAllBlocks().toString().indexOf("Sound Impact initialize")?"// ERROR: Missing sound impact sensor initialize block!":["soundImpact_getCount()",_().propc.ORDER_ATOMIC]},_().Blocks.sound_impact_end={helpUrl:_().MSG_SOUND_IMPACT_HELPURL,meta:{supportedBoardTypes:["activity-board","flip","other","propcfile"]},init:function(){this.setTooltip(_().MSG_SOUND_IMPACT_END_TOOLTIP),this.setColour(X.getColor("input")),this.appendDummyInput().appendField("Sound Impact close"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null)},onchange:function(){Z("sound_impact_run")?this.setWarningText(null):this.setWarningText("WARNING: You must use a sound impact sensor\ninitialize block at the beginning of your program!")}},_().propc.sound_impact_end=function(){return Z("sound_impact_run")?"soundImpact_end(__soundimpactcog);\n":"// ERROR: Missing sound impact sensor initialize block!"};let ee=0;_().Blocks.variables_get={helpUrl:_().MSG_VARIABLES_HELPURL,init:function(){this.setTooltip(_().MSG_VARIABLES_GET_TOOLTIP),this.setColour(X.getColor("variables")),this.appendDummyInput("").appendField(_().LANG_VARIABLES_GET_TITLE_1).appendField(new(_().FieldVariable)(_().LANG_VARIABLES_GET_ITEM),"VAR"),this.setOutput(!0),this.typeCheckRun=null}},_().propc.variables_get=function(){return[_().propc.variableDB_.getName(this.getFieldValue("VAR"),_().VARIABLE_CATEGORY_NAME),_().propc.ORDER_ATOMIC]},_().Blocks.variables_set={helpUrl:_().MSG_VARIABLES_HELPURL,init:function(){this.setTooltip(_().MSG_VARIABLES_SET_TOOLTIP),this.setColour(X.getColor("variables")),this.appendValueInput("VALUE").appendField(_().LANG_VARIABLES_SET_TITLE_1).appendField(new(_().FieldVariable)(_().LANG_VARIABLES_SET_ITEM),"VAR").appendField("="),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0)}},_().propc.variables_set=function(){const e=_().propc.valueToCode(this,"VALUE",_().propc.ORDER_ASSIGNMENT)||"0",t=_().propc.variableDB_.getName(this.getFieldValue("VAR"),_().VARIABLE_CATEGORY_NAME);return void 0===_().propc.vartype_[t]?e.indexOf("int")>-1?_().propc.vartype_[t]="int":e.indexOf("float")>-1?(_().propc.vartype_[t]="float",_().propc.varlength_[t]="{{$var_length_"+t+"}};"):e.indexOf("char")>-1?(_().propc.vartype_[t]="char",_().propc.varlength_[t]="{{$var_length_"+t+"}};"):e.indexOf("char[]")>-1||e.indexOf('"')>-1&&e.indexOf('"')<4?_().propc.vartype_[t]="char *":e.indexOf(".")>-1?_().propc.vartype_[t]="float":e.indexOf("true")>-1||e.indexOf("false")>-1?_().propc.vartype_[t]="boolean":_().propc.vartype_[t]="int":e.indexOf("int")>-1?_().propc.vartype_[t]="int":e.indexOf("float")>-1?(_().propc.vartype_[t]="float",_().propc.varlength_[t]="{{$var_length_"+t+"}};"):e.indexOf("char")>-1?(_().propc.vartype_[t]="char",_().propc.varlength_[t]="{{$var_length_"+t+"}};"):e.indexOf("char[]")>-1&&(_().propc.vartype_[t]="char *"),t+" = "+e+";\n"},_().Blocks.array_get={helpUrl:_().MSG_ARRAYS_HELPURL,init:function(){this.setTooltip(_().MSG_ARRAY_GET_TOOLTIP),this.setColour(X.getColor("variables")),this.appendValueInput("NUM").setCheck("Number").appendField("array").appendField(new(_().FieldDropdown)([["list","list"]]),"VAR").appendField("element"),this.setInputsInline(!0),this.setOutput(!0,"Number"),this.arrayList=["list"],this.arrayInitWarnFlag=!1},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("array_list",this.arrayList.join(",")),e},domToMutation:function(e){const t=e.getAttribute("array_list");t&&(this.arrayList=t.split(",")),this.buildArrayMenu()},buildArrayMenu:function(){const e=this.getInput("NUM").connection.targetConnection;this.getInput("NUM")&&this.removeInput("NUM"),this.appendValueInput("NUM").setCheck("Number").appendField("array").appendField(new(_().FieldDropdown)((this.arrayList.length>0?this.arrayList:["list"]).map((function(e){return[e,e]})),(function(){this.getSourceBlock().arrayInitWarnFlag&&this.getSourceBlock().setWarningText(null)})),"VAR").appendField("element"),e&&this.getInput("NUM").connection.connect(e)},updateArrayMenu:function(e,t){if(this.isInFlyout)return;const n=this.getFieldValue("VAR"),i=["list"];_().getMainWorkspace().getBlocksByType("array_init",!1).forEach((function(e){i.push(e.getFieldValue("VAR"))})),this.arrayList=this.arrayList.concat(i),t&&this.arrayList.push(t),e&&(this.arrayList=this.arrayList.filter((function(t){return t!==e}))),this.arrayList=this.arrayList.sortedUnique(),this.buildArrayMenu(),t&&n&&n===e?this.setFieldValue(t,"VAR"):n&&this.getField("VAR")&&(this.arrayList.indexOf(n)>=0?(this.setFieldValue(n,"VAR"),this.arrayInitWarnFlag=!1):(this.setFieldValue("list","VAR"),this.setWarningText('The array "'+n+'" is no longer initialized.\nEither add an array initialize block\nor choose a different array.'),this.arrayInitWarnFlag=!0))},onchange:function(e){let t="",n=null,i=null,o=null;switch(e.type){case _().Events.BLOCK_DELETE:"array_init"===e.oldXml.attributes.type.nodeValue&&(t="array_init",n=e.oldXml.firstChild.innerHTML);break;case _().Events.BLOCK_CREATE:o=_().getMainWorkspace().getBlockById(e.blockId),o&&"array_init"===o.type&&(t="array_init",i=o.getFieldValue("VAR")),o===this&&this.updateArrayMenu();break;case _().Events.BLOCK_CHANGE:o=_().getMainWorkspace().getBlockById(e.blockId),o&&"array_init"===o.type&&"VAR"===e.name&&(t="array_init",i=e.newValue,n=e.oldValue);break;case _().Events.VAR_CREATE:}"array_init"===t&&this.updateArrayMenu(n,i);let s=null,l=null;if("array_get"===this.type||"array_set"===this.type){const e=this.getInput("NUM").connection.targetBlock();if(e&&"math_number"===e.type){const t=e.getFieldValue("NUM");("number"==typeof t||"string"==typeof t&&t.replace(/[^0-9]+/g,"")===t)&&(l=parseInt(t))}}else"array_fill"===this.type&&(l=this.getFieldValue("NUM").split(",").length);const r=this.getFieldValue("VAR");let a=0;_().getMainWorkspace().getBlocksByType("array_init",!1).forEach((function(e){e.getFieldValue("VAR")===r&&(a=parseInt(e.getFieldValue("NUM"),10))})),0===a?s=`WARNING: The array "${r}" has not been initialized!`:l&&(l>a||l<0)&&(s="WARNING: You are trying to get an element from your array that does not exist!"),this.arrayInitWarnFlag||this.setWarningText(s)}},_().Blocks.array_init={helpUrl:_().MSG_ARRAYS_HELPURL,init:function(){this.setTooltip(_().MSG_ARRAY_INIT_TOOLTIP),this.setColour(X.getColor("variables")),this.appendDummyInput().appendField("array initialize").appendField(new(_().FieldTextInput)("list",(function(e){return e.replace(/ /g,"_").replace(/[^a-zA-Z0-9_]/g,"")})),"VAR").appendField("with").appendField(new(_().FieldNumber)("10",null,null,1),"NUM").appendField("elements"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0)},onchange:function(e){const t=_().getMainWorkspace().getBlockById(e.blockId);if(t&&t.type===this.type){const e=this.getFieldValue("VAR"),t=_().getMainWorkspace().getAllBlocks(!1).toString();let n=null;const i=t.indexOf("array initialize "+e+" with");t.indexOf("array initialize "+e+" with",i+1)>-1&&(n='WARNING! you can only initialize the array "'+e+'" once!'),this.setWarningText(n)}}},_().Blocks.array_fill={helpUrl:_().MSG_ARRAYS_HELPURL,init:function(){this.setTooltip(_().MSG_ARRAY_FILL_TOOLTIP),this.appendDummyInput("NUMS").appendField("array fill").appendField(new(_().FieldDropdown)([["list","list"]]),"VAR").appendField("with values").appendField(new(_().FieldTextInput)("10,20,30,40,50"),"NUM"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setColour(X.getColor("variables")),this.arrayList=["list"],this.arrayInitWarnFlag=!1},mutationToDom:_().Blocks.array_get.mutationToDom,domToMutation:_().Blocks.array_get.domToMutation,buildArrayMenu:function(){const e=this.getFieldValue("NUM")||"10,20,30,40,50",t=this.getField("VAR").getValue()||"";this.arrayList.includes(t)||this.arrayList.push(t);const n=this.getFieldValue("NUM");this.getInput("NUMS")&&this.removeInput("NUMS"),this.appendDummyInput("NUMS").appendField("array fill").appendField(new(_().FieldDropdown)((this.arrayList.length>0?this.arrayList:["list"]).map((function(e){return[e,e]}))),"VAR").appendField("with values").appendField(new(_().FieldTextInput)(e),"NUM"),this.setFieldValue(n,"NUM")},updateArrayMenu:_().Blocks.array_get.updateArrayMenu,onchange:_().Blocks.array_get.onchange},_().Blocks.array_set={helpUrl:_().MSG_ARRAYS_HELPURL,init:function(){this.setTooltip(_().MSG_ARRAY_SET_TOOLTIP),this.setColour(X.getColor("variables")),this.appendValueInput("NUM").appendField("array").setCheck("Number").appendField(new(_().FieldDropdown)([["list","list"]]),"VAR").appendField("element"),this.appendValueInput("VALUE").setCheck("Number").appendField("="),this.setInputsInline(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.arrayList=["list"],this.arrayInitWarnFlag=!1},mutationToDom:_().Blocks.array_get.mutationToDom,domToMutation:_().Blocks.array_get.domToMutation,buildArrayMenu:function(){const e=this.getInput("NUM").connection.targetConnection;this.getInput("NUM")&&this.removeInput("NUM"),this.appendValueInput("NUM").appendField("array").setCheck("Number").appendField(new(_().FieldDropdown)((this.arrayList.length>0?this.arrayList:["list"]).map((function(e){return[e,e]}))),"VAR").appendField("element"),this.moveInputBefore("NUM","VALUE"),e&&this.getInput("NUM").connection.connect(e)},updateArrayMenu:_().Blocks.array_get.updateArrayMenu,onchange:_().Blocks.array_get.onchange},_().Blocks.array_clear={helpUrl:_().MSG_ARRAYS_HELPURL,init:function(){this.setTooltip(_().MSG_ARRAY_CLEAR_TOOLTIP),this.setColour(X.getColor("variables")),this.appendDummyInput("NUM").appendField("array clear").appendField(new(_().FieldDropdown)([["list","list"]]),"VAR"),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.arrayList=["list"],this.arrayInitWarnFlag=!1},mutationToDom:_().Blocks.array_get.mutationToDom,domToMutation:_().Blocks.array_get.domToMutation,buildArrayMenu:function(){this.getInput("NUM")&&this.removeInput("NUM"),this.appendDummyInput("NUM").appendField("array clear").appendField(new(_().FieldDropdown)((this.arrayList.length>0?this.arrayList:["list"]).map((function(e){return[e,e]}))),"VAR")},updateArrayMenu:_().Blocks.array_get.updateArrayMenu,onchange:_().Blocks.array_get.onchange},_().propc.array_clear=function(){const e=_().propc.variableDB_.getName(this.getFieldValue("VAR"),"Array");return-1===_().getMainWorkspace().getAllBlocks(!1).toString().indexOf("array initialize "+this.getFieldValue("VAR"))?'// ERROR: The array "'+this.getFieldValue("VAR")+'" has not been initialized!\n':"memset("+e+", 0, sizeof "+e+");\n"},_().propc.array_fill=function(){const e=_().propc.variableDB_.getName(this.getFieldValue("VAR"),"Array");let t=this.getFieldValue("NUM");t=0===t.indexOf("0x")||t.indexOf(",0x")>0?t.replace(/[^0-9xA-Fa-f,-.]/g,""):t.replace(/[^0-9b,-.]/g,""),t=t.replace(/,\./g,",0.").replace(/\b\.[0-9-]+,\b/g,",").replace(/\.[0-9],/g,",").replace(/,,/g,",0,").replace(/,\s*$/,""),t=t.split(".")[0];const n=t.replace(/,/g,"");let i=t.length-n.length+1,o=0,s="";const l=_().getMainWorkspace().getAllBlocks();if(l.toString().indexOf("array initialize "+this.getFieldValue("VAR"))>-1){let n="";for(let e=0;e<l.length;e++)if(l[e].toString().indexOf("array initialize "+this.getFieldValue("VAR"))>-1){n=l[e].toString().replace(/[^0-9]/g,"");break}o=parseInt(n,10),i>o&&(s+="// WARNING: You are trying to add more elements to your\n",s+="//          array than you initialized your array with!\n",i=o),s+="int __tmpArr"+ee.toString()+"[] = {"+t+"};\n",s+="memcpy("+e+", __tmpArr"+ee.toString()+", "+i+" * sizeof(int));\n",ee++}else s='// ERROR: The array "'+this.getFieldValue("VAR")+'" has not been initialized!\n';return s},_().propc.array_get=function(){return[_().propc.variableDB_.getName(this.getFieldValue("VAR"),"Array")+"["+(_().propc.valueToCode(this,"NUM",_().propc.ORDER_NONE)||"0")+"]",_().propc.ORDER_ATOMIC]},_().propc.array_init=function(){const e=_().propc.variableDB_.getName(this.getFieldValue("VAR"),"Array"),t=this.getFieldValue("NUM")||"10";return this.disabled||(_().propc.global_vars_["__ARRAY"+e]="int "+e+"["+t+"];"),""},_().propc.array_set=function(){const e=_().propc.variableDB_.getName(this.getFieldValue("VAR"),"Array"),t=_().propc.valueToCode(this,"NUM",_().propc.ORDER_NONE)||"0",n=_().propc.valueToCode(this,"VALUE",_().propc.ORDER_NONE)||"0";let i=e+"["+t+"] = "+n+";\n";const o=_().getMainWorkspace().getAllBlocks();if(o.toString().indexOf("array initialize "+this.getFieldValue("VAR"))>-1){let s="";for(let e=0;e<o.length;e++)if(o[e].toString().indexOf("array initialize "+this.getFieldValue("VAR"))>-1){s=o[e].toString().replace(/[^0-9]/g,"");break}t.replace(/[^0-9]+/g,"")===t?(parseInt(t)>=parseInt(s,10)||parseInt(t)<0)&&(i="// WARNING: You are trying to set an element\nin your array that does not exist!\n"):(i=e+"[constrainInt("+t+", 0, ",i+=(parseInt(s,10)-1).toString(10),i+=")] = "+n+";\n")}else i='// WARNING: The array "'+this.getFieldValue("VAR")+'" has not been initialized!\n';return i};var te=n(259);let ne=null;function ie(){return ne}class oe{constructor(e,t,n){this.callback=t,this.element=e,this.buffer={alert:!1,alertTimeout:null,chars:"",textArray:[""]},this.echo={keys:!0,trap:!1,buffer:[]},this.cursor={x:0,y:0,xf:0,yf:0,setFlag:0,scrollTo:!0,scrolled:0},this.size={charactersWide:256,tabSpacing:5},this.ascii2unicode=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","¢","£","¥","₧","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","⌐","¬","½","¼","¡","«","»","░","▒","▓","│","┤","╡","╢","╖","╕","╣","║","╗","╝","╜","╛","┐","└","┴","┬","├","─","┼","╞","╟","╚","╔","╩","╦","╠","═","╬","╧","╨","╤","╥","╙","╘","╒","╓","╫","╪","┘","┌","█","▄","▌","▐","▀","α","ß","Γ","π","Σ","σ","µ","τ","Φ","Θ","Ω","δ","∞","φ","ε","∩","≡","±","≥","≤","⌠","⌡","÷","≈","°","∙","·","√","ⁿ","²","■"," "],n&&(n.echoKeys&&(this.echo.keys=n.echoKeys),n.trapEchos&&(this.echo.trap=n.trapEchos),n.scrollToCursor&&(this.cursor.scrollTo=n.scrollToCursor),n.extendedAsciiMap&&(this.ascii2unicode=n.extendedAsciiMap),n.charactersWide&&!isNaN(n.charactersWide)&&n.charactersWide>1&&(this.size.charactersWide=n.charactersWide),n.tabSpacing&&!isNaN(n.tabSpacing)&&n.tabSpacing>1&&(this.size.tabSpacing=n.tabSpacing)),this._setupTerminalCss(n),this._setupWarningBox(n),this._addSoundElement(),this._setupListeners(this),this.resize(),ne=this}_setupTerminalCss(e){const t=window.getComputedStyle(this.element),n=t.getPropertyValue("color"),i=t.getPropertyValue("background-color");let o,s=window.document.styleSheets[0];o=".propTerm_ {",o+="vertical-align: text-top;",o+="overflow-y: scroll;",o+="overflow-x: scroll;",o+="}",s.insertRule(o,s.cssRules.length),s=window.document.styleSheets[0],o=".propTerm_:focus {",o+="outline-width: 0;",o+="}",s.insertRule(o,s.cssRules.length),s=window.document.styleSheets[0],o=".visual-beep_ {",o+="animation-name: vbeep_;",o+="animation-duration: .25s;",o+="}",s.insertRule(o,s.cssRules.length),s=window.document.styleSheets[0],o="@keyframes vbeep_ {",o+="0% {",o+="background: "+n+";",o+="color: "+i+";",o+="}",o+="100% {",o+="background: "+i+";",o+="color: "+n+";",o+="}",o+="}",s.insertRule(o,s.cssRules.length),s=window.document.styleSheets[0],o=".warning-text_ {",o+="font-size: 11px;",o+="background-color: #f2dede;",o+="border: 1px solid rgb(235, 204, 209);",o+="border-radius: 4px;",o+="margin-bottom: 5px;",o+="padding: 3px;",o+="color:rgb(169, 68, 66);",o+="}",s.insertRule(o,s.cssRules.length),this.element.classList.add("propTerm_");let l=1;e&&e.tabIndex&&(l=e.tabIndex),this.element.setAttribute("tabindex",l.toString(10))}_addSoundElement(){if(!document.getElementById("term-beep_")){const e=document.createElement("audio");e.id="term-beep_",e.style.display="none",e.controls=!1,e.src="data:audio/wav;base64,UklGRrQJAABXQVZFZm10IBAAAAABAAIAESsAACJWAAACAAgATElTVBoAAABJTkZPSVNGVA4AAABMYXZmNTguMjAuMTAwAGRhdGFuCQAAg4OqqrCwiYlfX0lJbm6Wlre3m5tyckpKW1uEhK6ura2Dg1lZS0t0dJyct7eUlGxsSUlhYYqKsrKnp35+U1NQUHl5o6O1tY6OZmZHR2hokJC2tqGheHhPT1VVf3+pqbGxiYlgYElJbW2Vlbe3m5tzc0tLWlqEhK6urq6EhFpaS0tzc5ubt7eVlW1tSUlgYImJsrKoqH5+VFRPT3l5oqK1tY+PZ2dHR2dnj4+1taKieXlPT1RUfn6oqLKyiYlgYElJbW2UlLe3nJx0dEtLWVmDg62trq6EhFtbSkpycpubt7eWlm5uSUlgYIiIsbGpqX9/VVVPT3h4oaG2tpCQaGhHR2Zmjo61taOjeXlQUFNTfn6np7KyiophYUlJbGyUlLe3nJx1dUxMWVmCgqysr6+FhVxcSkpycpqat7eXl29vSUlfX4iIsbGpqYCAVlZOTnd3oKC2tpCQaGhISGVljY21taOjenpQUFNTfX2mprOzi4tiYkhIa2uUlLe3nZ10dExMWVmBgaysr6+GhlxcSkpxcZmZuLiXl29vSUleXoeHsLCqqoCAVlZOTnd3n5+2tpGRaWlISGRkjY21taSke3tRUVJSfHymprS0i4tjY0hIa2uTk7a2np51dU1NWFiCgqysr6+Ghl1dSkpwcJiYuLiYmHBwSkpdXYaGsLCrq4GBV1dNTXZ2n5+2tpKSampISGRkjIy0tKWle3tRUVFRe3ulpbS0jIxkZEhIamqSkra2n592dk1NV1eBgaursLCGhl1dSkpwcJeXuLiZmXFxSkpcXIaGr6+srIGBWFhNTXV1np62tpOTa2tISGNji4u0tKamfHxSUlFRe3ukpLW1jY1kZEhIaWmRkba2n593d05OVlaAgKqqsLCHh15eSUlvb5eXuLiZmXJySkpcXIWFr6+srIKCWVlMTHR0nZ23t5SUa2tISGJii4uzs6amfX1TU1BQenqjo7W1jY1lZUhIaGiQkLa2oKB3d05OVlaAgKmpsbGIiF9fSUlvb5eXt7eamnJySkpbW4SErq6trYODWVlLS3R0nJy3t5SUbGxJSWFhioqysqenfn5TU1BQeXmjo7W1jo5mZkdHaGiQkLa2oaF4eE9PVVV/f6mpsbGIiGBgSUlubpaWt7ebm3JySkpbW4SErq6trYSEWlpLS3Nzm5u3t5WVbW1JSWBgiYmysqiofn5UVE9PeXmiorW1j49nZ0dHZ2ePj7W1oqJ5eU9PVFR+fqiosrKJiWBgSUltbZWVt7ebm3NzS0taWoSErq6uroODWlpLS3Jym5u3t5aWbm5JSWBgiIixsampf39VVU9PeHihoba2kJBoaEdHZmaOjrW1o6N5eVBQU1N+fqensrKKimFhSUlsbJSUt7ecnHR0S0tZWYODra2uroSEW1tKSnJympq4uJeXb29JSV9fiIixsampgIBWVk5Od3egoLa2kJBoaEhIZWWNjbW1o6N6elBQU1N9faams7OLi2JiSEhra5SUt7ednXR0TExZWYKCrKyvr4WFXFxKSnJympq3t5eXb29JSV5eh4ewsKqqgIBWVk5Od3efn7a2kZFpaUhIZGSNjbW1pKR7e1FRUlJ8fKamtLSLi2NjSEhra5OTtraennV1TU1YWIGBrKyvr4aGXFxKSnFxmZm4uJeXb29JSV5eh4ewsKurgYFXV01Ndnafn7a2kpJqakhIZGSMjLS0paV7e1FRUVF7e6WltLSMjGRkSEhqapKStrafn3Z2TU1XV4GBq6uwsIaGXV1KSnBwmJi4uJiYcHBKSl1dhoawsKurgYFXV0xMdXWenra2k5Nra0hIY2OLi7S0pqZ8fFJSUVF7e6SktbWNjWRkSEhpaZGRtrafn3d3Tk5WVoCAqqqwsIeHXl5JSW9vl5e4uJmZcXFKSlxchoavr6ysgYFYWExMdXWenre3lJRra0hIYmKLi7OzpqZ9fVNTUFB6eqOjtbWNjWVlSEhoaJCQtragoHd3Tk5WVoCAqamxsYiIX19JSW9vl5e3t5qacnJKSlxchYWvr6ysgoJZWUxMdHSdnbe3lJRsbEhIYWGKirOzp6d+flNTUFB5eaOjtbWOjmZmR0doaJCQtrahoXh4T09VVX9/qamxsYiIYGBJSW5ulpa3t5ubcnJKSltbhISurq2tg4NZWUtLdHScnLe3lJRsbElJYWGKirKyqKh+flRUT095eaKitbWPj2dnR0dnZ4+PtbWionl5T09UVH5+qKiysomJYWFKSm1tlJS2tpubdHRMTFtbg4Otra2tg4NbW0xMdHSbm7a2lJRtbUpKYWGJibGxp6d+flVVUFB4eKCgtbWPj2hoSEhnZ46OtbWionl5UVFUVH5+pqaysomJYmJJSW1tlJS2tpubdHRMTFpag4OsrK2thIRcXEtLc3Oamre3lZVubkpKYGCIiLGxqKh/f1ZWT094eKCgtbWQkGlpSEhmZo2NtLSjo3p6UVFTU319pqaysoqKY2NJSWxsk5O2tpycdXVNTVlZgoKsrK6uhYVcXEtLcnKZmbe3lpZvb0pKYGCIiLCwqal/f1ZWT093d5+ftbWQkGpqSEhlZYyMtLSjo3t7UlJTU3x8paWzs4uLZGRJSWtrkpK2tp2ddnZNTVlZgYGrq6+vhoZdXUpKcXGYmLe3l5dwcEpKX1+Hh7CwqamAgFdXTk53d5+ftbWRkWpqSEhlZYyMs7OkpHx8UlJSUnx8pKSzs4uLZGRJSWtrkpK1tZ6ednZOTlhYgYGqqq+vhoZeXkpKcXGXl7e3l5dxcUpKXl6Ghq+vqqqBgVhYTk52dp6etbWRkWtrSUlkZIuLs7OkpHx8U1NSUnt7o6O0tIyMZWVISGpqkZG1tZ+fd3dOTldXgICpqbCwh4dfX0pKcHCXl7e3mJhxcUpKXV2Ghq+vq6uBgVlZTU12dp2dtraSkmtrSUlkZIuLs7OlpXx8U1NSUnt7o6O0tI2NZmZISGlpkJC1tZ+fd3dPT1ZWgICpqbCwiIhgYEpKb2+Wlre3mZlycktLXFyFha6uq6uCgllZTU11dZyctraTk2xsSUljY4qKsrKlpX19VFRRUXp6o6O0tI2NZ2dISGhoj4+1taCgeHhQUFZWf3+oqLCwiIhgYEpKbm6Vlba2mppzc0tLXFyEhK2trKyDg1paTEx0dJubtraUlG1tSkpiYomJsbGmpn5+VVVRUXp6np6rq4qKcHBhYXV1hYWOjoaGfn4=",e.type="audio/wav",document.getElementsByTagName("body")[0].appendChild(e)}}_setupWarningBox(e){let t="Your program is sending too much data tothe terminal at once.<br>Try adding pauses or sending less data.";this.warningBox=document.createElement("div"),e&&e.overrunWarningText&&(t=e.overrunWarningText),e&&e.warningDivClassName?this.warningBox.classList.add(e.warningDivClassName):this.warningBox.classList.add("warning-text_"),this.warningBox.style.display="none",this.warningBox.innerHTML=t,this.element.parentNode.insertBefore(this.warningBox,this.element)}_getCharacterSize(e){const t=(this._getCharacterSize.canvas||(this._getCharacterSize.canvas=document.createElement("canvas"))).getContext("2d");return t.font=e,t.measureText("AA").width-t.measureText("A").width}_setupListeners(e){this.element.addEventListener("keydown",(function(t){const n=t.keyCode||t.which;8!==n&&13!==n||e._processKey(n,e),(32===n||n>47&&n<58||n>64&&n<91||n>95&&n<112||n>185&&n<193||n>218&&n<223)&&e._processKey(t.key.charCodeAt(0),e)}));const t=e.element;t.addEventListener("click",(function(){"▍"!==t.innerHTML[t.innerHTML.length-1]&&(t.innerHTML=t.innerHTML+"▍")})),t.addEventListener("blur",(function(){"▍"===t.innerHTML[t.innerHTML.length-1]&&(t.innerHTML=t.innerHTML.slice(0,-1),"▍"===t.innerHTML&&(t.innerHTML=""))}))}_processKey(e,t){const n=String.fromCharCode(e);t.echo.keys&&t.display(n),t.echo.trap&&t.echo.buffer.push(e),t.callback(n)}_changeCursor(e,t){try{1===t&&this.buffer.textArray[this.cursor.y].length>=this.cursor.x&&(this.buffer.textArray[this.cursor.y]=this.buffer.textArray[this.cursor.y].substr(0,this.cursor.x)),this.cursor.x+=e,this.cursor.y+=t,this.cursor.x>this.size.charactersWide-1&&(this.cursor.x-=this.size.charactersWide,this.cursor.y++,this.buffer.textArray[this.cursor.y]||(this.buffer.textArray[this.cursor.y]="")),this.cursor.x<0&&this.cursor.y>0?(this.cursor.y--,this.cursor.x=this.buffer.textArray[this.cursor.y].length,this.cursor.x>this.size.charactersWide-1&&(this.cursor.x=this.size.charactersWide-1,this.buffer.textArray[this.cursor.y]=this.buffer.textArray[this.cursor.y].substr(0,this.cursor.x))):this.cursor.x<0&&(this.cursor.x=0),1===t&&(this.cursor.x=0,this.buffer.textArray[this.cursor.y]||(this.buffer.textArray[this.cursor.y]="")),this.cursor.scrolled=2}catch(n){L(`_changeCursor: x=${e}, y=${t}, ${n.message}`)}}async _updateTermBox(e){let t;const n=document.getElementById("term-beep_");if(this.echo.trap)for(let t=0;t<this.echo.buffer.length;t++)if(this.echo.buffer[t]===e)return void this.echo.buffer.splice(t,1);switch(this.cursor.yf=this.cursor.y,4!==this.cursor.setFlag&&(this.cursor.xf=this.cursor.x),this.cursor.setFlag){case 3:this.cursor.xf=e,this.cursor.setFlag=4;break;case 2:case 4:this.cursor.yf=e,this.cursor.setFlag=0,this.setCursor(this.cursor.xf,this.cursor.yf);break;case 1:this.cursor.xf=e,this.cursor.setFlag=0,this.setCursor(this.cursor.xf,this.cursor.yf);break;case 0:default:switch(e){case 127:case 8:if(this.cursor.x+this.cursor.y>-1){if(this.buffer.textArray[this.cursor.y].length>1){if(this.cursor.x===this.buffer.textArray[this.cursor.y].length)this.buffer.textArray[this.cursor.y]=this.buffer.textArray[this.cursor.y].slice(0,-1);else if(this.cursor.x>0){const e=this.buffer.textArray[this.cursor.y];this.buffer.textArray[this.cursor.y]=e.substr(0,this.cursor.x-1)+" "+e.substr(this.cursor.x)}}else 1===this.buffer.textArray[this.cursor.y].length&&(this.buffer.textArray[this.cursor.y]=this.buffer.textArray[this.cursor.y]="");this._changeCursor(-1,0);break}case 13:case 10:this._changeCursor(0,1);break;case 9:t=5-this.cursor.x%this.size.tabSpacing;for(let e=0;e<t;e++)this.buffer.textArray[this.cursor.y]+=" ",this._changeCursor(1,0);break;case 0:case 16:this.buffer.textArray=null,this.buffer.textArray=[],this.buffer.textArray[0]="";case 1:this.cursor.x=0,this.cursor.y=0,this._changeCursor(0,0);break;case 3:this._changeCursor(-1,0);break;case 4:this._changeCursor(1,0);break;case 5:this._changeCursor(0,-1);break;case 6:this._changeCursor(0,1);break;case 7:this.element.classList.remove("visual-beep_"),this.element.classList.add("visual-beep_"),await n.play();break;case 11:this.buffer.textArray[this.cursor.y]=this.buffer.textArray[this.cursor.y].substr(0,this.cursor.x);break;case 12:for(let e=this.cursor.y+1;e<this.buffer.textArray.length;e++)this.buffer.textArray[e].pop();break;case 2:this.cursor.setFlag=3;break;case 14:case 15:this.cursor.setFlag=e-13;break;default:if(t="",t=e>127&&e<256?this.ascii2unicode[e-128]:String.fromCharCode(e),(this.buffer.textArray[this.cursor.y]||"").length>this.cursor.x){const e=this.buffer.textArray[this.cursor.y]||"";this.buffer.textArray[this.cursor.y]=e.substr(0,this.cursor.x)+t+e.substr(this.cursor.x+1)}else this.buffer.textArray[this.cursor.y]+=t;this._changeCursor(1,0)}}0===e&&this._displayTerm()}_termBufferWarning(){this.buffer.alert=!0,this.warningBox.style.display="block",this.buffer.alertTimeout&&clearTimeout(this.buffer.alertTimeout);const e=this;this.buffer.alertTimeout=setTimeout((function(){e.warningBox.style.display="none",e.buffer.alert=!1}),5e3)}_displayTerm(){this.cursor.y<this.buffer.textArray.length-1&&""===this.buffer.textArray[this.buffer.textArray.length-1]&&this.buffer.textArray.pop();const e=Math.floor(this.size.height/this.size.linesHigh);let t,n="";this.element===document.activeElement&&(n="▍"),t=this.buffer.textArray.join("\r")+n,""===this.buffer.textArray.join("")&&(t=n),this.cursor.scrolled>0&&this.cursor.scrollTo&&(this.element.style["overflow-y"]="hidden",this.element.scroll(0,(this.cursor.y-e/2)*this.size.linesHigh),this.element.style["overflow-y"]="scroll",this.cursor.scrolled--),this.element.innerHTML=t.replace(/ /g,"&nbsp;").replace(/\r/g,"<br>")}_sendBufferToTerm(){do{this._updateTermBox(this.buffer.chars.charCodeAt(0)),this.buffer.chars=this.buffer.chars.substr(1)}while(this.buffer.chars.length>0);this._displayTerm()}getCursor(){return{x:this.cursor.x,y:this.cursor.y}}setCursor(e,t){if(e>this.size.charactersWide-1&&(e%=this.size.charactersWide),!this.buffer.textArray[t])for(let e=this.buffer.textArray.length;e<=t;e++)this.buffer.textArray[e]="";for(;!this.buffer.textArray[t][e];)this.buffer.textArray[t]+=" ";this.cursor.x=e,this.cursor.y=t,this._changeCursor(0,0)}resize(){const e=window.getComputedStyle(this.element);this.size.width=parseFloat(e.getPropertyValue("width")||"0")-parseFloat(e.getPropertyValue("border-left")||"0")-parseFloat(e.getPropertyValue("border-right")||"0")-parseFloat(e.getPropertyValue("padding-left")||"0")-parseFloat(e.getPropertyValue("padding-right")||"0"),this.size.height=parseFloat(e.getPropertyValue("height")||"0")-parseFloat(e.getPropertyValue("border-top")||"0")-parseFloat(e.getPropertyValue("border-bottom")||"0")-parseFloat(e.getPropertyValue("padding-top")||"0")-parseFloat(e.getPropertyValue("padding-bottom")||"0"),this.size.linesHigh=parseFloat(e.getPropertyValue("line-height")),this.size.charactersWide||(this.size.charactersWide=Math.floor((this.size.width-20)/this._getCharacterSize(e.getPropertyValue("font"))))}display(e){if(this.buffer.chars||(this.buffer.chars=""),e){const t=this.buffer.chars.length;this.buffer.chars+=e,0===t?this._sendBufferToTerm():t>255&&!1===this.buffer.alert&&this._termBufferWarning()}else this._updateTermBox(0),this.buffer.chars=""}getText(){return this.buffer.textArray.join("\r")}focus(){"div"===this.element.tagName.toLowerCase()&&this.element.focus()}blur(){"div"===this.element.tagName.toLowerCase()&&this.element.blur()}static getPTerm(){return this}}const se=!1,le="ws",re="",ae={available:!1,portsAvailable:!1,path:"localhost",port:6009,type:re,rxBase64:!0,loadBinary:!1,resultLog:"",portListReceiveCountUp:0,activeConnection:null,sendCharacterStreamTo:null,portList:[],selectedPort_:"",lastPortUpdate_:0,terminalBaudRate:115200,loaderResetDetect:!1,loaderIsDone:!1,launcherVersionDetected:"",clearLauncherVersion:function(){this.launcherVersionDetected=""},getLauncherVersion:function(){return this.launcherVersionDetected},setLauncherVersion:function(e){e.length>0&&(this.launcherVersionDetected=e)},setTerminalBaudRate:function(e){this.terminalBaudRate=e},url:function(e,t){return(t||window.location.protocol.replace(":",""))+"://"+this.path+":"+this.port+"/"+(e||"")},isPortListTimeOut:function(){return this.portListReceiveCountUp>3},getSelectedPort:function(){return this.selectedPort_},setSelectedPort:function(e){!e.startsWith("Search")&&this.activeConnection&&e!==this.getSelectedPort()&&(this.selectedPort_=e,this.activeConnection.send(JSON.stringify({type:"pref-port",portPath:e})))},addPort:function(e){this.portList.push(e),this.lastPortUpdate_=Date.now()},clearPortList:function(){this.portList=[],this.lastPortUpdate_=Date.now()},getPortLastUpdate:function(){return this.lastPortUpdate_},wsSendHello:function(){const e=JSON.stringify({type:"hello-browser"});this.activeConnection?this.activeConnection.send(e):L('Cannot send "hello-browser message. Connection is closed."')},wsSendRequestPortList:function(){const e=JSON.stringify({type:"port-list-request",msg:"port-list-request"});this.activeConnection?this.activeConnection.send(e):L('Cannot send "port-list-request message. Connection is closed."')},wsSendLoadProp:async function(e,t,n,i){const o={type:"load-prop",action:e,portPath:i,debug:n||"none",extension:t.extension,payload:t.binary};if(this.activeConnection){se;const e=JSON.stringify(o);se,this.loaderResetDetect=!1,this.loaderIsDone=!1,this.activeConnection.send(e)}else L(`Cannot send "load-prop:${e} message. Connection is closed."`)},wsSendSerialTerminal(e,t,n){if(!e)throw new Error("Action was not provided in call to wsSendTerminal");const i=e.toLowerCase();if(!["open","close","msg"].includes(i))throw new Error(`The supplied action, '${e}', is unsupported.`);const o={type:"serial-terminal",action:i,outTo:"terminal",portPath:t,baudrate:this.terminalBaudRate.toString(10),msg:n},s=JSON.stringify(o);this.activeConnection?this.activeConnection.send(s):L(`Cannot send "serial-terminal message, action: ${i}. Connection is closed."`)},version:{MINIMUM_ALLOWED:"1.0.1",RECOMMENDED:"1.0.1",current:"1.0.4",currentAsNumber:0,isValid:!1,isRecommended:!1,isCoded:!1,getNumeric:function(e){let t=e.split(".");return t.push("0"),t.length<3&&(1===t.length?t="0.0.0":t.unshift("0")),Number(t[0])<<20|Number(t[1])<<10|Number(t[2])},set:function(e){this.current=e,this.currentAsNumber=this.getNumeric(e),this.isValid=this.getNumeric(e)>=this.getNumeric(this.MINIMUM_ALLOWED),this.isRecommended=this.getNumeric(e)>=this.getNumeric(this.RECOMMENDED),ae.setLauncherVersion(e)}},closeConnection:function(){L("Closing the WS connection"),this.activeConnection?(L(`WS connection is active. Ready: \n          ${this.activeConnection.readyState}`),this.activeConnection.close(1e3,"Normal closure"),this.activeConnection=null):L("WS connection is null"),this.available=!1,this.portsAvailable=!1,this.selectedPort_="",this.lastPortUpdate_=0,this.clearLauncherVersion()}};var pe=n(755);let ce=!1;function de(){ae.sendCharacterStreamTo="term";let e="open";const t=Ve(),n=ae.terminalBaudRate;"none"!==t?mt([_().Msg.DIALOG_TERMINAL_CONNECTION_ESTABLISHED,t,_().Msg.DIALOG_TERMINAL_AT_BAUDRATE,n.toString(10)].join[" "]):(mt(_().Msg.DIALOG_TERMINAL_NO_DEVICES_TO_CONNECT),ie().display(_().Msg.DIALOG_TERMINAL_NO_DEVICES+"\n")),ae.wsSendSerialTerminal("open",t,"none"),ce||(ce=!0,pe("#console-dialog").on("hidden.bs.modal",(function(){ae.sendCharacterStreamTo=null,L(`Closing console window. Action is: ${e}`),"close"!==e&&(e="close",mt(null),ae.wsSendSerialTerminal(e,t,"none")),L("Flushing the terminal buffer"),ie().display(null)}))),pe("#console-dialog").modal("show")}var _e=n(755);function ue(){ae.activeConnection||ae.available?he(!0):he(!1);const e=G();let t=!1;e?("s3"===e.boardType.name&&(t=!0),Rt()?(ge(!0,!0),t?(Te(!1,!1),Ie(!0,!1),be(!0,!1),Ee(!1,!1),t=!0):(Te(!0,!1),Ie(!0,!1),be(!0,!1),Ee(!0,!1)),ae.activeConnection||ae.available&&ae.type===le?ae.portsAvailable&&ae.portList.length>0&&ae.getSelectedPort().length>0?t?(Te(!1,!1),Ie(!0,!0),be(!0,!0),Ee(!1,!1)):(Te(!0,!0),Ie(!0,!0),be(!0,!0),Ee(!0,!0)):function(e){e?(Ie(!1,!1),Ee(!1,!1)):(Ie(!0,!1),Ee(!0,!1));Te(!0,!1),be(!0,!1)}(t):(he(!1),me(!0,t))):me(!1,t)):me(!1)}function he(e){e?(_e("#client-available").removeClass("hidden"),_e("#client-unavailable").addClass("hidden")):(_e("#client-available").addClass("hidden"),_e("#client-unavailable").removeClass("hidden"))}function me(e,t=!1){e||ge(!0,!1),t?(Ie(!1,!1),Ee(!1,!1)):(Ie(!0,!1),Ee(!0,!1)),Te(!0,!1),be(!0,!1)}function ge(e,t){const n=_e("#prop-btn-comp");n&&Se(n,e,t)}function Te(e,t){const n=_e("#prop-btn-ram");n&&Se(n,e,t)}function Ie(e,t){const n=_e("#prop-btn-eeprom");n&&Se(n,e,t)}function be(e,t){const n=_e("#prop-btn-term");n&&Se(n,e,t)}function Ee(e,t){const n=_e("#prop-btn-graph");n&&Se(n,e,t)}function Se(e,t,n){t?(e.removeClass("hidden"),n?e.removeClass("disabled"):e.addClass("disabled")):e.addClass("hidden")}var fe=n(755);const Oe=!1,Re="hello-client",Le="port-list",Ne="serial-terminal",Ae="ui-command",Ce="alert",ke="open-terminal",Pe="close-terminal",ye="open-graph",Fe="close-graph",Me="clear-compile",De="message-compile",ve="close-compile",Be="console-log",Ge="websocket-close",we=function(){ae.activeConnection?ae.getPortLastUpdate()<=Date.now()-15e3&&(ae.portListReceiveCountUp++,ae.isPortListTimeOut()?(L("Timeout waiting for client port list!"),ue()):L("WARNING: Expecting a port list from client.")):(L("Looking for the BlocklyProp Launcher"),ae.clearLauncherVersion(),ae.available||(L("Connecting to BP Launcher client"),function(){if(!ae.available){let e;try{e=new WebSocket(ae.url("","ws"))}catch(e){return void L(`Unable to connect to the launcher: ${e.message}`)}e.onopen=function(t){ae.activeConnection=e,L(`Connection is: ${t.type}, URL: ${t.target.url}.`),ae.wsSendHello()},e.onerror=function(t){ae.type===le?(L("Unable to find client"),e.close()):L("Communication Error")},e.onmessage=function(e){const t=JSON.parse(e.data);if(t.type===Re)!function(e){e&&(L(`Checking client version: "${e}"`),ae.version.set(e));ae.version.isRecommended||(fe(".bpc-version").addClass("hidden"),0===ae.version.currentAsNumber?fe("#client-unknown-span").removeClass("hidden"):ae.version.isValid?fe("#client-warning-span").removeClass("hidden"):fe("#client-danger-span").removeClass("hidden"),fe(".client-required-version").html(ae.version.RECOMMENDED),0===ae.version.currentAsNumber?fe(".client-your-version").html("<b>UNKNOWN</b>"):fe(".client-your-version").html(ae.version.current),fe("#client-version-modal").modal("show"))}(t.version),L(`BlocklyProp Launcher v${t.version} detected.`),ae.rxBase64=t.rxBase64||!1,ae.type=le,ae.available=!0,ae.wsSendRequestPortList(),ue();else if(t.type===Le)(function(e){Oe;Oe;ae.clearPortList(),e.ports.length>0&&e.ports.forEach((function(e){ae.addPort(e)}));xe(null),ae.portListReceiveCountUp=0})(t);else if(t.type===Ne&&("string"==typeof t.msg||t.msg instanceof String)){let e;try{e=atob(t.msg)}catch(n){n.toString().indexOf("'atob'")<0&&console.error(n),e=t.msg}if(ae.sendCharacterStreamTo&&""!==e&&t.packetID>=0)if("term"===ae.sendCharacterStreamTo){const t=ie();t.display(e),t.focus()}else!function(e){if(e.indexOf("ailed")>-1)mt(e);else{let t,n=0;for(let i=0;i<e.length;i++)if("\n"===e[i]&&(e[i]="\r"),"\r"===e[i]&&Ze){if(tt||(Je.push(it.split(",")),t=Je.length-1,n=Number(Je[t][0])||0,n/=1220.703125),Qe&&0!==Qe||(Qe=n,nt&&(Qe-=et,et=0)),t>0&&!nt&&parseFloat(Je[t][0])<parseFloat(Je[t-1][1])&&(ot+=lt),nt=!1,!tt){Je[t].unshift(n+ot-Qe);let e=Math.round(1e4*Je[t][0])/1e4+",";if("X"===pt.graph_type){let n=0;for(let i=2;i<Je[t].length;i+=2)e+=Je[t][i]+","+Je[t][i+1]+",",ct.series[n].push({x:Je[t][i]||null,y:Je[t][i+1]||null}),Je[t][0]>pt.sampleTotal&&ct.series[n].shift(),n++}else for(let n=2;n<Je[t].length;n++)e+=Je[t][n]+",",ct.series[n-2].push({x:Je[t][0],y:Je[t][n]||null}),qe(".ct_line").css("stroke-width","2.5px"),Je[t][0]>pt.sampleTotal&&ct.series[n-2].shift();at.push(e.slice(0,-1).split(",")),at.length>15e3&&at.shift()}it=""}else Ze?"-0123456789.,\r\n".indexOf(e[i])>-1&&(it+=e[i]):"\r"===e[i]&&(Ze=!0)}}(e)}else t.type===Ae?function(e){switch(e.action){case ke:L("MSG: Open Terminal"),de();break;case ye:gt();break;case Pe:L("MSG: Close Terminal"),fe("#console-dialog").modal("hide"),ae.sendCharacterStreamTo=null,ie().display(null);break;case Fe:fe("#graphing-dialog").modal("hide"),ae.sendCharacterStreamTo=null,It();break;case Me:fe("#compile-console").val("");break;case De:!function(e){const[t,n]=function(e){const t=e.split("-",1),n=[];return n.push(parseInt(t[0])),n.push(e.substr(5)),n}(e.msg);switch(t){case 5:return ae.loaderResetDetect=!1,ae.loaderIsDone=!0,ft("Succeeded."),void L("Project downloaded successfully");case 2:ft(".");break;case 102:ae.loaderResetDetect=!1,ae.loaderIsDone=!0,ft(`Failed!\n\n-------- loader messages --------\n${ae.resultLog}`);break;default:ae.resultLog=ae.resultLog+n+"\n"}Ot()}(e);break;case ve:He(),fe("#compile-console").val("");break;case Be:L(e.msg);break;case Ge:L("WARNING: Received a WS Close connection from server"),ae.closeConnection(),ue();break;case Ce:b(_().Msg.DIALOG_BLOCKLYPROP_LAUNCHER,e.msg);break;default:L(`Unknown message received: ${e.msg}`)}}(t):L("Unknown WS msg: "+JSON.stringify(t))},e.onclose=function(e){L(`Closing socket. Status code: ${e.code}`),ae.loaderResetDetect=!0,ae.activeConnection=null,ae.type=re,ae.available=!1,ue()}}}()))};const xe=function(e=null){e||(e=ae.portList);const t=function(){const e=fe("#comPort");if(e)try{const t=e.val();return e.empty(),t}catch(e){e&&L("Error: "+e.message)}return e.empty(),null}();if("object"==typeof e&&e.length>0){let t=!1;e.forEach((function(e){0===e.length&&(t=!0),Ue(e)})),(1===e.length&&!t||e.length>1)&&(ae.portsAvailable=!0)}else Ue(ae.available?_().Msg.DIALOG_PORT_SEARCHING:_().Msg.DIALOG_NO_DEVICE),ae.portsAvailable=!1;t&&function(e){const t=fe("#comPort");if(null!==e)return t.val(e),void ae.setSelectedPort(e);if(null===t.val()){fe("#comPort option").length>0&&t.val(fe("#comPort option:first").text())}}(t),ue()};function Ue(e){"string"==typeof e&&fe("#comPort").append(fe("<option>",{text:e}))}const Ve=function(){const e=fe("#comPort").val();return e===_().Msg.DIALOG_PORT_SEARCHING||e===_().Msg.DIALOG_NO_DEVICE?"none":e},He=()=>{console.log("Hide Compiler dialog window."),fe("#compile-dialog").modal("hide")};n(85),n(385),n(226);let We=null;class Xe{constructor(e){if(!We){const t="https://cdn.jsdelivr.net/npm/ace-builds@1.3.3/src-min-noconflict";ace.config.set("basePath",t);const n=ace.edit("code-propc");n.setTheme("ace/theme/chrome"),n.getSession().setMode("ace/mode/c_cpp"),n.getSession().setTabSize(2),n.$blockScrolling=1/0,n.setReadOnly(!0),"propcfile"===e&&n.setReadOnly(!1),We=n}}undo(){We.undo()}redo(){We.redo()}find(e,t,n){We.find(e,t,n)}replace(e,t,n){We.replace(t,n)}}function Ye(){let e=U.getEmptyProjectCodeHeader();const t=window.codePropC;return e+='<block type="propc_file" id="'+function(e){let t=btoa(e).replace(/=/g,"");const n=t.length;t=n<20?"zzzzzzzzzzzzzzzzzzzz".substr(n-20)+t:t.substr(n-20);return t}(t?t.getValue():"thequickbrownfoxjumpedoverthelazydog")+'" x="100" y="100">',e+='<field name="FILENAME">single.c</field>',e+='<field name="CODE">',t&&(e+=btoa(t.getValue().replace("/* EMPTY_PROJECT */\n",""))),e+="</field></block></xml>",e}function ze(){return We}const je=async(e,t)=>{let n=`https://${window.location.hostname}:443/single/prop-c/${e}`;"http:"===window.location.protocol&&(n=`http://${window.location.hostname}:5001/single/prop-c/${e}`);try{const e=await Ke(n,t);if(e.success)ft(`${e["compiler-output"]}${e["compiler-error"]}\n`);else if(e){L("Compiler service request failed");const t=e.success;let n="\nError: Unable to compile the project.\n";"rejected"===t?(n+="\nThe compiler service is temporarily unavailable or",n+=" unreachable.\nPlease try again in a few moments."):n+=`\n${e["compiler-error"]}`,ft(n),Y.uT(n)}return e}catch(e){L("(PTC) Error while compiling"),L(`(PTC) Message: ${e.message}`)}},Ke=async function(e,t=""){const n={method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:t};try{const t=await fetch(e,n);return await t.json()}catch(e){L(`Compiler error: ${e.message}`)}};var qe=n(755);let $e=null;const Je=[];let Ze=!1,Qe=null,et=0,tt=!1,nt=!1,it="",ot=0,st=null;const lt=53.6870912;let rt=null;const at=[],pt={showPoint:!1,fullWidth:!0,axisX:{type:te.AutoScaleAxis,onlyInteger:!0},refreshRate:250,sampleTotal:40,graph_type:"S"},ct={series:[[],[],[],[],[],[],[],[],[],[]]},dt=(e,t)=>{b(e,t)},_t=e=>{qe("#compile-dialog-title").text(e),qe("#compile-console").val("Compile... "),qe("#compile-dialog").modal("show")},ut=async(e,t,n,i)=>{if(!ae.portsAvailable)return void(ae.available?b(_().Msg.DIALOG_NO_DEVICE,_().Msg.DIALOG_NO_DEVICE_TEXT):b(_().Msg.DIALOG_DEVICE_COMM_ERROR,_().Msg.DIALOG_DEVICE_COMM_ERROR_TEXT));const o=ze(),s=o.getReadOnly()?C(_().propc.workspaceToCode(_().mainWorkspace)):o.getValue();if(s.indexOf("EMPTY_PROJECT")>-1)dt(_().Msg.DIALOG_EMPTY_PROJECT,_().Msg.DIALOG_CANNOT_COMPILE_EMPTY_PROJECT);else{_t(e);try{await je(t,s).then((async e=>{if(!e.success)return;const t=ht();ae.type===le&&(ft("Download..."),ae.resultLog="",ae.loadBinary=!1,await(async()=>{const n=Ve();await ae.wsSendLoadProp(i,e,t,n);for(let o=0;o<5&&(await A(800),!ae.loaderIsDone);o++)ae.loaderResetDetect&&(L(`Waiting for connection... (${o+1} of 5)`),null!==ae.activeConnection&&1===ae.activeConnection.readyState&&(L("Resubmitting download"),await ae.wsSendLoadProp(i,e,t,n)))})())}))}catch(e){L(`Catching : ${e.message}`)}}},ht=()=>{let e="";if("propcfile"!==G().boardType.name){const t=["console_print","console_print_variables","console_print_multiple","console_scan_text","console_scan_number","console_newline","console_clear","console_move_to_position","oled_font_loader","activitybot_display_calibration","scribbler_serial_send_text","scribbler_serial_send_char","scribbler_serial_send_decimal","scribbler_serial_send_decimal","scribbler_serial_send_ctrl","scribbler_serial_cursor_xy"];let n=0;for(let e=0;e<t.length;e++)n+=_().getMainWorkspace().getBlocksByType(t[e],!1).length;n>0?e="term":_().getMainWorkspace().getBlocksByType("graph_settings",!1).length>0&&(e="graph")}return e};function mt(e){qe(".connection-string").html(e||"")}function gt(){if(ae.sendCharacterStreamTo="graph",function(){if("propcfile"===G().boardType.name)return!1;const e=_().getMainWorkspace().getBlocksByType("graph_settings");if(e.length>0){L("found settings");const t=_().getMainWorkspace().getBlocksByType("graph_output");if(rt=[],!(t.length>0))return!1;{L("found block");let e=0;for(;t[0].getField("GRAPH_LABEL"+e);)rt.push(t[0].getFieldValue("GRAPH_LABEL"+e)),e++}return pt.refreshRate=100,pt.graph_type={AUTO:"S",FIXED:"S",AUTOXY:"X",FIXEDXY:"X",AUTOSC:"O",FIXEDSC:"O"}[e[0].getFieldValue("YSETTING")],e[0].getFieldValue("YMIN")||e[0].getFieldValue("YMAX")?pt.axisY={type:te.AutoScaleAxis,low:Number(e[0].getFieldValue("YMIN")||"0"),high:Number(e[0].getFieldValue("YMAX")||"100"),onlyInteger:!0}:pt.axisY={type:te.AutoScaleAxis,onlyInteger:!0},qe("#graph_x-axis_label").css("display","block"),pt.showPoint=!1,pt.showLine=!0,"X"===pt.graph_type&&(qe("#graph_x-axis_label").css("display","none"),e[0].getFieldValue("XMIN")||e[0].getFieldValue("XMAX")?pt.axisX={type:te.AutoScaleAxis,low:Number(e[0].getFieldValue("XMIN")||"0"),high:Number(e[0].getFieldValue("XMAX")||"100"),onlyInteger:!0}:pt.axisX={type:te.AutoScaleAxis,onlyInteger:!0},pt.showPoint=!0,pt.showLine=!1),"S"!==pt.graph_type&&"X"!==pt.graph_type||(pt.sampleTotal=Number(e[0].getFieldValue("XAXIS")||"10")),!0}return!1}()){if(null===$e?(It(),it="",$e=new te.Line("#serial_graphing",ct,pt),O("debug")&&L(pt.toString())):$e.update(ct,pt),ae.type===le&&ae.portsAvailable){const e={type:"serial-terminal",outTo:"graph",portPath:Ve(),baudrate:ae.terminalBaudRate.toString(10),msg:"none",action:"open"};"none"!==e.portPath?mt([_().Msg.DIALOG_TERMINAL_CONNECTION_ESTABLISHED,e.portPath,_().Msg.DIALOG_TERMINAL_AT_BAUDRATE,e.baudrate].join(" ")):mt(_().Msg.DIALOG_GRAPH_NO_DEVICES_TO_CONNECT),ae.activeConnection.send(JSON.stringify(e)),st||Tt("start"),qe("#graphing-dialog").on("hidden.bs.modal",(function(){ae.sendCharacterStreamTo=null,Tt("stop"),"close"!==e.action&&(e.action="close",mt(null),ae.activeConnection.send(JSON.stringify(e)))}))}else mt(_().Msg.DIALOG_GRAPH_NO_DEVICES_TO_CONNECT);qe("#graphing-dialog").modal("show"),document.getElementById("btn-graph-play")&&(document.getElementById("btn-graph-play").innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="14" height="15"><path d="M5.5,2 L4,2 4,11 5.5,11 Z M8.5,2 L10,2 10,11 8.5,11 Z" style="stroke:#fff;stroke-width:1;fill:#fff;"/></svg>')}else b(_().Msg.DIALOG_MISSING_BLOCKS,_().Msg.DIALOG_MISSING_BLOCKS_GRAPHING)}const Tt=function(e){"start"===e||"play"===e?(!function(){let e="",t='<svg width="60" height="300">';e+='"time",';let n=[1,2,3,4,5,6,7,8,9,10,11,12,13,14],i=["","","","","","","","","","","","","",""];"X"===pt.graph_type&&(n=[1,1,2,2,3,3,4,4,5,5,6,6,7,7],i=["x: ","y: ","x: ","y: ","x: ","y: ","x: ","y: ","x: ","y: ","x: ","y: ","x: ","y: "]);for(let o=0;o<rt.length;o++)t+='<g id="labelgroup'+(o+1)+'" transform="translate(0,'+(30*o+25)+')">',t+='<rect x="0" y = "0" width="60" height="26" rx="3" ry="3" id="label'+(o+1)+'" ',t+='style="stroke:1px;stroke-color:blue;" class="ct-marker-'+n[o]+'"/><rect x="3" y="12"',t+='width="54" height="11" rx="3" ry="3" id="value'+(o+1)+'bkg" style="fill:rgba',t+='(255,255,255,.7);stroke:none;"/><text id="label'+(o+1)+'text" x="3" ',t+='y="9" style="font-family:Arial;font-size: 9px;fill:#fff;font-weight:bold;">'+i[o],t+=rt[o]+'</text><text id="gValue'+(o+1)+'" x="5" y="21" style="align:right;',t+='font-family:Arial;font-size: 10px;fill:#000;"></text></g>',e+='"'+rt[o].replace(/"/g,"_")+'",';t+="</svg>",at.push(e.slice(0,-1)),qe("#serial_graphing_labels").html(t)}(),st&&clearInterval(st),st=setInterval((function(){$e.update(ct),function(){const e=Je.length-1;if(Je[e]){const t=Je[e].length;for(let n=2;n<t;n++){const t=document.getElementById("gValue"+(n-1).toString(10));t&&(t.textContent=Je[e][n])}}}()}),pt.refreshRate)):"stop"!==e&&"pause"!==e||(clearInterval(st),st=null),"stop"===e&&(tt=!1,It(),bt("play")),"clear"===e&&It(),"play"===e&&(0===ct.series[0].length&&It(),tt=!1,nt=!0),"pause"===e&&Je.slice(-1)[0]&&(tt=!0,it="",Qe=0,ot=0,et=Je.slice(-1)[0][0])};function It(){Je.length=0,at.length=0;for(let e=0;e<10;e++)ct.series[e]=[];$e&&$e.update(ct,pt,!0),it="",Qe=0,ot=0,et=0,Ze=!1}function bt(e){if(document.getElementById("btn-graph-play")){const t=document.getElementById("btn-graph-play").innerHTML;"play"!==e&&(t.indexOf("pause")>-1||-1===t.indexOf("\x3c!--p"))?(document.getElementById("btn-graph-play").innerHTML='\x3c!--play--\x3e<svg xmlns="http://www.w3.org/2000/svg" width="14" height="15"><path d="M4,3 L4,11 10,7 Z" style="stroke:#fff;stroke-width:1;fill:#fff;"/></svg>',e||Tt("pause")):(document.getElementById("btn-graph-play").innerHTML='\x3c!--pause--\x3e<svg xmlns="http://www.w3.org/2000/svg" width="14" height="15"><path d="M5.5,2 L4,2 4,11 5.5,11 Z M8.5,2 L10,2 10,11 8.5,11 Z" style="stroke:#fff;stroke-width:1;fill:#fff;"/></svg>',st||e||Tt("play"))}}function Et(e){const t=G();t&&"propcfile"!==t.boardType.name&&(new Xe(t.boardType.name),mn(t.code))}const St=function(){const e=qe("<form/>",{class:"form-inline"});qe("<span/>",{class:"space_right"}).text("http://").appendTo(e);const t=qe("<div/>",{class:"form-group"}).appendTo(e);qe("<input/>",{id:"domain_name",type:"text",class:"form-control",value:ae.path}).appendTo(t),qe("<span/>",{class:"space_left space_right"}).text(":").appendTo(e);const n=qe("<div/>",{class:"form-group"}).appendTo(e);qe("<input/>",{id:"port_number",type:"number",class:"form-control",value:ae.port}).appendTo(n),f(_().Msg.DIALOG_BLOCKLYPROP_LAUNCHER_CONFIGURE_TITLE,e,(function(e){e&&(ae.path=qe("#domain_name").val(),ae.port=qe("#port_number").val())}),_().Msg.DIALOG_SAVE_TITLE)};function ft(e){qe("#compile-console").val(qe("#compile-console").val()+e)}function Ot(){const e=document.getElementById("compile-console");e.scrollTop=e.scrollHeight}const Rt=()=>{let e=!1;if(_()&&_().Xml&&_().mainWorkspace){const t=_().Xml.workspaceToDom(_().mainWorkspace),n=_().Xml.domToText(t),i=U.getTerminatedEmptyProjectCodeHeader(),o=U.getTerminatedEmptyProjectCodeHeaderV2();n!==i&&n!==o&&(e=!0)}return e};n(587);var Lt=n(755);const Nt={isEventHandler:!1,initEventHandlers:function(){this.isEventHandler?L("New Project dialog handlers already initialized"):(Lt("#new-project-continue").on("click",(function(){kt()&&(Lt("#new-project-dialog").modal("hide"),Sn()),In(100)})),Lt("#new-project-dialog").on("keydown",(function(e){"new-project-description"!==document.activeElement.id&&"Enter"===e.key&&(kt()?(Lt("#new-project-dialog").modal("hide"),Sn()):(e.preventDefault(),Lt(this).trigger("submit")))})),Lt("#new-project-cancel").on("click",(()=>{Lt("#new-project-dialog").modal("hide"),!G()||G().board,Lt("#new-project-board-dropdown").removeClass("hidden"),Lt("#edit-project-details-static").addClass("hidden"),Lt("#new-project-board-type").val(""),Lt("#edit-project-board-type").html(""),Lt("#edit-project-created-date").html(""),Lt("#edit-project-last-modified").html("")})),Lt("#new-project-dialog").on("hidden.bs.modal",(function(){!G()||G().board})),this.isEventHandler=!0)},show:function(){if(!this.isEventHandler)return void L("Initialize New Project dialog event handlers first.");this.reset(),At(Lt("#new-project-board-type"),null),Lt("#new-project-dialog").modal({keyboard:!1,backdrop:"static"});const e=new Date;Lt("#edit-project-created-date").html(e),Lt("#edit-project-last-modified").html(e)},reset:function(){Lt("#new-project-name").val(""),Lt("#new-project-description").val(""),Lt("#new-project-dialog-title").html(y("editor_new_project_title"))}};function At(e,t){if(!e)return void L("Board Type UI element was not provided.");for(let t=e[0].options.length-1;t>=0;t--)e[0].options[t].remove();t||e.append(Lt("<option />").val("").text(y("project_create_board_type_select")).attr("disabled","disabled").attr("selected","selected"));for(const n in W)if(Object.prototype.hasOwnProperty.call(W,n)&&"default"!==n&&"propcfile"!==n&&"unknown"!==n){const i=W[n].name,o=W[n].description;if(t)if(i.toUpperCase()===t.toUpperCase())e.append(Lt("<option />").attr("selected","selected").val(i).text(o));else switch(t.toUpperCase()){case"FLIP":Ct(e,i,o);break;case"ACTIVITY-BOARD":case"HEB":case"HEB-WX":"other"===i&&Ct(e,i,o)}else Ct(e,i,o)}}function Ct(e,t,n){e.append(Lt("<option />").val(t).text(n))}function kt(){const e=Lt(".proj");return e.validate({rules:{"new-project-name":"required","new-project-board-type":"required"},messages:{"new-project-name":"Please enter a project name","new-project-board-type":"Please select a board type"}}),!!e.valid()}var Pt=n(755);const yt={isEventHandler:!1,initEventHandlers:function(){this.isEventHandler?L("Open Project dialog handlers already initialized"):(this.setContinueHandler(),this.setCancelHandler(),this.setEnterHandler(),this.isEventHandler=!0)},setContinueHandler:function(){this.isEventHandler||document.getElementById("edit-project-continue").addEventListener("click",(function(){yt.validateEditProjectForm()&&(Pt("#edit-project-dialog").modal("hide"),yt.updateProjectDetails())}))},setEnterHandler:function(){this.isEventHandler||document.getElementById("edit-project-dialog").addEventListener("keydown",(e=>{"edit-project-description"!==document.activeElement.id&&"Enter"===e.key&&(yt.validateEditProjectForm()?(Pt("#new-project-dialog").modal("hide"),yt.updateProjectDetails()):(e.preventDefault(),Pt(this).trigger("submit")))}))},setCancelHandler:function(){this.isEventHandler||Pt("#edit-project-cancel").on("click",(()=>{Pt("#edit-project-board-dropdown").removeClass("hidden"),Pt("#edit-project-details-ro").addClass("hidden"),Pt("#edit-project-board-type-select").val(""),Pt("#edit-project-board-type-ro").html(""),Pt("#edit-project-created-date-ro").html(""),Pt("#edit-project-last-modified-ro").html(""),Pt("#edit-project-dialog").modal("hide")}))},editProjectDetails:function(){const e=G();this.initEventHandlers(),document.getElementById("edit-project-name").value=e.name,document.getElementById("edit-project-description").value=e.description,At(Pt("#edit-board-type"),e.boardType.name.toUpperCase());const t=e.getCreated(),n=new Date(e.modified);document.getElementById("edit-project-created-date-ro").innerHTML=t.toLocaleDateString(),document.getElementById("edit-project-last-modified-ro").innerHTML=n.toLocaleDateString(),document.getElementById("edit-project-details-ro").classList.remove("hidden"),Pt("#edit-project-dialog").modal({keyboard:!1,backdrop:"static"})},validateEditProjectForm:function(){const e=Pt("#edit-project-form");return e.validate({rules:{"edit-project-name":"required","edit-project-board-type":"required"},messages:{"edit-project-name":"Please enter a project name","edit-project-board-type":"Please select a board type"}}),!!e.valid()},updateProjectDetails:function(){this.updateProjectNameDescription(Pt("#edit-project-name").val(),Pt("#edit-project-description").val()),this.updateProjectBoardType(Pt("#edit-board-type").val())},updateProjectNameDescription:(e,t)=>{const n=G();n.name!==e&&(n.name=e,an(n.name)),n.description!==t&&(n.description=t)},updateProjectBoardType:e=>{const t=G();t.getBoardName()!==e&&(t.setBoardType(e),pn(e))}};class Ft{constructor(e,t){this.startEpoch=0,this.nudgeUserTime=0===e?.25:e,this.myCallback=null,this.enableCallback=t,this.timer=null}getTimeSinceLastSave(){return(Date.now()-this.startEpoch)/6e4}getEpochTime(){return this.startEpoch}reset(){this.startEpoch=Date.now()}start(e){this.timer=setInterval(this.timeOut,6e4*e,this),this.reset()}stop(){this.timer&&clearInterval(this.timer)}timeOut(e){const t=6e4*e.nudgeUserTime;Date.now()-e.startEpoch>t&&e.myCallback&&this.enableCallback&&e.myCallback()}}const Mt=[];Mt.category_control="Control",Mt.category_operators="Operators",Mt.category_system="System",Mt.category_operators_numbers="Numbers",Mt.category_operators_strings="Strings",Mt.category_operators_arrays="Arrays",Mt.category_values="Values",Mt["category_input-output"]="Input/Output",Mt["category_input-output_pin-states"]="Pin states",Mt["category_input-output_timing"]="Timing",Mt.category_scribbler="Scribbler 3",Mt.category_scribbler_outputs="Actions",Mt.category_scribbler_inputs="Sensors",Mt.category_communicate="Communicate",Mt["category_communicate_serial-lcd"]="Serial LCD",Mt["category_communicate_parallel-lcd"]="Parallel LCD",Mt["category_communicate_serial-terminal"]="Terminal",Mt.category_communicate_oled="OLED",Mt.category_communicate_epaper="ePaper",Mt.category_communicate_graphing="Graph",Mt.category_communicate_protocols="Protocols",Mt.category_communicate_xbee="XBee",Mt.category_communicate_WS2812B="RGB LEDs",Mt["category_sensor-input"]="Sensor",Mt["category_sensor-input_LIS3DH"]="LIS3DH Accelerometer",Mt["category_sensor-input_LSM9DS1"]="LSM9DS1 IMU",Mt["category_sensor-input_etape"]="ETape liquid level",Mt["category_sensor-input_fingerprint"]="Fingerprint Scanner",Mt["category_sensor-input_gps"]="GPS module",Mt["category_sensor-input_hmc5883l"]="HMC5883L Compass",Mt["category_sensor-input_2axis-joystick"]="2-axis Joystick",Mt["category_sensor-input_4x4-keypad"]="4x4 Keypad",Mt["category_sensor-input_memsic-2axis"]="Memsic 2-axis",Mt["category_sensor-input_mma7455"]="MMA7455 Accelerometer",Mt["category_sensor-input_gps_pam7q"]="GPS PAM7Q",Mt["category_sensor-input_ping"]="Distance: PING)))",Mt["category_sensor-input_pir"]="PIR Motion",Mt["category_sensor-input_rfid"]="RFID",Mt["category_sensor-input_sf02-laser"]="SF02 Laser",Mt["category_sensor-input_sony-remote"]="Sony Remote",Mt["category_sensor-input_sound-impact-sensor"]="Sound Impact Sensor",Mt["category_sensor-input_colorpal"]="ColorPal",Mt["category_sensor-input_temperature-humidity"]="Temp &amp; Humidity",Mt["category_sensor-input_BME680"]="BME680 Air Quality",Mt.category_memory="Memory",Mt.category_memory_eeprom="EEPROM",Mt.category_memory_sdcard="SD Card",Mt.category_memory_contacts="Contacts",Mt["category_analog-pulses"]="Analog/Pulses",Mt["category_analog-pulses_rc"]="RC time",Mt["category_analog-pulses_voltage"]="Voltage",Mt["category_analog-pulses_pulse-in-out"]="Pulse in/out",Mt["category_analog-pulses_pwm"]="PWM",Mt.category_audio="Audio",Mt.category_audio_audio="WAV Files",Mt.category_audio_sound="Sound",Mt.category_audio_freqout="Frequency out",Mt.category_servo="Servo",Mt["category_servo_standard-servo"]="Standard Servo",Mt["category_servo_cr-servo"]="CR Servo",Mt.category_robot="Robot",Mt.category_robot_activitybot="ActivityBot",Mt["category_robot_servo-diff-drive"]="Servo Differential Drive",Mt["category_hackable-electronic-badge"]="Hackable Electronic Badge",Mt["category_hackable-electronic-badge_led_control"]="LEDs",Mt["category_hackable-electronic-badge_oled"]="Badge Display",Mt["category_hackable-electronic-badge_ir-communication"]="Badge IR Comms",Mt.category_communicate_badge_lock="Badge WiFi Lock",Mt["category_hackable-electronic-badge_eeprom"]="Memory",Mt["category_hackable-electronic-badge_accelerometer"]="Accelerometer",Mt["category_hackable-electronic-badge_touchpad-control"]="Badge Buttons",Mt["category_hackable-electronic-badge_text-to-speech"]="Text to Speech",Mt.category_functions="Functions",Mt.category_variables="Variables",Mt["category_s3-simple"]="Simple Scribbler",Mt["category_s3-simple_simple-control"]="Simple Control",Mt["category_s3-simple_simple-sensors"]="Simple Sensors",Mt["category_s3-simple_simple-actions"]="Simple Actions",Mt["category_s3-math"]="Math",Mt["category_sensor-input_s3-line"]="Line",Mt["category_sensor-input_s3-obstacle"]="Obstacle",Mt["category_sensor-input_s3-light"]="Light",Mt["category_sensor-input_s3-stall"]="Stall",Mt["category_sensor-input_s3-button"]="Button",Mt["category_sensor-input_s3-ping"]="Ping)))",Mt["category_sensor-input_s3-pins"]="Pins",Mt["category_sensor-input_s3-mic"]="Microphone",Mt["category_sensor-input_s3-sirc"]="Sony Remote",Mt["category_s3-actions"]="Actions",Mt["category_s3-actions_motors"]="Motors",Mt["category_s3-actions_sound"]="Sound",Mt["category_s3-actions_leds"]="LEDs",Mt["category_s3-actions_reset"]="Restore",Mt["category_s3-hacker-port"]="Hacker Port",Mt["category_s3-hacker-port_sensors"]="Sensors",Mt["category_s3-hacker-port_pins"]="Pins",Mt["category_s3-hacker-port_servo"]="Servo";let Dt='<xml id="toolbox">';function vt(e=""){return e.length>0?`<sep ${e}></sep>`:"<sep></sep>"}function Bt(e){Dt=Dt.replace(/key="([\S]+)"/g,(function(e,t){return'name="'+Mt[t]+'"'}));const t=(new DOMParser).parseFromString(Dt,"text/xml"),n=["category","sep","block"],i=[];for(let o=0;o<n.length;o++){const s=t.getElementsByTagName(n[o]);for(let t=0;t<s.length;t++){const n=s[t],o=n.getAttribute("include"),l=n.getAttribute("exclude");(o&&-1===o.indexOf(e+",")||l&&l.indexOf(e+",")>-1)&&i.push(n)}}for(let e=0;e<i.length;e++)i[e].parentNode.removeChild(i[e]);let o=(new XMLSerializer).serializeToString(t);return o=o.replace(/ include="[\S]+"/g,"").replace(/ exclude="[\S]+"/g,""),o}async function Gt(e){if(!e||0===e.length)return Vt(-2,"No files were selected",null);const t=[];for(let n=0;n<e.length;n++)t.push(e[n]);const n=t[0].type;try{const e=await Ut(new Blob(t,{type:"text/strings"}));await async function(e,t,n){const i=function(e){const t=e.indexOf('transform="translate(-225,-23)">Device: ');return-1===t?"":e.substring(t+40,e.indexOf("</text>",t+41))}(n);if(0===i.length)throw new Ht(i,"Project board type was not found");const o="image/svg+xml"===t;let s=!1;if(""===t){const t=e;"svge"===t.slice(t.length-4)&&(s=!0)}if(!o&&!s)throw new Ht(t,"Project file extension is not one of '.svg' or '.svge'");if(-1===n.indexOf('<svg blocklyprop="blocklypropproject"'))throw new Ht("blocklypropproject","Unable to locate BlocklyProp project start tag");if(-1!==n.indexOf("<!ENTITY"))throw new Ht("ENTITY","Found an invalid ENTITY tag");if(-1!==n.indexOf("CDATA"))throw new Ht("CDATA","Found invalid CDATA tag");if(-1!==n.indexOf("\x3c!--"))throw new Ht("XML Comment","Found an invalid XML comment tag")}(t[0].name,n,e);const i=wt(t[0].name,e);if(i)return Vt(0,"success",i)}catch(e){return L(`Error in loadProjectFile: ${e.message}`),Vt(-1,e.message,null)}return Vt(-3,"Project file format is unknown",null)}Dt+='\n  <category key="category_control" colour="205">\n    <block type="comment"></block>\n    <block type="controls_if"></block>\n    <block type="controls_repeat">\n      <mutation TYPE="FOREVER"></mutation>\n    </block>\n    <block type="controls_repeat" include="s3,">\n      <mutation type="TIMES"></mutation>\n      <field name="TYPE">TIMES</field>\n        <value name="TIMES">\n          <block type="math_number">\n            <field name="NUM">10</field>\n          </block>\n        </value>\n      </block>\n    <block type="control_repeat_for_loop">\n      <value name="START">\n        <block type="math_number">\n          <field name="NUM">1</field>\n        </block>\n      </value>\n      <value name="END">\n        <block type="math_number">\n          <field name="NUM">10</field>\n        </block>\n      </value>\n      <value name="STEP">\n        <block type="math_number">\n          <field name="NUM">1</field>\n        </block>\n      </value>\n    </block>\n    <block type="scribbler_exit_loop" include="s3,"></block>\n    <block type="controls_select">\n      <value name="SWITCH">\n        <block type="variables_get"></block>\n     </value>\n   </block>\n   <block type="controls_break" exclude="s3,"></block>\n   <block type="base_delay" exclude="s3,">\n     <value name="DELAY_TIME">\n       <block type="math_number">\n         <field name="NUM">1000</field>\n       </block>\n     </value>\n   </block>\n   <block type="scribbler_wait" include="s3,">\n     <value name="WAITTIME">\n       <block type="math_number">\n         <field name="NUM">500</field>\n       </block>\n     </value>\n     <field name="TIMESCALE">1</field>\n   </block>\n   <block type="cog_new" exclude="s3,"></block>\n   <block type="controls_return" exclude="s3,"></block>\n </category>\n',Dt+=function(){let e='<category key="category_operators" exclude="s3," colour="275">';return e+='\n    <category key="category_operators_numbers" >\n      <block type="math_arithmetic"></block>\n      <block type="math_limit"></block>\n      <block type="constrain_value"></block>\n      <block type="math_crement"></block>\n      <block type="math_random">\n        <value name="A">\n          <block type="math_number">\n            <field name="NUM">1</field>\n          </block>\n        </value>\n        <value name="B">\n          <block type="math_number">\n            <field name="NUM">100</field>\n          </block>\n        </value>\n      </block>\n      <block type="math_bitwise"></block>\n      <block type="logic_operation"></block>\n      <block type="logic_negate"></block>\n      <block type="parens"></block>\n      <block type="logic_compare"></block>\n      <block type="map_value"></block>\n      <block type="math_advanced"></block>\n      <block type="math_inv_trig">\n        <value name="ARG3">\n          <block type="math_number">\n            <field name="NUM">1</field>\n          </block>\n        </value>\n      </block>\n    </category>\n  ',e+='\n    <category key="category_operators_strings" >\n      <block type="string_var_length"></block>\n      <block type="string_compare"></block>\n      <block type="string_length"></block>\n      <block type="combine_strings"></block>\n      <block type="find_substring_zero">\n        <value name="LOC">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n      </block>\n      <block type="get_char_at_position_zero">\n        <value name="POSITION">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n      </block>\n      <block type="set_char_at_position_zero">\n        <value name="POSITION">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n      </block>\n      <block type="get_substring_zero">\n        <value name="START">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n        <value name="END">\n          <block type="math_number">\n            <field name="NUM">2</field>\n          </block>\n        </value>\n      </block>\n      <block type="string_split">\n        <value name="CHAR">\n          <block type="char_type_block"></block>\n        </value>\n      </block>\n      <block type="string_trim"></block>\n      <block type="string_null"></block>\n      <block type="string_sprint_multiple"></block>\n      <block type="string_scan_multiple"></block>\n    </category>\n  ',e+="</category>",'<category key="category_operators" exclude="s3," colour="275">\n    <category key="category_operators_numbers" >\n      <block type="math_arithmetic"></block>\n      <block type="math_limit"></block>\n      <block type="constrain_value"></block>\n      <block type="math_crement"></block>\n      <block type="math_random">\n        <value name="A">\n          <block type="math_number">\n            <field name="NUM">1</field>\n          </block>\n        </value>\n        <value name="B">\n          <block type="math_number">\n            <field name="NUM">100</field>\n          </block>\n        </value>\n      </block>\n      <block type="math_bitwise"></block>\n      <block type="logic_operation"></block>\n      <block type="logic_negate"></block>\n      <block type="parens"></block>\n      <block type="logic_compare"></block>\n      <block type="map_value"></block>\n      <block type="math_advanced"></block>\n      <block type="math_inv_trig">\n        <value name="ARG3">\n          <block type="math_number">\n            <field name="NUM">1</field>\n          </block>\n        </value>\n      </block>\n    </category>\n  \n    <category key="category_operators_strings" >\n      <block type="string_var_length"></block>\n      <block type="string_compare"></block>\n      <block type="string_length"></block>\n      <block type="combine_strings"></block>\n      <block type="find_substring_zero">\n        <value name="LOC">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n      </block>\n      <block type="get_char_at_position_zero">\n        <value name="POSITION">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n      </block>\n      <block type="set_char_at_position_zero">\n        <value name="POSITION">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n      </block>\n      <block type="get_substring_zero">\n        <value name="START">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n        <value name="END">\n          <block type="math_number">\n            <field name="NUM">2</field>\n          </block>\n        </value>\n      </block>\n      <block type="string_split">\n        <value name="CHAR">\n          <block type="char_type_block"></block>\n        </value>\n      </block>\n      <block type="string_trim"></block>\n      <block type="string_null"></block>\n      <block type="string_sprint_multiple"></block>\n      <block type="string_scan_multiple"></block>\n    </category>\n  </category>'}(),Dt+=vt(),Dt+='\n    <category key="category_values" exclude="s3," colour="205">\n      <block type="math_number"></block>\n      <block type="string_type_block"></block>\n      <block type="char_type_block"></block>\n      <block type="music_note">\n        <field name="OCTAVE">0.125</field>\n      </block>\n      <block type="number_binary"></block>\n      <block type="number_hex"></block>\n      <block type="logic_boolean"></block>\n      <block type="high_low_value"></block>\n      <block type="constant_define"></block>\n      <block type="constant_value"></block>\n      <block type="color_picker" exclude="heb,"></block>\n      <block type="color_value_from" exclude="heb,">\n        <value name="RED_VALUE">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n        <value name="GREEN_VALUE">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n        <value name="BLUE_VALUE">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n      </block>\n      <block type="get_channel_from" exclude="heb,">\n        <value name="COLOR">\n          <block type="color_picker"></block>\n        </value>\n      </block>\n      <block type="compare_colors" exclude="heb,">\n        <value name="COLOR1">\n          <block type="color_picker"></block>\n        </value>\n        <value name="COLOR2">\n          <block type="color_picker"></block>\n        </value>\n      </block>\n      <block type="heb_color_val" include="heb,"></block>\n      <block type="system_counter" exclude="other,"></block>\n    </category>\n  ',Dt+='\n    <category key="category_operators_arrays" colour="250">\n      <block type="array_init"></block>\n      <block type="array_fill"></block>\n      <block type="array_get">\n        <value name="NUM">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n      </block>\n      <block type="array_set">\n        <value name="NUM">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n        <value name="VALUE">\n          <block type="math_number">\n             <field name="NUM">0</field>\n          </block>\n        </value>\n      </block>\n      <block type="array_clear"></block>\n    </category>\n  ',Dt+='<category key="category_variables" custom="VARIABLE" colour="250"></category>',Dt+='<category key="category_functions" custom="PROCEDURE" colour="225"></category>',Dt+='\n    <category key="category_input-output_pin-states" exclude="s3,heb,heb-wx," colour="185">\n      <block type="make_pin"></block>\n      <block type="make_pin_input">\n        <value name="PIN">\n          <block type="math_number">\n            <field name="NUM">0</field>\n          </block>\n        </value>\n      </block>\n      <block type="check_pin"></block>\n      <block type="check_pin_input">\n         <value name="PIN">\n           <block type="math_number">\n             <field name="NUM">0</field>\n           </block>\n         </value>\n       </block>\n       <block type="set_pins"></block>\n       <block type="get_pins"></block>\n       <block type="set_pins_binary">\n         <value name="VALUE">\n           <block type="number_binary"></block>\n         </value>\n       </block>\n     </category>\n  ',Dt+=vt('include="heb,heb-wx,"'),Dt+=function(){let e='<category key="category_communicate" exclude="s3," colour="340">';return e+='\n  <category key="category_hackable-electronic-badge_oled" include="heb,heb-wx,">\n      <block type="heb_print_numeric_var">\n          <value name="VALUE">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n      </block>\n      <block type="heb_print_string_var">\n          <value name="VALUE">\n              <block type="string_type_block">\n                  <field name="TEXT">Hello</field>\n              </block>\n          </value>\n      </block>\n      <block type="heb_print_multiple"></block>\n      <block type="heb_cursor_position_large"></block>\n      <block type="heb_cursor_position_small">\n          <value name="ROWS">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="COLS">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n      </block>\n      <block type="heb_clear_screen"></block>\n      <block type="heb_rotate"></block>\n      <block type="heb_oled_point">\n          <value name="X0">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="Y0">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n      </block>\n      <block type="heb_oled_line">\n          <value name="X0">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="Y0">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="X1">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="Y1">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n      </block>\n      <block type="heb_oled_box">\n          <value name="X0">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="Y0">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="W">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="H">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n      </block>\n      <block type="heb_oled_circle">\n          <value name="X0">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="Y0">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="R">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n      </block>\n      <block type="heb_oled_triangle">\n          <value name="X0">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="Y0">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="X1">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="Y1">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="X2">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n          <value name="Y2">\n              <block type="math_number">\n                  <field name="NUM">0</field>\n              </block>\n          </value>\n      </block>\n  </category>\n  ',e+='\n    <category key="category_hackable-electronic-badge_ir-communication" include="heb,heb-wx,">\n        <block type="heb_ir_send_signal">\n            <value name="MESSAGE">\n                <block type="string_type_block">\n                    <field name="TEXT">Hello</field>\n                </block>\n            </value>\n        </block>\n        <block type="heb_ir_read_signal"></block>\n        <block type="heb_ir_clear_buffer"></block>\n    </category>\n  ',e+='\n    <category key="category_communicate_graphing" exclude="heb-wx,">\n        <block type="graph_settings">\n            <field name="XAXIS">40,S</field>\n        </block>\n        <block type="graph_output"></block>\n    </category>\n  ',e+='\n    <category key="category_hackable-electronic-badge_led_control" include="heb,heb-wx,">\n        <block type="ws2812b_init" include="heb-wx,"></block>\n        <block type="ws2812b_set" include="heb-wx,">\n            <value name="LED">\n                <block type="math_number">\n                    <field name="NUM">1</field>\n                </block>\n            </value>\n            <value name="COLOR">\n                <block type="color_picker"></block>\n            </value>\n        </block>\n        <block type="ws2812b_set_multiple" include="heb-wx,">\n            <value name="START">\n                <block type="math_number">\n                    <field name="NUM">1</field>\n                </block>\n            </value>\n            <value name="END">\n                <block type="math_number" include="heb-wx,">\n                    <field name="NUM">4</field>\n                </block>\n            </value>\n            <value name="COLOR">\n                <block type="color_picker">#000000</block>\n            </value>\n        </block>\n        <block type="ws2812b_update" include="heb-wx,"></block>\n        <block type="heb_toggle_led" include="heb,"></block>\n        <block type="heb_toggle_led_open" include="heb,">\n            <value name="LED_NUM">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="LED_STATE">\n                <block type="high_low_value">\n                    <field name="VALUE">1</field>\n                </block>\n            </value>\n        </block>\n        <block type="heb_pwm_led" include="heb-wx,">\n            <value name="BRIGHTNESS">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="heb_set_led_rgb" include="heb,">\n            <value name="RGB">\n                <block type="heb_color_val"></block>\n            </value>\n        </block>\n    </category>\n  ',e+='\n    <category key="category_communicate_badge_lock" include="heb-wx,">\n        <block type="heb_wx_lock"></block>\n    </category>\n  ',e+='\n    <category key="category_communicate_oled" exclude="heb,heb-wx,">\n        <block type="oled_initialize"></block>\n        <block type="oled_font_loader"></block>\n        <block type="oled_get_max_height"></block>\n        <block type="oled_get_max_width"></block>\n        <block type="oled_clear_screen"></block>\n        <block type="oled_text_color">\n            <value name="FONT_COLOR">\n                <block type="color_picker"></block>\n            </value>\n            <value name="BACKGROUND_COLOR">\n                <block type="color_picker"></block>\n            </value>\n        </block>\n        <block type="oled_text_size"></block>\n        <block type="oled_set_cursor">\n            <value name="X_POS">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="Y_POS">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="oled_print_text">\n            <value name="MESSAGE">\n                <block type="string_type_block"></block>\n            </value>\n        </block>\n        <block type="oled_print_number">\n            <value name="NUMIN">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="oled_print_multiple"></block>\n        <block type="oled_draw_pixel">\n            <value name="X_AXIS">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="Y_AXIS">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="COLOR">\n                <block type="color_picker"></block>\n            </value>\n        </block>\n        <block type="oled_draw_line">\n            <value name="X_ONE">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="Y_ONE">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="X_TWO">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="Y_TWO">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="COLOR">\n                <block type="color_picker"></block>\n            </value>\n        </block>\n        <block type="oled_draw_triangle">\n            <value name="POINT_X0">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POINT_Y0">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POINT_X1">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POINT_Y1">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POINT_X2">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POINT_Y2">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="COLOR">\n                <block type="color_picker"></block>\n            </value>\n        </block>\n        <block type="oled_draw_rectangle">\n            <value name="POINT_X">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POINT_Y">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="RECT_WIDTH">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="RECT_HEIGHT">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="RECT_ROUND">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="COLOR">\n                <block type="color_picker"></block>\n            </value>\n        </block>\n        <block type="oled_draw_circle">\n            <value name="POINT_X">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POINT_Y">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="RADIUS">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="COLOR">\n                <block type="color_picker"></block>\n            </value>\n        </block>\n        <block type="oled_bitmap">\n            <value name="POS_X">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POS_Y">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n    </category>\n  ',e+='\n    <category key="category_communicate_epaper" exclude="heb,heb-wx,">\n        <block type="epaper_initialize"></block>\n        <block type="oled_font_loader"></block>\n        <block type="epaper_update"></block>\n        <block type="epaper_get_max_height"></block>\n        <block type="epaper_get_max_width"></block>\n        <block type="epaper_clear_screen"></block>\n        <block type="epaper_text_color"></block>\n        <block type="epaper_text_size"></block>\n        <block type="epaper_set_cursor">\n            <value name="X_POS">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="Y_POS">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="epaper_print_text">\n            <value name="MESSAGE">\n                <block type="string_type_block"></block>\n            </value>\n        </block>\n        <block type="epaper_print_number">\n            <value name="NUMIN">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="epaper_print_multiple"></block>\n        <block type="epaper_draw_pixel">\n            <value name="X_AXIS">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="Y_AXIS">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="epaper_draw_line">\n            <value name="X_ONE">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="Y_ONE">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="X_TWO">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="Y_TWO">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="epaper_draw_triangle">\n            <value name="POINT_X0">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POINT_Y0">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POINT_X1">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POINT_Y1">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POINT_X2">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POINT_Y2">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="epaper_draw_rectangle">\n            <value name="POINT_X">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POINT_Y">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="RECT_WIDTH">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="RECT_HEIGHT">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="RECT_ROUND">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="epaper_draw_circle">\n            <value name="POINT_X">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POINT_Y">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="RADIUS">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="epaper_bitmap">\n            <value name="POS_X">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="POS_Y">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n    </category>\n  ',e+=function(){let e='<category key="category_communicate_protocols" exclude="heb,heb-wx,">';return e+='\n    <block type="serial_open"><field name="TXPIN">1</field></block>\n    <block type="serial_send_text"></block>\n    <block type="serial_status"></block>\n    <block type="serial_print_multiple"></block>\n    <block type="serial_receive_text"></block>\n    <block type="serial_scan_multiple"></block>\n  ',e+='\n    <block type="shift_in"></block>\n    <block type="shift_out">\n        <value name="VALUE">\n            <block type="math_number">\n                <field name="NUM">10</field>\n            </block>\n        </value>\n    </block>\n  ',e+="</category>",'<category key="category_communicate_protocols" exclude="heb,heb-wx,">\n    <block type="serial_open"><field name="TXPIN">1</field></block>\n    <block type="serial_send_text"></block>\n    <block type="serial_status"></block>\n    <block type="serial_print_multiple"></block>\n    <block type="serial_receive_text"></block>\n    <block type="serial_scan_multiple"></block>\n  \n    <block type="shift_in"></block>\n    <block type="shift_out">\n        <value name="VALUE">\n            <block type="math_number">\n                <field name="NUM">10</field>\n            </block>\n        </value>\n    </block>\n  </category>'}(),e+='\n    <category key="category_communicate_WS2812B" exclude="heb,heb-wx,">\n        <block type="ws2812b_init"></block>\n        <block type="ws2812b_set">\n            <value name="LED">\n                <block type="math_number">\n                    <field name="NUM">1</field>\n                </block>\n            </value>\n            <value name="COLOR">\n                <block type="color_picker"></block>\n            </value>\n        </block>\n        <block type="ws2812b_set_multiple">\n            <value name="START">\n                <block type="math_number">\n                    <field name="NUM">1</field>\n                </block>\n            </value>\n            <value name="END">\n                <block type="math_number">\n                    <field name="NUM">4</field>\n                </block>\n            </value>\n            <value name="COLOR">\n                <block type="color_picker">#000000</block>\n            </value>\n        </block>\n        <block type="ws2812b_update"></block>\n    </category>\n  ',e+='\n    <category key="category_communicate_serial-lcd" exclude="heb,heb-wx,">\n        <block type="debug_lcd_init"></block>\n        <block type="debug_lcd_print">\n            <value name="MESSAGE">\n                <block type="string_type_block"></block>\n            </value>\n        </block>\n        <block type="debug_lcd_number">\n            <value name="VALUE">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="debug_lcd_print_multiple"></block>\n        <block type="debug_lcd_action"></block>\n        <block type="debug_lcd_set_cursor">\n            <value name="ROW">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="COLUMN">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="debug_lcd_music_note"></block>\n    </category>\n    ',e+='\n    <category key="category_communicate_serial-terminal" exclude="heb-wx,">\n        <block type="console_print">\n            <value name="MESSAGE">\n                <block type="string_type_block"></block>\n            </value>\n        </block>\n        <block type="console_print_variables">\n            <value name="VALUE">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="console_print_multiple"></block>\n        <block type="console_scan_text"></block>\n        <block type="console_scan_number"></block>\n        <block type="console_newline"></block>\n        <block type="console_clear"></block>\n        <block type="console_move_to_position">\n            <value name="ROW">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n            <value name="COLUMN">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="console_close"></block>\n    </category>\n    ',e+=function(){let e='<category name="WX Module" exclude="heb,">';return e+='\n    <category name="Advanced">\n        <block type="wx_init_adv" exclude="heb-wx,"></block>\n        <block type="wx_listen">\n            <field name="ID">wxConnId1</field>\n            <value name="PATH">\n                <block type="string_type_block">\n                    <field name="TEXT">path</field>\n                </block>\n            </value>\n        </block>\n        <block type="wx_poll">\n            <field name="EVENT">wxEvent</field>\n            <field name="ID">wxId</field>\n            <field name="HANDLE">wxHandle</field>\n        </block>\n        <block type="wx_print_multiple">\n            <field name="HANDLE">wxHandle</field>\n        </block>\n        <block type="wx_send_string">\n            <field name="HANDLE">wxHandle</field>\n            <value name="DATA">\n                <block type="string_type_block"></block>\n            </value>\n        </block>\n        <block type="wx_scan_multiple">\n            <field name="HANDLE">wxHandle</field>\n        </block>\n        <block type="wx_scan_string">\n            <field name="HANDLE">wxHandle</field>\n        </block>\n        <block type="wx_receive_string">\n            <field name="HANDLE">wxHandle</field>\n            <value name="MAX">\n                <block type="math_number">\n                    <field name="NUM">64</field>\n                </block>\n            </value>\n        </block>\n        <block type="wx_mode"></block>\n        <block type="wx_code"></block>\n        <block type="wx_buffer">\n            <field name="BUFFER">wxBuffer</field>\n        </block>\n        <block type="wx_join"></block>\n        <block type="wx_disconnect">\n            <field name="ID">wxId</field>\n        </block>\n        <block type="wx_ip"></block>\n    </category>\n  ',e+="</category>",'<category name="WX Module" exclude="heb,">\n    <category name="Advanced">\n        <block type="wx_init_adv" exclude="heb-wx,"></block>\n        <block type="wx_listen">\n            <field name="ID">wxConnId1</field>\n            <value name="PATH">\n                <block type="string_type_block">\n                    <field name="TEXT">path</field>\n                </block>\n            </value>\n        </block>\n        <block type="wx_poll">\n            <field name="EVENT">wxEvent</field>\n            <field name="ID">wxId</field>\n            <field name="HANDLE">wxHandle</field>\n        </block>\n        <block type="wx_print_multiple">\n            <field name="HANDLE">wxHandle</field>\n        </block>\n        <block type="wx_send_string">\n            <field name="HANDLE">wxHandle</field>\n            <value name="DATA">\n                <block type="string_type_block"></block>\n            </value>\n        </block>\n        <block type="wx_scan_multiple">\n            <field name="HANDLE">wxHandle</field>\n        </block>\n        <block type="wx_scan_string">\n            <field name="HANDLE">wxHandle</field>\n        </block>\n        <block type="wx_receive_string">\n            <field name="HANDLE">wxHandle</field>\n            <value name="MAX">\n                <block type="math_number">\n                    <field name="NUM">64</field>\n                </block>\n            </value>\n        </block>\n        <block type="wx_mode"></block>\n        <block type="wx_code"></block>\n        <block type="wx_buffer">\n            <field name="BUFFER">wxBuffer</field>\n        </block>\n        <block type="wx_join"></block>\n        <block type="wx_disconnect">\n            <field name="ID">wxId</field>\n        </block>\n        <block type="wx_ip"></block>\n    </category>\n  </category>'}(),e+='\n    <category key="category_communicate_xbee" exclude="heb,heb-wx,">\n        <block type="xbee_setup"></block>\n        <block type="xbee_transmit"></block>\n        <block type="xbee_print_multiple"></block>\n        <block type="xbee_receive"></block>\n        <block type="xbee_scan_multiple"></block>\n    </category>\n  ',e+="</category>",e}(),Dt+='\n    <category key="category_sensor-input" include="heb,heb-wx," colour="140">\n\n        <category key="category_hackable-electronic-badge_accelerometer" >\n            <block type="heb_badge_axis_acceleration"></block>\n            <block type="heb_badge_was_shaken"></block>\n        </category>\n\n        <category key="category_hackable-electronic-badge_touchpad-control" >\n            <block type="heb_touchpad_status"></block>\n            <block type="heb_touchpad_sensitivity" include="heb-wx,">\n                <field name="LEVEL">7</field>\n            </block>\n        </category>\n\n        <category key="category_sensor-input_sony-remote" >\n            <block type="sirc_get"></block>\n        </category>\n    </category>\n  ',Dt+='\n    <category key="category_memory" include="heb,heb-wx," colour="165">\n        <category key="category_memory_contacts">\n            <block type="heb_badge_eeprom_store">\n                <value name="CONTACT">\n                    <block type="string_type_block">\n                        <field name="TEXT">Last, First</field>\n                    </block>\n                </value>\n            </block>\n            <block type="heb_badge_eeprom_is_stored">\n                <value name="CONTACT">\n                    <block type="string_type_block">\n                        <field name="TEXT">Last, First</field>\n                    </block>\n                </value>\n            </block>\n            <block type="heb_badge_eeprom_retrieve">\n                <value name="INDEX">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n            </block>\n            <block type="heb_count_contacts"></block>\n            <block type="heb_erase_all_contacts"></block>\n        </category>\n\n        <category key="category_memory_sdcard" include="heb-wx,">\n            <block type="sd_init" exclude="activity-board,"></block>\n            <block type="sd_open"></block>\n            <block type="sd_read">\n                <value name="SIZE">\n                    <block type="math_number">\n                        <field name="NUM">10</field>\n                    </block>\n                </value>\n            </block>\n            <block type="sd_file_pointer"></block>\n            <block type="sd_file_exists"></block>\n            <block type="sd_close"></block>\n        </category>\n    </category>\n  ',Dt+='\n    <category key="category_sensor-input" exclude="s3,heb,heb-wx," colour="140">\n        <category key="category_sensor-input_2axis-joystick" include="activity-board,">\n            <block type="joystick_input_xaxis"></block>\n            <block type="joystick_input_yaxis"></block>\n        </category>\n\n        <category key="category_sensor-input_4x4-keypad">\n            <block type="keypad_initialize"></block>\n            <block type="keypad_read"></block>\n        </category>\n\n        <category key="category_sensor-input_BME680">\n            <block type="bme680_init"></block>\n            <block type="bme680_read"></block>\n            <block type="bme680_get_value"></block>\n            <block type="bme680_heater"></block>\n        </category>\n\n        <category key="category_sensor-input_colorpal" >\n            <block type="colorpal_enable"></block>\n            <block type="colorpal_get_colors_raw"></block>\n            <block type="colorpal_get_colors"></block>\n        </category>\n\n        <category key="category_sensor-input_ping" >\n            <block type="sensor_ping"></block>\n        </category>\n\n        <category key="category_sensor-input_gps" >\n            <block type="GPS_init"></block>\n            <block type="GPS_hasFix"></block>\n            <block type="GPS_latitude"></block>\n            <block type="GPS_longitude"></block>\n            <block type="GPS_heading"></block>\n            <block type="GPS_altitude"></block>\n            <block type="GPS_velocity"></block>\n            <block type="GPS_satsTracked"></block>\n            <block type="GPS_date_time"></block>\n        </category>\n\n        <category key="category_sensor-input_fingerprint" >\n            <block type="fp_scanner_init"></block>\n            <block type="fp_scanner_add">\n                <value name="USER">\n                    <block type="math_number">\n                        <field name="NUM">1</field>\n                    </block>\n                </value>\n            </block>\n            <block type="fp_scanner_scan"></block>\n        </category>\n\n        <category key="category_sensor-input_hmc5883l" include="other,activity-board,">\n            <block type="HMC5883L_init"></block>\n            <block type="HMC5883L_read"></block>\n        </category>\n\n        <category key="category_sensor-input_LIS3DH">\n            <block type="lis3dh_init"></block>\n            <block type="lis3dh_read"></block>\n            <block type="lis3dh_temp"></block>\n        </category>\n\n        <category key="category_sensor-input_LSM9DS1">\n            <block type="lsm9ds1_init"></block>\n            <block type="lsm9ds1_mag_calibrate"></block>\n            <block type="lsm9ds1_read"></block>\n            <block type="lsm9ds1_tilt"></block>\n            <block type="lsm9ds1_heading"></block>\n        </category>\n\n        <category key="category_sensor-input_mma7455" include="other,">\n            <block type="MMA7455_init"></block>\n            <block type="MMA7455_acceleration"></block>\n        </category>\n\n        <category key="category_sensor-input_memsic-2axis">\n            <block type="MX2125_acceleration_xaxis"></block>\n            <block type="MX2125_acceleration_yaxis"></block>\n            <block type="MX2125_rotation"></block>\n            <block type="MX2125_tilt_xaxis"></block>\n            <block type="MX2125_tilt_yaxis"></block>\n        </category>\n\n        <category key="category_sensor-input_pir">\n            <block type="PIR_Sensor"></block>\n        </category>\n\n        <category key="category_sensor-input_rfid">\n            <block type="rfid_enable"></block>\n            <block type="rfid_get"></block>\n            <block type="rfid_disable"></block>\n            <block type="rfid_close"></block>\n        </category>\n\n        <category key="category_sensor-input_sony-remote">\n            <block type="sirc_get"></block>\n        </category>\n\n        <category key="category_sensor-input_sound-impact-sensor">\n            <block type="sound_impact_run"></block>\n            <block type="sound_impact_get"></block>\n            <block type="sound_impact_end"></block>\n        </category>\n\n        <category key="category_sensor-input_temperature-humidity">\n            <block type="dht22_read"></block>\n            <block type="dht22_value"></block>\n        </category>\n    </category>\n  ',Dt+='\n    <category key="category_memory" include="activity-board,flip,other," colour="165">\n        <category key="category_memory_eeprom">\n            <block type="eeprom_read">\n                <value name="ADDRESS">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n            </block>\n            <block type="eeprom_write">\n                <value name="ADDRESS">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n            </block>\n        </category>\n\n        <category key="category_memory_sdcard">\n            <block type="sd_init" exclude="activity-board,"></block>\n            <block type="sd_open"></block>\n            <block type="sd_read">\n                <value name="SIZE">\n                    <block type="math_number">\n                        <field name="NUM">10</field>\n                    </block>\n                </value>\n            </block>\n            <block type="sd_file_pointer"></block>\n            <block type="sd_file_exists"></block>\n            <block type="sd_close"></block>\n        </category>\n    </category>\n  ',Dt+='\n    <category key="category_analog-pulses" exclude="s3,heb,heb-wx," colour="185">\n        <category key="category_analog-pulses_pulse-in-out" exclude="s3,">\n            <block type="pulse_in"></block>\n            <block type="pulse_out">\n                <value name="PULSE_LENGTH">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n            </block>\n            <block type="base_count">\n                <value name="DURATION">\n                    <block type="math_number">\n                        <field name="NUM">1</field>\n                    </block>\n                </value>\n            </block>\n        </category>\n\n        <category key="category_analog-pulses_pwm">\n            \x3c!-- <block type="pwm_start"></block> --\x3e\n            <block type="pwm_set">\n                <value name="DUTY_CYCLE">\n                    <block type="math_number">\n                        <field name="NUM">50</field>\n                    </block>\n                </value>\n            </block>\n            <block type="pwm_stop"></block>\n        </category>\n\n        <category key="category_analog-pulses_rc">\n            <block type="rc_charge_discharge"></block>\n        </category>\n\n        <category key="category_analog-pulses_voltage" include="activity-board,">\n            <block type="ab_volt_in"></block>\n            <block type="ab_volt_out">\n                <value name="VALUE">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n            </block>\n        </category>\n\n        <category key="category_analog-pulses_voltage" include="flip,other,">\n            <block type="mcp320x_read"></block>\n            <block type="mcp320x_set_vref"></block>\n        </category>\n    </category>\n  ',Dt+='\n    <category key="category_audio" exclude="s3," colour="185">\n        <category key="category_audio_freqout">\n            <block type="base_freqout">\n                <value name="DURATION">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n                <value name="FREQUENCY">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n            </block>\n            <block type="sound_init" include="activity-board,">\n                <field name="PINL">26</field>\n                <field name="PINR">27</field>\n            </block>\n            <block type="sound_init" include="flip,other,"></block>\n            <block type="sound_play"></block>\n        </category>\n\n        <category key="category_hackable-electronic-badge_text-to-speech">\n            <block type="heb_text_to_speech_pins"></block>\n            <block type="heb_text_to_speech_volume"></block>\n            <block type="heb_text_to_speech_say">\n                <value name="STRING">\n                    <block type="string_type_block">\n                        <field name="TEXT">heloa</field>\n                    </block>\n                </value>\n            </block>\n            <block type="heb_text_to_speech_spell">\n                <value name="STRING">\n                    <block type="string_type_block">\n                        <field name="TEXT">hello</field>\n                    </block>\n                </value>\n            </block>\n        </category>\n\n        <category key="category_audio_audio" exclude="flip,">\n            <block type="wav_set_pins" include="activity-board,">\n                <field name="PINL">26</field>\n                <field name="PINR">27</field>\n            </block>\n            <block type="wav_play"></block>\n            <block type="wav_status"></block>\n            <block type="wav_volume">\n                <value name="VOLUME">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n            </block>\n            <block type="wav_stop"></block>\n        </category>\n    </category>\n  ',Dt+='\n    <category key="category_servo" exclude="s3,heb,heb-wx," colour="165">\n        <block type="servo_move">\n            <value name="ANGLE">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="servo_speed">\n            <value name="SPEED">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="servo_set_ramp">\n            <value name="RAMPSTEP">\n                <block type="math_number">\n                    <field name="NUM">50</field>\n                </block>\n            </value>\n        </block>\n        <block type="fb360_init"></block>\n        <block type="fb360_setup">\n            <field name="PARAM">setAcceleration</field>\n        </block>\n        <block type="fb360_set">\n            <value name="VALUE">\n                <block type="math_number">\n                    <field name="NUM">0</field>\n                </block>\n            </value>\n        </block>\n        <block type="fb360_get"></block>\n        <block type="fb360_status"></block>\n        <block type="scribbler_stop_servo"></block>\n    </category>\n  ',Dt+='\n    <category key="category_robot"  include="activity-board," colour="295">\n        <block type="ab_drive_init"></block>\n        <block type="ab_drive_ramping">\n            <field name="RAMPING">600</field>\n        </block>\n        <block type="ab_drive_speed">\n            <value name="LEFT">\n                <block type="math_number">\n                    <field name="NUM">64</field>\n                </block>\n            </value>\n            <value name="RIGHT">\n                <block type="math_number">\n                    <field name="NUM">64</field>\n                </block>\n            </value>\n        </block>\n        <block type="ab_drive_goto">\n            <value name="LEFT">\n                <block type="math_number">\n                    <field name="NUM">64</field>\n                </block>\n            </value>\n            <value name="RIGHT">\n                <block type="math_number">\n                    <field name="NUM">64</field>\n                </block>\n            </value>\n        </block>\n        <block type="ab_drive_goto_max_speed">\n            <value name="SPEED">\n                <block type="math_number">\n                    <field name="NUM">64</field>\n                </block>\n            </value>\n        </block>\n        <block type="ab_drive_stop"></block>\n        <block type="ab_drive_get_ticks"></block>\n        <block type="activitybot_calibrate"></block>\n        <block type="activitybot_display_calibration"></block>\n        <block type="activitybot_parallaxy_load"></block>\n    </category>\n  ',Dt+='\n    <category key="category_s3-math" include="s3," colour="275">\n        <block type="math_number"></block>\n        <block type="scribbler_boolean"></block>\n        <block type="scribbler_random_boolean"></block>\n        <block type="math_random">\n            <value name="A">\n                <block type="math_number">\n                    <field name="NUM">1</field>\n                </block>\n            </value>\n            <value name="B">\n                <block type="math_number">\n                    <field name="NUM">10</field>\n                </block>\n            </value>\n        </block>\n        <block type="math_arithmetic"></block>\n        <block type="math_limit"></block>\n        <block type="logic_operation"></block>\n        <block type="math_crement"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_compare"></block>\n        <block type="constrain_value"></block>\n        <block type="map_value"></block>\n        <block type="math_advanced"></block>\n        <block type="math_inv_trig">\n            <value name="ARG3">\n                <block type="math_number">\n                    <field name="NUM">1</field>\n                </block>\n            </value>\n        </block>\n    </category>\n  ',Dt+='\n    <category key="category_sensor-input" include="s3," colour="140">\n        <category key="category_sensor-input_s3-line" >\n            <block type="calibrate_line_sensor"></block>\n            \x3c!-- <block type="scribbler_if_line"></block> --\x3e\n            <block type="scribbler_simple_line"></block>\n            <block type="line_sensor"></block>\n        </category>\n\n        <category key="category_sensor-input_s3-obstacle" >\n            \x3c!-- <block type="scribbler_if_obstacle"></block>\n            <block type="obstacle_sensor"></block> --\x3e\n            <block type="scribbler_simple_obstacle"></block>\n        </category>\n\n        <category key="category_sensor-input_s3-light" >\n            \x3c!-- <block type="scribbler_if_light"></block> --\x3e\n            <block type="scribbler_simple_light"></block>\n            <block type="light_sensor"></block>\n        </category>\n\n        <category key="category_sensor-input_s3-stall" >\n            \x3c!-- <block type="scribbler_if_stalled"></block> --\x3e\n            <block type="stall_sensor"></block>\n            \x3c!-- <block type="spinning_sensor"></block> --\x3e\n        </category>\n\n        <category key="category_sensor-input_s3-sirc" >\n            <block type="sirc_s3_get"></block>\n        </category>\n\n        <category key="category_sensor-input_s3-mic" >\n            <block type="mic_s3_get"></block>\n        </category>\n\n        <category key="category_sensor-input_s3-button" >\n            <block type="reset_button_presses"></block>\n        </category>\n    </category>\n  ',Dt+='\n    <category key="category_s3-actions" include="s3," colour="185">\n        <category key="category_s3-actions_motors" >\n            <block type="scribbler_drive">\n                <field name="DRIVE_ANGLE">STRAIGHT</field>\n            </block>\n            <block type="scribbler_spin"></block>\n            <block type="scribbler_stop"></block>\n            <block type="move_motors">\n                <value name="LEFT_MOTOR_SPEED">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n                <value name="RIGHT_MOTOR_SPEED">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n                <value name="MOTOR_DURATION">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n            </block>\n            <block type="move_motors_distance">\n                <value name="LEFT_MOTOR_DISTANCE">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n                <value name="RIGHT_MOTOR_DISTANCE">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n                <value name="MOTOR_SPEED">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n            </block>\n            <block type="move_motors_xy">\n                <value name="X_DISTANCE">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n                <value name="Y_DISTANCE">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n                <value name="MOTOR_SPEED">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n            </block>\n            <block type="move_motors_angle">\n                <value name="ROTATE_ANGLE">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n                <value name="ROTATE_RADIUS">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n                <value name="ROTATE_SPEED">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n            </block>\n        </category>\n\n        <category key="category_s3-actions_sound" include="s3,">\n            <block type="scribbler_play">\n                <field name="NOTE_DURATION">250</field>\n                <field name="NOTE_OCTAVE">4</field>\n                <field name="NOTE_FREQUENCY">4186</field>\n                <field name="NOTE_VOLUME">50</field>\n            </block>\n            <block type="play_polyphony">\n                <value name="FREQUENCY_1">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n                <value name="FREQUENCY_2">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n                <value name="POLYPHONY_DURATION">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n                <value name="POLYPHONY_VOLUME">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n            </block>\n        </category>\n\n        <category key="category_s3-actions_leds" include="s3,">\n            <block type="scribbler_LED"></block>\n        </category>\n\n        <category key="category_communicate" include="s3,">\n            <block type="scribbler_serial_send_text"></block>\n            <block type="scribbler_serial_send_decimal"></block>\n            <block type="scribbler_serial_send_char"></block>\n            <block type="scribbler_serial_send_ctrl"></block>\n\n         \x3c!--  <block type="scribbler_serial_cursor_xy"> --\x3e\n         \x3c!--    <value name="X"> --\x3e\n         \x3c!--      <block type="spin_integer"> --\x3e\n         \x3c!--        <field name="INT_VALUE">0</field> --\x3e\n         \x3c!--      </block> --\x3e\n         \x3c!--    </value> --\x3e\n         \x3c!--    <value name="Y"> --\x3e\n         \x3c!--      <block type="spin_integer"> --\x3e\n         \x3c!--        <field name="INT_VALUE">0</field> --\x3e\n         \x3c!--      </block> --\x3e\n         \x3c!--    </value> --\x3e\n         \x3c!--  </block> --\x3e\n\n            <block type="scribbler_serial_rx_byte"></block>\n        </category>\n\n        <category key="category_memory" include="s3,">\n            <block type="s3_eeprom_read">\n                <value name="ADDR">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n            </block>\n            <block type="s3_eeprom_write">\n                <value name="ADDR">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n                <value name="VALUE">\n                    <block type="math_number">\n                        <field name="NUM">0</field>\n                    </block>\n                </value>\n            </block>\n        </category>\n\n        <category key="category_s3-actions_reset" include="s3,">\n            <block type="factory_reset"></block>\n        </category>\n    </category>\n  ',Dt+='\n    <category key="category_s3-hacker-port" include="s3," colour="295">\n        <category key="category_s3-hacker-port_sensors" >\n            <block type="scribbler_ping"></block>\n        </category>\n\n        <category key="category_s3-hacker-port_pins" >\n            <block type="make_pin"></block>\n            <block type="check_pin"></block>\n            <block type="analog_input"></block>\n        </category>\n\n        <category key="category_s3-hacker-port_servo" >\n            <block type="servo_move">\n                <value name="ANGLE">\n                    <block type="math_number">\n                        <field name="NUM">90</field>\n                    </block>\n                </value>\n            </block>\n            <block type="scribbler_stop_servo"></block>\n        </category>\n    </category>\n  ',Dt+='\n    <category key="category_system" colour="320">\n        <block type="custom_code_multiple" include="activity-board,flip,heb,heb-wx,other,s3,"></block>\n        <block type="waitcnt">\n            <value name="TARGET">\n                <block type="math_arithmetic">\n                    <value name="A">\n                        <block type="system_counter"></block>\n                    </value>\n                </block>\n            </value>\n        </block>\n        <block type="register_set" exclude="s3," ></block>\n        <block type="register_get" exclude="s3," ></block>\n        <block type="system_counter" exclude="s3," include="other,"></block>\n    </category>\n  ',Dt+="</xml>";const wt=(e,t)=>{try{let n=function(e){const t='transform="translate(-225,-53)">Title: ',n=e.indexOf(t);if(-1===n)return"";const i=e.substring(n+t.length,e.indexOf("</text>",n+t.length));if(!i)return"";if(i.endsWith(".svg"))return L('Stripping ".svg" from project title'),i.substr(0,i.length-4);if(i.endsWith(".svge"))return L('Stripping ".svge" from project title'),i.substr(0,i.length-5);return i}(t);""===n&&(n=e);const i=new Date,o=function(e,t){const n=e.indexOf('data-lastmodified="');return n>-1?e.substring(n+19,e.indexOf('"',n+20)):(console.log("Setting project last modified date to now."),t)}(t,i),s=function(e,t){const n=e.indexOf('data-createdon="');if(-1===n)return L("Project created date is missing. Setting default"),t;const i=n+16,o=n+17,s=e.indexOf('"',o);if(-1===s)return t;const l=e.substring(i,s);if("NaN"===l)return t;let r;if(13!==l.length)r=new Date(l);else{r=new Date(0);const e=parseInt(l,10);r.setTime(e)}return r}(t,new Date(o)),l=function(e){const t='transform="translate(-225,23)">uuid',n=e.indexOf(t);if(-1!==n)return xt(e.substring(n+t.length+2,n+t.length+38));return""}(t),r=function(e){const t='transform="translate(-225,23)">uuid',n=e.indexOf(t);if(-1!==n)return xt(e.substring(n+t.length+49,n+t.length+50));return""}(t);console.log(`Loaded project version: ${r}, UUID: ${l}`);const a=function(e){const t='transform="translate(-225,-23)">Device: ',n=e.indexOf(t);if(-1===n)return"";return e.substring(n+t.length,e.indexOf("</text>",n+t.length))}(t),p=U.convertBoardType(a);if(void 0===p)return console.log(`Unknown board type: ${a}`),null;const c=new U(n,function(e){const t=e.indexOf('transform="translate(-225,-8)">Description: ');if(t>-1)return xt(e.substring(t+44,e.indexOf("</text>",t+44)));return""}(t),p,H.PROPC,function(e){const t=e.indexOf("<variables")>-1?"<variables":"<block",n=e.substring(e.indexOf(t),e.indexOf("<ckm>"));return n.length>0?U.getEmptyProjectCodeHeader()+n+"</xml>":U.getEmptyProjectCodeHeader()+"</xml>"}(t),s,o,i.getTime(),!0,r,l);return console.log(`Project version ${c.version}, UUID: ${c.uuid}`),c}catch(e){console.log("Error while converting project file stream: %s",e.message)}return null};function xt(e){return e.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x9;/g,"\t").replace(/&#xA;/g,"\n").replace(/&#xD;/g,"\r")}const Ut=e=>new Promise(((t,n)=>{const i=new FileReader;i.onloadend=()=>t(i.result),i.onerror=e=>n(e),i.readAsBinaryString(e)}));function Vt(e,t,n){return{status:e,message:t,project:n}}function Ht(e,t){this.value=e,this.message=t,this.toString=function(){return this.value+this.message}}var Wt=n(755);const Xt={isProjectFileValid:!1,isEventHandler:!1,initEventHandlers:function(){this.isEventHandler||(Wt("#open-project-select-file-open").on("click",(()=>{L("User elected to open the project"),jt();try{const e=window.localStorage.getItem(o);if(e){const t=V(JSON.parse(e));if(t)return void fn(t)}}catch(e){b("Project Load Error","Unable to load the project",(()=>{L(`${e.message}`)}))}L("The opened project cannot be found in storage."),b("Project Load Error","Unable to load the project",(()=>{L("Possible project load failure")}))})),Wt("#open-project-select-file-cancel").on("click",(()=>{L("Open Dialog: cancelled"),jt(),Xt.clearLocalTempStorage();const e=G();e?void 0===e.boardType&&L("Project board type is undefined"):L("Project has disappeared.")})),Wt("#open-project-dialog").on("hidden.bs.modal",(()=>{Xt.clearFilename()})),Wt("#open-project-select-file").on("change",(function(e){(async function(e){const t=document.getElementById("open-project-select-file");if(0===t.files.length)return L("No file selected"),Yt(),!1;if(e.target.files[0]&&e.target.files[0].name.length>0){L(`User selected project: ${e.target.files[0].name}`);const t=await Gt(e.target.files);if(!t||0!==t.status)return console.log("SelectProjectFile: Load project failed."),Promise.reject(t.message);window.localStorage.setItem(o,JSON.stringify(t.project.getDetails())),Xt.isProjectFileValid=!0,L("Project conversion successful. A copy is in local storage"),function(){const e=document.getElementById("open-project-select-file-open");e&&e.classList.remove("disabled")}()}return!0})(e).catch((e=>{jt(),b("Project Load Error",`Unable to load the selected project file. The error reported is: "${e}."`)}))})),this.isEventHandler=!0)},show:function(){if(this.isEventHandler)if(this.reset(),G()&&"undefined"!==G().name&&window.localStorage.setItem(s,JSON.stringify(G())),bn()){S("Checking Project Changes","The current project has been modified. Click Yes to\ndiscard the current changes and open an existing project.",(function(e){e&&zt()}))}else zt();else console.log('Initialize "Open Project" dialog event handlers first.')},reset:function(){Wt("#open-project-dialog-title").html(y("editor_open")),Yt(),this.clearFilename(),this.clearLocalTempStorage()},clearFilename:function(){const e=Wt("#open-project-select-file");if(e.length>0){e[0].value.length>0&&(e[0].value="")}},clearLocalTempStorage:function(){L("Clearing temporary project from local storage"),window.localStorage.removeItem(o)}};function Yt(){const e=document.getElementById("open-project-select-file-open");e&&e.classList.add("disabled")}function zt(){Wt("#open-project-dialog").modal({keyboard:!1,backdrop:"static",show:!0})}function jt(){Wt("#open-project-dialog").modal("hide"),L("Closing the 'Open Project' dialog")}var Kt=n(755);const qt={isProjectFileValid:!1,isEventHandler:!1,initEventHandlers:function(){this.isEventHandler?L("Import Project dialog handlers already initialized"):(Kt("#selectfile-append").on("click",(function(){!function(){let e="";const t=G(),n=JSON.parse(window.localStorage.getItem(o));if(!n)return void L("Imported project Json conversion failed");const i=V(n);if(0===i.code.length)return void L("Imported project contains no code segment");L(`Adding project '${i.name}' to current project '${t.name}'`);const s=i.code,l="</xml>".length;let r="",a=s;if(a=-1===a.indexOf("<variables>")?a.substring(s.indexOf("<block"),a.length-l):a.substring(s.indexOf("<variables"),a.length-l),a.indexOf("<variables")>-1&&r.indexOf("<variables")>-1){const t=/type="(\w*)" id="(.{20})">(\w+)</g,n=[],i=[];let o=a.split("</variables>");a=o[1];let s=o[0].split("<variables")[1].replace(t,(function(e,t,i,o){return n.push([o,i,t]),e}));o=r.split("</variables>"),r=o[1],s=o[0].replace(t,(function(e,t,n,o){return i.push([o,n,t]),e})),s=[i.length,n.length];for(let e=0;e<s[0];e++)for(let t=0;t<s[1];t++)if(n[t][0]===i[e][0]){const o=a.split(n[t][1]);a=o.join(i[e][1]),n[t][1]=null}for(let e=0;e<s[1];e++)n[e][1]&&i.push(n[e]);s="<variables>",i.forEach((function(e){s+='<variable id="'+e[1]+'" type="'+e[2]+'">'+e[0]+"</variable>"})),s+="</variables>",e=s+r+a}else e=a.indexOf("<variables")>-1&&-1===r.indexOf("<variables")?a+r:r+a;t.setCodeWithNamespace(e),un(t)}(),Zt()})),Kt("#selectfile-replace").on("click",(function(){let e="";const t=window.localStorage.getItem(o);if(t){const n=V(JSON.parse(t));n?fn(n):e="The imported project cannot be found in storage."}else e="The imported project cannot be found in storage.";Zt(),e.length>0&&b("Project Load Error","Unable to import the project",(()=>{L("Possible project load failure")}))})),Kt("#selectfile-cancel-button").on("click",(function(){qt.clearLocalTempStorage(),Zt()})),Kt("#import-project-dialog").on("hidden.bs.modal",(()=>{qt.clearFileName()})),Kt("#selectfile").focus((function(){Kt("#selectfile-verify-notvalid").css("display","none"),Kt("#selectfile-verify-valid").css("display","none"),Kt("#selectfile-verify-boardtype").css("display","none")})),document.getElementById("selectfile").addEventListener("change",(e=>{(async function(e){const t=document.getElementById("selectfile");if(0===t.files.length)return L("No file selected"),$t(),!1;if(e.target.files[0]&&e.target.files[0].name.length>0){L(`User selected project: ${e.target.files[0].name}`);const t=await Gt(e.target.files);if(!t||0!==t.status)return Promise.reject(t.message);window.localStorage.setItem(o,JSON.stringify(t.project.getDetails())),qt.isProjectFileValid=!0,L("Project conversion successful. A copy is in local storage"),function(){const e=document.getElementById("selectfile-append");e&&e.classList.remove("disabled");const t=document.getElementById("selectfile-replace");t&&t.classList.remove("disabled")}()}return!0})(e).catch((e=>{L(`Select project file rejected: ${e}`),Zt(),b("Project Load Error",`Unable to load the selected project file. The error reported is: "${e}."`)}))})),this.isEventHandler=!0)},show:function(){if(this.isEventHandler)if(this.reset(),G()&&"undefined"!==G().name&&window.localStorage.setItem(s,JSON.stringify(G())),bn()){S("Checking Project Changes","The current project has been modified. Click Yes to\ndiscard the current changes and open an existing project.",(function(e){e&&Jt()}))}else Jt();else L("Initialize dialog event handlers first.")},reset:function(){Kt("#import-project-dialog-title").html(y("editor_import")),Kt("#import-project-dialog span").html(y("editor_append")),$t(),this.clearFileName(),window.localStorage.removeItem(o)},clearFileName:function(){const e=Kt("#selectfile");if(e.length>0){e[0].value.length>0&&(e[0].value="")}},clearLocalTempStorage:function(){L("Clearing temporary project from local storage"),window.localStorage.removeItem(o)}};function $t(){const e=document.getElementById("selectfile-append");e&&e.classList.add("disabled");const t=document.getElementById("selectfile-replace");t&&t.classList.add("disabled")}function Jt(){Kt("#import-project-dialog").modal({keyboard:!1,backdrop:"static"})}function Zt(){Kt("#import-project-dialog").modal("hide")}var Qt=n(755);(async()=>{await i.S1({dsn:"https://27707de6f602435b8c6bf1702efafd1d@sentry.io/2751639",release:"SoloCup:1.6.3"})})().then((e=>{console.log("Sentry has started.")})).catch((e=>console.log("Sentry failed to start")));let en=null,tn=null;setInterval(we,2e3);function nn(){return en}function on(){Qt("#licenseModal").modal()}function sn(){const e=(new Date).getFullYear().toString();document.getElementById("about-solo-version").innerHTML=`BlocklyProp Solo ${function(){let e="v1.6.3";(window.location.hostname.indexOf(r)>=0||window.location.hostname.indexOf("localhost")>=0)&&(e+=".232-Beta-1");return e}()}, Copyright &copy; 2015, ${e}, Parallax Inc.`;const t=document.getElementById("about-solo-launcher-version");let n;n=ae.getLauncherVersion().length>0?`v${ae.getLauncherVersion()}, `:"",t.innerHTML=`BlocklyProp Launcher ${n} Copyright &copy; ${e}, Parallax Inc.`,Qt("#about-solo-dialog").modal()}function ln(){const e=function(){const e=new Date,t=new U("MyProject","Empty default project",W.activityboard,H.PROPC,U.getEmptyProjectCodeHeader(),e,e,e.getTime());return t.setCodeWithNamespace(""),t}(),t=w(e);t&&ae.setTerminalBaudRate(t.boardType.baudrate),tn=new Xe(e.boardType.name),tn||console.log("Error allocating CodeEditor object"),rn(e),ue()}function rn(e,t){if(e&&void 0===e.boardType.name)return t&&t({error:1,message:"Project data is null."}),-1;let n=G();if(n&&e!==n&&(n=w(e)),!n)throw new Error("Unable to load the project.");var i;if(n&&ae.setTerminalBaudRate(n.boardType.baudrate),i=n.boardType,v=i,!n.isTimerSet()){const e=new Ft(0);e.myCallback=function(){bn()&&Tn()},e.start(10),n.setProjectTimer(e)}return function(){const e=_().getMainWorkspace();e&&(e.clearUndo(),e.clear())}(),an(n.name),pn(n.boardType.name),"s3"===n.boardType.name?(hn(n.boardType.name),Qt("#online-help").attr("href","https://learn.parallax.com/s3-blocks"),On("blocks")):"propcfile"===n.boardType.name?(Et(_()),Qt("#online-help").attr("href","https://learn.parallax.com/support/C/propeller-c-reference"),On("propc")):(hn(n.boardType.name),Qt("#online-help").attr("href","https://learn.parallax.com/ab-blocks"),On("blocks")),n.setCode(En()),G()&&Qt("#edit-project-details").html(y("editor_edit-details")),In(0,!0),t&&t(),0}function an(e){e.length>l?Qt(".project-name").html(e.substring(0,19)+"..."):Qt(".project-name").html(e)}function pn(e){const t={"activity-board":"images/board-icons/IconActivityBoard.png",s3:"images/board-icons/IconS3.png",heb:"images/board-icons/IconBadge.png","heb-wx":"images/board-icons/IconBadgeWX.png",flip:"images/board-icons/IconFlip.png",other:"images/board-icons/IconOtherBoards.png",propcfile:"images/board-icons/IconC.png"},n=document.getElementById("project-icon");n&&(n.innerHTML=`\n        <img src="${t[e]}"\n             title="Project board type is: ${e}"\n             alt="${e}"/>`)}function cn(){bn()&&f(_().Msg.DIALOG_SAVE_TITLE,_().Msg.DIALOG_SAVE_FIRST,(function(e){if(e){const e=G();_n(e),e.resetProjectTimer()}}),"Yes","No"),Qt("#save-as-project-name").val(G().name);const e=Qt("#save-as-board-type");e.empty(),x().saves_to.forEach((function(t){e.append(Qt("<option />").val(t[1]).text(t[0]))})),Qt("#save-as-type-dialog").modal({keyboard:!1,backdrop:"static"})}function dn(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")}function _n(e){const t=(new DOMParser).parseFromString(En(),"text/xml");if(e&&"propcfile"!==e.boardType.name&&t.getElementsByTagName("block").length<1)return void b(_().Msg.DIALOG_EMPTY_PROJECT,_().Msg.DIALOG_CANNOT_SAVE_EMPTY_PROJECT);const n=N(e.name),i=t.children[0].innerHTML,o=document.getElementsByClassName("blocklyBlockCanvas"),l=o[0].outerHTML.replace(/&nbsp;/g," "),r=o[0].getBoundingClientRect(),a=r.height+r.top,p=function(e,t){const n=(t+100).toString(),i=(e+236).toString();let o="";return o+='<svg blocklyprop="blocklypropproject" xmlns="http://www.w3.org/2000/svg" ',o+='xmlns:html="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink" ',o+='version="1.1" class="blocklySvg"><style>.blocklySvg { background-color: #fff; ',o+="overflow: auto; width:"+i+"px; height:"+n+"px;} .blocklyWidgetDiv {display: none; position: absolute; ",o+="z-index: 999;} .blocklyPathLight { fill: none; stroke-linecap: round; ",o+="stroke-width: 2;} .blocklyDisabled>.blocklyPath { fill-opacity: .5; ",o+="stroke-opacity: .5;} .blocklyDisabled>.blocklyPathLight, .blocklyDisabled>",o+=".blocklyPathDark {display: none;} .blocklyText {cursor: default; fill: ",o+="#fff; font-family: sans-serif; font-size: 11pt;} .blocklyNonEditableText>text { ",o+="pointer-events: none;} .blocklyNonEditableText>rect, .blocklyEditableText>rect ",o+="{fill: #fff; fill-opacity: .6;} .blocklyNonEditableText>text, .blocklyEditableText>",o+="text {fill: #000;} .blocklyBubbleText {fill: #000;} .blocklySvg text {user",o+="-select: none; -moz-user-select: none; -webkit-user-select: none; cursor: ",o+="inherit;} .blocklyHidden {display: none;} .blocklyFieldDropdown:not(.blocklyHidden) ",o+="{display: block;} .bkginfo {cursor: default; fill: rgba(0, 0, 0, 0.3); font-family: ",o+="sans-serif; font-size: 10pt;}</style>",o}(r.width+r.left,a),c=function(e){let t="";const n=new Date;return t+='<rect x="100%" y="100%" rx="7" ry="7" width="218" height="84" style="fill:rgba(255,255,255,0.4);" transform="translate(-232,-100)" />',t+='<text class="bkginfo" x="100%" y="100%" transform="translate(-225,-83)" style="font-weight:bold;">Parallax BlocklyProp Project</text>',t+='<text class="bkginfo" x="100%" y="100%" transform="translate(-225,-53)">Title: '+dn(e.name)+"</text>",t+='<text class="bkginfo" x="100%" y="100%" transform="translate(-225,-23)">Device: '+e.boardType.name+"</text>",t+='<text class="bkginfo" x="100%" y="100%" transform="translate(-225,-8)">Description: '+dn(e.description)+"</text>",t+='<text class="bkginfo" x="100%" y="100%" transform="translate(-225,13)">data-createdon="'+e.getCreated()+'" data-lastmodified="'+n+'"></text>',t+=`<text class="bkginfo" x="100%" y="100%" transform="translate(-225,23)">uuid="${e.uuid}" version="${e.version}"></text>`,t}(e),d=new Blob([p+l+c+i+"<ckm>000000000000</ckm></svg>"],{type:"image/svg+xml"});u(d,`${n}.svg`);const h=new Date;e.timestamp=h.getTime(),e.setCodeWithNamespace(i),window.localStorage.setItem(s,JSON.stringify(e))}function un(e){L("Refreshing editor canvas"),Et(_()),On("blocks"),tn=new Xe(e.boardType.name),tn||console.log("Error allocating CodeEditor object"),ue()}function hn(e){!function(){if(_().Css.CONTENT){const e=O("font");if(e){for(let t=0;t<_().Css.CONTENT.length;t++)_().Css.CONTENT[t]=_().Css.CONTENT[t].replace(/Arial, /g,"").replace(/sans-serif;/g,"'"+e+"', sans-serif;");Qt("html, body").css("font-family","'"+e+"', sans-serif"),Qt(".blocklyWidgetDiv .goog-menuitem-content").css("font","'normal 14px '"+e+"', sans-serif !important'")}else for(let e=0;e<_().Css.CONTENT.length;e++)_().Css.CONTENT[e]=_().Css.CONTENT[e].replace(/Arial, /g,"").replace(/sans-serif;/g,"Arimo, sans-serif;")}}();const t={toolbox:Bt(e),trashcan:!0,media:"images/blockly/",readOnly:"propcfile"===e,comments:!1,zoom:{controls:!0,wheel:!1,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2},grid:{spacing:20,length:5,colour:"#fbfbfb",snap:!1}};0!==document.getElementsByClassName("blocklyToolboxDiv").length&&(document.getElementById("content_blocks").innerHTML=""),en=_().inject("content_blocks",t),Et(_()),_().mainWorkspace.createVariable(_().LANG_VARIABLES_GET_ITEM)}function mn(e){if(_().mainWorkspace)try{const t=_().Xml.textToDom(e);_().Xml.domToWorkspace(t,_().mainWorkspace)}catch(e){!function(e,t){t&&console.log("%s",t);console.log("%s",e.message),console.log(e.stack)}(e,"Error while loading the toolbox."),b("Project Load Error","Project was load was not successful.\nLoading default project.",(()=>{ln()}))}}function gn(e){const t=Qt("body");t.removeClass("Windows").removeClass("MacOS").removeClass("Linux").removeClass("ChromeOS"),t.addClass(e)}function Tn(){const e=G();if(!e)return void L("Project save timer: project is null.");const t=Math.ceil(e.getProjectTimeSinceLastSave());if(0===t)return void L("Nudge timer is likely no longer working");const n=[y("editor_save-check_warning-1"),y("editor_save-check_warning-2")];Qt("#save-check-warning-message").html(((e,t)=>`${e[0]}${t}${e[1]}`)(n,t)),Qt("#save-check-dialog").modal({keyboard:!1,backdrop:"static"})}function In(e,t=!1){setTimeout((()=>{const e=document.getElementById("editor").offsetHeight,n=window.innerHeight-e,i=window.innerWidth,o=[document.getElementById("content_blocks"),document.getElementById("content_propc"),document.getElementById("content_xml")];for(let t=0;t<3;t++)o[t].style.left="0px",o[t].style.top=e+"px",o[t].style.width=i+"px",o[t].style.height=n+"px";_().mainWorkspace&&"none"!==o[0].style.display&&(_().svgResize(en),t&&_().getMainWorkspace().scrollCenter())}),e||10)}function bn(){const e=G();if(!e||void 0===e.name)return console.log("There is no project defined."),console.log("This should probably be investigated."),!1;const t=En();return 0!==e.code.localeCompare(t)}function En(){const e=G();if(e&&"propcfile"===e.boardType.name)return Ye();if(_().Xml&&_().mainWorkspace){const e=_().Xml.workspaceToDom(_().mainWorkspace);return _().Xml.domToText(e)}return e&&e.code?e.code:U.getEmptyProjectCodeHeader()+"</xml>"}function Sn(){L("Creating a new project");const e=Qt("#new-project-name").val(),t=Qt("#new-project-description").val(),n=Qt("#new-project-board-type").val();try{const i=U.convertBoardType(n);void 0===i&&console.log("Unknown board type: %s",n);const o=new Date,l=o.getTime(),r=new U(e,t,i,H.PROPC,"",o,o,l,!0);r.stashProject(s),B();const a=w(r);a&&ae.setTerminalBaudRate(a.boardType.baudrate);const p=new Ft(0);p.myCallback=function(){bn&&Tn()},p.start(10),r.setProjectTimer(p),rn(r),ue()}catch(e){L(`Error while creating project object. ${e.message}.`)}}function fn(e){try{B();const t=w(e);t&&ae.setTerminalBaudRate(t.boardType.baudrate),rn(e),tn=new Xe(e.boardType.name),tn||console.log("Error allocating CodeEditor object"),ue()}catch(e){L(`Error while creating project object. ${e.message}.`)}}function On(e){const t=G(),n=ze(),i=null,o=e.replace("tab_",""),s="propcfile"===t.boardType.name;switch(s&&Qt(".propc-only").removeClass("hidden"),o){case"blocks":Qt(".blocklyToolboxDiv").css("display","block"),Qt("#content_xml").css("display","none"),Qt("#content_propc").css("display","none"),Qt("#content_blocks").css("display","block"),Qt("#btn-view-xml").css("display","none"),Qt("#btn-view-propc").css("display","inline-block"),Qt("#btn-view-blocks").css("display","none"),_().svgResize(nn()),nn().render();break;case"propc":if(Qt(".blocklyToolboxDiv").css("display","none"),Qt("#content_xml").css("display","none"),Qt("#content_propc").css("display","block"),Qt("#content_blocks").css("display","none"),Qt("#btn-view-xml").css("display","none"),Qt("#btn-view-blocks").css("display",s?"none":"inline-block"),Qt("#btn-view-propc").css("display","none"),s){if(n&&""!==n.getValue()||(n.setValue(atob((t.code.match(/<field name="CODE">(.*)<\/field>/)||["",""])[1]||"")),n.gotoLine(0)),""===n.getValue()){let e="// ------ Libraries and Definitions ------\n";e+='#include "simpletools.h"\n\n\n',e+="// ------ Global Variables and Objects ------",e+="\n\n\n// ------ Main Program ------\n",e+="int main() {\n\n\nwhile (1) {\n\n\n}}";const t=C(e);n.setValue(t),n.gotoLine(0)}}else{const e=C(_().propc.workspaceToCode(_().mainWorkspace)),t=ze();t.setValue(e),t.gotoLine(0)}break;case"xml":Qt(".blocklyToolboxDiv").css("display","none"),Qt("#content_xml").css("display","block"),Qt("#content_propc").css("display","none"),Qt("#content_blocks").css("display","none"),Qt("#btn-view-xml").css("display","none"),Qt("#btn-view-propc").css("display","none"),Qt("#btn-view-blocks").css("display","inline-block"),i.setValue(_().Xml.domToPrettyText(_().Xml.workspaceToDom(_().mainWorkspace))||""),i.getSession().setUseWrapMode(!0),i.gotoLine(0)}}Qt((()=>{L(`Blockly Core: ${_().VERSION}`);(async function(){(function(){let e=a,t="BlocklyProp<br><strong>Solo</strong>";window.location.hostname!==r&&"localhost"!==window.location.hostname||(e=p,t="BlocklyProp<br><strong>Solocup</strong>");Qt("#nav-logo").html(t),Qt("#app-banner-title").html("BlocklyProp "+e)})(),await async function(){Qt(".keyed-lang-string").each((async function(e,t){await(async e=>{try{const t=k(e),n=t.attr("data-key");n&&(t.is("a")?t.attr("href",P[n]):t.is("input")?t.attr("value",P[n]):t.html(P[n]))}catch(e){L(`Missing page_text_label: ${e.message}`)}})(t)}));for(let e=0;e<F.length;e++)F[e]&&document.getElementById(F[e][0])&&Qt("#"+F[e][0]).attr("title",F[e][1])}(),await async function(){Qt(".client-win32-link").attr("href",`${c}/clients/BlocklyPropClient-setup-32.exe`),Qt(".client-win32zip-link").attr("href",`${c}/clients/BlocklyPropClient-setup-32.zip`),Qt(".client-win64-link").attr("href",`${c}/clients/BlocklyPropClient-setup-64.exe`),Qt(".client-win64zip-link").attr("href",`${c}/clients/BlocklyPropClient-setup-64.zip`),Qt(".launcher-win64-link").attr("href",`${c}/launcher/Setup-BPLauncher-Win.exe`),Qt(".launcher-win64zip-link").attr("href",`${c}/launcher/Setup-BPLauncher-Win.exe.zip`),Qt(".client-mac-link").attr("href",`${c}/clients/BlocklyPropClient-setup-MacOS.pkg`),Qt(".launcher-mac-link-big-sur").attr("href",`${c}/launcher/Setup-BPLauncher-MacOS-Big-Sur.zip`),Qt(".launcher-mac-link-catalina").attr("href",`${c}/launcher/Setup-BPLauncher-MacOS-Catalina.zip`),Qt(".launcher-mac-link-mojave").attr("href",`${c}/launcher/Setup-BPLauncher-MacOS-Mojave.zip`),Qt(".launcher-mac-link-high_sierra").attr("href",`${c}/launcher/Setup-BPLauncher-MacOS-High-Sierra.zip`)}(),await async function(){const e="BlocklyProp<br><strong>Solo</strong>";Qt("#nav-logo").html(e)}()})().catch((e=>console.log(e))),window.addEventListener("beforeunload",(function(e){if(L("Leaving the page"),G()&&void 0!==G().name){const e={};Object.assign(e,G()),e.code=En();const t=new Date;e.timestamp=t.getTime(),window.localStorage.setItem(s,JSON.stringify(e))}if(bn())return e.preventDefault(),e.returnValue=_().Msg.DIALOG_CHANGED_SINCE,_().Msg.DIALOG_CHANGED_SINCE})),Nt.initEventHandlers(),Xt.initEventHandlers(),qt.initEventHandlers(),Qt(window).on("resize",(function(){In(100)})),Qt("#prop-btn-comp").on("click",(()=>(async()=>{const e=ze(),t=e.getReadOnly()?C(_().propc.workspaceToCode(_().mainWorkspace)):e.getValue();t.indexOf("EMPTY_PROJECT")>-1?dt(_().Msg.DIALOG_EMPTY_PROJECT,_().Msg.DIALOG_CANNOT_COMPILE_EMPTY_PROJECT):(_t("Compile"),await je("compile",t).then((()=>Ot())))})())),Qt("#prop-btn-ram").on("click",(()=>{ut("Load into RAM","bin",0,"RAM")})),Qt("#prop-btn-eeprom").on("click",(()=>{ut("Load into EEPROM","eeprom",0,"EEPROM")})),Qt("#prop-btn-term").on("click",(()=>de())),Qt("#prop-btn-graph").on("click",(()=>gt())),Qt("#propc-find-btn").on("click",(()=>{ze().find(document.getElementById("propc-find").value,{},!0)})),Qt("#propc-replace-btn").on("click",(()=>{ze().replace(document.getElementById("propc-replace").value,{needle:document.getElementById("propc-find").value})})),Qt("#find-replace-close").on("click",(()=>{"none"===document.getElementById("find-replace").style.display?document.getElementById("find-replace").style.display="block":document.getElementById("find-replace").style.display="none"})),Qt("#term-graph-setup").on("click",(()=>!0)),Qt("#upload-close").on("click",(()=>(Qt("#selectfile").val(""),Qt("#selectfile-verify-notvalid").css("display","none"),Qt("#selectfile-verify-valid").css("display","none"),Qt("#selectfile-verify-boardtype").css("display","none"),document.getElementById("selectfile-replace").disabled=!0,void(document.getElementById("selectfile-append").disabled=!0)))),Qt(".project-name").attr("contenteditable","true").on("focus",(()=>{const e=Qt(".project-name");e.html(G().name),e.addClass("project-name-editable")})).on("blur",(()=>{const e=Qt(".project-name");if(e.setSelectionRange)e.focus(),e.setSelectionRange(0,0);else if(e.createTextRange){const t=e.createTextRange();t.moveStart("character",0),t.select()}e.removeClass("project-name-editable"),G().name.length>l&&e.html(G().name.substring(0,19)+"...")})).on("keydown",(e=>{13!==e.which&&13!==e.keyCode||(e.preventDefault(),Qt(".project-name").trigger("blur"))})).on("keyup",(()=>{const e=Qt(".project-name").html();e.length>100||e.length<1?Qt(".project-name").html(G().name):G().name=e})),Qt("#btn-view-propc").on("click",(()=>On("tab_propc"))),Qt("#btn-view-blocks").on("click",(()=>On("tab_blocks"))),Qt("#btn-view-xml").on("click",(()=>On("tab_xml"))),Qt("#new-project-button").on("click",(()=>{Nt.show()})),Qt("#open-project-button").on("click",(()=>{Xt.show()})),Qt("#save-btn, #save-project").on("click",(()=>function(){const e=G();_n(e),e.setCode(En()),e.resetProjectTimer()}())),Qt("#save-check-dialog").on("hidden.bs.modal",(()=>{L("Closing the project save timer dialog.")})),document.getElementById("edit-project-details").addEventListener("click",(()=>{yt.editProjectDetails()})),Qt("#download-side").on("click",(()=>function(){const e=G(),t=_().propc.workspaceToCode(_().mainWorkspace);if(t.indexOf("EMPTY_PROJECT")>-1)b(_().Msg.DIALOG_EMPTY_PROJECT,_().Msg.DIALOG_CANNOT_SAVE_EMPTY_PROJECT);else{const n=N(e.boardType.name);let i=".c\n>compiler=C\n>memtype=cmm main ram compact\n";i+=">optimize=-Os\n>-m32bit-doubles\n>-fno-exceptions\n",i+=">defs::-std=c99\n",i+=">-lm\n>BOARD::ACTIVITYBOARD";const o=new Blob([t],{type:"text/plain"}),s=new Blob([n+i],{type:"text/plain"}),l=(new h).folder(n);l.file(n+".c",o),l.file(n+".side",s),l.generateAsync({type:"blob"}).then((function(e){u(e,n+".zip")}),(function(e){b(_().Msg.DIALOG_ERROR,_().Msg.DIALOG_SIDE_FILES_ERROR+e)}))}}())),Qt("#upload-project").on("click",(()=>qt.show())),document.getElementById("client-setup").addEventListener("click",St,!1),document.getElementById("editor-about").addEventListener("click",sn,!1),document.getElementById("editor-license").addEventListener("click",on,!1),Qt("#save-as-btn").on("click",(()=>cn())),Qt("#save-project-as").on("click",(()=>cn())),Qt("#save-as-board-type").on("change",(()=>function(e){if("offline"!==e){const e=G().boardType.name,t=Qt("#save-as-board-type").val();document.getElementById("save-as-verify-boardtype").style.display=e===t||"propcfile"===t?"none":"block"}}(Qt("#saveAsDialogSender").html()))),Qt("#save-as-board-btn").on("click",(()=>function(e,t){const n=new Date,i={board:e,code:U.getEmptyProjectCodeHeader(),created:n,description:"","description-html":"",id:0,modified:n,name:t,private:!0,shared:!1,type:"PROPC",user:"offline",yours:!0,timestamp:n.getTime()};window.localStorage.setItem(s,JSON.stringify(i)),function(e=""){L("Redirecting to the editor page"),ae.closeConnection(),window.location=e.length>0?`blocklyc.html${e}`:"\\blocklyc.html"}(function(e=!1){return e?window.location.search:window.location.search.replace(/newProject=[a-zA-Z0-9]*&*|openFile=[a-zA-Z0-9]*&*/g,"")}())}(Qt("#save-as-board-type").val(),Qt("#save-as-project-name").val()))),Qt("#btn-graph-play").on("click",(()=>bt(""))),Qt("#btn-graph-snapshot").on("click",(()=>{E(_().Msg.DIALOG_DOWNLOAD_GRAPH_DIALOG,"BlocklyProp_Graph",(function(e){if(e){e=N(e);const t=document.getElementById("serial_graphing"),n=new RegExp('xmlns="http://www.w3.org/2000/xmlns/"',"g"),i='class="ct-label ct-horizontal ct-end"',o="<style>.ct-grid-background,.ct-line{fill:none}.ct-point{stroke-width:10px;stroke-linecap:round}.ct-grid{stroke:rgba(0,0,0,.2);stroke-width:1px;stroke-dasharray:2px}.ct-area{stroke:none;fill-opacity:.1}.ct-line{stroke-width:1px}.ct-point{stroke-width:5px}.ct-series-a{stroke:#00f}.ct-series-b{stroke:#0bb}.ct-series-c{stroke:#0d0}.ct-series-d{stroke:#dd0}.ct-series-e{stroke:#f90}.ct-series-f{stroke:red}.ct-series-g{stroke:#d09}.ct-series-h{stroke:#90d}.ct-series-i{stroke:#777}.ct-series-j{stroke:#000}text{font-family:sans-serif;fill:rgba(0,0,0,.4);color:rgba(0,0,0,.4);font-size:.75rem;line-height:1;overflow:visible}</style>";let s=(new XMLSerializer).serializeToString(t);s=s.replace(n,""),s=s.replace(/foreignObject/g,"text"),s=s.replace(/([<|</])a[0-9]+:/g,"$1"),s=s.replace(/xmlns: /g,""),s=s.replace(/x="10" /g,'x="40" '),s=s.substring(s.indexOf("<svg"),s.length-6);const l=s.indexOf(i),r=parseFloat(s.substring(s.indexOf(' y="',l+20)+4,s.indexOf('"',s.indexOf(' y="',l+20)+4))),a=new RegExp('y="'+r+'"',"g");s=s.replace(a,'y="'+(r+12)+'"');const p=s.indexOf(">")+1;s=s.substring(0,p)+o+s.substring(p,s.length),s=s.replace(/<text style="overflow: visible;" ([xy])="([0-9.-]+)" ([xy])="([0-9.-]+)" [a-z]+="[0-9.]+" [a-z]+="[0-9.]+"><span[0-9a-zA-Z =.":;/-]+>([0-9.-]+)<\/span>/g,'<text $1="$2" $3="$4">$5');const c=new Blob([s],{type:"image/svg+xml"});(0,u.saveAs)(c,e+".svg")}}))})),Qt("#btn-graph-csv").on("click",(()=>{E(_().Msg.DIALOG_DOWNLOAD_DATA_DIALOG,"BlocklyProp_Data",(function(e){if(e){e=N(e);const t=at.join("\n"),n=t.indexOf("\n")+1,i=t.indexOf("\n",n+1),o=new Blob([t.substring(0,n)+t.substring(i+1,t.length-1)],{type:"text/csv"});(0,u.saveAs)(o,e+".csv")}}))})),Qt("#btn-graph-clear").on("click",(()=>Tt("clear"))),Qt(".show-os-win").on("click",(()=>gn("Windows"))),Qt(".show-os-mac").on("click",(()=>gn("MacOS"))),Qt(".show-os-chr").on("click",(()=>gn("ChromeOS"))),Qt(".show-os-lnx").on("click",(()=>gn("Linux"))),Qt("#comPort").on("change",(e=>{L(`Selecting port: ${e.target.value}`),ae.setSelectedPort(e.target.value),ue()})),document.getElementById("client-loading").classList.add("hidden"),ue(),Qt(".url-prefix").attr("href",(function(e,t){return t})),we(),L("Init terminal communications"),new oe(document.getElementById("serial_console"),(function(e){if(ae.type===le&&ae.activeConnection){const t={type:"serial-terminal",outTo:"terminal",portPath:Ve(),baudrate:ae.terminalBaudRate.toString(10),msg:ae.rxBase64?btoa(e):e,action:"msg"};ae.activeConnection.send(JSON.stringify(t))}}),null);const e=window.localStorage.getItem(s);if(e){fn(V(JSON.parse(e)))}else L("Creating default project"),ln()}))}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var s=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=t,i.amdD=function(){throw new Error("define cannot be used indirect")},e=[],i.O=(t,n,o,s)=>{if(!n){var l=1/0;for(c=0;c<e.length;c++){for(var[n,o,s]=e[c],r=!0,a=0;a<n.length;a++)(!1&s||l>=s)&&Object.keys(i.O).every((e=>i.O[e](n[a])))?n.splice(a--,1):(r=!1,s<l&&(l=s));if(r){e.splice(c--,1);var p=o();void 0!==p&&(t=p)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,o,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={826:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var o,s,[l,r,a]=n,p=0;for(o in r)i.o(r,o)&&(i.m[o]=r[o]);if(a)var c=a(i);for(t&&t(n);p<l.length;p++)s=l[p],i.o(e,s)&&e[s]&&e[s][0](),e[l[p]]=0;return i.O(c)},n=self.webpackChunkblocklyprop_solo=self.webpackChunkblocklyprop_solo||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=i.O(void 0,[216],(()=>i(392)));o=i.O(o)})();